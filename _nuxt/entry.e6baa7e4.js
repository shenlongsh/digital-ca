/**
* @vue/shared v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function uw(s,e){const t=new Set(s.split(","));return e?n=>t.has(n.toLowerCase()):n=>t.has(n)}const at={},tc=[],Bs=()=>{},Qk=()=>!1,Sf=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),hw=s=>s.startsWith("onUpdate:"),Ht=Object.assign,fw=(s,e)=>{const t=s.indexOf(e);t>-1&&s.splice(t,1)},zk=Object.prototype.hasOwnProperty,je=(s,e)=>zk.call(s,e),Ne=Array.isArray,sc=s=>Af(s)==="[object Map]",Mm=s=>Af(s)==="[object Set]",Ey=s=>Af(s)==="[object Date]",Te=s=>typeof s=="function",At=s=>typeof s=="string",rr=s=>typeof s=="symbol",rt=s=>s!==null&&typeof s=="object",jb=s=>(rt(s)||Te(s))&&Te(s.then)&&Te(s.catch),Jb=Object.prototype.toString,Af=s=>Jb.call(s),Zk=s=>Af(s).slice(8,-1),Wb=s=>Af(s)==="[object Object]",dw=s=>At(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,nc=uw(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Hm=s=>{const e=Object.create(null);return t=>e[t]||(e[t]=s(t))},e0=/-(\w)/g,En=Hm(s=>s.replace(e0,(e,t)=>t?t.toUpperCase():"")),t0=/\B([A-Z])/g,Tc=Hm(s=>s.replace(t0,"-$1").toLowerCase()),$m=Hm(s=>s.charAt(0).toUpperCase()+s.slice(1)),ug=Hm(s=>s?`on${$m(s)}`:""),ki=(s,e)=>!Object.is(s,e),bd=(s,e)=>{for(let t=0;t<s.length;t++)s[t](e)},qb=(s,e,t,n=!1)=>{Object.defineProperty(s,e,{configurable:!0,enumerable:!1,writable:n,value:t})},tp=s=>{const e=parseFloat(s);return isNaN(e)?s:e},s0=s=>{const e=At(s)?Number(s):NaN;return isNaN(e)?s:e};let Cy;const Gb=()=>Cy||(Cy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Fm(s){if(Ne(s)){const e={};for(let t=0;t<s.length;t++){const n=s[t],r=At(n)?a0(n):Fm(n);if(r)for(const i in r)e[i]=r[i]}return e}else if(At(s)||rt(s))return s}const n0=/;(?![^(]*\))/g,r0=/:([^]+)/,i0=/\/\*[^]*?\*\//g;function a0(s){const e={};return s.replace(i0,"").split(n0).forEach(t=>{if(t){const n=t.split(r0);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Pt(s){let e="";if(At(s))e=s;else if(Ne(s))for(let t=0;t<s.length;t++){const n=Pt(s[t]);n&&(e+=n+" ")}else if(rt(s))for(const t in s)s[t]&&(e+=t+" ");return e.trim()}function o0(s){if(!s)return null;let{class:e,style:t}=s;return e&&!At(e)&&(s.class=Pt(e)),t&&(s.style=Fm(t)),s}const l0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",c0=uw(l0);function Yb(s){return!!s||s===""}function u0(s,e){if(s.length!==e.length)return!1;let t=!0;for(let n=0;t&&n<s.length;n++)t=gc(s[n],e[n]);return t}function gc(s,e){if(s===e)return!0;let t=Ey(s),n=Ey(e);if(t||n)return t&&n?s.getTime()===e.getTime():!1;if(t=rr(s),n=rr(e),t||n)return s===e;if(t=Ne(s),n=Ne(e),t||n)return t&&n?u0(s,e):!1;if(t=rt(s),n=rt(e),t||n){if(!t||!n)return!1;const r=Object.keys(s).length,i=Object.keys(e).length;if(r!==i)return!1;for(const a in s){const o=s.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!gc(s[a],e[a]))return!1}}return String(s)===String(e)}function Xb(s,e){return s.findIndex(t=>gc(t,e))}const Oe=s=>At(s)?s:s==null?"":Ne(s)||rt(s)&&(s.toString===Jb||!Te(s.toString))?JSON.stringify(s,Qb,2):String(s),Qb=(s,e)=>e&&e.__v_isRef?Qb(s,e.value):sc(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,r],i)=>(t[hg(n,i)+" =>"]=r,t),{})}:Mm(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>hg(t))}:rr(e)?hg(e):rt(e)&&!Ne(e)&&!Wb(e)?String(e):e,hg=(s,e="")=>{var t;return rr(s)?`Symbol(${(t=s.description)!=null?t:e})`:s};/**
* @vue/reactivity v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let bs;class zb{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=bs,!e&&bs&&(this.index=(bs.scopes||(bs.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=bs;try{return bs=this,e()}finally{bs=t}}}on(){bs=this}off(){bs=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function mw(s){return new zb(s)}function h0(s,e=bs){e&&e.active&&e.effects.push(s)}function Zb(){return bs}function f0(s){bs&&bs.cleanups.push(s)}let Xa;class gw{constructor(e,t,n,r){this.fn=e,this.trigger=t,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,h0(this,r)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Ci();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed&&(d0(t.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Ni()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=mi,t=Xa;try{return mi=!0,Xa=this,this._runnings++,Ny(this),this.fn()}finally{Iy(this),this._runnings--,Xa=t,mi=e}}stop(){this.active&&(Ny(this),Iy(this),this.onStop&&this.onStop(),this.active=!1)}}function d0(s){return s.value}function Ny(s){s._trackId++,s._depsLength=0}function Iy(s){if(s.deps.length>s._depsLength){for(let e=s._depsLength;e<s.deps.length;e++)eS(s.deps[e],s);s.deps.length=s._depsLength}}function eS(s,e){const t=s.get(e);t!==void 0&&e._trackId!==t&&(s.delete(e),s.size===0&&s.cleanup())}let mi=!0,sp=0;const tS=[];function Ci(){tS.push(mi),mi=!1}function Ni(){const s=tS.pop();mi=s===void 0?!0:s}function pw(){sp++}function ww(){for(sp--;!sp&&np.length;)np.shift()()}function sS(s,e,t){if(e.get(s)!==s._trackId){e.set(s,s._trackId);const n=s.deps[s._depsLength];n!==e?(n&&eS(n,s),s.deps[s._depsLength++]=e):s._depsLength++}}const np=[];function nS(s,e,t){pw();for(const n of s.keys()){let r;n._dirtyLevel<e&&(r??(r=s.get(n)===n._trackId))&&(n._shouldSchedule||(n._shouldSchedule=n._dirtyLevel===0),n._dirtyLevel=e),n._shouldSchedule&&(r??(r=s.get(n)===n._trackId))&&(n.trigger(),(!n._runnings||n.allowRecurse)&&n._dirtyLevel!==2&&(n._shouldSchedule=!1,n.scheduler&&np.push(n.scheduler)))}ww()}const rS=(s,e)=>{const t=new Map;return t.cleanup=s,t.computed=e,t},rm=new WeakMap,Qa=Symbol(""),rp=Symbol("");function gs(s,e,t){if(mi&&Xa){let n=rm.get(s);n||rm.set(s,n=new Map);let r=n.get(t);r||n.set(t,r=rS(()=>n.delete(t))),sS(Xa,r)}}function Zn(s,e,t,n,r,i){const a=rm.get(s);if(!a)return;let o=[];if(e==="clear")o=[...a.values()];else if(t==="length"&&Ne(s)){const l=Number(n);a.forEach((c,u)=>{(u==="length"||!rr(u)&&u>=l)&&o.push(c)})}else switch(t!==void 0&&o.push(a.get(t)),e){case"add":Ne(s)?dw(t)&&o.push(a.get("length")):(o.push(a.get(Qa)),sc(s)&&o.push(a.get(rp)));break;case"delete":Ne(s)||(o.push(a.get(Qa)),sc(s)&&o.push(a.get(rp)));break;case"set":sc(s)&&o.push(a.get(Qa));break}pw();for(const l of o)l&&nS(l,4);ww()}function m0(s,e){const t=rm.get(s);return t&&t.get(e)}const g0=uw("__proto__,__v_isRef,__isVue"),iS=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(rr)),_y=p0();function p0(){const s={};return["includes","indexOf","lastIndexOf"].forEach(e=>{s[e]=function(...t){const n=Qe(this);for(let i=0,a=this.length;i<a;i++)gs(n,"get",i+"");const r=n[e](...t);return r===-1||r===!1?n[e](...t.map(Qe)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{s[e]=function(...t){Ci(),pw();const n=Qe(this)[e].apply(this,t);return ww(),Ni(),n}}),s}function w0(s){rr(s)||(s=String(s));const e=Qe(this);return gs(e,"has",s),e.hasOwnProperty(s)}class aS{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){const r=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_isShallow")return i;if(t==="__v_raw")return n===(r?i?x0:uS:i?cS:lS).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=Ne(e);if(!r){if(a&&je(_y,t))return Reflect.get(_y,t,n);if(t==="hasOwnProperty")return w0}const o=Reflect.get(e,t,n);return(rr(t)?iS.has(t):g0(t))||(r||gs(e,"get",t),i)?o:we(o)?a&&dw(t)?o:o.value:rt(o)?r?fS(o):ir(o):o}}class oS extends aS{constructor(e=!1){super(!1,e)}set(e,t,n,r){let i=e[t];if(!this._isShallow){const l=pc(i);if(!im(n)&&!pc(n)&&(i=Qe(i),n=Qe(n)),!Ne(e)&&we(i)&&!we(n))return l?!1:(i.value=n,!0)}const a=Ne(e)&&dw(t)?Number(t)<e.length:je(e,t),o=Reflect.set(e,t,n,r);return e===Qe(r)&&(a?ki(n,i)&&Zn(e,"set",t,n):Zn(e,"add",t,n)),o}deleteProperty(e,t){const n=je(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Zn(e,"delete",t,void 0),r}has(e,t){const n=Reflect.has(e,t);return(!rr(t)||!iS.has(t))&&gs(e,"has",t),n}ownKeys(e){return gs(e,"iterate",Ne(e)?"length":Qa),Reflect.ownKeys(e)}}class y0 extends aS{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const v0=new oS,b0=new y0,S0=new oS(!0);const yw=s=>s,Km=s=>Reflect.getPrototypeOf(s);function Vf(s,e,t=!1,n=!1){s=s.__v_raw;const r=Qe(s),i=Qe(e);t||(ki(e,i)&&gs(r,"get",e),gs(r,"get",i));const{has:a}=Km(r),o=n?yw:t?Sw:sf;if(a.call(r,e))return o(s.get(e));if(a.call(r,i))return o(s.get(i));s!==r&&s.get(e)}function Pf(s,e=!1){const t=this.__v_raw,n=Qe(t),r=Qe(s);return e||(ki(s,r)&&gs(n,"has",s),gs(n,"has",r)),s===r?t.has(s):t.has(s)||t.has(r)}function Lf(s,e=!1){return s=s.__v_raw,!e&&gs(Qe(s),"iterate",Qa),Reflect.get(s,"size",s)}function By(s){s=Qe(s);const e=Qe(this);return Km(e).has.call(e,s)||(e.add(s),Zn(e,"add",s,s)),this}function xy(s,e){e=Qe(e);const t=Qe(this),{has:n,get:r}=Km(t);let i=n.call(t,s);i||(s=Qe(s),i=n.call(t,s));const a=r.call(t,s);return t.set(s,e),i?ki(e,a)&&Zn(t,"set",s,e):Zn(t,"add",s,e),this}function Ty(s){const e=Qe(this),{has:t,get:n}=Km(e);let r=t.call(e,s);r||(s=Qe(s),r=t.call(e,s)),n&&n.call(e,s);const i=e.delete(s);return r&&Zn(e,"delete",s,void 0),i}function Ry(){const s=Qe(this),e=s.size!==0,t=s.clear();return e&&Zn(s,"clear",void 0,void 0),t}function Df(s,e){return function(n,r){const i=this,a=i.__v_raw,o=Qe(a),l=e?yw:s?Sw:sf;return!s&&gs(o,"iterate",Qa),a.forEach((c,u)=>n.call(r,l(c),l(u),i))}}function Uf(s,e,t){return function(...n){const r=this.__v_raw,i=Qe(r),a=sc(i),o=s==="entries"||s===Symbol.iterator&&a,l=s==="keys"&&a,c=r[s](...n),u=t?yw:e?Sw:sf;return!e&&gs(i,"iterate",l?rp:Qa),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:o?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function hr(s){return function(...e){return s==="delete"?!1:s==="clear"?void 0:this}}function A0(){const s={get(i){return Vf(this,i)},get size(){return Lf(this)},has:Pf,add:By,set:xy,delete:Ty,clear:Ry,forEach:Df(!1,!1)},e={get(i){return Vf(this,i,!1,!0)},get size(){return Lf(this)},has:Pf,add:By,set:xy,delete:Ty,clear:Ry,forEach:Df(!1,!0)},t={get(i){return Vf(this,i,!0)},get size(){return Lf(this,!0)},has(i){return Pf.call(this,i,!0)},add:hr("add"),set:hr("set"),delete:hr("delete"),clear:hr("clear"),forEach:Df(!0,!1)},n={get(i){return Vf(this,i,!0,!0)},get size(){return Lf(this,!0)},has(i){return Pf.call(this,i,!0)},add:hr("add"),set:hr("set"),delete:hr("delete"),clear:hr("clear"),forEach:Df(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=Uf(i,!1,!1),t[i]=Uf(i,!0,!1),e[i]=Uf(i,!1,!0),n[i]=Uf(i,!0,!0)}),[s,t,e,n]}const[k0,E0,C0,N0]=A0();function vw(s,e){const t=e?s?N0:C0:s?E0:k0;return(n,r,i)=>r==="__v_isReactive"?!s:r==="__v_isReadonly"?s:r==="__v_raw"?n:Reflect.get(je(t,r)&&r in n?t:n,r,i)}const I0={get:vw(!1,!1)},_0={get:vw(!1,!0)},B0={get:vw(!0,!1)};const lS=new WeakMap,cS=new WeakMap,uS=new WeakMap,x0=new WeakMap;function T0(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function R0(s){return s.__v_skip||!Object.isExtensible(s)?0:T0(Zk(s))}function ir(s){return pc(s)?s:bw(s,!1,v0,I0,lS)}function hS(s){return bw(s,!1,S0,_0,cS)}function fS(s){return bw(s,!0,b0,B0,uS)}function bw(s,e,t,n,r){if(!rt(s)||s.__v_raw&&!(e&&s.__v_isReactive))return s;const i=r.get(s);if(i)return i;const a=R0(s);if(a===0)return s;const o=new Proxy(s,a===2?n:t);return r.set(s,o),o}function qh(s){return pc(s)?qh(s.__v_raw):!!(s&&s.__v_isReactive)}function pc(s){return!!(s&&s.__v_isReadonly)}function im(s){return!!(s&&s.__v_isShallow)}function dS(s){return s?!!s.__v_raw:!1}function Qe(s){const e=s&&s.__v_raw;return e?Qe(e):s}function O0(s){return Object.isExtensible(s)&&qb(s,"__v_skip",!0),s}const sf=s=>rt(s)?ir(s):s,Sw=s=>rt(s)?fS(s):s;class mS{constructor(e,t,n,r){this.getter=e,this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new gw(()=>e(this._value),()=>Sd(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=n}get value(){const e=Qe(this);return(!e._cacheable||e.effect.dirty)&&ki(e._value,e._value=e.effect.run())&&Sd(e,4),gS(e),e.effect._dirtyLevel>=2&&Sd(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function V0(s,e,t=!1){let n,r;const i=Te(s);return i?(n=s,r=Bs):(n=s.get,r=s.set),new mS(n,r,i||!r,t)}function gS(s){var e;mi&&Xa&&(s=Qe(s),sS(Xa,(e=s.dep)!=null?e:s.dep=rS(()=>s.dep=void 0,s instanceof mS?s:void 0)))}function Sd(s,e=4,t){s=Qe(s);const n=s.dep;n&&nS(n,e)}function we(s){return!!(s&&s.__v_isRef===!0)}function Ke(s){return pS(s,!1)}function ip(s){return pS(s,!0)}function pS(s,e){return we(s)?s:new P0(s,e)}class P0{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Qe(e),this._value=t?e:sf(e)}get value(){return gS(this),this._value}set value(e){const t=this.__v_isShallow||im(e)||pc(e);e=t?e:Qe(e),ki(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:sf(e),Sd(this,4))}}function ee(s){return we(s)?s.value:s}const L0={get:(s,e,t)=>ee(Reflect.get(s,e,t)),set:(s,e,t,n)=>{const r=s[e];return we(r)&&!we(t)?(r.value=t,!0):Reflect.set(s,e,t,n)}};function wS(s){return qh(s)?s:new Proxy(s,L0)}class D0{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return m0(Qe(this._object),this._key)}}class U0{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function yS(s,e,t){return we(s)?s:Te(s)?new U0(s):rt(s)&&arguments.length>1?M0(s,e,t):Ke(s)}function M0(s,e,t){const n=s[e];return we(n)?n:new D0(s,e,t)}/**
* @vue/runtime-core v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function gi(s,e,t,n){try{return n?s(...n):s()}catch(r){Rc(r,e,t)}}function en(s,e,t,n){if(Te(s)){const r=gi(s,e,t,n);return r&&jb(r)&&r.catch(i=>{Rc(i,e,t)}),r}if(Ne(s)){const r=[];for(let i=0;i<s.length;i++)r.push(en(s[i],e,t,n));return r}}function Rc(s,e,t,n=!0){const r=e?e.vnode:null;if(e){let i=e.parent;const a=e.proxy,o=`https://vuejs.org/error-reference/#runtime-${t}`;for(;i;){const c=i.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](s,a,o)===!1)return}i=i.parent}const l=e.appContext.config.errorHandler;if(l){Ci(),gi(l,null,10,[s,a,o]),Ni();return}}H0(s,t,r,n)}function H0(s,e,t,n=!0){console.error(s)}let nf=!1,ap=!1;const Gt=[];let gn=0;const rc=[];let ti=null,Fa=0;const vS=Promise.resolve();let Aw=null;function jm(s){const e=Aw||vS;return s?e.then(this?s.bind(this):s):e}function $0(s){let e=gn+1,t=Gt.length;for(;e<t;){const n=e+t>>>1,r=Gt[n],i=rf(r);i<s||i===s&&r.pre?e=n+1:t=n}return e}function Jm(s){(!Gt.length||!Gt.includes(s,nf&&s.allowRecurse?gn+1:gn))&&(s.id==null?Gt.push(s):Gt.splice($0(s.id),0,s),bS())}function bS(){!nf&&!ap&&(ap=!0,Aw=vS.then(SS))}function F0(s){const e=Gt.indexOf(s);e>gn&&Gt.splice(e,1)}function op(s){Ne(s)?rc.push(...s):(!ti||!ti.includes(s,s.allowRecurse?Fa+1:Fa))&&rc.push(s),bS()}function Oy(s,e,t=nf?gn+1:0){for(;t<Gt.length;t++){const n=Gt[t];if(n&&n.pre){if(s&&n.id!==s.uid)continue;Gt.splice(t,1),t--,n()}}}function am(s){if(rc.length){const e=[...new Set(rc)].sort((t,n)=>rf(t)-rf(n));if(rc.length=0,ti){ti.push(...e);return}for(ti=e,Fa=0;Fa<ti.length;Fa++)ti[Fa]();ti=null,Fa=0}}const rf=s=>s.id==null?1/0:s.id,K0=(s,e)=>{const t=rf(s)-rf(e);if(t===0){if(s.pre&&!e.pre)return-1;if(e.pre&&!s.pre)return 1}return t};function SS(s){ap=!1,nf=!0,Gt.sort(K0);const e=Bs;try{for(gn=0;gn<Gt.length;gn++){const t=Gt[gn];t&&t.active!==!1&&gi(t,null,14)}}finally{gn=0,Gt.length=0,am(),nf=!1,Aw=null,(Gt.length||rc.length)&&SS()}}function j0(s,e,...t){if(s.isUnmounted)return;const n=s.vnode.props||at;let r=t;const i=e.startsWith("update:"),a=i&&e.slice(7);if(a&&a in n){const u=`${a==="modelValue"?"model":a}Modifiers`,{number:h,trim:f}=n[u]||at;f&&(r=t.map(m=>At(m)?m.trim():m)),h&&(r=t.map(tp))}let o,l=n[o=ug(e)]||n[o=ug(En(e))];!l&&i&&(l=n[o=ug(Tc(e))]),l&&en(l,s,6,r);const c=n[o+"Once"];if(c){if(!s.emitted)s.emitted={};else if(s.emitted[o])return;s.emitted[o]=!0,en(c,s,6,r)}}function AS(s,e,t=!1){const n=e.emitsCache,r=n.get(s);if(r!==void 0)return r;const i=s.emits;let a={},o=!1;if(!Te(s)){const l=c=>{const u=AS(c,e,!0);u&&(o=!0,Ht(a,u))};!t&&e.mixins.length&&e.mixins.forEach(l),s.extends&&l(s.extends),s.mixins&&s.mixins.forEach(l)}return!i&&!o?(rt(s)&&n.set(s,null),null):(Ne(i)?i.forEach(l=>a[l]=null):Ht(a,i),rt(s)&&n.set(s,a),a)}function Wm(s,e){return!s||!Sf(e)?!1:(e=e.slice(2).replace(/Once$/,""),je(s,e[0].toLowerCase()+e.slice(1))||je(s,Tc(e))||je(s,e))}let Tt=null,qm=null;function om(s){const e=Tt;return Tt=s,qm=s&&s.type.__scopeId||null,e}function L2(s){qm=s}function D2(){qm=null}function zt(s,e=Tt,t){if(!e||s._n)return s;const n=(...r)=>{n._d&&qy(-1);const i=om(e);let a;try{a=s(...r)}finally{om(i),n._d&&qy(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function fg(s){const{type:e,vnode:t,proxy:n,withProxy:r,propsOptions:[i],slots:a,attrs:o,emit:l,render:c,renderCache:u,props:h,data:f,setupState:m,ctx:S,inheritAttrs:A}=s,E=om(s);let T,x;try{if(t.shapeFlag&4){const p=r||n,k=p;T=Ds(c.call(k,p,u,h,m,f,S)),x=o}else{const p=e;T=Ds(p.length>1?p(h,{attrs:o,slots:a,emit:l}):p(h,null)),x=e.props?o:W0(o)}}catch(p){Xh.length=0,Rc(p,s,1),T=Se(nn)}let y=T;if(x&&A!==!1){const p=Object.keys(x),{shapeFlag:k}=y;p.length&&k&7&&(i&&p.some(hw)&&(x=q0(x,i)),y=yc(y,x,!1,!0))}return t.dirs&&(y=yc(y,null,!1,!0),y.dirs=y.dirs?y.dirs.concat(t.dirs):t.dirs),t.transition&&(y.transition=t.transition),T=y,om(E),T}function J0(s,e=!0){let t;for(let n=0;n<s.length;n++){const r=s[n];if(of(r)){if(r.type!==nn||r.children==="v-if"){if(t)return;t=r}}else return}return t}const W0=s=>{let e;for(const t in s)(t==="class"||t==="style"||Sf(t))&&((e||(e={}))[t]=s[t]);return e},q0=(s,e)=>{const t={};for(const n in s)(!hw(n)||!(n.slice(9)in e))&&(t[n]=s[n]);return t};function G0(s,e,t){const{props:n,children:r,component:i}=s,{props:a,children:o,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return n?Vy(n,a,c):!!a;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(a[f]!==n[f]&&!Wm(c,f))return!0}}}else return(r||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?Vy(n,a,c):!0:!!a;return!1}function Vy(s,e,t){const n=Object.keys(e);if(n.length!==Object.keys(s).length)return!0;for(let r=0;r<n.length;r++){const i=n[r];if(e[i]!==s[i]&&!Wm(t,i))return!0}return!1}function kw({vnode:s,parent:e},t){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===s&&(n.el=s.el),n===s)(s=e.vnode).el=t,e=e.parent;else break}}const Ew="components";function U2(s,e){return ES(Ew,s,!0,e)||s}const kS=Symbol.for("v-ndc");function Y0(s){return At(s)?ES(Ew,s,!1)||s:s||kS}function ES(s,e,t=!0,n=!1){const r=Tt||Ot;if(r){const i=r.type;if(s===Ew){const o=jE(i,!1);if(o&&(o===e||o===En(e)||o===$m(En(e))))return i}const a=Py(r[s]||i[s],e)||Py(r.appContext[s],e);return!a&&n?i:a}}function Py(s,e){return s&&(s[e]||s[En(e)]||s[$m(En(e))])}const X0=s=>s.__isSuspense;let lp=0;const Q0={name:"Suspense",__isSuspense:!0,process(s,e,t,n,r,i,a,o,l,c){if(s==null)Z0(e,t,n,r,i,a,o,l,c);else{if(i&&i.deps>0&&!s.suspense.isInFallback){e.suspense=s.suspense,e.suspense.vnode=e,e.el=s.el;return}eE(s,e,t,n,r,a,o,l,c)}},hydrate:tE,create:Cw,normalize:sE},z0=Q0;function af(s,e){const t=s.props&&s.props[e];Te(t)&&t()}function Z0(s,e,t,n,r,i,a,o,l){const{p:c,o:{createElement:u}}=l,h=u("div"),f=s.suspense=Cw(s,r,n,e,h,t,i,a,o,l);c(null,f.pendingBranch=s.ssContent,h,null,n,f,i,a),f.deps>0?(af(s,"onPending"),af(s,"onFallback"),c(null,s.ssFallback,e,t,n,null,i,a),ic(f,s.ssFallback)):f.resolve(!1,!0)}function eE(s,e,t,n,r,i,a,o,{p:l,um:c,o:{createElement:u}}){const h=e.suspense=s.suspense;h.vnode=e,e.el=s.el;const f=e.ssContent,m=e.ssFallback,{activeBranch:S,pendingBranch:A,isInFallback:E,isHydrating:T}=h;if(A)h.pendingBranch=f,oi(f,A)?(l(A,f,h.hiddenContainer,null,r,h,i,a,o),h.deps<=0?h.resolve():E&&(T||(l(S,m,t,n,r,null,i,a,o),ic(h,m)))):(h.pendingId=lp++,T?(h.isHydrating=!1,h.activeBranch=A):c(A,r,h),h.deps=0,h.effects.length=0,h.hiddenContainer=u("div"),E?(l(null,f,h.hiddenContainer,null,r,h,i,a,o),h.deps<=0?h.resolve():(l(S,m,t,n,r,null,i,a,o),ic(h,m))):S&&oi(f,S)?(l(S,f,t,n,r,h,i,a,o),h.resolve(!0)):(l(null,f,h.hiddenContainer,null,r,h,i,a,o),h.deps<=0&&h.resolve()));else if(S&&oi(f,S))l(S,f,t,n,r,h,i,a,o),ic(h,f);else if(af(e,"onPending"),h.pendingBranch=f,f.shapeFlag&512?h.pendingId=f.component.suspenseId:h.pendingId=lp++,l(null,f,h.hiddenContainer,null,r,h,i,a,o),h.deps<=0)h.resolve();else{const{timeout:x,pendingId:y}=h;x>0?setTimeout(()=>{h.pendingId===y&&h.fallback(m)},x):x===0&&h.fallback(m)}}function Cw(s,e,t,n,r,i,a,o,l,c,u=!1){const{p:h,m:f,um:m,n:S,o:{parentNode:A,remove:E}}=c;let T;const x=nE(s);x&&e&&e.pendingBranch&&(T=e.pendingId,e.deps++);const y=s.props?s0(s.props.timeout):void 0,p=i,k={vnode:s,parent:e,parentComponent:t,namespace:a,container:n,hiddenContainer:r,deps:0,pendingId:lp++,timeout:typeof y=="number"?y:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(C=!1,L=!1){const{vnode:M,activeBranch:F,pendingBranch:ne,pendingId:ce,effects:te,parentComponent:fe,container:Ce}=k;let ye=!1;k.isHydrating?k.isHydrating=!1:C||(ye=F&&ne.transition&&ne.transition.mode==="out-in",ye&&(F.transition.afterLeave=()=>{ce===k.pendingId&&(f(ne,Ce,i===p?S(F):i,0),op(te))}),F&&(A(F.el)!==k.hiddenContainer&&(i=S(F)),m(F,fe,k,!0)),ye||f(ne,Ce,i,0)),ic(k,ne),k.pendingBranch=null,k.isInFallback=!1;let ie=k.parent,se=!1;for(;ie;){if(ie.pendingBranch){ie.effects.push(...te),se=!0;break}ie=ie.parent}!se&&!ye&&op(te),k.effects=[],x&&e&&e.pendingBranch&&T===e.pendingId&&(e.deps--,e.deps===0&&!L&&e.resolve()),af(M,"onResolve")},fallback(C){if(!k.pendingBranch)return;const{vnode:L,activeBranch:M,parentComponent:F,container:ne,namespace:ce}=k;af(L,"onFallback");const te=S(M),fe=()=>{k.isInFallback&&(h(null,C,ne,te,F,null,ce,o,l),ic(k,C))},Ce=C.transition&&C.transition.mode==="out-in";Ce&&(M.transition.afterLeave=fe),k.isInFallback=!0,m(M,F,null,!0),Ce||fe()},move(C,L,M){k.activeBranch&&f(k.activeBranch,C,L,M),k.container=C},next(){return k.activeBranch&&S(k.activeBranch)},registerDep(C,L){const M=!!k.pendingBranch;M&&k.deps++;const F=C.vnode.el;C.asyncDep.catch(ne=>{Rc(ne,C,0)}).then(ne=>{if(C.isUnmounted||k.isUnmounted||k.pendingId!==C.suspenseId)return;C.asyncResolved=!0;const{vnode:ce}=C;mp(C,ne,!1),F&&(ce.el=F);const te=!F&&C.subTree.el;L(C,ce,A(F||C.subTree.el),F?null:S(C.subTree),k,a,l),te&&E(te),kw(C,ce.el),M&&--k.deps===0&&k.resolve()})},unmount(C,L){k.isUnmounted=!0,k.activeBranch&&m(k.activeBranch,t,C,L),k.pendingBranch&&m(k.pendingBranch,t,C,L)}};return k}function tE(s,e,t,n,r,i,a,o,l){const c=e.suspense=Cw(e,n,t,s.parentNode,document.createElement("div"),null,r,i,a,o,!0),u=l(s,c.pendingBranch=e.ssContent,t,c,i,a);return c.deps===0&&c.resolve(!1,!0),u}function sE(s){const{shapeFlag:e,children:t}=s,n=e&32;s.ssContent=Ly(n?t.default:t),s.ssFallback=n?Ly(t.fallback):Se(nn)}function Ly(s){let e;if(Te(s)){const t=wc&&s._c;t&&(s._d=!1,We()),s=s(),t&&(s._d=!0,e=Ks,YS())}return Ne(s)&&(s=J0(s)),s=Ds(s),e&&!s.dynamicChildren&&(s.dynamicChildren=e.filter(t=>t!==s)),s}function CS(s,e){e&&e.pendingBranch?Ne(s)?e.effects.push(...s):e.effects.push(s):op(s)}function ic(s,e){s.activeBranch=e;const{vnode:t,parentComponent:n}=s;let r=e.el;for(;!r&&e.component;)e=e.component.subTree,r=e.el;t.el=r,n&&n.subTree===t&&(n.vnode.el=r,kw(n,r))}function nE(s){const e=s.props&&s.props.suspensible;return e!=null&&e!==!1}const rE=Symbol.for("v-scx"),iE=()=>za(rE);function aE(s,e){return Nw(s,null,e)}const Mf={};function Sn(s,e,t){return Nw(s,e,t)}function Nw(s,e,{immediate:t,deep:n,flush:r,once:i,onTrack:a,onTrigger:o}=at){if(e&&i){const C=e;e=(...L)=>{C(...L),k()}}const l=Ot,c=C=>n===!0?C:qa(C,n===!1?1:void 0);let u,h=!1,f=!1;if(we(s)?(u=()=>s.value,h=im(s)):qh(s)?(u=()=>c(s),h=!0):Ne(s)?(f=!0,h=s.some(C=>qh(C)||im(C)),u=()=>s.map(C=>{if(we(C))return C.value;if(qh(C))return c(C);if(Te(C))return gi(C,l,2)})):Te(s)?e?u=()=>gi(s,l,2):u=()=>(m&&m(),en(s,l,3,[S])):u=Bs,e&&n){const C=u;u=()=>qa(C())}let m,S=C=>{m=y.onStop=()=>{gi(C,l,4),m=y.onStop=void 0}},A;if(Cf)if(S=Bs,e?t&&en(e,l,3,[u(),f?[]:void 0,S]):u(),r==="sync"){const C=iE();A=C.__watcherHandles||(C.__watcherHandles=[])}else return Bs;let E=f?new Array(s.length).fill(Mf):Mf;const T=()=>{if(!(!y.active||!y.dirty))if(e){const C=y.run();(n||h||(f?C.some((L,M)=>ki(L,E[M])):ki(C,E)))&&(m&&m(),en(e,l,3,[C,E===Mf?void 0:f&&E[0]===Mf?[]:E,S]),E=C)}else y.run()};T.allowRecurse=!!e;let x;r==="sync"?x=T:r==="post"?x=()=>us(T,l&&l.suspense):(T.pre=!0,l&&(T.id=l.uid),x=()=>Jm(T));const y=new gw(u,Bs,x),p=Zb(),k=()=>{y.stop(),p&&fw(p.effects,y)};return e?t?T():E=y.run():r==="post"?us(y.run.bind(y),l&&l.suspense):y.run(),A&&A.push(k),k}function oE(s,e,t){const n=this.proxy,r=At(s)?s.includes(".")?NS(n,s):()=>n[s]:s.bind(n,n);let i;Te(e)?i=e:(i=e.handler,t=e);const a=Ef(this),o=Nw(r,i.bind(n),t);return a(),o}function NS(s,e){const t=e.split(".");return()=>{let n=s;for(let r=0;r<t.length&&n;r++)n=n[t[r]];return n}}function qa(s,e=1/0,t){if(e<=0||!rt(s)||s.__v_skip||(t=t||new Set,t.has(s)))return s;if(t.add(s),e--,we(s))qa(s.value,e,t);else if(Ne(s))for(let n=0;n<s.length;n++)qa(s[n],e,t);else if(Mm(s)||sc(s))s.forEach(n=>{qa(n,e,t)});else if(Wb(s))for(const n in s)qa(s[n],e,t);return s}function ls(s,e){if(Tt===null)return s;const t=Ym(Tt)||Tt.proxy,n=s.dirs||(s.dirs=[]);for(let r=0;r<e.length;r++){let[i,a,o,l=at]=e[r];i&&(Te(i)&&(i={mounted:i,updated:i}),i.deep&&qa(a),n.push({dir:i,instance:t,value:a,oldValue:void 0,arg:o,modifiers:l}))}return s}function dn(s,e,t,n){const r=s.dirs,i=e&&e.dirs;for(let a=0;a<r.length;a++){const o=r[a];i&&(o.oldValue=i[a].value);let l=o.dir[n];l&&(Ci(),en(l,t,8,[s.el,o,s,e]),Ni())}}/*! #__NO_SIDE_EFFECTS__ */function Ii(s,e){return Te(s)?(()=>Ht({name:s.name},e,{setup:s}))():s}const ac=s=>!!s.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Dy(s){Te(s)&&(s={loader:s});const{loader:e,loadingComponent:t,errorComponent:n,delay:r=200,timeout:i,suspensible:a=!0,onError:o}=s;let l=null,c,u=0;const h=()=>(u++,l=null,f()),f=()=>{let m;return l||(m=l=e().catch(S=>{if(S=S instanceof Error?S:new Error(String(S)),o)return new Promise((A,E)=>{o(S,()=>A(h()),()=>E(S),u+1)});throw S}).then(S=>m!==l&&l?l:(S&&(S.__esModule||S[Symbol.toStringTag]==="Module")&&(S=S.default),c=S,S)))};return Ii({name:"AsyncComponentWrapper",__asyncLoader:f,get __asyncResolved(){return c},setup(){const m=Ot;if(c)return()=>dg(c,m);const S=x=>{l=null,Rc(x,m,13,!n)};if(a&&m.suspense||Cf)return f().then(x=>()=>dg(x,m)).catch(x=>(S(x),()=>n?Se(n,{error:x}):null));const A=Ke(!1),E=Ke(),T=Ke(!!r);return r&&setTimeout(()=>{T.value=!1},r),i!=null&&setTimeout(()=>{if(!A.value&&!E.value){const x=new Error(`Async component timed out after ${i}ms.`);S(x),E.value=x}},i),f().then(()=>{A.value=!0,m.parent&&Iw(m.parent.vnode)&&(m.parent.effect.dirty=!0,Jm(m.parent.update))}).catch(x=>{S(x),E.value=x}),()=>{if(A.value&&c)return dg(c,m);if(E.value&&n)return Se(n,{error:E.value});if(t&&!T.value)return Se(t)}}})}function dg(s,e){const{ref:t,props:n,children:r,ce:i}=e.vnode,a=Se(s,n,r);return a.ref=t,a.ce=i,delete e.vnode.ce,a}const Iw=s=>s.type.__isKeepAlive;function IS(s,e){BS(s,"a",e)}function _S(s,e){BS(s,"da",e)}function BS(s,e,t=Ot){const n=s.__wdc||(s.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return s()});if(Gm(e,n,t),t){let r=t.parent;for(;r&&r.parent;)Iw(r.parent.vnode)&&lE(n,e,t,r),r=r.parent}}function lE(s,e,t,n){const r=Gm(e,s,n,!0);Bw(()=>{fw(n[e],r)},t)}function Gm(s,e,t=Ot,n=!1){if(t){const r=t[s]||(t[s]=[]),i=e.__weh||(e.__weh=(...a)=>{if(t.isUnmounted)return;Ci();const o=Ef(t),l=en(e,t,s,a);return o(),Ni(),l});return n?r.unshift(i):r.push(i),i}}const or=s=>(e,t=Ot)=>(!Cf||s==="sp")&&Gm(s,(...n)=>e(...n),t),cE=or("bm"),_w=or("m"),uE=or("bu"),hE=or("u"),xS=or("bum"),Bw=or("um"),fE=or("sp"),dE=or("rtg"),mE=or("rtc");function TS(s,e=Ot){Gm("ec",s,e)}function Uy(s,e,t,n){let r;const i=t&&t[n];if(Ne(s)||At(s)){r=new Array(s.length);for(let a=0,o=s.length;a<o;a++)r[a]=e(s[a],a,void 0,i&&i[a])}else if(typeof s=="number"){r=new Array(s);for(let a=0;a<s;a++)r[a]=e(a+1,a,void 0,i&&i[a])}else if(rt(s))if(s[Symbol.iterator])r=Array.from(s,(a,o)=>e(a,o,void 0,i&&i[o]));else{const a=Object.keys(s);r=new Array(a.length);for(let o=0,l=a.length;o<l;o++){const c=a[o];r[o]=e(s[c],c,o,i&&i[o])}}else r=[];return t&&(t[n]=r),r}function xw(s,e,t={},n,r){if(Tt.isCE||Tt.parent&&ac(Tt.parent)&&Tt.parent.isCE)return e!=="default"&&(t.name=e),Se("slot",t,n&&n());let i=s[e];i&&i._c&&(i._d=!1),We();const a=i&&RS(i(t)),o=pn(Ut,{key:t.key||a&&a.key||`_${e}`},a||(n?n():[]),a&&s._===1?64:-2);return!r&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),i&&i._c&&(i._d=!0),o}function RS(s){return s.some(e=>of(e)?!(e.type===nn||e.type===Ut&&!RS(e.children)):!0)?s:null}const cp=s=>s?e1(s)?Ym(s)||s.proxy:cp(s.parent):null,Gh=Ht(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>cp(s.parent),$root:s=>cp(s.root),$emit:s=>s.emit,$options:s=>Tw(s),$forceUpdate:s=>s.f||(s.f=()=>{s.effect.dirty=!0,Jm(s.update)}),$nextTick:s=>s.n||(s.n=jm.bind(s.proxy)),$watch:s=>oE.bind(s)}),mg=(s,e)=>s!==at&&!s.__isScriptSetup&&je(s,e),gE={get({_:s},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:n,data:r,props:i,accessCache:a,type:o,appContext:l}=s;let c;if(e[0]!=="$"){const m=a[e];if(m!==void 0)switch(m){case 1:return n[e];case 2:return r[e];case 4:return t[e];case 3:return i[e]}else{if(mg(n,e))return a[e]=1,n[e];if(r!==at&&je(r,e))return a[e]=2,r[e];if((c=s.propsOptions[0])&&je(c,e))return a[e]=3,i[e];if(t!==at&&je(t,e))return a[e]=4,t[e];up&&(a[e]=0)}}const u=Gh[e];let h,f;if(u)return e==="$attrs"&&gs(s.attrs,"get",""),u(s);if((h=o.__cssModules)&&(h=h[e]))return h;if(t!==at&&je(t,e))return a[e]=4,t[e];if(f=l.config.globalProperties,je(f,e))return f[e]},set({_:s},e,t){const{data:n,setupState:r,ctx:i}=s;return mg(r,e)?(r[e]=t,!0):n!==at&&je(n,e)?(n[e]=t,!0):je(s.props,e)||e[0]==="$"&&e.slice(1)in s?!1:(i[e]=t,!0)},has({_:{data:s,setupState:e,accessCache:t,ctx:n,appContext:r,propsOptions:i}},a){let o;return!!t[a]||s!==at&&je(s,a)||mg(e,a)||(o=i[0])&&je(o,a)||je(n,a)||je(Gh,a)||je(r.config.globalProperties,a)},defineProperty(s,e,t){return t.get!=null?s._.accessCache[e]=0:je(t,"value")&&this.set(s,e,t.value,null),Reflect.defineProperty(s,e,t)}};function My(s){return Ne(s)?s.reduce((e,t)=>(e[t]=null,e),{}):s}let up=!0;function pE(s){const e=Tw(s),t=s.proxy,n=s.ctx;up=!1,e.beforeCreate&&Hy(e.beforeCreate,s,"bc");const{data:r,computed:i,methods:a,watch:o,provide:l,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:m,updated:S,activated:A,deactivated:E,beforeDestroy:T,beforeUnmount:x,destroyed:y,unmounted:p,render:k,renderTracked:C,renderTriggered:L,errorCaptured:M,serverPrefetch:F,expose:ne,inheritAttrs:ce,components:te,directives:fe,filters:Ce}=e;if(c&&wE(c,n,null),a)for(const se in a){const ae=a[se];Te(ae)&&(n[se]=ae.bind(t))}if(r){const se=r.call(t,t);rt(se)&&(s.data=ir(se))}if(up=!0,i)for(const se in i){const ae=i[se],Re=Te(ae)?ae.bind(t,t):Te(ae.get)?ae.get.bind(t,t):Bs,oe=!Te(ae)&&Te(ae.set)?ae.set.bind(t):Bs,de=Yt({get:Re,set:oe});Object.defineProperty(n,se,{enumerable:!0,configurable:!0,get:()=>de.value,set:Y=>de.value=Y})}if(o)for(const se in o)OS(o[se],n,t,se);if(l){const se=Te(l)?l.call(t):l;Reflect.ownKeys(se).forEach(ae=>{PS(ae,se[ae])})}u&&Hy(u,s,"c");function ie(se,ae){Ne(ae)?ae.forEach(Re=>se(Re.bind(t))):ae&&se(ae.bind(t))}if(ie(cE,h),ie(_w,f),ie(uE,m),ie(hE,S),ie(IS,A),ie(_S,E),ie(TS,M),ie(mE,C),ie(dE,L),ie(xS,x),ie(Bw,p),ie(fE,F),Ne(ne))if(ne.length){const se=s.exposed||(s.exposed={});ne.forEach(ae=>{Object.defineProperty(se,ae,{get:()=>t[ae],set:Re=>t[ae]=Re})})}else s.exposed||(s.exposed={});k&&s.render===Bs&&(s.render=k),ce!=null&&(s.inheritAttrs=ce),te&&(s.components=te),fe&&(s.directives=fe)}function wE(s,e,t=Bs){Ne(s)&&(s=hp(s));for(const n in s){const r=s[n];let i;rt(r)?"default"in r?i=za(r.from||n,r.default,!0):i=za(r.from||n):i=za(r),we(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[n]=i}}function Hy(s,e,t){en(Ne(s)?s.map(n=>n.bind(e.proxy)):s.bind(e.proxy),e,t)}function OS(s,e,t,n){const r=n.includes(".")?NS(t,n):()=>t[n];if(At(s)){const i=e[s];Te(i)&&Sn(r,i)}else if(Te(s))Sn(r,s.bind(t));else if(rt(s))if(Ne(s))s.forEach(i=>OS(i,e,t,n));else{const i=Te(s.handler)?s.handler.bind(t):e[s.handler];Te(i)&&Sn(r,i,s)}}function Tw(s){const e=s.type,{mixins:t,extends:n}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:a}}=s.appContext,o=i.get(e);let l;return o?l=o:!r.length&&!t&&!n?l=e:(l={},r.length&&r.forEach(c=>lm(l,c,a,!0)),lm(l,e,a)),rt(e)&&i.set(e,l),l}function lm(s,e,t,n=!1){const{mixins:r,extends:i}=e;i&&lm(s,i,t,!0),r&&r.forEach(a=>lm(s,a,t,!0));for(const a in e)if(!(n&&a==="expose")){const o=yE[a]||t&&t[a];s[a]=o?o(s[a],e[a]):e[a]}return s}const yE={data:$y,props:Fy,emits:Fy,methods:Qc,computed:Qc,beforeCreate:Qt,created:Qt,beforeMount:Qt,mounted:Qt,beforeUpdate:Qt,updated:Qt,beforeDestroy:Qt,beforeUnmount:Qt,destroyed:Qt,unmounted:Qt,activated:Qt,deactivated:Qt,errorCaptured:Qt,serverPrefetch:Qt,components:Qc,directives:Qc,watch:bE,provide:$y,inject:vE};function $y(s,e){return e?s?function(){return Ht(Te(s)?s.call(this,this):s,Te(e)?e.call(this,this):e)}:e:s}function vE(s,e){return Qc(hp(s),hp(e))}function hp(s){if(Ne(s)){const e={};for(let t=0;t<s.length;t++)e[s[t]]=s[t];return e}return s}function Qt(s,e){return s?[...new Set([].concat(s,e))]:e}function Qc(s,e){return s?Ht(Object.create(null),s,e):e}function Fy(s,e){return s?Ne(s)&&Ne(e)?[...new Set([...s,...e])]:Ht(Object.create(null),My(s),My(e??{})):e}function bE(s,e){if(!s)return e;if(!e)return s;const t=Ht(Object.create(null),s);for(const n in e)t[n]=Qt(s[n],e[n]);return t}function VS(){return{app:null,config:{isNativeTag:Qk,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let SE=0;function AE(s,e){return function(n,r=null){Te(n)||(n=Ht({},n)),r!=null&&!rt(r)&&(r=null);const i=VS(),a=new WeakSet;let o=!1;const l=i.app={_uid:SE++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:s1,get config(){return i.config},set config(c){},use(c,...u){return a.has(c)||(c&&Te(c.install)?(a.add(c),c.install(l,...u)):Te(c)&&(a.add(c),c(l,...u))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,u){return u?(i.components[c]=u,l):i.components[c]},directive(c,u){return u?(i.directives[c]=u,l):i.directives[c]},mount(c,u,h){if(!o){const f=Se(n,r);return f.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),u&&e?e(f,c):s(f,c,h),o=!0,l._container=c,c.__vue_app__=l,Ym(f.component)||f.component.proxy}},unmount(){o&&(s(null,l._container),delete l._container.__vue_app__)},provide(c,u){return i.provides[c]=u,l},runWithContext(c){const u=oc;oc=l;try{return c()}finally{oc=u}}};return l}}let oc=null;function PS(s,e){if(Ot){let t=Ot.provides;const n=Ot.parent&&Ot.parent.provides;n===t&&(t=Ot.provides=Object.create(n)),t[s]=e}}function za(s,e,t=!1){const n=Ot||Tt;if(n||oc){const r=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:oc._context.provides;if(r&&s in r)return r[s];if(arguments.length>1)return t&&Te(e)?e.call(n&&n.proxy):e}}function LS(){return!!(Ot||Tt||oc)}const DS={},US=()=>Object.create(DS),MS=s=>Object.getPrototypeOf(s)===DS;function kE(s,e,t,n=!1){const r={},i=US();s.propsDefaults=Object.create(null),HS(s,e,r,i);for(const a in s.propsOptions[0])a in r||(r[a]=void 0);t?s.props=n?r:hS(r):s.type.props?s.props=r:s.props=i,s.attrs=i}function EE(s,e,t,n){const{props:r,attrs:i,vnode:{patchFlag:a}}=s,o=Qe(r),[l]=s.propsOptions;let c=!1;if((n||a>0)&&!(a&16)){if(a&8){const u=s.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(Wm(s.emitsOptions,f))continue;const m=e[f];if(l)if(je(i,f))m!==i[f]&&(i[f]=m,c=!0);else{const S=En(f);r[S]=fp(l,o,S,m,s,!1)}else m!==i[f]&&(i[f]=m,c=!0)}}}else{HS(s,e,r,i)&&(c=!0);let u;for(const h in o)(!e||!je(e,h)&&((u=Tc(h))===h||!je(e,u)))&&(l?t&&(t[h]!==void 0||t[u]!==void 0)&&(r[h]=fp(l,o,h,void 0,s,!0)):delete r[h]);if(i!==o)for(const h in i)(!e||!je(e,h))&&(delete i[h],c=!0)}c&&Zn(s.attrs,"set","")}function HS(s,e,t,n){const[r,i]=s.propsOptions;let a=!1,o;if(e)for(let l in e){if(nc(l))continue;const c=e[l];let u;r&&je(r,u=En(l))?!i||!i.includes(u)?t[u]=c:(o||(o={}))[u]=c:Wm(s.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,a=!0)}if(i){const l=Qe(t),c=o||at;for(let u=0;u<i.length;u++){const h=i[u];t[h]=fp(r,l,h,c[h],s,!je(c,h))}}return a}function fp(s,e,t,n,r,i){const a=s[t];if(a!=null){const o=je(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Te(l)){const{propsDefaults:c}=r;if(t in c)n=c[t];else{const u=Ef(r);n=c[t]=l.call(null,e),u()}}else n=l}a[0]&&(i&&!o?n=!1:a[1]&&(n===""||n===Tc(t))&&(n=!0))}return n}function $S(s,e,t=!1){const n=e.propsCache,r=n.get(s);if(r)return r;const i=s.props,a={},o=[];let l=!1;if(!Te(s)){const u=h=>{l=!0;const[f,m]=$S(h,e,!0);Ht(a,f),m&&o.push(...m)};!t&&e.mixins.length&&e.mixins.forEach(u),s.extends&&u(s.extends),s.mixins&&s.mixins.forEach(u)}if(!i&&!l)return rt(s)&&n.set(s,tc),tc;if(Ne(i))for(let u=0;u<i.length;u++){const h=En(i[u]);Ky(h)&&(a[h]=at)}else if(i)for(const u in i){const h=En(u);if(Ky(h)){const f=i[u],m=a[h]=Ne(f)||Te(f)?{type:f}:Ht({},f);if(m){const S=Wy(Boolean,m.type),A=Wy(String,m.type);m[0]=S>-1,m[1]=A<0||S<A,(S>-1||je(m,"default"))&&o.push(h)}}}const c=[a,o];return rt(s)&&n.set(s,c),c}function Ky(s){return s[0]!=="$"&&!nc(s)}function jy(s){return s===null?"null":typeof s=="function"?s.name||"":typeof s=="object"&&s.constructor&&s.constructor.name||""}function Jy(s,e){return jy(s)===jy(e)}function Wy(s,e){return Ne(e)?e.findIndex(t=>Jy(t,s)):Te(e)&&Jy(e,s)?0:-1}const FS=s=>s[0]==="_"||s==="$stable",Rw=s=>Ne(s)?s.map(Ds):[Ds(s)],CE=(s,e,t)=>{if(e._n)return e;const n=zt((...r)=>Rw(e(...r)),t);return n._c=!1,n},KS=(s,e,t)=>{const n=s._ctx;for(const r in s){if(FS(r))continue;const i=s[r];if(Te(i))e[r]=CE(r,i,n);else if(i!=null){const a=Rw(i);e[r]=()=>a}}},jS=(s,e)=>{const t=Rw(e);s.slots.default=()=>t},NE=(s,e)=>{const t=s.slots=US();if(s.vnode.shapeFlag&32){const n=e._;n?(Ht(t,e),qb(t,"_",n,!0)):KS(e,t)}else e&&jS(s,e)},IE=(s,e,t)=>{const{vnode:n,slots:r}=s;let i=!0,a=at;if(n.shapeFlag&32){const o=e._;o?t&&o===1?i=!1:(Ht(r,e),!t&&o===1&&delete r._):(i=!e.$stable,KS(e,r)),a=e}else e&&(jS(s,e),a={default:1});if(i)for(const o in r)!FS(o)&&a[o]==null&&delete r[o]};function cm(s,e,t,n,r=!1){if(Ne(s)){s.forEach((f,m)=>cm(f,e&&(Ne(e)?e[m]:e),t,n,r));return}if(ac(n)&&!r)return;const i=n.shapeFlag&4?Ym(n.component)||n.component.proxy:n.el,a=r?null:i,{i:o,r:l}=s,c=e&&e.r,u=o.refs===at?o.refs={}:o.refs,h=o.setupState;if(c!=null&&c!==l&&(At(c)?(u[c]=null,je(h,c)&&(h[c]=null)):we(c)&&(c.value=null)),Te(l))gi(l,o,12,[a,u]);else{const f=At(l),m=we(l);if(f||m){const S=()=>{if(s.f){const A=f?je(h,l)?h[l]:u[l]:l.value;r?Ne(A)&&fw(A,i):Ne(A)?A.includes(i)||A.push(i):f?(u[l]=[i],je(h,l)&&(h[l]=u[l])):(l.value=[i],s.k&&(u[s.k]=l.value))}else f?(u[l]=a,je(h,l)&&(h[l]=a)):m&&(l.value=a,s.k&&(u[s.k]=a))};a?(S.id=-1,us(S,t)):S()}}}let fr=!1;const _E=s=>s.namespaceURI.includes("svg")&&s.tagName!=="foreignObject",BE=s=>s.namespaceURI.includes("MathML"),Hf=s=>{if(_E(s))return"svg";if(BE(s))return"mathml"},$f=s=>s.nodeType===8;function xE(s){const{mt:e,p:t,o:{patchProp:n,createText:r,nextSibling:i,parentNode:a,remove:o,insert:l,createComment:c}}=s,u=(y,p)=>{if(!p.hasChildNodes()){t(null,y,p),am(),p._vnode=y;return}fr=!1,h(p.firstChild,y,null,null,null),am(),p._vnode=y,fr&&console.error("Hydration completed but contains mismatches.")},h=(y,p,k,C,L,M=!1)=>{M=M||!!p.dynamicChildren;const F=$f(y)&&y.data==="[",ne=()=>A(y,p,k,C,L,F),{type:ce,ref:te,shapeFlag:fe,patchFlag:Ce}=p;let ye=y.nodeType;p.el=y,Ce===-2&&(M=!1,p.dynamicChildren=null);let ie=null;switch(ce){case lo:ye!==3?p.children===""?(l(p.el=r(""),a(y),y),ie=y):ie=ne():(y.data!==p.children&&(fr=!0,y.data=p.children),ie=i(y));break;case nn:x(y)?(ie=i(y),T(p.el=y.content.firstChild,y,k)):ye!==8||F?ie=ne():ie=i(y);break;case Yh:if(F&&(y=i(y),ye=y.nodeType),ye===1||ye===3){ie=y;const se=!p.children.length;for(let ae=0;ae<p.staticCount;ae++)se&&(p.children+=ie.nodeType===1?ie.outerHTML:ie.data),ae===p.staticCount-1&&(p.anchor=ie),ie=i(ie);return F?i(ie):ie}else ne();break;case Ut:F?ie=S(y,p,k,C,L,M):ie=ne();break;default:if(fe&1)(ye!==1||p.type.toLowerCase()!==y.tagName.toLowerCase())&&!x(y)?ie=ne():ie=f(y,p,k,C,L,M);else if(fe&6){p.slotScopeIds=L;const se=a(y);if(F?ie=E(y):$f(y)&&y.data==="teleport start"?ie=E(y,y.data,"teleport end"):ie=i(y),e(p,se,null,k,C,Hf(se),M),ac(p)){let ae;F?(ae=Se(Ut),ae.anchor=ie?ie.previousSibling:se.lastChild):ae=y.nodeType===3?Me(""):Se("div"),ae.el=y,p.component.subTree=ae}}else fe&64?ye!==8?ie=ne():ie=p.type.hydrate(y,p,k,C,L,M,s,m):fe&128&&(ie=p.type.hydrate(y,p,k,C,Hf(a(y)),L,M,s,h))}return te!=null&&cm(te,null,C,p),ie},f=(y,p,k,C,L,M)=>{M=M||!!p.dynamicChildren;const{type:F,props:ne,patchFlag:ce,shapeFlag:te,dirs:fe,transition:Ce}=p,ye=F==="input"||F==="option";if(ye||ce!==-1){fe&&dn(p,null,k,"created");let ie=!1;if(x(y)){ie=WS(C,Ce)&&k&&k.vnode.props&&k.vnode.props.appear;const ae=y.content.firstChild;ie&&Ce.beforeEnter(ae),T(ae,y,k),p.el=y=ae}if(te&16&&!(ne&&(ne.innerHTML||ne.textContent))){let ae=m(y.firstChild,p,y,k,C,L,M);for(;ae;){fr=!0;const Re=ae;ae=ae.nextSibling,o(Re)}}else te&8&&y.textContent!==p.children&&(fr=!0,y.textContent=p.children);if(ne)if(ye||!M||ce&48)for(const ae in ne)(ye&&(ae.endsWith("value")||ae==="indeterminate")||Sf(ae)&&!nc(ae)||ae[0]===".")&&n(y,ae,null,ne[ae],void 0,void 0,k);else ne.onClick&&n(y,"onClick",null,ne.onClick,void 0,void 0,k);let se;(se=ne&&ne.onVnodeBeforeMount)&&Vs(se,k,p),fe&&dn(p,null,k,"beforeMount"),((se=ne&&ne.onVnodeMounted)||fe||ie)&&CS(()=>{se&&Vs(se,k,p),ie&&Ce.enter(y),fe&&dn(p,null,k,"mounted")},C)}return y.nextSibling},m=(y,p,k,C,L,M,F)=>{F=F||!!p.dynamicChildren;const ne=p.children,ce=ne.length;for(let te=0;te<ce;te++){const fe=F?ne[te]:ne[te]=Ds(ne[te]);if(y)y=h(y,fe,C,L,M,F);else{if(fe.type===lo&&!fe.children)continue;fr=!0,t(null,fe,k,null,C,L,Hf(k),M)}}return y},S=(y,p,k,C,L,M)=>{const{slotScopeIds:F}=p;F&&(L=L?L.concat(F):F);const ne=a(y),ce=m(i(y),p,ne,k,C,L,M);return ce&&$f(ce)&&ce.data==="]"?i(p.anchor=ce):(fr=!0,l(p.anchor=c("]"),ne,ce),ce)},A=(y,p,k,C,L,M)=>{if(fr=!0,p.el=null,M){const ce=E(y);for(;;){const te=i(y);if(te&&te!==ce)o(te);else break}}const F=i(y),ne=a(y);return o(y),t(null,p,ne,F,k,C,Hf(ne),L),F},E=(y,p="[",k="]")=>{let C=0;for(;y;)if(y=i(y),y&&$f(y)&&(y.data===p&&C++,y.data===k)){if(C===0)return i(y);C--}return y},T=(y,p,k)=>{const C=p.parentNode;C&&C.replaceChild(y,p);let L=k;for(;L;)L.vnode.el===p&&(L.vnode.el=L.subTree.el=y),L=L.parent},x=y=>y.nodeType===1&&y.tagName.toLowerCase()==="template";return[u,h]}const us=CS;function TE(s){return JS(s)}function RE(s){return JS(s,xE)}function JS(s,e){const t=Gb();t.__VUE__=!0;const{insert:n,remove:r,patchProp:i,createElement:a,createText:o,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:m=Bs,insertStaticContent:S}=s,A=(w,I,R,O=null,$=null,j=null,Z=void 0,b=null,v=!!I.dynamicChildren)=>{if(w===I)return;w&&!oi(w,I)&&(O=De(w),Y(w,$,j,!0),w=null),I.patchFlag===-2&&(v=!1,I.dynamicChildren=null);const{type:_,ref:B,shapeFlag:re}=I;switch(_){case lo:E(w,I,R,O);break;case nn:T(w,I,R,O);break;case Yh:w==null&&x(I,R,O,Z);break;case Ut:te(w,I,R,O,$,j,Z,b,v);break;default:re&1?k(w,I,R,O,$,j,Z,b,v):re&6?fe(w,I,R,O,$,j,Z,b,v):(re&64||re&128)&&_.process(w,I,R,O,$,j,Z,b,v,ze)}B!=null&&$&&cm(B,w&&w.ref,j,I||w,!I)},E=(w,I,R,O)=>{if(w==null)n(I.el=o(I.children),R,O);else{const $=I.el=w.el;I.children!==w.children&&c($,I.children)}},T=(w,I,R,O)=>{w==null?n(I.el=l(I.children||""),R,O):I.el=w.el},x=(w,I,R,O)=>{[w.el,w.anchor]=S(w.children,I,R,O,w.el,w.anchor)},y=({el:w,anchor:I},R,O)=>{let $;for(;w&&w!==I;)$=f(w),n(w,R,O),w=$;n(I,R,O)},p=({el:w,anchor:I})=>{let R;for(;w&&w!==I;)R=f(w),r(w),w=R;r(I)},k=(w,I,R,O,$,j,Z,b,v)=>{I.type==="svg"?Z="svg":I.type==="math"&&(Z="mathml"),w==null?C(I,R,O,$,j,Z,b,v):F(w,I,$,j,Z,b,v)},C=(w,I,R,O,$,j,Z,b)=>{let v,_;const{props:B,shapeFlag:re,transition:z,dirs:D}=w;if(v=w.el=a(w.type,j,B&&B.is,B),re&8?u(v,w.children):re&16&&M(w.children,v,null,O,$,gg(w,j),Z,b),D&&dn(w,null,O,"created"),L(v,w,w.scopeId,Z,O),B){for(const pe in B)pe!=="value"&&!nc(pe)&&i(v,pe,null,B[pe],j,w.children,O,$,it);"value"in B&&i(v,"value",null,B.value,j),(_=B.onVnodeBeforeMount)&&Vs(_,O,w)}D&&dn(w,null,O,"beforeMount");const J=WS($,z);J&&z.beforeEnter(v),n(v,I,R),((_=B&&B.onVnodeMounted)||J||D)&&us(()=>{_&&Vs(_,O,w),J&&z.enter(v),D&&dn(w,null,O,"mounted")},$)},L=(w,I,R,O,$)=>{if(R&&m(w,R),O)for(let j=0;j<O.length;j++)m(w,O[j]);if($){let j=$.subTree;if(I===j){const Z=$.vnode;L(w,Z,Z.scopeId,Z.slotScopeIds,$.parent)}}},M=(w,I,R,O,$,j,Z,b,v=0)=>{for(let _=v;_<w.length;_++){const B=w[_]=b?si(w[_]):Ds(w[_]);A(null,B,I,R,O,$,j,Z,b)}},F=(w,I,R,O,$,j,Z)=>{const b=I.el=w.el;let{patchFlag:v,dynamicChildren:_,dirs:B}=I;v|=w.patchFlag&16;const re=w.props||at,z=I.props||at;let D;if(R&&Oi(R,!1),(D=z.onVnodeBeforeUpdate)&&Vs(D,R,I,w),B&&dn(I,w,R,"beforeUpdate"),R&&Oi(R,!0),_?ne(w.dynamicChildren,_,b,R,O,gg(I,$),j):Z||ae(w,I,b,null,R,O,gg(I,$),j,!1),v>0){if(v&16)ce(b,I,re,z,R,O,$);else if(v&2&&re.class!==z.class&&i(b,"class",null,z.class,$),v&4&&i(b,"style",re.style,z.style,$),v&8){const J=I.dynamicProps;for(let pe=0;pe<J.length;pe++){const xe=J[pe],tt=re[xe],Kt=z[xe];(Kt!==tt||xe==="value")&&i(b,xe,tt,Kt,$,w.children,R,O,it)}}v&1&&w.children!==I.children&&u(b,I.children)}else!Z&&_==null&&ce(b,I,re,z,R,O,$);((D=z.onVnodeUpdated)||B)&&us(()=>{D&&Vs(D,R,I,w),B&&dn(I,w,R,"updated")},O)},ne=(w,I,R,O,$,j,Z)=>{for(let b=0;b<I.length;b++){const v=w[b],_=I[b],B=v.el&&(v.type===Ut||!oi(v,_)||v.shapeFlag&70)?h(v.el):R;A(v,_,B,null,O,$,j,Z,!0)}},ce=(w,I,R,O,$,j,Z)=>{if(R!==O){if(R!==at)for(const b in R)!nc(b)&&!(b in O)&&i(w,b,R[b],null,Z,I.children,$,j,it);for(const b in O){if(nc(b))continue;const v=O[b],_=R[b];v!==_&&b!=="value"&&i(w,b,_,v,Z,I.children,$,j,it)}"value"in O&&i(w,"value",R.value,O.value,Z)}},te=(w,I,R,O,$,j,Z,b,v)=>{const _=I.el=w?w.el:o(""),B=I.anchor=w?w.anchor:o("");let{patchFlag:re,dynamicChildren:z,slotScopeIds:D}=I;D&&(b=b?b.concat(D):D),w==null?(n(_,R,O),n(B,R,O),M(I.children||[],R,B,$,j,Z,b,v)):re>0&&re&64&&z&&w.dynamicChildren?(ne(w.dynamicChildren,z,R,$,j,Z,b),(I.key!=null||$&&I===$.subTree)&&qS(w,I,!0)):ae(w,I,R,B,$,j,Z,b,v)},fe=(w,I,R,O,$,j,Z,b,v)=>{I.slotScopeIds=b,w==null?I.shapeFlag&512?$.ctx.activate(I,R,O,Z,v):Ce(I,R,O,$,j,Z,v):ye(w,I,v)},Ce=(w,I,R,O,$,j,Z)=>{const b=w.component=ME(w,O,$);if(Iw(w)&&(b.ctx.renderer=ze),HE(b),b.asyncDep){if($&&$.registerDep(b,ie),!w.el){const v=b.subTree=Se(nn);T(null,v,I,R)}}else ie(b,w,I,R,$,j,Z)},ye=(w,I,R)=>{const O=I.component=w.component;if(G0(w,I,R))if(O.asyncDep&&!O.asyncResolved){se(O,I,R);return}else O.next=I,F0(O.update),O.effect.dirty=!0,O.update();else I.el=w.el,O.vnode=I},ie=(w,I,R,O,$,j,Z)=>{const b=()=>{if(w.isMounted){let{next:B,bu:re,u:z,parent:D,vnode:J}=w;{const ws=GS(w);if(ws){B&&(B.el=J.el,se(w,B,Z)),ws.asyncDep.then(()=>{w.isUnmounted||b()});return}}let pe=B,xe;Oi(w,!1),B?(B.el=J.el,se(w,B,Z)):B=J,re&&bd(re),(xe=B.props&&B.props.onVnodeBeforeUpdate)&&Vs(xe,D,B,J),Oi(w,!0);const tt=fg(w),Kt=w.subTree;w.subTree=tt,A(Kt,tt,h(Kt.el),De(Kt),w,$,j),B.el=tt.el,pe===null&&kw(w,tt.el),z&&us(z,$),(xe=B.props&&B.props.onVnodeUpdated)&&us(()=>Vs(xe,D,B,J),$)}else{let B;const{el:re,props:z}=I,{bm:D,m:J,parent:pe}=w,xe=ac(I);if(Oi(w,!1),D&&bd(D),!xe&&(B=z&&z.onVnodeBeforeMount)&&Vs(B,pe,I),Oi(w,!0),re&&P){const tt=()=>{w.subTree=fg(w),P(re,w.subTree,w,$,null)};xe?I.type.__asyncLoader().then(()=>!w.isUnmounted&&tt()):tt()}else{const tt=w.subTree=fg(w);A(null,tt,R,O,w,$,j),I.el=tt.el}if(J&&us(J,$),!xe&&(B=z&&z.onVnodeMounted)){const tt=I;us(()=>Vs(B,pe,tt),$)}(I.shapeFlag&256||pe&&ac(pe.vnode)&&pe.vnode.shapeFlag&256)&&w.a&&us(w.a,$),w.isMounted=!0,I=R=O=null}},v=w.effect=new gw(b,Bs,()=>Jm(_),w.scope),_=w.update=()=>{v.dirty&&v.run()};_.id=w.uid,Oi(w,!0),_()},se=(w,I,R)=>{I.component=w;const O=w.vnode.props;w.vnode=I,w.next=null,EE(w,I.props,O,R),IE(w,I.children,R),Ci(),Oy(w),Ni()},ae=(w,I,R,O,$,j,Z,b,v=!1)=>{const _=w&&w.children,B=w?w.shapeFlag:0,re=I.children,{patchFlag:z,shapeFlag:D}=I;if(z>0){if(z&128){oe(_,re,R,O,$,j,Z,b,v);return}else if(z&256){Re(_,re,R,O,$,j,Z,b,v);return}}D&8?(B&16&&it(_,$,j),re!==_&&u(R,re)):B&16?D&16?oe(_,re,R,O,$,j,Z,b,v):it(_,$,j,!0):(B&8&&u(R,""),D&16&&M(re,R,O,$,j,Z,b,v))},Re=(w,I,R,O,$,j,Z,b,v)=>{w=w||tc,I=I||tc;const _=w.length,B=I.length,re=Math.min(_,B);let z;for(z=0;z<re;z++){const D=I[z]=v?si(I[z]):Ds(I[z]);A(w[z],D,R,null,$,j,Z,b,v)}_>B?it(w,$,j,!0,!1,re):M(I,R,O,$,j,Z,b,v,re)},oe=(w,I,R,O,$,j,Z,b,v)=>{let _=0;const B=I.length;let re=w.length-1,z=B-1;for(;_<=re&&_<=z;){const D=w[_],J=I[_]=v?si(I[_]):Ds(I[_]);if(oi(D,J))A(D,J,R,null,$,j,Z,b,v);else break;_++}for(;_<=re&&_<=z;){const D=w[re],J=I[z]=v?si(I[z]):Ds(I[z]);if(oi(D,J))A(D,J,R,null,$,j,Z,b,v);else break;re--,z--}if(_>re){if(_<=z){const D=z+1,J=D<B?I[D].el:O;for(;_<=z;)A(null,I[_]=v?si(I[_]):Ds(I[_]),R,J,$,j,Z,b,v),_++}}else if(_>z)for(;_<=re;)Y(w[_],$,j,!0),_++;else{const D=_,J=_,pe=new Map;for(_=J;_<=z;_++){const ys=I[_]=v?si(I[_]):Ds(I[_]);ys.key!=null&&pe.set(ys.key,_)}let xe,tt=0;const Kt=z-J+1;let ws=!1,Of=0;const vo=new Array(Kt);for(_=0;_<Kt;_++)vo[_]=0;for(_=D;_<=re;_++){const ys=w[_];if(tt>=Kt){Y(ys,$,j,!0);continue}let cn;if(ys.key!=null)cn=pe.get(ys.key);else for(xe=J;xe<=z;xe++)if(vo[xe-J]===0&&oi(ys,I[xe])){cn=xe;break}cn===void 0?Y(ys,$,j,!0):(vo[cn-J]=_+1,cn>=Of?Of=cn:ws=!0,A(ys,I[cn],R,null,$,j,Z,b,v),tt++)}const Ay=ws?OE(vo):tc;for(xe=Ay.length-1,_=Kt-1;_>=0;_--){const ys=J+_,cn=I[ys],ky=ys+1<B?I[ys+1].el:O;vo[_]===0?A(null,cn,R,ky,$,j,Z,b,v):ws&&(xe<0||_!==Ay[xe]?de(cn,R,ky,2):xe--)}}},de=(w,I,R,O,$=null)=>{const{el:j,type:Z,transition:b,children:v,shapeFlag:_}=w;if(_&6){de(w.component.subTree,I,R,O);return}if(_&128){w.suspense.move(I,R,O);return}if(_&64){Z.move(w,I,R,ze);return}if(Z===Ut){n(j,I,R);for(let re=0;re<v.length;re++)de(v[re],I,R,O);n(w.anchor,I,R);return}if(Z===Yh){y(w,I,R);return}if(O!==2&&_&1&&b)if(O===0)b.beforeEnter(j),n(j,I,R),us(()=>b.enter(j),$);else{const{leave:re,delayLeave:z,afterLeave:D}=b,J=()=>n(j,I,R),pe=()=>{re(j,()=>{J(),D&&D()})};z?z(j,J,pe):pe()}else n(j,I,R)},Y=(w,I,R,O=!1,$=!1)=>{const{type:j,props:Z,ref:b,children:v,dynamicChildren:_,shapeFlag:B,patchFlag:re,dirs:z}=w;if(b!=null&&cm(b,null,R,w,!0),B&256){I.ctx.deactivate(w);return}const D=B&1&&z,J=!ac(w);let pe;if(J&&(pe=Z&&Z.onVnodeBeforeUnmount)&&Vs(pe,I,w),B&6)qe(w.component,R,O);else{if(B&128){w.suspense.unmount(R,O);return}D&&dn(w,null,I,"beforeUnmount"),B&64?w.type.remove(w,I,R,$,ze,O):_&&(j!==Ut||re>0&&re&64)?it(_,I,R,!1,!0):(j===Ut&&re&384||!$&&B&16)&&it(v,I,R),O&&be(w)}(J&&(pe=Z&&Z.onVnodeUnmounted)||D)&&us(()=>{pe&&Vs(pe,I,w),D&&dn(w,null,I,"unmounted")},R)},be=w=>{const{type:I,el:R,anchor:O,transition:$}=w;if(I===Ut){Be(R,O);return}if(I===Yh){p(w);return}const j=()=>{r(R),$&&!$.persisted&&$.afterLeave&&$.afterLeave()};if(w.shapeFlag&1&&$&&!$.persisted){const{leave:Z,delayLeave:b}=$,v=()=>Z(R,j);b?b(w.el,j,v):v()}else j()},Be=(w,I)=>{let R;for(;w!==I;)R=f(w),r(w),w=R;r(I)},qe=(w,I,R)=>{const{bum:O,scope:$,update:j,subTree:Z,um:b}=w;O&&bd(O),$.stop(),j&&(j.active=!1,Y(Z,w,I,R)),b&&us(b,I),us(()=>{w.isUnmounted=!0},I),I&&I.pendingBranch&&!I.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===I.pendingId&&(I.deps--,I.deps===0&&I.resolve())},it=(w,I,R,O=!1,$=!1,j=0)=>{for(let Z=j;Z<w.length;Z++)Y(w[Z],I,R,O,$)},De=w=>w.shapeFlag&6?De(w.component.subTree):w.shapeFlag&128?w.suspense.next():f(w.anchor||w.el);let Ve=!1;const ge=(w,I,R)=>{w==null?I._vnode&&Y(I._vnode,null,null,!0):A(I._vnode||null,w,I,null,null,null,R),Ve||(Ve=!0,Oy(),am(),Ve=!1),I._vnode=w},ze={p:A,um:Y,m:de,r:be,mt:Ce,mc:M,pc:ae,pbc:ne,n:De,o:s};let K,P;return e&&([K,P]=e(ze)),{render:ge,hydrate:K,createApp:AE(ge,K)}}function gg({type:s,props:e},t){return t==="svg"&&s==="foreignObject"||t==="mathml"&&s==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Oi({effect:s,update:e},t){s.allowRecurse=e.allowRecurse=t}function WS(s,e){return(!s||s&&!s.pendingBranch)&&e&&!e.persisted}function qS(s,e,t=!1){const n=s.children,r=e.children;if(Ne(n)&&Ne(r))for(let i=0;i<n.length;i++){const a=n[i];let o=r[i];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=r[i]=si(r[i]),o.el=a.el),t||qS(a,o)),o.type===lo&&(o.el=a.el)}}function OE(s){const e=s.slice(),t=[0];let n,r,i,a,o;const l=s.length;for(n=0;n<l;n++){const c=s[n];if(c!==0){if(r=t[t.length-1],s[r]<c){e[n]=r,t.push(n);continue}for(i=0,a=t.length-1;i<a;)o=i+a>>1,s[t[o]]<c?i=o+1:a=o;c<s[t[i]]&&(i>0&&(e[n]=t[i-1]),t[i]=n)}}for(i=t.length,a=t[i-1];i-- >0;)t[i]=a,a=e[a];return t}function GS(s){const e=s.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:GS(e)}const VE=s=>s.__isTeleport,Ut=Symbol.for("v-fgt"),lo=Symbol.for("v-txt"),nn=Symbol.for("v-cmt"),Yh=Symbol.for("v-stc"),Xh=[];let Ks=null;function We(s=!1){Xh.push(Ks=s?null:[])}function YS(){Xh.pop(),Ks=Xh[Xh.length-1]||null}let wc=1;function qy(s){wc+=s}function XS(s){return s.dynamicChildren=wc>0?Ks||tc:null,YS(),wc>0&&Ks&&Ks.push(s),s}function Et(s,e,t,n,r,i){return XS(le(s,e,t,n,r,i,!0))}function pn(s,e,t,n,r){return XS(Se(s,e,t,n,r,!0))}function of(s){return s?s.__v_isVNode===!0:!1}function oi(s,e){return s.type===e.type&&s.key===e.key}const QS=({key:s})=>s??null,Ad=({ref:s,ref_key:e,ref_for:t})=>(typeof s=="number"&&(s=""+s),s!=null?At(s)||we(s)||Te(s)?{i:Tt,r:s,k:e,f:!!t}:s:null);function le(s,e=null,t=null,n=0,r=null,i=s===Ut?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:s,props:e,key:e&&QS(e),ref:e&&Ad(e),scopeId:qm,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Tt};return o?(Ow(l,t),i&128&&s.normalize(l)):t&&(l.shapeFlag|=At(t)?8:16),wc>0&&!a&&Ks&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Ks.push(l),l}const Se=PE;function PE(s,e=null,t=null,n=0,r=null,i=!1){if((!s||s===kS)&&(s=nn),of(s)){const o=yc(s,e,!0);return t&&Ow(o,t),wc>0&&!i&&Ks&&(o.shapeFlag&6?Ks[Ks.indexOf(s)]=o:Ks.push(o)),o.patchFlag|=-2,o}if(JE(s)&&(s=s.__vccOpts),e){e=zS(e);let{class:o,style:l}=e;o&&!At(o)&&(e.class=Pt(o)),rt(l)&&(dS(l)&&!Ne(l)&&(l=Ht({},l)),e.style=Fm(l))}const a=At(s)?1:X0(s)?128:VE(s)?64:rt(s)?4:Te(s)?2:0;return le(s,e,t,n,r,a,i,!0)}function zS(s){return s?dS(s)||MS(s)?Ht({},s):s:null}function yc(s,e,t=!1,n=!1){const{props:r,ref:i,patchFlag:a,children:o,transition:l}=s,c=e?ZS(r||{},e):r,u={__v_isVNode:!0,__v_skip:!0,type:s.type,props:c,key:c&&QS(c),ref:e&&e.ref?t&&i?Ne(i)?i.concat(Ad(e)):[i,Ad(e)]:Ad(e):i,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:o,target:s.target,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:e&&s.type!==Ut?a===-1?16:a|16:a,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:l,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&yc(s.ssContent),ssFallback:s.ssFallback&&yc(s.ssFallback),el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return l&&n&&(u.transition=l.clone(u)),u}function Me(s=" ",e=0){return Se(lo,null,s,e)}function LE(s,e){const t=Se(Yh,null,s);return t.staticCount=e,t}function fn(s="",e=!1){return e?(We(),pn(nn,null,s)):Se(nn,null,s)}function Ds(s){return s==null||typeof s=="boolean"?Se(nn):Ne(s)?Se(Ut,null,s.slice()):typeof s=="object"?si(s):Se(lo,null,String(s))}function si(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:yc(s)}function Ow(s,e){let t=0;const{shapeFlag:n}=s;if(e==null)e=null;else if(Ne(e))t=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),Ow(s,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!MS(e)?e._ctx=Tt:r===3&&Tt&&(Tt.slots._===1?e._=1:(e._=2,s.patchFlag|=1024))}else Te(e)?(e={default:e,_ctx:Tt},t=32):(e=String(e),n&64?(t=16,e=[Me(e)]):t=8);s.children=e,s.shapeFlag|=t}function ZS(...s){const e={};for(let t=0;t<s.length;t++){const n=s[t];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=Pt([e.class,n.class]));else if(r==="style")e.style=Fm([e.style,n.style]);else if(Sf(r)){const i=e[r],a=n[r];a&&i!==a&&!(Ne(i)&&i.includes(a))&&(e[r]=i?[].concat(i,a):a)}else r!==""&&(e[r]=n[r])}return e}function Vs(s,e,t,n=null){en(s,e,7,[t,n])}const DE=VS();let UE=0;function ME(s,e,t){const n=s.type,r=(e?e.appContext:s.appContext)||DE,i={uid:UE++,vnode:s,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new zb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:$S(n,r),emitsOptions:AS(n,r),emit:null,emitted:null,propsDefaults:at,inheritAttrs:n.inheritAttrs,ctx:at,data:at,props:at,attrs:at,slots:at,refs:at,setupState:at,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=j0.bind(null,i),s.ce&&s.ce(i),i}let Ot=null;const kf=()=>Ot||Tt;let um,dp;{const s=Gb(),e=(t,n)=>{let r;return(r=s[t])||(r=s[t]=[]),r.push(n),i=>{r.length>1?r.forEach(a=>a(i)):r[0](i)}};um=e("__VUE_INSTANCE_SETTERS__",t=>Ot=t),dp=e("__VUE_SSR_SETTERS__",t=>Cf=t)}const Ef=s=>{const e=Ot;return um(s),s.scope.on(),()=>{s.scope.off(),um(e)}},Gy=()=>{Ot&&Ot.scope.off(),um(null)};function e1(s){return s.vnode.shapeFlag&4}let Cf=!1;function HE(s,e=!1){e&&dp(e);const{props:t,children:n}=s.vnode,r=e1(s);kE(s,t,r,e),NE(s,n);const i=r?$E(s,e):void 0;return e&&dp(!1),i}function $E(s,e){const t=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,gE);const{setup:n}=t;if(n){const r=s.setupContext=n.length>1?KE(s):null,i=Ef(s);Ci();const a=gi(n,s,0,[s.props,r]);if(Ni(),i(),jb(a)){if(a.then(Gy,Gy),e)return a.then(o=>{mp(s,o,e)}).catch(o=>{Rc(o,s,0)});s.asyncDep=a}else mp(s,a,e)}else t1(s,e)}function mp(s,e,t){Te(e)?s.type.__ssrInlineRender?s.ssrRender=e:s.render=e:rt(e)&&(s.setupState=wS(e)),t1(s,t)}let Yy;function t1(s,e,t){const n=s.type;if(!s.render){if(!e&&Yy&&!n.render){const r=n.template||Tw(s).template;if(r){const{isCustomElement:i,compilerOptions:a}=s.appContext.config,{delimiters:o,compilerOptions:l}=n,c=Ht(Ht({isCustomElement:i,delimiters:o},a),l);n.render=Yy(r,c)}}s.render=n.render||Bs}{const r=Ef(s);Ci();try{pE(s)}finally{Ni(),r()}}}const FE={get(s,e){return gs(s,"get",""),s[e]}};function KE(s){const e=t=>{s.exposed=t||{}};return{attrs:new Proxy(s.attrs,FE),slots:s.slots,emit:s.emit,expose:e}}function Ym(s){if(s.exposed)return s.exposeProxy||(s.exposeProxy=new Proxy(wS(O0(s.exposed)),{get(e,t){if(t in e)return e[t];if(t in Gh)return Gh[t](s)},has(e,t){return t in e||t in Gh}}))}function jE(s,e=!0){return Te(s)?s.displayName||s.name:s.name||e&&s.__name}function JE(s){return Te(s)&&"__vccOpts"in s}const Yt=(s,e)=>V0(s,e,Cf);function Vw(s,e,t){const n=arguments.length;return n===2?rt(e)&&!Ne(e)?of(e)?Se(s,null,[e]):Se(s,e):Se(s,null,e):(n>3?t=Array.prototype.slice.call(arguments,2):n===3&&of(t)&&(t=[t]),Se(s,e,t))}const s1="3.4.27";/**
* @vue/runtime-dom v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const WE="http://www.w3.org/2000/svg",qE="http://www.w3.org/1998/Math/MathML",ni=typeof document<"u"?document:null,Xy=ni&&ni.createElement("template"),GE={insert:(s,e,t)=>{e.insertBefore(s,t||null)},remove:s=>{const e=s.parentNode;e&&e.removeChild(s)},createElement:(s,e,t,n)=>{const r=e==="svg"?ni.createElementNS(WE,s):e==="mathml"?ni.createElementNS(qE,s):ni.createElement(s,t?{is:t}:void 0);return s==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:s=>ni.createTextNode(s),createComment:s=>ni.createComment(s),setText:(s,e)=>{s.nodeValue=e},setElementText:(s,e)=>{s.textContent=e},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>ni.querySelector(s),setScopeId(s,e){s.setAttribute(e,"")},insertStaticContent(s,e,t,n,r,i){const a=t?t.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===i||!(r=r.nextSibling)););else{Xy.innerHTML=n==="svg"?`<svg>${s}</svg>`:n==="mathml"?`<math>${s}</math>`:s;const o=Xy.content;if(n==="svg"||n==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,t)}return[a?a.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},YE=Symbol("_vtc");function XE(s,e,t){const n=s[YE];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?s.removeAttribute("class"):t?s.setAttribute("class",e):s.className=e}const Qy=Symbol("_vod"),QE=Symbol("_vsh"),zE=Symbol(""),ZE=/(^|;)\s*display\s*:/;function eC(s,e,t){const n=s.style,r=At(t);let i=!1;if(t&&!r){if(e)if(At(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();t[o]==null&&kd(n,o,"")}else for(const a in e)t[a]==null&&kd(n,a,"");for(const a in t)a==="display"&&(i=!0),kd(n,a,t[a])}else if(r){if(e!==t){const a=n[zE];a&&(t+=";"+a),n.cssText=t,i=ZE.test(t)}}else e&&s.removeAttribute("style");Qy in s&&(s[Qy]=i?n.display:"",s[QE]&&(n.display="none"))}const zy=/\s*!important$/;function kd(s,e,t){if(Ne(t))t.forEach(n=>kd(s,e,n));else if(t==null&&(t=""),e.startsWith("--"))s.setProperty(e,t);else{const n=tC(s,e);zy.test(t)?s.setProperty(Tc(n),t.replace(zy,""),"important"):s[n]=t}}const Zy=["Webkit","Moz","ms"],pg={};function tC(s,e){const t=pg[e];if(t)return t;let n=En(e);if(n!=="filter"&&n in s)return pg[e]=n;n=$m(n);for(let r=0;r<Zy.length;r++){const i=Zy[r]+n;if(i in s)return pg[e]=i}return e}const ev="http://www.w3.org/1999/xlink";function sC(s,e,t,n,r){if(n&&e.startsWith("xlink:"))t==null?s.removeAttributeNS(ev,e.slice(6,e.length)):s.setAttributeNS(ev,e,t);else{const i=c0(e);t==null||i&&!Yb(t)?s.removeAttribute(e):s.setAttribute(e,i?"":t)}}function nC(s,e,t,n,r,i,a){if(e==="innerHTML"||e==="textContent"){n&&a(n,r,i),s[e]=t??"";return}const o=s.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const c=o==="OPTION"?s.getAttribute("value")||"":s.value,u=t??"";(c!==u||!("_value"in s))&&(s.value=u),t==null&&s.removeAttribute(e),s._value=t;return}let l=!1;if(t===""||t==null){const c=typeof s[e];c==="boolean"?t=Yb(t):t==null&&c==="string"?(t="",l=!0):c==="number"&&(t=0,l=!0)}try{s[e]=t}catch{}l&&s.removeAttribute(e)}function li(s,e,t,n){s.addEventListener(e,t,n)}function rC(s,e,t,n){s.removeEventListener(e,t,n)}const tv=Symbol("_vei");function iC(s,e,t,n,r=null){const i=s[tv]||(s[tv]={}),a=i[e];if(n&&a)a.value=n;else{const[o,l]=aC(e);if(n){const c=i[e]=cC(n,r);li(s,o,c,l)}else a&&(rC(s,o,a,l),i[e]=void 0)}}const sv=/(?:Once|Passive|Capture)$/;function aC(s){let e;if(sv.test(s)){e={};let n;for(;n=s.match(sv);)s=s.slice(0,s.length-n[0].length),e[n[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):Tc(s.slice(2)),e]}let wg=0;const oC=Promise.resolve(),lC=()=>wg||(oC.then(()=>wg=0),wg=Date.now());function cC(s,e){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;en(uC(n,t.value),e,5,[n])};return t.value=s,t.attached=lC(),t}function uC(s,e){if(Ne(e)){const t=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{t.call(s),s._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const nv=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,hC=(s,e,t,n,r,i,a,o,l)=>{const c=r==="svg";e==="class"?XE(s,n,c):e==="style"?eC(s,t,n):Sf(e)?hw(e)||iC(s,e,t,n,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):fC(s,e,n,c))?nC(s,e,n,i,a,o,l):(e==="true-value"?s._trueValue=n:e==="false-value"&&(s._falseValue=n),sC(s,e,n,c))};function fC(s,e,t,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in s&&nv(e)&&Te(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&s.tagName==="INPUT"||e==="type"&&s.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=s.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return nv(e)&&At(t)?!1:e in s}const vc=s=>{const e=s.props["onUpdate:modelValue"]||!1;return Ne(e)?t=>bd(e,t):e};function dC(s){s.target.composing=!0}function rv(s){const e=s.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const er=Symbol("_assign"),iv={created(s,{modifiers:{lazy:e,trim:t,number:n}},r){s[er]=vc(r);const i=n||r.props&&r.props.type==="number";li(s,e?"change":"input",a=>{if(a.target.composing)return;let o=s.value;t&&(o=o.trim()),i&&(o=tp(o)),s[er](o)}),t&&li(s,"change",()=>{s.value=s.value.trim()}),e||(li(s,"compositionstart",dC),li(s,"compositionend",rv),li(s,"change",rv))},mounted(s,{value:e}){s.value=e??""},beforeUpdate(s,{value:e,modifiers:{lazy:t,trim:n,number:r}},i){if(s[er]=vc(i),s.composing)return;const a=(r||s.type==="number")&&!/^0\d/.test(s.value)?tp(s.value):s.value,o=e??"";a!==o&&(document.activeElement===s&&s.type!=="range"&&(t||n&&s.value.trim()===o)||(s.value=o))}},bo={deep:!0,created(s,e,t){s[er]=vc(t),li(s,"change",()=>{const n=s._modelValue,r=n1(s),i=s.checked,a=s[er];if(Ne(n)){const o=Xb(n,r),l=o!==-1;if(i&&!l)a(n.concat(r));else if(!i&&l){const c=[...n];c.splice(o,1),a(c)}}else if(Mm(n)){const o=new Set(n);i?o.add(r):o.delete(r),a(o)}else a(r1(s,i))})},mounted:av,beforeUpdate(s,e,t){s[er]=vc(t),av(s,e,t)}};function av(s,{value:e,oldValue:t},n){s._modelValue=e,Ne(e)?s.checked=Xb(e,n.props.value)>-1:Mm(e)?s.checked=e.has(n.props.value):e!==t&&(s.checked=gc(e,r1(s,!0)))}const So={created(s,{value:e},t){s.checked=gc(e,t.props.value),s[er]=vc(t),li(s,"change",()=>{s[er](n1(s))})},beforeUpdate(s,{value:e,oldValue:t},n){s[er]=vc(n),e!==t&&(s.checked=gc(e,n.props.value))}};function n1(s){return"_value"in s?s._value:s.value}function r1(s,e){const t=e?"_trueValue":"_falseValue";return t in s?s[t]:e}const mC=["ctrl","shift","alt","meta"],gC={stop:s=>s.stopPropagation(),prevent:s=>s.preventDefault(),self:s=>s.target!==s.currentTarget,ctrl:s=>!s.ctrlKey,shift:s=>!s.shiftKey,alt:s=>!s.altKey,meta:s=>!s.metaKey,left:s=>"button"in s&&s.button!==0,middle:s=>"button"in s&&s.button!==1,right:s=>"button"in s&&s.button!==2,exact:(s,e)=>mC.some(t=>s[`${t}Key`]&&!e.includes(t))},Hi=(s,e)=>{const t=s._withMods||(s._withMods={}),n=e.join(".");return t[n]||(t[n]=(r,...i)=>{for(let a=0;a<e.length;a++){const o=gC[e[a]];if(o&&o(r,e))return}return s(r,...i)})},i1=Ht({patchProp:hC},GE);let Qh,ov=!1;function pC(){return Qh||(Qh=TE(i1))}function wC(){return Qh=ov?Qh:RE(i1),ov=!0,Qh}const yC=(...s)=>{const e=pC().createApp(...s),{mount:t}=e;return e.mount=n=>{const r=o1(n);if(!r)return;const i=e._component;!Te(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.innerHTML="";const a=t(r,!1,a1(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},e},vC=(...s)=>{const e=wC().createApp(...s),{mount:t}=e;return e.mount=n=>{const r=o1(n);if(r)return t(r,!0,a1(r))},e};function a1(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function o1(s){return At(s)?document.querySelector(s):s}const bC=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,SC=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,AC=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function kC(s,e){if(s==="__proto__"||s==="constructor"&&e&&typeof e=="object"&&"prototype"in e){EC(s);return}return e}function EC(s){console.warn(`[destr] Dropping "${s}" key to prevent prototype pollution.`)}function lf(s,e={}){if(typeof s!="string")return s;const t=s.trim();if(s[0]==='"'&&s.endsWith('"')&&!s.includes("\\"))return t.slice(1,-1);if(t.length<=9){const n=t.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!AC.test(s)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return s}try{if(bC.test(s)||SC.test(s)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(s,kC)}return JSON.parse(s)}catch(n){if(e.strict)throw n;return s}}const CC=/#/g,NC=/&/g,IC=/\//g,_C=/=/g,Pw=/\+/g,BC=/%5e/gi,xC=/%60/gi,TC=/%7c/gi,RC=/%20/gi;function OC(s){return encodeURI(""+s).replace(TC,"|")}function gp(s){return OC(typeof s=="string"?s:JSON.stringify(s)).replace(Pw,"%2B").replace(RC,"+").replace(CC,"%23").replace(NC,"%26").replace(xC,"`").replace(BC,"^").replace(IC,"%2F")}function yg(s){return gp(s).replace(_C,"%3D")}function hm(s=""){try{return decodeURIComponent(""+s)}catch{return""+s}}function VC(s){return hm(s.replace(Pw," "))}function PC(s){return hm(s.replace(Pw," "))}function Lw(s=""){const e={};s[0]==="?"&&(s=s.slice(1));for(const t of s.split("&")){const n=t.match(/([^=]+)=?(.*)/)||[];if(n.length<2)continue;const r=VC(n[1]);if(r==="__proto__"||r==="constructor")continue;const i=PC(n[2]||"");e[r]===void 0?e[r]=i:Array.isArray(e[r])?e[r].push(i):e[r]=[e[r],i]}return e}function LC(s,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(t=>`${yg(s)}=${gp(t)}`).join("&"):`${yg(s)}=${gp(e)}`:yg(s)}function l1(s){return Object.keys(s).filter(e=>s[e]!==void 0).map(e=>LC(e,s[e])).filter(Boolean).join("&")}const DC=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,UC=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,MC=/^([/\\]\s*){2,}[^/\\]/,HC=/^[\s\0]*(blob|data|javascript|vbscript):$/i,$C=/\/$|\/\?|\/#/,FC=/^\.?\//;function mo(s,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?DC.test(s):UC.test(s)||(e.acceptRelative?MC.test(s):!1)}function KC(s){return!!s&&HC.test(s)}function pp(s="",e){return e?$C.test(s):s.endsWith("/")}function Dw(s="",e){if(!e)return(pp(s)?s.slice(0,-1):s)||"/";if(!pp(s,!0))return s||"/";let t=s,n="";const r=s.indexOf("#");r>=0&&(t=s.slice(0,r),n=s.slice(r));const[i,...a]=t.split("?");return((i.endsWith("/")?i.slice(0,-1):i)||"/")+(a.length>0?`?${a.join("?")}`:"")+n}function fm(s="",e){if(!e)return s.endsWith("/")?s:s+"/";if(pp(s,!0))return s||"/";let t=s,n="";const r=s.indexOf("#");if(r>=0&&(t=s.slice(0,r),n=s.slice(r),!t))return n;const[i,...a]=t.split("?");return i+"/"+(a.length>0?`?${a.join("?")}`:"")+n}function jC(s=""){return s.startsWith("/")}function lv(s=""){return jC(s)?s:"/"+s}function JC(s,e){if(u1(e)||mo(s))return s;const t=Dw(e);return s.startsWith(t)?s:an(t,s)}function WC(s,e){if(u1(e))return s;const t=Dw(e);if(!s.startsWith(t))return s;const n=s.slice(t.length);return n[0]==="/"?n:"/"+n}function c1(s,e){const t=Nf(s),n={...Lw(t.search),...e};return t.search=l1(n),f1(t)}function u1(s){return!s||s==="/"}function qC(s){return s&&s!=="/"}function an(s,...e){let t=s||"";for(const n of e.filter(r=>qC(r)))if(t){const r=n.replace(FC,"");t=fm(t)+r}else t=n;return t}function wp(s,e,t={}){return t.trailingSlash||(s=fm(s),e=fm(e)),t.leadingSlash||(s=lv(s),e=lv(e)),t.encoding||(s=hm(s),e=hm(e)),s===e}const h1=Symbol.for("ufo:protocolRelative");function Nf(s="",e){const t=s.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(t){const[,h,f=""]=t;return{protocol:h.toLowerCase(),pathname:f,href:h+f,auth:"",host:"",search:"",hash:""}}if(!mo(s,{acceptRelative:!0}))return e?Nf(e+s):yp(s);const[,n="",r,i=""]=s.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,a="",o=""]=i.match(/([^#/?]*)(.*)?/)||[],{pathname:l,search:c,hash:u}=yp(o.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:n.toLowerCase(),auth:r?r.slice(0,Math.max(0,r.length-1)):"",host:a,pathname:l,search:c,hash:u,[h1]:!n}}function yp(s=""){const[e="",t="",n=""]=(s.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:t,hash:n}}function f1(s){const e=s.pathname||"",t=s.search?(s.search.startsWith("?")?"":"?")+s.search:"",n=s.hash||"",r=s.auth?s.auth+"@":"",i=s.host||"";return(s.protocol||s[h1]?(s.protocol||"")+"//":"")+r+i+e+t+n}class GC extends Error{constructor(e,t){super(e,t),this.name="FetchError",t!=null&&t.cause&&!this.cause&&(this.cause=t.cause)}}function YC(s){var l,c,u,h,f;const e=((l=s.error)==null?void 0:l.message)||((c=s.error)==null?void 0:c.toString())||"",t=((u=s.request)==null?void 0:u.method)||((h=s.options)==null?void 0:h.method)||"GET",n=((f=s.request)==null?void 0:f.url)||String(s.request)||"/",r=`[${t}] ${JSON.stringify(n)}`,i=s.response?`${s.response.status} ${s.response.statusText}`:"<no response>",a=`${r}: ${i}${e?` ${e}`:""}`,o=new GC(a,s.error?{cause:s.error}:void 0);for(const m of["request","options","response"])Object.defineProperty(o,m,{get(){return s[m]}});for(const[m,S]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(o,m,{get(){return s.response&&s.response[S]}});return o}const XC=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function cv(s="GET"){return XC.has(s.toUpperCase())}function QC(s){if(s===void 0)return!1;const e=typeof s;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(s)?!0:s.buffer?!1:s.constructor&&s.constructor.name==="Object"||typeof s.toJSON=="function"}const zC=new Set(["image/svg","application/xml","application/xhtml","application/html"]),ZC=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function eN(s=""){if(!s)return"json";const e=s.split(";").shift()||"";return ZC.test(e)?"json":zC.has(e)||e.startsWith("text/")?"text":"blob"}function tN(s,e,t=globalThis.Headers){const n={...e,...s};if(e!=null&&e.params&&(s!=null&&s.params)&&(n.params={...e==null?void 0:e.params,...s==null?void 0:s.params}),e!=null&&e.query&&(s!=null&&s.query)&&(n.query={...e==null?void 0:e.query,...s==null?void 0:s.query}),e!=null&&e.headers&&(s!=null&&s.headers)){n.headers=new t((e==null?void 0:e.headers)||{});for(const[r,i]of new t((s==null?void 0:s.headers)||{}))n.headers.set(r,i)}return n}const sN=new Set([408,409,425,429,500,502,503,504]),nN=new Set([101,204,205,304]);function d1(s={}){const{fetch:e=globalThis.fetch,Headers:t=globalThis.Headers,AbortController:n=globalThis.AbortController}=s;async function r(o){const l=o.error&&o.error.name==="AbortError"&&!o.options.timeout||!1;if(o.options.retry!==!1&&!l){let u;typeof o.options.retry=="number"?u=o.options.retry:u=cv(o.options.method)?0:1;const h=o.response&&o.response.status||500;if(u>0&&(Array.isArray(o.options.retryStatusCodes)?o.options.retryStatusCodes.includes(h):sN.has(h))){const f=o.options.retryDelay||0;return f>0&&await new Promise(m=>setTimeout(m,f)),i(o.request,{...o.options,retry:u-1})}}const c=YC(o);throw Error.captureStackTrace&&Error.captureStackTrace(c,i),c}const i=async function(l,c={}){var m;const u={request:l,options:tN(c,s.defaults,t),response:void 0,error:void 0};u.options.method=(m=u.options.method)==null?void 0:m.toUpperCase(),u.options.onRequest&&await u.options.onRequest(u),typeof u.request=="string"&&(u.options.baseURL&&(u.request=JC(u.request,u.options.baseURL)),(u.options.query||u.options.params)&&(u.request=c1(u.request,{...u.options.params,...u.options.query}))),u.options.body&&cv(u.options.method)&&(QC(u.options.body)?(u.options.body=typeof u.options.body=="string"?u.options.body:JSON.stringify(u.options.body),u.options.headers=new t(u.options.headers||{}),u.options.headers.has("content-type")||u.options.headers.set("content-type","application/json"),u.options.headers.has("accept")||u.options.headers.set("accept","application/json")):("pipeTo"in u.options.body&&typeof u.options.body.pipeTo=="function"||typeof u.options.body.pipe=="function")&&("duplex"in u.options||(u.options.duplex="half")));let h;if(!u.options.signal&&u.options.timeout){const S=new n;h=setTimeout(()=>S.abort(),u.options.timeout),u.options.signal=S.signal}try{u.response=await e(u.request,u.options)}catch(S){return u.error=S,u.options.onRequestError&&await u.options.onRequestError(u),await r(u)}finally{h&&clearTimeout(h)}if(u.response.body&&!nN.has(u.response.status)&&u.options.method!=="HEAD"){const S=(u.options.parseResponse?"json":u.options.responseType)||eN(u.response.headers.get("content-type")||"");switch(S){case"json":{const A=await u.response.text(),E=u.options.parseResponse||lf;u.response._data=E(A);break}case"stream":{u.response._data=u.response.body;break}default:u.response._data=await u.response[S]()}}return u.options.onResponse&&await u.options.onResponse(u),!u.options.ignoreResponseError&&u.response.status>=400&&u.response.status<600?(u.options.onResponseError&&await u.options.onResponseError(u),await r(u)):u.response},a=async function(l,c){return(await i(l,c))._data};return a.raw=i,a.native=(...o)=>e(...o),a.create=(o={})=>d1({...s,defaults:{...s.defaults,...o}}),a}const Uw=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),rN=Uw.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),iN=Uw.Headers,aN=Uw.AbortController,oN=d1({fetch:rN,Headers:iN,AbortController:aN}),lN=oN,cN=()=>{var s;return((s=window==null?void 0:window.__NUXT__)==null?void 0:s.config)||{}},dm=cN().app,uN=()=>dm.baseURL,hN=()=>dm.buildAssetsDir,fN=(...s)=>an(m1(),hN(),...s),m1=(...s)=>{const e=dm.cdnURL||dm.baseURL;return s.length?an(e,...s):e};globalThis.__buildAssetsURL=fN,globalThis.__publicAssetsURL=m1;function vp(s,e={},t){for(const n in s){const r=s[n],i=t?`${t}:${n}`:n;typeof r=="object"&&r!==null?vp(r,e,i):typeof r=="function"&&(e[i]=r)}return e}const dN={run:s=>s()},mN=()=>dN,g1=typeof console.createTask<"u"?console.createTask:mN;function gN(s,e){const t=e.shift(),n=g1(t);return s.reduce((r,i)=>r.then(()=>n.run(()=>i(...e))),Promise.resolve())}function pN(s,e){const t=e.shift(),n=g1(t);return Promise.all(s.map(r=>n.run(()=>r(...e))))}function vg(s,e){for(const t of[...s])t(e)}class wN{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,t,n={}){if(!e||typeof t!="function")return()=>{};const r=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!n.allowDeprecated){let a=i.message;a||(a=`${r} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(a)||(console.warn(a),this._deprecatedMessages.add(a))}if(!t.name)try{Object.defineProperty(t,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(t),()=>{t&&(this.removeHook(e,t),t=void 0)}}hookOnce(e,t){let n,r=(...i)=>(typeof n=="function"&&n(),n=void 0,r=void 0,t(...i));return n=this.hook(e,r),n}removeHook(e,t){if(this._hooks[e]){const n=this._hooks[e].indexOf(t);n!==-1&&this._hooks[e].splice(n,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,t){this._deprecatedHooks[e]=typeof t=="string"?{to:t}:t;const n=this._hooks[e]||[];delete this._hooks[e];for(const r of n)this.hook(e,r)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const t in e)this.deprecateHook(t,e[t])}addHooks(e){const t=vp(e),n=Object.keys(t).map(r=>this.hook(r,t[r]));return()=>{for(const r of n.splice(0,n.length))r()}}removeHooks(e){const t=vp(e);for(const n in t)this.removeHook(n,t[n])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...t){return t.unshift(e),this.callHookWith(gN,e,...t)}callHookParallel(e,...t){return t.unshift(e),this.callHookWith(pN,e,...t)}callHookWith(e,t,...n){const r=this._before||this._after?{name:t,args:n,context:{}}:void 0;this._before&&vg(this._before,r);const i=e(t in this._hooks?[...this._hooks[t]]:[],n);return i instanceof Promise?i.finally(()=>{this._after&&r&&vg(this._after,r)}):(this._after&&r&&vg(this._after,r),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const t=this._before.indexOf(e);t!==-1&&this._before.splice(t,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const t=this._after.indexOf(e);t!==-1&&this._after.splice(t,1)}}}}function p1(){return new wN}function yN(s={}){let e,t=!1;const n=a=>{if(e&&e!==a)throw new Error("Context conflict")};let r;if(s.asyncContext){const a=s.AsyncLocalStorage||globalThis.AsyncLocalStorage;a?r=new a:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(r&&e===void 0){const a=r.getStore();if(a!==void 0)return a}return e};return{use:()=>{const a=i();if(a===void 0)throw new Error("Context is not available");return a},tryUse:()=>i(),set:(a,o)=>{o||n(a),e=a,t=!0},unset:()=>{e=void 0,t=!1},call:(a,o)=>{n(a),e=a;try{return r?r.run(a,o):o()}finally{t||(e=void 0)}},async callAsync(a,o){e=a;const l=()=>{e=a},c=()=>e===a?l:void 0;bp.add(c);try{const u=r?r.run(a,o):o();return t||(e=void 0),await u}finally{bp.delete(c)}}}}function vN(s={}){const e={};return{get(t,n={}){return e[t]||(e[t]=yN({...s,...n})),e[t],e[t]}}}const mm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},uv="__unctx__",bN=mm[uv]||(mm[uv]=vN()),SN=(s,e={})=>bN.get(s,e),hv="__unctx_async_handlers__",bp=mm[hv]||(mm[hv]=new Set);function Ka(s){const e=[];for(const r of bp){const i=r();i&&e.push(i)}const t=()=>{for(const r of e)r()};let n=s();return n&&typeof n=="object"&&"catch"in n&&(n=n.catch(r=>{throw t(),r})),[n,t]}const w1=SN("nuxt-app",{asyncContext:!1}),AN="__nuxt_plugin";function kN(s){let e=0;const t={_scope:mw(),provide:void 0,globalName:"nuxt",versions:{get nuxt(){return"3.8.0"},get vue(){return t.vueApp.version}},payload:ir({data:{},state:{},_errors:{},...window.__NUXT__??{}}),static:{data:{}},runWithContext:r=>t._scope.run(()=>NN(t,r)),isHydrating:!0,deferHydration(){if(!t.isHydrating)return()=>{};e++;let r=!1;return()=>{if(!r&&(r=!0,e--,e===0))return t.isHydrating=!1,t.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:{},_payloadRevivers:{},...s};t.hooks=p1(),t.hook=t.hooks.hook,t.callHook=t.hooks.callHook,t.provide=(r,i)=>{const a="$"+r;Ff(t,a,i),Ff(t.vueApp.config.globalProperties,a,i)},Ff(t.vueApp,"$nuxt",t),Ff(t.vueApp.config.globalProperties,"$nuxt",t);{window.addEventListener("nuxt.preloadError",i=>{t.callHook("app:chunkError",{error:i.payload})}),window.useNuxtApp=window.useNuxtApp||et;const r=t.hook("app:error",(...i)=>{console.error("[nuxt] error caught during app initialization",...i)});t.hook("app:mounted",r)}const n=ir(t.payload.config);return t.provide("config",n),t}async function EN(s,e){if(e.hooks&&s.hooks.addHooks(e.hooks),typeof e=="function"){const{provide:t}=await s.runWithContext(()=>e(s))||{};if(t&&typeof t=="object")for(const n in t)s.provide(n,t[n])}}async function CN(s,e){const t=[],n=[];for(const r of e){const i=EN(s,r);r.parallel?t.push(i.catch(a=>n.push(a))):await i}if(await Promise.all(t),n.length)throw n[0]}/*! @__NO_SIDE_EFFECTS__ */function _i(s){return typeof s=="function"?s:(delete s.name,Object.assign(s.setup||(()=>{}),s,{[AN]:!0}))}function NN(s,e,t){const n=()=>t?e(...t):e();return w1.set(s),s.vueApp.runWithContext(n)}/*! @__NO_SIDE_EFFECTS__ */function et(){var e;let s;if(LS()&&(s=(e=kf())==null?void 0:e.appContext.app.$nuxt),s=s||w1.tryUse(),!s)throw new Error("[nuxt] instance unavailable");return s}/*! @__NO_SIDE_EFFECTS__ */function Xt(){return et().$config}function Ff(s,e,t){Object.defineProperty(s,e,{get:()=>t})}const IN="modulepreload",_N=function(s,e){return s[0]==="."?new URL(s,e).href:s},fv={},BN=function(e,t,n){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=_N(i,n),i in fv)return;fv[i]=!0;const a=i.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!n)for(let u=r.length-1;u>=0;u--){const h=r[u];if(h.href===i&&(!a||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${o}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":IN,a||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),a)return new Promise((u,h)=>{c.addEventListener("load",u),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})},Sp=(...s)=>BN(...s).catch(e=>{const t=new Event("nuxt.preloadError");throw t.payload=e,window.dispatchEvent(t),e}),xN=-1,TN=-2,RN=-3,ON=-4,VN=-5,PN=-6;function LN(s,e){return DN(JSON.parse(s),e)}function DN(s,e){if(typeof s=="number")return r(s,!0);if(!Array.isArray(s)||s.length===0)throw new Error("Invalid input");const t=s,n=Array(t.length);function r(i,a=!1){if(i===xN)return;if(i===RN)return NaN;if(i===ON)return 1/0;if(i===VN)return-1/0;if(i===PN)return-0;if(a)throw new Error("Invalid input");if(i in n)return n[i];const o=t[i];if(!o||typeof o!="object")n[i]=o;else if(Array.isArray(o))if(typeof o[0]=="string"){const l=o[0],c=e==null?void 0:e[l];if(c)return n[i]=c(r(o[1]));switch(l){case"Date":n[i]=new Date(o[1]);break;case"Set":const u=new Set;n[i]=u;for(let m=1;m<o.length;m+=1)u.add(r(o[m]));break;case"Map":const h=new Map;n[i]=h;for(let m=1;m<o.length;m+=2)h.set(r(o[m]),r(o[m+1]));break;case"RegExp":n[i]=new RegExp(o[1],o[2]);break;case"Object":n[i]=Object(o[1]);break;case"BigInt":n[i]=BigInt(o[1]);break;case"null":const f=Object.create(null);n[i]=f;for(let m=1;m<o.length;m+=2)f[o[m]]=r(o[m+1]);break;default:throw new Error(`Unknown type ${l}`)}}else{const l=new Array(o.length);n[i]=l;for(let c=0;c<o.length;c+=1){const u=o[c];u!==TN&&(l[c]=r(u))}}else{const l={};n[i]=l;for(const c in o){const u=o[c];l[c]=r(u)}}return n[i]}return r(0)}function UN(s){return Array.isArray(s)?s:[s]}const MN=["title","titleTemplate","script","style","noscript"],Ed=["base","meta","link","style","script","noscript"],HN=["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"],$N=["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"],y1=["tagPosition","tagPriority","tagDuplicateStrategy","children","innerHTML","textContent","processTemplateParams"],FN=typeof window<"u";function Mw(s){let e=9;for(let t=0;t<s.length;)e=Math.imul(e^s.charCodeAt(t++),9**9);return((e^e>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function dv(s){return s._h||Mw(s._d?s._d:`${s.tag}:${s.textContent||s.innerHTML||""}:${Object.entries(s.props).map(([e,t])=>`${e}:${String(t)}`).join(",")}`)}function v1(s,e){const{props:t,tag:n}=s;if($N.includes(n))return n;if(n==="link"&&t.rel==="canonical")return"canonical";if(t.charset)return"charset";const r=["id"];n==="meta"&&r.push("name","property","http-equiv");for(const i of r)if(typeof t[i]<"u"){const a=String(t[i]);return e&&!e(a)?!1:`${n}:${i}:${a}`}return!1}function mv(s,e){return s==null?e||null:typeof s=="function"?s(e):s}async function KN(s,e,t){const n={tag:s,props:await b1(typeof e=="object"&&typeof e!="function"&&!(e instanceof Promise)?{...e}:{[["script","noscript","style"].includes(s)?"innerHTML":"textContent"]:e},["templateParams","titleTemplate"].includes(s))};return y1.forEach(r=>{const i=typeof n.props[r]<"u"?n.props[r]:t[r];typeof i<"u"&&((!["innerHTML","textContent","children"].includes(r)||MN.includes(n.tag))&&(n[r==="children"?"innerHTML":r]=i),delete n.props[r])}),n.props.body&&(n.tagPosition="bodyClose",delete n.props.body),n.tag==="script"&&typeof n.innerHTML=="object"&&(n.innerHTML=JSON.stringify(n.innerHTML),n.props.type=n.props.type||"application/json"),Array.isArray(n.props.content)?n.props.content.map(r=>({...n,props:{...n.props,content:r}})):n}function jN(s,e){var n;const t=s==="class"?" ":";";return typeof e=="object"&&!Array.isArray(e)&&(e=Object.entries(e).filter(([,r])=>r).map(([r,i])=>s==="style"?`${r}:${i}`:r)),(n=String(Array.isArray(e)?e.join(t):e))==null?void 0:n.split(t).filter(r=>r.trim()).filter(Boolean).join(t)}async function b1(s,e){for(const t of Object.keys(s)){if(["class","style"].includes(t)){s[t]=jN(t,s[t]);continue}if(s[t]instanceof Promise&&(s[t]=await s[t]),!e&&!y1.includes(t)){const n=String(s[t]),r=t.startsWith("data-");n==="true"||n===""?s[t]=r?"true":!0:s[t]||(r&&n==="false"?s[t]="false":delete s[t])}}return s}const JN=10;async function WN(s){const e=[];return Object.entries(s.resolvedInput).filter(([t,n])=>typeof n<"u"&&HN.includes(t)).forEach(([t,n])=>{const r=UN(n);e.push(...r.map(i=>KN(t,i,s)).flat())}),(await Promise.all(e)).flat().filter(Boolean).map((t,n)=>(t._e=s._i,s.mode&&(t._m=s.mode),t._p=(s._i<<JN)+n,t))}const gv={base:-10,title:10},pv={critical:-80,high:-10,low:20};function gm(s){let e=100;const t=s.tagPriority;return typeof t=="number"?t:(s.tag==="meta"?(s.props["http-equiv"]==="content-security-policy"&&(e=-30),s.props.charset&&(e=-20),s.props.name==="viewport"&&(e=-15)):s.tag==="link"&&s.props.rel==="preconnect"?e=20:s.tag in gv&&(e=gv[s.tag]),typeof t=="string"&&t in pv?e+pv[t]:e)}const qN=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}],wv=["onload","onerror","onabort","onprogress","onloadstart"],dr="%separator";function Cd(s,e,t){if(typeof s!="string"||!s.includes("%"))return s;function n(a){let o;return["s","pageTitle"].includes(a)?o=e.pageTitle:a.includes(".")?o=a.split(".").reduce((l,c)=>l&&l[c]||void 0,e):o=e[a],typeof o<"u"?(o||"").replace(/"/g,'\\"'):!1}let r=s;try{r=decodeURI(s)}catch{}return(r.match(/%(\w+\.+\w+)|%(\w+)/g)||[]).sort().reverse().forEach(a=>{const o=n(a.slice(1));typeof o=="string"&&(s=s.replace(new RegExp(`\\${a}(\\W|$)`,"g"),(l,c)=>`${o}${c}`).trim())}),s.includes(dr)&&(s.endsWith(dr)&&(s=s.slice(0,-dr.length).trim()),s.startsWith(dr)&&(s=s.slice(dr.length).trim()),s=s.replace(new RegExp(`\\${dr}\\s*\\${dr}`,"g"),dr),s=Cd(s,{separator:t},t)),s}async function S1(s,e={}){var u;const t=e.document||s.resolvedOptions.document;if(!t||!s.dirty)return;const n={shouldRender:!0,tags:[]};if(await s.hooks.callHook("dom:beforeRender",n),!n.shouldRender)return;const r=(await s.resolveTags()).map(h=>({tag:h,id:Ed.includes(h.tag)?dv(h):h.tag,shouldRender:!0}));let i=s._dom;if(!i){i={elMap:{htmlAttrs:t.documentElement,bodyAttrs:t.body}};for(const h of["body","head"]){const f=(u=t[h])==null?void 0:u.children,m=[];for(const S of[...f].filter(A=>Ed.includes(A.tagName.toLowerCase()))){const A={tag:S.tagName.toLowerCase(),props:await b1(S.getAttributeNames().reduce((x,y)=>({...x,[y]:S.getAttribute(y)}),{})),innerHTML:S.innerHTML};let E=1,T=v1(A);for(;T&&m.find(x=>x._d===T);)T=`${T}:${E++}`;A._d=T||void 0,m.push(A),i.elMap[S.getAttribute("data-hid")||dv(A)]=S}}}i.pendingSideEffects={...i.sideEffects||{}},i.sideEffects={};function a(h,f,m){const S=`${h}:${f}`;i.sideEffects[S]=m,delete i.pendingSideEffects[S]}function o({id:h,$el:f,tag:m}){const S=m.tag.endsWith("Attrs");i.elMap[h]=f,S||(["textContent","innerHTML"].forEach(A=>{m[A]&&m[A]!==f[A]&&(f[A]=m[A])}),a(h,"el",()=>{var A;(A=i.elMap[h])==null||A.remove(),delete i.elMap[h]}));for(const[A,E]of Object.entries(m._eventHandlers||{}))f.getAttribute(`data-${A}`)!==""&&((m.tag==="bodyAttrs"?t.defaultView:f).addEventListener(A.replace("on",""),E.bind(f)),f.setAttribute(`data-${A}`,""));Object.entries(m.props).forEach(([A,E])=>{const T=`attr:${A}`;if(A==="class")for(const x of(E||"").split(" ").filter(Boolean))S&&a(h,`${T}:${x}`,()=>f.classList.remove(x)),!f.classList.contains(x)&&f.classList.add(x);else if(A==="style")for(const x of(E||"").split(";").filter(Boolean)){const[y,...p]=x.split(":").map(k=>k.trim());a(h,`${T}:${x}:${y}`,()=>{f.style.removeProperty(y)}),f.style.setProperty(y,p.join(":"))}else f.getAttribute(A)!==E&&f.setAttribute(A,E===!0?"":String(E)),S&&a(h,T,()=>f.removeAttribute(A))})}const l=[],c={bodyClose:void 0,bodyOpen:void 0,head:void 0};for(const h of r){const{tag:f,shouldRender:m,id:S}=h;if(m){if(f.tag==="title"){t.title=f.textContent;continue}h.$el=h.$el||i.elMap[S],h.$el?o(h):Ed.includes(f.tag)&&l.push(h)}}for(const h of l){const f=h.tag.tagPosition||"head";h.$el=t.createElement(h.tag.tag),o(h),c[f]=c[f]||t.createDocumentFragment(),c[f].appendChild(h.$el)}for(const h of r)await s.hooks.callHook("dom:renderTag",h,t,a);c.head&&t.head.appendChild(c.head),c.bodyOpen&&t.body.insertBefore(c.bodyOpen,t.body.firstChild),c.bodyClose&&t.body.appendChild(c.bodyClose),Object.values(i.pendingSideEffects).forEach(h=>h()),s._dom=i,s.dirty=!1,await s.hooks.callHook("dom:rendered",{renders:r})}async function GN(s,e={}){const t=e.delayFn||(n=>setTimeout(n,10));return s._domUpdatePromise=s._domUpdatePromise||new Promise(n=>t(async()=>{await S1(s,e),delete s._domUpdatePromise,n()}))}function YN(s){return e=>{var n,r;const t=((r=(n=e.resolvedOptions.document)==null?void 0:n.head.querySelector('script[id="unhead:payload"]'))==null?void 0:r.innerHTML)||!1;return t&&e.push(JSON.parse(t)),{mode:"client",hooks:{"entries:updated":function(i){GN(i,s)}}}}}const XN=["templateParams","htmlAttrs","bodyAttrs"],QN={hooks:{"tag:normalise":function({tag:s}){["hid","vmid","key"].forEach(n=>{s.props[n]&&(s.key=s.props[n],delete s.props[n])});const t=v1(s)||(s.key?`${s.tag}:${s.key}`:!1);t&&(s._d=t)},"tags:resolve":function(s){const e={};s.tags.forEach(n=>{const r=(n.key?`${n.tag}:${n.key}`:n._d)||n._p,i=e[r];if(i){let o=n==null?void 0:n.tagDuplicateStrategy;if(!o&&XN.includes(n.tag)&&(o="merge"),o==="merge"){const l=i.props;["class","style"].forEach(c=>{l[c]&&(n.props[c]?(c==="style"&&!l[c].endsWith(";")&&(l[c]+=";"),n.props[c]=`${l[c]} ${n.props[c]}`):n.props[c]=l[c])}),e[r].props={...l,...n.props};return}else if(n._e===i._e){i._duped=i._duped||[],n._d=`${i._d}:${i._duped.length+1}`,i._duped.push(n);return}else if(gm(n)>gm(i))return}const a=Object.keys(n.props).length+(n.innerHTML?1:0)+(n.textContent?1:0);if(Ed.includes(n.tag)&&a===0){delete e[r];return}e[r]=n});const t=[];Object.values(e).forEach(n=>{const r=n._duped;delete n._duped,t.push(n),r&&t.push(...r)}),s.tags=t,s.tags=s.tags.filter(n=>!(n.tag==="meta"&&(n.props.name||n.props.property)&&!n.props.content))}}},zN={mode:"server",hooks:{"tags:resolve":function(s){const e={};s.tags.filter(t=>["titleTemplate","templateParams","title"].includes(t.tag)&&t._m==="server").forEach(t=>{e[t.tag]=t.tag.startsWith("title")?t.textContent:t.props}),Object.keys(e).length&&s.tags.push({tag:"script",innerHTML:JSON.stringify(e),props:{id:"unhead:payload",type:"application/json"}})}}},ZN=["script","link","bodyAttrs"],eI=s=>({hooks:{"tags:resolve":function(e){for(const t of e.tags.filter(n=>ZN.includes(n.tag)))Object.entries(t.props).forEach(([n,r])=>{n.startsWith("on")&&typeof r=="function"&&(s.ssr&&wv.includes(n)?t.props[n]=`this.dataset.${n}fired = true`:delete t.props[n],t._eventHandlers=t._eventHandlers||{},t._eventHandlers[n]=r)}),s.ssr&&t._eventHandlers&&(t.props.src||t.props.href)&&(t.key=t.key||Mw(t.props.src||t.props.href))},"dom:renderTag":function({$el:e,tag:t}){var n,r;for(const i of Object.keys((e==null?void 0:e.dataset)||{}).filter(a=>wv.some(o=>`${o}fired`===a))){const a=i.replace("fired","");(r=(n=t._eventHandlers)==null?void 0:n[a])==null||r.call(e,new Event(a.replace("on","")))}}}}),tI=["link","style","script","noscript"],sI={hooks:{"tag:normalise":({tag:s})=>{s.key&&tI.includes(s.tag)&&(s.props["data-hid"]=s._h=Mw(s.key))}}},nI={hooks:{"tags:resolve":s=>{const e=t=>{var n;return(n=s.tags.find(r=>r._d===t))==null?void 0:n._p};for(const{prefix:t,offset:n}of qN)for(const r of s.tags.filter(i=>typeof i.tagPriority=="string"&&i.tagPriority.startsWith(t))){const i=e(r.tagPriority.replace(t,""));typeof i<"u"&&(r._p=i+n)}s.tags.sort((t,n)=>t._p-n._p).sort((t,n)=>gm(t)-gm(n))}}},rI={meta:"content",link:"href",htmlAttrs:"lang"},iI=s=>({hooks:{"tags:resolve":e=>{var o;const{tags:t}=e,n=(o=t.find(l=>l.tag==="title"))==null?void 0:o.textContent,r=t.findIndex(l=>l.tag==="templateParams"),i=r!==-1?t[r].props:{},a=i.separator||"|";delete i.separator,i.pageTitle=Cd(i.pageTitle||n||"",i,a);for(const l of t.filter(c=>c.processTemplateParams!==!1)){const c=rI[l.tag];c&&typeof l.props[c]=="string"?l.props[c]=Cd(l.props[c],i,a):(l.processTemplateParams===!0||["titleTemplate","title"].includes(l.tag))&&["innerHTML","textContent"].forEach(u=>{typeof l[u]=="string"&&(l[u]=Cd(l[u],i,a))})}s._templateParams=i,s._separator=a,e.tags=t.filter(l=>l.tag!=="templateParams")}}}),aI={hooks:{"tags:resolve":s=>{const{tags:e}=s;let t=e.findIndex(r=>r.tag==="titleTemplate");const n=e.findIndex(r=>r.tag==="title");if(n!==-1&&t!==-1){const r=mv(e[t].textContent,e[n].textContent);r!==null?e[n].textContent=r||e[n].textContent:delete e[n]}else if(t!==-1){const r=mv(e[t].textContent);r!==null&&(e[t].textContent=r,e[t].tag="title",t=-1)}t!==-1&&delete e[t],s.tags=e.filter(Boolean)}}},oI={hooks:{"tags:afterResolve":function(s){for(const e of s.tags)typeof e.innerHTML=="string"&&(e.innerHTML&&["application/ld+json","application/json"].includes(e.props.type)?e.innerHTML=e.innerHTML.replace(/</g,"\\u003C"):e.innerHTML=e.innerHTML.replace(new RegExp(`</${e.tag}`,"g"),`<\\/${e.tag}`))}}};let A1;function lI(s={}){const e=cI(s);return e.use(YN()),A1=e}function yv(s,e){return!s||s==="server"&&e||s==="client"&&!e}function cI(s={}){const e=p1();e.addHooks(s.hooks||{}),s.document=s.document||(FN?document:void 0);const t=!s.document,n=()=>{o.dirty=!0,e.callHook("entries:updated",o)};let r=0,i=[];const a=[],o={plugins:a,dirty:!1,resolvedOptions:s,hooks:e,headEntries(){return i},use(l){const c=typeof l=="function"?l(o):l;(!c.key||!a.some(u=>u.key===c.key))&&(a.push(c),yv(c.mode,t)&&e.addHooks(c.hooks||{}))},push(l,c){c==null||delete c.head;const u={_i:r++,input:l,...c};return yv(u.mode,t)&&(i.push(u),n()),{dispose(){i=i.filter(h=>h._i!==u._i),e.callHook("entries:updated",o),n()},patch(h){i=i.map(f=>(f._i===u._i&&(f.input=u.input=h),f)),n()}}},async resolveTags(){const l={tags:[],entries:[...i]};await e.callHook("entries:resolve",l);for(const c of l.entries){const u=c.resolvedInput||c.input;if(c.resolvedInput=await(c.transform?c.transform(u):u),c.resolvedInput)for(const h of await WN(c)){const f={tag:h,entry:c,resolvedOptions:o.resolvedOptions};await e.callHook("tag:normalise",f),l.tags.push(f.tag)}}return await e.callHook("tags:beforeResolve",l),await e.callHook("tags:resolve",l),await e.callHook("tags:afterResolve",l),l.tags},ssr:t};return[QN,zN,eI,sI,nI,iI,aI,oI,...(s==null?void 0:s.plugins)||[]].forEach(l=>o.use(l)),o.hooks.callHook("init",o),o}function uI(){return A1}const hI=s1.startsWith("3");function fI(s){return typeof s=="function"?s():ee(s)}function pm(s,e=""){if(s instanceof Promise)return s;const t=fI(s);return!s||!t?t:Array.isArray(t)?t.map(n=>pm(n,e)):typeof t=="object"?Object.fromEntries(Object.entries(t).map(([n,r])=>n==="titleTemplate"||n.startsWith("on")?[n,ee(r)]:[n,pm(r,n)])):t}const dI={hooks:{"entries:resolve":function(s){for(const e of s.entries)e.resolvedInput=pm(e.input)}}},k1="usehead";function mI(s){return{install(t){hI&&(t.config.globalProperties.$unhead=s,t.config.globalProperties.$head=s,t.provide(k1,s))}}.install}function gI(s={}){s.domDelayFn=s.domDelayFn||(t=>jm(()=>setTimeout(()=>t(),0)));const e=lI(s);return e.use(dI),e.install=mI(e),e}const Ap=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kp="__unhead_injection_handler__";function pI(s){Ap[kp]=s}function wI(){if(kp in Ap)return Ap[kp]();const s=za(k1);return s||uI()}function yI(s,e={}){const t=e.head||wI();if(t)return t.ssr?t.push(s,e):vI(t,s,e)}function vI(s,e,t={}){const n=Ke(!1),r=Ke({});aE(()=>{r.value=n.value?{}:pm(e)});const i=s.push(r.value,t);return Sn(r,o=>{i.patch(o)}),kf()&&(xS(()=>{i.dispose()}),_S(()=>{n.value=!0}),IS(()=>{n.value=!1})),i}function bI(s,e){return{ctx:{table:s},matchAll:t=>C1(t,s,e)}}function E1(s){const e={};for(const t in s)e[t]=t==="dynamic"?new Map(Object.entries(s[t]).map(([n,r])=>[n,E1(r)])):new Map(Object.entries(s[t]));return e}function SI(s){return bI(E1(s))}function C1(s,e,t){t!==!0&&s.endsWith("/")&&(s=s.slice(0,-1)||"/");const n=[];for(const[i,a]of vv(e.wildcard))(s===i||s.startsWith(i+"/"))&&n.push(a);for(const[i,a]of vv(e.dynamic))if(s.startsWith(i+"/")){const o="/"+s.slice(i.length).split("/").splice(2).join("/");n.push(...C1(o,a))}const r=e.static.get(s);return r&&n.push(r),n.filter(Boolean)}function vv(s){return[...s.entries()].sort((e,t)=>e[0].length-t[0].length)}function bg(s){if(s===null||typeof s!="object")return!1;const e=Object.getPrototypeOf(s);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in s?!1:Symbol.toStringTag in s?Object.prototype.toString.call(s)==="[object Module]":!0}function Ep(s,e,t=".",n){if(!bg(e))return Ep(s,{},t,n);const r=Object.assign({},e);for(const i in s){if(i==="__proto__"||i==="constructor")continue;const a=s[i];a!=null&&(n&&n(r,i,a,t)||(Array.isArray(a)&&Array.isArray(r[i])?r[i]=[...a,...r[i]]:bg(a)&&bg(r[i])?r[i]=Ep(a,r[i],(t?`${t}.`:"")+i.toString(),n):r[i]=a))}return r}function N1(s){return(...e)=>e.reduce((t,n)=>Ep(t,n,"",s),{})}const AI=N1(),kI=N1((s,e,t)=>{if(s[e]!==void 0&&typeof t=="function")return s[e]=t(s[e]),!0}),Kf=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function EI(s,e){if(typeof s!="string")throw new TypeError("argument str must be a string");const t={},r=(e||{}).decode||II;let i=0;for(;i<s.length;){const a=s.indexOf("=",i);if(a===-1)break;let o=s.indexOf(";",i);if(o===-1)o=s.length;else if(o<a){i=s.lastIndexOf(";",a-1)+1;continue}const l=s.slice(i,a).trim();if(t[l]===void 0){let c=s.slice(a+1,o).trim();c.codePointAt(0)===34&&(c=c.slice(1,-1)),t[l]=NI(c,r)}i=o+1}return t}function bv(s,e,t){const n=t||{},r=n.encode||_I;if(typeof r!="function")throw new TypeError("option encode is invalid");if(!Kf.test(s))throw new TypeError("argument name is invalid");const i=r(e);if(i&&!Kf.test(i))throw new TypeError("argument val is invalid");let a=s+"="+i;if(n.maxAge!==void 0&&n.maxAge!==null){const o=n.maxAge-0;if(Number.isNaN(o)||!Number.isFinite(o))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(o)}if(n.domain){if(!Kf.test(n.domain))throw new TypeError("option domain is invalid");a+="; Domain="+n.domain}if(n.path){if(!Kf.test(n.path))throw new TypeError("option path is invalid");a+="; Path="+n.path}if(n.expires){if(!CI(n.expires)||Number.isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");a+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(a+="; HttpOnly"),n.secure&&(a+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":{a+="; Priority=Low";break}case"medium":{a+="; Priority=Medium";break}case"high":{a+="; Priority=High";break}default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:{a+="; SameSite=Strict";break}case"lax":{a+="; SameSite=Lax";break}case"strict":{a+="; SameSite=Strict";break}case"none":{a+="; SameSite=None";break}default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(a+="; Partitioned"),a}function CI(s){return Object.prototype.toString.call(s)==="[object Date]"||s instanceof Date}function NI(s,e){try{return e(s)}catch{return s}}function II(s){return s.includes("%")?decodeURIComponent(s):s}function _I(s){return encodeURIComponent(s)}function BI(s,e){try{return e in s}catch{return!1}}var xI=Object.defineProperty,TI=(s,e,t)=>e in s?xI(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,$i=(s,e,t)=>(TI(s,typeof e!="symbol"?e+"":e,t),t);class Cp extends Error{constructor(e,t={}){super(e,t),$i(this,"statusCode",500),$i(this,"fatal",!1),$i(this,"unhandled",!1),$i(this,"statusMessage"),$i(this,"data"),$i(this,"cause"),t.cause&&!this.cause&&(this.cause=t.cause)}toJSON(){const e={message:this.message,statusCode:Np(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=I1(this.statusMessage)),this.data!==void 0&&(e.data=this.data),e}}$i(Cp,"__h3_error__",!0);function RI(s){if(typeof s=="string")return new Cp(s);if(OI(s))return s;const e=new Cp(s.message??s.statusMessage??"",{cause:s.cause||s});if(BI(s,"stack"))try{Object.defineProperty(e,"stack",{get(){return s.stack}})}catch{try{e.stack=s.stack}catch{}}if(s.data&&(e.data=s.data),s.statusCode?e.statusCode=Np(s.statusCode,e.statusCode):s.status&&(e.statusCode=Np(s.status,e.statusCode)),s.statusMessage?e.statusMessage=s.statusMessage:s.statusText&&(e.statusMessage=s.statusText),e.statusMessage){const t=e.statusMessage;I1(e.statusMessage)!==t&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return s.fatal!==void 0&&(e.fatal=s.fatal),s.unhandled!==void 0&&(e.unhandled=s.unhandled),e}function OI(s){var e;return((e=s==null?void 0:s.constructor)==null?void 0:e.__h3_error__)===!0}const VI=/[^\u0009\u0020-\u007E]/g;function I1(s=""){return s.replace(VI,"")}function Np(s,e=200){return!s||(typeof s=="string"&&(s=Number.parseInt(s,10)),s<100||s>999)?e:s}const _1=Symbol("route"),If=()=>{var s;return(s=et())==null?void 0:s.$router},Hw=()=>LS()?za(_1,et()._route):et()._route;/*! @__NO_SIDE_EFFECTS__ */const PI=(s,e,t={})=>{const n=et(),r=t.global||typeof s!="string",i=typeof s!="string"?s:e;if(!i){console.warn("[nuxt] No route middleware passed to `addRouteMiddleware`.",s);return}r?n._middleware.global.push(i):n._middleware.named[s]=i},LI=()=>{try{if(et()._processingMiddleware)return!0}catch{return!0}return!1},B1=(s,e)=>{s||(s="/");const t=typeof s=="string"?s:c1(s.path||"/",s.query||{})+(s.hash||"");if(e!=null&&e.open){{const{target:o="_blank",windowFeatures:l={}}=e.open,c=Object.entries(l).filter(([u,h])=>h!==void 0).map(([u,h])=>`${u.toLowerCase()}=${h}`).join(", ");open(t,o,c)}return Promise.resolve()}const n=(e==null?void 0:e.external)||mo(t,{acceptRelative:!0});if(n){if(!(e!=null&&e.external))throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const o=Nf(t).protocol;if(o&&KC(o))throw new Error(`Cannot navigate to a URL with '${o}' protocol.`)}const r=LI();if(!n&&r)return s;const i=If(),a=et();return n?(a._scope.stop(),e!=null&&e.replace?location.replace(t):location.href=t,r?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e!=null&&e.replace?i.replace(s):i.push(s)},$w=()=>yS(et().payload,"error"),DI=s=>{const e=x1(s);try{const t=et(),n=$w();t.hooks.callHook("app:error",e),n.value=n.value||e}catch{throw e}return e},UI=async(s={})=>{const e=et(),t=$w();e.callHook("app:error:cleared",s),s.redirect&&await If().replace(s.redirect),t.value=null},MI=s=>!!(s&&typeof s=="object"&&"__nuxt_error"in s),x1=s=>{const e=RI(s);return e.__nuxt_error=!0,e},Sv=globalThis.requestIdleCallback||(s=>{const e=Date.now(),t={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{s(t)},1)}),M2=globalThis.cancelIdleCallback||(s=>{clearTimeout(s)}),T1=s=>{const e=et();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{Sv(s)}):Sv(s)},H2={componentName:"NuxtLink"},HI="#__nuxt",$I="$s";function R1(...s){const e=typeof s[s.length-1]=="string"?s.pop():void 0;typeof s[0]!="string"&&s.unshift(e);const[t,n]=s;if(!t||typeof t!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+t);if(n!==void 0&&typeof n!="function")throw new Error("[nuxt] [useState] init must be a function: "+n);const r=$I+t,i=et(),a=yS(i.payload.state,r);if(a.value===void 0&&n){const o=n();if(we(o))return i.payload.state[r]=o,o;a.value=o}return a}const FI={path:"/",watch:!0,decode:s=>lf(decodeURIComponent(s)),encode:s=>encodeURIComponent(typeof s=="string"?s:JSON.stringify(s))};function KI(s,e){var i;const t={...FI,...e},n=jI(t)||{},r=Ke(n[s]??((i=t.default)==null?void 0:i.call(t)));{const a=typeof BroadcastChannel>"u"?null:new BroadcastChannel(`nuxt:cookies:${s}`),o=()=>{WI(s,r.value,t),a==null||a.postMessage(t.encode(r.value))};let l=!1;Zb()&&f0(()=>{l=!0,o(),a==null||a.close()}),a&&(a.onmessage=c=>{l=!0,r.value=t.decode(c.data),jm(()=>{l=!1})}),t.watch?Sn(r,()=>{l||o()},{deep:t.watch!=="shallow"}):o()}return r}function jI(s={}){return EI(document.cookie,s)}function JI(s,e,t={}){return e==null?bv(s,e,{...t,maxAge:-1}):bv(s,e,t)}function WI(s,e,t={}){document.cookie=JI(s,e,t)}function qI(s={}){const e=s.path||window.location.pathname;let t={};try{t=lf(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(s.force||(t==null?void 0:t.path)!==e||(t==null?void 0:t.expires)<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(s.ttl??1e4)}))}catch{}if(s.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:et().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const GI={nuxt:{buildId:"2c571d90-cd48-469d-9cbd-373d4a43b815"}},YI=kI(GI);function XI(){const s=et();return s._appConfig||(s._appConfig=ir(YI)),s._appConfig}let Nd,O1;function QI(){var t;const s=Xt(),e=(t=XI().nuxt)==null?void 0:t.buildId;return Nd=$fetch(an(s.app.cdnURL||s.app.baseURL,s.app.buildAssetsDir,`builds/meta/${e}.json`)),Nd.then(n=>{O1=SI(n.matcher)}),Nd}function Xm(){return Nd||QI()}async function V1(s){return await Xm(),AI({},...O1.matchAll(s).reverse())}function Av(s,e={}){const t=zI(s,e),n=et(),r=n._payloadCache=n._payloadCache||{};return t in r||(r[t]=ZI().then(i=>i?P1(t).then(a=>a||(delete r[t],null)):(r[t]=null,null))),r[t]}const kv="json";function zI(s,e={}){const t=new URL(s,"http://localhost");if(t.search)throw new Error("Payload URL cannot contain search params: "+s);if(t.host!=="localhost"||mo(t.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+s);const n=e.hash||(e.fresh?Date.now():"");return an(Xt().app.baseURL,t.pathname,n?`_payload.${n}.${kv}`:`_payload.${kv}`)}async function P1(s){const e=fetch(s).then(t=>t.text().then(L1));try{return await e}catch(t){console.warn("[nuxt] Cannot load payload ",s,t)}return null}async function ZI(s=Hw().path){if(et().payload.prerenderedAt||(await Xm()).prerendered.includes(s))return!0;const n=await V1(s);return!!n.prerender&&!n.redirect}let jf=null;async function e_(){if(jf)return jf;const s=document.getElementById("__NUXT_DATA__");if(!s)return{};const e=L1(s.textContent||""),t=s.dataset.src?await P1(s.dataset.src):void 0;return jf={...e,...t,...window.__NUXT__},jf}function L1(s){return LN(s,et()._payloadRevivers)}function t_(s,e){et()._payloadRevivers[s]=e}const Ev={NuxtError:s=>x1(s),EmptyShallowRef:s=>ip(s==="_"?void 0:s==="0n"?BigInt(0):lf(s)),EmptyRef:s=>Ke(s==="_"?void 0:s==="0n"?BigInt(0):lf(s)),ShallowRef:s=>ip(s),ShallowReactive:s=>hS(s),Ref:s=>Ke(s),Reactive:s=>ir(s)},s_=_i({name:"nuxt:revive-payload:client",order:-30,async setup(s){let e,t;for(const n in Ev)t_(n,Ev[n]);Object.assign(s.payload,([e,t]=Ka(()=>s.runWithContext(e_)),e=await e,t(),e)),window.__NUXT__=s.payload}}),n_=[],r_=_i({name:"nuxt:head",enforce:"pre",setup(s){const e=gI({plugins:n_});pI(()=>et().vueApp._context.provides.usehead),s.vueApp.use(e);{let t=!0;const n=async()=>{t=!1,await S1(e)};e.hooks.hook("dom:beforeRender",r=>{r.shouldRender=!t}),s.hooks.hook("page:start",()=>{t=!0}),s.hooks.hook("page:finish",()=>{s.isHydrating||n()}),s.hooks.hook("app:error",n),s.hooks.hook("app:suspense:resolve",n)}}}),i_=async s=>{let e,t;const n=([e,t]=Ka(()=>V1(s.path)),e=await e,t(),e);if(n.redirect)return n.redirect},a_=[i_];function Sg(s){typeof s=="object"&&(s=f1({pathname:s.path||"",search:l1(s.query||{}),hash:s.hash||""}));const e=Nf(s.toString());return{path:e.pathname,fullPath:s,query:Lw(e.search),hash:e.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:s}}const o_=_i({name:"nuxt:router",enforce:"pre",setup(s){const e=WC(window.location.pathname,Xt().app.baseURL)+window.location.search+window.location.hash,t=[],n={"navigate:before":[],"resolve:before":[],"navigate:after":[],error:[]},r=(u,h)=>(n[u].push(h),()=>n[u].splice(n[u].indexOf(h),1)),i=Xt().app.baseURL,a=ir(Sg(e));async function o(u,h){try{const f=Sg(u);for(const m of n["navigate:before"]){const S=await m(f,a);if(S===!1||S instanceof Error)return;if(typeof S=="string"&&S.length)return o(S,!0)}for(const m of n["resolve:before"])await m(f,a);Object.assign(a,f),window.history[h?"replaceState":"pushState"]({},"",an(i,f.fullPath)),s.isHydrating||await s.runWithContext(UI);for(const m of n["navigate:after"])await m(f,a)}catch(f){for(const m of n.error)await m(f)}}const l={currentRoute:a,isReady:()=>Promise.resolve(),options:{},install:()=>Promise.resolve(),push:u=>o(u,!1),replace:u=>o(u,!0),back:()=>window.history.go(-1),go:u=>window.history.go(u),forward:()=>window.history.go(1),beforeResolve:u=>r("resolve:before",u),beforeEach:u=>r("navigate:before",u),afterEach:u=>r("navigate:after",u),onError:u=>r("error",u),resolve:Sg,addRoute:(u,h)=>{t.push(h)},getRoutes:()=>t,hasRoute:u=>t.some(h=>h.name===u),removeRoute:u=>{const h=t.findIndex(f=>f.name===u);h!==-1&&t.splice(h,1)}};s.vueApp.component("RouterLink",{functional:!0,props:{to:String,custom:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:String},setup:(u,{slots:h})=>{const f=()=>o(u.to,u.replace);return()=>{var S;const m=l.resolve(u.to);return u.custom?(S=h.default)==null?void 0:S.call(h,{href:u.to,navigate:f,route:m}):Vw("a",{href:u.to,onClick:A=>(A.preventDefault(),f())},h)}}}),window.addEventListener("popstate",u=>{const h=u.target.location;l.replace(h.href.replace(h.origin,""))}),s._route=a,s._middleware=s._middleware||{global:[],named:{}};const c=s.payload.state._layout;return s.hooks.hookOnce("app:created",async()=>{l.beforeEach(async(u,h)=>{u.meta=ir(u.meta||{}),s.isHydrating&&c&&!pc(u.meta.layout)&&(u.meta.layout=c),s._processingMiddleware=!0;{const f=new Set([...a_,...s._middleware.global]);for(const m of f){const S=await s.runWithContext(()=>m(u,h));if(S!==!0&&(S||S===!1))return S}}}),l.afterEach(()=>{delete s._processingMiddleware}),await l.replace(e),wp(a.fullPath,e)||await s.runWithContext(()=>B1(a.fullPath))}),{provide:{route:a,router:l}}}}),l_=_i({name:"nuxt:payload",setup(s){If().beforeResolve(async(e,t)=>{if(e.path===t.path)return;const n=await Av(e.path);n&&Object.assign(s.static.data,n.data)}),T1(()=>{var e;s.hooks.hook("link:prefetch",async t=>{Nf(t).protocol||await Av(t)}),((e=navigator.connection)==null?void 0:e.effectiveType)!=="slow-2g"&&setTimeout(Xm,1e3)})}}),c_=_i({name:"nuxt:global-components"});/*!
  * shared v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const wm=typeof window<"u",Bi=(s,e=!1)=>e?Symbol.for(s):Symbol(s),u_=(s,e,t)=>h_({l:s,k:e,s:t}),h_=s=>JSON.stringify(s).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Mt=s=>typeof s=="number"&&isFinite(s),f_=s=>U1(s)==="[object Date]",ym=s=>U1(s)==="[object RegExp]",Qm=s=>Fe(s)&&Object.keys(s).length===0,It=Object.assign;let Cv;const Fw=()=>Cv||(Cv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Nv(s){return s.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const d_=Object.prototype.hasOwnProperty;function vm(s,e){return d_.call(s,e)}const Nt=Array.isArray,Ze=s=>typeof s=="function",ue=s=>typeof s=="string",gt=s=>typeof s=="boolean",m_=s=>typeof s=="symbol",$e=s=>s!==null&&typeof s=="object",g_=s=>$e(s)&&Ze(s.then)&&Ze(s.catch),D1=Object.prototype.toString,U1=s=>D1.call(s),Fe=s=>{if(!$e(s))return!1;const e=Object.getPrototypeOf(s);return e===null||e.constructor===Object},p_=s=>s==null?"":Nt(s)||Fe(s)&&s.toString===D1?JSON.stringify(s,null,2):String(s);function Kw(s,e=""){return s.reduce((t,n,r)=>r===0?t+n:t+e+n,"")}function zm(s){let e=s;return()=>++e}function w_(s,e){typeof console<"u"&&(console.warn("[intlify] "+s),e&&console.warn(e.stack))}const Jf=s=>!$e(s)||Nt(s);function Za(s,e){if(Jf(s)||Jf(e))throw new Error("Invalid value");const t=[{src:s,des:e}];for(;t.length;){const{src:n,des:r}=t.pop();Object.keys(n).forEach(i=>{Jf(n[i])||Jf(r[i])?r[i]=n[i]:t.push({src:n[i],des:r[i]})})}}/*!
  * message-compiler v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function y_(s,e,t){return{line:s,column:e,offset:t}}function bm(s,e,t){const n={start:s,end:e};return t!=null&&(n.source=t),n}const M1={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2};function v_(s,e,...t){const r={message:String(s),code:s};return e&&(r.location=e),r}const Ge={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17};function Zm(s,e,t={}){const{domain:n,messages:r,args:i}=t,a=s,o=new SyntaxError(String(a));return o.code=s,e&&(o.location=e),o.domain=n,o}function b_(s){throw s}const Nn=" ",S_="\r",Zt=`
`,A_=String.fromCharCode(8232),k_=String.fromCharCode(8233);function E_(s){const e=s;let t=0,n=1,r=1,i=0;const a=L=>e[L]===S_&&e[L+1]===Zt,o=L=>e[L]===Zt,l=L=>e[L]===k_,c=L=>e[L]===A_,u=L=>a(L)||o(L)||l(L)||c(L),h=()=>t,f=()=>n,m=()=>r,S=()=>i,A=L=>a(L)||l(L)||c(L)?Zt:e[L],E=()=>A(t),T=()=>A(t+i);function x(){return i=0,u(t)&&(n++,r=0),a(t)&&t++,t++,r++,e[t]}function y(){return a(t+i)&&i++,i++,e[t+i]}function p(){t=0,n=1,r=1,i=0}function k(L=0){i=L}function C(){const L=t+i;for(;L!==t;)x();i=0}return{index:h,line:f,column:m,peekOffset:S,charAt:A,currentChar:E,currentPeek:T,next:x,peek:y,reset:p,resetPeek:k,skipToPeek:C}}const mr=void 0,C_=".",Iv="'",N_="tokenizer";function I_(s,e={}){const t=e.location!==!1,n=E_(s),r=()=>n.index(),i=()=>y_(n.line(),n.column(),n.index()),a=i(),o=r(),l={currentType:14,offset:o,startLoc:a,endLoc:a,lastType:14,lastOffset:o,lastStartLoc:a,lastEndLoc:a,braceNest:0,inLinked:!1,text:""},c=()=>l,{onError:u}=e;function h(b,v,_,...B){const re=c();if(v.column+=_,v.offset+=_,u){const z=t?bm(re.startLoc,v):null,D=Zm(b,z,{domain:N_,args:B});u(D)}}function f(b,v,_){b.endLoc=i(),b.currentType=v;const B={type:v};return t&&(B.loc=bm(b.startLoc,b.endLoc)),_!=null&&(B.value=_),B}const m=b=>f(b,14);function S(b,v){return b.currentChar()===v?(b.next(),v):(h(Ge.EXPECTED_TOKEN,i(),0,v),"")}function A(b){let v="";for(;b.currentPeek()===Nn||b.currentPeek()===Zt;)v+=b.currentPeek(),b.peek();return v}function E(b){const v=A(b);return b.skipToPeek(),v}function T(b){if(b===mr)return!1;const v=b.charCodeAt(0);return v>=97&&v<=122||v>=65&&v<=90||v===95}function x(b){if(b===mr)return!1;const v=b.charCodeAt(0);return v>=48&&v<=57}function y(b,v){const{currentType:_}=v;if(_!==2)return!1;A(b);const B=T(b.currentPeek());return b.resetPeek(),B}function p(b,v){const{currentType:_}=v;if(_!==2)return!1;A(b);const B=b.currentPeek()==="-"?b.peek():b.currentPeek(),re=x(B);return b.resetPeek(),re}function k(b,v){const{currentType:_}=v;if(_!==2)return!1;A(b);const B=b.currentPeek()===Iv;return b.resetPeek(),B}function C(b,v){const{currentType:_}=v;if(_!==8)return!1;A(b);const B=b.currentPeek()===".";return b.resetPeek(),B}function L(b,v){const{currentType:_}=v;if(_!==9)return!1;A(b);const B=T(b.currentPeek());return b.resetPeek(),B}function M(b,v){const{currentType:_}=v;if(!(_===8||_===12))return!1;A(b);const B=b.currentPeek()===":";return b.resetPeek(),B}function F(b,v){const{currentType:_}=v;if(_!==10)return!1;const B=()=>{const z=b.currentPeek();return z==="{"?T(b.peek()):z==="@"||z==="%"||z==="|"||z===":"||z==="."||z===Nn||!z?!1:z===Zt?(b.peek(),B()):te(b,!1)},re=B();return b.resetPeek(),re}function ne(b){A(b);const v=b.currentPeek()==="|";return b.resetPeek(),v}function ce(b){const v=A(b),_=b.currentPeek()==="%"&&b.peek()==="{";return b.resetPeek(),{isModulo:_,hasSpace:v.length>0}}function te(b,v=!0){const _=(re=!1,z="",D=!1)=>{const J=b.currentPeek();return J==="{"?z==="%"?!1:re:J==="@"||!J?z==="%"?!0:re:J==="%"?(b.peek(),_(re,"%",!0)):J==="|"?z==="%"||D?!0:!(z===Nn||z===Zt):J===Nn?(b.peek(),_(!0,Nn,D)):J===Zt?(b.peek(),_(!0,Zt,D)):!0},B=_();return v&&b.resetPeek(),B}function fe(b,v){const _=b.currentChar();return _===mr?mr:v(_)?(b.next(),_):null}function Ce(b){const v=b.charCodeAt(0);return v>=97&&v<=122||v>=65&&v<=90||v>=48&&v<=57||v===95||v===36}function ye(b){return fe(b,Ce)}function ie(b){const v=b.charCodeAt(0);return v>=97&&v<=122||v>=65&&v<=90||v>=48&&v<=57||v===95||v===36||v===45}function se(b){return fe(b,ie)}function ae(b){const v=b.charCodeAt(0);return v>=48&&v<=57}function Re(b){return fe(b,ae)}function oe(b){const v=b.charCodeAt(0);return v>=48&&v<=57||v>=65&&v<=70||v>=97&&v<=102}function de(b){return fe(b,oe)}function Y(b){let v="",_="";for(;v=Re(b);)_+=v;return _}function be(b){E(b);const v=b.currentChar();return v!=="%"&&h(Ge.EXPECTED_TOKEN,i(),0,v),b.next(),"%"}function Be(b){let v="";for(;;){const _=b.currentChar();if(_==="{"||_==="}"||_==="@"||_==="|"||!_)break;if(_==="%")if(te(b))v+=_,b.next();else break;else if(_===Nn||_===Zt)if(te(b))v+=_,b.next();else{if(ne(b))break;v+=_,b.next()}else v+=_,b.next()}return v}function qe(b){E(b);let v="",_="";for(;v=se(b);)_+=v;return b.currentChar()===mr&&h(Ge.UNTERMINATED_CLOSING_BRACE,i(),0),_}function it(b){E(b);let v="";return b.currentChar()==="-"?(b.next(),v+=`-${Y(b)}`):v+=Y(b),b.currentChar()===mr&&h(Ge.UNTERMINATED_CLOSING_BRACE,i(),0),v}function De(b){return b!==Iv&&b!==Zt}function Ve(b){E(b),S(b,"'");let v="",_="";for(;v=fe(b,De);)v==="\\"?_+=ge(b):_+=v;const B=b.currentChar();return B===Zt||B===mr?(h(Ge.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),B===Zt&&(b.next(),S(b,"'")),_):(S(b,"'"),_)}function ge(b){const v=b.currentChar();switch(v){case"\\":case"'":return b.next(),`\\${v}`;case"u":return ze(b,v,4);case"U":return ze(b,v,6);default:return h(Ge.UNKNOWN_ESCAPE_SEQUENCE,i(),0,v),""}}function ze(b,v,_){S(b,v);let B="";for(let re=0;re<_;re++){const z=de(b);if(!z){h(Ge.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,`\\${v}${B}${b.currentChar()}`);break}B+=z}return`\\${v}${B}`}function K(b){return b!=="{"&&b!=="}"&&b!==Nn&&b!==Zt}function P(b){E(b);let v="",_="";for(;v=fe(b,K);)_+=v;return _}function w(b){let v="",_="";for(;v=ye(b);)_+=v;return _}function I(b){const v=_=>{const B=b.currentChar();return B==="{"||B==="%"||B==="@"||B==="|"||B==="("||B===")"||!B||B===Nn?_:(_+=B,b.next(),v(_))};return v("")}function R(b){E(b);const v=S(b,"|");return E(b),v}function O(b,v){let _=null;switch(b.currentChar()){case"{":return v.braceNest>=1&&h(Ge.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),b.next(),_=f(v,2,"{"),E(b),v.braceNest++,_;case"}":return v.braceNest>0&&v.currentType===2&&h(Ge.EMPTY_PLACEHOLDER,i(),0),b.next(),_=f(v,3,"}"),v.braceNest--,v.braceNest>0&&E(b),v.inLinked&&v.braceNest===0&&(v.inLinked=!1),_;case"@":return v.braceNest>0&&h(Ge.UNTERMINATED_CLOSING_BRACE,i(),0),_=$(b,v)||m(v),v.braceNest=0,_;default:{let re=!0,z=!0,D=!0;if(ne(b))return v.braceNest>0&&h(Ge.UNTERMINATED_CLOSING_BRACE,i(),0),_=f(v,1,R(b)),v.braceNest=0,v.inLinked=!1,_;if(v.braceNest>0&&(v.currentType===5||v.currentType===6||v.currentType===7))return h(Ge.UNTERMINATED_CLOSING_BRACE,i(),0),v.braceNest=0,j(b,v);if(re=y(b,v))return _=f(v,5,qe(b)),E(b),_;if(z=p(b,v))return _=f(v,6,it(b)),E(b),_;if(D=k(b,v))return _=f(v,7,Ve(b)),E(b),_;if(!re&&!z&&!D)return _=f(v,13,P(b)),h(Ge.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,_.value),E(b),_;break}}return _}function $(b,v){const{currentType:_}=v;let B=null;const re=b.currentChar();switch((_===8||_===9||_===12||_===10)&&(re===Zt||re===Nn)&&h(Ge.INVALID_LINKED_FORMAT,i(),0),re){case"@":return b.next(),B=f(v,8,"@"),v.inLinked=!0,B;case".":return E(b),b.next(),f(v,9,".");case":":return E(b),b.next(),f(v,10,":");default:return ne(b)?(B=f(v,1,R(b)),v.braceNest=0,v.inLinked=!1,B):C(b,v)||M(b,v)?(E(b),$(b,v)):L(b,v)?(E(b),f(v,12,w(b))):F(b,v)?(E(b),re==="{"?O(b,v)||B:f(v,11,I(b))):(_===8&&h(Ge.INVALID_LINKED_FORMAT,i(),0),v.braceNest=0,v.inLinked=!1,j(b,v))}}function j(b,v){let _={type:14};if(v.braceNest>0)return O(b,v)||m(v);if(v.inLinked)return $(b,v)||m(v);switch(b.currentChar()){case"{":return O(b,v)||m(v);case"}":return h(Ge.UNBALANCED_CLOSING_BRACE,i(),0),b.next(),f(v,3,"}");case"@":return $(b,v)||m(v);default:{if(ne(b))return _=f(v,1,R(b)),v.braceNest=0,v.inLinked=!1,_;const{isModulo:re,hasSpace:z}=ce(b);if(re)return z?f(v,0,Be(b)):f(v,4,be(b));if(te(b))return f(v,0,Be(b));break}}return _}function Z(){const{currentType:b,offset:v,startLoc:_,endLoc:B}=l;return l.lastType=b,l.lastOffset=v,l.lastStartLoc=_,l.lastEndLoc=B,l.offset=r(),l.startLoc=i(),n.currentChar()===mr?f(l,14):j(n,l)}return{nextToken:Z,currentOffset:r,currentPosition:i,context:c}}const __="parser",B_=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function x_(s,e,t){switch(s){case"\\\\":return"\\";case"\\'":return"'";default:{const n=parseInt(e||t,16);return n<=55295||n>=57344?String.fromCodePoint(n):"�"}}}function T_(s={}){const e=s.location!==!1,{onError:t,onWarn:n}=s;function r(y,p,k,C,...L){const M=y.currentPosition();if(M.offset+=C,M.column+=C,t){const F=e?bm(k,M):null,ne=Zm(p,F,{domain:__,args:L});t(ne)}}function i(y,p,k,C,...L){const M=y.currentPosition();if(M.offset+=C,M.column+=C,n){const F=e?bm(k,M):null;n(v_(p,F,L))}}function a(y,p,k){const C={type:y};return e&&(C.start=p,C.end=p,C.loc={start:k,end:k}),C}function o(y,p,k,C){C&&(y.type=C),e&&(y.end=p,y.loc&&(y.loc.end=k))}function l(y,p){const k=y.context(),C=a(3,k.offset,k.startLoc);return C.value=p,o(C,y.currentOffset(),y.currentPosition()),C}function c(y,p){const k=y.context(),{lastOffset:C,lastStartLoc:L}=k,M=a(5,C,L);return M.index=parseInt(p,10),y.nextToken(),o(M,y.currentOffset(),y.currentPosition()),M}function u(y,p,k){const C=y.context(),{lastOffset:L,lastStartLoc:M}=C,F=a(4,L,M);return F.key=p,k===!0&&(F.modulo=!0),y.nextToken(),o(F,y.currentOffset(),y.currentPosition()),F}function h(y,p){const k=y.context(),{lastOffset:C,lastStartLoc:L}=k,M=a(9,C,L);return M.value=p.replace(B_,x_),y.nextToken(),o(M,y.currentOffset(),y.currentPosition()),M}function f(y){const p=y.nextToken(),k=y.context(),{lastOffset:C,lastStartLoc:L}=k,M=a(8,C,L);return p.type!==12?(r(y,Ge.UNEXPECTED_EMPTY_LINKED_MODIFIER,k.lastStartLoc,0),M.value="",o(M,C,L),{nextConsumeToken:p,node:M}):(p.value==null&&r(y,Ge.UNEXPECTED_LEXICAL_ANALYSIS,k.lastStartLoc,0,Js(p)),M.value=p.value||"",o(M,y.currentOffset(),y.currentPosition()),{node:M})}function m(y,p){const k=y.context(),C=a(7,k.offset,k.startLoc);return C.value=p,o(C,y.currentOffset(),y.currentPosition()),C}function S(y){const p=y.context(),k=a(6,p.offset,p.startLoc);let C=y.nextToken();if(C.type===9){const L=f(y);k.modifier=L.node,C=L.nextConsumeToken||y.nextToken()}switch(C.type!==10&&r(y,Ge.UNEXPECTED_LEXICAL_ANALYSIS,p.lastStartLoc,0,Js(C)),C=y.nextToken(),C.type===2&&(C=y.nextToken()),C.type){case 11:C.value==null&&r(y,Ge.UNEXPECTED_LEXICAL_ANALYSIS,p.lastStartLoc,0,Js(C)),k.key=m(y,C.value||"");break;case 5:C.value==null&&r(y,Ge.UNEXPECTED_LEXICAL_ANALYSIS,p.lastStartLoc,0,Js(C)),k.key=u(y,C.value||"");break;case 6:C.value==null&&r(y,Ge.UNEXPECTED_LEXICAL_ANALYSIS,p.lastStartLoc,0,Js(C)),k.key=c(y,C.value||"");break;case 7:C.value==null&&r(y,Ge.UNEXPECTED_LEXICAL_ANALYSIS,p.lastStartLoc,0,Js(C)),k.key=h(y,C.value||"");break;default:{r(y,Ge.UNEXPECTED_EMPTY_LINKED_KEY,p.lastStartLoc,0);const L=y.context(),M=a(7,L.offset,L.startLoc);return M.value="",o(M,L.offset,L.startLoc),k.key=M,o(k,L.offset,L.startLoc),{nextConsumeToken:C,node:k}}}return o(k,y.currentOffset(),y.currentPosition()),{node:k}}function A(y){const p=y.context(),k=p.currentType===1?y.currentOffset():p.offset,C=p.currentType===1?p.endLoc:p.startLoc,L=a(2,k,C);L.items=[];let M=null,F=null;do{const te=M||y.nextToken();switch(M=null,te.type){case 0:te.value==null&&r(y,Ge.UNEXPECTED_LEXICAL_ANALYSIS,p.lastStartLoc,0,Js(te)),L.items.push(l(y,te.value||""));break;case 6:te.value==null&&r(y,Ge.UNEXPECTED_LEXICAL_ANALYSIS,p.lastStartLoc,0,Js(te)),L.items.push(c(y,te.value||""));break;case 4:F=!0;break;case 5:te.value==null&&r(y,Ge.UNEXPECTED_LEXICAL_ANALYSIS,p.lastStartLoc,0,Js(te)),L.items.push(u(y,te.value||"",!!F)),F&&(i(y,M1.USE_MODULO_SYNTAX,p.lastStartLoc,0,Js(te)),F=null);break;case 7:te.value==null&&r(y,Ge.UNEXPECTED_LEXICAL_ANALYSIS,p.lastStartLoc,0,Js(te)),L.items.push(h(y,te.value||""));break;case 8:{const fe=S(y);L.items.push(fe.node),M=fe.nextConsumeToken||null;break}}}while(p.currentType!==14&&p.currentType!==1);const ne=p.currentType===1?p.lastOffset:y.currentOffset(),ce=p.currentType===1?p.lastEndLoc:y.currentPosition();return o(L,ne,ce),L}function E(y,p,k,C){const L=y.context();let M=C.items.length===0;const F=a(1,p,k);F.cases=[],F.cases.push(C);do{const ne=A(y);M||(M=ne.items.length===0),F.cases.push(ne)}while(L.currentType!==14);return M&&r(y,Ge.MUST_HAVE_MESSAGES_IN_PLURAL,k,0),o(F,y.currentOffset(),y.currentPosition()),F}function T(y){const p=y.context(),{offset:k,startLoc:C}=p,L=A(y);return p.currentType===14?L:E(y,k,C,L)}function x(y){const p=I_(y,It({},s)),k=p.context(),C=a(0,k.offset,k.startLoc);return e&&C.loc&&(C.loc.source=y),C.body=T(p),s.onCacheKey&&(C.cacheKey=s.onCacheKey(y)),k.currentType!==14&&r(p,Ge.UNEXPECTED_LEXICAL_ANALYSIS,k.lastStartLoc,0,y[k.offset]||""),o(C,p.currentOffset(),p.currentPosition()),C}return{parse:x}}function Js(s){if(s.type===14)return"EOF";const e=(s.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"…":e}function R_(s,e={}){const t={ast:s,helpers:new Set};return{context:()=>t,helper:i=>(t.helpers.add(i),i)}}function _v(s,e){for(let t=0;t<s.length;t++)jw(s[t],e)}function jw(s,e){switch(s.type){case 1:_v(s.cases,e),e.helper("plural");break;case 2:_v(s.items,e);break;case 6:{jw(s.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function O_(s,e={}){const t=R_(s);t.helper("normalize"),s.body&&jw(s.body,t);const n=t.context();s.helpers=Array.from(n.helpers)}function V_(s){const e=s.body;return e.type===2?Bv(e):e.cases.forEach(t=>Bv(t)),s}function Bv(s){if(s.items.length===1){const e=s.items[0];(e.type===3||e.type===9)&&(s.static=e.value,delete e.value)}else{const e=[];for(let t=0;t<s.items.length;t++){const n=s.items[t];if(!(n.type===3||n.type===9)||n.value==null)break;e.push(n.value)}if(e.length===s.items.length){s.static=Kw(e);for(let t=0;t<s.items.length;t++){const n=s.items[t];(n.type===3||n.type===9)&&delete n.value}}}}function Ro(s){switch(s.t=s.type,s.type){case 0:{const e=s;Ro(e.body),e.b=e.body,delete e.body;break}case 1:{const e=s,t=e.cases;for(let n=0;n<t.length;n++)Ro(t[n]);e.c=t,delete e.cases;break}case 2:{const e=s,t=e.items;for(let n=0;n<t.length;n++)Ro(t[n]);e.i=t,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=s;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=s;Ro(e.key),e.k=e.key,delete e.key,e.modifier&&(Ro(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=s;e.i=e.index,delete e.index;break}case 4:{const e=s;e.k=e.key,delete e.key;break}}delete s.type}function P_(s,e){const{sourceMap:t,filename:n,breakLineCode:r,needIndent:i}=e,a=e.location!==!1,o={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:r,needIndent:i,indentLevel:0};a&&s.loc&&(o.source=s.loc.source);const l=()=>o;function c(E,T){o.code+=E}function u(E,T=!0){const x=T?r:"";c(i?x+"  ".repeat(E):x)}function h(E=!0){const T=++o.indentLevel;E&&u(T)}function f(E=!0){const T=--o.indentLevel;E&&u(T)}function m(){u(o.indentLevel)}return{context:l,push:c,indent:h,deindent:f,newline:m,helper:E=>`_${E}`,needIndent:()=>o.needIndent}}function L_(s,e){const{helper:t}=s;s.push(`${t("linked")}(`),bc(s,e.key),e.modifier?(s.push(", "),bc(s,e.modifier),s.push(", _type")):s.push(", undefined, _type"),s.push(")")}function D_(s,e){const{helper:t,needIndent:n}=s;s.push(`${t("normalize")}([`),s.indent(n());const r=e.items.length;for(let i=0;i<r&&(bc(s,e.items[i]),i!==r-1);i++)s.push(", ");s.deindent(n()),s.push("])")}function U_(s,e){const{helper:t,needIndent:n}=s;if(e.cases.length>1){s.push(`${t("plural")}([`),s.indent(n());const r=e.cases.length;for(let i=0;i<r&&(bc(s,e.cases[i]),i!==r-1);i++)s.push(", ");s.deindent(n()),s.push("])")}}function M_(s,e){e.body?bc(s,e.body):s.push("null")}function bc(s,e){const{helper:t}=s;switch(e.type){case 0:M_(s,e);break;case 1:U_(s,e);break;case 2:D_(s,e);break;case 6:L_(s,e);break;case 8:s.push(JSON.stringify(e.value),e);break;case 7:s.push(JSON.stringify(e.value),e);break;case 5:s.push(`${t("interpolate")}(${t("list")}(${e.index}))`,e);break;case 4:s.push(`${t("interpolate")}(${t("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:s.push(JSON.stringify(e.value),e);break;case 3:s.push(JSON.stringify(e.value),e);break}}const H_=(s,e={})=>{const t=ue(e.mode)?e.mode:"normal",n=ue(e.filename)?e.filename:"message.intl",r=!!e.sourceMap,i=e.breakLineCode!=null?e.breakLineCode:t==="arrow"?";":`
`,a=e.needIndent?e.needIndent:t!=="arrow",o=s.helpers||[],l=P_(s,{mode:t,filename:n,sourceMap:r,breakLineCode:i,needIndent:a});l.push(t==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(a),o.length>0&&(l.push(`const { ${Kw(o.map(h=>`${h}: _${h}`),", ")} } = ctx`),l.newline()),l.push("return "),bc(l,s),l.deindent(a),l.push("}"),delete s.helpers;const{code:c,map:u}=l.context();return{ast:s,code:c,map:u?u.toJSON():void 0}};function $_(s,e={}){const t=It({},e),n=!!t.jit,r=!!t.minify,i=t.optimize==null?!0:t.optimize,o=T_(t).parse(s);return n?(i&&V_(o),r&&Ro(o),{ast:o,code:""}):(O_(o,t),H_(o,t))}/*!
  * core-base v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function F_(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Fw().__INTLIFY_PROD_DEVTOOLS__=!1)}const xi=[];xi[0]={w:[0],i:[3,0],"[":[4],o:[7]};xi[1]={w:[1],".":[2],"[":[4],o:[7]};xi[2]={w:[2],i:[3,0],0:[3,0]};xi[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};xi[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};xi[5]={"'":[4,0],o:8,l:[5,0]};xi[6]={'"':[4,0],o:8,l:[6,0]};const K_=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function j_(s){return K_.test(s)}function J_(s){const e=s.charCodeAt(0),t=s.charCodeAt(s.length-1);return e===t&&(e===34||e===39)?s.slice(1,-1):s}function W_(s){if(s==null)return"o";switch(s.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return s;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function q_(s){const e=s.trim();return s.charAt(0)==="0"&&isNaN(parseInt(s))?!1:j_(e)?J_(e):"*"+e}function G_(s){const e=[];let t=-1,n=0,r=0,i,a,o,l,c,u,h;const f=[];f[0]=()=>{a===void 0?a=o:a+=o},f[1]=()=>{a!==void 0&&(e.push(a),a=void 0)},f[2]=()=>{f[0](),r++},f[3]=()=>{if(r>0)r--,n=4,f[0]();else{if(r=0,a===void 0||(a=q_(a),a===!1))return!1;f[1]()}};function m(){const S=s[t+1];if(n===5&&S==="'"||n===6&&S==='"')return t++,o="\\"+S,f[0](),!0}for(;n!==null;)if(t++,i=s[t],!(i==="\\"&&m())){if(l=W_(i),h=xi[n],c=h[l]||h.l||8,c===8||(n=c[0],c[1]!==void 0&&(u=f[c[1]],u&&(o=i,u()===!1))))return;if(n===7)return e}}const xv=new Map;function Y_(s,e){return $e(s)?s[e]:null}function X_(s,e){if(!$e(s))return null;let t=xv.get(e);if(t||(t=G_(e),t&&xv.set(e,t)),!t)return null;const n=t.length;let r=s,i=0;for(;i<n;){const a=r[t[i]];if(a===void 0||Ze(r))return null;r=a,i++}return r}const Q_=s=>s,z_=s=>"",Z_="text",eB=s=>s.length===0?"":Kw(s),tB=p_;function Tv(s,e){return s=Math.abs(s),e===2?s?s>1?1:0:1:s?Math.min(s,2):0}function sB(s){const e=Mt(s.pluralIndex)?s.pluralIndex:-1;return s.named&&(Mt(s.named.count)||Mt(s.named.n))?Mt(s.named.count)?s.named.count:Mt(s.named.n)?s.named.n:e:e}function nB(s,e){e.count||(e.count=s),e.n||(e.n=s)}function rB(s={}){const e=s.locale,t=sB(s),n=$e(s.pluralRules)&&ue(e)&&Ze(s.pluralRules[e])?s.pluralRules[e]:Tv,r=$e(s.pluralRules)&&ue(e)&&Ze(s.pluralRules[e])?Tv:void 0,i=T=>T[n(t,T.length,r)],a=s.list||[],o=T=>a[T],l=s.named||{};Mt(s.pluralIndex)&&nB(t,l);const c=T=>l[T];function u(T){const x=Ze(s.messages)?s.messages(T):$e(s.messages)?s.messages[T]:!1;return x||(s.parent?s.parent.message(T):z_)}const h=T=>s.modifiers?s.modifiers[T]:Q_,f=Fe(s.processor)&&Ze(s.processor.normalize)?s.processor.normalize:eB,m=Fe(s.processor)&&Ze(s.processor.interpolate)?s.processor.interpolate:tB,S=Fe(s.processor)&&ue(s.processor.type)?s.processor.type:Z_,E={list:o,named:c,plural:i,linked:(T,...x)=>{const[y,p]=x;let k="text",C="";x.length===1?$e(y)?(C=y.modifier||C,k=y.type||k):ue(y)&&(C=y||C):x.length===2&&(ue(y)&&(C=y||C),ue(p)&&(k=p||k));const L=u(T)(E),M=k==="vnode"&&Nt(L)&&C?L[0]:L;return C?h(C)(M,k):M},message:u,type:S,interpolate:m,normalize:f,values:It({},a,l)};return E}let cf=null;function iB(s){cf=s}function aB(s,e,t){cf&&cf.emit("i18n:init",{timestamp:Date.now(),i18n:s,version:e,meta:t})}const oB=lB("function:translate");function lB(s){return e=>cf&&cf.emit(s,e)}const H1=M1.__EXTEND_POINT__,Vi=zm(H1),cB={NOT_FOUND_KEY:H1,FALLBACK_TO_TRANSLATE:Vi(),CANNOT_FORMAT_NUMBER:Vi(),FALLBACK_TO_NUMBER_FORMAT:Vi(),CANNOT_FORMAT_DATE:Vi(),FALLBACK_TO_DATE_FORMAT:Vi(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:Vi(),__EXTEND_POINT__:Vi()},$1=Ge.__EXTEND_POINT__,Pi=zm($1),yn={INVALID_ARGUMENT:$1,INVALID_DATE_ARGUMENT:Pi(),INVALID_ISO_DATE_ARGUMENT:Pi(),NOT_SUPPORT_NON_STRING_MESSAGE:Pi(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:Pi(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:Pi(),NOT_SUPPORT_LOCALE_TYPE:Pi(),__EXTEND_POINT__:Pi()};function Kn(s){return Zm(s,null,void 0)}function Jw(s,e){return e.locale!=null?Rv(e.locale):Rv(s.locale)}let Ag;function Rv(s){if(ue(s))return s;if(Ze(s)){if(s.resolvedOnce&&Ag!=null)return Ag;if(s.constructor.name==="Function"){const e=s();if(g_(e))throw Kn(yn.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Ag=e}else throw Kn(yn.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Kn(yn.NOT_SUPPORT_LOCALE_TYPE)}function uB(s,e,t){return[...new Set([t,...Nt(e)?e:$e(e)?Object.keys(e):ue(e)?[e]:[t]])]}function F1(s,e,t){const n=ue(t)?t:Sm,r=s;r.__localeChainCache||(r.__localeChainCache=new Map);let i=r.__localeChainCache.get(n);if(!i){i=[];let a=[t];for(;Nt(a);)a=Ov(i,a,e);const o=Nt(e)||!Fe(e)?e:e.default?e.default:null;a=ue(o)?[o]:o,Nt(a)&&Ov(i,a,!1),r.__localeChainCache.set(n,i)}return i}function Ov(s,e,t){let n=!0;for(let r=0;r<e.length&&gt(n);r++){const i=e[r];ue(i)&&(n=hB(s,e[r],t))}return n}function hB(s,e,t){let n;const r=e.split("-");do{const i=r.join("-");n=fB(s,i,t),r.splice(-1,1)}while(r.length&&n===!0);return n}function fB(s,e,t){let n=!1;if(!s.includes(e)&&(n=!0,e)){n=e[e.length-1]!=="!";const r=e.replace(/!/g,"");s.push(r),(Nt(t)||Fe(t))&&t[r]&&(n=t[r])}return n}const dB="9.13.1",eg=-1,Sm="en-US",Vv="",Pv=s=>`${s.charAt(0).toLocaleUpperCase()}${s.substr(1)}`;function mB(){return{upper:(s,e)=>e==="text"&&ue(s)?s.toUpperCase():e==="vnode"&&$e(s)&&"__v_isVNode"in s?s.children.toUpperCase():s,lower:(s,e)=>e==="text"&&ue(s)?s.toLowerCase():e==="vnode"&&$e(s)&&"__v_isVNode"in s?s.children.toLowerCase():s,capitalize:(s,e)=>e==="text"&&ue(s)?Pv(s):e==="vnode"&&$e(s)&&"__v_isVNode"in s?Pv(s.children):s}}let K1;function gB(s){K1=s}let j1;function pB(s){j1=s}let J1;function wB(s){J1=s}let W1=null;const yB=s=>{W1=s},vB=()=>W1;let q1=null;const Lv=s=>{q1=s},bB=()=>q1;let Dv=0;function SB(s={}){const e=Ze(s.onWarn)?s.onWarn:w_,t=ue(s.version)?s.version:dB,n=ue(s.locale)||Ze(s.locale)?s.locale:Sm,r=Ze(n)?Sm:n,i=Nt(s.fallbackLocale)||Fe(s.fallbackLocale)||ue(s.fallbackLocale)||s.fallbackLocale===!1?s.fallbackLocale:r,a=Fe(s.messages)?s.messages:{[r]:{}},o=Fe(s.datetimeFormats)?s.datetimeFormats:{[r]:{}},l=Fe(s.numberFormats)?s.numberFormats:{[r]:{}},c=It({},s.modifiers||{},mB()),u=s.pluralRules||{},h=Ze(s.missing)?s.missing:null,f=gt(s.missingWarn)||ym(s.missingWarn)?s.missingWarn:!0,m=gt(s.fallbackWarn)||ym(s.fallbackWarn)?s.fallbackWarn:!0,S=!!s.fallbackFormat,A=!!s.unresolving,E=Ze(s.postTranslation)?s.postTranslation:null,T=Fe(s.processor)?s.processor:null,x=gt(s.warnHtmlMessage)?s.warnHtmlMessage:!0,y=!!s.escapeParameter,p=Ze(s.messageCompiler)?s.messageCompiler:K1,k=Ze(s.messageResolver)?s.messageResolver:j1||Y_,C=Ze(s.localeFallbacker)?s.localeFallbacker:J1||uB,L=$e(s.fallbackContext)?s.fallbackContext:void 0,M=s,F=$e(M.__datetimeFormatters)?M.__datetimeFormatters:new Map,ne=$e(M.__numberFormatters)?M.__numberFormatters:new Map,ce=$e(M.__meta)?M.__meta:{};Dv++;const te={version:t,cid:Dv,locale:n,fallbackLocale:i,messages:a,modifiers:c,pluralRules:u,missing:h,missingWarn:f,fallbackWarn:m,fallbackFormat:S,unresolving:A,postTranslation:E,processor:T,warnHtmlMessage:x,escapeParameter:y,messageCompiler:p,messageResolver:k,localeFallbacker:C,fallbackContext:L,onWarn:e,__meta:ce};return te.datetimeFormats=o,te.numberFormats=l,te.__datetimeFormatters=F,te.__numberFormatters=ne,__INTLIFY_PROD_DEVTOOLS__&&aB(te,t,ce),te}function Ww(s,e,t,n,r){const{missing:i,onWarn:a}=s;if(i!==null){const o=i(s,t,e,r);return ue(o)?o:e}else return e}function Pc(s,e,t){const n=s;n.__localeChainCache=new Map,s.localeFallbacker(s,t,e)}function AB(s,e){return s===e?!1:s.split("-")[0]===e.split("-")[0]}function kB(s,e){const t=e.indexOf(s);if(t===-1)return!1;for(let n=t+1;n<e.length;n++)if(AB(s,e[n]))return!0;return!1}function kg(s){return t=>EB(t,s)}function EB(s,e){const t=e.b||e.body;if((t.t||t.type)===1){const n=t,r=n.c||n.cases;return s.plural(r.reduce((i,a)=>[...i,Uv(s,a)],[]))}else return Uv(s,t)}function Uv(s,e){const t=e.s||e.static;if(t)return s.type==="text"?t:s.normalize([t]);{const n=(e.i||e.items).reduce((r,i)=>[...r,Ip(s,i)],[]);return s.normalize(n)}}function Ip(s,e){const t=e.t||e.type;switch(t){case 3:{const n=e;return n.v||n.value}case 9:{const n=e;return n.v||n.value}case 4:{const n=e;return s.interpolate(s.named(n.k||n.key))}case 5:{const n=e;return s.interpolate(s.list(n.i!=null?n.i:n.index))}case 6:{const n=e,r=n.m||n.modifier;return s.linked(Ip(s,n.k||n.key),r?Ip(s,r):void 0,s.type)}case 7:{const n=e;return n.v||n.value}case 8:{const n=e;return n.v||n.value}default:throw new Error(`unhandled node type on format message part: ${t}`)}}const CB=s=>s;let Wf=Object.create(null);const Sc=s=>$e(s)&&(s.t===0||s.type===0)&&("b"in s||"body"in s);function NB(s,e={}){let t=!1;const n=e.onError||b_;return e.onError=r=>{t=!0,n(r)},{...$_(s,e),detectError:t}}function IB(s,e){if(ue(s)){gt(e.warnHtmlMessage)&&e.warnHtmlMessage;const n=(e.onCacheKey||CB)(s),r=Wf[n];if(r)return r;const{ast:i,detectError:a}=NB(s,{...e,location:!1,jit:!0}),o=kg(i);return a?o:Wf[n]=o}else{const t=s.cacheKey;if(t){const n=Wf[t];return n||(Wf[t]=kg(s))}else return kg(s)}}const Mv=()=>"",Us=s=>Ze(s);function Hv(s,...e){const{fallbackFormat:t,postTranslation:n,unresolving:r,messageCompiler:i,fallbackLocale:a,messages:o}=s,[l,c]=_p(...e),u=gt(c.missingWarn)?c.missingWarn:s.missingWarn,h=gt(c.fallbackWarn)?c.fallbackWarn:s.fallbackWarn,f=gt(c.escapeParameter)?c.escapeParameter:s.escapeParameter,m=!!c.resolvedMessage,S=ue(c.default)||gt(c.default)?gt(c.default)?i?l:()=>l:c.default:t?i?l:()=>l:"",A=t||S!=="",E=Jw(s,c);f&&_B(c);let[T,x,y]=m?[l,E,o[E]||{}]:G1(s,l,E,a,h,u),p=T,k=l;if(!m&&!(ue(p)||Sc(p)||Us(p))&&A&&(p=S,k=p),!m&&(!(ue(p)||Sc(p)||Us(p))||!ue(x)))return r?eg:l;let C=!1;const L=()=>{C=!0},M=Us(p)?p:Y1(s,l,x,p,k,L);if(C)return p;const F=TB(s,x,y,c),ne=rB(F),ce=BB(s,M,ne),te=n?n(ce,l):ce;if(__INTLIFY_PROD_DEVTOOLS__){const fe={timestamp:Date.now(),key:ue(l)?l:Us(p)?p.key:"",locale:x||(Us(p)?p.locale:""),format:ue(p)?p:Us(p)?p.source:"",message:te};fe.meta=It({},s.__meta,vB()||{}),oB(fe)}return te}function _B(s){Nt(s.list)?s.list=s.list.map(e=>ue(e)?Nv(e):e):$e(s.named)&&Object.keys(s.named).forEach(e=>{ue(s.named[e])&&(s.named[e]=Nv(s.named[e]))})}function G1(s,e,t,n,r,i){const{messages:a,onWarn:o,messageResolver:l,localeFallbacker:c}=s,u=c(s,n,t);let h={},f,m=null;const S="translate";for(let A=0;A<u.length&&(f=u[A],h=a[f]||{},(m=l(h,e))===null&&(m=h[e]),!(ue(m)||Sc(m)||Us(m)));A++)if(!kB(f,u)){const E=Ww(s,e,f,i,S);E!==e&&(m=E)}return[m,f,h]}function Y1(s,e,t,n,r,i){const{messageCompiler:a,warnHtmlMessage:o}=s;if(Us(n)){const c=n;return c.locale=c.locale||t,c.key=c.key||e,c}if(a==null){const c=()=>n;return c.locale=t,c.key=e,c}const l=a(n,xB(s,t,r,n,o,i));return l.locale=t,l.key=e,l.source=n,l}function BB(s,e,t){return e(t)}function _p(...s){const[e,t,n]=s,r={};if(!ue(e)&&!Mt(e)&&!Us(e)&&!Sc(e))throw Kn(yn.INVALID_ARGUMENT);const i=Mt(e)?String(e):(Us(e),e);return Mt(t)?r.plural=t:ue(t)?r.default=t:Fe(t)&&!Qm(t)?r.named=t:Nt(t)&&(r.list=t),Mt(n)?r.plural=n:ue(n)?r.default=n:Fe(n)&&It(r,n),[i,r]}function xB(s,e,t,n,r,i){return{locale:e,key:t,warnHtmlMessage:r,onError:a=>{throw i&&i(a),a},onCacheKey:a=>u_(e,t,a)}}function TB(s,e,t,n){const{modifiers:r,pluralRules:i,messageResolver:a,fallbackLocale:o,fallbackWarn:l,missingWarn:c,fallbackContext:u}=s,f={locale:e,modifiers:r,pluralRules:i,messages:m=>{let S=a(t,m);if(S==null&&u){const[,,A]=G1(u,m,e,o,l,c);S=a(A,m)}if(ue(S)||Sc(S)){let A=!1;const T=Y1(s,m,e,S,m,()=>{A=!0});return A?Mv:T}else return Us(S)?S:Mv}};return s.processor&&(f.processor=s.processor),n.list&&(f.list=n.list),n.named&&(f.named=n.named),Mt(n.plural)&&(f.pluralIndex=n.plural),f}function $v(s,...e){const{datetimeFormats:t,unresolving:n,fallbackLocale:r,onWarn:i,localeFallbacker:a}=s,{__datetimeFormatters:o}=s,[l,c,u,h]=Bp(...e),f=gt(u.missingWarn)?u.missingWarn:s.missingWarn;gt(u.fallbackWarn)?u.fallbackWarn:s.fallbackWarn;const m=!!u.part,S=Jw(s,u),A=a(s,r,S);if(!ue(l)||l==="")return new Intl.DateTimeFormat(S,h).format(c);let E={},T,x=null;const y="datetime format";for(let C=0;C<A.length&&(T=A[C],E=t[T]||{},x=E[l],!Fe(x));C++)Ww(s,l,T,f,y);if(!Fe(x)||!ue(T))return n?eg:l;let p=`${T}__${l}`;Qm(h)||(p=`${p}__${JSON.stringify(h)}`);let k=o.get(p);return k||(k=new Intl.DateTimeFormat(T,It({},x,h)),o.set(p,k)),m?k.formatToParts(c):k.format(c)}const X1=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function Bp(...s){const[e,t,n,r]=s,i={};let a={},o;if(ue(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw Kn(yn.INVALID_ISO_DATE_ARGUMENT);const c=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();o=new Date(c);try{o.toISOString()}catch{throw Kn(yn.INVALID_ISO_DATE_ARGUMENT)}}else if(f_(e)){if(isNaN(e.getTime()))throw Kn(yn.INVALID_DATE_ARGUMENT);o=e}else if(Mt(e))o=e;else throw Kn(yn.INVALID_ARGUMENT);return ue(t)?i.key=t:Fe(t)&&Object.keys(t).forEach(l=>{X1.includes(l)?a[l]=t[l]:i[l]=t[l]}),ue(n)?i.locale=n:Fe(n)&&(a=n),Fe(r)&&(a=r),[i.key||"",o,i,a]}function Fv(s,e,t){const n=s;for(const r in t){const i=`${e}__${r}`;n.__datetimeFormatters.has(i)&&n.__datetimeFormatters.delete(i)}}function Kv(s,...e){const{numberFormats:t,unresolving:n,fallbackLocale:r,onWarn:i,localeFallbacker:a}=s,{__numberFormatters:o}=s,[l,c,u,h]=xp(...e),f=gt(u.missingWarn)?u.missingWarn:s.missingWarn;gt(u.fallbackWarn)?u.fallbackWarn:s.fallbackWarn;const m=!!u.part,S=Jw(s,u),A=a(s,r,S);if(!ue(l)||l==="")return new Intl.NumberFormat(S,h).format(c);let E={},T,x=null;const y="number format";for(let C=0;C<A.length&&(T=A[C],E=t[T]||{},x=E[l],!Fe(x));C++)Ww(s,l,T,f,y);if(!Fe(x)||!ue(T))return n?eg:l;let p=`${T}__${l}`;Qm(h)||(p=`${p}__${JSON.stringify(h)}`);let k=o.get(p);return k||(k=new Intl.NumberFormat(T,It({},x,h)),o.set(p,k)),m?k.formatToParts(c):k.format(c)}const Q1=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function xp(...s){const[e,t,n,r]=s,i={};let a={};if(!Mt(e))throw Kn(yn.INVALID_ARGUMENT);const o=e;return ue(t)?i.key=t:Fe(t)&&Object.keys(t).forEach(l=>{Q1.includes(l)?a[l]=t[l]:i[l]=t[l]}),ue(n)?i.locale=n:Fe(n)&&(a=n),Fe(r)&&(a=r),[i.key||"",o,i,a]}function jv(s,e,t){const n=s;for(const r in t){const i=`${e}__${r}`;n.__numberFormatters.has(i)&&n.__numberFormatters.delete(i)}}F_();/*!
  * vue-i18n v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const RB="9.13.1";function OB(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Fw().__INTLIFY_PROD_DEVTOOLS__=!1)}const z1=cB.__EXTEND_POINT__,In=zm(z1);In(),In(),In(),In(),In(),In(),In(),In(),In();const Z1=yn.__EXTEND_POINT__,cs=zm(Z1),js={UNEXPECTED_RETURN_TYPE:Z1,INVALID_ARGUMENT:cs(),MUST_BE_CALL_SETUP_TOP:cs(),NOT_INSTALLED:cs(),NOT_AVAILABLE_IN_LEGACY_MODE:cs(),REQUIRED_VALUE:cs(),INVALID_VALUE:cs(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:cs(),NOT_INSTALLED_WITH_PROVIDE:cs(),UNEXPECTED_ERROR:cs(),NOT_COMPATIBLE_LEGACY_VUE_I18N:cs(),BRIDGE_SUPPORT_VUE_2_ONLY:cs(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:cs(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:cs(),__EXTEND_POINT__:cs()};function rn(s,...e){return Zm(s,null,void 0)}const Tp=Bi("__translateVNode"),Rp=Bi("__datetimeParts"),Op=Bi("__numberParts"),VB=Bi("__setPluralRules"),PB=Bi("__injectWithOption"),Vp=Bi("__dispose");function uf(s){if(!$e(s))return s;for(const e in s)if(vm(s,e))if(!e.includes("."))$e(s[e])&&uf(s[e]);else{const t=e.split("."),n=t.length-1;let r=s,i=!1;for(let a=0;a<n;a++){if(t[a]in r||(r[t[a]]={}),!$e(r[t[a]])){i=!0;break}r=r[t[a]]}i||(r[t[n]]=s[e],delete s[e]),$e(r[t[n]])&&uf(r[t[n]])}return s}function eA(s,e){const{messages:t,__i18n:n,messageResolver:r,flatJson:i}=e,a=Fe(t)?t:Nt(n)?{}:{[s]:{}};if(Nt(n)&&n.forEach(o=>{if("locale"in o&&"resource"in o){const{locale:l,resource:c}=o;l?(a[l]=a[l]||{},Za(c,a[l])):Za(c,a)}else ue(o)&&Za(JSON.parse(o),a)}),r==null&&i)for(const o in a)vm(a,o)&&uf(a[o]);return a}function tA(s){return s.type}function LB(s,e,t){let n=$e(e.messages)?e.messages:{};"__i18nGlobal"in t&&(n=eA(s.locale.value,{messages:n,__i18n:t.__i18nGlobal}));const r=Object.keys(n);r.length&&r.forEach(i=>{s.mergeLocaleMessage(i,n[i])});{if($e(e.datetimeFormats)){const i=Object.keys(e.datetimeFormats);i.length&&i.forEach(a=>{s.mergeDateTimeFormat(a,e.datetimeFormats[a])})}if($e(e.numberFormats)){const i=Object.keys(e.numberFormats);i.length&&i.forEach(a=>{s.mergeNumberFormat(a,e.numberFormats[a])})}}}function Jv(s){return Se(lo,null,s,0)}const Wv="__INTLIFY_META__",qv=()=>[],DB=()=>!1;let Gv=0;function Yv(s){return(e,t,n,r)=>s(t,n,kf()||void 0,r)}const UB=()=>{const s=kf();let e=null;return s&&(e=tA(s)[Wv])?{[Wv]:e}:null};function sA(s={},e){const{__root:t,__injectWithOption:n}=s,r=t===void 0,i=s.flatJson,a=wm?Ke:ip,o=!!s.translateExistCompatible;let l=gt(s.inheritLocale)?s.inheritLocale:!0;const c=a(t&&l?t.locale.value:ue(s.locale)?s.locale:Sm),u=a(t&&l?t.fallbackLocale.value:ue(s.fallbackLocale)||Nt(s.fallbackLocale)||Fe(s.fallbackLocale)||s.fallbackLocale===!1?s.fallbackLocale:c.value),h=a(eA(c.value,s)),f=a(Fe(s.datetimeFormats)?s.datetimeFormats:{[c.value]:{}}),m=a(Fe(s.numberFormats)?s.numberFormats:{[c.value]:{}});let S=t?t.missingWarn:gt(s.missingWarn)||ym(s.missingWarn)?s.missingWarn:!0,A=t?t.fallbackWarn:gt(s.fallbackWarn)||ym(s.fallbackWarn)?s.fallbackWarn:!0,E=t?t.fallbackRoot:gt(s.fallbackRoot)?s.fallbackRoot:!0,T=!!s.fallbackFormat,x=Ze(s.missing)?s.missing:null,y=Ze(s.missing)?Yv(s.missing):null,p=Ze(s.postTranslation)?s.postTranslation:null,k=t?t.warnHtmlMessage:gt(s.warnHtmlMessage)?s.warnHtmlMessage:!0,C=!!s.escapeParameter;const L=t?t.modifiers:Fe(s.modifiers)?s.modifiers:{};let M=s.pluralRules||t&&t.pluralRules,F;F=(()=>{r&&Lv(null);const D={version:RB,locale:c.value,fallbackLocale:u.value,messages:h.value,modifiers:L,pluralRules:M,missing:y===null?void 0:y,missingWarn:S,fallbackWarn:A,fallbackFormat:T,unresolving:!0,postTranslation:p===null?void 0:p,warnHtmlMessage:k,escapeParameter:C,messageResolver:s.messageResolver,messageCompiler:s.messageCompiler,__meta:{framework:"vue"}};D.datetimeFormats=f.value,D.numberFormats=m.value,D.__datetimeFormatters=Fe(F)?F.__datetimeFormatters:void 0,D.__numberFormatters=Fe(F)?F.__numberFormatters:void 0;const J=SB(D);return r&&Lv(J),J})(),Pc(F,c.value,u.value);function ce(){return[c.value,u.value,h.value,f.value,m.value]}const te=Yt({get:()=>c.value,set:D=>{c.value=D,F.locale=c.value}}),fe=Yt({get:()=>u.value,set:D=>{u.value=D,F.fallbackLocale=u.value,Pc(F,c.value,D)}}),Ce=Yt(()=>h.value),ye=Yt(()=>f.value),ie=Yt(()=>m.value);function se(){return Ze(p)?p:null}function ae(D){p=D,F.postTranslation=D}function Re(){return x}function oe(D){D!==null&&(y=Yv(D)),x=D,F.missing=y}const de=(D,J,pe,xe,tt,Kt)=>{ce();let ws;try{__INTLIFY_PROD_DEVTOOLS__,r||(F.fallbackContext=t?bB():void 0),ws=D(F)}finally{__INTLIFY_PROD_DEVTOOLS__,r||(F.fallbackContext=void 0)}if(pe!=="translate exists"&&Mt(ws)&&ws===eg||pe==="translate exists"&&!ws){const[Of,vo]=J();return t&&E?xe(t):tt(Of)}else{if(Kt(ws))return ws;throw rn(js.UNEXPECTED_RETURN_TYPE)}};function Y(...D){return de(J=>Reflect.apply(Hv,null,[J,...D]),()=>_p(...D),"translate",J=>Reflect.apply(J.t,J,[...D]),J=>J,J=>ue(J))}function be(...D){const[J,pe,xe]=D;if(xe&&!$e(xe))throw rn(js.INVALID_ARGUMENT);return Y(J,pe,It({resolvedMessage:!0},xe||{}))}function Be(...D){return de(J=>Reflect.apply($v,null,[J,...D]),()=>Bp(...D),"datetime format",J=>Reflect.apply(J.d,J,[...D]),()=>Vv,J=>ue(J))}function qe(...D){return de(J=>Reflect.apply(Kv,null,[J,...D]),()=>xp(...D),"number format",J=>Reflect.apply(J.n,J,[...D]),()=>Vv,J=>ue(J))}function it(D){return D.map(J=>ue(J)||Mt(J)||gt(J)?Jv(String(J)):J)}const Ve={normalize:it,interpolate:D=>D,type:"vnode"};function ge(...D){return de(J=>{let pe;const xe=J;try{xe.processor=Ve,pe=Reflect.apply(Hv,null,[xe,...D])}finally{xe.processor=null}return pe},()=>_p(...D),"translate",J=>J[Tp](...D),J=>[Jv(J)],J=>Nt(J))}function ze(...D){return de(J=>Reflect.apply(Kv,null,[J,...D]),()=>xp(...D),"number format",J=>J[Op](...D),qv,J=>ue(J)||Nt(J))}function K(...D){return de(J=>Reflect.apply($v,null,[J,...D]),()=>Bp(...D),"datetime format",J=>J[Rp](...D),qv,J=>ue(J)||Nt(J))}function P(D){M=D,F.pluralRules=M}function w(D,J){return de(()=>{if(!D)return!1;const pe=ue(J)?J:c.value,xe=O(pe),tt=F.messageResolver(xe,D);return o?tt!=null:Sc(tt)||Us(tt)||ue(tt)},()=>[D],"translate exists",pe=>Reflect.apply(pe.te,pe,[D,J]),DB,pe=>gt(pe))}function I(D){let J=null;const pe=F1(F,u.value,c.value);for(let xe=0;xe<pe.length;xe++){const tt=h.value[pe[xe]]||{},Kt=F.messageResolver(tt,D);if(Kt!=null){J=Kt;break}}return J}function R(D){const J=I(D);return J??(t?t.tm(D)||{}:{})}function O(D){return h.value[D]||{}}function $(D,J){if(i){const pe={[D]:J};for(const xe in pe)vm(pe,xe)&&uf(pe[xe]);J=pe[D]}h.value[D]=J,F.messages=h.value}function j(D,J){h.value[D]=h.value[D]||{};const pe={[D]:J};if(i)for(const xe in pe)vm(pe,xe)&&uf(pe[xe]);J=pe[D],Za(J,h.value[D]),F.messages=h.value}function Z(D){return f.value[D]||{}}function b(D,J){f.value[D]=J,F.datetimeFormats=f.value,Fv(F,D,J)}function v(D,J){f.value[D]=It(f.value[D]||{},J),F.datetimeFormats=f.value,Fv(F,D,J)}function _(D){return m.value[D]||{}}function B(D,J){m.value[D]=J,F.numberFormats=m.value,jv(F,D,J)}function re(D,J){m.value[D]=It(m.value[D]||{},J),F.numberFormats=m.value,jv(F,D,J)}Gv++,t&&wm&&(Sn(t.locale,D=>{l&&(c.value=D,F.locale=D,Pc(F,c.value,u.value))}),Sn(t.fallbackLocale,D=>{l&&(u.value=D,F.fallbackLocale=D,Pc(F,c.value,u.value))}));const z={id:Gv,locale:te,fallbackLocale:fe,get inheritLocale(){return l},set inheritLocale(D){l=D,D&&t&&(c.value=t.locale.value,u.value=t.fallbackLocale.value,Pc(F,c.value,u.value))},get availableLocales(){return Object.keys(h.value).sort()},messages:Ce,get modifiers(){return L},get pluralRules(){return M||{}},get isGlobal(){return r},get missingWarn(){return S},set missingWarn(D){S=D,F.missingWarn=S},get fallbackWarn(){return A},set fallbackWarn(D){A=D,F.fallbackWarn=A},get fallbackRoot(){return E},set fallbackRoot(D){E=D},get fallbackFormat(){return T},set fallbackFormat(D){T=D,F.fallbackFormat=T},get warnHtmlMessage(){return k},set warnHtmlMessage(D){k=D,F.warnHtmlMessage=D},get escapeParameter(){return C},set escapeParameter(D){C=D,F.escapeParameter=D},t:Y,getLocaleMessage:O,setLocaleMessage:$,mergeLocaleMessage:j,getPostTranslationHandler:se,setPostTranslationHandler:ae,getMissingHandler:Re,setMissingHandler:oe,[VB]:P};return z.datetimeFormats=ye,z.numberFormats=ie,z.rt=be,z.te=w,z.tm=R,z.d=Be,z.n=qe,z.getDateTimeFormat=Z,z.setDateTimeFormat=b,z.mergeDateTimeFormat=v,z.getNumberFormat=_,z.setNumberFormat=B,z.mergeNumberFormat=re,z[PB]=n,z[Tp]=ge,z[Rp]=K,z[Op]=ze,z}const qw={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:s=>s==="parent"||s==="global",default:"parent"},i18n:{type:Object}};function MB({slots:s},e){return e.length===1&&e[0]==="default"?(s.default?s.default():[]).reduce((n,r)=>[...n,...r.type===Ut?r.children:[r]],[]):e.reduce((t,n)=>{const r=s[n];return r&&(t[n]=r()),t},{})}function nA(s){return Ut}const HB=Ii({name:"i18n-t",props:It({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:s=>Mt(s)||!isNaN(s)}},qw),setup(s,e){const{slots:t,attrs:n}=e,r=s.i18n||tg({useScope:s.scope,__useComponent:!0});return()=>{const i=Object.keys(t).filter(h=>h!=="_"),a={};s.locale&&(a.locale=s.locale),s.plural!==void 0&&(a.plural=ue(s.plural)?+s.plural:s.plural);const o=MB(e,i),l=r[Tp](s.keypath,o,a),c=It({},n),u=ue(s.tag)||$e(s.tag)?s.tag:nA();return Vw(u,c,l)}}}),Xv=HB;function $B(s){return Nt(s)&&!ue(s[0])}function rA(s,e,t,n){const{slots:r,attrs:i}=e;return()=>{const a={part:!0};let o={};s.locale&&(a.locale=s.locale),ue(s.format)?a.key=s.format:$e(s.format)&&(ue(s.format.key)&&(a.key=s.format.key),o=Object.keys(s.format).reduce((f,m)=>t.includes(m)?It({},f,{[m]:s.format[m]}):f,{}));const l=n(s.value,a,o);let c=[a.key];Nt(l)?c=l.map((f,m)=>{const S=r[f.type],A=S?S({[f.type]:f.value,index:m,parts:l}):[f.value];return $B(A)&&(A[0].key=`${f.type}-${m}`),A}):ue(l)&&(c=[l]);const u=It({},i),h=ue(s.tag)||$e(s.tag)?s.tag:nA();return Vw(h,u,c)}}const FB=Ii({name:"i18n-n",props:It({value:{type:Number,required:!0},format:{type:[String,Object]}},qw),setup(s,e){const t=s.i18n||tg({useScope:s.scope,__useComponent:!0});return rA(s,e,Q1,(...n)=>t[Op](...n))}}),Qv=FB,KB=Ii({name:"i18n-d",props:It({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},qw),setup(s,e){const t=s.i18n||tg({useScope:s.scope,__useComponent:!0});return rA(s,e,X1,(...n)=>t[Rp](...n))}}),zv=KB;function jB(s,e){const t=s;if(s.mode==="composition")return t.__getInstance(e)||s.global;{const n=t.__getInstance(e);return n!=null?n.__composer:s.global.__composer}}function JB(s){const e=a=>{const{instance:o,modifiers:l,value:c}=a;if(!o||!o.$)throw rn(js.UNEXPECTED_ERROR);const u=jB(s,o.$),h=Zv(c);return[Reflect.apply(u.t,u,[...eb(h)]),u]};return{created:(a,o)=>{const[l,c]=e(o);wm&&s.global===c&&(a.__i18nWatcher=Sn(c.locale,()=>{o.instance&&o.instance.$forceUpdate()})),a.__composer=c,a.textContent=l},unmounted:a=>{wm&&a.__i18nWatcher&&(a.__i18nWatcher(),a.__i18nWatcher=void 0,delete a.__i18nWatcher),a.__composer&&(a.__composer=void 0,delete a.__composer)},beforeUpdate:(a,{value:o})=>{if(a.__composer){const l=a.__composer,c=Zv(o);a.textContent=Reflect.apply(l.t,l,[...eb(c)])}},getSSRProps:a=>{const[o]=e(a);return{textContent:o}}}}function Zv(s){if(ue(s))return{path:s};if(Fe(s)){if(!("path"in s))throw rn(js.REQUIRED_VALUE,"path");return s}else throw rn(js.INVALID_VALUE)}function eb(s){const{path:e,locale:t,args:n,choice:r,plural:i}=s,a={},o=n||{};return ue(t)&&(a.locale=t),Mt(r)&&(a.plural=r),Mt(i)&&(a.plural=i),[e,o,a]}function WB(s,e,...t){const n=Fe(t[0])?t[0]:{},r=!!n.useI18nComponentName;(gt(n.globalInstall)?n.globalInstall:!0)&&([r?"i18n":Xv.name,"I18nT"].forEach(a=>s.component(a,Xv)),[Qv.name,"I18nN"].forEach(a=>s.component(a,Qv)),[zv.name,"I18nD"].forEach(a=>s.component(a,zv))),s.directive("t",JB(e))}const qB=Bi("global-vue-i18n");function GB(s={},e){const t=gt(s.globalInjection)?s.globalInjection:!0,n=!0,r=new Map,[i,a]=YB(s),o=Bi("");function l(h){return r.get(h)||null}function c(h,f){r.set(h,f)}function u(h){r.delete(h)}{const h={get mode(){return"composition"},get allowComposition(){return n},async install(f,...m){if(f.__VUE_I18N_SYMBOL__=o,f.provide(f.__VUE_I18N_SYMBOL__,h),Fe(m[0])){const E=m[0];h.__composerExtend=E.__composerExtend,h.__vueI18nExtend=E.__vueI18nExtend}let S=null;t&&(S=nx(f,h.global)),WB(f,h,...m);const A=f.unmount;f.unmount=()=>{S&&S(),h.dispose(),A()}},get global(){return a},dispose(){i.stop()},__instances:r,__getInstance:l,__setInstance:c,__deleteInstance:u};return h}}function tg(s={}){const e=kf();if(e==null)throw rn(js.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw rn(js.NOT_INSTALLED);const t=XB(e),n=zB(t),r=tA(e),i=QB(s,r);if(i==="global")return LB(n,s,r),n;if(i==="parent"){let l=ZB(t,e,s.__useComponent);return l==null&&(l=n),l}const a=t;let o=a.__getInstance(e);if(o==null){const l=It({},s);"__i18n"in r&&(l.__i18n=r.__i18n),n&&(l.__root=n),o=sA(l),a.__composerExtend&&(o[Vp]=a.__composerExtend(o)),tx(a,e,o),a.__setInstance(e,o)}return o}function YB(s,e,t){const n=mw();{const r=n.run(()=>sA(s));if(r==null)throw rn(js.UNEXPECTED_ERROR);return[n,r]}}function XB(s){{const e=za(s.isCE?qB:s.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw rn(s.isCE?js.NOT_INSTALLED_WITH_PROVIDE:js.UNEXPECTED_ERROR);return e}}function QB(s,e){return Qm(s)?"__i18n"in e?"local":"global":s.useScope?s.useScope:"local"}function zB(s){return s.mode==="composition"?s.global:s.global.__composer}function ZB(s,e,t=!1){let n=null;const r=e.root;let i=ex(e,t);for(;i!=null;){const a=s;if(s.mode==="composition"&&(n=a.__getInstance(i)),n!=null||r===i)break;i=i.parent}return n}function ex(s,e=!1){return s==null?null:e&&s.vnode.ctx||s.parent}function tx(s,e,t){_w(()=>{},e),Bw(()=>{const n=t;s.__deleteInstance(e);const r=n[Vp];r&&(r(),delete n[Vp])},e)}const sx=["locale","fallbackLocale","availableLocales"],tb=["t","rt","d","n","tm","te"];function nx(s,e){const t=Object.create(null);return sx.forEach(r=>{const i=Object.getOwnPropertyDescriptor(e,r);if(!i)throw rn(js.UNEXPECTED_ERROR);const a=we(i.value)?{get(){return i.value.value},set(o){i.value.value=o}}:{get(){return i.get&&i.get()}};Object.defineProperty(t,r,a)}),s.config.globalProperties.$i18n=t,tb.forEach(r=>{const i=Object.getOwnPropertyDescriptor(e,r);if(!i||!i.value)throw rn(js.UNEXPECTED_ERROR);Object.defineProperty(s.config.globalProperties,`$${r}`,i)}),()=>{delete s.config.globalProperties.$i18n,tb.forEach(r=>{delete s.config.globalProperties[`$${r}`]})}}OB();gB(IB);pB(X_);wB(F1);if(__INTLIFY_PROD_DEVTOOLS__){const s=Fw();s.__INTLIFY__=!0,iB(s.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const co=["en","zh-CN"],Am={en:[],"zh-CN":[]},rx=[()=>Sp(()=>import("./i18n.config.96ec4c99.js"),[],import.meta.url)],sg=[{code:"en",name:"English",files:[]},{code:"zh-CN",name:"Chinese",files:[]}],iA="@nuxtjs/i18n",ix=!1,ax="nuxtI18n",ox="i18n_redirected",sb="nuxt-i18n-slp",zh=new Map;async function lx(s,e){const t={messages:{}};for(const n of s){const{default:r}=await n(),i=typeof r=="function"?await e.runWithContext(async()=>await r()):r;Za(i,t)}return t}function aA(s,e){let t=[];if(Nt(s))t=s;else if($e(s)){const n=[...e,"default"];for(const r of n)s[r]&&(t=[...t,...s[r].filter(Boolean)])}else ue(s)&&e.every(n=>n!==s)&&t.push(s);return t}async function cx(s,e,t){const{defaultLocale:n,initialLocale:r,localeCodes:i,fallbackLocale:a,lazy:o}=t;if(o&&a){const c=aA(a,[n,r]);await Promise.all(c.map(u=>nb(u,e,s)))}const l=o?[...new Set().add(n).add(r)]:i;return await Promise.all(l.map(c=>nb(c,e,s))),s}async function ux(s,{key:e,load:t}){let n=null;try{const r=await t().then(i=>i.default||i);Ze(r)?n=await r(s):(n=r,n!=null&&zh&&zh.set(e,n))}catch(r){console.error("Failed locale loading: "+r.message)}return n}async function km(s,e,t){const n=e[s];if(n==null){console.warn("Could not find messages for locale code: "+s);return}const r={};for(const i of n){let a=null;zh&&zh.has(i.key)&&i.cache?a=zh.get(i.key):a=await ux(s,i),a!=null&&Za(a,r)}t(s,r)}async function nb(s,e,t){await km(s,e,(r,i)=>{const a=t[r]||{};Za(i,a),t[r]=a})}const hx=typeof window<"u";function fx(s){s=s||[];const e=[];for(const t of s)ue(t)?e.push({code:t}):e.push(t);return e}function dx(s){return s!=null&&"global"in s&&"mode"in s}function mx(s){return s!=null&&!("__composer"in s)&&"locale"in s&&we(s.locale)}function oA(s){return s!=null&&"__composer"in s}function Ti(s){return dx(s)?s.global:s}function Ac(s){const e=Ti(s);return mx(e)?e:oA(e)?e.__composer:e}function ng(s){return ee(Ti(s).locale)}function gx(s){return ee(Ti(s).locales)}function px(s){return ee(Ti(s).localeCodes)}function lA(s,e){const t=Ti(s);we(t.locale)?t.locale.value=e:t.locale=e}function cA(s){return ue(s)?s:m_(s)?s.toString():"(null)"}function rb(s,e,{defaultLocale:t,strategy:n,routesNameSeparator:r,defaultLocaleRouteNameSuffix:i}){let a=cA(s)+(n==="no_prefix"?"":r+e);return e===t&&n==="prefix_and_default"&&(a+=r+i),a}function ib(s,e){return Ze(s)?s(e):s}function wx(s,e){const t=[];for(const[n,r]of e.entries()){const i=s.find(a=>a.iso.toLowerCase()===r.toLowerCase());if(i){t.push({code:i.code,score:1-n/e.length});break}}for(const[n,r]of e.entries()){const i=r.split("-")[0].toLowerCase(),a=s.find(o=>o.iso.split("-")[0].toLowerCase()===i);if(a){t.push({code:a.code,score:.999-n/e.length});break}}return t}const yx=wx;function vx(s,e){return s.score===e.score?e.code.length-s.code.length:e.score-s.score}const bx=vx;function Sx(s,e,{matcher:t=yx,comparer:n=bx}={}){const r=[];for(const a of s){const{code:o}=a,l=a.iso||o;r.push({code:o,iso:l})}const i=t(r,e);return i.length>1&&i.sort(n),i.length?i[0].code:""}function Em(s){return new RegExp(`^/(${s.join("|")})(?:/|$)`,"i")}function Ax(s,e){return[s.slice(0,e),s.slice(e)]}function kx(s){const{fullPath:e,query:t,hash:n,name:r,path:i,params:a,meta:o,redirectedFrom:l,matched:c}=s;return{fullPath:e,params:a,query:t,hash:n,name:r,path:i,meta:o,matched:c,redirectedFrom:l}}function Ex({router:s},e,t,n){var c,u;if(t!=="prefix")return s.resolve(e);const[r,i]=Ax(e.path,1),a=`${r}${n}${i===""?i:`/${i}`}`,o=(u=(c=s.options)==null?void 0:c.routes)==null?void 0:u.find(h=>h.path===a);if(o==null)return e;const l=It({},e,o);return l.path=a,s.resolve(l)}const Cx=new Set(["prefix_and_default","prefix_except_default"]);function Nx(s){const{currentLocale:e,defaultLocale:t,strategy:n}=s;return!(e===t&&Cx.has(n))&&n!=="no_prefix"}const Ix=Nx;function kc(s,e){const{routesNameSeparator:t}=s.runtimeConfig.public.i18n,n=ee(e);return n==null||!n.name?void 0:cA(n.name).split(t)[0]}function Gw(s,e,t){var r;if(typeof e=="string"&&mo(e,{acceptRelative:!0}))return e;const n=rg(s,e,t);return n==null?"":((r=n.redirectedFrom)==null?void 0:r.fullPath)||n.fullPath}function Yw(s,e,t){return rg(s,e,t)??void 0}function _x(s,e,t){return rg(s,e,t)??void 0}function rg(s,e,t){const{router:n,i18n:r}=s,i=t||ng(r),{routesNameSeparator:a,defaultLocale:o,defaultLocaleRouteNameSuffix:l,strategy:c,trailingSlash:u}=s.runtimeConfig.public.i18n,h=Kx(s.runtimeConfig);let f;if(ue(e))if(e[0]==="/"){const{pathname:A,search:E,hash:T}=yp(e),x=Lw(E);f={path:A,query:x,hash:T}}else f={name:e};else f=e;let m=It({},f);if((A=>"path"in A&&!!A.path&&!("name"in A))(m)){const A=Ex(s,m,c,i),E=kc(s,A);ue(E)?(m={name:rb(E,i,{defaultLocale:o,strategy:c,routesNameSeparator:a,defaultLocaleRouteNameSuffix:l}),params:A.params,query:A.query,hash:A.hash},m.state=A.state):(h({currentLocale:i,defaultLocale:o,strategy:c})&&(m.path=`/${i}${m.path}`),m.path=u?fm(m.path,!0):Dw(m.path,!0))}else!m.name&&!("path"in m)&&(m.name=kc(s,n.currentRoute.value)),m.name=rb(m.name,i,{defaultLocale:o,strategy:c,routesNameSeparator:a,defaultLocaleRouteNameSuffix:l});try{const A=n.resolve(m);return A.name?A:n.resolve(e)}catch(A){if(typeof A=="object"&&"type"in A&&A.type===1)return null}}const Bx=s=>s;function xx(s,e){var n;if(s.runtimeConfig.public.i18n.experimental.switchLocalePathLinkSSR)return ee(s.metaState.value);const t=e.meta||{};return((n=ee(t))==null?void 0:n[ax])||{}}function Ec(s,e,t){const n=t??s.router.currentRoute.value,r=kc(s,n);if(!r)return"";const i=jx(s.runtimeConfig),a=kx(n),o=xx(s,n)[e],l={...a,name:r,params:{...a.params,...o}},c=Gw(s,l,e);return i(c,e)}function uA(s,{addDirAttribute:e=!1,addSeoAttributes:t=!0,identifierAttribute:n="hid"}){const{defaultDirection:r}=Xt().public.i18n,i=Ac(s.i18n),a={htmlAttrs:{},link:[],meta:[]};if(ee(i.locales)==null||ee(i.baseUrl)==null)return a;const o=ng(s.i18n),l=gx(s.i18n),c=fx(l).find(f=>f.code===o)||{code:o},u=c.iso,h=c.dir||r;return e&&(a.htmlAttrs.dir=h),t&&o&&ee(i.locales)&&(u&&(a.htmlAttrs.lang=u),a.link.push(...Tx(s,ee(l),n),...Rx(s,n,t)),a.meta.push(...Ox(s,n,t),...Vx(c,u,n),...Px(ee(l),u,n))),a}function Xw(){const s=et(),e=Ac(s.$i18n);return an(ee(e.baseUrl),s.$config.app.baseURL)}function Tx(s,e,t){const n=Xw(),{defaultLocale:r,strategy:i}=Xt().public.i18n,a=[];if(i==="no_prefix")return a;const o=new Map;for(const l of e){const c=l.iso;if(!c){console.warn("Locale ISO code is required to generate alternate link");continue}const[u,h]=c.split("-");u&&h&&(l.isCatchallLocale||!o.has(u))&&o.set(u,l),o.set(c,l)}for(const[l,c]of o.entries()){const u=Ec(s,c.code);u&&a.push({[t]:`i18n-alt-${l}`,rel:"alternate",href:Pp(u,n),hreflang:l})}if(r){const l=Ec(s,r);l&&a.push({[t]:"i18n-xd",rel:"alternate",href:Pp(l,n),hreflang:"x-default"})}return a}function hA(s,e,t){const n=s.router.currentRoute.value,r=Yw(s,{...n,path:void 0,name:kc(s,n)});if(!r)return"";let i=Pp(r.path,e);const a=$e(t)&&t.canonicalQueries||[],o=r.query,l=new URLSearchParams;for(const u of a)if(u in o){const h=o[u];Nt(h)?h.forEach(f=>l.append(u,f||"")):l.append(u,h||"")}const c=l.toString();return c&&(i=`${i}?${c}`),i}function Rx(s,e,t){const n=Xw(),r=hA(s,n,t);return r?[{[e]:"i18n-can",rel:"canonical",href:r}]:[]}function Ox(s,e,t){const n=Xw(),r=hA(s,n,t);return r?[{[e]:"i18n-og-url",property:"og:url",content:r}]:[]}function Vx(s,e,t){return!s||!e?[]:[{[t]:"i18n-og",property:"og:locale",content:fA(e)}]}function Px(s,e,t){return s.filter(r=>r.iso&&r.iso!==e).map(r=>({[t]:`i18n-og-alt-${r.iso}`,property:"og:locale:alternate",content:fA(r.iso)}))}function fA(s){return(s||"").replace(/-/g,"_")}function Pp(s,e){return s.match(/^https?:\/\//)?s:an(e,s)}function Lx(s,e){return _f(s,"setLocale",e)}function Dx(s,e){return _f(s,"setLocaleCookie",e)}function dA(s,e,t){return _f(s,"mergeLocaleMessage",e,t)}function Ux(s,e,t,n,r){return _f(s,"onBeforeLanguageSwitch",e,t,n,r)}function Mx(s,e,t){return _f(s,"onLanguageSwitched",e,t)}function Qw(s){return{i18n:s??et().$i18n,router:If(),runtimeConfig:Xt(),metaState:R1("nuxt-i18n-meta",()=>({}))}}async function ab(s,e,t,n=!1){const{differentDomains:r,skipSettingLocaleOnNavigate:i,lazy:a}=t,o=Bf(t),l=et(),c=ng(e),u=px(e);function h(m=c){o===!1||!o.useCookie||i||Dx(e,m)}if(!s||!n&&r||c===s)return h(),!1;const f=await Ux(e,c,s,n,l);if(f&&u.includes(f)){if(c===f)return h(),!1;s=f}if(a){const m=Wx(e,"fallbackLocale"),S=(A,E)=>dA(e,A,E);if(m){const A=aA(m,[s]);await Promise.all(A.map(E=>km(E,Am,S)))}await km(s,Am,S)}return i?!1:(h(s),lA(e,s),await Mx(e,c,s),!0)}function ob(s,e,t,n,r,i){const{strategy:a,defaultLocale:o,differentDomains:l}=i,c=Bf(i),u=Ze(n)?n():n,{ssg:h,callType:f,firstAccess:m,localeCookie:S}=r,{locale:A,stat:E,reason:T,from:x}=c?wA(s,t,r,u):pA;if(T==="detect_ignore_on_ssg")return u;if((x==="navigator_or_header"||x==="cookie"||x==="fallback")&&A)return A;let y=A;return y||(l?y=Xx(sg,a,s):a!=="no_prefix"?y=e(s):c||(y=u)),!y&&c&&c.useCookie&&(y=S||""),y||(y=o||""),y}function lb({route:s,targetLocale:e,routeLocaleGetter:t,calledWithRouting:n=!1}){const r=et(),i=Qw(),{strategy:a,differentDomains:o}=i.runtimeConfig.public.i18n;let l="";const{fullPath:c}=s.to;if(!o&&(n||a!=="no_prefix")&&t(s.to)!==e){const u=r.$switchLocalePath(e)||r.$localePath(c,e);ue(u)&&u&&!wp(u,c)&&!u.startsWith("//")&&(l=s.from&&s.from.fullPath===u?"":u)}if((o||!0)&&t(s.to)!==e){const u=Ec(i,e,s.to);ue(u)&&u&&!wp(u,c)&&!u.startsWith("//")&&(l=u)}return l}function Hx(s){return $e(s)&&"path"in s&&"statusCode"in s}const $x=()=>R1(iA+":redirect",()=>"");function cb(s,e){return B1(s,{redirectCode:e})}async function ub(s,{status:e=302,enableNavigate:t=!1}={}){const{nuxtApp:n,i18n:r,locale:i,route:a}=s,{rootRedirect:o,differentDomains:l,skipSettingLocaleOnNavigate:c}=n.$config.public.i18n;let{redirectPath:u}=s;if(a.path==="/"&&o)return ue(o)?u="/"+o:Hx(o)&&(u="/"+o.path,e=o.statusCode),u=n.$localePath(u,i),cb(u,e);if(!(c&&(r.__pendingLocale=i,r.__pendingLocalePromise=new Promise(h=>{r.__resolvePendingLocalePromise=h}),!t))){if(l){const h=$x();h.value&&h.value!==u&&(h.value="",window.location.assign(u))}else if(u)return cb(u,e)}}function Fx(s,e){Ao(s,"$i18n",Ti(e)),Ao(s,"$getRouteBaseName",ks(kc)),Ao(s,"$localePath",ks(Gw)),Ao(s,"$localeRoute",ks(Yw)),Ao(s,"$switchLocalePath",ks(Ec)),Ao(s,"$localeHead",ks(uA))}function Kx(s=Xt()){return e=>Ix(e)&&!s.public.i18n.differentDomains}function jx(s=Xt()){return(e,t)=>{if(s.public.i18n.differentDomains){const n=yA(t);return n?an(n,e):e}else return Bx(e)}}function Jx(){return()=>{const s=et(),{baseUrl:e,defaultLocale:t,differentDomains:n}=s.$config.public.i18n;if(Ze(e))return e(s);const r=Ze(t)?t():t;if(n&&r){const i=yA(r);if(i)return i}return e}}function mA(s){return iA+" "+s}function _f(s,e,...t){const n=Ti(s),[r,i]=[n,n[e]];return Reflect.apply(i,r,[...t])}function Wx(s,e){const t=Ti(s);return ee(t[e])}function Ao(s,e,t){Object.defineProperty(s,e,{get:()=>t})}function ks(s,e=Qw()){return(...t)=>s(e,...t)}function gA(){let s;return navigator.languages&&(s=Sx(sg,navigator.languages)),s}function qx(){const s=Bf(),e=s&&s.cookieKey||ox,t=new Date,n={expires:new Date(t.setDate(t.getDate()+365)),path:"/",sameSite:s&&s.cookieCrossOrigin?"none":"lax",secure:s&&s.cookieCrossOrigin||s&&s.cookieSecure};return s&&s.cookieDomain&&(n.domain=s.cookieDomain),KI(e,n)}function qf(s,e,t){if(e===!1||!e.useCookie)return;const n=s.value??void 0;if(n!=null){if(co.includes(n))return n;if(t)return s.value=t,t;s.value=void 0}}function Gx(s,e,t){t===!1||!t.useCookie||(s.value=e)}const pA={locale:"",stat:!1,reason:"unknown",from:"unknown"};function wA(s,e,t,n=""){const{strategy:r}=Xt().public.i18n,{ssg:i,callType:a,firstAccess:o,localeCookie:l}=t;if(r==="no_prefix"&&i==="ssg_ignore")return{locale:"",stat:!0,reason:"detect_ignore_on_ssg"};if(!o)return{locale:r==="no_prefix"?n:"",stat:!1,reason:"first_access_only"};const{redirectOn:c,alwaysRedirect:u,useCookie:h,fallbackLocale:f}=Bf(),m=ue(s)?s:s.path;if(r!=="no_prefix"){if(c==="root"){if(m!=="/")return{locale:"",stat:!1,reason:"not_redirect_on_root"}}else if(c==="no prefix"&&!u&&m.match(Em(co)))return{locale:"",stat:!1,reason:"not_redirect_on_no_prefix"}}let S="unknown",A,E;h&&(E=A=l,S="cookie"),E||(E=gA(),S="navigator_or_header");const T=E||f;!E&&f&&(S="fallback");const x=n||e;if(T&&(!h||u||!A)){if(r==="no_prefix")return{locale:T,stat:!0,from:S};if(a==="setup"&&T!==x)return{locale:T,stat:!0,from:S};if(u){const y=m==="/",p=c==="all",k=c==="no prefix"&&!m.match(Em(co));if(y||p||k)return{locale:T,stat:!0,from:S}}}return i==="ssg_setup"&&T?{locale:T,stat:!0,from:S}:(S==="navigator_or_header"||S==="cookie")&&T?{locale:T,stat:!0,from:S}:{locale:"",stat:!1,reason:"not_found_match"}}function Yx(){let s;return s=window.location.host,s}function Xx(s,e,t){let n=Yx()||"";if(n){let r;const i=s.filter(a=>{if(a&&a.domain){let o=a.domain;return mo(a.domain)&&(o=a.domain.replace(/(http|https):\/\//,"")),o===n}return!1});if(i.length===1)r=i[0];else if(i.length>1)if(e==="no_prefix")console.warn(mA("Multiple matching domains found! This is not supported for no_prefix strategy in combination with differentDomains!")),r=i[0];else{if(t){const a=$e(t)?t.path:ue(t)?t:"";if(a&&a!==""){const o=a.match(Em(i.map(l=>l.code)));o&&o.length>1&&(r=i.find(l=>l.code===o[1]))}}r||(r=i.find(a=>a.domainDefault))}if(r)return r.code;n=""}return n}function yA(s){var i,a;const t=Xt().public.i18n,n=sg.find(o=>o.code===s),r=((a=(i=t==null?void 0:t.locales)==null?void 0:i[s])==null?void 0:a.domain)??(n==null?void 0:n.domain);if(r){if(mo(r,{strict:!0}))return r;let o;return o=new URL(window.location.origin).protocol,o+"//"+r}console.warn(mA("Could not find domain name for locale "+s))}const Bf=(s=Xt().public.i18n)=>(s==null?void 0:s.detectBrowserLanguage)===!1?!1:s==null?void 0:s.detectBrowserLanguage;function Qx(){return ks(Ec)}function zx(s,{locales:e=[],localeCodes:t=[],baseUrl:n="",hooks:r={},context:i={}}={}){const a=mw(),o=s.install;return s.install=(l,...c)=>{const u=tT(c[0])?It({},c[0]):{inject:!0};u.inject==null&&(u.inject=!0);const h=u.__composerExtend;if(u.__composerExtend=A=>{const E=Ac(s);A.locales=Yt(()=>E.locales.value),A.localeCodes=Yt(()=>E.localeCodes.value),A.baseUrl=Yt(()=>E.baseUrl.value);let T;return Ze(h)&&(T=Reflect.apply(h,u,[A])),()=>{T&&T()}},s.mode==="legacy"){const A=u.__vueI18nExtend;u.__vueI18nExtend=E=>{hb(E,r.onExtendVueI18n);let T;return Ze(A)&&(T=Reflect.apply(A,u,[E])),()=>{T&&T()}}}c[0]=u,Reflect.apply(o,s,[l,...c]);const f=Ac(s);a.run(()=>{Zx(f,{locales:e,localeCodes:t,baseUrl:n,hooks:r,context:i}),s.mode==="legacy"&&oA(s.global)&&hb(s.global,r.onExtendVueI18n)});const m=l,S=s.mode==="composition"?m.config.globalProperties.$i18n:null;if(S&&eT(S,f,r.onExtendExportedGlobal),u.inject){const A=Qw(s);l.mixin({methods:{getRouteBaseName:ks(kc,A),resolveRoute:ks(rg,A),localePath:ks(Gw,A),localeRoute:ks(Yw,A),localeLocation:ks(_x,A),switchLocalePath:ks(Ec,A),localeHead:ks(uA,A)}})}if(m.unmount){const A=m.unmount;m.unmount=()=>{a.stop(),A()}}},a}function Zx(s,e){const{locales:t,localeCodes:n,baseUrl:r,context:i}=e,a=Ke(t),o=Ke(n),l=Ke("");s.locales=Yt(()=>a.value),s.localeCodes=Yt(()=>o.value),s.baseUrl=Yt(()=>l.value),hx?Sn(s.locale,()=>{l.value=ib(r,i)},{immediate:!0}):l.value=ib(r,i),e.hooks&&e.hooks.onExtendComposer&&e.hooks.onExtendComposer(s)}function vA(s,e,t){const n=[{locales:{get(){return s.locales.value}},localeCodes:{get(){return s.localeCodes.value}},baseUrl:{get(){return s.baseUrl.value}}}];t&&n.push(t(s));for(const r of n)for(const[i,a]of Object.entries(r))Object.defineProperty(e,i,a)}function eT(s,e,t){vA(e,s,t)}function hb(s,e){const t=Ac(s);vA(t,s,e)}function tT(s){return $e(s)&&("inject"in s||"__composerExtend"in s||"__vueI18nExtend"in s)}function sT(){const{routesNameSeparator:s,defaultLocaleRouteNameSuffix:e}=Xt().public.i18n,t=`(${co.join("|")})`,n=`(?:${s}${e})?`,r=new RegExp(`${s}${t}${n}$`,"i"),i=Em(co);return o=>{if($e(o)){if(o.name){const c=(ue(o.name)?o.name:o.name.toString()).match(r);if(c&&c.length>1)return c[1]}else if(o.path){const l=o.path.match(i);if(l&&l.length>1)return l[1]}}else if(ue(o)){const l=o.match(i);if(l&&l.length>1)return l[1]}return""}}const nT=_i({name:"i18n:plugin",parallel:ix,async setup(s){let e,t;const n=Hw(),{vueApp:r}=s,i=s,a={...i.$config.public.i18n};a.baseUrl=Jx();const o=Bf(),l=([e,t]=Ka(()=>lx(rx,et())),e=await e,t(),e);l.messages=l.messages||{},l.fallbackLocale=l.fallbackLocale??!1;const c=sT(),u=p=>p||l.locale||"en-US",h=qx();let f=ob(n,c,l.locale,u(a.defaultLocale),{ssg:a.strategy==="no_prefix"?"ssg_ignore":"normal",callType:"setup",firstAccess:!0,localeCookie:qf(h,o,a.defaultLocale)},a);l.messages=([e,t]=Ka(()=>cx(l.messages,Am,{localeCodes:co,initialLocale:f,lazy:a.lazy,defaultLocale:a.defaultLocale,fallbackLocale:l.fallbackLocale})),e=await e,t(),e),f=u(f);const m=GB({...l,locale:f});let S=!0;const A=p=>f!==p&&S;let E=!0;const T=()=>E;T()&&a.strategy==="no_prefix"&&s.hook("app:mounted",async()=>{const{locale:p,stat:k,reason:C,from:L}=o?wA(n,l.locale,{ssg:"ssg_setup",callType:"setup",firstAccess:!0,localeCookie:qf(h,o,a.defaultLocale)},f):pA;Lx(m,p),E=!1}),zx(m,{locales:a.configLocales,localeCodes:co,baseUrl:a.baseUrl,context:i,hooks:{onExtendComposer(p){p.strategy=a.strategy,p.localeProperties=Yt(()=>sg.find(k=>k.code===p.locale.value)||{code:p.locale.value}),p.setLocale=async k=>{const C=A(k);await ab(k,m,a,C)&&C&&(S=!1);const M=await i.runWithContext(()=>lb({route:{to:n},targetLocale:k,routeLocaleGetter:c}));await i.runWithContext(async()=>await ub({nuxtApp:i,i18n:m,redirectPath:M,locale:k,route:n},{enableNavigate:!0}))},p.loadLocaleMessages=async k=>{await km(k,Am,(L,M)=>dA(m,L,M))},p.differentDomains=a.differentDomains,p.defaultLocale=a.defaultLocale,p.getBrowserLocale=()=>gA(),p.getLocaleCookie=()=>qf(h,o,a.defaultLocale),p.setLocaleCookie=k=>Gx(h,k,o),p.onBeforeLanguageSwitch=(k,C,L,M)=>s.callHook("i18n:beforeLocaleSwitch",{oldLocale:k,newLocale:C,initialSetup:L,context:M}),p.onLanguageSwitched=(k,C)=>s.callHook("i18n:localeSwitched",{oldLocale:k,newLocale:C}),p.finalizePendingLocaleChange=async()=>{m.__pendingLocale&&(lA(m,m.__pendingLocale),m.__resolvePendingLocalePromise&&await m.__resolvePendingLocalePromise(),m.__pendingLocale=void 0)},p.waitForPendingLocaleChange=async()=>{m.__pendingLocale&&m.__pendingLocalePromise&&await m.__pendingLocalePromise}},onExtendExportedGlobal(p){return{strategy:{get(){return p.strategy}},localeProperties:{get(){return p.localeProperties.value}},setLocale:{get(){return async k=>Reflect.apply(p.setLocale,p,[k])}},differentDomains:{get(){return p.differentDomains}},defaultLocale:{get(){return p.defaultLocale}},getBrowserLocale:{get(){return()=>Reflect.apply(p.getBrowserLocale,p,[])}},getLocaleCookie:{get(){return()=>Reflect.apply(p.getLocaleCookie,p,[])}},setLocaleCookie:{get(){return k=>Reflect.apply(p.setLocaleCookie,p,[k])}},onBeforeLanguageSwitch:{get(){return(k,C,L,M)=>Reflect.apply(p.onBeforeLanguageSwitch,p,[k,C,L,M])}},onLanguageSwitched:{get(){return(k,C)=>Reflect.apply(p.onLanguageSwitched,p,[k,C])}},finalizePendingLocaleChange:{get(){return()=>Reflect.apply(p.finalizePendingLocaleChange,p,[])}},waitForPendingLocaleChange:{get(){return()=>Reflect.apply(p.waitForPendingLocaleChange,p,[])}}}},onExtendVueI18n(p){return{strategy:{get(){return p.strategy}},localeProperties:{get(){return p.localeProperties.value}},setLocale:{get(){return async k=>Reflect.apply(p.setLocale,p,[k])}},loadLocaleMessages:{get(){return async k=>Reflect.apply(p.loadLocaleMessages,p,[k])}},differentDomains:{get(){return p.differentDomains}},defaultLocale:{get(){return p.defaultLocale}},getBrowserLocale:{get(){return()=>Reflect.apply(p.getBrowserLocale,p,[])}},getLocaleCookie:{get(){return()=>Reflect.apply(p.getLocaleCookie,p,[])}},setLocaleCookie:{get(){return k=>Reflect.apply(p.setLocaleCookie,p,[k])}},onBeforeLanguageSwitch:{get(){return(k,C,L,M)=>Reflect.apply(p.onBeforeLanguageSwitch,p,[k,C,L,M])}},onLanguageSwitched:{get(){return(k,C)=>Reflect.apply(p.onLanguageSwitched,p,[k,C])}},finalizePendingLocaleChange:{get(){return()=>Reflect.apply(p.finalizePendingLocaleChange,p,[])}},waitForPendingLocaleChange:{get(){return()=>Reflect.apply(p.waitForPendingLocaleChange,p,[])}}}}}});const x={__composerExtend:p=>{const k=Ac(m);return p.strategy=k.strategy,p.localeProperties=Yt(()=>k.localeProperties.value),p.setLocale=k.setLocale,p.differentDomains=k.differentDomains,p.getBrowserLocale=k.getBrowserLocale,p.getLocaleCookie=k.getLocaleCookie,p.setLocaleCookie=k.setLocaleCookie,p.onBeforeLanguageSwitch=k.onBeforeLanguageSwitch,p.onLanguageSwitched=k.onLanguageSwitched,p.finalizePendingLocaleChange=k.finalizePendingLocaleChange,p.waitForPendingLocaleChange=k.waitForPendingLocaleChange,()=>{}}};if(r.use(m,x),Fx(i,m),a.experimental.switchLocalePathLinkSSR===!0){const p=Qx(),k=new RegExp([`<!--${sb}-\\[(\\w+)\\]-->`,".+?",`<!--/${sb}-->`].join(""),"g");s.hook("app:rendered",C=>{var L;((L=C.renderResult)==null?void 0:L.html)!=null&&(C.renderResult.html=C.renderResult.html.replaceAll(k,(M,F)=>M.replace(/href="([^"]+)"/,`href="${p(F??"")}"`)))})}let y=0;PI("locale-changing",async(p,k)=>{let C,L;const M=ob(p,c,l.locale,()=>ng(m)||u(a.defaultLocale),{ssg:T()&&a.strategy==="no_prefix"?"ssg_ignore":"normal",callType:"routing",firstAccess:y===0,localeCookie:qf(h,o,a.defaultLocale)},a),F=A(M);([C,L]=Ka(()=>ab(M,m,a,F)),C=await C,L(),C)&&F&&(S=!1);const ce=([C,L]=Ka(()=>i.runWithContext(()=>lb({route:{to:p,from:k},targetLocale:M,routeLocaleGetter:a.strategy==="no_prefix"?()=>M:c,calledWithRouting:!0}))),C=await C,L(),C);return y++,[C,L]=Ka(()=>i.runWithContext(async()=>ub({nuxtApp:i,i18n:m,redirectPath:ce,locale:M,route:p}))),C=await C,L(),C},{global:!0})}}),rT=_i({name:"nuxt:chunk-reload",setup(s){const e=If(),t=Xt(),n=new Set;e.beforeEach(()=>{n.clear()}),s.hook("app:chunkError",({error:i})=>{n.add(i)});function r(i){const o="href"in i&&i.href.startsWith("#")?t.app.baseURL+i.href:an(t.app.baseURL,i.fullPath);qI({path:o,persistState:!0})}s.hook("app:manifest:update",()=>{e.beforeResolve(r)}),e.onError((i,a)=>{n.has(i)&&r(a)})}}),iT=_i(s=>{let e;const t=Xt();async function n(){const r=await Xm();e&&clearTimeout(e),e=setTimeout(n,1e3*60*60);const i=await $fetch(an(t.app.cdnURL||t.app.baseURL,t.app.buildAssetsDir,"builds/latest.json"));i.id!==r.id&&s.hooks.callHook("app:manifest:update",i)}T1(()=>{e=setTimeout(n,1e3*60*60)})}),aT=[s_,r_,o_,l_,c_,nT,rT,iT],xf=(s,e)=>{const t=s.__vccOpts||s;for(const[n,r]of e)t[n]=r;return t},oT={},lT={id:"toast-simple",class:"fixed top-0 left-0 right-0 mx-auto mt-4 flex items-center p-4 space-x-4 w-full max-w-xs text-gray-900 rounded-lg divide-x divide-gray-200 shadow dark:text-gray-400 dark:divide-gray-700 space-x",role:"alert"},cT=le("svg",{"aria-hidden":"true",class:"w-5 h-5 text-blue-600 dark:text-blue-500",focusable:"false","data-prefix":"fas","data-icon":"paper-plane",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},[le("path",{fill:"currentColor",d:"M511.6 36.86l-64 415.1c-1.5 9.734-7.375 18.22-15.97 23.05c-4.844 2.719-10.27 4.097-15.68 4.097c-4.188 0-8.319-.8154-12.29-2.472l-122.6-51.1l-50.86 76.29C226.3 508.5 219.8 512 212.8 512C201.3 512 192 502.7 192 491.2v-96.18c0-7.115 2.372-14.03 6.742-19.64L416 96l-293.7 264.3L19.69 317.5C8.438 312.8 .8125 302.2 .0625 289.1s5.469-23.72 16.06-29.77l448-255.1c10.69-6.109 23.88-5.547 34 1.406S513.5 24.72 511.6 36.86z"})],-1),uT={class:"pl-4 text-sm font-normal"};function hT(s,e){return We(),Et("div",lT,[cT,le("div",uT,[xw(s.$slots,"default")])])}const fT=xf(oT,[["render",hT]]),dT={class:"relative bg-gray-700 rounded-lg shadow m-4"},mT={class:"flex justify-between items-center p-2 rounded-t border-b border-gray-600"},gT={class:"text-l font-semibold text-gray-200"},pT=le("svg",{"aria-hidden":"true",class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[le("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),wT=le("span",{class:"sr-only"},"Close modal",-1),yT=[pT,wT],vT={class:"p-3 space-y-6"},bT={class:"text-sm leading-relaxed text-gray-400"},ST={class:"flex justify-end items-center p-3 space-x-3 rounded-b border-t border-gray-600"},AT=Ii({__name:"MyModal",props:{title:String,description:String,modaltype:Number,btn1:String,btn2:String},setup(s){const e=s;return(t,n)=>(We(),Et("div",{id:"defaultModal",tabindex:"-1","aria-hidden":"true",class:"absolute w-full min-h-screen flex items-center justify-center backdrop-blur backdrop-filter z-50",onClick:n[3]||(n[3]=r=>t.$emit("someEvent",e.modaltype,2))},[le("div",dT,[le("div",mT,[le("h3",gT,Oe(e.title),1),le("button",{onClick:n[0]||(n[0]=r=>t.$emit("someEvent",e.modaltype,2)),type:"button",class:"text-gray-400 bg-transparent rounded-lg text-sm p-1.5 ml-auto inline-flex items-center hover:bg-gray-600 hover:text-white","data-modal-toggle":"defaultModal"},yT)]),le("div",vT,[le("p",bT,Oe(e.description),1)]),le("div",ST,[e.btn1.length>0?(We(),Et("button",{key:0,onClick:n[1]||(n[1]=r=>t.$emit("someEvent",e.modaltype,1)),"data-modal-toggle":"defaultModal",type:"button",class:"text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center"},Oe(e.btn1),1)):fn("",!0),e.btn2?(We(),Et("button",{key:1,onClick:n[2]||(n[2]=r=>t.$emit("someEvent",e.modaltype,2)),"data-modal-toggle":"defaultModal",type:"button",class:"hover:bg-gray-600 focus:ring-4 focus:outline-none focus:ring-gray-600 rounded-lg border border-gray-500 text-sm font-medium px-5 py-2.5 hover:text-white focus:z-10 bg-gray-700 text-gray-300"},Oe(e.btn2),1)):fn("",!0)])])]))}}),kT=s=>Object.fromEntries(Object.entries(s).filter(([,e])=>e!==void 0)),zw=(s,e)=>(t,n)=>(yI(()=>s({...kT(t),...n.attrs},n)),()=>{var r,i;return e?(i=(r=n.slots).default)==null?void 0:i.call(r):null}),bA={accesskey:String,autocapitalize:String,autofocus:{type:Boolean,default:void 0},class:[String,Object,Array],contenteditable:{type:Boolean,default:void 0},contextmenu:String,dir:String,draggable:{type:Boolean,default:void 0},enterkeyhint:String,exportparts:String,hidden:{type:Boolean,default:void 0},id:String,inputmode:String,is:String,itemid:String,itemprop:String,itemref:String,itemscope:String,itemtype:String,lang:String,nonce:String,part:String,slot:String,spellcheck:{type:Boolean,default:void 0},style:String,tabindex:String,title:String,translate:String},ET=Ii({name:"Link",inheritAttrs:!1,props:{...bA,as:String,crossorigin:String,disabled:Boolean,fetchpriority:String,href:String,hreflang:String,imagesizes:String,imagesrcset:String,integrity:String,media:String,prefetch:{type:Boolean,default:void 0},referrerpolicy:String,rel:String,sizes:String,title:String,type:String,methods:String,target:String,body:Boolean,renderPriority:[String,Number]},setup:zw(s=>({link:[s]}))}),CT=Ii({name:"Title",inheritAttrs:!1,setup:zw((s,{slots:e})=>{var t,n,r;return{title:((r=(n=(t=e.default)==null?void 0:t.call(e))==null?void 0:n[0])==null?void 0:r.children)||null}})}),NT=Ii({name:"Meta",inheritAttrs:!1,props:{...bA,charset:String,content:String,httpEquiv:String,name:String,body:Boolean,renderPriority:[String,Number]},setup:zw(s=>{const e={...s};return e.httpEquiv&&(e["http-equiv"]=e.httpEquiv,delete e.httpEquiv),{meta:[e]}})}),IT={__name:"MyBA",props:{clickable:{default:!0}},setup(s){return(e,t)=>(We(),Et("button",{class:Pt(["rounded-md border-solid border-2 border-black/25 px-3 py-2 text-sm font-medium text-black flex-1 max-w-60 m-1",s.clickable?"hover:border-black focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75":"text-black/50"]),type:"button"},[xw(e.$slots,"default")],2))}},_T=IT,BT={};function xT(s,e){return We(),Et("button",{id:"fileSelect",onDragover:e[0]||(e[0]=Hi(()=>{},["prevent"])),class:"rounded-md border-black/25 border-2 border-dashed px-3 py-2 text-sm font-medium text-black hover:border-black focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 flex-1 max-w-60 m-1"},[xw(s.$slots,"default")],32)}const TT=xf(BT,[["render",xT]]),RT={},OT={class:"ml-2 inline cursor-help",xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 1 24 24"},VT=le("path",{fill:"currentColor",d:"M3 5.75A.75.75 0 0 1 3.75 5c2.663 0 5.258-.943 7.8-2.85a.75.75 0 0 1 .9 0C14.992 4.057 17.587 5 20.25 5a.75.75 0 0 1 .75.75V11c0 5.001-2.958 8.676-8.725 10.948a.75.75 0 0 1-.55 0C5.958 19.676 3 16 3 11zm1.5.728V11c0 4.256 2.453 7.379 7.5 9.442c5.047-2.063 7.5-5.186 7.5-9.442V6.478c-2.577-.152-5.08-1.09-7.5-2.8c-2.42 1.71-4.923 2.648-7.5 2.8M13 16a1 1 0 1 1-2 0a1 1 0 0 1 2 0m-2.25-6.25a1.25 1.25 0 1 1 2.5 0c0 .447-.248.737-.78 1.268l-.047.047c-.47.468-1.173 1.167-1.173 2.285a.75.75 0 0 0 1.5 0c0-.45.249-.74.78-1.27l.049-.05c.47-.467 1.171-1.165 1.171-2.28a2.75 2.75 0 1 0-5.5 0a.75.75 0 0 0 1.5 0"},null,-1),PT=[VT];function LT(s,e){return We(),Et("svg",OT,PT)}const DT=xf(RT,[["render",LT]]),UT={},MT={class:"inline",xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 4 72 72"},HT=LE('<path fill-rule="evenodd" d="M20.4 32.431A16 16 0 0 0 20 36c0 8.837 7.163 16 16 16c1.227 0 2.421-.138 3.569-.4c-3.336-2.435-6.844-5.437-10.288-8.881S22.835 35.767 20.4 32.43m26.217 15.54c-3.326-.69-8.54-4.08-13.523-9.064c-4.984-4.983-8.375-10.197-9.064-13.523A15.96 15.96 0 0 1 36 20c8.837 0 16 7.163 16 16c0 4.763-2.08 9.039-5.383 11.97" clip-rule="evenodd"></path><circle cx="36" cy="36" r="20" fill="#d22f27" stroke="#d22f27" stroke-width="2"></circle><path fill="#d22f27" fill-rule="evenodd" d="M58.88 58.88c-3.949 3.95-17.394-3.093-30.03-15.73C16.213 30.514 9.17 17.07 13.12 13.12c1.848-1.848 5.775-1.29 10.727 1.124c3.405 1.66 7.312 1.98 11.096 1.784Q35.468 16 36 16c11.046 0 20 8.954 20 20q0 .532-.028 1.057c-.197 3.784.124 7.69 1.784 11.096c2.413 4.952 2.972 8.88 1.124 10.727" clip-rule="evenodd"></path><path d="M36 51c8.284 0 15-6.716 15-15s-6.716-15-15-15s-15 6.716-15 15s6.716 15 15 15"></path><path fill="#d22f27" fill-rule="evenodd" d="M18.203 14.039c-.365-.365-.858-.59-1.372-.539c-.967.098-1.756.425-2.331 1c-3.71 3.71 2.907 16.345 14.781 28.219S53.79 61.21 57.5 57.5c.575-.575.902-1.364 1-2.331c.052-.514-.174-1.007-.54-1.372l-6.649-6.65c-.464-.464-1.347-.111-1.811.353c-2.157 2.157-9.503-1.69-16.406-8.594C26.19 32.003 22.343 24.657 24.5 22.5c.464-.464.817-1.347.353-1.811z" clip-rule="evenodd"></path><path fill="#e27022" stroke="#d22f27" stroke-width="0.5" d="M14.71 14.71c.23-.23.842-.564 2.352-.39c1.48.17 3.442.798 5.799 1.947c3.899 1.9 8.247 2.213 12.199 2.007q.466-.024.94-.024c9.803 0 17.75 7.947 17.75 17.75q0 .475-.024.94c-.206 3.952.107 8.3 2.007 12.2c1.15 2.356 1.778 4.318 1.948 5.797c.173 1.51-.162 2.123-.392 2.352c-.246.247-.936.61-2.656.352c-1.668-.251-3.862-1.035-6.466-2.4c-5.183-2.714-11.523-7.479-17.726-13.682S19.473 29.016 16.758 23.833c-1.364-2.604-2.148-4.798-2.398-6.466c-.259-1.72.104-2.41.35-2.656Z"></path><path fill-rule="evenodd" d="M33.094 38.906c4.11 4.111 8.378 7.138 11.614 8.46c1.169.477 2.49.13 3.324-.819A15.94 15.94 0 0 0 52 36c0-8.837-7.163-16-16-16a15.94 15.94 0 0 0-10.547 3.968c-.95.834-1.296 2.155-.818 3.325c1.32 3.235 4.348 7.502 8.459 11.613" clip-rule="evenodd"></path><path d="m28.85 43.15l-.707.707zm30.03 15.73l-.707-.707zm-1.124-10.727l.899-.438zm-29.613-4.296c6.37 6.37 12.97 11.358 18.516 14.264c2.768 1.45 5.325 2.408 7.492 2.733c2.142.322 4.12.05 5.436-1.267l-1.414-1.414c-.657.658-1.842.986-3.725.704c-1.86-.28-4.194-1.131-6.861-2.528c-5.323-2.788-11.763-7.639-18.03-13.906zm-15.73-31.444c-1.318 1.316-1.59 3.294-1.267 5.436c.325 2.167 1.284 4.724 2.733 7.492c2.906 5.546 7.894 12.147 14.264 18.516l1.414-1.414c-6.267-6.267-11.118-12.707-13.906-18.03c-1.397-2.667-2.248-5.001-2.528-6.86c-.283-1.885.046-3.069.704-3.726zm11.872.932c-2.529-1.232-4.863-2.026-6.852-2.255c-1.973-.226-3.788.09-5.02 1.322l1.414 1.415c.615-.615 1.688-.944 3.378-.75c1.676.193 3.78.885 6.204 2.066zM36 15q-.558 0-1.11.029l.105 1.997Q35.495 17 36 17zm21 21c0-11.598-9.402-21-21-21v2c10.493 0 19 8.507 19 19zm-.029 1.11q.03-.552.029-1.11h-2q0 .505-.026 1.005zm2.617 22.478c1.232-1.233 1.548-3.047 1.322-5.022c-.229-1.988-1.023-4.322-2.255-6.85l-1.798.876c1.181 2.422 1.873 4.527 2.066 6.203c.194 1.69-.135 2.763-.75 3.378zm-4.614-22.583c-.201 3.858.116 7.962 1.883 11.587l1.798-.877c-1.553-3.186-1.877-6.897-1.684-10.606zM23.409 15.143c3.624 1.767 7.728 2.084 11.586 1.883l-.104-1.997c-3.709.193-7.42-.131-10.606-1.684z"></path><path fill="none" stroke="#000" stroke-linecap="round" stroke-width="2" d="M16.224 33A20 20 0 0 0 16 36c0 11.046 8.954 20 20 20c1.194 0 2.364-.105 3.5-.305"></path><path fill="none" stroke="#e27022" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M36 52c-8.837 0-16-7.163-16-16"></path>',10),$T=[HT];function FT(s,e){return We(),Et("svg",MT,$T)}const KT=xf(UT,[["render",FT]]),jT={},JT={class:"transition-all duration-700 ease-in-out",xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 24 24"},WT=le("path",{fill:"currentColor","fill-rule":"evenodd",d:"m4 15l8-8l8 8l-2 2l-6-6l-6 6z"},null,-1),qT=[WT];function GT(s,e){return We(),Et("svg",JT,qT)}const YT=xf(jT,[["render",GT]]);/*!
 * MIT License
 * 
 * Copyright (c) 2017-2022 Peculiar Ventures, LLC
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const XT="[object ArrayBuffer]";class ve{static isArrayBuffer(e){return Object.prototype.toString.call(e)===XT}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if(e.constructor===t)return e;if(this.isArrayBuffer(e))return new t(e);if(this.isArrayBufferView(e))return new t(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,t){const n=ve.toUint8Array(e),r=ve.toUint8Array(t);if(n.length!==r.byteLength)return!1;for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}static concat(...e){let t;Array.isArray(e[0])&&!(e[1]instanceof Function)||Array.isArray(e[0])&&e[1]instanceof Function?t=e[0]:e[e.length-1]instanceof Function?t=e.slice(0,e.length-1):t=e;let n=0;for(const a of t)n+=a.byteLength;const r=new Uint8Array(n);let i=0;for(const a of t){const o=this.toUint8Array(a);r.set(o,i),i+=o.length}return e[e.length-1]instanceof Function?this.toView(r,e[e.length-1]):r.buffer}}const Eg="string",QT=/^[0-9a-f]+$/i,zT=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,ZT=/^[a-zA-Z0-9-_]+$/;class fb{static fromString(e){const t=unescape(encodeURIComponent(e)),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer}static toString(e){const t=ve.toUint8Array(e);let n="";for(let i=0;i<t.length;i++)n+=String.fromCharCode(t[i]);return decodeURIComponent(escape(n))}}class un{static toString(e,t=!1){const n=ve.toArrayBuffer(e),r=new DataView(n);let i="";for(let a=0;a<n.byteLength;a+=2){const o=r.getUint16(a,t);i+=String.fromCharCode(o)}return i}static fromString(e,t=!1){const n=new ArrayBuffer(e.length*2),r=new DataView(n);for(let i=0;i<e.length;i++)r.setUint16(i*2,e.charCodeAt(i),t);return n}}class Ae{static isHex(e){return typeof e===Eg&&QT.test(e)}static isBase64(e){return typeof e===Eg&&zT.test(e)}static isBase64Url(e){return typeof e===Eg&&ZT.test(e)}static ToString(e,t="utf8"){const n=ve.toUint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(n);case"binary":return this.ToBinary(n);case"hex":return this.ToHex(n);case"base64":return this.ToBase64(n);case"base64url":return this.ToBase64Url(n);case"utf16le":return un.toString(n,!0);case"utf16":case"utf16be":return un.toString(n);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromString(e,t="utf8"){if(!e)return new ArrayBuffer(0);switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return un.fromString(e,!0);case"utf16":case"utf16be":return un.fromString(e);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToBase64(e){const t=ve.toUint8Array(e);if(typeof btoa<"u"){const n=this.ToString(t,"binary");return btoa(n)}else return Buffer.from(t).toString("base64")}static FromBase64(e){const t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!Ae.isBase64(t))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(t)):new Uint8Array(Buffer.from(t,"base64")).buffer}static FromBase64Url(e){const t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!Ae.isBase64Url(t))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(t.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,t=Ae.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.FromBinary(e);case"utf8":return fb.fromString(e);case"utf16":case"utf16be":return un.fromString(e);case"utf16le":case"usc2":return un.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToUtf8String(e,t=Ae.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.ToBinary(e);case"utf8":return fb.toString(e);case"utf16":case"utf16be":return un.toString(e);case"utf16le":case"usc2":return un.toString(e,!0);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromBinary(e){const t=e.length,n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e.charCodeAt(r);return n.buffer}static ToBinary(e){const t=ve.toUint8Array(e);let n="";for(let r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return n}static ToHex(e){const t=ve.toUint8Array(e);let n="";const r=t.length;for(let i=0;i<r;i++){const a=t[i];a<16&&(n+="0"),n+=a.toString(16)}return n}static FromHex(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!Ae.isHex(t))throw new TypeError("Argument 'hexString' is not HEX encoded");t.length%2&&(t=`0${t}`);const n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r=r+2){const i=t.slice(r,r+2);n[r/2]=parseInt(i,16)}return n.buffer}static ToUtf16String(e,t=!1){return un.toString(e,t)}static FromUtf16String(e,t=!1){return un.fromString(e,t)}static Base64Padding(e){const t=4-e.length%4;if(t<4)for(let n=0;n<t;n++)e+="=";return e}static formatString(e){return(e==null?void 0:e.replace(/[\n\r\t ]/g,""))||""}}Ae.DEFAULT_UTF8_ENCODING="utf8";/*!
 Copyright (c) Peculiar Ventures, LLC
*/function d(s,e,t){var n;return s instanceof Object&&(n=s[e])!==null&&n!==void 0?n:t}function db(s,e=0,t=s.byteLength-e,n=!1){let r="";for(const i of new Uint8Array(s,e,t)){const a=i.toString(16).toUpperCase();a.length===1&&(r+="0"),r+=a,n&&(r+=" ")}return r.trim()}function uo(s,e){let t=0;if(s.length===1)return s[0];for(let n=s.length-1;n>=0;n--)t+=s[s.length-1-n]*Math.pow(2,e*n);return t}function ar(s,e,t=-1){const n=t;let r=s,i=0,a=Math.pow(2,e);for(let o=1;o<8;o++){if(s<a){let l;if(n<0)l=new ArrayBuffer(o),i=o;else{if(n<o)return new ArrayBuffer(0);l=new ArrayBuffer(n),i=n}const c=new Uint8Array(l);for(let u=o-1;u>=0;u--){const h=Math.pow(2,u*e);c[i-u-1]=Math.floor(r/h),r-=c[i-u-1]*h}return l}a*=Math.pow(2,e)}return new ArrayBuffer(0)}function lc(...s){let e=0,t=0;for(const i of s)e+=i.byteLength;const n=new ArrayBuffer(e),r=new Uint8Array(n);for(const i of s)r.set(new Uint8Array(i),t),t+=i.byteLength;return n}function Lp(...s){let e=0,t=0;for(const i of s)e+=i.length;const n=new ArrayBuffer(e),r=new Uint8Array(n);for(const i of s)r.set(i,t),t+=i.length;return r}function SA(){const s=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const o=s[0]===255&&s[1]&128,l=s[0]===0&&(s[1]&128)===0;(o||l)&&this.warnings.push("Needlessly long format")}const e=new ArrayBuffer(this.valueHex.byteLength),t=new Uint8Array(e);for(let o=0;o<this.valueHex.byteLength;o++)t[o]=0;t[0]=s[0]&128;const n=uo(t,8),r=new ArrayBuffer(this.valueHex.byteLength),i=new Uint8Array(r);for(let o=0;o<this.valueHex.byteLength;o++)i[o]=s[o];return i[0]&=127,uo(i,8)-n}function eR(s){const e=s<0?s*-1:s;let t=128;for(let n=1;n<8;n++){if(e<=t){if(s<0){const a=t-e,o=ar(a,8,n),l=new Uint8Array(o);return l[0]|=128,o}let r=ar(e,8,n),i=new Uint8Array(r);if(i[0]&128){const a=r.slice(0),o=new Uint8Array(a);r=new ArrayBuffer(r.byteLength+1),i=new Uint8Array(r);for(let l=0;l<a.byteLength;l++)i[l+1]=o[l];i[0]=0}return r}t*=Math.pow(2,8)}return new ArrayBuffer(0)}function Cc(s,e){if(s.byteLength!==e.byteLength)return!1;const t=new Uint8Array(s),n=new Uint8Array(e);for(let r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}function Es(s,e){const t=s.toString(10);if(e<t.length)return"";const n=e-t.length,r=new Array(n);for(let a=0;a<n;a++)r[a]="0";return r.join("").concat(t)}const AA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",kA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function Dp(s,e=!1,t=!1,n=!1){let r=0,i=0,a=0,o="";const l=e?kA:AA;if(n){let c=0;for(let u=0;u<s.length;u++)if(s.charCodeAt(u)!==0){c=u;break}s=s.slice(c)}for(;r<s.length;){const c=s.charCodeAt(r++);r>=s.length&&(i=1);const u=s.charCodeAt(r++);r>=s.length&&(a=1);const h=s.charCodeAt(r++),f=c>>2,m=(c&3)<<4|u>>4;let S=(u&15)<<2|h>>6,A=h&63;i===1?S=A=64:a===1&&(A=64),t?S===64?o+=`${l.charAt(f)}${l.charAt(m)}`:A===64?o+=`${l.charAt(f)}${l.charAt(m)}${l.charAt(S)}`:o+=`${l.charAt(f)}${l.charAt(m)}${l.charAt(S)}${l.charAt(A)}`:o+=`${l.charAt(f)}${l.charAt(m)}${l.charAt(S)}${l.charAt(A)}`}return o}function hf(s,e=!1,t=!1){const n=e?kA:AA;function r(l){for(let c=0;c<64;c++)if(n.charAt(c)===l)return c;return 64}function i(l){return l===64?0:l}let a=0,o="";for(;a<s.length;){const l=r(s.charAt(a++)),c=a>=s.length?0:r(s.charAt(a++)),u=a>=s.length?0:r(s.charAt(a++)),h=a>=s.length?0:r(s.charAt(a++)),f=i(l)<<2|i(c)>>4,m=(i(c)&15)<<4|i(u)>>2,S=(i(u)&3)<<6|i(h);o+=String.fromCharCode(f),u!==64&&(o+=String.fromCharCode(m)),h!==64&&(o+=String.fromCharCode(S))}if(t){const l=o.length;let c=-1;for(let u=l-1;u>=0;u--)if(o.charCodeAt(u)!==0){c=u;break}c!==-1?o=o.slice(0,c+1):o=""}return o}function Cm(s){let e="";const t=new Uint8Array(s);for(const n of t)e+=String.fromCharCode(n);return e}function Nc(s){const e=s.length,t=new ArrayBuffer(e),n=new Uint8Array(t);for(let r=0;r<e;r++)n[r]=s.charCodeAt(r);return t}const tR=Math.log(2);function sR(s){const e=Math.log(s)/tR,t=Math.floor(e),n=Math.round(e);return t===n?t:n}function X(s,e){for(const t of e)delete s[t]}/*!
 * Copyright (c) 2014, GMO GlobalSign
 * Copyright (c) 2015-2022, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */function Nm(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function Zw(s){let e=0,t=0;for(let r=0;r<s.length;r++){const i=s[r];e+=i.byteLength}const n=new Uint8Array(e);for(let r=0;r<s.length;r++){const i=s[r];n.set(new Uint8Array(i),t),t+=i.byteLength}return n.buffer}function lr(s,e,t,n){return e instanceof Uint8Array?e.byteLength?t<0?(s.error="Wrong parameter: inputOffset less than zero",!1):n<0?(s.error="Wrong parameter: inputLength less than zero",!1):e.byteLength-t-n<0?(s.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(s.error="Wrong parameter: inputBuffer has zero length",!1):(s.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class ey{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return Zw(this.items)}}const Lc=[new Uint8Array([1])],mb="0123456789",Cg="name",gb="valueHexView",nR="isHexOnly",rR="idBlock",iR="tagClass",aR="tagNumber",oR="isConstructed",lR="fromBER",cR="toBER",uR="local",ds="",on=new ArrayBuffer(0),ig=new Uint8Array(0),ff="EndOfContent",EA="OCTET STRING",CA="BIT STRING";function cr(s){var e;return e=class extends s{constructor(...n){var r;super(...n);const i=n[0]||{};this.isHexOnly=(r=i.isHexOnly)!==null&&r!==void 0?r:!1,this.valueHexView=i.valueHex?ve.toUint8Array(i.valueHex):ig}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(n){this.valueHexView=new Uint8Array(n)}fromBER(n,r,i){const a=n instanceof ArrayBuffer?new Uint8Array(n):n;if(!lr(this,a,r,i))return-1;const o=r+i;return this.valueHexView=a.subarray(r,o),this.valueHexView.length?(this.blockLength=i,o):(this.warnings.push("Zero buffer length"),r)}toBER(n=!1){return this.isHexOnly?n?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",on)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:Ae.ToHex(this.valueHexView)}}},e.NAME="hexBlock",e}class go{constructor({blockLength:e=0,error:t=ds,warnings:n=[],valueBeforeDecode:r=ig}={}){this.blockLength=e,this.error=t,this.warnings=n,this.valueBeforeDecodeView=ve.toUint8Array(r)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:Ae.ToHex(this.valueBeforeDecodeView)}}}go.NAME="baseBlock";class ps extends go{fromBER(e,t,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}ps.NAME="valueBlock";class NA extends cr(go){constructor({idBlock:e={}}={}){var t,n,r,i;super(),e?(this.isHexOnly=(t=e.isHexOnly)!==null&&t!==void 0?t:!1,this.valueHexView=e.valueHex?ve.toUint8Array(e.valueHex):ig,this.tagClass=(n=e.tagClass)!==null&&n!==void 0?n:-1,this.tagNumber=(r=e.tagNumber)!==null&&r!==void 0?r:-1,this.isConstructed=(i=e.isConstructed)!==null&&i!==void 0?i:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",on}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){const r=new Uint8Array(1);if(!e){let i=this.tagNumber;i&=31,t|=i,r[0]=t}return r.buffer}if(!this.isHexOnly){const r=ar(this.tagNumber,7),i=new Uint8Array(r),a=r.byteLength,o=new Uint8Array(a+1);if(o[0]=t|31,!e){for(let l=0;l<a-1;l++)o[l+1]=i[l]|128;o[a]=i[a-1]}return o.buffer}const n=new Uint8Array(this.valueHexView.byteLength+1);if(n[0]=t|31,!e){const r=this.valueHexView;for(let i=0;i<r.length-1;i++)n[i+1]=r[i]|128;n[this.valueHexView.byteLength]=r[r.length-1]}return n.buffer}fromBER(e,t,n){const r=ve.toUint8Array(e);if(!lr(this,r,t,n))return-1;const i=r.subarray(t,t+n);if(i.length===0)return this.error="Zero buffer length",-1;switch(i[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(i[0]&32)===32,this.isHexOnly=!1;const o=i[0]&31;if(o!==31)this.tagNumber=o,this.blockLength=1;else{let l=1,c=this.valueHexView=new Uint8Array(255),u=255;for(;i[l]&128;){if(c[l-1]=i[l]&127,l++,l>=i.length)return this.error="End of input reached before message was fully decoded",-1;if(l===u){u+=255;const f=new Uint8Array(u);for(let m=0;m<c.length;m++)f[m]=c[m];c=this.valueHexView=new Uint8Array(u)}}this.blockLength=l+1,c[l-1]=i[l]&127;const h=new Uint8Array(l);for(let f=0;f<l;f++)h[f]=c[f];c=this.valueHexView=new Uint8Array(l),c.set(h),this.blockLength<=9?this.tagNumber=uo(c,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}NA.NAME="identificationBlock";class IA extends go{constructor({lenBlock:e={}}={}){var t,n,r;super(),this.isIndefiniteForm=(t=e.isIndefiniteForm)!==null&&t!==void 0?t:!1,this.longFormUsed=(n=e.longFormUsed)!==null&&n!==void 0?n:!1,this.length=(r=e.length)!==null&&r!==void 0?r:0}fromBER(e,t,n){const r=ve.toUint8Array(e);if(!lr(this,r,t,n))return-1;const i=r.subarray(t,t+n);if(i.length===0)return this.error="Zero buffer length",-1;if(i[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=i[0]===128,this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(i[0]&128),this.longFormUsed===!1)return this.length=i[0],this.blockLength=1,t+this.blockLength;const a=i[0]&127;if(a>8)return this.error="Too big integer",-1;if(a+1>i.length)return this.error="End of input reached before message was fully decoded",-1;const o=t+1,l=r.subarray(o,o+a);return l[a-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=uo(l,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=a+1,t+this.blockLength}toBER(e=!1){let t,n;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(t),n[0]=128),t;if(this.longFormUsed){const r=ar(this.length,8);if(r.byteLength>127)return this.error="Too big length",on;if(t=new ArrayBuffer(r.byteLength+1),e)return t;const i=new Uint8Array(r);n=new Uint8Array(t),n[0]=r.byteLength|128;for(let a=0;a<r.byteLength;a++)n[a+1]=i[a];return t}return t=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(t),n[0]=this.length),t}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}IA.NAME="lengthBlock";const me={};class os extends go{constructor({name:e=ds,optional:t=!1,primitiveSchema:n,...r}={},i){super(r),this.name=e,this.optional=t,n&&(this.primitiveSchema=n),this.idBlock=new NA(r),this.lenBlock=new IA(r),this.valueBlock=i?new i(r):new ps(r)}fromBER(e,t,n){const r=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}toBER(e,t){const n=t||new ey;t||_A(this);const r=this.idBlock.toBER(e);if(n.write(r),this.lenBlock.isIndefiniteForm)n.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,n),n.write(new ArrayBuffer(2));else{const i=this.valueBlock.toBER(e);this.lenBlock.length=i.byteLength;const a=this.lenBlock.toBER(e);n.write(a),n.write(i)}return t?on:n.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return e==="ascii"?this.onAsciiEncoding():Ae.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${Ae.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;const t=this.toBER(),n=e.toBER();return Cc(t,n)}}os.NAME="BaseBlock";function _A(s){if(s instanceof me.Constructed)for(const e of s.valueBlock.value)_A(e)&&(s.lenBlock.isIndefiniteForm=!0);return!!s.lenBlock.isIndefiniteForm}class BA extends os{constructor({value:e=ds,...t}={},n){super(t,n),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,t,n){const r=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}BA.NAME="BaseStringBlock";class xA extends cr(ps){constructor({isHexOnly:e=!0,...t}={}){super(t),this.isHexOnly=e}}xA.NAME="PrimitiveValueBlock";var TA;class ke extends os{constructor(e={}){super(e,xA),this.idBlock.isConstructed=!1}}TA=ke;me.Primitive=TA;ke.NAME="PRIMITIVE";function hR(s,e){if(s instanceof e)return s;const t=new e;return t.idBlock=s.idBlock,t.lenBlock=s.lenBlock,t.warnings=s.warnings,t.valueBeforeDecodeView=s.valueBeforeDecodeView,t}function Tf(s,e=0,t=s.length){const n=e;let r=new os({},ps);const i=new go;if(!lr(i,s,e,t))return r.error=i.error,{offset:-1,result:r};if(!s.subarray(e,e+t).length)return r.error="Zero buffer length",{offset:-1,result:r};let o=r.idBlock.fromBER(s,e,t);if(r.idBlock.warnings.length&&r.warnings.concat(r.idBlock.warnings),o===-1)return r.error=r.idBlock.error,{offset:-1,result:r};if(e=o,t-=r.idBlock.blockLength,o=r.lenBlock.fromBER(s,e,t),r.lenBlock.warnings.length&&r.warnings.concat(r.lenBlock.warnings),o===-1)return r.error=r.lenBlock.error,{offset:-1,result:r};if(e=o,t-=r.lenBlock.blockLength,!r.idBlock.isConstructed&&r.lenBlock.isIndefiniteForm)return r.error="Indefinite length form used for primitive encoding form",{offset:-1,result:r};let l=os;switch(r.idBlock.tagClass){case 1:if(r.idBlock.tagNumber>=37&&r.idBlock.isHexOnly===!1)return r.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:r};switch(r.idBlock.tagNumber){case 0:if(r.idBlock.isConstructed&&r.lenBlock.length>0)return r.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:r};l=me.EndOfContent;break;case 1:l=me.Boolean;break;case 2:l=me.Integer;break;case 3:l=me.BitString;break;case 4:l=me.OctetString;break;case 5:l=me.Null;break;case 6:l=me.ObjectIdentifier;break;case 10:l=me.Enumerated;break;case 12:l=me.Utf8String;break;case 13:l=me.RelativeObjectIdentifier;break;case 14:l=me.TIME;break;case 15:return r.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:r};case 16:l=me.Sequence;break;case 17:l=me.Set;break;case 18:l=me.NumericString;break;case 19:l=me.PrintableString;break;case 20:l=me.TeletexString;break;case 21:l=me.VideotexString;break;case 22:l=me.IA5String;break;case 23:l=me.UTCTime;break;case 24:l=me.GeneralizedTime;break;case 25:l=me.GraphicString;break;case 26:l=me.VisibleString;break;case 27:l=me.GeneralString;break;case 28:l=me.UniversalString;break;case 29:l=me.CharacterString;break;case 30:l=me.BmpString;break;case 31:l=me.DATE;break;case 32:l=me.TimeOfDay;break;case 33:l=me.DateTime;break;case 34:l=me.Duration;break;default:{const c=r.idBlock.isConstructed?new me.Constructed:new me.Primitive;c.idBlock=r.idBlock,c.lenBlock=r.lenBlock,c.warnings=r.warnings,r=c}}break;case 2:case 3:case 4:default:l=r.idBlock.isConstructed?me.Constructed:me.Primitive}return r=hR(r,l),o=r.fromBER(s,e,r.lenBlock.isIndefiniteForm?t:r.lenBlock.length),r.valueBeforeDecodeView=s.subarray(n,n+r.blockLength),{offset:o,result:r}}function St(s){if(!s.byteLength){const e=new os({},ps);return e.error="Input buffer has zero length",{offset:-1,result:e}}return Tf(ve.toUint8Array(s).slice(),0,s.byteLength)}function fR(s,e){return s?1:e}class pi extends ps{constructor({value:e=[],isIndefiniteForm:t=!1,...n}={}){super(n),this.value=e,this.isIndefiniteForm=t}fromBER(e,t,n){const r=ve.toUint8Array(e);if(!lr(this,r,t,n))return-1;if(this.valueBeforeDecodeView=r.subarray(t,t+n),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),t;let i=t;for(;fR(this.isIndefiniteForm,n)>0;){const a=Tf(r,i,n);if(a.offset===-1)return this.error=a.result.error,this.warnings.concat(a.result.warnings),-1;if(i=a.offset,this.blockLength+=a.result.blockLength,n-=a.result.blockLength,this.value.push(a.result),this.isIndefiniteForm&&a.result.constructor.NAME===ff)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===ff?this.value.pop():this.warnings.push("No EndOfContent block encoded")),i}toBER(e,t){const n=t||new ey;for(let r=0;r<this.value.length;r++)this.value[r].toBER(e,n);return t?on:n.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const t of this.value)e.value.push(t.toJSON());return e}}pi.NAME="ConstructedValueBlock";var RA;class V extends os{constructor(e={}){super(e,pi),this.idBlock.isConstructed=!0}fromBER(e,t,n){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const r=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){const e=[];for(const n of this.valueBlock.value)e.push(n.toString("ascii").split(`
`).map(r=>`  ${r}`).join(`
`));const t=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${t} :
${e.join(`
`)}`:`${t} :`}}RA=V;me.Constructed=RA;V.NAME="CONSTRUCTED";class OA extends ps{fromBER(e,t,n){return t}toBER(e){return on}}OA.override="EndOfContentValueBlock";var VA;class PA extends os{constructor(e={}){super(e,OA),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}VA=PA;me.EndOfContent=VA;PA.NAME=ff;var LA;class pt extends os{constructor(e={}){super(e,ps),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,t,n){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=n,t+n>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+n}toBER(e,t){const n=new ArrayBuffer(2);if(!e){const r=new Uint8Array(n);r[0]=5,r[1]=0}return t&&t.write(n),n}onAsciiEncoding(){return`${this.constructor.NAME}`}}LA=pt;me.Null=LA;pt.NAME="NULL";class DA extends cr(ps){constructor({value:e,...t}={}){super(t),t.valueHex?this.valueHexView=ve.toUint8Array(t.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,t,n){const r=ve.toUint8Array(e);return lr(this,r,t,n)?(this.valueHexView=r.subarray(t,t+n),n>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,SA.call(this),this.blockLength=n,t+n):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}DA.NAME="BooleanValueBlock";var UA;let Cn=class extends os{constructor(e={}){super(e,DA),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};UA=Cn;me.Boolean=UA;Cn.NAME="BOOLEAN";class MA extends cr(pi){constructor({isConstructed:e=!1,...t}={}){super(t),this.isConstructed=e}fromBER(e,t,n){let r=0;if(this.isConstructed){if(this.isHexOnly=!1,r=pi.prototype.fromBER.call(this,e,t,n),r===-1)return r;for(let i=0;i<this.value.length;i++){const a=this.value[i].constructor.NAME;if(a===ff){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(a!==EA)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,r=super.fromBER(e,t,n),this.blockLength=n;return r}toBER(e,t){return this.isConstructed?pi.prototype.toBER.call(this,e,t):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}MA.NAME="OctetStringValueBlock";var HA;class Q extends os{constructor({idBlock:e={},lenBlock:t={},...n}={}){var r,i;(r=n.isConstructed)!==null&&r!==void 0||(n.isConstructed=!!(!((i=n.value)===null||i===void 0)&&i.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!n.isIndefiniteForm},...n},MA),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,t,n){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,n===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),t;if(!this.valueBlock.isConstructed){const i=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(t,t+n);try{if(i.byteLength){const a=Tf(i,0,i.byteLength);a.offset!==-1&&a.offset===n&&(this.valueBlock.value=[a.result])}}catch{}}return super.fromBER(e,t,n)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?V.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${Ae.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const e=[];for(const t of this.valueBlock.value)t instanceof Q&&e.push(t.valueBlock.valueHexView);return ve.concat(e)}}HA=Q;me.OctetString=HA;Q.NAME=EA;class $A extends cr(pi){constructor({unusedBits:e=0,isConstructed:t=!1,...n}={}){super(n),this.unusedBits=e,this.isConstructed=t,this.blockLength=this.valueHexView.byteLength}fromBER(e,t,n){if(!n)return t;let r=-1;if(this.isConstructed){if(r=pi.prototype.fromBER.call(this,e,t,n),r===-1)return r;for(const o of this.value){const l=o.constructor.NAME;if(l===ff){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(l!==CA)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const c=o.valueBlock;if(this.unusedBits>0&&c.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=c.unusedBits}return r}const i=ve.toUint8Array(e);if(!lr(this,i,t,n))return-1;const a=i.subarray(t,t+n);if(this.unusedBits=a[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const o=a.subarray(1);try{if(o.byteLength){const l=Tf(o,0,o.byteLength);l.offset!==-1&&l.offset===n-1&&(this.value=[l.result])}}catch{}}return this.valueHexView=a.subarray(1),this.blockLength=a.length,t+n}toBER(e,t){if(this.isConstructed)return pi.prototype.toBER.call(this,e,t);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return on;const n=new Uint8Array(this.valueHexView.length+1);return n[0]=this.unusedBits,n.set(this.valueHexView,1),n.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}$A.NAME="BitStringValueBlock";var FA;class Pe extends os{constructor({idBlock:e={},lenBlock:t={},...n}={}){var r,i;(r=n.isConstructed)!==null&&r!==void 0||(n.isConstructed=!!(!((i=n.value)===null||i===void 0)&&i.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!n.isIndefiniteForm},...n},$A),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,t,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,t,n)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return V.prototype.onAsciiEncoding.call(this);{const e=[],t=this.valueBlock.valueHexView;for(const r of t)e.push(r.toString(2).padStart(8,"0"));const n=e.join("");return`${this.constructor.NAME} : ${n.substring(0,n.length-this.valueBlock.unusedBits)}`}}}FA=Pe;me.BitString=FA;Pe.NAME=CA;var KA;function dR(s,e){const t=new Uint8Array([0]),n=new Uint8Array(s),r=new Uint8Array(e);let i=n.slice(0);const a=i.length-1,o=r.slice(0),l=o.length-1;let c=0;const u=l<a?a:l;let h=0;for(let f=u;f>=0;f--,h++){switch(!0){case h<o.length:c=i[a-h]+o[l-h]+t[0];break;default:c=i[a-h]+t[0]}switch(t[0]=c/10,!0){case h>=i.length:i=Lp(new Uint8Array([c%10]),i);break;default:i[a-h]=c%10}}return t[0]>0&&(i=Lp(t,i)),i}function pb(s){if(s>=Lc.length)for(let e=Lc.length;e<=s;e++){const t=new Uint8Array([0]);let n=Lc[e-1].slice(0);for(let r=n.length-1;r>=0;r--){const i=new Uint8Array([(n[r]<<1)+t[0]]);t[0]=i[0]/10,n[r]=i[0]%10}t[0]>0&&(n=Lp(t,n)),Lc.push(n)}return Lc[s]}function mR(s,e){let t=0;const n=new Uint8Array(s),r=new Uint8Array(e),i=n.slice(0),a=i.length-1,o=r.slice(0),l=o.length-1;let c,u=0;for(let h=l;h>=0;h--,u++)switch(c=i[a-u]-o[l-u]-t,!0){case c<0:t=1,i[a-u]=c+10;break;default:t=0,i[a-u]=c}if(t>0)for(let h=a-l+1;h>=0;h--,u++)if(c=i[a-u]-t,c<0)t=1,i[a-u]=c+10;else{t=0,i[a-u]=c;break}return i.slice()}class ty extends cr(ps){constructor({value:e,...t}={}){super(t),this._valueDec=0,t.valueHex&&this.setValueHex(),e!==void 0&&(this.valueDec=e)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=SA.call(this)))}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(eR(e))}get valueDec(){return this._valueDec}fromDER(e,t,n,r=0){const i=this.fromBER(e,t,n);if(i===-1)return i;const a=this.valueHexView;return a[0]===0&&a[1]&128?this.valueHexView=a.subarray(1):r!==0&&a.length<r&&(r-a.length>1&&(r=a.length+1),this.valueHexView=a.subarray(r-a.length)),i}toDER(e=!1){const t=this.valueHexView;switch(!0){case(t[0]&128)!==0:{const n=new Uint8Array(this.valueHexView.length+1);n[0]=0,n.set(t,1),this.valueHexView=n}break;case(t[0]===0&&(t[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(e)}fromBER(e,t,n){const r=super.fromBER(e,t,n);return r===-1||this.setValueHex(),r}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=this.valueHexView.length*8-1;let t=new Uint8Array(this.valueHexView.length*8/3),n=0,r;const i=this.valueHexView;let a="",o=!1;for(let l=i.byteLength-1;l>=0;l--){r=i[l];for(let c=0;c<8;c++){if((r&1)===1)switch(n){case e:t=mR(pb(n),t),a="-";break;default:t=dR(t,pb(n))}n++,r>>=1}}for(let l=0;l<t.length;l++)t[l]&&(o=!0),o&&(a+=mb.charAt(t[l]));return o===!1&&(a+=mb.charAt(0)),a}}KA=ty;ty.NAME="IntegerValueBlock";Object.defineProperty(KA.prototype,"valueHex",{set:function(s){this.valueHexView=new Uint8Array(s),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});var jA;class U extends os{constructor(e={}){super(e,ty),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return Nm(),BigInt(this.valueBlock.toString())}static fromBigInt(e){Nm();const t=BigInt(e),n=new ey,r=t.toString(16).replace(/^-/,""),i=new Uint8Array(Ae.FromHex(r));if(t<0){const o=new Uint8Array(i.length+(i[0]&128?1:0));o[0]|=128;const c=BigInt(`0x${Ae.ToHex(o)}`)+t,u=ve.toUint8Array(Ae.FromHex(c.toString(16)));u[0]|=128,n.write(u)}else i[0]&128&&n.write(new Uint8Array([0])),n.write(i);return new U({valueHex:n.final()})}convertToDER(){const e=new U({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new U({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}jA=U;me.Integer=jA;U.NAME="INTEGER";var JA;class Ei extends U{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}JA=Ei;me.Enumerated=JA;Ei.NAME="ENUMERATED";class Up extends cr(ps){constructor({valueDec:e=-1,isFirstSid:t=!1,...n}={}){super(n),this.valueDec=e,this.isFirstSid=t}fromBER(e,t,n){if(!n)return t;const r=ve.toUint8Array(e);if(!lr(this,r,t,n))return-1;const i=r.subarray(t,t+n);this.valueHexView=new Uint8Array(n);for(let o=0;o<n&&(this.valueHexView[o]=i[o]&127,this.blockLength++,!!(i[o]&128));o++);const a=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength;o++)a[o]=this.valueHexView[o];return this.valueHexView=a,i[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=uo(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}set valueBigInt(e){Nm();let t=BigInt(e).toString(2);for(;t.length%7;)t="0"+t;const n=new Uint8Array(t.length/7);for(let r=0;r<n.length;r++)n[r]=parseInt(t.slice(r*7,r*7+7),2)+(r+1<n.length?128:0);this.fromBER(n.buffer,0,n.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const r=this.valueHexView,i=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength-1;a++)i[a]=r[a]|128;return i[this.blockLength-1]=r[this.blockLength-1],i.buffer}const t=ar(this.valueDec,7);if(t.byteLength===0)return this.error="Error during encoding SID value",on;const n=new Uint8Array(t.byteLength);if(!e){const r=new Uint8Array(t),i=t.byteLength-1;for(let a=0;a<i;a++)n[a]=r[a]|128;n[i]=r[i]}return n}toString(){let e="";if(this.isHexOnly)e=Ae.ToHex(this.valueHexView);else if(this.isFirstSid){let t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}Up.NAME="sidBlock";class WA extends ps{constructor({value:e=ds,...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,n){let r=t;for(;n>0;){const i=new Up;if(r=i.fromBER(e,r,n),r===-1)return this.blockLength=0,this.error=i.error,r;this.value.length===0&&(i.isFirstSid=!0),this.blockLength+=i.blockLength,n-=i.blockLength,this.value.push(i)}return r}toBER(e){const t=[];for(let n=0;n<this.value.length;n++){const r=this.value[n].toBER(e);if(r.byteLength===0)return this.error=this.value[n].error,on;t.push(r)}return Zw(t)}fromString(e){this.value=[];let t=0,n=0,r="",i=!1;do if(n=e.indexOf(".",t),n===-1?r=e.substring(t):r=e.substring(t,n),t=n+1,i){const a=this.value[0];let o=0;switch(a.valueDec){case 0:break;case 1:o=40;break;case 2:o=80;break;default:this.value=[];return}const l=parseInt(r,10);if(isNaN(l))return;a.valueDec=l+o,i=!1}else{const a=new Up;if(r>Number.MAX_SAFE_INTEGER){Nm();const o=BigInt(r);a.valueBigInt=o}else if(a.valueDec=parseInt(r,10),isNaN(a.valueDec))return;this.value.length||(a.isFirstSid=!0,i=!0),this.value.push(a)}while(n!==-1)}toString(){let e="",t=!1;for(let n=0;n<this.value.length;n++){t=this.value[n].isHexOnly;let r=this.value[n].toString();n!==0&&(e=`${e}.`),t?(r=`{${r}}`,this.value[n].isFirstSid?e=`2.{${r} - 80}`:e+=r):e+=r}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}WA.NAME="ObjectIdentifierValueBlock";var qA;class he extends os{constructor(e={}){super(e,WA),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}qA=he;me.ObjectIdentifier=qA;he.NAME="OBJECT IDENTIFIER";class Mp extends cr(go){constructor({valueDec:e=0,...t}={}){super(t),this.valueDec=e}fromBER(e,t,n){if(n===0)return t;const r=ve.toUint8Array(e);if(!lr(this,r,t,n))return-1;const i=r.subarray(t,t+n);this.valueHexView=new Uint8Array(n);for(let o=0;o<n&&(this.valueHexView[o]=i[o]&127,this.blockLength++,!!(i[o]&128));o++);const a=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength;o++)a[o]=this.valueHexView[o];return this.valueHexView=a,i[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=uo(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const r=this.valueHexView,i=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength-1;a++)i[a]=r[a]|128;return i[this.blockLength-1]=r[this.blockLength-1],i.buffer}const t=ar(this.valueDec,7);if(t.byteLength===0)return this.error="Error during encoding SID value",on;const n=new Uint8Array(t.byteLength);if(!e){const r=new Uint8Array(t),i=t.byteLength-1;for(let a=0;a<i;a++)n[a]=r[a]|128;n[i]=r[i]}return n.buffer}toString(){let e="";return this.isHexOnly?e=Ae.ToHex(this.valueHexView):e=this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}Mp.NAME="relativeSidBlock";class GA extends ps{constructor({value:e=ds,...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,n){let r=t;for(;n>0;){const i=new Mp;if(r=i.fromBER(e,r,n),r===-1)return this.blockLength=0,this.error=i.error,r;this.blockLength+=i.blockLength,n-=i.blockLength,this.value.push(i)}return r}toBER(e,t){const n=[];for(let r=0;r<this.value.length;r++){const i=this.value[r].toBER(e);if(i.byteLength===0)return this.error=this.value[r].error,on;n.push(i)}return Zw(n)}fromString(e){this.value=[];let t=0,n=0,r="";do{n=e.indexOf(".",t),n===-1?r=e.substring(t):r=e.substring(t,n),t=n+1;const i=new Mp;if(i.valueDec=parseInt(r,10),isNaN(i.valueDec))return!0;this.value.push(i)}while(n!==-1);return!0}toString(){let e="",t=!1;for(let n=0;n<this.value.length;n++){t=this.value[n].isHexOnly;let r=this.value[n].toString();n!==0&&(e=`${e}.`),t&&(r=`{${r}}`),e+=r}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}GA.NAME="RelativeObjectIdentifierValueBlock";var YA;class XA extends os{constructor(e={}){super(e,GA),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}YA=XA;me.RelativeObjectIdentifier=YA;XA.NAME="RelativeObjectIdentifier";var QA;class N extends V{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}QA=N;me.Sequence=QA;N.NAME="SEQUENCE";var zA;let vt=class extends V{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};zA=vt;me.Set=zA;vt.NAME="SET";class ZA extends cr(ps){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=ds}toJSON(){return{...super.toJSON(),value:this.value}}}ZA.NAME="StringValueBlock";class ek extends ZA{}ek.NAME="SimpleStringValueBlock";class Ts extends BA{constructor({...e}={}){super(e,ek)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,ve.toUint8Array(e))}fromString(e){const t=e.length,n=this.valueBlock.valueHexView=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e.charCodeAt(r);this.valueBlock.value=e}}Ts.NAME="SIMPLE STRING";class tk extends Ts{fromBuffer(e){this.valueBlock.valueHexView=ve.toUint8Array(e);try{this.valueBlock.value=Ae.ToUtf8String(e)}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`),this.valueBlock.value=Ae.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(Ae.FromUtf8String(e)),this.valueBlock.value=e}}tk.NAME="Utf8StringValueBlock";var sk;class mt extends tk{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}sk=mt;me.Utf8String=sk;mt.NAME="UTF8String";class nk extends Ts{fromBuffer(e){this.valueBlock.value=Ae.ToUtf16String(e),this.valueBlock.valueHexView=ve.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(Ae.FromUtf16String(e))}}nk.NAME="BmpStringValueBlock";var rk;class df extends nk{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}rk=df;me.BmpString=rk;df.NAME="BMPString";class ik extends Ts{fromBuffer(e){const t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),n=new Uint8Array(t);for(let r=0;r<n.length;r+=4)n[r]=n[r+3],n[r+1]=n[r+2],n[r+2]=0,n[r+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){const t=e.length,n=this.valueBlock.valueHexView=new Uint8Array(t*4);for(let r=0;r<t;r++){const i=ar(e.charCodeAt(r),8),a=new Uint8Array(i);if(a.length>4)continue;const o=4-a.length;for(let l=a.length-1;l>=0;l--)n[r*4+l+o]=a[l]}this.valueBlock.value=e}}ik.NAME="UniversalStringValueBlock";var ak;class mf extends ik{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}ak=mf;me.UniversalString=ak;mf.NAME="UniversalString";var ok;class cc extends Ts{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}ok=cc;me.NumericString=ok;cc.NAME="NumericString";var lk;class Zs extends Ts{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}lk=Zs;me.PrintableString=lk;Zs.NAME="PrintableString";var ck;class gf extends Ts{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}ck=gf;me.TeletexString=ck;gf.NAME="TeletexString";var uk;class sy extends Ts{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}uk=sy;me.VideotexString=uk;sy.NAME="VideotexString";var hk;class ag extends Ts{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}hk=ag;me.IA5String=hk;ag.NAME="IA5String";var fk;class ny extends Ts{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}fk=ny;me.GraphicString=fk;ny.NAME="GraphicString";var dk;class og extends Ts{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}dk=og;me.VisibleString=dk;og.NAME="VisibleString";var mk;class ry extends Ts{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}mk=ry;me.GeneralString=mk;ry.NAME="GeneralString";var gk;class iy extends Ts{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}gk=iy;me.CharacterString=gk;iy.NAME="CharacterString";var pk;class Ic extends og{constructor({value:e,valueDate:t,...n}={}){if(super(n),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let r=0;r<e.length;r++)this.valueBlock.valueHexView[r]=e.charCodeAt(r)}t&&(this.fromDate(t),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,ve.toUint8Array(e)))}toBuffer(){const e=this.toString(),t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return t}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const n=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(n===null){this.error="Wrong input string for conversion";return}const r=parseInt(n[1],10);r>=50?this.year=1900+r:this.year=2e3+r,this.month=parseInt(n[2],10),this.day=parseInt(n[3],10),this.hour=parseInt(n[4],10),this.minute=parseInt(n[5],10),this.second=parseInt(n[6],10)}toString(e="iso"){if(e==="iso"){const t=new Array(7);return t[0]=Es(this.year<2e3?this.year-1900:this.year-2e3,2),t[1]=Es(this.month,2),t[2]=Es(this.day,2),t[3]=Es(this.hour,2),t[4]=Es(this.minute,2),t[5]=Es(this.second,2),t[6]="Z",t.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}pk=Ic;me.UTCTime=pk;Ic.NAME="UTCTime";var wk;class ot extends Ic{constructor(e={}){var t;super(e),(t=this.millisecond)!==null&&t!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let t=!1,n="",r="",i=0,a,o=0,l=0;if(e[e.length-1]==="Z")n=e.substring(0,e.length-1),t=!0;else{const h=new Number(e[e.length-1]);if(isNaN(h.valueOf()))throw new Error("Wrong input string for conversion");n=e}if(t){if(n.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(n.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let h=1,f=n.indexOf("+"),m="";if(f===-1&&(f=n.indexOf("-"),h=-1),f!==-1){if(m=n.substring(f+1),n=n.substring(0,f),m.length!==2&&m.length!==4)throw new Error("Wrong input string for conversion");let S=parseInt(m.substring(0,2),10);if(isNaN(S.valueOf()))throw new Error("Wrong input string for conversion");if(o=h*S,m.length===4){if(S=parseInt(m.substring(2,4),10),isNaN(S.valueOf()))throw new Error("Wrong input string for conversion");l=h*S}}}let c=n.indexOf(".");if(c===-1&&(c=n.indexOf(",")),c!==-1){const h=new Number(`0${n.substring(c)}`);if(isNaN(h.valueOf()))throw new Error("Wrong input string for conversion");i=h.valueOf(),r=n.substring(0,c)}else r=n;switch(!0){case r.length===8:if(a=/(\d{4})(\d{2})(\d{2})/ig,c!==-1)throw new Error("Wrong input string for conversion");break;case r.length===10:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,c!==-1){let h=60*i;this.minute=Math.floor(h),h=60*(h-this.minute),this.second=Math.floor(h),h=1e3*(h-this.second),this.millisecond=Math.floor(h)}break;case r.length===12:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,c!==-1){let h=60*i;this.second=Math.floor(h),h=1e3*(h-this.second),this.millisecond=Math.floor(h)}break;case r.length===14:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,c!==-1){const h=1e3*i;this.millisecond=Math.floor(h)}break;default:throw new Error("Wrong input string for conversion")}const u=a.exec(r);if(u===null)throw new Error("Wrong input string for conversion");for(let h=1;h<u.length;h++)switch(h){case 1:this.year=parseInt(u[h],10);break;case 2:this.month=parseInt(u[h],10);break;case 3:this.day=parseInt(u[h],10);break;case 4:this.hour=parseInt(u[h],10)+o;break;case 5:this.minute=parseInt(u[h],10)+l;break;case 6:this.second=parseInt(u[h],10);break;default:throw new Error("Wrong input string for conversion")}if(t===!1){const h=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=h.getUTCFullYear(),this.month=h.getUTCMonth(),this.day=h.getUTCDay(),this.hour=h.getUTCHours(),this.minute=h.getUTCMinutes(),this.second=h.getUTCSeconds(),this.millisecond=h.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){const t=[];return t.push(Es(this.year,4)),t.push(Es(this.month,2)),t.push(Es(this.day,2)),t.push(Es(this.hour,2)),t.push(Es(this.minute,2)),t.push(Es(this.second,2)),this.millisecond!==0&&(t.push("."),t.push(Es(this.millisecond,3))),t.push("Z"),t.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}wk=ot;me.GeneralizedTime=wk;ot.NAME="GeneralizedTime";var yk;let vk=class extends mt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}};yk=vk;me.DATE=yk;vk.NAME="DATE";var bk;class Sk extends mt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}bk=Sk;me.TimeOfDay=bk;Sk.NAME="TimeOfDay";var Ak;class kk extends mt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}Ak=kk;me.DateTime=Ak;kk.NAME="DateTime";var Ek;class Ck extends mt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}Ek=Ck;me.Duration=Ek;Ck.NAME="Duration";var Nk;class Ik extends mt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}Nk=Ik;me.TIME=Nk;Ik.NAME="TIME";class Ee{constructor({name:e=ds,optional:t=!1}={}){this.name=e,this.optional=t}}class lt extends Ee{constructor({value:e=[],...t}={}){super(t),this.value=e}}class _e extends Ee{constructor({value:e=new Ee,local:t=!1,...n}={}){super(n),this.value=e,this.local=t}}class Im{constructor({data:e=ig}={}){this.dataView=ve.toUint8Array(e)}get data(){return this.dataView.slice().buffer}set data(e){this.dataView=ve.toUint8Array(e)}fromBER(e,t,n){const r=t+n;return this.dataView=ve.toUint8Array(e).subarray(t,r),r}toBER(e){return this.dataView.slice().buffer}}function q(s,e,t){if(t instanceof lt){for(let i=0;i<t.value.length;i++)if(q(s,e,t.value[i]).verified)return{verified:!0,result:s};{const i={verified:!1,result:{error:"Wrong values for Choice type"}};return t.hasOwnProperty(Cg)&&(i.name=t.name),i}}if(t instanceof Ee)return t.hasOwnProperty(Cg)&&(s[t.name]=e),{verified:!0,result:s};if(!(s instanceof Object))return{verified:!1,result:{error:"Wrong root object"}};if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(!(t instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(rR in t))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(lR in t.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(cR in t.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const n=t.idBlock.toBER(!1);if(n.byteLength===0)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(t.idBlock.fromBER(n,0,n.byteLength)===-1)return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(t.idBlock.hasOwnProperty(iR)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(t.idBlock.tagClass!==e.idBlock.tagClass)return{verified:!1,result:s};if(t.idBlock.hasOwnProperty(aR)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(t.idBlock.tagNumber!==e.idBlock.tagNumber)return{verified:!1,result:s};if(t.idBlock.hasOwnProperty(oR)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(t.idBlock.isConstructed!==e.idBlock.isConstructed)return{verified:!1,result:s};if(!(nR in t.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(t.idBlock.isHexOnly!==e.idBlock.isHexOnly)return{verified:!1,result:s};if(t.idBlock.isHexOnly){if(!(gb in t.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const i=t.idBlock.valueHexView,a=e.idBlock.valueHexView;if(i.length!==a.length)return{verified:!1,result:s};for(let o=0;o<i.length;o++)if(i[o]!==a[1])return{verified:!1,result:s}}if(t.name&&(t.name=t.name.replace(/^\s+|\s+$/g,ds),t.name&&(s[t.name]=e)),t instanceof me.Constructed){let i=0,a={verified:!1,result:{error:"Unknown error"}},o=t.valueBlock.value.length;if(o>0&&t.valueBlock.value[0]instanceof _e&&(o=e.valueBlock.value.length),o===0)return{verified:!0,result:s};if(e.valueBlock.value.length===0&&t.valueBlock.value.length!==0){let l=!0;for(let c=0;c<t.valueBlock.value.length;c++)l=l&&(t.valueBlock.value[c].optional||!1);return l?{verified:!0,result:s}:(t.name&&(t.name=t.name.replace(/^\s+|\s+$/g,ds),t.name&&delete s[t.name]),s.error="Inconsistent object length",{verified:!1,result:s})}for(let l=0;l<o;l++)if(l-i>=e.valueBlock.value.length){if(t.valueBlock.value[l].optional===!1){const c={verified:!1,result:s};return s.error="Inconsistent length between ASN.1 data and schema",t.name&&(t.name=t.name.replace(/^\s+|\s+$/g,ds),t.name&&(delete s[t.name],c.name=t.name)),c}}else if(t.valueBlock.value[0]instanceof _e){if(a=q(s,e.valueBlock.value[l],t.valueBlock.value[0].value),a.verified===!1)if(t.valueBlock.value[0].optional)i++;else return t.name&&(t.name=t.name.replace(/^\s+|\s+$/g,ds),t.name&&delete s[t.name]),a;if(Cg in t.valueBlock.value[0]&&t.valueBlock.value[0].name.length>0){let c={};uR in t.valueBlock.value[0]&&t.valueBlock.value[0].local?c=e:c=s,typeof c[t.valueBlock.value[0].name]>"u"&&(c[t.valueBlock.value[0].name]=[]),c[t.valueBlock.value[0].name].push(e.valueBlock.value[l])}}else if(a=q(s,e.valueBlock.value[l-i],t.valueBlock.value[l]),a.verified===!1)if(t.valueBlock.value[l].optional)i++;else return t.name&&(t.name=t.name.replace(/^\s+|\s+$/g,ds),t.name&&delete s[t.name]),a;if(a.verified===!1){const l={verified:!1,result:s};return t.name&&(t.name=t.name.replace(/^\s+|\s+$/g,ds),t.name&&(delete s[t.name],l.name=t.name)),l}return{verified:!0,result:s}}if(t.primitiveSchema&&gb in e.valueBlock){const i=Tf(e.valueBlock.valueHexView);if(i.offset===-1){const a={verified:!1,result:i.result};return t.name&&(t.name=t.name.replace(/^\s+|\s+$/g,ds),t.name&&(delete s[t.name],a.name=t.name)),a}return q(s,i.result,t.primitiveSchema)}return{verified:!0,result:s}}class ft{constructor(e={}){if("view"in e)this.fromUint8Array(e.view);else if("buffer"in e)this.fromArrayBuffer(e.buffer);else if("string"in e)this.fromString(e.string);else if("hexstring"in e)this.fromHexString(e.hexstring);else if("length"in e&&e.length>0){if(this.length=e.length,e.stub)for(let t=0;t<this._view.length;t++)this._view[t]=e.stub}else this.length=0}set buffer(e){this._buffer=e,this._view=new Uint8Array(this._buffer)}get buffer(){return this._buffer}set view(e){this._buffer=new ArrayBuffer(e.length),this._view=new Uint8Array(this._buffer),this._view.set(e)}get view(){return this._view}get length(){return this.view.byteLength}set length(e){this._buffer=new ArrayBuffer(e),this._view=new Uint8Array(this._buffer)}clear(){this._buffer=new ArrayBuffer(0),this._view=new Uint8Array(this._buffer)}fromArrayBuffer(e){this._buffer=e,this._view=new Uint8Array(this._buffer)}fromUint8Array(e){this.fromArrayBuffer(new Uint8Array(e).buffer)}fromString(e){const t=e.length;this.length=t;for(let n=0;n<t;n++)this.view[n]=e.charCodeAt(n)}toString(e=0,t=this.view.length-e){let n="";(e>=this.view.length||e<0)&&(e=0),(t>=this.view.length||t<0)&&(t=this.view.length-e);for(let r=e;r<e+t;r++)n+=String.fromCharCode(this.view[r]);return n}fromHexString(e){const t=e.length;this.buffer=new ArrayBuffer(t>>1),this.view=new Uint8Array(this.buffer);const n=new Map;n.set("0",0),n.set("1",1),n.set("2",2),n.set("3",3),n.set("4",4),n.set("5",5),n.set("6",6),n.set("7",7),n.set("8",8),n.set("9",9),n.set("A",10),n.set("a",10),n.set("B",11),n.set("b",11),n.set("C",12),n.set("c",12),n.set("D",13),n.set("d",13),n.set("E",14),n.set("e",14),n.set("F",15),n.set("f",15);let r=0,i=0;for(let a=0;a<t;a++)a%2?(i|=n.get(e.charAt(a)),this.view[r]=i,r++):i=n.get(e.charAt(a))<<4}toHexString(e=0,t=this.view.length-e){let n="";(e>=this.view.length||e<0)&&(e=0),(t>=this.view.length||t<0)&&(t=this.view.length-e);for(let r=e;r<e+t;r++){const i=this.view[r].toString(16).toUpperCase();n=n+(i.length==1?"0":"")+i}return n}copy(e=0,t=this.length-e){if(!e&&!this.length)return new ft;if(e<0||e>this.length-1)throw new Error(`Wrong start position: ${e}`);return new ft({buffer:this._buffer.slice(e,e+t)})}slice(e=0,t=this.length){if(!e&&!this.length)return new ft;if(e<0||e>this.length-1)throw new Error(`Wrong start position: ${e}`);return new ft({buffer:this._buffer.slice(e,t)})}realloc(e){const t=new ArrayBuffer(e),n=new Uint8Array(t);e>this._view.length?n.set(this._view):n.set(new Uint8Array(this._buffer,0,e)),this._buffer=t,this._view=new Uint8Array(this._buffer)}append(e){const t=this.length,n=e.length,r=e._view.subarray();this.realloc(t+n),this._view.set(r,t)}insert(e,t=0,n=this.length-t){return t>this.length-1?!1:(n>this.length-t&&(n=this.length-t),n>e.length&&(n=e.length),n==e.length?this._view.set(e._view,t):this._view.set(e._view.subarray(0,n),t),!0)}isEqual(e){if(this.length!=e.length)return!1;for(let t=0;t<e.length;t++)if(this.view[t]!=e.view[t])return!1;return!0}isEqualView(e){if(e.length!=this.view.length)return!1;for(let t=0;t<e.length;t++)if(this.view[t]!=e[t])return!1;return!0}findPattern(e,t,n,r){const{start:i,length:a,backward:o}=this.prepareFindParameters(t,n,r),l=e.length;if(l>a)return-1;const c=[];for(let u=0;u<l;u++)c.push(e.view[u]);for(let u=0;u<=a-l;u++){let h=!0;const f=o?i-l-u:i+u;for(let m=0;m<l;m++)if(this.view[m+f]!=c[m]){h=!1;break}if(h)return o?i-l-u:i+l+u}return-1}findFirstIn(e,t,n,r){const{start:i,length:a,backward:o}=this.prepareFindParameters(t,n,r),l={id:-1,position:o?0:i+a,length:0};for(let c=0;c<e.length;c++){const u=this.findPattern(e[c],i,a,o);if(u!=-1){let h=!1;const f=e[c].length;o?u-f>=l.position-l.length&&(h=!0):u-f<=l.position-l.length&&(h=!0),h&&(l.position=u,l.id=c,l.length=f)}}return l}findAllIn(e,t,n){let{start:r,length:i}=this.prepareFindParameters(t,n);const a=[];let o={id:-1,position:r};do{const l=o.position;if(o=this.findFirstIn(e,o.position,i),o.id==-1)break;i-=o.position-l,a.push({id:o.id,position:o.position})}while(!0);return a}findAllPatternIn(e,t,n){const{start:r,length:i}=this.prepareFindParameters(t,n),a=[],o=e.length;if(o>i)return-1;const l=Array.from(e.view);for(let c=0;c<=i-o;c++){let u=!0;const h=r+c;for(let f=0;f<o;f++)if(this.view[f+h]!=l[f]){u=!1;break}u&&(a.push(r+o+c),c+=o-1)}return a}findFirstNotIn(e,t,n,r){let{start:i,length:a,backward:o}=this.prepareFindParameters(t,n,r);const l={left:{id:-1,position:i},right:{id:-1,position:0},value:new ft};let c=a;for(;c>0;){if(l.right=this.findFirstIn(e,o?i-a+c:i+a-c,c,o),l.right.id==-1){a=c,o?i-=a:i=l.left.position,l.value=new ft({buffer:this._buffer.slice(i,i+a)});break}if(l.right.position!=(o?l.left.position-e[l.right.id].length:l.left.position+e[l.right.id].length)){o?(i=l.right.position+e[l.right.id].length,a=l.left.position-l.right.position-e[l.right.id].length):(i=l.left.position,a=l.right.position-l.left.position-e[l.right.id].length),l.value=new ft({buffer:this._buffer.slice(i,i+a)});break}l.left=l.right,c-=e[l.right.id].length}if(o){const u=l.right;l.right=l.left,l.left=u}return l}findAllNotIn(e,t,n){let{start:r,length:i}=this.prepareFindParameters(t,n);const a=[];let o={left:{id:-1,position:r},right:{id:-1,position:r},value:new ft};do{const l=o.right.position;o=this.findFirstNotIn(e,o.right.position,i),i-=o.right.position-l,a.push({left:{id:o.left.id,position:o.left.position},right:{id:o.right.id,position:o.right.position},value:o.value})}while(o.right.id!=-1);return a}findFirstSequence(e,t,n,r){let{start:i,length:a,backward:o}=this.prepareFindParameters(t,n,r);const l=this.skipNotPatterns(e,i,a,o);if(l==-1)return{position:-1,value:new ft};const c=this.skipPatterns(e,l,a-(o?i-l:l-i),o);o?(i=c,a=l-c):(i=l,a=c-l);const u=new ft({buffer:this._buffer.slice(i,i+a)});return{position:c,value:u}}findAllSequences(e,t,n){let{start:r,length:i}=this.prepareFindParameters(t,n);const a=[];let o={position:r,value:new ft};do{const l=o.position;o=this.findFirstSequence(e,o.position,i),o.position!=-1&&(i-=o.position-l,a.push({position:o.position,value:o.value}))}while(o.position!=-1);return a}findPairedPatterns(e,t,n,r){const i=[];if(e.isEqual(t))return i;const{start:a,length:o}=this.prepareFindParameters(n,r);let l=0;const c=this.findAllPatternIn(e,a,o);if(!Array.isArray(c)||c.length==0)return i;const u=this.findAllPatternIn(t,a,o);if(!Array.isArray(u)||u.length==0)return i;for(;l<c.length&&u.length!=0;){if(c[0]==u[0]){i.push({left:c[0],right:u[0]}),c.splice(0,1),u.splice(0,1);continue}if(c[l]>u[0])break;for(;c[l]<u[0]&&(l++,!(l>=c.length)););i.push({left:c[l-1],right:u[0]}),c.splice(l-1,1),u.splice(0,1),l=0}return i.sort((h,f)=>h.left-f.left),i}findPairedArrays(e,t,n,r){const{start:i,length:a}=this.prepareFindParameters(n,r),o=[];let l=0;const c=this.findAllIn(e,i,a);if(c.length==0)return o;const u=this.findAllIn(t,i,a);if(u.length==0)return o;for(;l<c.length&&u.length!=0;){if(c[0].position==u[0].position){o.push({left:c[0],right:u[0]}),c.splice(0,1),u.splice(0,1);continue}if(c[l].position>u[0].position)break;for(;c[l].position<u[0].position&&(l++,!(l>=c.length)););o.push({left:c[l-1],right:u[0]}),c.splice(l-1,1),u.splice(0,1),l=0}return o.sort((h,f)=>h.left.position-f.left.position),o}replacePattern(e,t,n,r,i=null){let a=[],o;const l={status:-1,searchPatternPositions:[],replacePatternPositions:[]},{start:c,length:u}=this.prepareFindParameters(n,r);if(i==null){if(a=this.findAllIn([e],c,u),a.length==0)return l}else a=i;l.searchPatternPositions.push(...Array.from(a,S=>S.position));const h=e.length-t.length,f=new ArrayBuffer(this.view.length-a.length*h),m=new Uint8Array(f);for(m.set(new Uint8Array(this.buffer,0,c)),o=0;o<a.length;o++){const S=o==0?c:a[o-1].position;m.set(new Uint8Array(this.buffer,S,a[o].position-e.length-S),S-o*h),m.set(t.view,a[o].position-e.length-o*h),l.replacePatternPositions.push(a[o].position-e.length-o*h)}return o--,m.set(new Uint8Array(this.buffer,a[o].position,this.length-a[o].position),a[o].position-e.length+t.length-o*h),this.buffer=f,this.view=new Uint8Array(this.buffer),l.status=1,l}skipPatterns(e,t,n,r){const{start:i,length:a,backward:o}=this.prepareFindParameters(t,n,r);let l=i;for(let c=0;c<e.length;c++){const u=e[c].length,h=o?l-u:l;let f=!0;for(let m=0;m<u;m++)if(this.view[m+h]!=e[c].view[m]){f=!1;break}if(f){if(c=-1,o){if(l-=u,l<=0)return l}else if(l+=u,l>=i+a)return l}}return l}skipNotPatterns(e,t,n,r){const{start:i,length:a,backward:o}=this.prepareFindParameters(t,n,r);let l=-1;for(let c=0;c<a;c++){for(let u=0;u<e.length;u++){const h=e[u].length,f=o?i-c-h:i+c;let m=!0;for(let S=0;S<h;S++)if(this.view[S+f]!=e[u].view[S]){m=!1;break}if(m){l=o?i-c:i+c;break}}if(l!=-1)break}return l}prepareFindParameters(e=null,t=null,n=!1){return e===null&&(e=n?this.length:0),e>this.length&&(e=this.length),n?(t===null&&(t=e),t>e&&(t=e)):(t===null&&(t=this.length-e),t>this.length-e&&(t=this.length-e)),{start:e,length:t,backward:n}}}const gR=16777216;class wi{constructor(e={}){this._stream=new ft,this._length=0,this._start=0,this.backward=!1,this.appendBlock=0,this.prevLength=0,this.prevStart=0,"view"in e?this.stream=new ft({view:e.view}):"buffer"in e?this.stream=new ft({buffer:e.buffer}):"string"in e?this.stream=new ft({string:e.string}):"hexstring"in e?this.stream=new ft({hexstring:e.hexstring}):"stream"in e?this.stream=e.stream.slice():this.stream=new ft,"backward"in e&&e.backward&&(this.backward=e.backward,this._start=this.stream.length),"length"in e&&e.length>0&&(this._length=e.length),"start"in e&&e.start&&e.start>0&&(this._start=e.start),"appendBlock"in e&&e.appendBlock&&e.appendBlock>0&&(this.appendBlock=e.appendBlock)}set stream(e){this._stream=e,this.prevLength=this._length,this._length=e.length,this.prevStart=this._start,this._start=0}get stream(){return this._stream}set length(e){this.prevLength=this._length,this._length=e}get length(){return this.appendBlock?this.start:this._length}set start(e){e>this.stream.length||(this.prevStart=this._start,this.prevLength=this._length,this._length-=this.backward?this._start-e:e-this._start,this._start=e)}get start(){return this._start}get buffer(){return this._stream.buffer.slice(0,this._length)}resetPosition(){this._start=this.prevStart,this._length=this.prevLength}findPattern(e,t=null){(t==null||t>this.length)&&(t=this.length);const n=this.stream.findPattern(e,this.start,this.length,this.backward);if(n==-1)return n;if(this.backward){if(n<this.start-e.length-t)return-1}else if(n>this.start+e.length+t)return-1;return this.start=n,n}findFirstIn(e,t=null){(t==null||t>this.length)&&(t=this.length);const n=this.stream.findFirstIn(e,this.start,this.length,this.backward);if(n.id==-1)return n;if(this.backward){if(n.position<this.start-e[n.id].length-t)return{id:-1,position:this.backward?0:this.start+this.length}}else if(n.position>this.start+e[n.id].length+t)return{id:-1,position:this.backward?0:this.start+this.length};return this.start=n.position,n}findAllIn(e){const t=this.backward?this.start-this.length:this.start;return this.stream.findAllIn(e,t,this.length)}findFirstNotIn(e,t=null){(t==null||t>this._length)&&(t=this._length);const n=this._stream.findFirstNotIn(e,this._start,this._length,this.backward);if(n.left.id==-1&&n.right.id==-1)return n;if(this.backward){if(n.right.id!=-1&&n.right.position<this._start-e[n.right.id].length-t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new ft}}else if(n.left.id!=-1&&n.left.position>this._start+e[n.left.id].length+t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new ft};return this.backward?n.left.id==-1?this.start=0:this.start=n.left.position:n.right.id==-1?this.start=this._start+this._length:this.start=n.right.position,n}findAllNotIn(e){const t=this.backward?this._start-this._length:this._start;return this._stream.findAllNotIn(e,t,this._length)}findFirstSequence(e,t=null,n=null){(t==null||t>this._length)&&(t=this._length),(n==null||n>t)&&(n=t);const r=this._stream.findFirstSequence(e,this._start,t,this.backward);if(r.value.length==0)return r;if(this.backward){if(r.position<this._start-r.value.length-n)return{position:-1,value:new ft}}else if(r.position>this._start+r.value.length+n)return{position:-1,value:new ft};return this.start=r.position,r}findAllSequences(e){const t=this.backward?this.start-this.length:this.start;return this.stream.findAllSequences(e,t,this.length)}findPairedPatterns(e,t,n=null){(n==null||n>this.length)&&(n=this.length);const r=this.backward?this.start-this.length:this.start,i=this.stream.findPairedPatterns(e,t,r,this.length);if(i.length){if(this.backward){if(i[0].right<this.start-t.length-n)return[]}else if(i[0].left>this.start+e.length+n)return[]}return i}findPairedArrays(e,t,n=null){(n==null||n>this.length)&&(n=this.length);const r=this.backward?this.start-this.length:this.start,i=this.stream.findPairedArrays(e,t,r,this.length);if(i.length){if(this.backward){if(i[0].right.position<this.start-t[i[0].right.id].length-n)return[]}else if(i[0].left.position>this.start+e[i[0].left.id].length+n)return[]}return i}replacePattern(e,t){const n=this.backward?this.start-this.length:this.start;return this.stream.replacePattern(e,t,n,this.length)}skipPatterns(e){const t=this.stream.skipPatterns(e,this.start,this.length,this.backward);return this.start=t,t}skipNotPatterns(e){const t=this.stream.skipNotPatterns(e,this.start,this.length,this.backward);return t==-1?-1:(this.start=t,t)}append(e){this.beforeAppend(e.length),this._stream.view.set(e.view,this._start),this._length+=e.length*2,this.start=this._start+e.length,this.prevLength-=e.length*2}appendView(e){this.beforeAppend(e.length),this._stream.view.set(e,this._start),this._length+=e.length*2,this.start=this._start+e.length,this.prevLength-=e.length*2}appendChar(e){this.beforeAppend(1),this._stream.view[this._start]=e,this._length+=2,this.start=this._start+1,this.prevLength-=2}appendUint16(e){this.beforeAppend(2);const t=new Uint16Array([e]),n=new Uint8Array(t.buffer);this.stream.view[this._start]=n[1],this._stream.view[this._start+1]=n[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendUint24(e){this.beforeAppend(3);const t=new Uint32Array([e]),n=new Uint8Array(t.buffer);this._stream.view[this._start]=n[2],this._stream.view[this._start+1]=n[1],this._stream.view[this._start+2]=n[0],this._length+=6,this.start=this._start+3,this.prevLength-=6}appendUint32(e){this.beforeAppend(4);const t=new Uint32Array([e]),n=new Uint8Array(t.buffer);this._stream.view[this._start]=n[3],this._stream.view[this._start+1]=n[2],this._stream.view[this._start+2]=n[1],this._stream.view[this._start+3]=n[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}appendInt16(e){this.beforeAppend(2);const t=new Int16Array([e]),n=new Uint8Array(t.buffer);this._stream.view[this._start]=n[1],this._stream.view[this._start+1]=n[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendInt32(e){this.beforeAppend(4);const t=new Int32Array([e]),n=new Uint8Array(t.buffer);this._stream.view[this._start]=n[3],this._stream.view[this._start+1]=n[2],this._stream.view[this._start+2]=n[1],this._stream.view[this._start+3]=n[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}getBlock(e,t=!0){if(this._length<=0)return new Uint8Array(0);this._length<e&&(e=this._length);let n;if(this.backward){const r=this._stream.view.subarray(this._length-e,this._length);n=new Uint8Array(e);for(let i=0;i<e;i++)n[e-1-i]=r[i]}else n=this._stream.view.subarray(this._start,this._start+e);return t&&(this.start+=this.backward?-1*e:e),n}getUint16(e=!0){const t=this.getBlock(2,e);return t.length<2?0:t[0]<<8|t[1]}getInt16(e=!0){const t=this.getUint16(e),n=32768;return t&n?-(n-(t^n)):t}getUint24(e=!0){const t=this.getBlock(4,e);return t.length<3?0:t[0]<<16|t[1]<<8|t[2]}getUint32(e=!0){const t=this.getBlock(4,e);return t.length<4?0:t[0]*gR+(t[1]<<16)+(t[2]<<8)+t[3]}getInt32(e=!0){const t=this.getUint32(e),n=2147483648;return t&n?-(n-(t^n)):t}beforeAppend(e){this._start+e>this._stream.length&&(e>this.appendBlock&&(this.appendBlock=e+wi.APPEND_BLOCK),this._stream.realloc(this._stream.length+this.appendBlock))}}wi.APPEND_BLOCK=1e3;/*!
 * Copyright (c) 2014, GlobalSign
 * Copyright (c) 2015-2019, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the {organization} nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */const _t=new ArrayBuffer(0),g="";class Ye extends TypeError{constructor(){super(...arguments),this.name=Ye.NAME}static isType(e,t){if(typeof t=="string"){if(t==="Array"&&Array.isArray(e))return!0;if(t==="ArrayBuffer"&&e instanceof ArrayBuffer)return!0;if(t==="ArrayBufferView"&&ArrayBuffer.isView(e))return!0;if(typeof e===t)return!0}else if(e instanceof t)return!0;return!1}static assert(e,t,...n){for(const i of n)if(this.isType(e,i))return;const r=n.map(i=>i instanceof Function&&"name"in i?i.name:`${i}`);throw new Ye(`Parameter '${t}' is not of type ${r.length>1?`(${r.join(" or ")})`:r[0]}`)}}Ye.NAME="ArgumentError";class Ue extends TypeError{constructor(e,t=null,n){super(),this.name=Ue.NAME,this.field=e,t&&(this.target=t),n?this.message=n:this.message=`Absent mandatory parameter '${e}' ${t?` in '${t}'`:g}`}static assert(...e){let t=null,n,r;typeof e[0]=="string"?(t=e[0],n=e[1],r=e.slice(2)):(n=e[0],r=e.slice(1)),Ye.assert(n,"parameters","object");for(const i of r){const a=n[i];if(a==null)throw new Ue(i,t)}}static assertEmpty(e,t,n){if(e==null)throw new Ue(t,n)}}Ue.NAME="ParameterError";class W extends Error{static assertSchema(e,t){if(!e.verified)throw new Error(`Object's schema was not verified against input data for ${t}`)}static assert(e,t){if(e.offset===-1)throw new W(`Error during parsing of ASN.1 data. Data is not correct for '${t}'.`)}constructor(e){super(e),this.name="AsnError"}}class G{static blockName(){return this.CLASS_NAME}static fromBER(e){const t=St(e);W.assert(t,this.name);try{return new this({schema:t.result})}catch{throw new W(`Cannot create '${this.CLASS_NAME}' from ASN.1 object`)}}static defaultValues(e){throw new Error(`Invalid member name for ${this.CLASS_NAME} class: ${e}`)}static schema(e={}){throw new Error(`Method '${this.CLASS_NAME}.schema' should be overridden`)}get className(){return this.constructor.CLASS_NAME}toString(e="hex"){let t;try{t=this.toSchema()}catch{t=this.toSchema(!0)}return Ae.ToString(t.toBER(),e)}}G.CLASS_NAME="PkiObject";function ri(s){let e=!1,t=g;const n=s.trim();for(let r=0;r<n.length;r++)n.charCodeAt(r)===32?e===!1&&(e=!0):(e&&(t+=" ",e=!1),t+=n[r]);return t.toLowerCase()}const Dc="type",Ng="value";class xt extends G{constructor(e={}){super(),this.type=d(e,Dc,xt.defaultValues(Dc)),this.value=d(e,Ng,xt.defaultValues(Ng)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Dc:return g;case Ng:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new he({name:t.type||g}),new Ee({name:t.value||g})]})}fromSchema(e){X(e,[Dc,"typeValue"]);const t=q(e,e,xt.schema({names:{type:Dc,value:"typeValue"}}));W.assertSchema(t,this.className),this.type=t.result.type.valueBlock.toString(),this.value=t.result.typeValue}toSchema(){return new N({value:[new he({value:this.type}),this.value]})}toJSON(){const e={type:this.type};return Object.keys(this.value).length!==0?e.value=this.value.toJSON():e.value=this.value,e}isEqual(e){const t=[mt.blockName(),df.blockName(),mf.blockName(),cc.blockName(),Zs.blockName(),gf.blockName(),sy.blockName(),ag.blockName(),ny.blockName(),og.blockName(),ry.blockName(),iy.blockName()];if(e instanceof ArrayBuffer)return ve.isEqual(this.value.valueBeforeDecodeView,e);if(e.constructor.blockName()===xt.blockName()){if(this.type!==e.type)return!1;const n=[!1,!1],r=this.value.constructor.blockName();for(const a of t)r===a&&(n[0]=!0),e.value.constructor.blockName()===a&&(n[1]=!0);if(n[0]!==n[1])return!1;if(n[0]&&n[1]){const a=ri(this.value.valueBlock.value),o=ri(e.value.valueBlock.value);if(a.localeCompare(o)!==0)return!1}else if(!ve.isEqual(this.value.valueBeforeDecodeView,e.value.valueBeforeDecodeView))return!1;return!0}return!1}}xt.CLASS_NAME="AttributeTypeAndValue";const Li="typesAndValues",Gf="valueBeforeDecode",wb="RDN";class Xe extends G{constructor(e={}){super(),this.typesAndValues=d(e,Li,Xe.defaultValues(Li)),this.valueBeforeDecode=d(e,Gf,Xe.defaultValues(Gf)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Li:return[];case Gf:return _t;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Li:return t.length===0;case Gf:return t.byteLength===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new _e({name:t.repeatedSequence||g,value:new vt({value:[new _e({name:t.repeatedSet||g,value:xt.schema(t.typeAndValue||{})})]})})]})}fromSchema(e){X(e,[wb,Li]);const t=q(e,e,Xe.schema({names:{blockName:wb,repeatedSet:Li}}));W.assertSchema(t,this.className),Li in t.result&&(this.typesAndValues=Array.from(t.result.typesAndValues,n=>new xt({schema:n}))),this.valueBeforeDecode=t.result.RDN.valueBeforeDecodeView.slice().buffer}toSchema(){if(this.valueBeforeDecode.byteLength===0)return new N({value:[new vt({value:Array.from(this.typesAndValues,t=>t.toSchema())})]});const e=St(this.valueBeforeDecode);if(W.assert(e,"RelativeDistinguishedNames"),!(e.result instanceof N))throw new Error("ASN.1 result should be SEQUENCE");return e.result}toJSON(){return{typesAndValues:Array.from(this.typesAndValues,e=>e.toJSON())}}isEqual(e){if(e instanceof Xe){if(this.typesAndValues.length!==e.typesAndValues.length)return!1;for(const[t,n]of this.typesAndValues.entries())if(n.isEqual(e.typesAndValues[t])===!1)return!1;return!0}return e instanceof ArrayBuffer?Cc(this.valueBeforeDecode,e):!1}}Xe.CLASS_NAME="RelativeDistinguishedNames";const zc="type",Zc="value";function pR(s={},e=!1){const t=d(s,"names",{});return new N({optional:e,value:[new V({optional:!0,idBlock:{tagClass:2,tagNumber:1},name:t.country_name||g,value:[new lt({value:[new cc,new Zs]})]}),new V({optional:!0,idBlock:{tagClass:2,tagNumber:2},name:t.administration_domain_name||g,value:[new lt({value:[new cc,new Zs]})]}),new ke({optional:!0,idBlock:{tagClass:3,tagNumber:0},name:t.network_address||g,isHexOnly:!0}),new ke({optional:!0,idBlock:{tagClass:3,tagNumber:1},name:t.terminal_identifier||g,isHexOnly:!0}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:2},name:t.private_domain_name||g,value:[new lt({value:[new cc,new Zs]})]}),new ke({optional:!0,idBlock:{tagClass:3,tagNumber:3},name:t.organization_name||g,isHexOnly:!0}),new ke({optional:!0,name:t.numeric_user_identifier||g,idBlock:{tagClass:3,tagNumber:4},isHexOnly:!0}),new V({optional:!0,name:t.personal_name||g,idBlock:{tagClass:3,tagNumber:5},value:[new ke({idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new ke({optional:!0,idBlock:{tagClass:3,tagNumber:1},isHexOnly:!0}),new ke({optional:!0,idBlock:{tagClass:3,tagNumber:2},isHexOnly:!0}),new ke({optional:!0,idBlock:{tagClass:3,tagNumber:3},isHexOnly:!0})]}),new V({optional:!0,name:t.organizational_unit_names||g,idBlock:{tagClass:3,tagNumber:6},value:[new _e({value:new Zs})]})]})}function wR(s=!1){return new N({optional:s,value:[new Zs,new Zs]})}function yR(s=!1){return new vt({optional:s,value:[new ke({optional:!0,idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ee]})]})}class Le extends G{constructor(e={}){super(),this.type=d(e,zc,Le.defaultValues(zc)),this.value=d(e,Zc,Le.defaultValues(Zc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case zc:return 9;case Zc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case zc:return t===Le.defaultValues(e);case Zc:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new lt({value:[new V({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||g,value:[new he,new V({idBlock:{tagClass:3,tagNumber:0},value:[new Ee]})]}),new ke({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:1}}),new ke({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:2}}),new V({idBlock:{tagClass:3,tagNumber:3},name:t.blockName||g,value:[pR(t.builtInStandardAttributes||{},!1),wR(!0),yR(!0)]}),new V({idBlock:{tagClass:3,tagNumber:4},name:t.blockName||g,value:[Xe.schema(t.directoryName||{})]}),new V({idBlock:{tagClass:3,tagNumber:5},name:t.blockName||g,value:[new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new lt({value:[new gf,new Zs,new mf,new mt,new df]})]}),new V({idBlock:{tagClass:3,tagNumber:1},value:[new lt({value:[new gf,new Zs,new mf,new mt,new df]})]})]}),new ke({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:6}}),new ke({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:7}}),new ke({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:8}})]})}fromSchema(e){X(e,["blockName","otherName","rfc822Name","dNSName","x400Address","directoryName","ediPartyName","uniformResourceIdentifier","iPAddress","registeredID"]);const t=q(e,e,Le.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));switch(W.assertSchema(t,this.className),this.type=t.result.blockName.idBlock.tagNumber,this.type){case 0:this.value=t.result.blockName;break;case 1:case 2:case 6:{const n=t.result.blockName;n.idBlock.tagClass=1,n.idBlock.tagNumber=22;const r=n.toBER(!1),i=St(r);W.assert(i,"GeneralName value"),this.value=i.result.valueBlock.value}break;case 3:this.value=t.result.blockName;break;case 4:this.value=new Xe({schema:t.result.directoryName});break;case 5:this.value=t.result.ediPartyName;break;case 7:this.value=new Q({valueHex:t.result.blockName.valueBlock.valueHex});break;case 8:{const n=t.result.blockName;n.idBlock.tagClass=1,n.idBlock.tagNumber=6;const r=n.toBER(!1),i=St(r);W.assert(i,"GeneralName registeredID"),this.value=i.result.valueBlock.toString()}break}}toSchema(){switch(this.type){case 0:case 3:case 5:return new V({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:{const e=new ag({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}case 4:return new V({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:{const e=this.value;return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}case 8:{const e=new he({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}default:return Le.schema()}}toJSON(){const e={type:this.type,value:g};if(typeof this.value=="string")e.value=this.value;else try{e.value=this.value.toJSON()}catch{}return e}}Le.CLASS_NAME="GeneralName";const eu="accessMethod",tu="accessLocation",vR=[eu,tu];class yi extends G{constructor(e={}){super(),this.accessMethod=d(e,eu,yi.defaultValues(eu)),this.accessLocation=d(e,tu,yi.defaultValues(tu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case eu:return g;case tu:return new Le;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new he({name:t.accessMethod||g}),Le.schema(t.accessLocation||{})]})}fromSchema(e){X(e,vR);const t=q(e,e,yi.schema({names:{accessMethod:eu,accessLocation:{names:{blockName:tu}}}}));W.assertSchema(t,this.className),this.accessMethod=t.result.accessMethod.valueBlock.toString(),this.accessLocation=new Le({schema:t.result.accessLocation})}toSchema(){return new N({value:[new he({value:this.accessMethod}),this.accessLocation.toSchema()]})}toJSON(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}yi.CLASS_NAME="AccessDescription";const wr="seconds",yr="millis",vr="micros";class Cs extends G{constructor(e={}){super(),wr in e&&(this.seconds=d(e,wr,Cs.defaultValues(wr))),yr in e&&(this.millis=d(e,yr,Cs.defaultValues(yr))),vr in e&&(this.micros=d(e,vr,Cs.defaultValues(vr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wr:case yr:case vr:return 0;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wr:case yr:case vr:return t===Cs.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,optional:!0,value:[new U({optional:!0,name:t.seconds||g}),new ke({name:t.millis||g,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new ke({name:t.micros||g,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){X(e,[wr,yr,vr]);const t=q(e,e,Cs.schema({names:{seconds:wr,millis:yr,micros:vr}}));if(W.assertSchema(t,this.className),"seconds"in t.result&&(this.seconds=t.result.seconds.valueBlock.valueDec),"millis"in t.result){const n=new U({valueHex:t.result.millis.valueBlock.valueHex});this.millis=n.valueBlock.valueDec}if("micros"in t.result){const n=new U({valueHex:t.result.micros.valueBlock.valueHex});this.micros=n.valueBlock.valueDec}}toSchema(){const e=[];if(this.seconds!==void 0&&e.push(new U({value:this.seconds})),this.millis!==void 0){const t=new U({value:this.millis});e.push(new ke({idBlock:{tagClass:3,tagNumber:0},valueHex:t.valueBlock.valueHexView}))}if(this.micros!==void 0){const t=new U({value:this.micros});e.push(new ke({idBlock:{tagClass:3,tagNumber:1},valueHex:t.valueBlock.valueHexView}))}return new N({value:e})}toJSON(){const e={};return this.seconds!==void 0&&(e.seconds=this.seconds),this.millis!==void 0&&(e.millis=this.millis),this.micros!==void 0&&(e.micros=this.micros),e}}Cs.CLASS_NAME="Accuracy";const Yf="algorithmId",Uc="algorithmParams",_k="algorithm",Hp="params",bR=[_k,Hp];class H extends G{constructor(e={}){super(),this.algorithmId=d(e,Yf,H.defaultValues(Yf)),Uc in e&&(this.algorithmParams=d(e,Uc,H.defaultValues(Uc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Yf:return g;case Uc:return new Ee;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Yf:return t===g;case Uc:return t instanceof Ee;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,optional:t.optional||!1,value:[new he({name:t.algorithmIdentifier||g}),new Ee({name:t.algorithmParams||g,optional:!0})]})}fromSchema(e){X(e,bR);const t=q(e,e,H.schema({names:{algorithmIdentifier:_k,algorithmParams:Hp}}));W.assertSchema(t,this.className),this.algorithmId=t.result.algorithm.valueBlock.toString(),Hp in t.result&&(this.algorithmParams=t.result.params)}toSchema(){const e=[];return e.push(new he({value:this.algorithmId})),this.algorithmParams&&!(this.algorithmParams instanceof Ee)&&e.push(this.algorithmParams),new N({value:e})}toJSON(){const e={algorithmId:this.algorithmId};return this.algorithmParams&&!(this.algorithmParams instanceof Ee)&&(e.algorithmParams=this.algorithmParams.toJSON()),e}isEqual(e){return!(e instanceof H)||this.algorithmId!==e.algorithmId?!1:this.algorithmParams?e.algorithmParams?JSON.stringify(this.algorithmParams)===JSON.stringify(e.algorithmParams):!1:!e.algorithmParams}}H.CLASS_NAME="AlgorithmIdentifier";const Oo="altNames",SR=[Oo];class _c extends G{constructor(e={}){super(),this.altNames=d(e,Oo,_c.defaultValues(Oo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Oo:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new _e({name:t.altNames||g,value:Le.schema()})]})}fromSchema(e){X(e,SR);const t=q(e,e,_c.schema({names:{altNames:Oo}}));W.assertSchema(t,this.className),Oo in t.result&&(this.altNames=Array.from(t.result.altNames,n=>new Le({schema:n})))}toSchema(){return new N({value:Array.from(this.altNames,e=>e.toSchema())})}toJSON(){return{altNames:Array.from(this.altNames,e=>e.toJSON())}}}_c.CLASS_NAME="AltName";const Vo="type",Po="values",AR=[Vo,Po];class nt extends G{constructor(e={}){super(),this.type=d(e,Vo,nt.defaultValues(Vo)),this.values=d(e,Po,nt.defaultValues(Po)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Vo:return g;case Po:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Vo:return t===g;case Po:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new he({name:t.type||g}),new vt({name:t.setName||g,value:[new _e({name:t.values||g,value:new Ee})]})]})}fromSchema(e){X(e,AR);const t=q(e,e,nt.schema({names:{type:Vo,values:Po}}));W.assertSchema(t,this.className),this.type=t.result.type.valueBlock.toString(),this.values=t.result.values}toSchema(){return new N({value:[new he({value:this.type}),new vt({value:this.values})]})}toJSON(){return{type:this.type,values:Array.from(this.values,e=>e.toJSON())}}}nt.CLASS_NAME="Attribute";const su="notBeforeTime",nu="notAfterTime",kR=[su,nu];class tn extends G{constructor(e={}){super(),this.notBeforeTime=d(e,su,tn.defaultValues(su)),this.notAfterTime=d(e,nu,tn.defaultValues(nu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case su:case nu:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new ot({name:t.notBeforeTime||g}),new ot({name:t.notAfterTime||g})]})}fromSchema(e){X(e,kR);const t=q(e,e,tn.schema({names:{notBeforeTime:su,notAfterTime:nu}}));W.assertSchema(t,this.className),this.notBeforeTime=t.result.notBeforeTime.toDate(),this.notAfterTime=t.result.notAfterTime.toDate()}toSchema(){return new N({value:[new ot({valueDate:this.notBeforeTime}),new ot({valueDate:this.notAfterTime})]})}toJSON(){return{notBeforeTime:this.notBeforeTime,notAfterTime:this.notAfterTime}}}tn.CLASS_NAME="AttCertValidityPeriod";const Mc="names",yb="generalNames";class bt extends G{constructor(e={}){super(),this.names=d(e,Mc,bt.defaultValues(Mc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"names":return[];default:return super.defaultValues(e)}}static schema(e={},t=!1){const n=d(e,Mc,{});return new N({optional:t,name:n.blockName||g,value:[new _e({name:n.generalNames||g,value:Le.schema()})]})}fromSchema(e){X(e,[Mc,yb]);const t=q(e,e,bt.schema({names:{blockName:Mc,generalNames:yb}}));W.assertSchema(t,this.className),this.names=Array.from(t.result.generalNames,n=>new Le({schema:n}))}toSchema(){return new N({value:Array.from(this.names,e=>e.toSchema())})}toJSON(){return{names:Array.from(this.names,e=>e.toJSON())}}}bt.CLASS_NAME="GeneralNames";const ER="2.5.29.9",CR="2.5.29.14",NR="2.5.29.15",IR="2.5.29.16",Bk="2.5.29.17",xk="2.5.29.18",ay="2.5.29.19",_R="2.5.29.20",BR="2.5.29.27",xR="2.5.29.21",TR="2.5.29.24",Tk="2.5.29.28",Rk="2.5.29.29",Ok="2.5.29.30",Vk="2.5.29.31",oy="2.5.29.46",Pk="2.5.29.32",Os="2.5.29.32.0",RR="1.3.6.1.4.1.311.21.10",Lk="2.5.29.33",ly="2.5.29.35",Dk="2.5.29.36",OR="2.5.29.37",VR="2.5.29.54",cy="1.3.6.1.5.5.7.1.1",PR="1.3.6.1.5.5.7.1.11",LR="1.3.6.1.4.1.11129.2.4.2",DR="1.3.6.1.4.1.311.21.7",UR="1.3.6.1.4.1.311.21.1",MR="1.3.6.1.5.5.7.1.3",uy="1.2.840.113549.1.7.1",Uk="1.2.840.113549.1.7.2",Mk="1.2.840.113549.1.7.3",Hk="1.2.840.113549.1.7.6",HR="1.2.840.113549.1.9.16.1.4",vb="1.2.840.113549.1.9.22.1",$R="1.2.840.113549.1.9.22.2",bb="1.2.840.113549.1.9.22.3",Sb="1.2.840.113549.1.9.23.1",FR="1.3.6.1.5.5.7",KR=`${FR}.48`,Id=`${KR}.1.1`,Fi="keyIdentifier",Ki="authorityCertIssuer",ji="authorityCertSerialNumber",jR=[Fi,Ki,ji];class jn extends G{constructor(e={}){super(),Fi in e&&(this.keyIdentifier=d(e,Fi,jn.defaultValues(Fi))),Ki in e&&(this.authorityCertIssuer=d(e,Ki,jn.defaultValues(Ki))),ji in e&&(this.authorityCertSerialNumber=d(e,ji,jn.defaultValues(ji))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Fi:return new Q;case Ki:return[];case ji:return new U;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new ke({name:t.keyIdentifier||g,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new _e({name:t.authorityCertIssuer||g,value:Le.schema()})]}),new ke({name:t.authorityCertSerialNumber||g,optional:!0,idBlock:{tagClass:3,tagNumber:2}})]})}fromSchema(e){X(e,jR);const t=q(e,e,jn.schema({names:{keyIdentifier:Fi,authorityCertIssuer:Ki,authorityCertSerialNumber:ji}}));W.assertSchema(t,this.className),Fi in t.result&&(this.keyIdentifier=new Q({valueHex:t.result.keyIdentifier.valueBlock.valueHex})),Ki in t.result&&(this.authorityCertIssuer=Array.from(t.result.authorityCertIssuer,n=>new Le({schema:n}))),ji in t.result&&(this.authorityCertSerialNumber=new U({valueHex:t.result.authorityCertSerialNumber.valueBlock.valueHex}))}toSchema(){const e=[];return this.keyIdentifier&&e.push(new ke({idBlock:{tagClass:3,tagNumber:0},valueHex:this.keyIdentifier.valueBlock.valueHexView})),this.authorityCertIssuer&&e.push(new V({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.authorityCertIssuer,t=>t.toSchema())})),this.authorityCertSerialNumber&&e.push(new ke({idBlock:{tagClass:3,tagNumber:2},valueHex:this.authorityCertSerialNumber.valueBlock.valueHexView})),new N({value:e})}toJSON(){const e={};return this.keyIdentifier&&(e.keyIdentifier=this.keyIdentifier.toJSON()),this.authorityCertIssuer&&(e.authorityCertIssuer=Array.from(this.authorityCertIssuer,t=>t.toJSON())),this.authorityCertSerialNumber&&(e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()),e}}jn.CLASS_NAME="AuthorityKeyIdentifier";const Di="pathLenConstraint",Ui="cA";class vi extends G{constructor(e={}){super(),this.cA=d(e,Ui,!1),Di in e&&(this.pathLenConstraint=d(e,Di,0)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ui:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new Cn({optional:!0,name:t.cA||g}),new U({optional:!0,name:t.pathLenConstraint||g})]})}fromSchema(e){X(e,[Ui,Di]);const t=q(e,e,vi.schema({names:{cA:Ui,pathLenConstraint:Di}}));W.assertSchema(t,this.className),Ui in t.result&&(this.cA=t.result.cA.valueBlock.value),Di in t.result&&(t.result.pathLenConstraint.valueBlock.isHexOnly?this.pathLenConstraint=t.result.pathLenConstraint:this.pathLenConstraint=t.result.pathLenConstraint.valueBlock.valueDec)}toSchema(){const e=[];return this.cA!==vi.defaultValues(Ui)&&e.push(new Cn({value:this.cA})),Di in this&&(this.pathLenConstraint instanceof U?e.push(this.pathLenConstraint):e.push(new U({value:this.pathLenConstraint}))),new N({value:e})}toJSON(){const e={};return this.cA!==vi.defaultValues(Ui)&&(e.cA=this.cA),Di in this&&(this.pathLenConstraint instanceof U?e.pathLenConstraint=this.pathLenConstraint.toJSON():e.pathLenConstraint=this.pathLenConstraint),e}}vi.CLASS_NAME="BasicConstraints";const Ig="certificateIndex",_g="keyIndex";class pf extends G{constructor(e={}){super(),this.certificateIndex=d(e,Ig,pf.defaultValues(Ig)),this.keyIndex=d(e,_g,pf.defaultValues(_g)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ig:case _g:return 0;default:return super.defaultValues(e)}}static schema(){return new U}fromSchema(e){if(e.constructor.blockName()!==U.blockName())throw new Error("Object's schema was not verified against input data for CAVersion");let t=e.valueBlock.valueHex.slice(0);const n=new Uint8Array(t);switch(!0){case t.byteLength<4:{const h=new ArrayBuffer(4);new Uint8Array(h).set(n,4-t.byteLength),t=h.slice(0)}break;case t.byteLength>4:{const h=new ArrayBuffer(4);new Uint8Array(h).set(n.slice(0,4)),t=h.slice(0)}break}const r=t.slice(0,2),i=new Uint8Array(r);let a=i[0];i[0]=i[1],i[1]=a;const o=new Uint16Array(r);this.keyIndex=o[0];const l=t.slice(2),c=new Uint8Array(l);a=c[0],c[0]=c[1],c[1]=a;const u=new Uint16Array(l);this.certificateIndex=u[0]}toSchema(){const e=new ArrayBuffer(2),t=new Uint16Array(e);t[0]=this.certificateIndex;const n=new Uint8Array(e);let r=n[0];n[0]=n[1],n[1]=r;const i=new ArrayBuffer(2),a=new Uint16Array(i);a[0]=this.keyIndex;const o=new Uint8Array(i);return r=o[0],o[0]=o[1],o[1]=r,new U({valueHex:lc(i,e)})}toJSON(){return{certificateIndex:this.certificateIndex,keyIndex:this.keyIndex}}}pf.CLASS_NAME="CAVersion";const ru="policyQualifierId",iu="qualifier",JR=[ru,iu];class eo extends G{constructor(e={}){super(),this.policyQualifierId=d(e,ru,eo.defaultValues(ru)),this.qualifier=d(e,iu,eo.defaultValues(iu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ru:return g;case iu:return new Ee;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new he({name:t.policyQualifierId||g}),new Ee({name:t.qualifier||g})]})}fromSchema(e){X(e,JR);const t=q(e,e,eo.schema({names:{policyQualifierId:ru,qualifier:iu}}));W.assertSchema(t,this.className),this.policyQualifierId=t.result.policyQualifierId.valueBlock.toString(),this.qualifier=t.result.qualifier}toSchema(){return new N({value:[new he({value:this.policyQualifierId}),this.qualifier]})}toJSON(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}eo.CLASS_NAME="PolicyQualifierInfo";const au="policyIdentifier",Ji="policyQualifiers",WR=[au,Ji];class to extends G{constructor(e={}){super(),this.policyIdentifier=d(e,au,to.defaultValues(au)),Ji in e&&(this.policyQualifiers=d(e,Ji,to.defaultValues(Ji))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case au:return g;case Ji:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new he({name:t.policyIdentifier||g}),new N({optional:!0,value:[new _e({name:t.policyQualifiers||g,value:eo.schema()})]})]})}fromSchema(e){X(e,WR);const t=q(e,e,to.schema({names:{policyIdentifier:au,policyQualifiers:Ji}}));W.assertSchema(t,this.className),this.policyIdentifier=t.result.policyIdentifier.valueBlock.toString(),Ji in t.result&&(this.policyQualifiers=Array.from(t.result.policyQualifiers,n=>new eo({schema:n})))}toSchema(){const e=[];return e.push(new he({value:this.policyIdentifier})),this.policyQualifiers&&e.push(new N({value:Array.from(this.policyQualifiers,t=>t.toSchema())})),new N({value:e})}toJSON(){const e={policyIdentifier:this.policyIdentifier};return this.policyQualifiers&&(e.policyQualifiers=Array.from(this.policyQualifiers,t=>t.toJSON())),e}}to.CLASS_NAME="PolicyInformation";const ou="certificatePolicies",qR=[ou];class Bc extends G{constructor(e={}){super(),this.certificatePolicies=d(e,ou,Bc.defaultValues(ou)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ou:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new _e({name:t.certificatePolicies||g,value:to.schema()})]})}fromSchema(e){X(e,qR);const t=q(e,e,Bc.schema({names:{certificatePolicies:ou}}));W.assertSchema(t,this.className),this.certificatePolicies=Array.from(t.result.certificatePolicies,n=>new to({schema:n}))}toSchema(){return new N({value:Array.from(this.certificatePolicies,e=>e.toSchema())})}toJSON(){return{certificatePolicies:Array.from(this.certificatePolicies,e=>e.toJSON())}}}Bc.CLASS_NAME="CertificatePolicies";const lu="templateID",Bn="templateMajorVersion",xn="templateMinorVersion",GR=[lu,Bn,xn];class Zl extends G{constructor(e={}){super(),this.templateID=d(e,lu,Zl.defaultValues(lu)),Bn in e&&(this.templateMajorVersion=d(e,Bn,Zl.defaultValues(Bn))),xn in e&&(this.templateMinorVersion=d(e,xn,Zl.defaultValues(xn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case lu:return g;case Bn:case xn:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new he({name:t.templateID||g}),new U({name:t.templateMajorVersion||g,optional:!0}),new U({name:t.templateMinorVersion||g,optional:!0})]})}fromSchema(e){X(e,GR);const t=q(e,e,Zl.schema({names:{templateID:lu,templateMajorVersion:Bn,templateMinorVersion:xn}}));W.assertSchema(t,this.className),this.templateID=t.result.templateID.valueBlock.toString(),Bn in t.result&&(this.templateMajorVersion=t.result.templateMajorVersion.valueBlock.valueDec),xn in t.result&&(this.templateMinorVersion=t.result.templateMinorVersion.valueBlock.valueDec)}toSchema(){const e=[];return e.push(new he({value:this.templateID})),Bn in this&&e.push(new U({value:this.templateMajorVersion})),xn in this&&e.push(new U({value:this.templateMinorVersion})),new N({value:e})}toJSON(){const e={templateID:this.templateID};return Bn in this&&(e.templateMajorVersion=this.templateMajorVersion),xn in this&&(e.templateMinorVersion=this.templateMinorVersion),e}}const Wi="distributionPoint",$k="distributionPointNames",qi="reasons",Gi="cRLIssuer",Fk="cRLIssuerNames",YR=[Wi,$k,qi,Gi,Fk];class Jn extends G{constructor(e={}){super(),Wi in e&&(this.distributionPoint=d(e,Wi,Jn.defaultValues(Wi))),qi in e&&(this.reasons=d(e,qi,Jn.defaultValues(qi))),Gi in e&&(this.cRLIssuer=d(e,Gi,Jn.defaultValues(Gi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Wi:return[];case qi:return new Pe;case Gi:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new lt({value:[new V({name:t.distributionPoint||g,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new _e({name:t.distributionPointNames||g,value:Le.schema()})]}),new V({name:t.distributionPoint||g,optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Xe.schema().valueBlock.value})]})]}),new ke({name:t.reasons||g,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new V({name:t.cRLIssuer||g,optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[new _e({name:t.cRLIssuerNames||g,value:Le.schema()})]})]})}fromSchema(e){X(e,YR);const t=q(e,e,Jn.schema({names:{distributionPoint:Wi,distributionPointNames:$k,reasons:qi,cRLIssuer:Gi,cRLIssuerNames:Fk}}));W.assertSchema(t,this.className),Wi in t.result&&(t.result.distributionPoint.idBlock.tagNumber===0&&(this.distributionPoint=Array.from(t.result.distributionPointNames,n=>new Le({schema:n}))),t.result.distributionPoint.idBlock.tagNumber===1&&(this.distributionPoint=new Xe({schema:new N({value:t.result.distributionPoint.valueBlock.value})}))),qi in t.result&&(this.reasons=new Pe({valueHex:t.result.reasons.valueBlock.valueHex})),Gi in t.result&&(this.cRLIssuer=Array.from(t.result.cRLIssuerNames,n=>new Le({schema:n})))}toSchema(){const e=[];if(this.distributionPoint){let t;this.distributionPoint instanceof Array?t=new V({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,n=>n.toSchema())}):t=new V({idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]}),e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}return this.reasons&&e.push(new ke({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHexView})),this.cRLIssuer&&e.push(new V({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,t=>t.toSchema())})),new N({value:e})}toJSON(){const e={};return this.distributionPoint&&(this.distributionPoint instanceof Array?e.distributionPoint=Array.from(this.distributionPoint,t=>t.toJSON()):e.distributionPoint=this.distributionPoint.toJSON()),this.reasons&&(e.reasons=this.reasons.toJSON()),this.cRLIssuer&&(e.cRLIssuer=Array.from(this.cRLIssuer,t=>t.toJSON())),e}}Jn.CLASS_NAME="DistributionPoint";const cu="distributionPoints",XR=[cu];class ho extends G{constructor(e={}){super(),this.distributionPoints=d(e,cu,ho.defaultValues(cu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case cu:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new _e({name:t.distributionPoints||g,value:Jn.schema()})]})}fromSchema(e){X(e,XR);const t=q(e,e,ho.schema({names:{distributionPoints:cu}}));W.assertSchema(t,this.className),this.distributionPoints=Array.from(t.result.distributionPoints,n=>new Jn({schema:n}))}toSchema(){return new N({value:Array.from(this.distributionPoints,e=>e.toSchema())})}toJSON(){return{distributionPoints:Array.from(this.distributionPoints,e=>e.toJSON())}}}ho.CLASS_NAME="CRLDistributionPoints";const uu="keyPurposes",QR=[uu];class xc extends G{constructor(e={}){super(),this.keyPurposes=d(e,uu,xc.defaultValues(uu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case uu:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new _e({name:t.keyPurposes||g,value:new he})]})}fromSchema(e){X(e,QR);const t=q(e,e,xc.schema({names:{keyPurposes:uu}}));W.assertSchema(t,this.className),this.keyPurposes=Array.from(t.result.keyPurposes,n=>n.valueBlock.toString())}toSchema(){return new N({value:Array.from(this.keyPurposes,e=>new he({value:e}))})}toJSON(){return{keyPurposes:Array.from(this.keyPurposes)}}}xc.CLASS_NAME="ExtKeyUsage";const Hc="accessDescriptions";class fo extends G{constructor(e={}){super(),this.accessDescriptions=d(e,Hc,fo.defaultValues(Hc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Hc:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new _e({name:t.accessDescriptions||g,value:yi.schema()})]})}fromSchema(e){X(e,[Hc]);const t=q(e,e,fo.schema({names:{accessDescriptions:Hc}}));W.assertSchema(t,this.className),this.accessDescriptions=Array.from(t.result.accessDescriptions,n=>new yi({schema:n}))}toSchema(){return new N({value:Array.from(this.accessDescriptions,e=>e.toSchema())})}toJSON(){return{accessDescriptions:Array.from(this.accessDescriptions,e=>e.toJSON())}}}fo.CLASS_NAME="InfoAccess";const Yi="distributionPoint",Kk="distributionPointNames",br="onlyContainsUserCerts",Sr="onlyContainsCACerts",Ar="onlySomeReasons",kr="indirectCRL",Er="onlyContainsAttributeCerts",zR=[Yi,Kk,br,Sr,Ar,kr,Er];class Vt extends G{constructor(e={}){super(),Yi in e&&(this.distributionPoint=d(e,Yi,Vt.defaultValues(Yi))),this.onlyContainsUserCerts=d(e,br,Vt.defaultValues(br)),this.onlyContainsCACerts=d(e,Sr,Vt.defaultValues(Sr)),Ar in e&&(this.onlySomeReasons=d(e,Ar,Vt.defaultValues(Ar))),this.indirectCRL=d(e,kr,Vt.defaultValues(kr)),this.onlyContainsAttributeCerts=d(e,Er,Vt.defaultValues(Er)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Yi:return[];case br:return!1;case Sr:return!1;case Ar:return 0;case kr:return!1;case Er:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new lt({value:[new V({name:t.distributionPoint||g,idBlock:{tagClass:3,tagNumber:0},value:[new _e({name:t.distributionPointNames||g,value:Le.schema()})]}),new V({name:t.distributionPoint||g,idBlock:{tagClass:3,tagNumber:1},value:Xe.schema().valueBlock.value})]})]}),new ke({name:t.onlyContainsUserCerts||g,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new ke({name:t.onlyContainsCACerts||g,optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new ke({name:t.onlySomeReasons||g,optional:!0,idBlock:{tagClass:3,tagNumber:3}}),new ke({name:t.indirectCRL||g,optional:!0,idBlock:{tagClass:3,tagNumber:4}}),new ke({name:t.onlyContainsAttributeCerts||g,optional:!0,idBlock:{tagClass:3,tagNumber:5}})]})}fromSchema(e){X(e,zR);const t=q(e,e,Vt.schema({names:{distributionPoint:Yi,distributionPointNames:Kk,onlyContainsUserCerts:br,onlyContainsCACerts:Sr,onlySomeReasons:Ar,indirectCRL:kr,onlyContainsAttributeCerts:Er}}));if(W.assertSchema(t,this.className),Yi in t.result)switch(!0){case t.result.distributionPoint.idBlock.tagNumber===0:this.distributionPoint=Array.from(t.result.distributionPointNames,n=>new Le({schema:n}));break;case t.result.distributionPoint.idBlock.tagNumber===1:this.distributionPoint=new Xe({schema:new N({value:t.result.distributionPoint.valueBlock.value})});break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}if(br in t.result){const n=new Uint8Array(t.result.onlyContainsUserCerts.valueBlock.valueHex);this.onlyContainsUserCerts=n[0]!==0}if(Sr in t.result){const n=new Uint8Array(t.result.onlyContainsCACerts.valueBlock.valueHex);this.onlyContainsCACerts=n[0]!==0}if(Ar in t.result){const n=new Uint8Array(t.result.onlySomeReasons.valueBlock.valueHex);this.onlySomeReasons=n[0]}if(kr in t.result){const n=new Uint8Array(t.result.indirectCRL.valueBlock.valueHex);this.indirectCRL=n[0]!==0}if(Er in t.result){const n=new Uint8Array(t.result.onlyContainsAttributeCerts.valueBlock.valueHex);this.onlyContainsAttributeCerts=n[0]!==0}}toSchema(){const e=[];if(this.distributionPoint){let t;this.distributionPoint instanceof Array?t=new V({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,n=>n.toSchema())}):(t=this.distributionPoint.toSchema(),t.idBlock.tagClass=3,t.idBlock.tagNumber=1),e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(this.onlyContainsUserCerts!==Vt.defaultValues(br)&&e.push(new ke({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsCACerts!==Vt.defaultValues(Sr)&&e.push(new ke({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer})),this.onlySomeReasons!==void 0){const t=new ArrayBuffer(1),n=new Uint8Array(t);n[0]=this.onlySomeReasons,e.push(new ke({idBlock:{tagClass:3,tagNumber:3},valueHex:t}))}return this.indirectCRL!==Vt.defaultValues(kr)&&e.push(new ke({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsAttributeCerts!==Vt.defaultValues(Er)&&e.push(new ke({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer})),new N({value:e})}toJSON(){const e={};return this.distributionPoint&&(this.distributionPoint instanceof Array?e.distributionPoint=Array.from(this.distributionPoint,t=>t.toJSON()):e.distributionPoint=this.distributionPoint.toJSON()),this.onlyContainsUserCerts!==Vt.defaultValues(br)&&(e.onlyContainsUserCerts=this.onlyContainsUserCerts),this.onlyContainsCACerts!==Vt.defaultValues(Sr)&&(e.onlyContainsCACerts=this.onlyContainsCACerts),Ar in this&&(e.onlySomeReasons=this.onlySomeReasons),this.indirectCRL!==Vt.defaultValues(kr)&&(e.indirectCRL=this.indirectCRL),this.onlyContainsAttributeCerts!==Vt.defaultValues(Er)&&(e.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts),e}}Vt.CLASS_NAME="IssuingDistributionPoint";const hu="base",Lo="minimum",Cr="maximum",ZR=[hu,Lo,Cr];class vn extends G{constructor(e={}){super(),this.base=d(e,hu,vn.defaultValues(hu)),this.minimum=d(e,Lo,vn.defaultValues(Lo)),Cr in e&&(this.maximum=d(e,Cr,vn.defaultValues(Cr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case hu:return new Le;case Lo:return 0;case Cr:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[Le.schema(t.base||{}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new U({name:t.minimum||g})]}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new U({name:t.maximum||g})]})]})}fromSchema(e){X(e,ZR);const t=q(e,e,vn.schema({names:{base:{names:{blockName:hu}},minimum:Lo,maximum:Cr}}));W.assertSchema(t,this.className),this.base=new Le({schema:t.result.base}),Lo in t.result&&(t.result.minimum.valueBlock.isHexOnly?this.minimum=t.result.minimum:this.minimum=t.result.minimum.valueBlock.valueDec),Cr in t.result&&(t.result.maximum.valueBlock.isHexOnly?this.maximum=t.result.maximum:this.maximum=t.result.maximum.valueBlock.valueDec)}toSchema(){const e=[];if(e.push(this.base.toSchema()),this.minimum!==0){let t=0;this.minimum instanceof U?t=this.minimum:t=new U({value:this.minimum}),e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(Cr in this){let t=0;this.maximum instanceof U?t=this.maximum:t=new U({value:this.maximum}),e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[t]}))}return new N({value:e})}toJSON(){const e={base:this.base.toJSON()};return this.minimum!==0&&(typeof this.minimum=="number"?e.minimum=this.minimum:e.minimum=this.minimum.toJSON()),this.maximum!==void 0&&(typeof this.maximum=="number"?e.maximum=this.maximum:e.maximum=this.maximum.toJSON()),e}}vn.CLASS_NAME="GeneralSubtree";const Xi="permittedSubtrees",Qi="excludedSubtrees",eO=[Xi,Qi];class uc extends G{constructor(e={}){super(),Xi in e&&(this.permittedSubtrees=d(e,Xi,uc.defaultValues(Xi))),Qi in e&&(this.excludedSubtrees=d(e,Qi,uc.defaultValues(Qi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Xi:case Qi:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new _e({name:t.permittedSubtrees||g,value:vn.schema()})]}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new _e({name:t.excludedSubtrees||g,value:vn.schema()})]})]})}fromSchema(e){X(e,eO);const t=q(e,e,uc.schema({names:{permittedSubtrees:Xi,excludedSubtrees:Qi}}));W.assertSchema(t,this.className),Xi in t.result&&(this.permittedSubtrees=Array.from(t.result.permittedSubtrees,n=>new vn({schema:n}))),Qi in t.result&&(this.excludedSubtrees=Array.from(t.result.excludedSubtrees,n=>new vn({schema:n})))}toSchema(){const e=[];return this.permittedSubtrees&&e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.permittedSubtrees,t=>t.toSchema())})),this.excludedSubtrees&&e.push(new V({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.excludedSubtrees,t=>t.toSchema())})),new N({value:e})}toJSON(){const e={};return this.permittedSubtrees&&(e.permittedSubtrees=Array.from(this.permittedSubtrees,t=>t.toJSON())),this.excludedSubtrees&&(e.excludedSubtrees=Array.from(this.excludedSubtrees,t=>t.toJSON())),e}}uc.CLASS_NAME="NameConstraints";const Tn="requireExplicitPolicy",Rn="inhibitPolicyMapping",tO=[Tn,Rn];class hc extends G{constructor(e={}){super(),Tn in e&&(this.requireExplicitPolicy=d(e,Tn,hc.defaultValues(Tn))),Rn in e&&(this.inhibitPolicyMapping=d(e,Rn,hc.defaultValues(Rn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Tn:return 0;case Rn:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new ke({name:t.requireExplicitPolicy||g,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new ke({name:t.inhibitPolicyMapping||g,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){X(e,tO);const t=q(e,e,hc.schema({names:{requireExplicitPolicy:Tn,inhibitPolicyMapping:Rn}}));if(W.assertSchema(t,this.className),Tn in t.result){const n=t.result.requireExplicitPolicy;n.idBlock.tagClass=1,n.idBlock.tagNumber=2;const r=n.toBER(!1),i=St(r);W.assert(i,"Integer"),this.requireExplicitPolicy=i.result.valueBlock.valueDec}if(Rn in t.result){const n=t.result.inhibitPolicyMapping;n.idBlock.tagClass=1,n.idBlock.tagNumber=2;const r=n.toBER(!1),i=St(r);W.assert(i,"Integer"),this.inhibitPolicyMapping=i.result.valueBlock.valueDec}}toSchema(){const e=[];if(Tn in this){const t=new U({value:this.requireExplicitPolicy});t.idBlock.tagClass=3,t.idBlock.tagNumber=0,e.push(t)}if(Rn in this){const t=new U({value:this.inhibitPolicyMapping});t.idBlock.tagClass=3,t.idBlock.tagNumber=1,e.push(t)}return new N({value:e})}toJSON(){const e={};return Tn in this&&(e.requireExplicitPolicy=this.requireExplicitPolicy),Rn in this&&(e.inhibitPolicyMapping=this.inhibitPolicyMapping),e}}hc.CLASS_NAME="PolicyConstraints";const fu="issuerDomainPolicy",du="subjectDomainPolicy",sO=[fu,du];class so extends G{constructor(e={}){super(),this.issuerDomainPolicy=d(e,fu,so.defaultValues(fu)),this.subjectDomainPolicy=d(e,du,so.defaultValues(du)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case fu:return g;case du:return g;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new he({name:t.issuerDomainPolicy||g}),new he({name:t.subjectDomainPolicy||g})]})}fromSchema(e){X(e,sO);const t=q(e,e,so.schema({names:{issuerDomainPolicy:fu,subjectDomainPolicy:du}}));W.assertSchema(t,this.className),this.issuerDomainPolicy=t.result.issuerDomainPolicy.valueBlock.toString(),this.subjectDomainPolicy=t.result.subjectDomainPolicy.valueBlock.toString()}toSchema(){return new N({value:[new he({value:this.issuerDomainPolicy}),new he({value:this.subjectDomainPolicy})]})}toJSON(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}so.CLASS_NAME="PolicyMapping";const mu="mappings",nO=[mu];class wf extends G{constructor(e={}){super(),this.mappings=d(e,mu,wf.defaultValues(mu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case mu:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new _e({name:t.mappings||g,value:so.schema()})]})}fromSchema(e){X(e,nO);const t=q(e,e,wf.schema({names:{mappings:mu}}));W.assertSchema(t,this.className),this.mappings=Array.from(t.result.mappings,n=>new so({schema:n}))}toSchema(){return new N({value:Array.from(this.mappings,e=>e.toSchema())})}toJSON(){return{mappings:Array.from(this.mappings,e=>e.toJSON())}}}wf.CLASS_NAME="PolicyMappings";const Nr="notBefore",Ir="notAfter",rO=[Nr,Ir];class fc extends G{constructor(e={}){super(),Nr in e&&(this.notBefore=d(e,Nr,fc.defaultValues(Nr))),Ir in e&&(this.notAfter=d(e,Ir,fc.defaultValues(Ir))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Nr:return new Date;case Ir:return new Date;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new ke({name:t.notBefore||g,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new ke({name:t.notAfter||g,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){X(e,rO);const t=q(e,e,fc.schema({names:{notBefore:Nr,notAfter:Ir}}));if(W.assertSchema(t,this.className),Nr in t.result){const n=new ot;n.fromBuffer(t.result.notBefore.valueBlock.valueHex),this.notBefore=n.toDate()}if(Ir in t.result){const n=new ot({valueHex:t.result.notAfter.valueBlock.valueHex});n.fromBuffer(t.result.notAfter.valueBlock.valueHex),this.notAfter=n.toDate()}}toSchema(){const e=[];return Nr in this&&e.push(new ke({idBlock:{tagClass:3,tagNumber:0},valueHex:new ot({valueDate:this.notBefore}).valueBlock.valueHexView})),Ir in this&&e.push(new ke({idBlock:{tagClass:3,tagNumber:1},valueHex:new ot({valueDate:this.notAfter}).valueBlock.valueHexView})),new N({value:e})}toJSON(){const e={};return this.notBefore&&(e.notBefore=this.notBefore),this.notAfter&&(e.notAfter=this.notAfter),e}}fc.CLASS_NAME="PrivateKeyUsagePeriod";const Do="id",On="type",Uo="values",iO=[Do,On],aO=[Uo];class no extends G{constructor(e={}){super(),this.id=d(e,Do,no.defaultValues(Do)),On in e&&(this.type=d(e,On,no.defaultValues(On))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Do:return g;case On:return new pt;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Do:return t===g;case On:return t instanceof pt;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new he({name:t.id||g}),new Ee({name:t.type||g,optional:!0})]})}fromSchema(e){X(e,iO);const t=q(e,e,no.schema({names:{id:Do,type:On}}));W.assertSchema(t,this.className),this.id=t.result.id.valueBlock.toString(),On in t.result&&(this.type=t.result.type)}toSchema(){const e=[new he({value:this.id})];return On in this&&e.push(this.type),new N({value:e})}toJSON(){const e={id:this.id};return this.type&&(e.type=this.type.toJSON()),e}}no.CLASS_NAME="QCStatement";class yf extends G{constructor(e={}){super(),this.values=d(e,Uo,yf.defaultValues(Uo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Uo:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Uo:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new _e({name:t.values||g,value:no.schema(t.value||{})})]})}fromSchema(e){X(e,aO);const t=q(e,e,yf.schema({names:{values:Uo}}));W.assertSchema(t,this.className),this.values=Array.from(t.result.values,n=>new no({schema:n}))}toSchema(){return new N({value:Array.from(this.values,e=>e.toSchema())})}toJSON(){return{values:Array.from(this.values,e=>e.toJSON())}}}yf.CLASS_NAME="QCStatements";var zi;class bi{static register(e,t,n){this.namedCurves[e.toLowerCase()]=this.namedCurves[t]={name:e,id:t,size:n}}static find(e){return this.namedCurves[e.toLowerCase()]||null}}zi=bi;bi.namedCurves={};zi.register("P-256","1.2.840.10045.3.1.7",32),zi.register("P-384","1.3.132.0.34",48),zi.register("P-521","1.3.132.0.35",66),zi.register("brainpoolP256r1","1.3.36.3.3.2.8.1.1.7",32),zi.register("brainpoolP384r1","1.3.36.3.3.2.8.1.1.11",48),zi.register("brainpoolP512r1","1.3.36.3.3.2.8.1.1.13",64);const Xf="x",Qf="y",zf="namedCurve";class rs extends G{constructor(e={}){super(),this.x=d(e,Xf,rs.defaultValues(Xf)),this.y=d(e,Qf,rs.defaultValues(Qf)),this.namedCurve=d(e,zf,rs.defaultValues(zf)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Xf:case Qf:return _t;case zf:return g;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Xf:case Qf:return t instanceof ArrayBuffer&&Cc(t,rs.defaultValues(e));case zf:return typeof t=="string"&&t===rs.defaultValues(e);default:return super.defaultValues(e)}}static schema(){return new Im}fromSchema(e){const t=ve.toUint8Array(e);if(t[0]!==4)throw new Error("Object's schema was not verified against input data for ECPublicKey");const n=bi.find(this.namedCurve);if(!n)throw new Error(`Incorrect curve OID: ${this.namedCurve}`);const r=n.size;if(t.byteLength!==r*2+1)throw new Error("Object's schema was not verified against input data for ECPublicKey");this.namedCurve=n.name,this.x=t.slice(1,r+1).buffer,this.y=t.slice(1+r,r*2+1).buffer}toSchema(){return new Im({data:lc(new Uint8Array([4]).buffer,this.x,this.y)})}toJSON(){const e=bi.find(this.namedCurve);return{crv:e?e.name:this.namedCurve,x:Dp(Cm(this.x),!0,!0,!1),y:Dp(Cm(this.y),!0,!0,!1)}}fromJSON(e){Ue.assert("json",e,"crv","x","y");let t=0;const n=bi.find(e.crv);n&&(this.namedCurve=n.id,t=n.size);const r=Nc(hf(e.x,!0));if(r.byteLength<t){this.x=new ArrayBuffer(t);const a=new Uint8Array(this.x),o=new Uint8Array(r);a.set(o,1)}else this.x=r.slice(0,t);const i=Nc(hf(e.y,!0));if(i.byteLength<t){this.y=new ArrayBuffer(t);const a=new Uint8Array(this.y),o=new Uint8Array(i);a.set(o,1)}else this.y=i.slice(0,t)}}rs.CLASS_NAME="ECPublicKey";const gu="modulus",pu="publicExponent",oO=[gu,pu];class ro extends G{constructor(e={}){super(),this.modulus=d(e,gu,ro.defaultValues(gu)),this.publicExponent=d(e,pu,ro.defaultValues(pu)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case gu:return new U;case pu:return new U;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new U({name:t.modulus||g}),new U({name:t.publicExponent||g})]})}fromSchema(e){X(e,oO);const t=q(e,e,ro.schema({names:{modulus:gu,publicExponent:pu}}));W.assertSchema(t,this.className),this.modulus=t.result.modulus.convertFromDER(256),this.publicExponent=t.result.publicExponent}toSchema(){return new N({value:[this.modulus.convertToDER(),this.publicExponent]})}toJSON(){return{n:Ae.ToBase64Url(this.modulus.valueBlock.valueHexView),e:Ae.ToBase64Url(this.publicExponent.valueBlock.valueHexView)}}fromJSON(e){Ue.assert("json",e,"n","e");const t=Nc(hf(e.n,!0));this.modulus=new U({valueHex:t.slice(0,Math.pow(2,sR(t.byteLength)))}),this.publicExponent=new U({valueHex:Nc(hf(e.e,!0)).slice(0,3)})}}ro.CLASS_NAME="RSAPublicKey";const wu="algorithm",yu="subjectPublicKey",lO=[wu,yu];class as extends G{constructor(e={}){super(),this.algorithm=d(e,wu,as.defaultValues(wu)),this.subjectPublicKey=d(e,yu,as.defaultValues(yu));const t=d(e,"parsedKey",null);t&&(this.parsedKey=t),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}get parsedKey(){if(this._parsedKey===void 0){switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":if("algorithmParams"in this.algorithm&&this.algorithm.algorithmParams.constructor.blockName()===he.blockName())try{this._parsedKey=new rs({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHexView})}catch{}break;case"1.2.840.113549.1.1.1":{const e=St(this.subjectPublicKey.valueBlock.valueHexView);if(e.offset!==-1)try{this._parsedKey=new ro({schema:e.result})}catch{}}break}this._parsedKey||(this._parsedKey=null)}return this._parsedKey||void 0}set parsedKey(e){this._parsedKey=e}static defaultValues(e){switch(e){case wu:return new H;case yu:return new Pe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[H.schema(t.algorithm||{}),new Pe({name:t.subjectPublicKey||g})]})}fromSchema(e){X(e,lO);const t=q(e,e,as.schema({names:{algorithm:{names:{blockName:wu}},subjectPublicKey:yu}}));W.assertSchema(t,this.className),this.algorithm=new H({schema:t.result.algorithm}),this.subjectPublicKey=t.result.subjectPublicKey}toSchema(){return new N({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}toJSON(){if(!this.parsedKey)return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()};const e={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA";break}const t=this.parsedKey.toJSON();return Object.assign(e,t),e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new rs({json:e}),this.algorithm=new H({algorithmId:"1.2.840.10045.2.1",algorithmParams:new he({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new ro({json:e}),this.algorithm=new H({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new pt});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.subjectPublicKey=new Pe({valueHex:this.parsedKey.toSchema().toBER(!1)})}}async importKey(e,t=Ie(!0)){try{if(!e)throw new Error("Need to provide publicKey input parameter");const n=await t.exportKey("spki",e),r=St(n);try{this.fromSchema(r.result)}catch{throw new Error("Error during initializing object from schema")}}catch(n){const r=n instanceof Error?n.message:`${n}`;throw new Error(`Error during exporting public key: ${r}`)}}}as.CLASS_NAME="PublicKeyInfo";const Mo="version",Ho="privateKey",Ws="namedCurve",_r="publicKey",cO=[Mo,Ho,Ws,_r];class Ps extends G{constructor(e={}){super(),this.version=d(e,Mo,Ps.defaultValues(Mo)),this.privateKey=d(e,Ho,Ps.defaultValues(Ho)),Ws in e&&(this.namedCurve=d(e,Ws,Ps.defaultValues(Ws))),_r in e&&(this.publicKey=d(e,_r,Ps.defaultValues(_r))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Mo:return 1;case Ho:return new Q;case Ws:return g;case _r:return new rs;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Mo:return t===Ps.defaultValues(e);case Ho:return t.isEqual(Ps.defaultValues(e));case Ws:return t===g;case _r:return rs.compareWithDefault(Ws,t.namedCurve)&&rs.compareWithDefault("x",t.x)&&rs.compareWithDefault("y",t.y);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new U({name:t.version||g}),new Q({name:t.privateKey||g}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new he({name:t.namedCurve||g})]}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Pe({name:t.publicKey||g})]})]})}fromSchema(e){X(e,cO);const t=q(e,e,Ps.schema({names:{version:Mo,privateKey:Ho,namedCurve:Ws,publicKey:_r}}));if(W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.privateKey=t.result.privateKey,Ws in t.result&&(this.namedCurve=t.result.namedCurve.valueBlock.toString()),_r in t.result){const n={schema:t.result.publicKey.valueBlock.valueHex};Ws in this&&(n.namedCurve=this.namedCurve),this.publicKey=new rs(n)}}toSchema(){const e=[new U({value:this.version}),this.privateKey];return this.namedCurve&&e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[new he({value:this.namedCurve})]})),this.publicKey&&e.push(new V({idBlock:{tagClass:3,tagNumber:1},value:[new Pe({valueHex:this.publicKey.toSchema().toBER(!1)})]})),new N({value:e})}toJSON(){if(!this.namedCurve||Ps.compareWithDefault(Ws,this.namedCurve))throw new Error('Not enough information for making JSON: absent "namedCurve" value');const e=bi.find(this.namedCurve),t={crv:e?e.name:this.namedCurve,d:Ae.ToBase64Url(this.privateKey.valueBlock.valueHexView)};if(this.publicKey){const n=this.publicKey.toJSON();t.x=n.x,t.y=n.y}return t}fromJSON(e){Ue.assert("json",e,"crv","d");let t=0;const n=bi.find(e.crv);n&&(this.namedCurve=n.id,t=n.size);const r=Ae.FromBase64Url(e.d);if(r.byteLength<t){const i=new ArrayBuffer(t),a=new Uint8Array(i),o=new Uint8Array(r);a.set(o,1),this.privateKey=new Q({valueHex:i})}else this.privateKey=new Q({valueHex:r.slice(0,t)});e.x&&e.y&&(this.publicKey=new rs({json:e}))}}Ps.CLASS_NAME="ECPrivateKey";const vu="prime",bu="exponent",Su="coefficient",uO=[vu,bu,Su];class Wn extends G{constructor(e={}){super(),this.prime=d(e,vu,Wn.defaultValues(vu)),this.exponent=d(e,bu,Wn.defaultValues(bu)),this.coefficient=d(e,Su,Wn.defaultValues(Su)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case vu:return new U;case bu:return new U;case Su:return new U;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new U({name:t.prime||g}),new U({name:t.exponent||g}),new U({name:t.coefficient||g})]})}fromSchema(e){X(e,uO);const t=q(e,e,Wn.schema({names:{prime:vu,exponent:bu,coefficient:Su}}));W.assertSchema(t,this.className),this.prime=t.result.prime.convertFromDER(),this.exponent=t.result.exponent.convertFromDER(),this.coefficient=t.result.coefficient.convertFromDER()}toSchema(){return new N({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}toJSON(){return{r:Ae.ToBase64Url(this.prime.valueBlock.valueHexView),d:Ae.ToBase64Url(this.exponent.valueBlock.valueHexView),t:Ae.ToBase64Url(this.coefficient.valueBlock.valueHexView)}}fromJSON(e){Ue.assert("json",e,"r","d","r"),this.prime=new U({valueHex:Ae.FromBase64Url(e.r)}),this.exponent=new U({valueHex:Ae.FromBase64Url(e.d)}),this.coefficient=new U({valueHex:Ae.FromBase64Url(e.t)})}}Wn.CLASS_NAME="OtherPrimeInfo";const Au="version",ku="modulus",Eu="publicExponent",Cu="privateExponent",Nu="prime1",Iu="prime2",_u="exponent1",Bu="exponent2",xu="coefficient",Zi="otherPrimeInfos",hO=[Au,ku,Eu,Cu,Nu,Iu,_u,Bu,xu,Zi];class es extends G{constructor(e={}){super(),this.version=d(e,Au,es.defaultValues(Au)),this.modulus=d(e,ku,es.defaultValues(ku)),this.publicExponent=d(e,Eu,es.defaultValues(Eu)),this.privateExponent=d(e,Cu,es.defaultValues(Cu)),this.prime1=d(e,Nu,es.defaultValues(Nu)),this.prime2=d(e,Iu,es.defaultValues(Iu)),this.exponent1=d(e,_u,es.defaultValues(_u)),this.exponent2=d(e,Bu,es.defaultValues(Bu)),this.coefficient=d(e,xu,es.defaultValues(xu)),Zi in e&&(this.otherPrimeInfos=d(e,Zi,es.defaultValues(Zi))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Au:return 0;case ku:return new U;case Eu:return new U;case Cu:return new U;case Nu:return new U;case Iu:return new U;case _u:return new U;case Bu:return new U;case xu:return new U;case Zi:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new U({name:t.version||g}),new U({name:t.modulus||g}),new U({name:t.publicExponent||g}),new U({name:t.privateExponent||g}),new U({name:t.prime1||g}),new U({name:t.prime2||g}),new U({name:t.exponent1||g}),new U({name:t.exponent2||g}),new U({name:t.coefficient||g}),new N({optional:!0,value:[new _e({name:t.otherPrimeInfosName||g,value:Wn.schema(t.otherPrimeInfo||{})})]})]})}fromSchema(e){X(e,hO);const t=q(e,e,es.schema({names:{version:Au,modulus:ku,publicExponent:Eu,privateExponent:Cu,prime1:Nu,prime2:Iu,exponent1:_u,exponent2:Bu,coefficient:xu,otherPrimeInfo:{names:{blockName:Zi}}}}));W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.modulus=t.result.modulus.convertFromDER(256),this.publicExponent=t.result.publicExponent,this.privateExponent=t.result.privateExponent.convertFromDER(256),this.prime1=t.result.prime1.convertFromDER(128),this.prime2=t.result.prime2.convertFromDER(128),this.exponent1=t.result.exponent1.convertFromDER(128),this.exponent2=t.result.exponent2.convertFromDER(128),this.coefficient=t.result.coefficient.convertFromDER(128),Zi in t.result&&(this.otherPrimeInfos=Array.from(t.result.otherPrimeInfos,n=>new Wn({schema:n})))}toSchema(){const e=[];return e.push(new U({value:this.version})),e.push(this.modulus.convertToDER()),e.push(this.publicExponent),e.push(this.privateExponent.convertToDER()),e.push(this.prime1.convertToDER()),e.push(this.prime2.convertToDER()),e.push(this.exponent1.convertToDER()),e.push(this.exponent2.convertToDER()),e.push(this.coefficient.convertToDER()),this.otherPrimeInfos&&e.push(new N({value:Array.from(this.otherPrimeInfos,t=>t.toSchema())})),new N({value:e})}toJSON(){const e={n:Ae.ToBase64Url(this.modulus.valueBlock.valueHexView),e:Ae.ToBase64Url(this.publicExponent.valueBlock.valueHexView),d:Ae.ToBase64Url(this.privateExponent.valueBlock.valueHexView),p:Ae.ToBase64Url(this.prime1.valueBlock.valueHexView),q:Ae.ToBase64Url(this.prime2.valueBlock.valueHexView),dp:Ae.ToBase64Url(this.exponent1.valueBlock.valueHexView),dq:Ae.ToBase64Url(this.exponent2.valueBlock.valueHexView),qi:Ae.ToBase64Url(this.coefficient.valueBlock.valueHexView)};return this.otherPrimeInfos&&(e.oth=Array.from(this.otherPrimeInfos,t=>t.toJSON())),e}fromJSON(e){Ue.assert("json",e,"n","e","d","p","q","dp","dq","qi"),this.modulus=new U({valueHex:Ae.FromBase64Url(e.n)}),this.publicExponent=new U({valueHex:Ae.FromBase64Url(e.e)}),this.privateExponent=new U({valueHex:Ae.FromBase64Url(e.d)}),this.prime1=new U({valueHex:Ae.FromBase64Url(e.p)}),this.prime2=new U({valueHex:Ae.FromBase64Url(e.q)}),this.exponent1=new U({valueHex:Ae.FromBase64Url(e.dp)}),this.exponent2=new U({valueHex:Ae.FromBase64Url(e.dq)}),this.coefficient=new U({valueHex:Ae.FromBase64Url(e.qi)}),e.oth&&(this.otherPrimeInfos=Array.from(e.oth,t=>new Wn({json:t})))}}es.CLASS_NAME="RSAPrivateKey";const Tu="version",Ru="privateKeyAlgorithm",Ou="privateKey",ea="attributes",Zf="parsedKey",fO=[Tu,Ru,Ou,ea];class Ns extends G{constructor(e={}){super(),this.version=d(e,Tu,Ns.defaultValues(Tu)),this.privateKeyAlgorithm=d(e,Ru,Ns.defaultValues(Ru)),this.privateKey=d(e,Ou,Ns.defaultValues(Ou)),ea in e&&(this.attributes=d(e,ea,Ns.defaultValues(ea))),Zf in e&&(this.parsedKey=d(e,Zf,Ns.defaultValues(Zf))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Tu:return 0;case Ru:return new H;case Ou:return new Q;case ea:return[];case Zf:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new U({name:t.version||g}),H.schema(t.privateKeyAlgorithm||{}),new Q({name:t.privateKey||g}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new _e({name:t.attributes||g,value:nt.schema()})]})]})}fromSchema(e){X(e,fO);const t=q(e,e,Ns.schema({names:{version:Tu,privateKeyAlgorithm:{names:{blockName:Ru}},privateKey:Ou,attributes:ea}}));switch(W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.privateKeyAlgorithm=new H({schema:t.result.privateKeyAlgorithm}),this.privateKey=t.result.privateKey,ea in t.result&&(this.attributes=Array.from(t.result.attributes,n=>new nt({schema:n}))),this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":{const n=St(this.privateKey.valueBlock.valueHexView);n.offset!==-1&&(this.parsedKey=new es({schema:n.result}))}break;case"1.2.840.10045.2.1":if("algorithmParams"in this.privateKeyAlgorithm&&this.privateKeyAlgorithm.algorithmParams instanceof he){const n=St(this.privateKey.valueBlock.valueHexView);n.offset!==-1&&(this.parsedKey=new Ps({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:n.result}))}break}}toSchema(){const e=[new U({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];return this.attributes&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,t=>t.toSchema())})),new N({value:e})}toJSON(){if(!this.parsedKey){const n={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};return this.attributes&&(n.attributes=Array.from(this.attributes,r=>r.toJSON())),n}const e={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA";break}const t=this.parsedKey.toJSON();return Object.assign(e,t),e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new Ps({json:e}),this.privateKeyAlgorithm=new H({algorithmId:"1.2.840.10045.2.1",algorithmParams:new he({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new es({json:e}),this.privateKeyAlgorithm=new H({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new pt});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.privateKey=new Q({valueHex:this.parsedKey.toSchema().toBER(!1)})}}}Ns.CLASS_NAME="PrivateKeyInfo";const $o="contentType",Fo="contentEncryptionAlgorithm",ta="encryptedContent",dO=[$o,Fo,ta],Ab=1024;class yt extends G{constructor(e={}){if(super(),this.contentType=d(e,$o,yt.defaultValues($o)),this.contentEncryptionAlgorithm=d(e,Fo,yt.defaultValues(Fo)),ta in e&&e.encryptedContent&&(this.encryptedContent=e.encryptedContent,this.encryptedContent.idBlock.tagClass===1&&this.encryptedContent.idBlock.tagNumber===4&&this.encryptedContent.idBlock.isConstructed===!1&&!e.disableSplit)){const t=new Q({idBlock:{isConstructed:!0},isConstructed:!0});let n=0;const r=this.encryptedContent.valueBlock.valueHexView.slice().buffer;let i=r.byteLength;for(;i>0;){const a=new Uint8Array(r,n,n+Ab>r.byteLength?r.byteLength-n:Ab),o=new ArrayBuffer(a.length),l=new Uint8Array(o);for(let c=0;c<l.length;c++)l[c]=a[c];t.valueBlock.value.push(new Q({valueHex:o})),i-=a.length,n+=a.length}this.encryptedContent=t}e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case $o:return g;case Fo:return new H;case ta:return new Q;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case $o:return t===g;case Fo:return t.algorithmId===g&&!("algorithmParams"in t);case ta:return t.isEqual(yt.defaultValues(ta));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new he({name:t.contentType||g}),H.schema(t.contentEncryptionAlgorithm||{}),new lt({value:[new V({name:t.encryptedContent||g,idBlock:{tagClass:3,tagNumber:0},value:[new _e({value:new Q})]}),new ke({name:t.encryptedContent||g,idBlock:{tagClass:3,tagNumber:0}})]})]})}fromSchema(e){X(e,dO);const t=q(e,e,yt.schema({names:{contentType:$o,contentEncryptionAlgorithm:{names:{blockName:Fo}},encryptedContent:ta}}));W.assertSchema(t,this.className),this.contentType=t.result.contentType.valueBlock.toString(),this.contentEncryptionAlgorithm=new H({schema:t.result.contentEncryptionAlgorithm}),ta in t.result&&(this.encryptedContent=t.result.encryptedContent,this.encryptedContent.idBlock.tagClass=1,this.encryptedContent.idBlock.tagNumber=4)}toSchema(){const e={isIndefiniteForm:!1},t=[];if(t.push(new he({value:this.contentType})),t.push(this.contentEncryptionAlgorithm.toSchema()),this.encryptedContent){e.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;const n=this.encryptedContent;n.idBlock.tagClass=3,n.idBlock.tagNumber=0,n.lenBlock.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed,t.push(n)}return new N({lenBlock:e,value:t})}toJSON(){const e={contentType:this.contentType,contentEncryptionAlgorithm:this.contentEncryptionAlgorithm.toJSON()};return this.encryptedContent&&(e.encryptedContent=this.encryptedContent.toJSON()),e}getEncryptedContent(){if(!this.encryptedContent)throw new Error("Parameter 'encryptedContent' is undefined");return Q.prototype.getValue.call(this.encryptedContent)}}yt.CLASS_NAME="EncryptedContentInfo";const Br="hashAlgorithm",xr="maskGenAlgorithm",Tr="saltLength",Rr="trailerField",mO=[Br,xr,Tr,Rr];class Lt extends G{constructor(e={}){super(),this.hashAlgorithm=d(e,Br,Lt.defaultValues(Br)),this.maskGenAlgorithm=d(e,xr,Lt.defaultValues(xr)),this.saltLength=d(e,Tr,Lt.defaultValues(Tr)),this.trailerField=d(e,Rr,Lt.defaultValues(Rr)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Br:return new H({algorithmId:"1.3.14.3.2.26",algorithmParams:new pt});case xr:return new H({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new H({algorithmId:"1.3.14.3.2.26",algorithmParams:new pt}).toSchema()});case Tr:return 20;case Rr:return 1;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new V({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[H.schema(t.hashAlgorithm||{})]}),new V({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[H.schema(t.maskGenAlgorithm||{})]}),new V({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[new U({name:t.saltLength||g})]}),new V({idBlock:{tagClass:3,tagNumber:3},optional:!0,value:[new U({name:t.trailerField||g})]})]})}fromSchema(e){X(e,mO);const t=q(e,e,Lt.schema({names:{hashAlgorithm:{names:{blockName:Br}},maskGenAlgorithm:{names:{blockName:xr}},saltLength:Tr,trailerField:Rr}}));W.assertSchema(t,this.className),Br in t.result&&(this.hashAlgorithm=new H({schema:t.result.hashAlgorithm})),xr in t.result&&(this.maskGenAlgorithm=new H({schema:t.result.maskGenAlgorithm})),Tr in t.result&&(this.saltLength=t.result.saltLength.valueBlock.valueDec),Rr in t.result&&(this.trailerField=t.result.trailerField.valueBlock.valueDec)}toSchema(){const e=[];return this.hashAlgorithm.isEqual(Lt.defaultValues(Br))||e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(Lt.defaultValues(xr))||e.push(new V({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.saltLength!==Lt.defaultValues(Tr)&&e.push(new V({idBlock:{tagClass:3,tagNumber:2},value:[new U({value:this.saltLength})]})),this.trailerField!==Lt.defaultValues(Rr)&&e.push(new V({idBlock:{tagClass:3,tagNumber:3},value:[new U({value:this.trailerField})]})),new N({value:e})}toJSON(){const e={};return this.hashAlgorithm.isEqual(Lt.defaultValues(Br))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(Lt.defaultValues(xr))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.saltLength!==Lt.defaultValues(Tr)&&(e.saltLength=this.saltLength),this.trailerField!==Lt.defaultValues(Rr)&&(e.trailerField=this.trailerField),e}}Lt.CLASS_NAME="RSASSAPSSParams";const Ko="salt",Vu="iterationCount",qs="keyLength",Vn="prf",gO=[Ko,Vu,qs,Vn];class qt extends G{constructor(e={}){super(),this.salt=d(e,Ko,qt.defaultValues(Ko)),this.iterationCount=d(e,Vu,qt.defaultValues(Vu)),qs in e&&(this.keyLength=d(e,qs,qt.defaultValues(qs))),Vn in e&&(this.prf=d(e,Vn,qt.defaultValues(Vn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ko:return{};case Vu:return-1;case qs:return 0;case Vn:return new H({algorithmId:"1.3.14.3.2.26",algorithmParams:new pt});default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new lt({value:[new Q({name:t.saltPrimitive||g}),H.schema(t.saltConstructed||{})]}),new U({name:t.iterationCount||g}),new U({name:t.keyLength||g,optional:!0}),H.schema(t.prf||{names:{optional:!0}})]})}fromSchema(e){X(e,gO);const t=q(e,e,qt.schema({names:{saltPrimitive:Ko,saltConstructed:{names:{blockName:Ko}},iterationCount:Vu,keyLength:qs,prf:{names:{blockName:Vn,optional:!0}}}}));W.assertSchema(t,this.className),this.salt=t.result.salt,this.iterationCount=t.result.iterationCount.valueBlock.valueDec,qs in t.result&&(this.keyLength=t.result.keyLength.valueBlock.valueDec),Vn in t.result&&(this.prf=new H({schema:t.result.prf}))}toSchema(){const e=[];return e.push(this.salt),e.push(new U({value:this.iterationCount})),qs in this&&qt.defaultValues(qs)!==this.keyLength&&e.push(new U({value:this.keyLength})),this.prf&&qt.defaultValues(Vn).isEqual(this.prf)===!1&&e.push(this.prf.toSchema()),new N({value:e})}toJSON(){const e={salt:this.salt.toJSON(),iterationCount:this.iterationCount};return qs in this&&qt.defaultValues(qs)!==this.keyLength&&(e.keyLength=this.keyLength),this.prf&&qt.defaultValues(Vn).isEqual(this.prf)===!1&&(e.prf=this.prf.toJSON()),e}}qt.CLASS_NAME="PBKDF2Params";const Pu="keyDerivationFunc",Lu="encryptionScheme",pO=[Pu,Lu];class io extends G{constructor(e={}){super(),this.keyDerivationFunc=d(e,Pu,io.defaultValues(Pu)),this.encryptionScheme=d(e,Lu,io.defaultValues(Lu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Pu:return new H;case Lu:return new H;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[H.schema(t.keyDerivationFunc||{}),H.schema(t.encryptionScheme||{})]})}fromSchema(e){X(e,pO);const t=q(e,e,io.schema({names:{keyDerivationFunc:{names:{blockName:Pu}},encryptionScheme:{names:{blockName:Lu}}}}));W.assertSchema(t,this.className),this.keyDerivationFunc=new H({schema:t.result.keyDerivationFunc}),this.encryptionScheme=new H({schema:t.result.encryptionScheme})}toSchema(){return new N({value:[this.keyDerivationFunc.toSchema(),this.encryptionScheme.toSchema()]})}toJSON(){return{keyDerivationFunc:this.keyDerivationFunc.toJSON(),encryptionScheme:this.encryptionScheme.toJSON()}}}io.CLASS_NAME="PBES2Params";class wO{constructor(e){this.crypto=e.crypto,this.subtle="webkitSubtle"in e.crypto?e.crypto.webkitSubtle:e.crypto.subtle,this.name=d(e,"name",g)}async encrypt(...e){return this.subtle.encrypt(...e)}async decrypt(...e){return this.subtle.decrypt(...e)}sign(...e){return this.subtle.sign(...e)}async verify(...e){return this.subtle.verify(...e)}async digest(...e){return this.subtle.digest(...e)}async generateKey(...e){return this.subtle.generateKey(...e)}async deriveKey(...e){return this.subtle.deriveKey(...e)}async deriveBits(...e){return this.subtle.deriveBits(...e)}async wrapKey(...e){return this.subtle.wrapKey(...e)}async unwrapKey(...e){return this.subtle.unwrapKey(...e)}exportKey(...e){return this.subtle.exportKey(...e)}importKey(...e){return this.subtle.importKey(...e)}getRandomValues(e){return this.crypto.getRandomValues(e)}}async function kb(s,e,t,n,r,i){let a,o;const l=[];switch(e.toUpperCase()){case"SHA-1":a=20,o=64;break;case"SHA-256":a=32,o=64;break;case"SHA-384":a=48,o=128;break;case"SHA-512":a=64,o=128;break;default:throw new Error("Unsupported hashing algorithm")}const c=new Uint8Array(n),u=new ArrayBuffer(n.byteLength*2+2),h=new Uint8Array(u);for(let fe=0;fe<c.length;fe++)h[fe*2]=0,h[fe*2+1]=c[fe];h[h.length-2]=0,h[h.length-1]=0,n=u.slice(0);const f=new ArrayBuffer(o),m=new Uint8Array(f);for(let fe=0;fe<f.byteLength;fe++)m[fe]=3;const S=r.byteLength,A=o*Math.ceil(S/o),E=new ArrayBuffer(A),T=new Uint8Array(E),x=new Uint8Array(r);for(let fe=0;fe<A;fe++)T[fe]=x[fe%S];const y=n.byteLength,p=o*Math.ceil(y/o),k=new ArrayBuffer(p),C=new Uint8Array(k),L=new Uint8Array(n);for(let fe=0;fe<p;fe++)C[fe]=L[fe%y];const M=E.byteLength+k.byteLength;let F=new ArrayBuffer(M),ne=new Uint8Array(F);ne.set(T),ne.set(C,T.length);const ce=Math.ceil((t>>3)/a);let te=Promise.resolve(F);for(let fe=0;fe<=ce;fe++){te=te.then(Ce=>{const ye=new ArrayBuffer(f.byteLength+Ce.byteLength),ie=new Uint8Array(ye);return ie.set(m),ie.set(ne,m.length),ye});for(let Ce=0;Ce<i;Ce++)te=te.then(ye=>s.digest({name:e},new Uint8Array(ye)));te=te.then(Ce=>{const ye=new ArrayBuffer(o),ie=new Uint8Array(ye);for(let de=0;de<ye.byteLength;de++)ie[de]=Ce[de%Ce.byteLength];const se=Math.ceil(S/o)+Math.ceil(y/o),ae=[];let Re=0,oe=o;for(let de=0;de<se;de++){const Y=Array.from(new Uint8Array(F.slice(Re,Re+oe)));Re+=o,Re+o>F.byteLength&&(oe=F.byteLength-Re);let be=511;for(let Be=ye.byteLength-1;Be>=0;Be--)be>>=8,be+=ie[Be]+Y[Be],Y[Be]=be&255;ae.push(...Y)}return F=new ArrayBuffer(ae.length),ne=new Uint8Array(F),ne.set(ae),l.push(...new Uint8Array(Ce)),F})}return te=te.then(()=>{const fe=new ArrayBuffer(t>>3);return new Uint8Array(fe).set(new Uint8Array(l).slice(0,t>>3)),fe}),te}function jk(s){const e=typeof s=="string"?{name:s}:s;return"hash"in e?{...e,hash:jk(e.hash)}:e}class _m extends wO{async importKey(e,t,n,r,i){var a,o,l,c,u,h;let f={};const m=jk(n);switch(e.toLowerCase()){case"raw":return this.subtle.importKey("raw",t,n,r,i);case"spki":{const S=St(ve.toArrayBuffer(t));W.assert(S,"keyData");const A=new as;try{A.fromSchema(S.result)}catch{throw new Ye("Incorrect keyData")}switch(m.name.toUpperCase()){case"RSA-PSS":{if(!m.hash)throw new Ue("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(m.hash.name.toUpperCase()){case"SHA-1":f.alg="PS1";break;case"SHA-256":f.alg="PS256";break;case"SHA-384":f.alg="PS384";break;case"SHA-512":f.alg="PS512";break;default:throw new Error(`Incorrect hash algorithm: ${m.hash.name.toUpperCase()}`)}}case"RSASSA-PKCS1-V1_5":{if(i=["verify"],f.kty="RSA",f.ext=r,f.key_ops=i,A.algorithm.algorithmId!=="1.2.840.113549.1.1.1")throw new Error(`Incorrect public key algorithm: ${A.algorithm.algorithmId}`);if(!f.alg){if(!m.hash)throw new Ue("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(m.hash.name.toUpperCase()){case"SHA-1":f.alg="RS1";break;case"SHA-256":f.alg="RS256";break;case"SHA-384":f.alg="RS384";break;case"SHA-512":f.alg="RS512";break;default:throw new Error(`Incorrect hash algorithm: ${m.hash.name.toUpperCase()}`)}}const E=A.toJSON();Object.assign(f,E)}break;case"ECDSA":i=["verify"];case"ECDH":{if(f={kty:"EC",ext:r,key_ops:i},A.algorithm.algorithmId!=="1.2.840.10045.2.1")throw new Error(`Incorrect public key algorithm: ${A.algorithm.algorithmId}`);const E=A.toJSON();Object.assign(f,E)}break;case"RSA-OAEP":{if(f.kty="RSA",f.ext=r,f.key_ops=i,this.name.toLowerCase()==="safari")f.alg="RSA-OAEP";else{if(!m.hash)throw new Ue("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(m.hash.name.toUpperCase()){case"SHA-1":f.alg="RSA-OAEP";break;case"SHA-256":f.alg="RSA-OAEP-256";break;case"SHA-384":f.alg="RSA-OAEP-384";break;case"SHA-512":f.alg="RSA-OAEP-512";break;default:throw new Error(`Incorrect hash algorithm: ${m.hash.name.toUpperCase()}`)}}const E=A.toJSON();Object.assign(f,E)}break;case"RSAES-PKCS1-V1_5":{f.kty="RSA",f.ext=r,f.key_ops=i,f.alg="PS1";const E=A.toJSON();Object.assign(f,E)}break;default:throw new Error(`Incorrect algorithm name: ${m.name.toUpperCase()}`)}}break;case"pkcs8":{const S=new Ns,A=St(ve.toArrayBuffer(t));W.assert(A,"keyData");try{S.fromSchema(A.result)}catch{throw new Error("Incorrect keyData")}if(!S.parsedKey)throw new Error("Incorrect keyData");switch(m.name.toUpperCase()){case"RSA-PSS":switch((a=m.hash)===null||a===void 0?void 0:a.name.toUpperCase()){case"SHA-1":f.alg="PS1";break;case"SHA-256":f.alg="PS256";break;case"SHA-384":f.alg="PS384";break;case"SHA-512":f.alg="PS512";break;default:throw new Error(`Incorrect hash algorithm: ${(o=m.hash)===null||o===void 0?void 0:o.name.toUpperCase()}`)}case"RSASSA-PKCS1-V1_5":{if(i=["sign"],f.kty="RSA",f.ext=r,f.key_ops=i,S.privateKeyAlgorithm.algorithmId!=="1.2.840.113549.1.1.1")throw new Error(`Incorrect private key algorithm: ${S.privateKeyAlgorithm.algorithmId}`);if(!("alg"in f))switch((l=m.hash)===null||l===void 0?void 0:l.name.toUpperCase()){case"SHA-1":f.alg="RS1";break;case"SHA-256":f.alg="RS256";break;case"SHA-384":f.alg="RS384";break;case"SHA-512":f.alg="RS512";break;default:throw new Error(`Incorrect hash algorithm: ${(c=m.hash)===null||c===void 0?void 0:c.name.toUpperCase()}`)}const E=S.toJSON();Object.assign(f,E)}break;case"ECDSA":i=["sign"];case"ECDH":{if(f={kty:"EC",ext:r,key_ops:i},S.privateKeyAlgorithm.algorithmId!=="1.2.840.10045.2.1")throw new Error(`Incorrect algorithm: ${S.privateKeyAlgorithm.algorithmId}`);const E=S.toJSON();Object.assign(f,E)}break;case"RSA-OAEP":{if(f.kty="RSA",f.ext=r,f.key_ops=i,this.name.toLowerCase()==="safari")f.alg="RSA-OAEP";else switch((u=m.hash)===null||u===void 0?void 0:u.name.toUpperCase()){case"SHA-1":f.alg="RSA-OAEP";break;case"SHA-256":f.alg="RSA-OAEP-256";break;case"SHA-384":f.alg="RSA-OAEP-384";break;case"SHA-512":f.alg="RSA-OAEP-512";break;default:throw new Error(`Incorrect hash algorithm: ${(h=m.hash)===null||h===void 0?void 0:h.name.toUpperCase()}`)}const E=S.toJSON();Object.assign(f,E)}break;case"RSAES-PKCS1-V1_5":{i=["decrypt"],f.kty="RSA",f.ext=r,f.key_ops=i,f.alg="PS1";const E=S.toJSON();Object.assign(f,E)}break;default:throw new Error(`Incorrect algorithm name: ${m.name.toUpperCase()}`)}}break;case"jwk":f=t;break;default:throw new Error(`Incorrect format: ${e}`)}if(this.name.toLowerCase()==="safari")try{return this.subtle.importKey("jwk",Nc(JSON.stringify(f)),n,r,i)}catch{return this.subtle.importKey("jwk",f,n,r,i)}return this.subtle.importKey("jwk",f,n,r,i)}async exportKey(e,t){let n=await this.subtle.exportKey("jwk",t);switch(this.name.toLowerCase()==="safari"&&n instanceof ArrayBuffer&&(n=JSON.parse(Cm(n))),e.toLowerCase()){case"raw":return this.subtle.exportKey("raw",t);case"spki":{const r=new as;try{r.fromJSON(n)}catch{throw new Error("Incorrect key data")}return r.toSchema().toBER(!1)}case"pkcs8":{const r=new Ns;try{r.fromJSON(n)}catch{throw new Error("Incorrect key data")}return r.toSchema().toBER(!1)}case"jwk":return n;default:throw new Error(`Incorrect format: ${e}`)}}async convert(e,t,n,r,i,a){if(e.toLowerCase()===t.toLowerCase())return n;const o=await this.importKey(e,n,r,i,a);return this.exportKey(t,o)}getAlgorithmByOID(e,t=!1,n){switch(e){case"1.2.840.113549.1.1.1":return{name:"RSAES-PKCS1-v1_5"};case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"}}if(t)throw new Error(`Unsupported algorithm identifier ${n?`for ${n} `:g}: ${e}`);return{}}getOIDByAlgorithm(e,t=!1,n){let r=g;switch(e.name.toUpperCase()){case"RSAES-PKCS1-V1_5":r="1.2.840.113549.1.1.1";break;case"RSASSA-PKCS1-V1_5":switch(e.hash.name.toUpperCase()){case"SHA-1":r="1.2.840.113549.1.1.5";break;case"SHA-256":r="1.2.840.113549.1.1.11";break;case"SHA-384":r="1.2.840.113549.1.1.12";break;case"SHA-512":r="1.2.840.113549.1.1.13";break}break;case"RSA-PSS":r="1.2.840.113549.1.1.10";break;case"RSA-OAEP":r="1.2.840.113549.1.1.7";break;case"ECDSA":switch(e.hash.name.toUpperCase()){case"SHA-1":r="1.2.840.10045.4.1";break;case"SHA-256":r="1.2.840.10045.4.3.2";break;case"SHA-384":r="1.2.840.10045.4.3.3";break;case"SHA-512":r="1.2.840.10045.4.3.4";break}break;case"ECDH":switch(e.kdf.toUpperCase()){case"SHA-1":r="1.3.133.16.840.63.0.2";break;case"SHA-256":r="1.3.132.1.11.1";break;case"SHA-384":r="1.3.132.1.11.2";break;case"SHA-512":r="1.3.132.1.11.3";break}break;case"AES-CTR":break;case"AES-CBC":switch(e.length){case 128:r="2.16.840.1.101.3.4.1.2";break;case 192:r="2.16.840.1.101.3.4.1.22";break;case 256:r="2.16.840.1.101.3.4.1.42";break}break;case"AES-CMAC":break;case"AES-GCM":switch(e.length){case 128:r="2.16.840.1.101.3.4.1.6";break;case 192:r="2.16.840.1.101.3.4.1.26";break;case 256:r="2.16.840.1.101.3.4.1.46";break}break;case"AES-CFB":switch(e.length){case 128:r="2.16.840.1.101.3.4.1.4";break;case 192:r="2.16.840.1.101.3.4.1.24";break;case 256:r="2.16.840.1.101.3.4.1.44";break}break;case"AES-KW":switch(e.length){case 128:r="2.16.840.1.101.3.4.1.5";break;case 192:r="2.16.840.1.101.3.4.1.25";break;case 256:r="2.16.840.1.101.3.4.1.45";break}break;case"HMAC":switch(e.hash.name.toUpperCase()){case"SHA-1":r="1.2.840.113549.2.7";break;case"SHA-256":r="1.2.840.113549.2.9";break;case"SHA-384":r="1.2.840.113549.2.10";break;case"SHA-512":r="1.2.840.113549.2.11";break}break;case"DH":r="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":r="1.3.14.3.2.26";break;case"SHA-256":r="2.16.840.1.101.3.4.2.1";break;case"SHA-384":r="2.16.840.1.101.3.4.2.2";break;case"SHA-512":r="2.16.840.1.101.3.4.2.3";break;case"CONCAT":break;case"HKDF":break;case"PBKDF2":r="1.2.840.113549.1.5.12";break;case"P-256":r="1.2.840.10045.3.1.7";break;case"P-384":r="1.3.132.0.34";break;case"P-521":r="1.3.132.0.35";break}if(!r&&t)throw new Error(`Unsupported algorithm ${n?`for ${n} `:g}: ${e.name}`);return r}getAlgorithmParameters(e,t){let n={algorithm:{},usages:[]};switch(e.toUpperCase()){case"RSAES-PKCS1-V1_5":case"RSASSA-PKCS1-V1_5":switch(t.toLowerCase()){case"generatekey":n={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":n={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(t.toLowerCase()){case"sign":case"verify":n={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":n={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":n={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(t.toLowerCase()){case"encrypt":case"decrypt":n={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":n={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":n={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;case"exportkey":default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(t.toLowerCase()){case"generatekey":n={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":n={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":n={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(t.toLowerCase()){case"exportkey":case"importkey":case"generatekey":n={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":n={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":n={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":n={algorithm:{name:"AES-CBC",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":n={algorithm:{name:"AES-GCM",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":n={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(t.toLowerCase()){case"sign":case"verify":n={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":switch(t.toLowerCase()){case"derivekey":n={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"HKDF"},usages:[]}}break;case"PBKDF2":switch(t.toLowerCase()){case"derivekey":n={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e4},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"PBKDF2"},usages:[]}}break}return n}getHashAlgorithm(e){let t=g;switch(e.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":t="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":t="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":t="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":t="SHA-512";break;case"1.2.840.113549.1.1.10":try{const n=new Lt({schema:e.algorithmParams});if(n.hashAlgorithm){const r=this.getAlgorithmByOID(n.hashAlgorithm.algorithmId);if("name"in r)t=r.name;else return g}else t="SHA-1"}catch{}break}return t}async encryptEncryptedContentInfo(e){Ue.assert(e,"password","contentEncryptionAlgorithm","hmacHashAlgorithm","iterationCount","contentToEncrypt","contentToEncrypt","contentType");const t=this.getOIDByAlgorithm(e.contentEncryptionAlgorithm,!0,"contentEncryptionAlgorithm"),n=this.getOIDByAlgorithm({name:"PBKDF2"},!0,"PBKDF2"),r=this.getOIDByAlgorithm({name:"HMAC",hash:{name:e.hmacHashAlgorithm}},!0,"hmacHashAlgorithm"),i=new ArrayBuffer(16),a=new Uint8Array(i);this.getRandomValues(a);const o=new ArrayBuffer(64),l=new Uint8Array(o);this.getRandomValues(l);const c=new Uint8Array(e.contentToEncrypt),u=new qt({salt:new Q({valueHex:o}),iterationCount:e.iterationCount,prf:new H({algorithmId:r,algorithmParams:new pt})}),h=new Uint8Array(e.password),f=await this.importKey("raw",h,"PBKDF2",!1,["deriveKey"]),m=await this.deriveKey({name:"PBKDF2",hash:{name:e.hmacHashAlgorithm},salt:l,iterations:e.iterationCount},f,e.contentEncryptionAlgorithm,!1,["encrypt"]),S=await this.encrypt({name:e.contentEncryptionAlgorithm.name,iv:a},m,c),A=new io({keyDerivationFunc:new H({algorithmId:n,algorithmParams:u.toSchema()}),encryptionScheme:new H({algorithmId:t,algorithmParams:new Q({valueHex:i})})});return new yt({contentType:e.contentType,contentEncryptionAlgorithm:new H({algorithmId:"1.2.840.113549.1.5.13",algorithmParams:A.toSchema()}),encryptedContent:new Q({valueHex:S})})}async decryptEncryptedContentInfo(e){if(Ue.assert(e,"password","encryptedContentInfo"),e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId!=="1.2.840.113549.1.5.13")throw new Error(`Unknown "contentEncryptionAlgorithm": ${e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId}`);let t;try{t=new io({schema:e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams})}catch{throw new Error('Incorrectly encoded "pbes2Parameters"')}let n;try{n=new qt({schema:t.keyDerivationFunc.algorithmParams})}catch{throw new Error('Incorrectly encoded "pbkdf2Params"')}const r=this.getAlgorithmByOID(t.encryptionScheme.algorithmId,!0),i=t.encryptionScheme.algorithmParams.valueBlock.valueHex,a=new Uint8Array(i),o=n.salt.valueBlock.valueHex,l=new Uint8Array(o),c=n.iterationCount;let u="SHA-1";n.prf&&(u=this.getAlgorithmByOID(n.prf.algorithmId,!0).hash.name);const h=await this.importKey("raw",e.password,"PBKDF2",!1,["deriveKey"]),f=await this.deriveKey({name:"PBKDF2",hash:{name:u},salt:l,iterations:c},h,r,!1,["decrypt"]),m=e.encryptedContentInfo.getEncryptedContent();return this.decrypt({name:r.name,iv:a},f,m)}async stampDataWithPassword(e){if(!(e instanceof Object))throw new Error('Parameters must have type "Object"');Ue.assert(e,"password","hashAlgorithm","iterationCount","salt","contentToStamp");let t;switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error(`Incorrect "parameters.hashAlgorithm" parameter: ${e.hashAlgorithm}`)}const n={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}},r=await kb(this,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount),i=await this.importKey("raw",new Uint8Array(r),n,!1,["sign"]);return this.sign(n,i,new Uint8Array(e.contentToStamp))}async verifyDataStampedWithPassword(e){Ue.assert(e,"password","hashAlgorithm","salt","iterationCount","contentToVerify","signatureToVerify");let t=0;switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error(`Incorrect "parameters.hashAlgorithm" parameter: ${e.hashAlgorithm}`)}const n={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}},r=await kb(this,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount),i=await this.importKey("raw",new Uint8Array(r),n,!1,["verify"]);return this.verify(n,i,new Uint8Array(e.signatureToVerify),new Uint8Array(e.contentToVerify))}async getSignatureParameters(e,t="SHA-1"){this.getOIDByAlgorithm({name:t},!0,"hashAlgorithm");const n=new H,r=this.getAlgorithmParameters(e.algorithm.name,"sign");if(!Object.keys(r.algorithm).length)throw new Error("Parameter 'algorithm' is empty");const i=r.algorithm;switch(i.hash.name=t,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":n.algorithmId=this.getOIDByAlgorithm(i,!0);break;case"RSA-PSS":{switch(t.toUpperCase()){case"SHA-256":i.saltLength=32;break;case"SHA-384":i.saltLength=48;break;case"SHA-512":i.saltLength=64;break}const a={};if(t.toUpperCase()!=="SHA-1"){const l=this.getOIDByAlgorithm({name:t},!0,"hashAlgorithm");a.hashAlgorithm=new H({algorithmId:l,algorithmParams:new pt}),a.maskGenAlgorithm=new H({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:a.hashAlgorithm.toSchema()})}i.saltLength!==20&&(a.saltLength=i.saltLength);const o=new Lt(a);n.algorithmId="1.2.840.113549.1.1.10",n.algorithmParams=o.toSchema()}break;default:throw new Error(`Unsupported signature algorithm: ${e.algorithm.name}`)}return{signatureAlgorithm:n,parameters:r}}async signWithPrivateKey(e,t,n){const r=await this.sign(n.algorithm,t,e);return n.algorithm.name==="ECDSA"?vO(r):r}fillPublicKeyParameters(e,t){const n={},r=this.getHashAlgorithm(t);if(r===g)throw new Error(`Unsupported signature algorithm: ${t.algorithmId}`);let i;t.algorithmId==="1.2.840.113549.1.1.10"?i=t.algorithmId:i=e.algorithm.algorithmId;const a=this.getAlgorithmByOID(i,!0);if(n.algorithm=this.getAlgorithmParameters(a.name,"importKey"),"hash"in n.algorithm.algorithm&&(n.algorithm.algorithm.hash.name=r),a.name==="ECDSA"){const o=e.algorithm;if(!o.algorithmParams)throw new Error("Algorithm parameters for ECDSA public key are missed");const l=o.algorithmParams;if("idBlock"in o.algorithmParams&&!(l.idBlock.tagClass===1&&l.idBlock.tagNumber===6))throw new Error("Incorrect type for ECDSA public key parameters");const c=this.getAlgorithmByOID(l.valueBlock.toString(),!0);n.algorithm.algorithm.namedCurve=c.name}return n}async getPublicKey(e,t,n){n||(n=this.fillPublicKeyParameters(e,t));const r=e.toSchema().toBER(!1);return this.importKey("spki",r,n.algorithm.algorithm,!0,n.algorithm.usages)}async verifyWithPublicKey(e,t,n,r,i){let a;if(i){const c={};let u;r.algorithmId==="1.2.840.113549.1.1.10"?u=r.algorithmId:u=n.algorithm.algorithmId;const h=this.getAlgorithmByOID(u,!0);if(c.algorithm=this.getAlgorithmParameters(h.name,"importKey"),"hash"in c.algorithm.algorithm&&(c.algorithm.algorithm.hash.name=i),h.name==="ECDSA"){let f=!1;if("algorithmParams"in n.algorithm&&"idBlock"in n.algorithm.algorithmParams&&n.algorithm.algorithmParams.idBlock.tagClass===1&&n.algorithm.algorithmParams.idBlock.tagNumber===6&&(f=!0),f===!1)throw new Error("Incorrect type for ECDSA public key parameters");const m=this.getAlgorithmByOID(n.algorithm.algorithmParams.valueBlock.toString(),!0);c.algorithm.algorithm.namedCurve=m.name}a=await this.getPublicKey(n,null,c)}else{if(i=this.getHashAlgorithm(r),!i)throw new Error(`Unsupported signature algorithm: ${r.algorithmId}`);a=await this.getPublicKey(n,r)}const o=this.getAlgorithmParameters(a.algorithm.name,"verify");"hash"in o.algorithm&&(o.algorithm.hash.name=i);let l=t.valueBlock.valueHexView;if(a.algorithm.name==="ECDSA"){const c=bi.find(a.algorithm.namedCurve);if(!c)throw new Error("Unsupported named curve in use");const u=St(l);W.assert(u,"Signature value"),l=bO(u.result,c.size)}if(a.algorithm.name==="RSA-PSS"){const c=new Lt({schema:r.algorithmParams});"saltLength"in c?o.algorithm.saltLength=c.saltLength:o.algorithm.saltLength=20;let u="SHA-1";"hashAlgorithm"in c&&(u=this.getAlgorithmByOID(c.hashAlgorithm.algorithmId,!0).name),o.algorithm.hash.name=u}return this.verify(o.algorithm,a,l,e)}}let Jk={name:"none",crypto:null};function Eb(s){return!!(s&&typeof s=="object"&&"crypto"in s)}function Cb(s,...e){let t=null;if(e.length<2)e.length?t=e[0]:t=typeof self<"u"&&self.crypto?new _m({name:"browser",crypto:self.crypto}):null;else{const n=e[0],r=e[1];Eb(r)?t=r:Eb(n)?t=n:"subtle"in n&&"getRandomValues"in n&&(t=new _m({crypto:n}))}if(typeof process<"u"&&"pid"in process&&typeof global<"u"&&typeof window>"u"){if(typeof global[process.pid]>"u")global[process.pid]={};else if(typeof global[process.pid]!="object")throw new Error(`Name global.${process.pid} already exists and it is not an object`);if(typeof global[process.pid].pkijs>"u")global[process.pid].pkijs={};else if(typeof global[process.pid].pkijs!="object")throw new Error(`Name global.${process.pid}.pkijs already exists and it is not an object`);global[process.pid].pkijs.engine={name:s,crypto:t}}else Jk={name:s,crypto:t}}function yO(){if(typeof process<"u"&&"pid"in process&&typeof global<"u"&&typeof window>"u"){let s;try{s=global[process.pid].pkijs.engine}catch{throw new Error("Please call 'setEngine' before call to 'getEngine'")}return s}return Jk}function Ie(s=!1){const e=yO();if(!e.crypto&&s)throw new Error("Unable to create WebCrypto object");return e.crypto}function vO(s){if(s.byteLength%2!==0)return _t;const e=s.byteLength/2,t=new ArrayBuffer(e);new Uint8Array(t).set(new Uint8Array(s,0,e));const r=new U({valueHex:t}),i=new ArrayBuffer(e);new Uint8Array(i).set(new Uint8Array(s,e,e));const o=new U({valueHex:i});return new N({value:[r.convertToDER(),o.convertToDER()]}).toBER(!1)}function bO(s,e){if(!(s instanceof N&&s.valueBlock.value.length===2&&s.valueBlock.value[0]instanceof U&&s.valueBlock.value[1]instanceof U))return _t;const t=s.valueBlock.value[0].convertFromDER().valueBlock.valueHexView,n=s.valueBlock.value[1].convertFromDER().valueBlock.valueHexView,r=new Uint8Array(e*2);return r.set(t,e-t.byteLength),r.set(n,2*e-n.byteLength),r.buffer}async function SO(s,e,t,n,r){switch(s.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;default:throw new Ye(`Unknown hash function: ${s}`)}if(Ye.assert(e,"zBuffer","ArrayBuffer"),e.byteLength===0)throw new Ye("'zBuffer' has zero length, error");if(Ye.assert(n,"SharedInfo","ArrayBuffer"),t>255)throw new Ye("Please set 'Counter' argument to value less or equal to 255");const i=new ArrayBuffer(4),a=new Uint8Array(i);a[0]=0,a[1]=0,a[2]=0,a[3]=t;let o=_t;o=lc(o,e),o=lc(o,i),o=lc(o,n);const l=await r.digest({name:s},o);return{counter:t,result:l}}async function Nb(s,e,t,n,r=Ie(!0)){let i=0,a=1;switch(s.toUpperCase()){case"SHA-1":i=160;break;case"SHA-256":i=256;break;case"SHA-384":i=384;break;case"SHA-512":i=512;break;default:throw new Ye(`Unknown hash function: ${s}`)}if(Ye.assert(e,"Zbuffer","ArrayBuffer"),e.byteLength===0)throw new Ye("'Zbuffer' has zero length, error");Ye.assert(n,"SharedInfo","ArrayBuffer");const o=t/i;Math.floor(o)>0&&(a=Math.floor(o),o-a>0&&a++);const l=[];for(let f=1;f<=a;f++)l.push(await SO(s,e,f,n,r));let c=_t,u=1,h=!0;for(;h;){h=!1;for(const f of l)if(f.counter===u){c=lc(c,f.result),h=!0;break}u++}if(t>>=3,c.byteLength>t){const f=new ArrayBuffer(t),m=new Uint8Array(f),S=new Uint8Array(c);for(let A=0;A<t;A++)m[A]=S[A];return f}return c}const Bg="version",xg="logID",Tg="extensions",Rg="timestamp",Og="hashAlgorithm",Vg="signatureAlgorithm",Pg="signature",Ib="none",_b="md5",Bb="sha1",xb="sha224",Tb="sha256",Rb="sha384",Ob="sha512",Vb="anonymous",Pb="rsa",Lb="dsa",Db="ecdsa";class mn extends G{constructor(e={}){super(),this.version=d(e,Bg,mn.defaultValues(Bg)),this.logID=d(e,xg,mn.defaultValues(xg)),this.timestamp=d(e,Rg,mn.defaultValues(Rg)),this.extensions=d(e,Tg,mn.defaultValues(Tg)),this.hashAlgorithm=d(e,Og,mn.defaultValues(Og)),this.signatureAlgorithm=d(e,Vg,mn.defaultValues(Vg)),this.signature=d(e,Pg,mn.defaultValues(Pg)),"stream"in e&&e.stream&&this.fromStream(e.stream),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Bg:return 0;case xg:case Tg:return _t;case Rg:return new Date(0);case Og:case Vg:return g;case Pg:return new Ee;default:return super.defaultValues(e)}}fromSchema(e){if(!(e instanceof Im))throw new Error("Object's schema was not verified against input data for SignedCertificateTimestamp");const t=new wi({stream:new ft({buffer:e.data})});this.fromStream(t)}fromStream(e){const t=e.getUint16();if(this.version=e.getBlock(1)[0],this.version===0){this.logID=new Uint8Array(e.getBlock(32)).buffer.slice(0),this.timestamp=new Date(uo(new Uint8Array(e.getBlock(8)),8));const n=e.getUint16();switch(this.extensions=new Uint8Array(e.getBlock(n)).buffer.slice(0),e.getBlock(1)[0]){case 0:this.hashAlgorithm=Ib;break;case 1:this.hashAlgorithm=_b;break;case 2:this.hashAlgorithm=Bb;break;case 3:this.hashAlgorithm=xb;break;case 4:this.hashAlgorithm=Tb;break;case 5:this.hashAlgorithm=Rb;break;case 6:this.hashAlgorithm=Ob;break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}switch(e.getBlock(1)[0]){case 0:this.signatureAlgorithm=Vb;break;case 1:this.signatureAlgorithm=Pb;break;case 2:this.signatureAlgorithm=Lb;break;case 3:this.signatureAlgorithm=Db;break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}const r=e.getUint16(),i=new Uint8Array(e.getBlock(r)).buffer.slice(0),a=St(i);if(W.assert(a,"SignedCertificateTimestamp"),this.signature=a.result,t!==47+n+r)throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}}toSchema(){const e=this.toStream();return new Im({data:e.stream.buffer})}toStream(){const e=new wi;e.appendUint16(47+this.extensions.byteLength+this.signature.valueBeforeDecodeView.byteLength),e.appendChar(this.version),e.appendView(new Uint8Array(this.logID));const t=new ArrayBuffer(8),n=new Uint8Array(t),r=ar(this.timestamp.valueOf(),8);n.set(new Uint8Array(r),8-r.byteLength),e.appendView(n),e.appendUint16(this.extensions.byteLength),this.extensions.byteLength&&e.appendView(new Uint8Array(this.extensions));let i;switch(this.hashAlgorithm.toLowerCase()){case Ib:i=0;break;case _b:i=1;break;case Bb:i=2;break;case xb:i=3;break;case Tb:i=4;break;case Rb:i=5;break;case Ob:i=6;break;default:throw new Error(`Incorrect data for hashAlgorithm: ${this.hashAlgorithm}`)}e.appendChar(i);let a;switch(this.signatureAlgorithm.toLowerCase()){case Vb:a=0;break;case Pb:a=1;break;case Lb:a=2;break;case Db:a=3;break;default:throw new Error(`Incorrect data for signatureAlgorithm: ${this.signatureAlgorithm}`)}e.appendChar(a);const o=this.signature.toBER(!1);return e.appendUint16(o.byteLength),e.appendView(new Uint8Array(o)),e}toJSON(){return{version:this.version,logID:db(this.logID),timestamp:this.timestamp,extensions:db(this.extensions),hashAlgorithm:this.hashAlgorithm,signatureAlgorithm:this.signatureAlgorithm,signature:this.signature.toJSON()}}async verify(e,t,n=0,r=Ie(!0)){const i=Dp(Cm(this.logID));let a=null;const o=new wi;for(const m of e)if(m.log_id===i){a=m.key;break}if(!a)throw new Error(`Public key not found for CT with logId: ${i}`);const l=Nc(hf(a)),c=as.fromBER(l);o.appendChar(0),o.appendChar(0);const u=new ArrayBuffer(8),h=new Uint8Array(u),f=ar(this.timestamp.valueOf(),8);return h.set(new Uint8Array(f),8-f.byteLength),o.appendView(h),o.appendUint16(n),n===0&&o.appendUint24(t.byteLength),o.appendView(new Uint8Array(t)),o.appendUint16(this.extensions.byteLength),this.extensions.byteLength!==0&&o.appendView(new Uint8Array(this.extensions)),r.verifyWithPublicKey(o.buffer.slice(0,o.length),new Q({valueHex:this.signature.toBER(!1)}),c,{algorithmId:g},"SHA-256")}}mn.CLASS_NAME="SignedCertificateTimestamp";const ed="timestamps";class lg extends G{constructor(e={}){super(),this.timestamps=d(e,ed,lg.defaultValues(ed)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ed:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ed:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){var t;const n=d(e,"names",{});return(t=n.optional)!==null&&t!==void 0||(n.optional=!1),new Q({name:n.blockName||"SignedCertificateTimestampList",optional:n.optional})}fromSchema(e){if(!(e instanceof Q))throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");const t=new wi({stream:new ft({buffer:e.valueBlock.valueHex})});if(t.getUint16()!==t.length)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");for(;t.length;)this.timestamps.push(new mn({stream:t}))}toSchema(){const e=new wi;let t=0;const n=[];for(const r of this.timestamps){const i=r.toStream();n.push(i),t+=i.stream.buffer.byteLength}e.appendUint16(t);for(const r of n)e.appendView(r.stream.view);return new Q({valueHex:e.stream.buffer.slice(0)})}toJSON(){return{timestamps:Array.from(this.timestamps,e=>e.toJSON())}}}lg.CLASS_NAME="SignedCertificateTimestampList";const Du="attributes",AO=[Du];class vf extends G{constructor(e={}){super(),this.attributes=d(e,Du,vf.defaultValues(Du)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Du:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new _e({name:t.attributes||g,value:nt.schema()})]})}fromSchema(e){X(e,AO);const t=q(e,e,vf.schema({names:{attributes:Du}}));W.assertSchema(t,this.className),this.attributes=Array.from(t.result.attributes,n=>new nt({schema:n}))}toSchema(){return new N({value:Array.from(this.attributes,e=>e.toSchema())})}toJSON(){return{attributes:Array.from(this.attributes,e=>e.toJSON())}}}vf.CLASS_NAME="SubjectDirectoryAttributes";class ut{static getItems(){return this.types||(this.types={},ut.register(Bk,"SubjectAltName",_c),ut.register(xk,"IssuerAltName",_c),ut.register(ly,"AuthorityKeyIdentifier",jn),ut.register(ay,"BasicConstraints",vi),ut.register(UR,"MicrosoftCaVersion",pf),ut.register(Pk,"CertificatePolicies",Bc),ut.register(RR,"CertificatePoliciesMicrosoft",Bc),ut.register(DR,"MicrosoftCertTemplateV2",Zl),ut.register(Vk,"CRLDistributionPoints",ho),ut.register(oy,"FreshestCRL",ho),ut.register(OR,"ExtKeyUsage",xc),ut.register(Rk,"CertificateIssuer",bt),ut.register(cy,"AuthorityInfoAccess",fo),ut.register(PR,"SubjectInfoAccess",fo),ut.register(Tk,"IssuingDistributionPoint",Vt),ut.register(Ok,"NameConstraints",uc),ut.register(Dk,"PolicyConstraints",hc),ut.register(Lk,"PolicyMappings",wf),ut.register(IR,"PrivateKeyUsagePeriod",fc),ut.register(MR,"QCStatements",yf),ut.register(LR,"SignedCertificateTimestampList",lg),ut.register(ER,"SubjectDirectoryAttributes",vf)),this.types}static fromBER(e,t){const n=St(t);if(n.offset===-1)return null;const r=this.find(e);if(r)try{return new r.type({schema:n.result})}catch{const a=new r.type;return a.parsingError=`Incorrectly formatted value of extension ${r.name} (${e})`,a}return n.result}static find(e){return this.getItems()[e]||null}static register(e,t,n){this.getItems()[e]={name:t,type:n}}}const Uu="extnID",Or="critical",Mu="extnValue",td="parsedValue",kO=[Uu,Or,Mu];class Je extends G{constructor(e={}){super(),this.extnID=d(e,Uu,Je.defaultValues(Uu)),this.critical=d(e,Or,Je.defaultValues(Or)),Mu in e?this.extnValue=new Q({valueHex:e.extnValue}):this.extnValue=Je.defaultValues(Mu),td in e&&(this.parsedValue=d(e,td,Je.defaultValues(td))),e.schema&&this.fromSchema(e.schema)}get parsedValue(){if(this._parsedValue===void 0){const e=ut.fromBER(this.extnID,this.extnValue.valueBlock.valueHexView);this._parsedValue=e}return this._parsedValue||void 0}set parsedValue(e){this._parsedValue=e}static defaultValues(e){switch(e){case Uu:return g;case Or:return!1;case Mu:return new Q;case td:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new he({name:t.extnID||g}),new Cn({name:t.critical||g,optional:!0}),new Q({name:t.extnValue||g})]})}fromSchema(e){X(e,kO);const t=q(e,e,Je.schema({names:{extnID:Uu,critical:Or,extnValue:Mu}}));W.assertSchema(t,this.className),this.extnID=t.result.extnID.valueBlock.toString(),Or in t.result&&(this.critical=t.result.critical.valueBlock.value),this.extnValue=t.result.extnValue}toSchema(){const e=[];return e.push(new he({value:this.extnID})),this.critical!==Je.defaultValues(Or)&&e.push(new Cn({value:this.critical})),e.push(this.extnValue),new N({value:e})}toJSON(){const e={extnID:this.extnID,extnValue:this.extnValue.toJSON()};return this.critical!==Je.defaultValues(Or)&&(e.critical=this.critical),this.parsedValue&&this.parsedValue.toJSON&&(e.parsedValue=this.parsedValue.toJSON()),e}}Je.CLASS_NAME="Extension";const Hu="extensions",EO=[Hu];class ct extends G{constructor(e={}){super(),this.extensions=d(e,Hu,ct.defaultValues(Hu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Hu:return[];default:return super.defaultValues(e)}}static schema(e={},t=!1){const n=d(e,"names",{});return new N({optional:t,name:n.blockName||g,value:[new _e({name:n.extensions||g,value:Je.schema(n.extension||{})})]})}fromSchema(e){X(e,EO);const t=q(e,e,ct.schema({names:{extensions:Hu}}));W.assertSchema(t,this.className),this.extensions=Array.from(t.result.extensions,n=>new Je({schema:n}))}toSchema(){return new N({value:Array.from(this.extensions,e=>e.toSchema())})}toJSON(){return{extensions:this.extensions.map(e=>e.toJSON())}}}ct.CLASS_NAME="Extensions";const $u="issuer",Fu="serialNumber",sa="issuerUID",CO=[$u,Fu,sa];class is extends G{constructor(e={}){super(),this.issuer=d(e,$u,is.defaultValues($u)),this.serialNumber=d(e,Fu,is.defaultValues(Fu)),sa in e&&(this.issuerUID=d(e,sa,is.defaultValues(sa))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case $u:return new bt;case Fu:return new U;case sa:return new Pe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[bt.schema(t.issuer||{}),new U({name:t.serialNumber||g}),new Pe({optional:!0,name:t.issuerUID||g})]})}fromSchema(e){X(e,CO);const t=q(e,e,is.schema({names:{issuer:{names:{blockName:$u}},serialNumber:Fu,issuerUID:sa}}));W.assertSchema(t,this.className),this.issuer=new bt({schema:t.result.issuer}),this.serialNumber=t.result.serialNumber,sa in t.result&&(this.issuerUID=t.result.issuerUID)}toSchema(){const e=new N({value:[this.issuer.toSchema(),this.serialNumber]});return this.issuerUID&&e.valueBlock.value.push(this.issuerUID),e}toJSON(){const e={issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()};return this.issuerUID&&(e.issuerUID=this.issuerUID.toJSON()),e}}is.CLASS_NAME="IssuerSerial";const Ku="version",na="baseCertificateID",ra="subjectName",ju="issuer",Ju="signature",Wu="serialNumber",qu="attrCertValidityPeriod",Gu="attributes",ia="issuerUniqueID",aa="extensions",NO=[Ku,na,ra,ju,Ju,Wu,qu,Gu,ia,aa];class Wt extends G{constructor(e={}){super(),this.version=d(e,Ku,Wt.defaultValues(Ku)),na in e&&(this.baseCertificateID=d(e,na,Wt.defaultValues(na))),ra in e&&(this.subjectName=d(e,ra,Wt.defaultValues(ra))),this.issuer=d(e,ju,Wt.defaultValues(ju)),this.signature=d(e,Ju,Wt.defaultValues(Ju)),this.serialNumber=d(e,Wu,Wt.defaultValues(Wu)),this.attrCertValidityPeriod=d(e,qu,Wt.defaultValues(qu)),this.attributes=d(e,Gu,Wt.defaultValues(Gu)),ia in e&&(this.issuerUniqueID=d(e,ia,Wt.defaultValues(ia))),aa in e&&(this.extensions=d(e,aa,Wt.defaultValues(aa))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ku:return 0;case na:return new is;case ra:return new bt;case ju:return new bt;case Ju:return new H;case Wu:return new U;case qu:return new tn;case Gu:return[];case ia:return new Pe;case aa:return new ct;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new U({name:t.version||g}),new lt({value:[new V({name:t.baseCertificateID||g,idBlock:{tagClass:3,tagNumber:0},value:is.schema().valueBlock.value}),new V({name:t.subjectName||g,idBlock:{tagClass:3,tagNumber:1},value:bt.schema().valueBlock.value})]}),bt.schema({names:{blockName:t.issuer||g}}),H.schema(t.signature||{}),new U({name:t.serialNumber||g}),tn.schema(t.attrCertValidityPeriod||{}),new N({name:t.attributes||g,value:[new _e({value:nt.schema()})]}),new Pe({optional:!0,name:t.issuerUniqueID||g}),ct.schema(t.extensions||{},!0)]})}fromSchema(e){X(e,NO);const t=q(e,e,Wt.schema({names:{version:Ku,baseCertificateID:na,subjectName:ra,issuer:ju,signature:{names:{blockName:Ju}},serialNumber:Wu,attrCertValidityPeriod:{names:{blockName:qu}},attributes:Gu,issuerUniqueID:ia,extensions:{names:{blockName:aa}}}}));W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,na in t.result&&(this.baseCertificateID=new is({schema:new N({value:t.result.baseCertificateID.valueBlock.value})})),ra in t.result&&(this.subjectName=new bt({schema:new N({value:t.result.subjectName.valueBlock.value})})),this.issuer=t.result.issuer,this.signature=new H({schema:t.result.signature}),this.serialNumber=t.result.serialNumber,this.attrCertValidityPeriod=new tn({schema:t.result.attrCertValidityPeriod}),this.attributes=Array.from(t.result.attributes.valueBlock.value,n=>new nt({schema:n})),ia in t.result&&(this.issuerUniqueID=t.result.issuerUniqueID),aa in t.result&&(this.extensions=new ct({schema:t.result.extensions}))}toSchema(){const e=new N({value:[new U({value:this.version})]});return this.baseCertificateID&&e.valueBlock.value.push(new V({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.subjectName&&e.valueBlock.value.push(new V({idBlock:{tagClass:3,tagNumber:1},value:this.subjectName.toSchema().valueBlock.value})),e.valueBlock.value.push(this.issuer.toSchema()),e.valueBlock.value.push(this.signature.toSchema()),e.valueBlock.value.push(this.serialNumber),e.valueBlock.value.push(this.attrCertValidityPeriod.toSchema()),e.valueBlock.value.push(new N({value:Array.from(this.attributes,t=>t.toSchema())})),this.issuerUniqueID&&e.valueBlock.value.push(this.issuerUniqueID),this.extensions&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){const e={version:this.version};return this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.subjectName&&(e.subjectName=this.subjectName.toJSON()),e.issuer=this.issuer.toJSON(),e.signature=this.signature.toJSON(),e.serialNumber=this.serialNumber.toJSON(),e.attrCertValidityPeriod=this.attrCertValidityPeriod.toJSON(),e.attributes=Array.from(this.attributes,t=>t.toJSON()),this.issuerUniqueID&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),this.extensions&&(e.extensions=this.extensions.toJSON()),e}}Wt.CLASS_NAME="AttributeCertificateInfoV1";const Yu="acinfo",Xu="signatureAlgorithm",Qu="signatureValue",IO=[Yu,Qu,Xu];class qn extends G{constructor(e={}){super(),this.acinfo=d(e,Yu,qn.defaultValues(Yu)),this.signatureAlgorithm=d(e,Xu,qn.defaultValues(Xu)),this.signatureValue=d(e,Qu,qn.defaultValues(Qu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Yu:return new Wt;case Xu:return new H;case Qu:return new Pe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[Wt.schema(t.acinfo||{}),H.schema(t.signatureAlgorithm||{}),new Pe({name:t.signatureValue||g})]})}fromSchema(e){X(e,IO);const t=q(e,e,qn.schema({names:{acinfo:{names:{blockName:Yu}},signatureAlgorithm:{names:{blockName:Xu}},signatureValue:Qu}}));W.assertSchema(t,this.className),this.acinfo=new Wt({schema:t.result.acinfo}),this.signatureAlgorithm=new H({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}toSchema(){return new N({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}qn.CLASS_NAME="AttributeCertificateV1";const zu="digestedObjectType",oa="otherObjectTypeID",Zu="digestAlgorithm",eh="objectDigest",_O=[zu,oa,Zu,eh];class _s extends G{constructor(e={}){super(),this.digestedObjectType=d(e,zu,_s.defaultValues(zu)),oa in e&&(this.otherObjectTypeID=d(e,oa,_s.defaultValues(oa))),this.digestAlgorithm=d(e,Zu,_s.defaultValues(Zu)),this.objectDigest=d(e,eh,_s.defaultValues(eh)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case zu:return new Ei;case oa:return new he;case Zu:return new H;case eh:return new Pe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new Ei({name:t.digestedObjectType||g}),new he({optional:!0,name:t.otherObjectTypeID||g}),H.schema(t.digestAlgorithm||{}),new Pe({name:t.objectDigest||g})]})}fromSchema(e){X(e,_O);const t=q(e,e,_s.schema({names:{digestedObjectType:zu,otherObjectTypeID:oa,digestAlgorithm:{names:{blockName:Zu}},objectDigest:eh}}));W.assertSchema(t,this.className),this.digestedObjectType=t.result.digestedObjectType,oa in t.result&&(this.otherObjectTypeID=t.result.otherObjectTypeID),this.digestAlgorithm=new H({schema:t.result.digestAlgorithm}),this.objectDigest=t.result.objectDigest}toSchema(){const e=new N({value:[this.digestedObjectType]});return this.otherObjectTypeID&&e.valueBlock.value.push(this.otherObjectTypeID),e.valueBlock.value.push(this.digestAlgorithm.toSchema()),e.valueBlock.value.push(this.objectDigest),e}toJSON(){const e={digestedObjectType:this.digestedObjectType.toJSON(),digestAlgorithm:this.digestAlgorithm.toJSON(),objectDigest:this.objectDigest.toJSON()};return this.otherObjectTypeID&&(e.otherObjectTypeID=this.otherObjectTypeID.toJSON()),e}}_s.CLASS_NAME="ObjectDigestInfo";const la="issuerName",ca="baseCertificateID",ua="objectDigestInfo",BO=[la,ca,ua];class ui extends G{constructor(e={}){super(),la in e&&(this.issuerName=d(e,la,ui.defaultValues(la))),ca in e&&(this.baseCertificateID=d(e,ca,ui.defaultValues(ca))),ua in e&&(this.objectDigestInfo=d(e,ua,ui.defaultValues(ua))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case la:return new bt;case ca:return new is;case ua:return new _s;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[bt.schema({names:{blockName:t.issuerName}},!0),new V({optional:!0,name:t.baseCertificateID||g,idBlock:{tagClass:3,tagNumber:0},value:is.schema().valueBlock.value}),new V({optional:!0,name:t.objectDigestInfo||g,idBlock:{tagClass:3,tagNumber:1},value:_s.schema().valueBlock.value})]})}fromSchema(e){X(e,BO);const t=q(e,e,ui.schema({names:{issuerName:la,baseCertificateID:ca,objectDigestInfo:ua}}));W.assertSchema(t,this.className),la in t.result&&(this.issuerName=new bt({schema:t.result.issuerName})),ca in t.result&&(this.baseCertificateID=new is({schema:new N({value:t.result.baseCertificateID.valueBlock.value})})),ua in t.result&&(this.objectDigestInfo=new _s({schema:new N({value:t.result.objectDigestInfo.valueBlock.value})}))}toSchema(){const e=new N;return this.issuerName&&e.valueBlock.value.push(this.issuerName.toSchema()),this.baseCertificateID&&e.valueBlock.value.push(new V({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.objectDigestInfo&&e.valueBlock.value.push(new V({idBlock:{tagClass:3,tagNumber:1},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){const e={};return this.issuerName&&(e.issuerName=this.issuerName.toJSON()),this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.objectDigestInfo&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}ui.CLASS_NAME="V2Form";const ha="baseCertificateID",fa="entityName",da="objectDigestInfo",xO=[ha,fa,da];class Gn extends G{constructor(e={}){super(),ha in e&&(this.baseCertificateID=d(e,ha,Gn.defaultValues(ha))),fa in e&&(this.entityName=d(e,fa,Gn.defaultValues(fa))),da in e&&(this.objectDigestInfo=d(e,da,Gn.defaultValues(da))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ha:return new is;case fa:return new bt;case da:return new _s;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new V({optional:!0,name:t.baseCertificateID||g,idBlock:{tagClass:3,tagNumber:0},value:is.schema().valueBlock.value}),new V({optional:!0,name:t.entityName||g,idBlock:{tagClass:3,tagNumber:1},value:bt.schema().valueBlock.value}),new V({optional:!0,name:t.objectDigestInfo||g,idBlock:{tagClass:3,tagNumber:2},value:_s.schema().valueBlock.value})]})}fromSchema(e){X(e,xO);const t=q(e,e,Gn.schema({names:{baseCertificateID:ha,entityName:fa,objectDigestInfo:da}}));W.assertSchema(t,this.className),ha in t.result&&(this.baseCertificateID=new is({schema:new N({value:t.result.baseCertificateID.valueBlock.value})})),fa in t.result&&(this.entityName=new bt({schema:new N({value:t.result.entityName.valueBlock.value})})),da in t.result&&(this.objectDigestInfo=new _s({schema:new N({value:t.result.objectDigestInfo.valueBlock.value})}))}toSchema(){const e=new N;return this.baseCertificateID&&e.valueBlock.value.push(new V({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.entityName&&e.valueBlock.value.push(new V({idBlock:{tagClass:3,tagNumber:1},value:this.entityName.toSchema().valueBlock.value})),this.objectDigestInfo&&e.valueBlock.value.push(new V({idBlock:{tagClass:3,tagNumber:2},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){const e={};return this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.entityName&&(e.entityName=this.entityName.toJSON()),this.objectDigestInfo&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}Gn.CLASS_NAME="Holder";const th="version",sh="holder",nh="issuer",rh="signature",ih="serialNumber",ah="attrCertValidityPeriod",oh="attributes",ma="issuerUniqueID",ga="extensions",TO=[th,sh,nh,rh,ih,ah,oh,ma,ga];class ts extends G{constructor(e={}){super(),this.version=d(e,th,ts.defaultValues(th)),this.holder=d(e,sh,ts.defaultValues(sh)),this.issuer=d(e,nh,ts.defaultValues(nh)),this.signature=d(e,rh,ts.defaultValues(rh)),this.serialNumber=d(e,ih,ts.defaultValues(ih)),this.attrCertValidityPeriod=d(e,ah,ts.defaultValues(ah)),this.attributes=d(e,oh,ts.defaultValues(oh)),ma in e&&(this.issuerUniqueID=d(e,ma,ts.defaultValues(ma))),ga in e&&(this.extensions=d(e,ga,ts.defaultValues(ga))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case th:return 1;case sh:return new Gn;case nh:return{};case rh:return new H;case ih:return new U;case ah:return new tn;case oh:return[];case ma:return new Pe;case ga:return new ct;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new U({name:t.version||g}),Gn.schema(t.holder||{}),new lt({value:[bt.schema({names:{blockName:t.issuer||g}}),new V({name:t.issuer||g,idBlock:{tagClass:3,tagNumber:0},value:ui.schema().valueBlock.value})]}),H.schema(t.signature||{}),new U({name:t.serialNumber||g}),tn.schema(t.attrCertValidityPeriod||{}),new N({name:t.attributes||g,value:[new _e({value:nt.schema()})]}),new Pe({optional:!0,name:t.issuerUniqueID||g}),ct.schema(t.extensions||{},!0)]})}fromSchema(e){X(e,TO);const t=q(e,e,ts.schema({names:{version:th,holder:{names:{blockName:sh}},issuer:nh,signature:{names:{blockName:rh}},serialNumber:ih,attrCertValidityPeriod:{names:{blockName:ah}},attributes:oh,issuerUniqueID:ma,extensions:{names:{blockName:ga}}}}));switch(W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.holder=new Gn({schema:t.result.holder}),t.result.issuer.idBlock.tagClass){case 3:this.issuer=new ui({schema:new N({value:t.result.issuer.valueBlock.value})});break;case 1:default:throw new Error("Incorrect value for 'issuer' in AttributeCertificateInfoV2")}this.signature=new H({schema:t.result.signature}),this.serialNumber=t.result.serialNumber,this.attrCertValidityPeriod=new tn({schema:t.result.attrCertValidityPeriod}),this.attributes=Array.from(t.result.attributes.valueBlock.value,n=>new nt({schema:n})),ma in t.result&&(this.issuerUniqueID=t.result.issuerUniqueID),ga in t.result&&(this.extensions=new ct({schema:t.result.extensions}))}toSchema(){const e=new N({value:[new U({value:this.version}),this.holder.toSchema(),new V({idBlock:{tagClass:3,tagNumber:0},value:this.issuer.toSchema().valueBlock.value}),this.signature.toSchema(),this.serialNumber,this.attrCertValidityPeriod.toSchema(),new N({value:Array.from(this.attributes,t=>t.toSchema())})]});return this.issuerUniqueID&&e.valueBlock.value.push(this.issuerUniqueID),this.extensions&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){const e={version:this.version,holder:this.holder.toJSON(),issuer:this.issuer.toJSON(),signature:this.signature.toJSON(),serialNumber:this.serialNumber.toJSON(),attrCertValidityPeriod:this.attrCertValidityPeriod.toJSON(),attributes:Array.from(this.attributes,t=>t.toJSON())};return this.issuerUniqueID&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),this.extensions&&(e.extensions=this.extensions.toJSON()),e}}ts.CLASS_NAME="AttributeCertificateInfoV2";const lh="acinfo",ch="signatureAlgorithm",uh="signatureValue",RO=[lh,ch,uh];class xs extends G{constructor(e={}){super(),this.acinfo=d(e,lh,xs.defaultValues(lh)),this.signatureAlgorithm=d(e,ch,xs.defaultValues(ch)),this.signatureValue=d(e,uh,xs.defaultValues(uh)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case lh:return new ts;case ch:return new H;case uh:return new Pe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[ts.schema(t.acinfo||{}),H.schema(t.signatureAlgorithm||{}),new Pe({name:t.signatureValue||g})]})}fromSchema(e){X(e,RO);const t=q(e,e,xs.schema({names:{acinfo:{names:{blockName:lh}},signatureAlgorithm:{names:{blockName:ch}},signatureValue:uh}}));W.assertSchema(t,this.className),this.acinfo=new ts({schema:t.result.acinfo}),this.signatureAlgorithm=new H({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}toSchema(){return new N({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}xs.CLASS_NAME="AttributeCertificateV2";const pa="contentType",jo="content",OO=[pa,jo];class st extends G{constructor(e={}){super(),this.contentType=d(e,pa,st.defaultValues(pa)),this.content=d(e,jo,st.defaultValues(jo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case pa:return g;case jo:return new Ee;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case pa:return typeof t=="string"&&t===this.defaultValues(pa);case jo:return t instanceof Ee;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return"optional"in t||(t.optional=!1),new N({name:t.blockName||"ContentInfo",optional:t.optional,value:[new he({name:t.contentType||pa}),new V({idBlock:{tagClass:3,tagNumber:0},value:[new Ee({name:t.content||jo})]})]})}fromSchema(e){X(e,OO);const t=q(e,e,st.schema());W.assertSchema(t,this.className),this.contentType=t.result.contentType.valueBlock.toString(),this.content=t.result.content}toSchema(){return new N({value:[new he({value:this.contentType}),new V({idBlock:{tagClass:3,tagNumber:0},value:[this.content]})]})}toJSON(){const e={contentType:this.contentType};return this.content instanceof Ee||(e.content=this.content.toJSON()),e}}st.CLASS_NAME="ContentInfo";st.DATA=uy;st.SIGNED_DATA=Uk;st.ENVELOPED_DATA=Mk;st.ENCRYPTED_DATA=Hk;const Lg="type",Dg="value",$p="utcTimeName",Fp="generalTimeName",VO=[$p,Fp];var Ub;(function(s){s[s.UTCTime=0]="UTCTime",s[s.GeneralizedTime=1]="GeneralizedTime",s[s.empty=2]="empty"})(Ub||(Ub={}));class dt extends G{constructor(e={}){super(),this.type=d(e,Lg,dt.defaultValues(Lg)),this.value=d(e,Dg,dt.defaultValues(Dg)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Lg:return 0;case Dg:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(e={},t=!1){const n=d(e,"names",{});return new lt({optional:t,value:[new Ic({name:n.utcTimeName||g}),new ot({name:n.generalTimeName||g})]})}fromSchema(e){X(e,VO);const t=q(e,e,dt.schema({names:{utcTimeName:$p,generalTimeName:Fp}}));W.assertSchema(t,this.className),$p in t.result&&(this.type=0,this.value=t.result.utcTimeName.toDate()),Fp in t.result&&(this.type=1,this.value=t.result.generalTimeName.toDate())}toSchema(){return this.type===0?new Ic({valueDate:this.value}):this.type===1?new ot({valueDate:this.value}):{}}toJSON(){return{type:this.type,value:this.value}}}dt.CLASS_NAME="Time";const Ug="tbs",Vr="version",_d="serialNumber",Bd="signature",xd="issuer",Td="notBefore",Rd="notAfter",Od="subject",Vd="subjectPublicKeyInfo",hh="issuerUniqueID",fh="subjectUniqueID",dh="extensions",mh="signatureAlgorithm",gh="signatureValue",Rs="tbsCertificate",Bm=`${Rs}.${Vr}`,hy=`${Rs}.${_d}`,fy=`${Rs}.${Bd}`,dy=`${Rs}.${xd}`,xm=`${Rs}.${Td}`,Tm=`${Rs}.${Rd}`,my=`${Rs}.${Od}`,gy=`${Rs}.${Vd}`,Rm=`${Rs}.${hh}`,Om=`${Rs}.${fh}`,Zh=`${Rs}.${dh}`,PO=[Rs,Bm,hy,fy,dy,xm,Tm,my,gy,Rm,Om,Zh,mh,gh];function LO(s={}){const e=d(s,"names",{});return new N({name:e.blockName||Rs,value:[new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new U({name:e.tbsCertificateVersion||Bm})]}),new U({name:e.tbsCertificateSerialNumber||hy}),H.schema(e.signature||{names:{blockName:fy}}),Xe.schema(e.issuer||{names:{blockName:dy}}),new N({name:e.tbsCertificateValidity||"tbsCertificate.validity",value:[dt.schema(e.notBefore||{names:{utcTimeName:xm,generalTimeName:xm}}),dt.schema(e.notAfter||{names:{utcTimeName:Tm,generalTimeName:Tm}})]}),Xe.schema(e.subject||{names:{blockName:my}}),as.schema(e.subjectPublicKeyInfo||{names:{blockName:gy}}),new ke({name:e.tbsCertificateIssuerUniqueID||Rm,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new ke({name:e.tbsCertificateSubjectUniqueID||Om,optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[ct.schema(e.extensions||{names:{blockName:Zh}})]})]})}class He extends G{constructor(e={}){super(),this.tbsView=new Uint8Array(d(e,Ug,He.defaultValues(Ug))),this.version=d(e,Vr,He.defaultValues(Vr)),this.serialNumber=d(e,_d,He.defaultValues(_d)),this.signature=d(e,Bd,He.defaultValues(Bd)),this.issuer=d(e,xd,He.defaultValues(xd)),this.notBefore=d(e,Td,He.defaultValues(Td)),this.notAfter=d(e,Rd,He.defaultValues(Rd)),this.subject=d(e,Od,He.defaultValues(Od)),this.subjectPublicKeyInfo=d(e,Vd,He.defaultValues(Vd)),hh in e&&(this.issuerUniqueID=d(e,hh,He.defaultValues(hh))),fh in e&&(this.subjectUniqueID=d(e,fh,He.defaultValues(fh))),dh in e&&(this.extensions=d(e,dh,He.defaultValues(dh))),this.signatureAlgorithm=d(e,mh,He.defaultValues(mh)),this.signatureValue=d(e,gh,He.defaultValues(gh)),e.schema&&this.fromSchema(e.schema)}get tbs(){return ve.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case Ug:return _t;case Vr:return 0;case _d:return new U;case Bd:return new H;case xd:return new Xe;case Td:return new dt;case Rd:return new dt;case Od:return new Xe;case Vd:return new as;case hh:return _t;case fh:return _t;case dh:return[];case mh:return new H;case gh:return new Pe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[LO(t.tbsCertificate),H.schema(t.signatureAlgorithm||{names:{blockName:mh}}),new Pe({name:t.signatureValue||gh})]})}fromSchema(e){X(e,PO);const t=q(e,e,He.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:Zh}}}}}}));W.assertSchema(t,this.className),this.tbsView=t.result.tbsCertificate.valueBeforeDecodeView,Bm in t.result&&(this.version=t.result[Bm].valueBlock.valueDec),this.serialNumber=t.result[hy],this.signature=new H({schema:t.result[fy]}),this.issuer=new Xe({schema:t.result[dy]}),this.notBefore=new dt({schema:t.result[xm]}),this.notAfter=new dt({schema:t.result[Tm]}),this.subject=new Xe({schema:t.result[my]}),this.subjectPublicKeyInfo=new as({schema:t.result[gy]}),Rm in t.result&&(this.issuerUniqueID=t.result[Rm].valueBlock.valueHex),Om in t.result&&(this.subjectUniqueID=t.result[Om].valueBlock.valueHex),Zh in t.result&&(this.extensions=Array.from(t.result[Zh],n=>new Je({schema:n}))),this.signatureAlgorithm=new H({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];return Vr in this&&this.version!==He.defaultValues(Vr)&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new U({value:this.version})]})),e.push(this.serialNumber),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(new N({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]})),e.push(this.subject.toSchema()),e.push(this.subjectPublicKeyInfo.toSchema()),this.issuerUniqueID&&e.push(new ke({optional:!0,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID})),this.subjectUniqueID&&e.push(new ke({optional:!0,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID})),this.extensions&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[new N({value:Array.from(this.extensions,t=>t.toSchema())})]})),new N({value:e})}toSchema(e=!1){let t;if(e===!1){if(!this.tbsView.byteLength)return He.schema().value[0];const n=St(this.tbsView);W.assert(n,"TBS Certificate"),t=n.result}else t=this.encodeTBS();return new N({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:Ae.ToHex(this.tbsView),version:this.version,serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return Vr in this&&this.version!==He.defaultValues(Vr)&&(e.version=this.version),this.issuerUniqueID&&(e.issuerUniqueID=Ae.ToHex(this.issuerUniqueID)),this.subjectUniqueID&&(e.subjectUniqueID=Ae.ToHex(this.subjectUniqueID)),this.extensions&&(e.extensions=Array.from(this.extensions,t=>t.toJSON())),e}async getPublicKey(e,t=Ie(!0)){return t.getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}async getKeyHash(e="SHA-1",t=Ie(!0)){return t.digest({name:e},this.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView)}async sign(e,t="SHA-1",n=Ie(!0)){if(!e)throw new Error("Need to provide a private key for signing");const r=await n.getSignatureParameters(e,t),i=r.parameters;this.signature=r.signatureAlgorithm,this.signatureAlgorithm=r.signatureAlgorithm,this.tbsView=new Uint8Array(this.encodeTBS().toBER());const a=await n.signWithPrivateKey(this.tbsView,e,i);this.signatureValue=new Pe({valueHex:a})}async verify(e,t=Ie(!0)){let n;if(e?n=e.subjectPublicKeyInfo:this.issuer.isEqual(this.subject)&&(n=this.subjectPublicKeyInfo),!(n instanceof as))throw new Error("Please provide issuer certificate as a parameter");return t.verifyWithPublicKey(this.tbsView,this.signatureValue,n,this.signatureAlgorithm)}}He.CLASS_NAME="Certificate";function Wk(s,e=null){if(e&&s.issuer.isEqual(e.issuer)&&s.serialNumber.isEqual(e.serialNumber))return null;let t=!1;if(s.extensions){for(const n of s.extensions)if(n.extnID===ay&&n.parsedValue instanceof vi&&n.parsedValue.cA){t=!0;break}}return t?s:null}const Jo="certId",Wo="certValue",ko="parsedValue",DO=[Jo,Wo];class Ga extends G{constructor(e={}){super(),this.certId=d(e,Jo,Ga.defaultValues(Jo)),this.certValue=d(e,Wo,Ga.defaultValues(Wo)),ko in e&&(this.parsedValue=d(e,ko,Ga.defaultValues(ko))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Jo:return g;case Wo:return new Ee;case ko:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Jo:return t===g;case Wo:return t instanceof Ee;case ko:return t instanceof Object&&Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new he({name:t.id||"id"}),new V({idBlock:{tagClass:3,tagNumber:0},value:[new Ee({name:t.value||"value"})]})]})}fromSchema(e){X(e,DO);const t=q(e,e,Ga.schema({names:{id:Jo,value:Wo}}));W.assertSchema(t,this.className),this.certId=t.result.certId.valueBlock.toString(),this.certValue=t.result.certValue;const n=this.certValue.valueBlock.valueHexView;switch(this.certId){case vb:try{this.parsedValue=He.fromBER(n)}catch{xs.fromBER(n)}break;case bb:this.parsedValue=xs.fromBER(n);break;case $R:default:throw new Error(`Incorrect CERT_ID value in CertBag: ${this.certId}`)}}toSchema(){return ko in this&&("acinfo"in this.parsedValue?this.certId=bb:this.certId=vb,this.certValue=new Q({valueHex:this.parsedValue.toSchema().toBER(!1)})),new N({value:[new he({value:this.certId}),new V({idBlock:{tagClass:3,tagNumber:0},value:["toSchema"in this.certValue?this.certValue.toSchema():this.certValue]})]})}toJSON(){return{certId:this.certId,certValue:this.certValue.toJSON()}}}Ga.CLASS_NAME="CertBag";const ph="userCertificate",qo="revocationDate",wa="crlEntryExtensions",UO=[ph,qo,wa];class hi extends G{constructor(e={}){super(),this.userCertificate=d(e,ph,hi.defaultValues(ph)),this.revocationDate=d(e,qo,hi.defaultValues(qo)),wa in e&&(this.crlEntryExtensions=d(e,wa,hi.defaultValues(wa))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ph:return new U;case qo:return new dt;case wa:return new ct;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new U({name:t.userCertificate||ph}),dt.schema({names:{utcTimeName:t.revocationDate||qo,generalTimeName:t.revocationDate||qo}}),ct.schema({names:{blockName:t.crlEntryExtensions||wa}},!0)]})}fromSchema(e){X(e,UO);const t=q(e,e,hi.schema());W.assertSchema(t,this.className),this.userCertificate=t.result.userCertificate,this.revocationDate=new dt({schema:t.result.revocationDate}),wa in t.result&&(this.crlEntryExtensions=new ct({schema:t.result.crlEntryExtensions}))}toSchema(){const e=[this.userCertificate,this.revocationDate.toSchema()];return this.crlEntryExtensions&&e.push(this.crlEntryExtensions.toSchema()),new N({value:e})}toJSON(){const e={userCertificate:this.userCertificate.toJSON(),revocationDate:this.revocationDate.toJSON()};return this.crlEntryExtensions&&(e.crlEntryExtensions=this.crlEntryExtensions.toJSON()),e}}hi.CLASS_NAME="RevokedCertificate";const Mg="tbs",$c="version",Hg="signature",$g="issuer",Fg="thisUpdate",sd="nextUpdate",nd="revokedCertificates",rd="crlExtensions",wh="signatureAlgorithm",yh="signatureValue",ur="tbsCertList",Vm=`${ur}.version`,py=`${ur}.signature`,wy=`${ur}.issuer`,Pm=`${ur}.thisUpdate`,bf=`${ur}.nextUpdate`,Lm=`${ur}.revokedCertificates`,Dm=`${ur}.extensions`,MO=[ur,Vm,py,wy,Pm,bf,Lm,Dm,wh,yh];function HO(s={}){const e=d(s,"names",{});return new N({name:e.blockName||ur,value:[new U({optional:!0,name:e.tbsCertListVersion||Vm,value:2}),H.schema(e.signature||{names:{blockName:py}}),Xe.schema(e.issuer||{names:{blockName:wy}}),dt.schema(e.tbsCertListThisUpdate||{names:{utcTimeName:Pm,generalTimeName:Pm}}),dt.schema(e.tbsCertListNextUpdate||{names:{utcTimeName:bf,generalTimeName:bf}},!0),new N({optional:!0,value:[new _e({name:e.tbsCertListRevokedCertificates||Lm,value:new N({value:[new U,dt.schema(),ct.schema({},!0)]})})]}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[ct.schema(e.crlExtensions||{names:{blockName:Dm}})]})]})}const $O=[ly,xk,_R,BR,Tk,oy,cy,xR,TR,Rk];class kt extends G{constructor(e={}){super(),this.tbsView=new Uint8Array(d(e,Mg,kt.defaultValues(Mg))),this.version=d(e,$c,kt.defaultValues($c)),this.signature=d(e,Hg,kt.defaultValues(Hg)),this.issuer=d(e,$g,kt.defaultValues($g)),this.thisUpdate=d(e,Fg,kt.defaultValues(Fg)),sd in e&&(this.nextUpdate=d(e,sd,kt.defaultValues(sd))),nd in e&&(this.revokedCertificates=d(e,nd,kt.defaultValues(nd))),rd in e&&(this.crlExtensions=d(e,rd,kt.defaultValues(rd))),this.signatureAlgorithm=d(e,wh,kt.defaultValues(wh)),this.signatureValue=d(e,yh,kt.defaultValues(yh)),e.schema&&this.fromSchema(e.schema)}get tbs(){return ve.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case Mg:return _t;case $c:return 0;case Hg:return new H;case $g:return new Xe;case Fg:return new dt;case sd:return new dt;case nd:return[];case rd:return new ct;case wh:return new H;case yh:return new Pe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||"CertificateList",value:[HO(e),H.schema(t.signatureAlgorithm||{names:{blockName:wh}}),new Pe({name:t.signatureValue||yh})]})}fromSchema(e){X(e,MO);const t=q(e,e,kt.schema());W.assertSchema(t,this.className),this.tbsView=t.result.tbsCertList.valueBeforeDecodeView,Vm in t.result&&(this.version=t.result[Vm].valueBlock.valueDec),this.signature=new H({schema:t.result[py]}),this.issuer=new Xe({schema:t.result[wy]}),this.thisUpdate=new dt({schema:t.result[Pm]}),bf in t.result&&(this.nextUpdate=new dt({schema:t.result[bf]})),Lm in t.result&&(this.revokedCertificates=Array.from(t.result[Lm],n=>new hi({schema:n}))),Dm in t.result&&(this.crlExtensions=new ct({schema:t.result[Dm]})),this.signatureAlgorithm=new H({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];return this.version!==kt.defaultValues($c)&&e.push(new U({value:this.version})),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(this.thisUpdate.toSchema()),this.nextUpdate&&e.push(this.nextUpdate.toSchema()),this.revokedCertificates&&e.push(new N({value:Array.from(this.revokedCertificates,t=>t.toSchema())})),this.crlExtensions&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.crlExtensions.toSchema()]})),new N({value:e})}toSchema(e=!1){let t;if(e)t=this.encodeTBS();else{if(!this.tbsView.byteLength)return kt.schema();const n=St(this.tbsView);W.assert(n,"TBS Certificate Revocation List"),t=n.result}return new N({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:Ae.ToHex(this.tbsView),version:this.version,signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),thisUpdate:this.thisUpdate.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return this.version!==kt.defaultValues($c)&&(e.version=this.version),this.nextUpdate&&(e.nextUpdate=this.nextUpdate.toJSON()),this.revokedCertificates&&(e.revokedCertificates=Array.from(this.revokedCertificates,t=>t.toJSON())),this.crlExtensions&&(e.crlExtensions=this.crlExtensions.toJSON()),e}isCertificateRevoked(e){if(!this.issuer.isEqual(e.issuer)||!this.revokedCertificates)return!1;for(const t of this.revokedCertificates)if(t.userCertificate.isEqual(e.serialNumber))return!0;return!1}async sign(e,t="SHA-1",n=Ie(!0)){if(!e)throw new Error("Need to provide a private key for signing");const r=await n.getSignatureParameters(e,t),{parameters:i}=r;this.signature=r.signatureAlgorithm,this.signatureAlgorithm=r.signatureAlgorithm,this.tbsView=new Uint8Array(this.encodeTBS().toBER());const a=await n.signWithPrivateKey(this.tbsView,e,i);this.signatureValue=new Pe({valueHex:a})}async verify(e={},t=Ie(!0)){let n;if(e.issuerCertificate&&(n=e.issuerCertificate.subjectPublicKeyInfo,!this.issuer.isEqual(e.issuerCertificate.subject)))return!1;if(e.publicKeyInfo&&(n=e.publicKeyInfo),!n)throw new Error("Issuer's certificate must be provided as an input parameter");if(this.crlExtensions){for(const r of this.crlExtensions.extensions)if(r.critical&&!$O.includes(r.extnID))return!1}return t.verifyWithPublicKey(this.tbsView,this.signatureValue,n,this.signatureAlgorithm)}}kt.CLASS_NAME="CertificateRevocationList";const Go="crlId",Yo="crlValue",Fc="parsedValue",FO=[Go,Yo];class Ya extends G{constructor(e={}){super(),this.crlId=d(e,Go,Ya.defaultValues(Go)),this.crlValue=d(e,Yo,Ya.defaultValues(Yo)),Fc in e&&(this.parsedValue=d(e,Fc,Ya.defaultValues(Fc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Go:return g;case Yo:return new Ee;case Fc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Go:return t===g;case Yo:return t instanceof Ee;case Fc:return t instanceof Object&&Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new he({name:t.id||"id"}),new V({idBlock:{tagClass:3,tagNumber:0},value:[new Ee({name:t.value||"value"})]})]})}fromSchema(e){X(e,FO);const t=q(e,e,Ya.schema({names:{id:Go,value:Yo}}));switch(W.assertSchema(t,this.className),this.crlId=t.result.crlId.valueBlock.toString(),this.crlValue=t.result.crlValue,this.crlId){case Sb:this.parsedValue=kt.fromBER(this.certValue.valueBlock.valueHex);break;default:throw new Error(`Incorrect CRL_ID value in CRLBag: ${this.crlId}`)}}toSchema(){return this.parsedValue&&(this.crlId=Sb,this.crlValue=new Q({valueHex:this.parsedValue.toSchema().toBER(!1)})),new N({value:[new he({value:this.crlId}),new V({idBlock:{tagClass:3,tagNumber:0},value:[this.crlValue.toSchema()]})]})}toJSON(){return{crlId:this.crlId,crlValue:this.crlValue.toJSON()}}}Ya.CLASS_NAME="CRLBag";const Xo="version",Qo="encryptedContentInfo",Pr="unprotectedAttrs",KO=[Xo,Qo,Pr];class bn extends G{constructor(e={}){super(),this.version=d(e,Xo,bn.defaultValues(Xo)),this.encryptedContentInfo=d(e,Qo,bn.defaultValues(Qo)),Pr in e&&(this.unprotectedAttrs=d(e,Pr,bn.defaultValues(Pr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Xo:return 0;case Qo:return new yt;case Pr:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Xo:return t===0;case Qo:return yt.compareWithDefault("contentType",t.contentType)&&yt.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&yt.compareWithDefault("encryptedContent",t.encryptedContent);case Pr:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new U({name:t.version||g}),yt.schema(t.encryptedContentInfo||{}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new _e({name:t.unprotectedAttrs||g,value:nt.schema()})]})]})}fromSchema(e){X(e,KO);const t=q(e,e,bn.schema({names:{version:Xo,encryptedContentInfo:{names:{blockName:Qo}},unprotectedAttrs:Pr}}));W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.encryptedContentInfo=new yt({schema:t.result.encryptedContentInfo}),Pr in t.result&&(this.unprotectedAttrs=Array.from(t.result.unprotectedAttrs,n=>new nt({schema:n})))}toSchema(){const e=[];return e.push(new U({value:this.version})),e.push(this.encryptedContentInfo.toSchema()),this.unprotectedAttrs&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,t=>t.toSchema())})),new N({value:e})}toJSON(){const e={version:this.version,encryptedContentInfo:this.encryptedContentInfo.toJSON()};return this.unprotectedAttrs&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,t=>t.toJSON())),e}async encrypt(e,t=Ie(!0)){Ye.assert(e,"parameters","object");const n={...e,contentType:"1.2.840.113549.1.7.1"};this.encryptedContentInfo=await t.encryptEncryptedContentInfo(n)}async decrypt(e,t=Ie(!0)){Ye.assert(e,"parameters","object");const n={...e,encryptedContentInfo:this.encryptedContentInfo};return t.decryptEncryptedContentInfo(n)}}bn.CLASS_NAME="EncryptedData";const ya="encryptionAlgorithm",Lr="encryptedData",Kc="parsedValue",jO=[ya,Lr];class $n extends G{constructor(e={}){super(),this.encryptionAlgorithm=d(e,ya,$n.defaultValues(ya)),this.encryptedData=d(e,Lr,$n.defaultValues(Lr)),Kc in e&&(this.parsedValue=d(e,Kc,$n.defaultValues(Kc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ya:return new H;case Lr:return new Q;case Kc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ya:return H.compareWithDefault("algorithmId",t.algorithmId)&&!("algorithmParams"in t);case Lr:return t.isEqual($n.defaultValues(e));case Kc:return t instanceof Object&&Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[H.schema(t.encryptionAlgorithm||{names:{blockName:ya}}),new lt({value:[new Q({name:t.encryptedData||Lr}),new Q({idBlock:{isConstructed:!0},name:t.encryptedData||Lr})]})]})}fromSchema(e){X(e,jO);const t=q(e,e,$n.schema({names:{encryptionAlgorithm:{names:{blockName:ya}},encryptedData:Lr}}));W.assertSchema(t,this.className),this.encryptionAlgorithm=new H({schema:t.result.encryptionAlgorithm}),this.encryptedData=t.result.encryptedData}toSchema(){return new N({value:[this.encryptionAlgorithm.toSchema(),this.encryptedData]})}toJSON(){return{encryptionAlgorithm:this.encryptionAlgorithm.toJSON(),encryptedData:this.encryptedData.toJSON()}}async parseInternalValues(e,t=Ie(!0)){const r=await new bn({encryptedContentInfo:new yt({contentEncryptionAlgorithm:this.encryptionAlgorithm,encryptedContent:this.encryptedData})}).decrypt(e,t);this.parsedValue=Ns.fromBER(r)}async makeInternalValues(e,t=Ie(!0)){if(!this.parsedValue)throw new Error('Please initialize "parsedValue" first');const n=new bn,r={...e,contentToEncrypt:this.parsedValue.toSchema().toBER(!1)};if(await n.encrypt(r,t),!n.encryptedContentInfo.encryptedContent)throw new Error("The filed `encryptedContent` in EncryptedContentInfo is empty");this.encryptionAlgorithm=n.encryptedContentInfo.contentEncryptionAlgorithm,this.encryptedData=n.encryptedContentInfo.encryptedContent}}$n.CLASS_NAME="PKCS8ShroudedKeyBag";const zo="secretTypeId",Zo="secretValue",JO=[zo,Zo];class dc extends G{constructor(e={}){super(),this.secretTypeId=d(e,zo,dc.defaultValues(zo)),this.secretValue=d(e,Zo,dc.defaultValues(Zo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case zo:return g;case Zo:return new Ee;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case zo:return t===g;case Zo:return t instanceof Ee;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new he({name:t.id||"id"}),new V({idBlock:{tagClass:3,tagNumber:0},value:[new Ee({name:t.value||"value"})]})]})}fromSchema(e){X(e,JO);const t=q(e,e,dc.schema({names:{id:zo,value:Zo}}));W.assertSchema(t,this.className),this.secretTypeId=t.result.secretTypeId.valueBlock.toString(),this.secretValue=t.result.secretValue}toSchema(){return new N({value:[new he({value:this.secretTypeId}),new V({idBlock:{tagClass:3,tagNumber:0},value:[this.secretValue.toSchema()]})]})}toJSON(){return{secretTypeId:this.secretTypeId,secretValue:this.secretValue.toJSON()}}}dc.CLASS_NAME="SecretBag";class ii{static getItems(){return this.items||(this.items={},ii.register("1.2.840.113549.1.12.10.1.1",Ns),ii.register("1.2.840.113549.1.12.10.1.2",$n),ii.register("1.2.840.113549.1.12.10.1.3",Ga),ii.register("1.2.840.113549.1.12.10.1.4",Ya),ii.register("1.2.840.113549.1.12.10.1.5",dc),ii.register("1.2.840.113549.1.12.10.1.6",Yn)),this.items}static register(e,t){this.getItems()[e]=t}static find(e){return this.getItems()[e]||null}}const va="bagId",ba="bagValue",Pn="bagAttributes",WO=[va,ba,Pn];class fi extends G{constructor(e={}){super(),this.bagId=d(e,va,fi.defaultValues(va)),this.bagValue=d(e,ba,fi.defaultValues(ba)),Pn in e&&(this.bagAttributes=d(e,Pn,fi.defaultValues(Pn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case va:return g;case ba:return new Ee;case Pn:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case va:return t===g;case ba:return t instanceof Ee;case Pn:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new he({name:t.bagId||va}),new V({idBlock:{tagClass:3,tagNumber:0},value:[new Ee({name:t.bagValue||ba})]}),new vt({optional:!0,value:[new _e({name:t.bagAttributes||Pn,value:nt.schema()})]})]})}fromSchema(e){X(e,WO);const t=q(e,e,fi.schema({names:{bagId:va,bagValue:ba,bagAttributes:Pn}}));W.assertSchema(t,this.className),this.bagId=t.result.bagId.valueBlock.toString();const n=ii.find(this.bagId);if(!n)throw new Error(`Invalid BAG_ID for SafeBag: ${this.bagId}`);this.bagValue=new n({schema:t.result.bagValue}),Pn in t.result&&(this.bagAttributes=Array.from(t.result.bagAttributes,r=>new nt({schema:r})))}toSchema(){const e=[new he({value:this.bagId}),new V({idBlock:{tagClass:3,tagNumber:0},value:[this.bagValue.toSchema()]})];return this.bagAttributes&&e.push(new vt({value:Array.from(this.bagAttributes,t=>t.toSchema())})),new N({value:e})}toJSON(){const e={bagId:this.bagId,bagValue:this.bagValue.toJSON()};return this.bagAttributes&&(e.bagAttributes=Array.from(this.bagAttributes,t=>t.toJSON())),e}}fi.CLASS_NAME="SafeBag";const Eo="safeBags";class Yn extends G{constructor(e={}){super(),this.safeBags=d(e,Eo,Yn.defaultValues(Eo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Eo:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Eo:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new _e({name:t.safeBags||g,value:fi.schema()})]})}fromSchema(e){X(e,[Eo]);const t=q(e,e,Yn.schema({names:{safeBags:Eo}}));W.assertSchema(t,this.className),this.safeBags=Array.from(t.result.safeBags,n=>new fi({schema:n}))}toSchema(){return new N({value:Array.from(this.safeBags,e=>e.toSchema())})}toJSON(){return{safeBags:Array.from(this.safeBags,e=>e.toJSON())}}}Yn.CLASS_NAME="SafeContents";const vh="otherCertFormat",bh="otherCert",qO=[vh,bh];class Si extends G{constructor(e={}){super(),this.otherCertFormat=d(e,vh,Si.defaultValues(vh)),this.otherCert=d(e,bh,Si.defaultValues(bh)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case vh:return g;case bh:return new Ee;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new he({name:t.otherCertFormat||vh}),new Ee({name:t.otherCert||bh})]})}fromSchema(e){X(e,qO);const t=q(e,e,Si.schema());W.assertSchema(t,this.className),this.otherCertFormat=t.result.otherCertFormat.valueBlock.toString(),this.otherCert=t.result.otherCert}toSchema(){return new N({value:[new he({value:this.otherCertFormat}),this.otherCert]})}toJSON(){const e={otherCertFormat:this.otherCertFormat};return this.otherCert instanceof Ee||(e.otherCert=this.otherCert.toJSON()),e}}const Sh="certificates",GO=[Sh];class An extends G{constructor(e={}){super(),this.certificates=d(e,Sh,An.defaultValues(Sh)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Sh:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new vt({name:t.blockName||g,value:[new _e({name:t.certificates||Sh,value:new lt({value:[He.schema(),new V({idBlock:{tagClass:3,tagNumber:0},value:[new Ee]}),new V({idBlock:{tagClass:3,tagNumber:1},value:[new N]}),new V({idBlock:{tagClass:3,tagNumber:2},value:xs.schema().valueBlock.value}),new V({idBlock:{tagClass:3,tagNumber:3},value:Si.schema().valueBlock.value})]})})]})}fromSchema(e){X(e,GO);const t=q(e,e,An.schema());W.assertSchema(t,this.className),this.certificates=Array.from(t.result.certificates||[],n=>{const r=n.idBlock.tagNumber;if(n.idBlock.tagClass===1)return new He({schema:n});const i=new N({value:n.valueBlock.value});switch(r){case 1:return i.valueBlock.value[0].valueBlock.value[0].valueBlock.valueDec===1?new xs({schema:i}):new qn({schema:i});case 2:return new xs({schema:i});case 3:return new Si({schema:i})}return n})}toSchema(){return new vt({value:Array.from(this.certificates,e=>{switch(!0){case e instanceof He:return e.toSchema();case e instanceof qn:return new V({idBlock:{tagClass:3,tagNumber:1},value:e.toSchema().valueBlock.value});case e instanceof xs:return new V({idBlock:{tagClass:3,tagNumber:2},value:e.toSchema().valueBlock.value});case e instanceof Si:return new V({idBlock:{tagClass:3,tagNumber:3},value:e.toSchema().valueBlock.value})}return e.toSchema()})})}toJSON(){return{certificates:Array.from(this.certificates,e=>e.toJSON())}}}An.CLASS_NAME="CertificateSet";const Ah="otherRevInfoFormat",kh="otherRevInfo",YO=[Ah,kh];class tr extends G{constructor(e={}){super(),this.otherRevInfoFormat=d(e,Ah,tr.defaultValues(Ah)),this.otherRevInfo=d(e,kh,tr.defaultValues(kh)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ah:return g;case kh:return new Ee;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new he({name:t.otherRevInfoFormat||Ah}),new Ee({name:t.otherRevInfo||kh})]})}fromSchema(e){X(e,YO);const t=q(e,e,tr.schema());W.assertSchema(t,this.className),this.otherRevInfoFormat=t.result.otherRevInfoFormat.valueBlock.toString(),this.otherRevInfo=t.result.otherRevInfo}toSchema(){return new N({value:[new he({value:this.otherRevInfoFormat}),this.otherRevInfo]})}toJSON(){const e={otherRevInfoFormat:this.otherRevInfoFormat};return this.otherRevInfo instanceof Ee||(e.otherRevInfo=this.otherRevInfo.toJSON()),e}}tr.CLASS_NAME="OtherRevocationInfoFormat";const Eh="crls",Kg="otherRevocationInfos",XO=[Eh];class sr extends G{constructor(e={}){super(),this.crls=d(e,Eh,sr.defaultValues(Eh)),this.otherRevocationInfos=d(e,Kg,sr.defaultValues(Kg)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Eh:return[];case Kg:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new vt({name:t.blockName||g,value:[new _e({name:t.crls||g,value:new lt({value:[kt.schema(),new V({idBlock:{tagClass:3,tagNumber:1},value:[new he,new Ee]})]})})]})}fromSchema(e){X(e,XO);const t=q(e,e,sr.schema({names:{crls:Eh}}));if(W.assertSchema(t,this.className),t.result.crls)for(const n of t.result.crls)n.idBlock.tagClass===1?this.crls.push(new kt({schema:n})):this.otherRevocationInfos.push(new tr({schema:n}))}toSchema(){const e=[];return e.push(...Array.from(this.crls,t=>t.toSchema())),e.push(...Array.from(this.otherRevocationInfos,t=>{const n=t.toSchema();return n.idBlock.tagClass=3,n.idBlock.tagNumber=1,n})),new vt({value:e})}toJSON(){return{crls:Array.from(this.crls,e=>e.toJSON()),otherRevocationInfos:Array.from(this.otherRevocationInfos,e=>e.toJSON())}}}sr.CLASS_NAME="RevocationInfoChoices";const Ch="certs",Sa="crls",QO=[Ch,Sa];class ao extends G{constructor(e={}){super(),this.crls=d(e,Sa,ao.defaultValues(Sa)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ch:return new An;case Sa:return new sr;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ch:return t.certificates.length===0;case Sa:return t.crls.length===0&&t.otherRevocationInfos.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new V({name:t.certs||g,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:An.schema().valueBlock.value}),new V({name:t.crls||g,optional:!0,idBlock:{tagClass:3,tagNumber:1},value:sr.schema().valueBlock.value})]})}fromSchema(e){X(e,QO);const t=q(e,e,ao.schema({names:{certs:Ch,crls:Sa}}));W.assertSchema(t,this.className),Ch in t.result&&(this.certs=new An({schema:new vt({value:t.result.certs.valueBlock.value})})),Sa in t.result&&(this.crls=new sr({schema:new vt({value:t.result.crls.valueBlock.value})}))}toSchema(){const e=[];return this.certs&&e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:this.certs.toSchema().valueBlock.value})),this.crls&&e.push(new V({idBlock:{tagClass:3,tagNumber:1},value:this.crls.toSchema().valueBlock.value})),new N({value:e})}toJSON(){const e={};return this.certs&&(e.certs=this.certs.toJSON()),this.crls&&(e.crls=this.crls.toJSON()),e}}ao.CLASS_NAME="OriginatorInfo";const Nh="issuer",Ih="serialNumber",zO=[Nh,Ih];class Bt extends G{constructor(e={}){super(),this.issuer=d(e,Nh,Bt.defaultValues(Nh)),this.serialNumber=d(e,Ih,Bt.defaultValues(Ih)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Nh:return new Xe;case Ih:return new U;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[Xe.schema(t.issuer||{}),new U({name:t.serialNumber||g})]})}fromSchema(e){X(e,zO);const t=q(e,e,Bt.schema({names:{issuer:{names:{blockName:Nh}},serialNumber:Ih}}));W.assertSchema(t,this.className),this.issuer=new Xe({schema:t.result.issuer}),this.serialNumber=t.result.serialNumber}toSchema(){return new N({value:[this.issuer.toSchema(),this.serialNumber]})}toJSON(){return{issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()}}}Bt.CLASS_NAME="IssuerAndSerialNumber";const id="variant",jc="value",ZO=["blockName"];class mc extends G{constructor(e={}){super(),this.variant=d(e,id,mc.defaultValues(id)),jc in e&&(this.value=d(e,jc,mc.defaultValues(jc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case id:return-1;case jc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case id:return t===-1;case jc:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new lt({value:[Bt.schema({names:{blockName:t.blockName||g}}),new ke({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:0}})]})}fromSchema(e){X(e,ZO);const t=q(e,e,mc.schema({names:{blockName:"blockName"}}));W.assertSchema(t,this.className),t.result.blockName.idBlock.tagClass===1?(this.variant=1,this.value=new Bt({schema:t.result.blockName})):(this.variant=2,this.value=new Q({valueHex:t.result.blockName.valueBlock.valueHex}))}toSchema(){switch(this.variant){case 1:if(!(this.value instanceof Bt))throw new Error("Incorrect type of RecipientIdentifier.value. It should be IssuerAndSerialNumber.");return this.value.toSchema();case 2:if(!(this.value instanceof Q))throw new Error("Incorrect type of RecipientIdentifier.value. It should be ASN.1 OctetString.");return new ke({idBlock:{tagClass:3,tagNumber:0},valueHex:this.value.valueBlock.valueHexView});default:return new Ee}}toJSON(){const e={variant:this.variant};return(this.variant===1||this.variant===2)&&this.value&&(e.value=this.value.toJSON()),e}}mc.CLASS_NAME="RecipientIdentifier";const Aa="version",el="rid",tl="keyEncryptionAlgorithm",sl="encryptedKey",ad="recipientCertificate",eV=[Aa,el,tl,sl];class Ss extends G{constructor(e={}){super(),this.version=d(e,Aa,Ss.defaultValues(Aa)),this.rid=d(e,el,Ss.defaultValues(el)),this.keyEncryptionAlgorithm=d(e,tl,Ss.defaultValues(tl)),this.encryptedKey=d(e,sl,Ss.defaultValues(sl)),this.recipientCertificate=d(e,ad,Ss.defaultValues(ad)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Aa:return-1;case el:return{};case tl:return new H;case sl:return new Q;case ad:return new He;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Aa:return t===Ss.defaultValues(Aa);case el:return Object.keys(t).length===0;case tl:case sl:return t.isEqual(Ss.defaultValues(e));case ad:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new U({name:t.version||g}),mc.schema(t.rid||{}),H.schema(t.keyEncryptionAlgorithm||{}),new Q({name:t.encryptedKey||g})]})}fromSchema(e){X(e,eV);const t=q(e,e,Ss.schema({names:{version:Aa,rid:{names:{blockName:el}},keyEncryptionAlgorithm:{names:{blockName:tl}},encryptedKey:sl}}));W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,t.result.rid.idBlock.tagClass===3?this.rid=new Q({valueHex:t.result.rid.valueBlock.valueHex}):this.rid=new Bt({schema:t.result.rid}),this.keyEncryptionAlgorithm=new H({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){const e=[];return this.rid instanceof Bt?(this.version=0,e.push(new U({value:this.version})),e.push(this.rid.toSchema())):(this.version=2,e.push(new U({value:this.version})),e.push(new ke({idBlock:{tagClass:3,tagNumber:0},valueHex:this.rid.valueBlock.valueHexView}))),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new N({value:e})}toJSON(){return{version:this.version,rid:this.rid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}Ss.CLASS_NAME="KeyTransRecipientInfo";const nl="algorithm",rl="publicKey",tV=[nl,rl];class Xn extends G{constructor(e={}){super(),this.algorithm=d(e,nl,Xn.defaultValues(nl)),this.publicKey=d(e,rl,Xn.defaultValues(rl)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case nl:return new H;case rl:return new Pe;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case nl:case rl:return t.isEqual(Xn.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[H.schema(t.algorithm||{}),new Pe({name:t.publicKey||g})]})}fromSchema(e){X(e,tV);const t=q(e,e,Xn.schema({names:{algorithm:{names:{blockName:nl}},publicKey:rl}}));W.assertSchema(t,this.className),this.algorithm=new H({schema:t.result.algorithm}),this.publicKey=t.result.publicKey}toSchema(){return new N({value:[this.algorithm.toSchema(),this.publicKey]})}toJSON(){return{algorithm:this.algorithm.toJSON(),publicKey:this.publicKey.toJSON()}}}Xn.CLASS_NAME="OriginatorPublicKey";const od="variant",Jc="value",sV=["blockName"];class nr extends G{constructor(e={}){super(),this.variant=d(e,od,nr.defaultValues(od)),Jc in e&&(this.value=d(e,Jc,nr.defaultValues(Jc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case od:return-1;case Jc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case od:return t===-1;case Jc:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new lt({value:[Bt.schema({names:{blockName:t.blockName||g}}),new ke({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||g}),new V({idBlock:{tagClass:3,tagNumber:1},name:t.blockName||g,value:Xn.schema().valueBlock.value})]})}fromSchema(e){X(e,sV);const t=q(e,e,nr.schema({names:{blockName:"blockName"}}));W.assertSchema(t,this.className),t.result.blockName.idBlock.tagClass===1?(this.variant=1,this.value=new Bt({schema:t.result.blockName})):t.result.blockName.idBlock.tagNumber===0?(t.result.blockName.idBlock.tagClass=1,t.result.blockName.idBlock.tagNumber=4,this.variant=2,this.value=t.result.blockName):(this.variant=3,this.value=new Xn({schema:new N({value:t.result.blockName.valueBlock.value})}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return this.value.idBlock.tagClass=3,this.value.idBlock.tagNumber=0,this.value;case 3:{const e=this.value.toSchema();return e.idBlock.tagClass=3,e.idBlock.tagNumber=1,e}default:return new Ee}}toJSON(){const e={variant:this.variant};return(this.variant===1||this.variant===2||this.variant===3)&&(e.value=this.value.toJSON()),e}}nr.CLASS_NAME="OriginatorIdentifierOrKey";const il="keyAttrId",hn="keyAttr",nV=[il,hn];class sn extends G{constructor(e={}){super(),this.keyAttrId=d(e,il,sn.defaultValues(il)),hn in e&&(this.keyAttr=d(e,hn,sn.defaultValues(hn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case il:return g;case hn:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case il:return typeof t=="string"&&t===g;case hn:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({optional:t.optional||!0,name:t.blockName||g,value:[new he({name:t.keyAttrId||g}),new Ee({optional:!0,name:t.keyAttr||g})]})}fromSchema(e){X(e,nV);const t=q(e,e,sn.schema({names:{keyAttrId:il,keyAttr:hn}}));W.assertSchema(t,this.className),this.keyAttrId=t.result.keyAttrId.valueBlock.toString(),hn in t.result&&(this.keyAttr=t.result.keyAttr)}toSchema(){const e=[];return e.push(new he({value:this.keyAttrId})),hn in this&&e.push(this.keyAttr),new N({value:e})}toJSON(){const e={keyAttrId:this.keyAttrId};return hn in this&&(e.keyAttr=this.keyAttr.toJSON()),e}}sn.CLASS_NAME="OtherKeyAttribute";const ka="subjectKeyIdentifier",Dr="date",Ur="other",rV=[ka,Dr,Ur];class wn extends G{constructor(e={}){super(),this.subjectKeyIdentifier=d(e,ka,wn.defaultValues(ka)),Dr in e&&(this.date=d(e,Dr,wn.defaultValues(Dr))),Ur in e&&(this.other=d(e,Ur,wn.defaultValues(Ur))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ka:return new Q;case Dr:return new ot;case Ur:return new sn;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ka:return t.isEqual(wn.defaultValues(ka));case Dr:return t.year===0&&t.month===0&&t.day===0&&t.hour===0&&t.minute===0&&t.second===0&&t.millisecond===0;case Ur:return t.keyAttrId===g&&!("keyAttr"in t);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new Q({name:t.subjectKeyIdentifier||g}),new ot({optional:!0,name:t.date||g}),sn.schema(t.other||{})]})}fromSchema(e){X(e,rV);const t=q(e,e,wn.schema({names:{subjectKeyIdentifier:ka,date:Dr,other:{names:{blockName:Ur}}}}));W.assertSchema(t,this.className),this.subjectKeyIdentifier=t.result.subjectKeyIdentifier,Dr in t.result&&(this.date=t.result.date),Ur in t.result&&(this.other=new sn({schema:t.result.other}))}toSchema(){const e=[];return e.push(this.subjectKeyIdentifier),this.date&&e.push(this.date),this.other&&e.push(this.other.toSchema()),new N({value:e})}toJSON(){const e={subjectKeyIdentifier:this.subjectKeyIdentifier.toJSON()};return this.date&&(e.date=this.date.toJSON()),this.other&&(e.other=this.other.toJSON()),e}}wn.CLASS_NAME="RecipientKeyIdentifier";const ld="variant",cd="value",iV=["blockName"];class kn extends G{constructor(e={}){super(),this.variant=d(e,ld,kn.defaultValues(ld)),this.value=d(e,cd,kn.defaultValues(cd)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ld:return-1;case cd:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ld:return t===-1;case cd:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new lt({value:[Bt.schema(t.issuerAndSerialNumber||{names:{blockName:t.blockName||g}}),new V({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:0},value:wn.schema(t.rKeyId||{names:{blockName:t.blockName||g}}).valueBlock.value})]})}fromSchema(e){X(e,iV);const t=q(e,e,kn.schema({names:{blockName:"blockName"}}));W.assertSchema(t,this.className),t.result.blockName.idBlock.tagClass===1?(this.variant=1,this.value=new Bt({schema:t.result.blockName})):(this.variant=2,this.value=new wn({schema:new N({value:t.result.blockName.valueBlock.value})}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new V({idBlock:{tagClass:3,tagNumber:0},value:this.value.toSchema().valueBlock.value});default:return new Ee}}toJSON(){const e={variant:this.variant};return(this.variant===1||this.variant===2)&&(e.value=this.value.toJSON()),e}}kn.CLASS_NAME="KeyAgreeRecipientIdentifier";const al="rid",Ea="encryptedKey",aV=[al,Ea];class Qn extends G{constructor(e={}){super(),this.rid=d(e,al,Qn.defaultValues(al)),this.encryptedKey=d(e,Ea,Qn.defaultValues(Ea)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case al:return new kn;case Ea:return new Q;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case al:return t.variant===-1&&!("value"in t);case Ea:return t.isEqual(Qn.defaultValues(Ea));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[kn.schema(t.rid||{}),new Q({name:t.encryptedKey||g})]})}fromSchema(e){X(e,aV);const t=q(e,e,Qn.schema({names:{rid:{names:{blockName:al}},encryptedKey:Ea}}));W.assertSchema(t,this.className),this.rid=new kn({schema:t.result.rid}),this.encryptedKey=t.result.encryptedKey}toSchema(){return new N({value:[this.rid.toSchema(),this.encryptedKey]})}toJSON(){return{rid:this.rid.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}Qn.CLASS_NAME="RecipientEncryptedKey";const ud="encryptedKeys",qk="RecipientEncryptedKeys",oV=[qk];class Ai extends G{constructor(e={}){super(),this.encryptedKeys=d(e,ud,Ai.defaultValues(ud)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ud:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ud:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new _e({name:t.RecipientEncryptedKeys||g,value:Qn.schema()})]})}fromSchema(e){X(e,oV);const t=q(e,e,Ai.schema({names:{RecipientEncryptedKeys:qk}}));W.assertSchema(t,this.className),this.encryptedKeys=Array.from(t.result.RecipientEncryptedKeys,n=>new Qn({schema:n}))}toSchema(){return new N({value:Array.from(this.encryptedKeys,e=>e.toSchema())})}toJSON(){return{encryptedKeys:Array.from(this.encryptedKeys,e=>e.toJSON())}}}Ai.CLASS_NAME="RecipientEncryptedKeys";const ol="version",ll="originator",Ln="ukm",cl="keyEncryptionAlgorithm",ul="recipientEncryptedKeys",hd="recipientCertificate",fd="recipientPublicKey",lV=[ol,ll,Ln,cl,ul];class hs extends G{constructor(e={}){super(),this.version=d(e,ol,hs.defaultValues(ol)),this.originator=d(e,ll,hs.defaultValues(ll)),Ln in e&&(this.ukm=d(e,Ln,hs.defaultValues(Ln))),this.keyEncryptionAlgorithm=d(e,cl,hs.defaultValues(cl)),this.recipientEncryptedKeys=d(e,ul,hs.defaultValues(ul)),this.recipientCertificate=d(e,hd,hs.defaultValues(hd)),this.recipientPublicKey=d(e,fd,hs.defaultValues(fd)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ol:return 0;case ll:return new nr;case Ln:return new Q;case cl:return new H;case ul:return new Ai;case hd:return new He;case fd:return null;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ol:return t===0;case ll:return t.variant===-1&&!("value"in t);case Ln:return t.isEqual(hs.defaultValues(Ln));case cl:return t.algorithmId===g&&!("algorithmParams"in t);case ul:return t.encryptedKeys.length===0;case hd:return!1;case fd:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new U({name:t.version||g}),new V({idBlock:{tagClass:3,tagNumber:0},value:[nr.schema(t.originator||{})]}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Q({name:t.ukm||g})]}),H.schema(t.keyEncryptionAlgorithm||{}),Ai.schema(t.recipientEncryptedKeys||{})]})}fromSchema(e){X(e,lV);const t=q(e,e,hs.schema({names:{version:ol,originator:{names:{blockName:ll}},ukm:Ln,keyEncryptionAlgorithm:{names:{blockName:cl}},recipientEncryptedKeys:{names:{blockName:ul}}}}));W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.originator=new nr({schema:t.result.originator}),Ln in t.result&&(this.ukm=t.result.ukm),this.keyEncryptionAlgorithm=new H({schema:t.result.keyEncryptionAlgorithm}),this.recipientEncryptedKeys=new Ai({schema:t.result.recipientEncryptedKeys})}toSchema(){const e=[];return e.push(new U({value:this.version})),e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[this.originator.toSchema()]})),this.ukm&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[this.ukm]})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.recipientEncryptedKeys.toSchema()),new N({value:e})}toJSON(){const e={version:this.version,originator:this.originator.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),recipientEncryptedKeys:this.recipientEncryptedKeys.toJSON()};return this.ukm&&(e.ukm=this.ukm.toJSON()),e}}hs.CLASS_NAME="KeyAgreeRecipientInfo";const Ca="keyIdentifier",Mr="date",Hr="other",cV=[Ca,Mr,Hr];class Qs extends G{constructor(e={}){super(),this.keyIdentifier=d(e,Ca,Qs.defaultValues(Ca)),Mr in e&&(this.date=d(e,Mr,Qs.defaultValues(Mr))),Hr in e&&(this.other=d(e,Hr,Qs.defaultValues(Hr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ca:return new Q;case Mr:return new ot;case Hr:return new sn;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ca:return t.isEqual(Qs.defaultValues(Ca));case Mr:return t.year===0&&t.month===0&&t.day===0&&t.hour===0&&t.minute===0&&t.second===0&&t.millisecond===0;case Hr:return t.compareWithDefault("keyAttrId",t.keyAttrId)&&!("keyAttr"in t);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new Q({name:t.keyIdentifier||g}),new ot({optional:!0,name:t.date||g}),sn.schema(t.other||{})]})}fromSchema(e){X(e,cV);const t=q(e,e,Qs.schema({names:{keyIdentifier:Ca,date:Mr,other:{names:{blockName:Hr}}}}));W.assertSchema(t,this.className),this.keyIdentifier=t.result.keyIdentifier,Mr in t.result&&(this.date=t.result.date),Hr in t.result&&(this.other=new sn({schema:t.result.other}))}toSchema(){const e=[];return e.push(this.keyIdentifier),this.date&&e.push(this.date),this.other&&e.push(this.other.toSchema()),new N({value:e})}toJSON(){const e={keyIdentifier:this.keyIdentifier.toJSON()};return this.date&&(e.date=this.date),this.other&&(e.other=this.other.toJSON()),e}}Qs.CLASS_NAME="KEKIdentifier";const hl="version",fl="kekid",dl="keyEncryptionAlgorithm",Na="encryptedKey",dd="preDefinedKEK",uV=[hl,fl,dl,Na];class As extends G{constructor(e={}){super(),this.version=d(e,hl,As.defaultValues(hl)),this.kekid=d(e,fl,As.defaultValues(fl)),this.keyEncryptionAlgorithm=d(e,dl,As.defaultValues(dl)),this.encryptedKey=d(e,Na,As.defaultValues(Na)),this.preDefinedKEK=d(e,dd,As.defaultValues(dd)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case hl:return 0;case fl:return new Qs;case dl:return new H;case Na:return new Q;case dd:return _t;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"KEKRecipientInfo":return t===As.defaultValues(hl);case fl:return t.compareWithDefault("keyIdentifier",t.keyIdentifier)&&!("date"in t)&&!("other"in t);case dl:return t.algorithmId===g&&!("algorithmParams"in t);case Na:return t.isEqual(As.defaultValues(Na));case dd:return t.byteLength===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new U({name:t.version||g}),Qs.schema(t.kekid||{}),H.schema(t.keyEncryptionAlgorithm||{}),new Q({name:t.encryptedKey||g})]})}fromSchema(e){X(e,uV);const t=q(e,e,As.schema({names:{version:hl,kekid:{names:{blockName:fl}},keyEncryptionAlgorithm:{names:{blockName:dl}},encryptedKey:Na}}));W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.kekid=new Qs({schema:t.result.kekid}),this.keyEncryptionAlgorithm=new H({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){return new N({value:[new U({value:this.version}),this.kekid.toSchema(),this.keyEncryptionAlgorithm.toSchema(),this.encryptedKey]})}toJSON(){return{version:this.version,kekid:this.kekid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}As.CLASS_NAME="KEKRecipientInfo";const ml="version",$r="keyDerivationAlgorithm",gl="keyEncryptionAlgorithm",Ia="encryptedKey",md="password",hV=[ml,$r,gl,Ia];class Ls extends G{constructor(e={}){super(),this.version=d(e,ml,Ls.defaultValues(ml)),$r in e&&(this.keyDerivationAlgorithm=d(e,$r,Ls.defaultValues($r))),this.keyEncryptionAlgorithm=d(e,gl,Ls.defaultValues(gl)),this.encryptedKey=d(e,Ia,Ls.defaultValues(Ia)),this.password=d(e,md,Ls.defaultValues(md)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ml:return-1;case $r:return new H;case gl:return new H;case Ia:return new Q;case md:return _t;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ml:return t===-1;case $r:case gl:return t.algorithmId===g&&!("algorithmParams"in t);case Ia:return t.isEqual(Ls.defaultValues(Ia));case md:return t.byteLength===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new U({name:t.version||g}),new V({name:t.keyDerivationAlgorithm||g,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:H.schema().valueBlock.value}),H.schema(t.keyEncryptionAlgorithm||{}),new Q({name:t.encryptedKey||g})]})}fromSchema(e){X(e,hV);const t=q(e,e,Ls.schema({names:{version:ml,keyDerivationAlgorithm:$r,keyEncryptionAlgorithm:{names:{blockName:gl}},encryptedKey:Ia}}));W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,$r in t.result&&(this.keyDerivationAlgorithm=new H({schema:new N({value:t.result.keyDerivationAlgorithm.valueBlock.value})})),this.keyEncryptionAlgorithm=new H({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){const e=[];return e.push(new U({value:this.version})),this.keyDerivationAlgorithm&&e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:this.keyDerivationAlgorithm.toSchema().valueBlock.value})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new N({value:e})}toJSON(){const e={version:this.version,keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()};return this.keyDerivationAlgorithm&&(e.keyDerivationAlgorithm=this.keyDerivationAlgorithm.toJSON()),e}}Ls.CLASS_NAME="PasswordRecipientInfo";const pl="oriType",_a="oriValue",fV=[pl,_a];class di extends G{constructor(e={}){super(),this.oriType=d(e,pl,di.defaultValues(pl)),this.oriValue=d(e,_a,di.defaultValues(_a)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case pl:return g;case _a:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case pl:return t===g;case _a:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new he({name:t.oriType||g}),new Ee({name:t.oriValue||g})]})}fromSchema(e){X(e,fV);const t=q(e,e,di.schema({names:{oriType:pl,oriValue:_a}}));W.assertSchema(t,this.className),this.oriType=t.result.oriType.valueBlock.toString(),this.oriValue=t.result.oriValue}toSchema(){return new N({value:[new he({value:this.oriType}),this.oriValue]})}toJSON(){const e={oriType:this.oriType};return di.compareWithDefault(_a,this.oriValue)||(e.oriValue=this.oriValue.toJSON()),e}}di.CLASS_NAME="OtherRecipientInfo";const gd="variant",Wc="value",dV=["blockName"];class Ms extends G{constructor(e={}){super(),this.variant=d(e,gd,Ms.defaultValues(gd)),Wc in e&&(this.value=d(e,Wc,Ms.defaultValues(Wc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case gd:return-1;case Wc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case gd:return t===Ms.defaultValues(e);case Wc:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new lt({value:[Ss.schema({names:{blockName:t.blockName||g}}),new V({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:1},value:hs.schema().valueBlock.value}),new V({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:2},value:As.schema().valueBlock.value}),new V({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:3},value:Ls.schema().valueBlock.value}),new V({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:4},value:di.schema().valueBlock.value})]})}fromSchema(e){X(e,dV);const t=q(e,e,Ms.schema({names:{blockName:"blockName"}}));if(W.assertSchema(t,this.className),t.result.blockName.idBlock.tagClass===1)this.variant=1,this.value=new Ss({schema:t.result.blockName});else{const n=new N({value:t.result.blockName.valueBlock.value});switch(t.result.blockName.idBlock.tagNumber){case 1:this.variant=2,this.value=new hs({schema:n});break;case 2:this.variant=3,this.value=new As({schema:n});break;case 3:this.variant=4,this.value=new Ls({schema:n});break;case 4:this.variant=5,this.value=new di({schema:n});break;default:throw new Error("Incorrect structure of RecipientInfo block")}}}toSchema(){Ue.assertEmpty(this.value,"value","RecipientInfo");const e=this.value.toSchema();switch(this.variant){case 1:return e;case 2:case 3:case 4:return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.variant-1,e;default:return new Ee}}toJSON(){const e={variant:this.variant};return this.value&&this.variant>=1&&this.variant<=4&&(e.value=this.value.toJSON()),e}}Ms.CLASS_NAME="RecipientInfo";const Fr="hashAlgorithm",Kr="maskGenAlgorithm",jr="pSourceAlgorithm",mV=[Fr,Kr,jr];class ss extends G{constructor(e={}){super(),this.hashAlgorithm=d(e,Fr,ss.defaultValues(Fr)),this.maskGenAlgorithm=d(e,Kr,ss.defaultValues(Kr)),this.pSourceAlgorithm=d(e,jr,ss.defaultValues(jr)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Fr:return new H({algorithmId:"1.3.14.3.2.26",algorithmParams:new pt});case Kr:return new H({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new H({algorithmId:"1.3.14.3.2.26",algorithmParams:new pt}).toSchema()});case jr:return new H({algorithmId:"1.2.840.113549.1.1.9",algorithmParams:new Q({valueHex:new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer})});default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new V({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[H.schema(t.hashAlgorithm||{})]}),new V({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[H.schema(t.maskGenAlgorithm||{})]}),new V({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[H.schema(t.pSourceAlgorithm||{})]})]})}fromSchema(e){X(e,mV);const t=q(e,e,ss.schema({names:{hashAlgorithm:{names:{blockName:Fr}},maskGenAlgorithm:{names:{blockName:Kr}},pSourceAlgorithm:{names:{blockName:jr}}}}));W.assertSchema(t,this.className),Fr in t.result&&(this.hashAlgorithm=new H({schema:t.result.hashAlgorithm})),Kr in t.result&&(this.maskGenAlgorithm=new H({schema:t.result.maskGenAlgorithm})),jr in t.result&&(this.pSourceAlgorithm=new H({schema:t.result.pSourceAlgorithm}))}toSchema(){const e=[];return this.hashAlgorithm.isEqual(ss.defaultValues(Fr))||e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(ss.defaultValues(Kr))||e.push(new V({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.pSourceAlgorithm.isEqual(ss.defaultValues(jr))||e.push(new V({idBlock:{tagClass:3,tagNumber:2},value:[this.pSourceAlgorithm.toSchema()]})),new N({value:e})}toJSON(){const e={};return this.hashAlgorithm.isEqual(ss.defaultValues(Fr))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(ss.defaultValues(Kr))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.pSourceAlgorithm.isEqual(ss.defaultValues(jr))||(e.pSourceAlgorithm=this.pSourceAlgorithm.toJSON()),e}}ss.CLASS_NAME="RSAESOAEPParams";const wl="keyInfo",Jr="entityUInfo",yl="suppPubInfo",gV=[wl,Jr,yl];class Fn extends G{constructor(e={}){super(),this.keyInfo=d(e,wl,Fn.defaultValues(wl)),Jr in e&&(this.entityUInfo=d(e,Jr,Fn.defaultValues(Jr))),this.suppPubInfo=d(e,yl,Fn.defaultValues(yl)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wl:return new H;case Jr:return new Q;case yl:return new Q;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wl:case Jr:case yl:return t.isEqual(Fn.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[H.schema(t.keyInfo||{}),new V({name:t.entityUInfo||g,idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[new Q]}),new V({name:t.suppPubInfo||g,idBlock:{tagClass:3,tagNumber:2},value:[new Q]})]})}fromSchema(e){X(e,gV);const t=q(e,e,Fn.schema({names:{keyInfo:{names:{blockName:wl}},entityUInfo:Jr,suppPubInfo:yl}}));W.assertSchema(t,this.className),this.keyInfo=new H({schema:t.result.keyInfo}),Jr in t.result&&(this.entityUInfo=t.result.entityUInfo.valueBlock.value[0]),this.suppPubInfo=t.result.suppPubInfo.valueBlock.value[0]}toSchema(){const e=[];return e.push(this.keyInfo.toSchema()),this.entityUInfo&&e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[this.entityUInfo]})),e.push(new V({idBlock:{tagClass:3,tagNumber:2},value:[this.suppPubInfo]})),new N({value:e})}toJSON(){const e={keyInfo:this.keyInfo.toJSON(),suppPubInfo:this.suppPubInfo.toJSON()};return this.entityUInfo&&(e.entityUInfo=this.entityUInfo.toJSON()),e}}Fn.CLASS_NAME="ECCCMSSharedInfo";const vl="version",Wr="originatorInfo",bl="recipientInfos",Sl="encryptedContentInfo",qr="unprotectedAttrs",pV=[vl,Wr,bl,Sl,qr],Mb={kdfAlgorithm:"SHA-512",kekEncryptionLength:256},wV={"P-256":256,"P-384":384,"P-521":528};class Ys extends G{constructor(e={}){super(),this.version=d(e,vl,Ys.defaultValues(vl)),Wr in e&&(this.originatorInfo=d(e,Wr,Ys.defaultValues(Wr))),this.recipientInfos=d(e,bl,Ys.defaultValues(bl)),this.encryptedContentInfo=d(e,Sl,Ys.defaultValues(Sl)),qr in e&&(this.unprotectedAttrs=d(e,qr,Ys.defaultValues(qr))),this.policy={disableSplit:!!e.disableSplit},e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case vl:return 0;case Wr:return new ao;case bl:return[];case Sl:return new yt;case qr:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case vl:return t===Ys.defaultValues(e);case Wr:return t.certs.certificates.length===0&&t.crls.crls.length===0;case bl:case qr:return t.length===0;case Sl:return yt.compareWithDefault("contentType",t.contentType)&&yt.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&yt.compareWithDefault("encryptedContent",t.encryptedContent);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new U({name:t.version||g}),new V({name:t.originatorInfo||g,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:ao.schema().valueBlock.value}),new vt({value:[new _e({name:t.recipientInfos||g,value:Ms.schema()})]}),yt.schema(t.encryptedContentInfo||{}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new _e({name:t.unprotectedAttrs||g,value:nt.schema()})]})]})}fromSchema(e){X(e,pV);const t=q(e,e,Ys.schema({names:{version:vl,originatorInfo:Wr,recipientInfos:bl,encryptedContentInfo:{names:{blockName:Sl}},unprotectedAttrs:qr}}));W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,Wr in t.result&&(this.originatorInfo=new ao({schema:new N({value:t.result.originatorInfo.valueBlock.value})})),this.recipientInfos=Array.from(t.result.recipientInfos,n=>new Ms({schema:n})),this.encryptedContentInfo=new yt({schema:t.result.encryptedContentInfo}),qr in t.result&&(this.unprotectedAttrs=Array.from(t.result.unprotectedAttrs,n=>new nt({schema:n})))}toSchema(){const e=[];return e.push(new U({value:this.version})),this.originatorInfo&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:this.originatorInfo.toSchema().valueBlock.value})),e.push(new vt({value:Array.from(this.recipientInfos,t=>t.toSchema())})),e.push(this.encryptedContentInfo.toSchema()),this.unprotectedAttrs&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,t=>t.toSchema())})),new N({value:e})}toJSON(){const e={version:this.version,recipientInfos:Array.from(this.recipientInfos,t=>t.toJSON()),encryptedContentInfo:this.encryptedContentInfo.toJSON()};return this.originatorInfo&&(e.originatorInfo=this.originatorInfo.toJSON()),this.unprotectedAttrs&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,t=>t.toJSON())),e}addRecipientByCertificate(e,t,n,r=Ie(!0)){const i=Object.assign({useOAEP:!0,oaepHashAlgorithm:"SHA-512"},Mb,t||{});if(e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.113549")!==-1)n=1;else if(e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.10045")!==-1)n=2;else throw new Error(`Unknown type of certificate's public key: ${e.subjectPublicKeyInfo.algorithm.algorithmId}`);switch(n){case 1:{let a,o;if(i.useOAEP===!0){a=r.getOIDByAlgorithm({name:"RSA-OAEP"},!0,"keyEncryptionAlgorithm");const c=r.getOIDByAlgorithm({name:i.oaepHashAlgorithm},!0,"RSAES-OAEP-params"),u=new H({algorithmId:c,algorithmParams:new pt});o=new ss({hashAlgorithm:u,maskGenAlgorithm:new H({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:u.toSchema()})}).toSchema()}else{if(a=r.getOIDByAlgorithm({name:"RSAES-PKCS1-v1_5"}),a===g)throw new Error("Can not find OID for RSAES-PKCS1-v1_5");o=new pt}const l=new Ss({version:0,rid:new Bt({issuer:e.issuer,serialNumber:e.serialNumber}),keyEncryptionAlgorithm:new H({algorithmId:a,algorithmParams:o}),recipientCertificate:e});this.recipientInfos.push(new Ms({variant:1,value:l}))}break;case 2:{const a=new kn({variant:1,value:new Bt({issuer:e.issuer,serialNumber:e.serialNumber})});this._addKeyAgreeRecipientInfo(a,i,{recipientCertificate:e},r)}break;default:throw new Error(`Unknown "variant" value: ${n}`)}return!0}addRecipientByPreDefinedData(e,t={},n,r=Ie(!0)){if(Ye.assert(e,"preDefinedData","ArrayBuffer"),!e.byteLength)throw new Error("Pre-defined data could have zero length");if(!t.keyIdentifier){const i=new ArrayBuffer(16),a=new Uint8Array(i);r.getRandomValues(a),t.keyIdentifier=i}switch(t.hmacHashAlgorithm||(t.hmacHashAlgorithm="SHA-512"),t.iterationCount===void 0&&(t.iterationCount=2048),t.keyEncryptionAlgorithm||(t.keyEncryptionAlgorithm={name:"AES-KW",length:256}),t.keyEncryptionAlgorithmParams||(t.keyEncryptionAlgorithmParams=new pt),n){case 1:{const i=r.getOIDByAlgorithm(t.keyEncryptionAlgorithm,!0,"keyEncryptionAlgorithm"),a=new As({version:4,kekid:new Qs({keyIdentifier:new Q({valueHex:t.keyIdentifier})}),keyEncryptionAlgorithm:new H({algorithmId:i,algorithmParams:t.keyEncryptionAlgorithmParams}),preDefinedKEK:e});this.recipientInfos.push(new Ms({variant:3,value:a}))}break;case 2:{const i=r.getOIDByAlgorithm({name:"PBKDF2"},!0,"keyDerivationAlgorithm"),a=new ArrayBuffer(64),o=new Uint8Array(a);r.getRandomValues(o);const l=r.getOIDByAlgorithm({name:"HMAC",hash:{name:t.hmacHashAlgorithm}},!0,"hmacHashAlgorithm"),c=new qt({salt:new Q({valueHex:a}),iterationCount:t.iterationCount,prf:new H({algorithmId:l,algorithmParams:new pt})}),u=r.getOIDByAlgorithm(t.keyEncryptionAlgorithm,!0,"keyEncryptionAlgorithm"),h=new Ls({version:0,keyDerivationAlgorithm:new H({algorithmId:i,algorithmParams:c.toSchema()}),keyEncryptionAlgorithm:new H({algorithmId:u,algorithmParams:t.keyEncryptionAlgorithmParams}),password:e});this.recipientInfos.push(new Ms({variant:4,value:h}))}break;default:throw new Error(`Unknown value for "variant": ${n}`)}}addRecipientByKeyIdentifier(e,t,n,r=Ie(!0)){const i=Object.assign({},Mb,n||{}),a=new kn({variant:2,value:new wn({subjectKeyIdentifier:new Q({valueHex:t})})});this._addKeyAgreeRecipientInfo(a,i,{recipientPublicKey:e},r)}_addKeyAgreeRecipientInfo(e,t,n,r=Ie(!0)){const i=new Qn({rid:e}),a=r.getOIDByAlgorithm({name:"AES-KW",length:t.kekEncryptionLength},!0,"keyEncryptionAlgorithm"),o=new H({algorithmId:a}),l=r.getOIDByAlgorithm({name:"ECDH",kdf:t.kdfAlgorithm},!0,"KeyAgreeRecipientInfo"),c=new ArrayBuffer(64),u=new Uint8Array(c);r.getRandomValues(u);const h={version:3,ukm:new Q({valueHex:c}),keyEncryptionAlgorithm:new H({algorithmId:l,algorithmParams:o.toSchema()}),recipientEncryptedKeys:new Ai({encryptedKeys:[i]})},f=new hs(Object.assign(h,n));this.recipientInfos.push(new Ms({variant:2,value:f}))}async encrypt(e,t,n=Ie(!0)){const r=new ArrayBuffer(16),i=new Uint8Array(r);n.getRandomValues(i);const a=new Uint8Array(t),o=n.getOIDByAlgorithm(e,!0,"contentEncryptionAlgorithm"),l=await n.generateKey(e,!0,["encrypt"]),c=await n.encrypt({name:e.name,iv:i},l,a),u=await n.exportKey("raw",l);this.version=2,this.encryptedContentInfo=new yt({disableSplit:this.policy.disableSplit,contentType:"1.2.840.113549.1.7.1",contentEncryptionAlgorithm:new H({algorithmId:o,algorithmParams:new Q({valueHex:r})}),encryptedContent:new Q({valueHex:c})});const h=async E=>{const T=this.recipientInfos[E].value;let x,y;if(T.recipientPublicKey)x=T.recipientPublicKey.algorithm.namedCurve,y=T.recipientPublicKey;else if(T.recipientCertificate){const oe=T.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(oe.constructor.blockName()!==he.blockName())throw new Error(`Incorrect "recipientCertificate" for index ${E}`);switch(oe.valueBlock.toString()){case"1.2.840.10045.3.1.7":x="P-256";break;case"1.3.132.0.34":x="P-384";break;case"1.3.132.0.35":x="P-521";break;default:throw new Error(`Incorrect curve OID for index ${E}`)}y=await T.recipientCertificate.getPublicKey({algorithm:{algorithm:{name:"ECDH",namedCurve:x},usages:[]}},n)}else throw new Error("Unsupported RecipientInfo");const p=wV[x],k=await n.generateKey({name:"ECDH",namedCurve:x},!0,["deriveBits"]),C=await n.exportKey("spki",k.publicKey),L=await n.deriveBits({name:"ECDH",public:y},k.privateKey,p),M=new H({schema:T.keyEncryptionAlgorithm.algorithmParams}),F=n.getAlgorithmByOID(M.algorithmId,!0,"aesKWAlgorithm");let ne=F.length;const ce=new ArrayBuffer(4),te=new Uint8Array(ce);for(let oe=3;oe>=0;oe--)te[oe]=ne,ne>>=8;const Ce=new Fn({keyInfo:new H({algorithmId:M.algorithmId}),entityUInfo:T.ukm,suppPubInfo:new Q({valueHex:ce})}).toSchema().toBER(!1),ye=n.getAlgorithmByOID(T.keyEncryptionAlgorithm.algorithmId,!0,"ecdhAlgorithm"),ie=await Nb(ye.kdf,L,F.length,Ce,n),se=await n.importKey("raw",ie,{name:"AES-KW"},!0,["wrapKey"]),ae=await n.wrapKey("raw",l,se,{name:"AES-KW"}),Re=new nr;return Re.variant=3,Re.value=Xn.fromBER(C),T.originator=Re,T.recipientEncryptedKeys.encryptedKeys[0].encryptedKey=new Q({valueHex:ae}),{ecdhPrivateKey:k.privateKey}},f=async E=>{const T=this.recipientInfos[E].value,x=n.getAlgorithmByOID(T.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm");if(x.name==="RSA-OAEP"){const y=T.keyEncryptionAlgorithm.algorithmParams,p=new ss({schema:y});if(x.hash=n.getAlgorithmByOID(p.hashAlgorithm.algorithmId),!("name"in x.hash))throw new Error(`Incorrect OID for hash algorithm: ${p.hashAlgorithm.algorithmId}`)}try{const y=await T.recipientCertificate.getPublicKey({algorithm:{algorithm:x,usages:["encrypt","wrapKey"]}},n),p=await n.encrypt(y.algorithm,y,u);T.encryptedKey=new Q({valueHex:p})}catch{}},m=async E=>{const T=this.recipientInfos[E].value,x=n.getAlgorithmByOID(T.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm"),y=await n.importKey("raw",new Uint8Array(T.preDefinedKEK),x,!0,["wrapKey"]),p=await n.wrapKey("raw",l,y,x);T.encryptedKey=new Q({valueHex:p})},S=async E=>{const T=this.recipientInfos[E].value;let x;if(!T.keyDerivationAlgorithm)throw new Error('Please append encoded "keyDerivationAlgorithm"');if(!T.keyDerivationAlgorithm.algorithmParams)throw new Error('Incorrectly encoded "keyDerivationAlgorithm"');try{x=new qt({schema:T.keyDerivationAlgorithm.algorithmParams})}catch{throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}const y=new Uint8Array(T.password),p=await n.importKey("raw",y,"PBKDF2",!1,["deriveKey"]),k=n.getAlgorithmByOID(T.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm");let C="SHA-1";x.prf&&(C=n.getAlgorithmByOID(x.prf.algorithmId,!0,"prfAlgorithm").hash.name);const L=new Uint8Array(x.salt.valueBlock.valueHex),M=x.iterationCount,F=await n.deriveKey({name:"PBKDF2",hash:{name:C},salt:L,iterations:M},p,k,!0,["wrapKey"]),ne=await n.wrapKey("raw",l,F,k);T.encryptedKey=new Q({valueHex:ne})},A=[];for(let E=0;E<this.recipientInfos.length;E++)switch(this.recipientInfos[E].variant){case 1:A.push(await f(E));break;case 2:A.push(await h(E));break;case 3:A.push(await m(E));break;case 4:A.push(await S(E));break;default:throw new Error(`Unknown recipient type in array with index ${E}`)}return A}async decrypt(e,t,n=Ie(!0)){const r=t||{};if(e+1>this.recipientInfos.length)throw new Error(`Maximum value for "index" is: ${this.recipientInfos.length-1}`);const i=async A=>{const E=this.recipientInfos[A].value;let T,x,y;const p=E.originator;if(r.recipientCertificate){const ye=r.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(ye.constructor.blockName()!==he.blockName())throw new Error(`Incorrect "recipientCertificate" for index ${A}`);T=ye.valueBlock.toString()}else if(p.value.algorithm.algorithmParams){const ye=p.value.algorithm.algorithmParams;if(ye.constructor.blockName()!==he.blockName())throw new Error(`Incorrect originator for index ${A}`);T=ye.valueBlock.toString()}else throw new Error('Parameter "recipientCertificate" is mandatory for "KeyAgreeRecipientInfo" if algorithm params are missing from originator');if(!r.recipientPrivateKey)throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyAgreeRecipientInfo"');switch(T){case"1.2.840.10045.3.1.7":x="P-256",y=256;break;case"1.3.132.0.34":x="P-384",y=384;break;case"1.3.132.0.35":x="P-521",y=528;break;default:throw new Error(`Incorrect curve OID for index ${A}`)}let k,C=n;ve.isBufferSource(r.recipientPrivateKey)?k=await n.importKey("pkcs8",r.recipientPrivateKey,{name:"ECDH",namedCurve:x},!0,["deriveBits"]):(k=r.recipientPrivateKey,"crypto"in r&&r.crypto&&(C=r.crypto.subtle)),"algorithmParams"in p.value.algorithm||(p.value.algorithm.algorithmParams=new he({value:T}));const L=p.value.toSchema().toBER(!1),M=await n.importKey("spki",L,{name:"ECDH",namedCurve:x},!0,[]),F=await C.deriveBits({name:"ECDH",public:M},k,y);async function ne(ye){ye=ye||!1;const ie=new H({schema:E.keyEncryptionAlgorithm.algorithmParams}),se=n.getAlgorithmByOID(ie.algorithmId,!0,"kwAlgorithm");let ae=se.length;const Re=new ArrayBuffer(4),oe=new Uint8Array(Re);for(let qe=3;qe>=0;qe--)oe[qe]=ae,ae>>=8;const de={algorithmId:ie.algorithmId};ye&&(de.algorithmParams=new pt);const be=new Fn({keyInfo:new H(de),entityUInfo:E.ukm,suppPubInfo:new Q({valueHex:Re})}).toSchema().toBER(!1),Be=n.getAlgorithmByOID(E.keyEncryptionAlgorithm.algorithmId,!0,"ecdhAlgorithm");if(!Be.name)throw new Error(`Incorrect OID for key encryption algorithm: ${E.keyEncryptionAlgorithm.algorithmId}`);return Nb(Be.kdf,F,se.length,be,n)}const ce=await ne(),te=async ye=>n.importKey("raw",ye,{name:"AES-KW"},!0,["unwrapKey"]),fe=await te(ce),Ce=async ye=>{const ie=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,se=n.getAlgorithmByOID(ie,!0,"contentEncryptionAlgorithm");return n.unwrapKey("raw",E.recipientEncryptedKeys.encryptedKeys[0].encryptedKey.valueBlock.valueHexView,ye,{name:"AES-KW"},se,!0,["decrypt"])};try{return await Ce(fe)}catch{const ye=await ne(!0),ie=await te(ye);return Ce(ie)}},a=async A=>{const E=this.recipientInfos[A].value;if(!r.recipientPrivateKey)throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyTransRecipientInfo"');const T=n.getAlgorithmByOID(E.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm");if(T.name==="RSA-OAEP"){const L=E.keyEncryptionAlgorithm.algorithmParams,M=new ss({schema:L});if(T.hash=n.getAlgorithmByOID(M.hashAlgorithm.algorithmId),!("name"in T.hash))throw new Error(`Incorrect OID for hash algorithm: ${M.hashAlgorithm.algorithmId}`)}let x,y=n;ve.isBufferSource(r.recipientPrivateKey)?x=await n.importKey("pkcs8",r.recipientPrivateKey,T,!0,["decrypt"]):(x=r.recipientPrivateKey,"crypto"in r&&r.crypto&&(y=r.crypto.subtle));const p=await y.decrypt(x.algorithm,x,E.encryptedKey.valueBlock.valueHexView),k=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,C=n.getAlgorithmByOID(k,!0,"contentEncryptionAlgorithm");if(!("name"in C))throw new Error(`Incorrect "contentEncryptionAlgorithm": ${k}`);return n.importKey("raw",p,C,!0,["decrypt"])},o=async A=>{const E=this.recipientInfos[A].value;if(!r.preDefinedData)throw new Error('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');const T=n.getAlgorithmByOID(E.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm"),x=await n.importKey("raw",r.preDefinedData,T,!0,["unwrapKey"]),y=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,p=n.getAlgorithmByOID(y,!0,"contentEncryptionAlgorithm");if(!p.name)throw new Error(`Incorrect "contentEncryptionAlgorithm": ${y}`);return n.unwrapKey("raw",E.encryptedKey.valueBlock.valueHexView,x,T,p,!0,["decrypt"])},l=async A=>{const E=this.recipientInfos[A].value;let T;if(!r.preDefinedData)throw new Error('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');if(!E.keyDerivationAlgorithm)throw new Error('Please append encoded "keyDerivationAlgorithm"');if(!E.keyDerivationAlgorithm.algorithmParams)throw new Error('Incorrectly encoded "keyDerivationAlgorithm"');try{T=new qt({schema:E.keyDerivationAlgorithm.algorithmParams})}catch{throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}const x=await n.importKey("raw",r.preDefinedData,"PBKDF2",!1,["deriveKey"]),y=n.getAlgorithmByOID(E.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm"),p=T.prf?n.getAlgorithmByOID(T.prf.algorithmId,!0,"prfAlgorithm").hash.name:"SHA-1",k=new Uint8Array(T.salt.valueBlock.valueHex),C=T.iterationCount,L=await n.deriveKey({name:"PBKDF2",hash:{name:p},salt:k,iterations:C},x,y,!0,["unwrapKey"]),M=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,F=n.getAlgorithmByOID(M,!0,"contentEncryptionAlgorithm");return n.unwrapKey("raw",E.encryptedKey.valueBlock.valueHexView,L,y,F,!0,["decrypt"])};let c;switch(this.recipientInfos[e].variant){case 1:c=await a(e);break;case 2:c=await i(e);break;case 3:c=await o(e);break;case 4:c=await l(e);break;default:throw new Error(`Unknown recipient type in array with index ${e}`)}const u=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,h=n.getAlgorithmByOID(u,!0,"contentEncryptionAlgorithm"),f=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams.valueBlock.valueHex,m=new Uint8Array(f);if(!this.encryptedContentInfo.encryptedContent)throw new Error("Required property `encryptedContent` is empty");const S=this.encryptedContentInfo.getEncryptedContent();return n.decrypt({name:h.name,iv:m},c,S)}}Ys.CLASS_NAME="EnvelopedData";const Co="safeContents",qc="parsedValue",Hb="contentInfos";class oo extends G{constructor(e={}){super(),this.safeContents=d(e,Co,oo.defaultValues(Co)),qc in e&&(this.parsedValue=d(e,qc,oo.defaultValues(qc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Co:return[];case qc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Co:return t.length===0;case qc:return t instanceof Object&&Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new _e({name:t.contentInfos||g,value:st.schema()})]})}fromSchema(e){X(e,[Hb]);const t=q(e,e,oo.schema({names:{contentInfos:Hb}}));W.assertSchema(t,this.className),this.safeContents=Array.from(t.result.contentInfos,n=>new st({schema:n}))}toSchema(){return new N({value:Array.from(this.safeContents,e=>e.toSchema())})}toJSON(){return{safeContents:Array.from(this.safeContents,e=>e.toJSON())}}async parseInternalValues(e,t=Ie(!0)){if(Ue.assert(e,Co),Ye.assert(e.safeContents,Co,"Array"),e.safeContents.length!==this.safeContents.length)throw new Ye('Length of "parameters.safeContents" must be equal to "this.safeContents.length"');this.parsedValue={safeContents:[]};for(const[n,r]of this.safeContents.entries()){const i=e.safeContents[n],a=`parameters.safeContents[${n}]`;switch(r.contentType){case uy:{Ye.assert(r.content,"this.safeContents[j].content",Q);const o=r.content.getValue();this.parsedValue.safeContents.push({privacyMode:0,value:Yn.fromBER(o)})}break;case Mk:{const o=new Ys({schema:r.content});Ue.assert(a,i,"recipientCertificate","recipientKey");const l=i,c=l.recipientCertificate,u=l.recipientKey,h=await o.decrypt(0,{recipientCertificate:c,recipientPrivateKey:u},t);this.parsedValue.safeContents.push({privacyMode:2,value:Yn.fromBER(h)})}break;case Hk:{const o=new bn({schema:r.content});Ue.assert(a,i,"password");const l=i.password,c=await o.decrypt({password:l},t);this.parsedValue.safeContents.push({privacyMode:1,value:Yn.fromBER(c)})}break;default:throw new Error(`Unknown "contentType" for AuthenticatedSafe: " ${r.contentType}`)}}}async makeInternalValues(e,t=Ie(!0)){if(!this.parsedValue)throw new Error('Please run "parseValues" first or add "parsedValue" manually');if(Ye.assert(this.parsedValue,"this.parsedValue","object"),Ye.assert(this.parsedValue.safeContents,"this.parsedValue.safeContents","Array"),Ye.assert(e,"parameters","object"),Ue.assert(e,"safeContents"),Ye.assert(e.safeContents,"parameters.safeContents","Array"),e.safeContents.length!==this.parsedValue.safeContents.length)throw new Ye('Length of "parameters.safeContents" must be equal to "this.parsedValue.safeContents"');this.safeContents=[];for(const[n,r]of this.parsedValue.safeContents.entries())switch(Ue.assert("content",r,"privacyMode","value"),Ye.assert(r.value,"content.value",Yn),r.privacyMode){case 0:{const i=r.value.toSchema().toBER(!1);this.safeContents.push(new st({contentType:"1.2.840.113549.1.7.1",content:new Q({valueHex:i})}))}break;case 1:{const i=new bn,a=e.safeContents[n];a.contentToEncrypt=r.value.toSchema().toBER(!1),await i.encrypt(a,t),this.safeContents.push(new st({contentType:"1.2.840.113549.1.7.6",content:i.toSchema()}))}break;case 2:{const i=new Ys,a=r.value.toSchema().toBER(!1),o=e.safeContents[n];switch(Ue.assert(`parameters.safeContents[${n}]`,o,"encryptingCertificate","encryptionAlgorithm"),!0){case o.encryptionAlgorithm.name.toLowerCase()==="aes-cbc":case o.encryptionAlgorithm.name.toLowerCase()==="aes-gcm":break;default:throw new Error(`Incorrect parameter "encryptionAlgorithm" in "parameters.safeContents[i]": ${o.encryptionAlgorithm}`)}switch(!0){case o.encryptionAlgorithm.length===128:case o.encryptionAlgorithm.length===192:case o.encryptionAlgorithm.length===256:break;default:throw new Error(`Incorrect parameter "encryptionAlgorithm.length" in "parameters.safeContents[i]": ${o.encryptionAlgorithm.length}`)}const l=o.encryptionAlgorithm;i.addRecipientByCertificate(o.encryptingCertificate,{},void 0,t),await i.encrypt(l,a,t),this.safeContents.push(new st({contentType:"1.2.840.113549.1.7.3",content:i.toSchema()}))}break;default:throw new Error(`Incorrect value for "content.privacyMode": ${r.privacyMode}`)}return this}}oo.CLASS_NAME="AuthenticatedSafe";const Ba="hashAlgorithm",Al="issuerNameHash",kl="issuerKeyHash",xa="serialNumber",yV=[Ba,Al,kl,xa];class Ct extends G{constructor(e={}){super(),this.hashAlgorithm=d(e,Ba,Ct.defaultValues(Ba)),this.issuerNameHash=d(e,Al,Ct.defaultValues(Al)),this.issuerKeyHash=d(e,kl,Ct.defaultValues(kl)),this.serialNumber=d(e,xa,Ct.defaultValues(xa)),e.schema&&this.fromSchema(e.schema)}static async create(e,t,n=Ie(!0)){const r=new Ct;return await r.createForCertificate(e,t,n),r}static defaultValues(e){switch(e){case Ba:return new H;case Al:case kl:return new Q;case xa:return new U;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ba:return t.algorithmId===g&&!("algorithmParams"in t);case Al:case kl:case xa:return t.isEqual(Ct.defaultValues(xa));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[H.schema(t.hashAlgorithmObject||{names:{blockName:t.hashAlgorithm||g}}),new Q({name:t.issuerNameHash||g}),new Q({name:t.issuerKeyHash||g}),new U({name:t.serialNumber||g})]})}fromSchema(e){X(e,yV);const t=q(e,e,Ct.schema({names:{hashAlgorithm:Ba,issuerNameHash:Al,issuerKeyHash:kl,serialNumber:xa}}));W.assertSchema(t,this.className),this.hashAlgorithm=new H({schema:t.result.hashAlgorithm}),this.issuerNameHash=t.result.issuerNameHash,this.issuerKeyHash=t.result.issuerKeyHash,this.serialNumber=t.result.serialNumber}toSchema(){return new N({value:[this.hashAlgorithm.toSchema(),this.issuerNameHash,this.issuerKeyHash,this.serialNumber]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),issuerNameHash:this.issuerNameHash.toJSON(),issuerKeyHash:this.issuerKeyHash.toJSON(),serialNumber:this.serialNumber.toJSON()}}isEqual(e){return!(this.hashAlgorithm.algorithmId!==e.hashAlgorithm.algorithmId||!ve.isEqual(this.issuerNameHash.valueBlock.valueHexView,e.issuerNameHash.valueBlock.valueHexView)||!ve.isEqual(this.issuerKeyHash.valueBlock.valueHexView,e.issuerKeyHash.valueBlock.valueHexView)||!this.serialNumber.isEqual(e.serialNumber))}async createForCertificate(e,t,n=Ie(!0)){Ue.assert(t,Ba,"issuerCertificate");const r=n.getOIDByAlgorithm({name:t.hashAlgorithm},!0,"hashAlgorithm");this.hashAlgorithm=new H({algorithmId:r,algorithmParams:new pt});const i=t.issuerCertificate;this.serialNumber=e.serialNumber;const a=await n.digest({name:t.hashAlgorithm},i.subject.toSchema().toBER(!1));this.issuerNameHash=new Q({valueHex:a});const o=i.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView,l=await n.digest({name:t.hashAlgorithm},o);this.issuerKeyHash=new Q({valueHex:l})}}Ct.CLASS_NAME="CertID";const El="certID",Cl="certStatus",Nl="thisUpdate",Gr="nextUpdate",Ta="singleExtensions",vV=[El,Cl,Nl,Gr,Ta];class Xs extends G{constructor(e={}){super(),this.certID=d(e,El,Xs.defaultValues(El)),this.certStatus=d(e,Cl,Xs.defaultValues(Cl)),this.thisUpdate=d(e,Nl,Xs.defaultValues(Nl)),Gr in e&&(this.nextUpdate=d(e,Gr,Xs.defaultValues(Gr))),Ta in e&&(this.singleExtensions=d(e,Ta,Xs.defaultValues(Ta))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case El:return new Ct;case Cl:return{};case Nl:case Gr:return new Date(0,0,0);case Ta:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case El:return Ct.compareWithDefault("hashAlgorithm",t.hashAlgorithm)&&Ct.compareWithDefault("issuerNameHash",t.issuerNameHash)&&Ct.compareWithDefault("issuerKeyHash",t.issuerKeyHash)&&Ct.compareWithDefault("serialNumber",t.serialNumber);case Cl:return Object.keys(t).length===0;case Nl:case Gr:return t===Xs.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[Ct.schema(t.certID||{}),new lt({value:[new ke({name:t.certStatus||g,idBlock:{tagClass:3,tagNumber:0}}),new V({name:t.certStatus||g,idBlock:{tagClass:3,tagNumber:1},value:[new ot,new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ei]})]}),new ke({name:t.certStatus||g,idBlock:{tagClass:3,tagNumber:2},lenBlock:{length:1}})]}),new ot({name:t.thisUpdate||g}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ot({name:t.nextUpdate||g})]}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[ct.schema(t.singleExtensions||{})]})]})}fromSchema(e){X(e,vV);const t=q(e,e,Xs.schema({names:{certID:{names:{blockName:El}},certStatus:Cl,thisUpdate:Nl,nextUpdate:Gr,singleExtensions:{names:{blockName:Ta}}}}));W.assertSchema(t,this.className),this.certID=new Ct({schema:t.result.certID}),this.certStatus=t.result.certStatus,this.thisUpdate=t.result.thisUpdate.toDate(),Gr in t.result&&(this.nextUpdate=t.result.nextUpdate.toDate()),Ta in t.result&&(this.singleExtensions=Array.from(t.result.singleExtensions.valueBlock.value,n=>new Je({schema:n})))}toSchema(){const e=[];return e.push(this.certID.toSchema()),e.push(this.certStatus),e.push(new ot({valueDate:this.thisUpdate})),this.nextUpdate&&e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[new ot({valueDate:this.nextUpdate})]})),this.singleExtensions&&e.push(new N({value:Array.from(this.singleExtensions,t=>t.toSchema())})),new N({value:e})}toJSON(){const e={certID:this.certID.toJSON(),certStatus:this.certStatus.toJSON(),thisUpdate:this.thisUpdate};return this.nextUpdate&&(e.nextUpdate=this.nextUpdate),this.singleExtensions&&(e.singleExtensions=Array.from(this.singleExtensions,t=>t.toJSON())),e}}Xs.CLASS_NAME="SingleResponse";const pd="tbs",Ra="version",_h="responderID",Bh="producedAt",xh="responses",Il="responseExtensions",po="ResponseData",Pd=`${po}.${Ra}`,_l=`${po}.${_h}`,Kp=`${po}.${Bh}`,jp=`${po}.${xh}`,Ld=`${po}.${Il}`,bV=[po,Pd,_l,Kp,jp,Ld];class Rt extends G{constructor(e={}){super(),this.tbsView=new Uint8Array(d(e,pd,Rt.defaultValues(pd))),Ra in e&&(this.version=d(e,Ra,Rt.defaultValues(Ra))),this.responderID=d(e,_h,Rt.defaultValues(_h)),this.producedAt=d(e,Bh,Rt.defaultValues(Bh)),this.responses=d(e,xh,Rt.defaultValues(xh)),Il in e&&(this.responseExtensions=d(e,Il,Rt.defaultValues(Il))),e.schema&&this.fromSchema(e.schema)}get tbs(){return ve.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case Ra:return 0;case pd:return _t;case _h:return{};case Bh:return new Date(0,0,0);case xh:case Il:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case pd:return t.byteLength===0;case _h:return Object.keys(t).length===0;case Bh:return t===Rt.defaultValues(e);case xh:case Il:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||po,value:[new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new U({name:t.version||Pd})]}),new lt({value:[new V({name:t.responderID||_l,idBlock:{tagClass:3,tagNumber:1},value:[Xe.schema(t.ResponseDataByName||{names:{blockName:"ResponseData.byName"}})]}),new V({name:t.responderID||_l,idBlock:{tagClass:3,tagNumber:2},value:[new Q({name:t.ResponseDataByKey||"ResponseData.byKey"})]})]}),new ot({name:t.producedAt||Kp}),new N({value:[new _e({name:jp,value:Xs.schema(t.response||{})})]}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[ct.schema(t.extensions||{names:{blockName:Ld}})]})]})}fromSchema(e){X(e,bV);const t=q(e,e,Rt.schema());W.assertSchema(t,this.className),this.tbsView=t.result.ResponseData.valueBeforeDecodeView,Pd in t.result&&(this.version=t.result[Pd].valueBlock.valueDec),t.result[_l].idBlock.tagNumber===1?this.responderID=new Xe({schema:t.result[_l].valueBlock.value[0]}):this.responderID=t.result[_l].valueBlock.value[0],this.producedAt=t.result[Kp].toDate(),this.responses=Array.from(t.result[jp],n=>new Xs({schema:n})),Ld in t.result&&(this.responseExtensions=Array.from(t.result[Ld].valueBlock.value,n=>new Je({schema:n})))}toSchema(e=!1){let t;if(e===!1){if(!this.tbsView.byteLength)return Rt.schema();const n=St(this.tbsView);W.assert(n,"TBS Response Data"),t=n.result}else{const n=[];Ra in this&&n.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[new U({value:this.version})]})),this.responderID instanceof Xe?n.push(new V({idBlock:{tagClass:3,tagNumber:1},value:[this.responderID.toSchema()]})):n.push(new V({idBlock:{tagClass:3,tagNumber:2},value:[this.responderID]})),n.push(new ot({valueDate:this.producedAt})),n.push(new N({value:Array.from(this.responses,r=>r.toSchema())})),this.responseExtensions&&n.push(new V({idBlock:{tagClass:3,tagNumber:1},value:[new N({value:Array.from(this.responseExtensions,r=>r.toSchema())})]})),t=new N({value:n})}return t}toJSON(){const e={};return Ra in this&&(e.version=this.version),this.responderID&&(e.responderID=this.responderID),this.producedAt&&(e.producedAt=this.producedAt),this.responses&&(e.responses=Array.from(this.responses,t=>t.toJSON())),this.responseExtensions&&(e.responseExtensions=Array.from(this.responseExtensions,t=>t.toJSON())),e}}Rt.CLASS_NAME="ResponseData";const jg="trustedCerts",Jg="certs",Wg="crls",qg="ocsps",Gg="checkDate",Yg="findOrigin",Xg="findIssuer";var ja;(function(s){s[s.unknown=-1]="unknown",s[s.success=0]="success",s[s.noRevocation=11]="noRevocation",s[s.noPath=60]="noPath",s[s.noValidPath=97]="noValidPath"})(ja||(ja={}));class ci extends Error{constructor(e,t){super(t),this.name=ci.NAME,this.code=e,this.message=t}}ci.NAME="ChainValidationError";function SV(s,e){for(let t=0;t<e.length;t++)if(ve.isEqual(s.tbsView,e[t].tbsView))return!0;return!1}class cg{constructor(e={}){this.trustedCerts=d(e,jg,this.defaultValues(jg)),this.certs=d(e,Jg,this.defaultValues(Jg)),this.crls=d(e,Wg,this.defaultValues(Wg)),this.ocsps=d(e,qg,this.defaultValues(qg)),this.checkDate=d(e,Gg,this.defaultValues(Gg)),this.findOrigin=d(e,Yg,this.defaultValues(Yg)),this.findIssuer=d(e,Xg,this.defaultValues(Xg))}static defaultFindOrigin(e,t){e.tbsView.byteLength===0&&(e.tbsView=new Uint8Array(e.encodeTBS().toBER()));for(const n of t.certs)if(n.tbsView.byteLength===0&&(n.tbsView=new Uint8Array(n.encodeTBS().toBER())),ve.isEqual(e.tbsView,n.tbsView))return"Intermediate Certificates";for(const n of t.trustedCerts)if(n.tbsView.byteLength===0&&(n.tbsView=new Uint8Array(n.encodeTBS().toBER())),ve.isEqual(e.tbsView,n.tbsView))return"Trusted Certificates";return"Unknown"}async defaultFindIssuer(e,t,n=Ie(!0)){const r=[];let i=null,a=null,o=null;if(e.subject.isEqual(e.issuer))try{if(await e.verify(void 0,n))return[e]}catch{}if(e.extensions){for(const c of e.extensions)if(c.extnID===ly&&c.parsedValue instanceof jn){c.parsedValue.keyIdentifier?i=c.parsedValue.keyIdentifier:(c.parsedValue.authorityCertIssuer&&(a=c.parsedValue.authorityCertIssuer),c.parsedValue.authorityCertSerialNumber&&(o=c.parsedValue.authorityCertSerialNumber));break}}function l(c){if(i!==null&&c.extensions){let h=!1;for(const f of c.extensions)if(f.extnID===CR&&f.parsedValue){h=!0,ve.isEqual(f.parsedValue.valueBlock.valueHex,i.valueBlock.valueHexView)&&r.push(c);break}if(h)return}let u=!1;o!==null&&(u=c.serialNumber.isEqual(o)),a!==null?c.subject.isEqual(a)&&u&&r.push(c):e.issuer.isEqual(c.subject)&&r.push(c)}for(const c of t.trustedCerts)l(c);for(const c of t.certs)l(c);for(let c=r.length-1;c>=0;c--)try{await e.verify(r[c],n)===!1&&r.splice(c,1)}catch{r.splice(c,1)}return r}defaultValues(e){switch(e){case jg:return[];case Jg:return[];case Wg:return[];case qg:return[];case Gg:return new Date;case Yg:return cg.defaultFindOrigin;case Xg:return this.defaultFindIssuer;default:throw new Error(`Invalid member name for CertificateChainValidationEngine class: ${e}`)}}async sort(e=!1,t=Ie(!0)){const n=[],r=async(S,A)=>{const E=[];function T(y){let p=!0;for(let k=0;k<y.length;k++){for(let C=0;C<y.length;C++)if(C!==k&&y[k]===y[C]){p=!1;break}if(!p)break}return p}if(SV(S,this.trustedCerts))return[[S]];const x=await this.findIssuer(S,this,A);if(x.length===0)throw new Error("No valid certificate paths found");for(let y=0;y<x.length;y++){if(ve.isEqual(x[y].tbsView,S.tbsView)){E.push([x[y]]);continue}const p=await r(x[y],A);for(let k=0;k<p.length;k++){const C=p[k].slice();C.splice(0,0,x[y]),T(C)?E.push(C):E.push(p[k])}}return E},i=async S=>{const A=[],E=[],T=[];if(A.push(...n.filter(x=>S.issuer.isEqual(x.subject))),A.length===0)return{status:1,statusMessage:"No certificate's issuers"};if(E.push(...this.crls.filter(x=>x.issuer.isEqual(S.issuer))),E.length===0)return{status:2,statusMessage:"No CRLs for specific certificate issuer"};for(let x=0;x<E.length;x++){const y=E[x];if(!(y.nextUpdate&&y.nextUpdate.value<this.checkDate))for(let p=0;p<A.length;p++)try{if(await E[x].verify({issuerCertificate:A[p]},t)){T.push({crl:E[x],certificate:A[p]});break}}catch{}}return T.length?{status:0,statusMessage:g,result:T}:{status:3,statusMessage:"No valid CRLs found"}},a=async(S,A)=>{const E=t.getAlgorithmByOID(S.signatureAlgorithm.algorithmId);if(!E.name||!E.hash)return 1;for(let T=0;T<this.ocsps.length;T++){const y=await this.ocsps[T].getCertificateStatus(S,A,t);if(y.isForCertificate)return y.status===0?0:1}return 2};async function o(S,A=!1){let E=!1,T=!1,x=!1,y=!1;if(S.extensions){for(let p=0;p<S.extensions.length;p++){const k=S.extensions[p];if(k.critical&&!k.parsedValue)return{result:!1,resultCode:6,resultMessage:`Unable to parse critical certificate extension: ${k.extnID}`};if(k.extnID===NR){x=!0;const C=new Uint8Array(k.parsedValue.valueBlock.valueHex);(C[0]&4)===4&&(T=!0),(C[0]&2)===2&&(y=!0)}k.extnID===ay&&"cA"in k.parsedValue&&k.parsedValue.cA===!0&&(E=!0)}if(T===!0&&E===!1)return{result:!1,resultCode:3,resultMessage:'Unable to build certificate chain - using "keyCertSign" flag set without BasicConstraints'};if(x===!0&&E===!0&&T===!1)return{result:!1,resultCode:4,resultMessage:'Unable to build certificate chain - "keyCertSign" flag was not set'};if(E===!0&&x===!0&&A&&y===!1)return{result:!1,resultCode:5,resultMessage:'Unable to build certificate chain - intermediate certificate must have "cRLSign" key usage flag'}}return E===!1?{result:!1,resultCode:7,resultMessage:"Unable to build certificate chain - more than one possible end-user certificate"}:{result:!0,resultCode:0,resultMessage:g}}const l=async(S,A)=>{for(let E=0;E<S.length;E++)if(S[E].notBefore.value>A||S[E].notAfter.value<A)return{result:!1,resultCode:8,resultMessage:"The certificate is either not yet valid or expired"};if(S.length<2)return{result:!1,resultCode:9,resultMessage:"Too short certificate path"};for(let E=S.length-2;E>=0;E--)if(S[E].issuer.isEqual(S[E].subject)===!1&&S[E].issuer.isEqual(S[E+1].subject)===!1)return{result:!1,resultCode:10,resultMessage:"Incorrect name chaining"};if(this.crls.length!==0||this.ocsps.length!==0)for(let E=0;E<S.length-1;E++){let T=2,x={status:0,statusMessage:g};if(this.ocsps.length!==0)switch(T=await a(S[E],S[E+1]),T){case 0:continue;case 1:return{result:!1,resultCode:12,resultMessage:"One of certificates was revoked via OCSP response"}}if(this.crls.length!==0){if(x=await i(S[E]),x.status===0&&x.result)for(let y=0;y<x.result.length;y++){if(x.result[y].crl.isCertificateRevoked(S[E]))return{result:!1,resultCode:12,resultMessage:"One of certificates had been revoked"};if((await o(x.result[y].certificate,!0)).result===!1)return{result:!1,resultCode:13,resultMessage:"CRL issuer certificate is not a CA certificate or does not have crlSign flag"}}else if(e===!1)throw new ci(ja.noRevocation,`No revocation values found for one of certificates: ${x.statusMessage}`)}else if(T===2)return{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates"};if(T===2&&x.status===2&&e){const y=S[E+1];let p=!1;if(y.extensions)for(const k of y.extensions)switch(k.extnID){case Vk:case oy:case cy:p=!0;break}if(p)throw new ci(ja.noRevocation,`No revocation values found for one of certificates: ${x.statusMessage}`)}}for(const[E,T]of S.entries()){if(!E)continue;if(!(await o(T)).result)return{result:!1,resultCode:14,resultMessage:"One of intermediate certificates is not a CA certificate"}}return{result:!0}};n.push(...this.trustedCerts),n.push(...this.certs);for(let S=0;S<n.length;S++)for(let A=0;A<n.length;A++)if(S!==A&&ve.isEqual(n[S].tbsView,n[A].tbsView)){n.splice(A,1),S=0;break}const c=n[n.length-1];let u;const h=[c];if(u=await r(c,t),u.length===0)throw new ci(ja.noPath,"Unable to find certificate path");for(let S=u.length-1;S>=0;S--){let A=!1;for(let E=0;E<u[S].length;E++){const T=u[S][E];for(let x=0;x<this.trustedCerts.length;x++)if(ve.isEqual(T.tbsView,this.trustedCerts[x].tbsView)){A=!0;break}if(A)break}A||u.splice(S,1)}if(u.length===0)throw new ci(ja.noValidPath,"No valid certificate paths found");let f=u[0].length,m=0;for(let S=0;S<u.length;S++)u[S].length<f&&(f=u[S].length,m=S);for(let S=0;S<u[m].length;S++)h.push(u[m][S]);if(u=await l(h,this.checkDate),u.result===!1)throw u;return h}async verify(e={},t=Ie(!0)){function n(l,c){const u=ri(l),h=ri(c),f=u.split("."),m=h.split("."),S=f.length,A=m.length;if(S===0||A===0||S<A)return!1;for(let E=0;E<S;E++)if(f[E].length===0)return!1;for(let E=0;E<A;E++)if(m[E].length===0){if(E===0){if(A===1)return!1;continue}return!1}for(let E=0;E<A;E++)if(m[A-1-E].length!==0&&f[S-1-E].localeCompare(m[A-1-E])!==0)return!1;return!0}function r(l,c){const u=ri(l),h=ri(c),f=u.split("@"),m=h.split("@");if(f.length===0||m.length===0||f.length<m.length)return!1;if(m.length===1){if(n(f[1],m[0])){const A=f[1].split("."),E=m[0].split(".");return E[0].length===0?!0:A.length===E.length}return!1}return u.localeCompare(h)===0}function i(l,c){let u=ri(l);const h=ri(c),f=u.split("/");if(h.split("/").length>1)return!1;if(f.length>1){for(let A=0;A<f.length;A++)if(f[A].length>0&&f[A].charAt(f[A].length-1)!==":"){u=f[A].split(":")[0];break}}if(n(u,h)){const A=u.split("."),E=h.split(".");return E[0].length===0?!0:A.length===E.length}return!1}function a(l,c){const u=l.valueBlock.valueHexView,h=c.valueBlock.valueHexView;if(u.length===4&&h.length===8){for(let f=0;f<4;f++)if((u[f]^h[f])&h[f+4])return!1;return!0}if(u.length===16&&h.length===32){for(let f=0;f<16;f++)if((u[f]^h[f])&h[f+16])return!1;return!0}return!1}function o(l,c){if(l.typesAndValues.length===0||c.typesAndValues.length===0)return!0;if(l.typesAndValues.length<c.typesAndValues.length)return!1;let u=!0,h=0;for(let f=0;f<c.typesAndValues.length;f++){let m=!1;for(let S=h;S<l.typesAndValues.length;S++)if(m=l.typesAndValues[S].isEqual(c.typesAndValues[f]),l.typesAndValues[S].type===c.typesAndValues[f].type&&(u=u&&m),m===!0)if(h===0||h===S){h=S+1;break}else return!1;if(m===!1)return!1}return h===0?!1:u}try{if(this.certs.length===0)throw new Error("Empty certificate array");const l=e.passedWhenNotRevValues||!1,c=e.initialPolicySet||[Os],u=e.initialExplicitPolicy||!1,h=e.initialPolicyMappingInhibit||!1,f=e.initialInhibitPolicy||!1,m=e.initialPermittedSubtreesSet||[],S=e.initialExcludedSubtreesSet||[],A=e.initialRequiredNameForms||[];let E=u,T=h,x=f;const y=[!1,!1,!1];let p=0,k=0,C=0,L=m,M=S;const F=A;let ne=1;this.certs=await this.sort(l,t);const ce=[];ce.push(Os);const te=[],fe=new Array(this.certs.length-1);for(let oe=0;oe<this.certs.length-1;oe++)fe[oe]=!0;te.push(fe);const Ce=new Array(this.certs.length-1),ye=new Array(this.certs.length-1);let ie=E?this.certs.length-1:-1;for(let oe=this.certs.length-2;oe>=0;oe--,ne++){const de=this.certs[oe];if(de.extensions){for(let Y=0;Y<de.extensions.length;Y++){const be=de.extensions[Y];if(be.extnID===Pk){ye[oe]=be.parsedValue;for(let Be=0;Be<ce.length;Be++)if(ce[Be]===Os){delete te[Be][oe];break}for(let Be=0;Be<be.parsedValue.certificatePolicies.length;Be++){let qe=-1;const it=be.parsedValue.certificatePolicies[Be].policyIdentifier;for(let De=0;De<ce.length;De++)if(it===ce[De]){qe=De;break}if(qe===-1){ce.push(it);const De=new Array(this.certs.length-1);De[oe]=!0,te.push(De)}else te[qe][oe]=!0}}if(be.extnID===Lk){if(T)return{result:!1,resultCode:98,resultMessage:"Policy mapping prohibited"};Ce[oe]=be.parsedValue}be.extnID===Dk&&E===!1&&(be.parsedValue.requireExplicitPolicy===0?(E=!0,ie=oe):y[0]===!1?(y[0]=!0,p=be.parsedValue.requireExplicitPolicy):p=p>be.parsedValue.requireExplicitPolicy?be.parsedValue.requireExplicitPolicy:p,be.parsedValue.inhibitPolicyMapping===0?T=!0:y[1]===!1?(y[1]=!0,k=be.parsedValue.inhibitPolicyMapping+1):k=k>be.parsedValue.inhibitPolicyMapping+1?be.parsedValue.inhibitPolicyMapping+1:k),be.extnID===VR&&x===!1&&(be.parsedValue.valueBlock.valueDec===0?x=!0:y[2]===!1?(y[2]=!0,C=be.parsedValue.valueBlock.valueDec):C=C>be.parsedValue.valueBlock.valueDec?be.parsedValue.valueBlock.valueDec:C)}if(x===!0){let Y=-1;for(let be=0;be<ce.length;be++)if(ce[be]===Os){Y=be;break}Y!==-1&&delete te[0][oe]}E===!1&&y[0]===!0&&(p--,p===0&&(E=!0,ie=oe,y[0]=!1)),T===!1&&y[1]===!0&&(k--,k===0&&(T=!0,y[1]=!1)),x===!1&&y[2]===!0&&(C--,C===0&&(x=!0,y[2]=!1))}}for(let oe=0;oe<this.certs.length-1;oe++)if(oe<this.certs.length-2&&typeof Ce[oe+1]<"u")for(let de=0;de<Ce[oe+1].mappings.length;de++){if(Ce[oe+1].mappings[de].issuerDomainPolicy===Os||Ce[oe+1].mappings[de].subjectDomainPolicy===Os)return{result:!1,resultCode:99,resultMessage:'The "anyPolicy" should not be a part of policy mapping scheme'};let Y=-1,be=-1;for(let Be=0;Be<ce.length;Be++)ce[Be]===Ce[oe+1].mappings[de].issuerDomainPolicy&&(Y=Be),ce[Be]===Ce[oe+1].mappings[de].subjectDomainPolicy&&(be=Be);typeof te[Y][oe]<"u"&&delete te[Y][oe];for(let Be=0;Be<ye[oe].certificatePolicies.length;Be++)if(Ce[oe+1].mappings[de].subjectDomainPolicy===ye[oe].certificatePolicies[Be].policyIdentifier&&Y!==-1&&be!==-1)for(let qe=0;qe<=oe;qe++)typeof te[be][qe]<"u"&&(te[Y][qe]=!0,delete te[be][qe])}for(let oe=0;oe<ce.length;oe++)if(ce[oe]===Os)for(let de=0;de<ie;de++)delete te[oe][de];const se=[];for(let oe=0;oe<te.length;oe++){let de=!0;for(let Y=0;Y<this.certs.length-1;Y++){let be=!1;if(Y<ie&&ce[oe]===Os&&ce.length>1){de=!1;break}if(typeof te[oe][Y]>"u"){if(Y>=ie){for(let Be=0;Be<ce.length;Be++)if(ce[Be]===Os){te[Be][Y]===!0&&(be=!0);break}}if(!be){de=!1;break}}}de===!0&&se.push(ce[oe])}let ae=[];if(c.length===1&&c[0]===Os&&E===!1)ae=c;else if(se.length===1&&se[0]===Os)ae=c;else for(let oe=0;oe<se.length;oe++)for(let de=0;de<c.length;de++)if(c[de]===se[oe]||c[de]===Os){ae.push(se[oe]);break}const Re={result:ae.length>0,resultCode:0,resultMessage:ae.length>0?g:'Zero "userConstrPolicies" array, no intersections with "authConstrPolicies"',authConstrPolicies:se,userConstrPolicies:ae,explicitPolicyIndicator:E,policyMappings:Ce,certificatePath:this.certs};if(ae.length===0||Re.result===!1)return Re;ne=1;for(let oe=this.certs.length-2;oe>=0;oe--,ne++){const de=this.certs[oe];let Y=[],be=[],Be=[];if(de.extensions)for(let Ve=0;Ve<de.extensions.length;Ve++){const ge=de.extensions[Ve];ge.extnID===Ok&&("permittedSubtrees"in ge.parsedValue&&(be=be.concat(ge.parsedValue.permittedSubtrees)),"excludedSubtrees"in ge.parsedValue&&(Be=Be.concat(ge.parsedValue.excludedSubtrees))),ge.extnID===Bk&&(Y=Y.concat(ge.parsedValue.altNames))}let qe=F.length<=0;for(let Ve=0;Ve<F.length;Ve++)switch(F[Ve].base.type){case 4:{if(F[Ve].base.value.typesAndValues.length!==de.subject.typesAndValues.length)continue;qe=!0;for(let ge=0;ge<de.subject.typesAndValues.length;ge++)if(de.subject.typesAndValues[ge].type!==F[Ve].base.value.typesAndValues[ge].type){qe=!1;break}if(qe===!0)break}break;default:}if(qe===!1)throw Re.result=!1,Re.resultCode=21,Re.resultMessage="No necessary name form found",Re;const it=[[],[],[],[],[]];for(let Ve=0;Ve<L.length;Ve++)switch(L[Ve].base.type){case 1:it[0].push(L[Ve]);break;case 2:it[1].push(L[Ve]);break;case 4:it[2].push(L[Ve]);break;case 6:it[3].push(L[Ve]);break;case 7:it[4].push(L[Ve]);break;default:}for(let Ve=0;Ve<5;Ve++){let ge=!1,ze=!1;const K=it[Ve];for(let P=0;P<K.length;P++){switch(Ve){case 0:if(Y.length>0)for(let w=0;w<Y.length;w++)Y[w].type===1&&(ze=!0,ge=ge||r(Y[w].value,K[P].base.value));else for(let w=0;w<de.subject.typesAndValues.length;w++)(de.subject.typesAndValues[w].type==="1.2.840.113549.1.9.1"||de.subject.typesAndValues[w].type==="0.9.2342.19200300.100.1.3")&&(ze=!0,ge=ge||r(de.subject.typesAndValues[w].value.valueBlock.value,K[P].base.value));break;case 1:if(Y.length>0)for(let w=0;w<Y.length;w++)Y[w].type===2&&(ze=!0,ge=ge||n(Y[w].value,K[P].base.value));break;case 2:ze=!0,ge=o(de.subject,K[P].base.value);break;case 3:if(Y.length>0)for(let w=0;w<Y.length;w++)Y[w].type===6&&(ze=!0,ge=ge||i(Y[w].value,K[P].base.value));break;case 4:if(Y.length>0)for(let w=0;w<Y.length;w++)Y[w].type===7&&(ze=!0,ge=ge||a(Y[w].value,K[P].base.value));break;default:}if(ge)break}if(ge===!1&&K.length>0&&ze)throw Re.result=!1,Re.resultCode=41,Re.resultMessage='Failed to meet "permitted sub-trees" name constraint',Re}let De=!1;for(let Ve=0;Ve<M.length;Ve++){switch(M[Ve].base.type){case 1:if(Y.length>=0)for(let ge=0;ge<Y.length;ge++)Y[ge].type===1&&(De=De||r(Y[ge].value,M[Ve].base.value));else for(let ge=0;ge<de.subject.typesAndValues.length;ge++)(de.subject.typesAndValues[ge].type==="1.2.840.113549.1.9.1"||de.subject.typesAndValues[ge].type==="0.9.2342.19200300.100.1.3")&&(De=De||r(de.subject.typesAndValues[ge].value.valueBlock.value,M[Ve].base.value));break;case 2:if(Y.length>0)for(let ge=0;ge<Y.length;ge++)Y[ge].type===2&&(De=De||n(Y[ge].value,M[Ve].base.value));break;case 4:De=De||o(de.subject,M[Ve].base.value);break;case 6:if(Y.length>0)for(let ge=0;ge<Y.length;ge++)Y[ge].type===6&&(De=De||i(Y[ge].value,M[Ve].base.value));break;case 7:if(Y.length>0)for(let ge=0;ge<Y.length;ge++)Y[ge].type===7&&(De=De||a(Y[ge].value,M[Ve].base.value));break;default:}if(De)break}if(De===!0)throw Re.result=!1,Re.resultCode=42,Re.resultMessage='Failed to meet "excluded sub-trees" name constraint',Re;L=L.concat(be),M=M.concat(Be)}return Re}catch(l){return l instanceof Error?l instanceof ci?{result:!1,resultCode:l.code,resultMessage:l.message,error:l}:{result:!1,resultCode:ja.unknown,resultMessage:l.message,error:l}:l&&typeof l=="object"&&"resultMessage"in l?l:{result:!1,resultCode:-1,resultMessage:`${l}`}}}}const Dd="tbsResponseData",Th="signatureAlgorithm",Rh="signature",Bl="certs",Rf="BasicOCSPResponse",Jp=`${Rf}.${Dd}`,Wp=`${Rf}.${Th}`,qp=`${Rf}.${Rh}`,Ud=`${Rf}.${Bl}`,AV=[Jp,Wp,qp,Ud];class Hs extends G{constructor(e={}){super(),this.tbsResponseData=d(e,Dd,Hs.defaultValues(Dd)),this.signatureAlgorithm=d(e,Th,Hs.defaultValues(Th)),this.signature=d(e,Rh,Hs.defaultValues(Rh)),Bl in e&&(this.certs=d(e,Bl,Hs.defaultValues(Bl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Dd:return new Rt;case Th:return new H;case Rh:return new Pe;case Bl:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"type":{let n=Rt.compareWithDefault("tbs",t.tbs)&&Rt.compareWithDefault("responderID",t.responderID)&&Rt.compareWithDefault("producedAt",t.producedAt)&&Rt.compareWithDefault("responses",t.responses);return"responseExtensions"in t&&(n=n&&Rt.compareWithDefault("responseExtensions",t.responseExtensions)),n}case Th:return t.algorithmId===g&&!("algorithmParams"in t);case Rh:return t.isEqual(Hs.defaultValues(e));case Bl:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||Rf,value:[Rt.schema(t.tbsResponseData||{names:{blockName:Jp}}),H.schema(t.signatureAlgorithm||{names:{blockName:Wp}}),new Pe({name:t.signature||qp}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new N({value:[new _e({name:Ud,value:He.schema(t.certs||{})})]})]})]})}fromSchema(e){X(e,AV);const t=q(e,e,Hs.schema());W.assertSchema(t,this.className),this.tbsResponseData=new Rt({schema:t.result[Jp]}),this.signatureAlgorithm=new H({schema:t.result[Wp]}),this.signature=t.result[qp],Ud in t.result&&(this.certs=Array.from(t.result[Ud],n=>new He({schema:n})))}toSchema(){const e=[];return e.push(this.tbsResponseData.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.certs&&e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[new N({value:Array.from(this.certs,t=>t.toSchema())})]})),new N({value:e})}toJSON(){const e={tbsResponseData:this.tbsResponseData.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.certs&&(e.certs=Array.from(this.certs,t=>t.toJSON())),e}async getCertificateStatus(e,t,n=Ie(!0)){const r={isForCertificate:!1,status:2},i={},a=[];for(const o of this.tbsResponseData.responses){const l=n.getAlgorithmByOID(o.certID.hashAlgorithm.algorithmId,!0,"CertID.hashAlgorithm");if(!i[l.name]){i[l.name]=1;const c=new Ct;a.push(c),await c.createForCertificate(e,{hashAlgorithm:l.name,issuerCertificate:t},n)}}for(const o of this.tbsResponseData.responses)for(const l of a)if(o.certID.isEqual(l)){r.isForCertificate=!0;try{switch(o.certStatus.idBlock.isConstructed){case!0:o.certStatus.idBlock.tagNumber===1&&(r.status=1);break;case!1:switch(o.certStatus.idBlock.tagNumber){case 0:r.status=0;break;case 2:r.status=2;break;default:}break;default:}}catch{}return r}return r}async sign(e,t="SHA-1",n=Ie(!0)){if(!e)throw new Error("Need to provide a private key for signing");const r=await n.getSignatureParameters(e,t),i=r.parameters.algorithm;if(!("name"in i))throw new Error("Empty algorithm");this.signatureAlgorithm=r.signatureAlgorithm,this.tbsResponseData.tbsView=new Uint8Array(this.tbsResponseData.toSchema(!0).toBER());const a=await n.signWithPrivateKey(this.tbsResponseData.tbsView,e,{algorithm:i});this.signature=new Pe({valueHex:a})}async verify(e={},t=Ie(!0)){let n=null,r=-1;const i=e.trustedCerts||[];if(!this.certs)throw new Error("No certificates attached to the BasicOCSPResponse");switch(!0){case this.tbsResponseData.responderID instanceof Xe:for(const[c,u]of this.certs.entries())if(u.subject.isEqual(this.tbsResponseData.responderID)){r=c;break}break;case this.tbsResponseData.responderID instanceof Q:for(const[c,u]of this.certs.entries()){const h=await t.digest({name:"sha-1"},u.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView);if(Cc(h,this.tbsResponseData.responderID.valueBlock.valueHex)){r=c;break}}break;default:throw new Error("Wrong value for responderID")}if(r===-1)throw new Error("Correct certificate was not found in OCSP response");n=this.certs[r];const a=[n];for(const c of this.certs){const u=await Wk(c,n);u&&a.push(u)}if(!(await new cg({certs:a,trustedCerts:i}).verify({},t)).result)throw new Error("Validation of signer's certificate failed");return t.verifyWithPublicKey(this.tbsResponseData.tbsView,this.signature,this.certs[r].subjectPublicKeyInfo,this.signatureAlgorithm)}}Hs.CLASS_NAME="BasicOCSPResponse";const Qg="tbs",zg="version",Zg="subject",ep="subjectPublicKeyInfo",No="attributes",Oh="signatureAlgorithm",Vh="signatureValue",Oc="CertificationRequestInfo",yy=`${Oc}.version`,vy=`${Oc}.subject`,by=`${Oc}.subjectPublicKeyInfo`,Um=`${Oc}.attributes`,kV=[Oc,yy,vy,by,Um,Oh,Vh];function EV(s={}){const e=d(s,"names",{});return new N({name:e.CertificationRequestInfo||Oc,value:[new U({name:e.CertificationRequestInfoVersion||yy}),Xe.schema(e.subject||{names:{blockName:vy}}),as.schema({names:{blockName:by}}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new _e({optional:!0,name:e.CertificationRequestInfoAttributes||Um,value:nt.schema(e.attributes||{})})]})]})}class fs extends G{constructor(e={}){super(),this.tbsView=new Uint8Array(d(e,Qg,fs.defaultValues(Qg))),this.version=d(e,zg,fs.defaultValues(zg)),this.subject=d(e,Zg,fs.defaultValues(Zg)),this.subjectPublicKeyInfo=d(e,ep,fs.defaultValues(ep)),No in e&&(this.attributes=d(e,No,fs.defaultValues(No))),this.signatureAlgorithm=d(e,Oh,fs.defaultValues(Oh)),this.signatureValue=d(e,Vh,fs.defaultValues(Vh)),e.schema&&this.fromSchema(e.schema)}get tbs(){return ve.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case Qg:return _t;case zg:return 0;case Zg:return new Xe;case ep:return new as;case No:return[];case Oh:return new H;case Vh:return new Pe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({value:[EV(t.certificationRequestInfo||{}),new N({name:t.signatureAlgorithm||Oh,value:[new he,new Ee({optional:!0})]}),new Pe({name:t.signatureValue||Vh})]})}fromSchema(e){X(e,kV);const t=q(e,e,fs.schema());W.assertSchema(t,this.className),this.tbsView=t.result.CertificationRequestInfo.valueBeforeDecodeView,this.version=t.result[yy].valueBlock.valueDec,this.subject=new Xe({schema:t.result[vy]}),this.subjectPublicKeyInfo=new as({schema:t.result[by]}),Um in t.result&&(this.attributes=Array.from(t.result[Um],n=>new nt({schema:n}))),this.signatureAlgorithm=new H({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[new U({value:this.version}),this.subject.toSchema(),this.subjectPublicKeyInfo.toSchema()];return No in this&&e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes||[],t=>t.toSchema())})),new N({value:e})}toSchema(e=!1){let t;if(e===!1){if(this.tbsView.byteLength===0)return fs.schema();const n=St(this.tbsView);W.assert(n,"PKCS#10 Certificate Request"),t=n.result}else t=this.encodeTBS();return new N({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:Ae.ToHex(this.tbsView),version:this.version,subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return No in this&&(e.attributes=Array.from(this.attributes||[],t=>t.toJSON())),e}async sign(e,t="SHA-1",n=Ie(!0)){if(!e)throw new Error("Need to provide a private key for signing");const r=await n.getSignatureParameters(e,t),i=r.parameters;this.signatureAlgorithm=r.signatureAlgorithm,this.tbsView=new Uint8Array(this.encodeTBS().toBER());const a=await n.signWithPrivateKey(this.tbsView,e,i);this.signatureValue=new Pe({valueHex:a})}async verify(e=Ie(!0)){return e.verifyWithPublicKey(this.tbsView,this.signatureValue,this.subjectPublicKeyInfo,this.signatureAlgorithm)}async getPublicKey(e,t=Ie(!0)){return t.getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}}fs.CLASS_NAME="CertificationRequest";const Oa="digestAlgorithm",Va="digest",CV=[Oa,Va];class Fs extends G{constructor(e={}){super(),this.digestAlgorithm=d(e,Oa,Fs.defaultValues(Oa)),this.digest=d(e,Va,Fs.defaultValues(Va)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Oa:return new H;case Va:return new Q;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Oa:return H.compareWithDefault("algorithmId",t.algorithmId)&&!("algorithmParams"in t);case Va:return t.isEqual(Fs.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[H.schema(t.digestAlgorithm||{names:{blockName:Oa}}),new Q({name:t.digest||Va})]})}fromSchema(e){X(e,CV);const t=q(e,e,Fs.schema({names:{digestAlgorithm:{names:{blockName:Oa}},digest:Va}}));W.assertSchema(t,this.className),this.digestAlgorithm=new H({schema:t.result.digestAlgorithm}),this.digest=t.result.digest}toSchema(){return new N({value:[this.digestAlgorithm.toSchema(),this.digest]})}toJSON(){return{digestAlgorithm:this.digestAlgorithm.toJSON(),digest:this.digest.toJSON()}}}Fs.CLASS_NAME="DigestInfo";const xl="eContentType",Gs="eContent",NV=[xl,Gs];class ms extends G{constructor(e={}){if(super(),this.eContentType=d(e,xl,ms.defaultValues(xl)),Gs in e&&(this.eContent=d(e,Gs,ms.defaultValues(Gs)),this.eContent.idBlock.tagClass===1&&this.eContent.idBlock.tagNumber===4&&this.eContent.idBlock.isConstructed===!1)){const t=new Q({idBlock:{isConstructed:!0},isConstructed:!0});let n=0;const r=this.eContent.valueBlock.valueHexView.slice().buffer;let i=r.byteLength;for(;i>0;){const a=new Uint8Array(r,n,n+65536>r.byteLength?r.byteLength-n:65536),o=new ArrayBuffer(a.length),l=new Uint8Array(o);for(let c=0;c<l.length;c++)l[c]=a[c];t.valueBlock.value.push(new Q({valueHex:o})),i-=a.length,n+=a.length}this.eContent=t}e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case xl:return g;case Gs:return new Q;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case xl:return t===g;case Gs:return t.idBlock.tagClass===1&&t.idBlock.tagNumber===4?t.isEqual(ms.defaultValues(Gs)):!1;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new he({name:t.eContentType||g}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ee({name:t.eContent||g})]})]})}fromSchema(e){X(e,NV);const t=q(e,e,ms.schema({names:{eContentType:xl,eContent:Gs}}));W.assertSchema(t,this.className),this.eContentType=t.result.eContentType.valueBlock.toString(),Gs in t.result&&(this.eContent=t.result.eContent)}toSchema(){const e=[];return e.push(new he({value:this.eContentType})),this.eContent&&ms.compareWithDefault(Gs,this.eContent)===!1&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.eContent]})),new N({value:e})}toJSON(){const e={eContentType:this.eContentType};return this.eContent&&ms.compareWithDefault(Gs,this.eContent)===!1&&(e.eContent=this.eContent.toJSON()),e}}ms.CLASS_NAME="EncapsulatedContentInfo";const Pa="mac",La="macSalt",Dn="iterations",IV=[Pa,La,Dn];class ns extends G{constructor(e={}){super(),this.mac=d(e,Pa,ns.defaultValues(Pa)),this.macSalt=d(e,La,ns.defaultValues(La)),Dn in e&&(this.iterations=d(e,Dn,ns.defaultValues(Dn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Pa:return new Fs;case La:return new Q;case Dn:return 1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Pa:return Fs.compareWithDefault("digestAlgorithm",t.digestAlgorithm)&&Fs.compareWithDefault("digest",t.digest);case La:return t.isEqual(ns.defaultValues(e));case Dn:return t===ns.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,optional:t.optional||!0,value:[Fs.schema(t.mac||{names:{blockName:Pa}}),new Q({name:t.macSalt||La}),new U({optional:!0,name:t.iterations||Dn})]})}fromSchema(e){X(e,IV);const t=q(e,e,ns.schema({names:{mac:{names:{blockName:Pa}},macSalt:La,iterations:Dn}}));W.assertSchema(t,this.className),this.mac=new Fs({schema:t.result.mac}),this.macSalt=t.result.macSalt,Dn in t.result&&(this.iterations=t.result.iterations.valueBlock.valueDec)}toSchema(){const e=[this.mac.toSchema(),this.macSalt];return this.iterations!==void 0&&e.push(new U({value:this.iterations})),new N({value:e})}toJSON(){const e={mac:this.mac.toJSON(),macSalt:this.macSalt.toJSON()};return this.iterations!==void 0&&(e.iterations=this.iterations),e}}ns.CLASS_NAME="MacData";const Ja="hashAlgorithm",Wa="hashedMessage",_V=[Ja,Wa];class Ft extends G{constructor(e={}){super(),this.hashAlgorithm=d(e,Ja,Ft.defaultValues(Ja)),this.hashedMessage=d(e,Wa,Ft.defaultValues(Wa)),e.schema&&this.fromSchema(e.schema)}static async create(e,t,n=Ie(!0)){const r=n.getOIDByAlgorithm({name:e},!0,"hashAlgorithm"),i=await n.digest(e,t);return new Ft({hashAlgorithm:new H({algorithmId:r,algorithmParams:new pt}),hashedMessage:new Q({valueHex:i})})}static defaultValues(e){switch(e){case Ja:return new H;case Wa:return new Q;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ja:return t.algorithmId===g&&!("algorithmParams"in t);case Wa:return t.isEqual(Ft.defaultValues(e))===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[H.schema(t.hashAlgorithm||{}),new Q({name:t.hashedMessage||g})]})}fromSchema(e){X(e,_V);const t=q(e,e,Ft.schema({names:{hashAlgorithm:{names:{blockName:Ja}},hashedMessage:Wa}}));W.assertSchema(t,this.className),this.hashAlgorithm=new H({schema:t.result.hashAlgorithm}),this.hashedMessage=t.result.hashedMessage}toSchema(){return new N({value:[this.hashAlgorithm.toSchema(),this.hashedMessage]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),hashedMessage:this.hashedMessage.toJSON()}}}Ft.CLASS_NAME="MessageImprint";const Tl="reqCert",Yr="singleRequestExtensions",BV=[Tl,Yr];class zn extends G{constructor(e={}){super(),this.reqCert=d(e,Tl,zn.defaultValues(Tl)),Yr in e&&(this.singleRequestExtensions=d(e,Yr,zn.defaultValues(Yr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Tl:return new Ct;case Yr:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Tl:return t.isEqual(zn.defaultValues(e));case Yr:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[Ct.schema(t.reqCert||{}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Je.schema(t.extensions||{names:{blockName:t.singleRequestExtensions||g}})]})]})}fromSchema(e){X(e,BV);const t=q(e,e,zn.schema({names:{reqCert:{names:{blockName:Tl}},extensions:{names:{blockName:Yr}}}}));W.assertSchema(t,this.className),this.reqCert=new Ct({schema:t.result.reqCert}),Yr in t.result&&(this.singleRequestExtensions=Array.from(t.result.singleRequestExtensions.valueBlock.value,n=>new Je({schema:n})))}toSchema(){const e=[];return e.push(this.reqCert.toSchema()),this.singleRequestExtensions&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new N({value:Array.from(this.singleRequestExtensions,t=>t.toSchema())})]})),new N({value:e})}toJSON(){const e={reqCert:this.reqCert.toJSON()};return this.singleRequestExtensions&&(e.singleRequestExtensions=Array.from(this.singleRequestExtensions,t=>t.toJSON())),e}}zn.CLASS_NAME="Request";const wd="tbs",Rl="version",Ol="requestorName",yd="requestList",Vl="requestExtensions",Vc="TBSRequest",Md=`${Vc}.${Rl}`,Hd=`${Vc}.${Ol}`,Gp=`${Vc}.requests`,$d=`${Vc}.${Vl}`,xV=[Vc,Md,Hd,Gp,$d];class Dt extends G{constructor(e={}){super(),this.tbsView=new Uint8Array(d(e,wd,Dt.defaultValues(wd))),Rl in e&&(this.version=d(e,Rl,Dt.defaultValues(Rl))),Ol in e&&(this.requestorName=d(e,Ol,Dt.defaultValues(Ol))),this.requestList=d(e,yd,Dt.defaultValues(yd)),Vl in e&&(this.requestExtensions=d(e,Vl,Dt.defaultValues(Vl))),e.schema&&this.fromSchema(e.schema)}get tbs(){return ve.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case wd:return _t;case Rl:return 0;case Ol:return new Le;case yd:case Vl:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wd:return t.byteLength===0;case Rl:return t===Dt.defaultValues(e);case Ol:return t.type===Le.defaultValues("type")&&Object.keys(t.value).length===0;case yd:case Vl:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||Vc,value:[new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new U({name:t.TBSRequestVersion||Md})]}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[Le.schema(t.requestorName||{names:{blockName:Hd}})]}),new N({name:t.requestList||"TBSRequest.requestList",value:[new _e({name:t.requests||Gp,value:zn.schema(t.requestNames||{})})]}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[ct.schema(t.extensions||{names:{blockName:t.requestExtensions||$d}})]})]})}fromSchema(e){X(e,xV);const t=q(e,e,Dt.schema());W.assertSchema(t,this.className),this.tbsView=t.result.TBSRequest.valueBeforeDecodeView,Md in t.result&&(this.version=t.result[Md].valueBlock.valueDec),Hd in t.result&&(this.requestorName=new Le({schema:t.result[Hd]})),this.requestList=Array.from(t.result[Gp],n=>new zn({schema:n})),$d in t.result&&(this.requestExtensions=Array.from(t.result[$d].valueBlock.value,n=>new Je({schema:n})))}toSchema(e=!1){let t;if(e===!1){if(this.tbsView.byteLength===0)return Dt.schema();const n=St(this.tbsView);if(W.assert(n,"TBS Request"),!(n.result instanceof N))throw new Error("ASN.1 result should be SEQUENCE");t=n.result}else{const n=[];this.version!==void 0&&n.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[new U({value:this.version})]})),this.requestorName&&n.push(new V({idBlock:{tagClass:3,tagNumber:1},value:[this.requestorName.toSchema()]})),n.push(new N({value:Array.from(this.requestList,r=>r.toSchema())})),this.requestExtensions&&n.push(new V({idBlock:{tagClass:3,tagNumber:2},value:[new N({value:Array.from(this.requestExtensions,r=>r.toSchema())})]})),t=new N({value:n})}return t}toJSON(){const e={};return this.version!=null&&(e.version=this.version),this.requestorName&&(e.requestorName=this.requestorName.toJSON()),e.requestList=Array.from(this.requestList,t=>t.toJSON()),this.requestExtensions&&(e.requestExtensions=Array.from(this.requestExtensions,t=>t.toJSON())),e}}Dt.CLASS_NAME="TBSRequest";const Io="signatureAlgorithm",_o="signature",gr="certs";class Is extends G{constructor(e={}){super(),this.signatureAlgorithm=d(e,Io,Is.defaultValues(Io)),this.signature=d(e,_o,Is.defaultValues(_o)),gr in e&&(this.certs=d(e,gr,Is.defaultValues(gr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Io:return new H;case _o:return new Pe;case gr:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Io:return t.algorithmId===g&&!("algorithmParams"in t);case _o:return t.isEqual(Is.defaultValues(e));case gr:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[H.schema(t.signatureAlgorithm||{}),new Pe({name:t.signature||g}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new N({value:[new _e({name:t.certs||g,value:He.schema({})})]})]})]})}fromSchema(e){X(e,[Io,_o,gr]);const t=q(e,e,Is.schema({names:{signatureAlgorithm:{names:{blockName:Io}},signature:_o,certs:gr}}));W.assertSchema(t,this.className),this.signatureAlgorithm=new H({schema:t.result.signatureAlgorithm}),this.signature=t.result.signature,gr in t.result&&(this.certs=Array.from(t.result.certs,n=>new He({schema:n})))}toSchema(){const e=[];return e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.certs&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new N({value:Array.from(this.certs,t=>t.toSchema())})]})),new N({value:e})}toJSON(){const e={signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.certs&&(e.certs=Array.from(this.certs,t=>t.toJSON())),e}}Is.CLASS_NAME="Signature";const Pl="tbsRequest",Xr="optionalSignature",TV=[Pl,Xr];class ef extends G{constructor(e={}){super(),this.tbsRequest=d(e,Pl,ef.defaultValues(Pl)),Xr in e&&(this.optionalSignature=d(e,Xr,ef.defaultValues(Xr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Pl:return new Dt;case Xr:return new Is;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Pl:return Dt.compareWithDefault("tbs",t.tbs)&&Dt.compareWithDefault("version",t.version)&&Dt.compareWithDefault("requestorName",t.requestorName)&&Dt.compareWithDefault("requestList",t.requestList)&&Dt.compareWithDefault("requestExtensions",t.requestExtensions);case Xr:return Is.compareWithDefault("signatureAlgorithm",t.signatureAlgorithm)&&Is.compareWithDefault("signature",t.signature)&&Is.compareWithDefault("certs",t.certs);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||"OCSPRequest",value:[Dt.schema(t.tbsRequest||{names:{blockName:Pl}}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Is.schema(t.optionalSignature||{names:{blockName:Xr}})]})]})}fromSchema(e){X(e,TV);const t=q(e,e,ef.schema());W.assertSchema(t,this.className),this.tbsRequest=new Dt({schema:t.result.tbsRequest}),Xr in t.result&&(this.optionalSignature=new Is({schema:t.result.optionalSignature}))}toSchema(e=!1){const t=[];return t.push(this.tbsRequest.toSchema(e)),this.optionalSignature&&t.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.optionalSignature.toSchema()]})),new N({value:t})}toJSON(){const e={tbsRequest:this.tbsRequest.toJSON()};return this.optionalSignature&&(e.optionalSignature=this.optionalSignature.toJSON()),e}async createForCertificate(e,t,n=Ie(!0)){const r=new Ct;await r.createForCertificate(e,t,n),this.tbsRequest.requestList.push(new zn({reqCert:r}))}async sign(e,t="SHA-1",n=Ie(!0)){if(Ue.assertEmpty(e,"privateKey","OCSPRequest.sign method"),!this.optionalSignature)throw new Error('Need to create "optionalSignature" field before signing');const r=await n.getSignatureParameters(e,t),i=r.parameters;this.optionalSignature.signatureAlgorithm=r.signatureAlgorithm;const a=this.tbsRequest.toSchema(!0).toBER(!1),o=await n.signWithPrivateKey(a,e,i);this.optionalSignature.signature=new Pe({valueHex:o})}verify(){}}ef.CLASS_NAME="OCSPRequest";const Ll="responseType",Dl="response",RV=[Ll,Dl];class zs extends G{constructor(e={}){super(),this.responseType=d(e,Ll,zs.defaultValues(Ll)),this.response=d(e,Dl,zs.defaultValues(Dl)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ll:return g;case Dl:return new Q;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ll:return t===g;case Dl:return t.isEqual(zs.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new he({name:t.responseType||g}),new Q({name:t.response||g})]})}fromSchema(e){X(e,RV);const t=q(e,e,zs.schema({names:{responseType:Ll,response:Dl}}));W.assertSchema(t,this.className),this.responseType=t.result.responseType.valueBlock.toString(),this.response=t.result.response}toSchema(){return new N({value:[new he({value:this.responseType}),this.response]})}toJSON(){return{responseType:this.responseType,response:this.response.toJSON()}}}zs.CLASS_NAME="ResponseBytes";const Bo="responseStatus",_n="responseBytes";class ec extends G{constructor(e={}){super(),this.responseStatus=d(e,Bo,ec.defaultValues(Bo)),_n in e&&(this.responseBytes=d(e,_n,ec.defaultValues(_n))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Bo:return new Ei;case _n:return new zs;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Bo:return t.isEqual(ec.defaultValues(e));case _n:return zs.compareWithDefault("responseType",t.responseType)&&zs.compareWithDefault("response",t.response);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||"OCSPResponse",value:[new Ei({name:t.responseStatus||Bo}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[zs.schema(t.responseBytes||{names:{blockName:_n}})]})]})}fromSchema(e){X(e,[Bo,_n]);const t=q(e,e,ec.schema());W.assertSchema(t,this.className),this.responseStatus=t.result.responseStatus,_n in t.result&&(this.responseBytes=new zs({schema:t.result.responseBytes}))}toSchema(){const e=[];return e.push(this.responseStatus),this.responseBytes&&e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[this.responseBytes.toSchema()]})),new N({value:e})}toJSON(){const e={responseStatus:this.responseStatus.toJSON()};return this.responseBytes&&(e.responseBytes=this.responseBytes.toJSON()),e}async getCertificateStatus(e,t,n=Ie(!0)){let r;const i={isForCertificate:!1,status:2};if(!this.responseBytes||this.responseBytes.responseType!==Id)return i;try{const a=St(this.responseBytes.response.valueBlock.valueHexView);W.assert(a,"Basic OCSP response"),r=new Hs({schema:a.result})}catch{return i}return r.getCertificateStatus(e,t,n)}async sign(e,t,n=Ie(!0)){var r;if(this.responseBytes&&this.responseBytes.responseType===Id)return Hs.fromBER(this.responseBytes.response.valueBlock.valueHexView).sign(e,t,n);throw new Error(`Unknown ResponseBytes type: ${((r=this.responseBytes)===null||r===void 0?void 0:r.responseType)||"Unknown"}`)}async verify(e=null,t=Ie(!0)){var n;if(!(_n in this))throw new Error("Empty ResponseBytes field");if(this.responseBytes&&this.responseBytes.responseType===Id){const r=Hs.fromBER(this.responseBytes.response.valueBlock.valueHexView);return e!==null&&(r.certs||(r.certs=[]),r.certs.push(e)),r.verify({},t)}throw new Error(`Unknown ResponseBytes type: ${((n=this.responseBytes)===null||n===void 0?void 0:n.responseType)||"Unknown"}`)}}ec.CLASS_NAME="OCSPResponse";const Mi="type",Un="attributes",vd="encodedValue",OV=[Un];class ht extends G{constructor(e={}){super(),this.type=d(e,Mi,ht.defaultValues(Mi)),this.attributes=d(e,Un,ht.defaultValues(Un)),this.encodedValue=d(e,vd,ht.defaultValues(vd)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Mi:return-1;case Un:return[];case vd:return _t;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Mi:return t===ht.defaultValues(Mi);case Un:return t.length===0;case vd:return t.byteLength===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new V({name:t.blockName||g,optional:!0,idBlock:{tagClass:3,tagNumber:t.tagNumber||0},value:[new _e({name:t.attributes||g,value:nt.schema()})]})}fromSchema(e){X(e,OV);const t=q(e,e,ht.schema({names:{tagNumber:this.type,attributes:Un}}));W.assertSchema(t,this.className),this.type=t.result.idBlock.tagNumber,this.encodedValue=ve.toArrayBuffer(t.result.valueBeforeDecodeView);const n=new Uint8Array(this.encodedValue);if(n[0]=49,!(Un in t.result)){if(this.type===0)throw new Error("Wrong structure of SignedUnsignedAttributes");return}this.attributes=Array.from(t.result.attributes,r=>new nt({schema:r}))}toSchema(){if(ht.compareWithDefault(Mi,this.type)||ht.compareWithDefault(Un,this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return new V({optional:!0,idBlock:{tagClass:3,tagNumber:this.type},value:Array.from(this.attributes,e=>e.toSchema())})}toJSON(){if(ht.compareWithDefault(Mi,this.type)||ht.compareWithDefault(Un,this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return{type:this.type,attributes:Array.from(this.attributes,e=>e.toJSON())}}}ht.CLASS_NAME="SignedAndUnsignedAttributes";const Ul="version",Da="sid",Ml="digestAlgorithm",Qr="signedAttrs",Hl="signatureAlgorithm",Ph="signature",zr="unsignedAttrs",Ri="SignerInfo",Yp=`${Ri}.${Ul}`,Lh=`${Ri}.${Da}`,Xp=`${Ri}.${Ml}`,Fd=`${Ri}.${Qr}`,Qp=`${Ri}.${Hl}`,zp=`${Ri}.${Ph}`,Kd=`${Ri}.${zr}`,VV=[Yp,Lh,Xp,Fd,Qp,zp,Kd];class wt extends G{constructor(e={}){super(),this.version=d(e,Ul,wt.defaultValues(Ul)),this.sid=d(e,Da,wt.defaultValues(Da)),this.digestAlgorithm=d(e,Ml,wt.defaultValues(Ml)),Qr in e&&(this.signedAttrs=d(e,Qr,wt.defaultValues(Qr))),this.signatureAlgorithm=d(e,Hl,wt.defaultValues(Hl)),this.signature=d(e,Ph,wt.defaultValues(Ph)),zr in e&&(this.unsignedAttrs=d(e,zr,wt.defaultValues(zr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ul:return 0;case Da:return new Ee;case Ml:return new H;case Qr:return new ht({type:0});case Hl:return new H;case Ph:return new Q;case zr:return new ht({type:1});default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ul:return wt.defaultValues(Ul)===t;case Da:return t instanceof Ee;case Ml:return t instanceof H?t.isEqual(wt.defaultValues(Ml)):!1;case Qr:return ht.compareWithDefault("type",t.type)&&ht.compareWithDefault("attributes",t.attributes)&&ht.compareWithDefault("encodedValue",t.encodedValue);case Hl:return t instanceof H?t.isEqual(wt.defaultValues(Hl)):!1;case Ph:case zr:return ht.compareWithDefault("type",t.type)&&ht.compareWithDefault("attributes",t.attributes)&&ht.compareWithDefault("encodedValue",t.encodedValue);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:Ri,value:[new U({name:t.version||Yp}),new lt({value:[Bt.schema(t.sidSchema||{names:{blockName:Lh}}),new lt({value:[new V({optional:!0,name:t.sid||Lh,idBlock:{tagClass:3,tagNumber:0},value:[new Q]}),new ke({optional:!0,name:t.sid||Lh,idBlock:{tagClass:3,tagNumber:0}})]})]}),H.schema(t.digestAlgorithm||{names:{blockName:Xp}}),ht.schema(t.signedAttrs||{names:{blockName:Fd,tagNumber:0}}),H.schema(t.signatureAlgorithm||{names:{blockName:Qp}}),new Q({name:t.signature||zp}),ht.schema(t.unsignedAttrs||{names:{blockName:Kd,tagNumber:1}})]})}fromSchema(e){X(e,VV);const t=q(e,e,wt.schema());W.assertSchema(t,this.className),this.version=t.result[Yp].valueBlock.valueDec;const n=t.result[Lh];n.idBlock.tagClass===1?this.sid=new Bt({schema:n}):this.sid=n,this.digestAlgorithm=new H({schema:t.result[Xp]}),Fd in t.result&&(this.signedAttrs=new ht({type:0,schema:t.result[Fd]})),this.signatureAlgorithm=new H({schema:t.result[Qp]}),this.signature=t.result[zp],Kd in t.result&&(this.unsignedAttrs=new ht({type:1,schema:t.result[Kd]}))}toSchema(){if(wt.compareWithDefault(Da,this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e=[];return e.push(new U({value:this.version})),this.sid instanceof Bt?e.push(this.sid.toSchema()):e.push(this.sid),e.push(this.digestAlgorithm.toSchema()),this.signedAttrs&&wt.compareWithDefault(Qr,this.signedAttrs)===!1&&e.push(this.signedAttrs.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.unsignedAttrs&&wt.compareWithDefault(zr,this.unsignedAttrs)===!1&&e.push(this.unsignedAttrs.toSchema()),new N({value:e})}toJSON(){if(wt.compareWithDefault(Da,this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e={version:this.version,digestAlgorithm:this.digestAlgorithm.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.sid instanceof Ee||(e.sid=this.sid.toJSON()),this.signedAttrs&&wt.compareWithDefault(Qr,this.signedAttrs)===!1&&(e.signedAttrs=this.signedAttrs.toJSON()),this.unsignedAttrs&&wt.compareWithDefault(zr,this.unsignedAttrs)===!1&&(e.unsignedAttrs=this.unsignedAttrs.toJSON()),e}}wt.CLASS_NAME="SignerInfo";const Dh="version",Uh="policy",Mh="messageImprint",Hh="serialNumber",$h="genTime",Ua="ordering",Ma="nonce",$l="accuracy",Fl="tsa",Kl="extensions",ln="TSTInfo",Zp=`${ln}.${Dh}`,ew=`${ln}.${Uh}`,tw=`${ln}.${Mh}`,sw=`${ln}.${Hh}`,nw=`${ln}.${$h}`,jd=`${ln}.${$l}`,Jd=`${ln}.${Ua}`,Wd=`${ln}.${Ma}`,qd=`${ln}.${Fl}`,Gd=`${ln}.${Kl}`,PV=[Zp,ew,tw,sw,nw,jd,Jd,Wd,qd,Gd];class Jt extends G{constructor(e={}){super(),this.version=d(e,Dh,Jt.defaultValues(Dh)),this.policy=d(e,Uh,Jt.defaultValues(Uh)),this.messageImprint=d(e,Mh,Jt.defaultValues(Mh)),this.serialNumber=d(e,Hh,Jt.defaultValues(Hh)),this.genTime=d(e,$h,Jt.defaultValues($h)),$l in e&&(this.accuracy=d(e,$l,Jt.defaultValues($l))),Ua in e&&(this.ordering=d(e,Ua,Jt.defaultValues(Ua))),Ma in e&&(this.nonce=d(e,Ma,Jt.defaultValues(Ma))),Fl in e&&(this.tsa=d(e,Fl,Jt.defaultValues(Fl))),Kl in e&&(this.extensions=d(e,Kl,Jt.defaultValues(Kl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Dh:return 0;case Uh:return g;case Mh:return new Ft;case Hh:return new U;case $h:return new Date(0,0,0);case $l:return new Cs;case Ua:return!1;case Ma:return new U;case Fl:return new Le;case Kl:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Dh:case Uh:case $h:case Ua:return t===Jt.defaultValues(Ua);case Mh:return Ft.compareWithDefault(Ja,t.hashAlgorithm)&&Ft.compareWithDefault(Wa,t.hashedMessage);case Hh:case Ma:return t.isEqual(Jt.defaultValues(Ma));case $l:return Cs.compareWithDefault(wr,t.seconds)&&Cs.compareWithDefault(yr,t.millis)&&Cs.compareWithDefault(vr,t.micros);case Fl:return Le.compareWithDefault(zc,t.type)&&Le.compareWithDefault(Zc,t.value);case Kl:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||ln,value:[new U({name:t.version||Zp}),new he({name:t.policy||ew}),Ft.schema(t.messageImprint||{names:{blockName:tw}}),new U({name:t.serialNumber||sw}),new ot({name:t.genTime||nw}),Cs.schema(t.accuracy||{names:{blockName:jd}}),new Cn({name:t.ordering||Jd,optional:!0}),new U({name:t.nonce||Wd,optional:!0}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Le.schema(t.tsa||{names:{blockName:qd}})]}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new _e({name:t.extensions||Gd,value:Je.schema(t.extension||{})})]})]})}fromSchema(e){X(e,PV);const t=q(e,e,Jt.schema());W.assertSchema(t,this.className),this.version=t.result[Zp].valueBlock.valueDec,this.policy=t.result[ew].valueBlock.toString(),this.messageImprint=new Ft({schema:t.result[tw]}),this.serialNumber=t.result[sw],this.genTime=t.result[nw].toDate(),jd in t.result&&(this.accuracy=new Cs({schema:t.result[jd]})),Jd in t.result&&(this.ordering=t.result[Jd].valueBlock.value),Wd in t.result&&(this.nonce=t.result[Wd]),qd in t.result&&(this.tsa=new Le({schema:t.result[qd]})),Gd in t.result&&(this.extensions=Array.from(t.result[Gd],n=>new Je({schema:n})))}toSchema(){const e=[];return e.push(new U({value:this.version})),e.push(new he({value:this.policy})),e.push(this.messageImprint.toSchema()),e.push(this.serialNumber),e.push(new ot({valueDate:this.genTime})),this.accuracy&&e.push(this.accuracy.toSchema()),this.ordering!==void 0&&e.push(new Cn({value:this.ordering})),this.nonce&&e.push(this.nonce),this.tsa&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.tsa.toSchema()]})),this.extensions&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.extensions,t=>t.toSchema())})),new N({value:e})}toJSON(){const e={version:this.version,policy:this.policy,messageImprint:this.messageImprint.toJSON(),serialNumber:this.serialNumber.toJSON(),genTime:this.genTime};return this.accuracy&&(e.accuracy=this.accuracy.toJSON()),this.ordering!==void 0&&(e.ordering=this.ordering),this.nonce&&(e.nonce=this.nonce.toJSON()),this.tsa&&(e.tsa=this.tsa.toJSON()),this.extensions&&(e.extensions=Array.from(this.extensions,t=>t.toJSON())),e}async verify(e,t=Ie(!0)){if(!e.data)throw new Error('"data" is a mandatory attribute for TST_INFO verification');const n=e.data;if(e.notBefore&&this.genTime<e.notBefore)throw new Error("Generation time for TSTInfo object is less than notBefore value");if(e.notAfter&&this.genTime>e.notAfter)throw new Error("Generation time for TSTInfo object is more than notAfter value");const r=t.getAlgorithmByOID(this.messageImprint.hashAlgorithm.algorithmId,!0,"MessageImprint.hashAlgorithm"),i=await t.digest(r.name,new Uint8Array(n));return ve.isEqual(i,this.messageImprint.hashedMessage.valueBlock.valueHexView)}}Jt.CLASS_NAME="TSTInfo";const jl="version",Fh="digestAlgorithms",Kh="encapContentInfo",Jl="certificates",Wl="crls",jh="signerInfos",Gc="ocsps",wo="SignedData",rw=`${wo}.${jl}`,Yd=`${wo}.${Fh}`,iw=`${wo}.${Kh}`,Xd=`${wo}.${Jl}`,Qd=`${wo}.${Wl}`,zd=`${wo}.${jh}`,LV=[rw,Yd,iw,Xd,Qd,zd];class jt extends Error{constructor({message:e,code:t=0,date:n=new Date,signatureVerified:r=null,signerCertificate:i=null,signerCertificateVerified:a=null,timestampSerial:o=null,certificatePath:l=[]}){super(e),this.name="SignedDataVerifyError",this.date=n,this.code=t,this.timestampSerial=o,this.signatureVerified=r,this.signerCertificate=i,this.signerCertificateVerified=a,this.certificatePath=l}}class $t extends G{constructor(e={}){super(),this.version=d(e,jl,$t.defaultValues(jl)),this.digestAlgorithms=d(e,Fh,$t.defaultValues(Fh)),this.encapContentInfo=d(e,Kh,$t.defaultValues(Kh)),Jl in e&&(this.certificates=d(e,Jl,$t.defaultValues(Jl))),Wl in e&&(this.crls=d(e,Wl,$t.defaultValues(Wl))),Gc in e&&(this.ocsps=d(e,Gc,$t.defaultValues(Gc))),this.signerInfos=d(e,jh,$t.defaultValues(jh)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case jl:return 0;case Fh:return[];case Kh:return new ms;case Jl:return[];case Wl:return[];case Gc:return[];case jh:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case jl:return t===$t.defaultValues(jl);case Kh:return ms.compareWithDefault("eContentType",t.eContentType)&&ms.compareWithDefault("eContent",t.eContent);case Fh:case Jl:case Wl:case Gc:case jh:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return t.optional===void 0&&(t.optional=!1),new N({name:t.blockName||wo,optional:t.optional,value:[new U({name:t.version||rw}),new vt({value:[new _e({name:t.digestAlgorithms||Yd,value:H.schema()})]}),ms.schema(t.encapContentInfo||{names:{blockName:iw}}),new V({name:t.certificates||Xd,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:An.schema().valueBlock.value}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:sr.schema(t.crls||{names:{crls:Qd}}).valueBlock.value}),new vt({value:[new _e({name:t.signerInfos||zd,value:wt.schema()})]})]})}fromSchema(e){X(e,LV);const t=q(e,e,$t.schema());if(W.assertSchema(t,this.className),this.version=t.result[rw].valueBlock.valueDec,Yd in t.result&&(this.digestAlgorithms=Array.from(t.result[Yd],n=>new H({schema:n}))),this.encapContentInfo=new ms({schema:t.result[iw]}),Xd in t.result){const n=new An({schema:new vt({value:t.result[Xd].valueBlock.value})});this.certificates=n.certificates.slice(0)}Qd in t.result&&(this.crls=Array.from(t.result[Qd],n=>n.idBlock.tagClass===1?new kt({schema:n}):(n.idBlock.tagClass=1,n.idBlock.tagNumber=16,new tr({schema:n})))),zd in t.result&&(this.signerInfos=Array.from(t.result[zd],n=>new wt({schema:n})))}toSchema(e=!1){const t=[];if(this.certificates&&this.certificates.length&&this.certificates.some(n=>n instanceof Si)||this.crls&&this.crls.length&&this.crls.some(n=>n instanceof tr)?this.version=5:this.certificates&&this.certificates.length&&this.certificates.some(n=>n instanceof xs)?this.version=4:this.certificates&&this.certificates.length&&this.certificates.some(n=>n instanceof qn)||this.signerInfos.some(n=>n.version===3)||this.encapContentInfo.eContentType!==$t.ID_DATA?this.version=3:this.version=1,t.push(new U({value:this.version})),t.push(new vt({value:Array.from(this.digestAlgorithms,n=>n.toSchema())})),t.push(this.encapContentInfo.toSchema()),this.certificates){const r=new An({certificates:this.certificates}).toSchema();t.push(new V({idBlock:{tagClass:3,tagNumber:0},value:r.valueBlock.value}))}return this.crls&&t.push(new V({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.crls,n=>{if(n instanceof tr){const r=n.toSchema();return r.idBlock.tagClass=3,r.idBlock.tagNumber=1,r}return n.toSchema(e)})})),t.push(new vt({value:Array.from(this.signerInfos,n=>n.toSchema())})),new N({value:t})}toJSON(){const e={version:this.version,digestAlgorithms:Array.from(this.digestAlgorithms,t=>t.toJSON()),encapContentInfo:this.encapContentInfo.toJSON(),signerInfos:Array.from(this.signerInfos,t=>t.toJSON())};return this.certificates&&(e.certificates=Array.from(this.certificates,t=>t.toJSON())),this.crls&&(e.crls=Array.from(this.crls,t=>t.toJSON())),e}async verify({signer:e=-1,data:t=_t,trustedCerts:n=[],checkDate:r=new Date,checkChain:i=!1,passedWhenNotRevValues:a=!1,extendedMode:o=!1,findOrigin:l=null,findIssuer:c=null}={},u=Ie(!0)){let h=null,f=null;try{let m=_t,S=g,A=[];const E=this.signerInfos[e];if(!E)throw new jt({date:r,code:1,message:"Unable to get signer by supplied index"});if(!this.certificates)throw new jt({date:r,code:2,message:"No certificates attached to this signed data"});if(E.sid instanceof Bt){for(const p of this.certificates)if(p instanceof He&&p.issuer.isEqual(E.sid.issuer)&&p.serialNumber.isEqual(E.sid.serialNumber)){h=p;break}}else{const p=E.sid,k=p.idBlock.isConstructed?p.valueBlock.value[0].valueBlock.valueHex:p.valueBlock.valueHex;for(const C of this.certificates){if(!(C instanceof He))continue;const L=await u.digest({name:"sha-1"},C.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView);if(Cc(L,k)){h=C;break}}}if(!h)throw new jt({date:r,code:3,message:"Unable to find signer certificate"});if(this.encapContentInfo.eContentType===HR){if(!this.encapContentInfo.eContent)throw new jt({date:r,code:15,message:"Error during verification: TSTInfo eContent is empty",signatureVerified:null,signerCertificate:h,timestampSerial:f,signerCertificateVerified:!0});let p;try{p=Jt.fromBER(this.encapContentInfo.eContent.valueBlock.valueHexView)}catch{throw new jt({date:r,code:15,message:"Error during verification: TSTInfo wrong ASN.1 schema ",signatureVerified:null,signerCertificate:h,timestampSerial:f,signerCertificateVerified:!0})}if(r=p.genTime,f=p.serialNumber.valueBlock.valueHexView.slice(),t.byteLength===0)throw new jt({date:r,code:4,message:"Missed detached data input array"});if(!await p.verify({data:t},u))throw new jt({date:r,code:15,message:"Error during verification: TSTInfo verification is failed",signatureVerified:!1,signerCertificate:h,timestampSerial:f,signerCertificateVerified:!0})}if(i){const p=this.certificates.filter(M=>M instanceof He&&!!Wk(M,h)),k={checkDate:r,certs:p,trustedCerts:n};c&&(k.findIssuer=c),l&&(k.findOrigin=l);const C=new cg(k);if(C.certs.push(h),this.crls)for(const M of this.crls)"thisUpdate"in M?C.crls.push(M):M.otherRevInfoFormat===Id&&C.ocsps.push(new Hs({schema:M.otherRevInfo}));this.ocsps&&C.ocsps.push(...this.ocsps);const L=await C.verify({passedWhenNotRevValues:a},u).catch(M=>{throw new jt({date:r,code:5,message:`Validation of signer's certificate failed with error: ${M instanceof Object?M.resultMessage:M}`,signerCertificate:h,signerCertificateVerified:!1})});if(L.certificatePath&&(A=L.certificatePath),!L.result)throw new jt({date:r,code:5,message:`Validation of signer's certificate failed: ${L.resultMessage}`,signerCertificate:h,signerCertificateVerified:!1})}const T=u.getAlgorithmByOID(E.digestAlgorithm.algorithmId);if(!("name"in T))throw new jt({date:r,code:7,message:`Unsupported signature algorithm: ${E.digestAlgorithm.algorithmId}`,signerCertificate:h,signerCertificateVerified:!0});S=T.name;const x=this.encapContentInfo.eContent;if(x)x.idBlock.tagClass===1&&x.idBlock.tagNumber===4?t=x.getValue():t=x.valueBlock.valueBeforeDecodeView;else if(t.byteLength===0)throw new jt({date:r,code:8,message:"Missed detached data input array",signerCertificate:h,signerCertificateVerified:!0});if(E.signedAttrs){let p=!1,k=!1;for(const C of E.signedAttrs.attributes)if(C.type==="1.2.840.113549.1.9.3"&&(p=!0),C.type==="1.2.840.113549.1.9.4"&&(k=!0,m=C.values[0].valueBlock.valueHex),p&&k)break;if(p===!1)throw new jt({date:r,code:9,message:'Attribute "content-type" is a mandatory attribute for "signed attributes"',signerCertificate:h,signerCertificateVerified:!0});if(k===!1)throw new jt({date:r,code:10,message:'Attribute "message-digest" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:h,signerCertificateVerified:!0})}if(E.signedAttrs){const p=await u.digest(S,new Uint8Array(t));if(!Cc(p,m))throw new jt({date:r,code:15,message:"Error during verification: Message digest doesn't match",signatureVerified:null,signerCertificate:h,timestampSerial:f,signerCertificateVerified:!0});t=E.signedAttrs.encodedValue}const y=await u.verifyWithPublicKey(t,E.signature,h.subjectPublicKeyInfo,h.signatureAlgorithm,S);return o?{date:r,code:14,message:g,signatureVerified:y,signerCertificate:h,timestampSerial:f,signerCertificateVerified:!0,certificatePath:A}:y}catch(m){throw m instanceof jt?m:new jt({date:r,code:15,message:`Error during verification: ${m instanceof Error?m.message:m}`,signatureVerified:null,signerCertificate:h,timestampSerial:f,signerCertificateVerified:!0})}}async sign(e,t,n="SHA-1",r=_t,i=Ie(!0)){if(!e)throw new Error("Need to provide a private key for signing");const a=i.getOIDByAlgorithm({name:n},!0,"hashAlgorithm");this.digestAlgorithms.filter(h=>h.algorithmId===a).length===0&&this.digestAlgorithms.push(new H({algorithmId:a,algorithmParams:new pt}));const o=this.signerInfos[t];if(!o)throw new RangeError("SignerInfo index is out of range");o.digestAlgorithm=new H({algorithmId:a,algorithmParams:new pt});const l=await i.getSignatureParameters(e,n),c=l.parameters;if(o.signatureAlgorithm=l.signatureAlgorithm,o.signedAttrs)if(o.signedAttrs.encodedValue.byteLength!==0)r=o.signedAttrs.encodedValue;else{r=o.signedAttrs.toSchema().toBER();const h=ve.toUint8Array(r);h[0]=49}else{const h=this.encapContentInfo.eContent;if(h)h.idBlock.tagClass===1&&h.idBlock.tagNumber===4?r=h.getValue():r=h.valueBlock.valueBeforeDecodeView;else if(r.byteLength===0)throw new Error("Missed detached data input array")}const u=await i.signWithPrivateKey(r,e,c);o.signature=new Q({valueHex:u})}}$t.CLASS_NAME="SignedData";$t.ID_DATA=uy;const Ha="version",$a="authSafe",Mn="macData",Yc="parsedValue",DV=[Ha,$a,Mn];class ai extends G{constructor(e={}){super(),this.version=d(e,Ha,ai.defaultValues(Ha)),this.authSafe=d(e,$a,ai.defaultValues($a)),Mn in e&&(this.macData=d(e,Mn,ai.defaultValues(Mn))),Yc in e&&(this.parsedValue=d(e,Yc,ai.defaultValues(Yc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ha:return 3;case $a:return new st;case Mn:return new ns;case Yc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ha:return t===ai.defaultValues(e);case $a:return st.compareWithDefault("contentType",t.contentType)&&st.compareWithDefault("content",t.content);case Mn:return ns.compareWithDefault("mac",t.mac)&&ns.compareWithDefault("macSalt",t.macSalt)&&ns.compareWithDefault("iterations",t.iterations);case Yc:return t instanceof Object&&Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new U({name:t.version||Ha}),st.schema(t.authSafe||{names:{blockName:$a}}),ns.schema(t.macData||{names:{blockName:Mn,optional:!0}})]})}fromSchema(e){X(e,DV);const t=q(e,e,ai.schema({names:{version:Ha,authSafe:{names:{blockName:$a}},macData:{names:{blockName:Mn}}}}));W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.authSafe=new st({schema:t.result.authSafe}),Mn in t.result&&(this.macData=new ns({schema:t.result.macData}))}toSchema(){const e=[new U({value:this.version}),this.authSafe.toSchema()];return this.macData&&e.push(this.macData.toSchema()),new N({value:e})}toJSON(){const e={version:this.version,authSafe:this.authSafe.toJSON()};return this.macData&&(e.macData=this.macData.toJSON()),e}async makeInternalValues(e={},t=Ie(!0)){if(Ye.assert(e,"parameters","object"),!this.parsedValue)throw new Error('Please call "parseValues" function first in order to make "parsedValue" data');switch(Ue.assertEmpty(this.parsedValue.integrityMode,"integrityMode","parsedValue"),Ue.assertEmpty(this.parsedValue.authenticatedSafe,"authenticatedSafe","parsedValue"),this.parsedValue.integrityMode){case 0:{if(!("iterations"in e))throw new Ue("iterations");Ue.assertEmpty(e.pbkdf2HashAlgorithm,"pbkdf2HashAlgorithm"),Ue.assertEmpty(e.hmacHashAlgorithm,"hmacHashAlgorithm"),Ue.assertEmpty(e.password,"password");const n=new ArrayBuffer(64),r=new Uint8Array(n);t.getRandomValues(r);const i=this.parsedValue.authenticatedSafe.toSchema().toBER(!1);this.authSafe=new st({contentType:st.DATA,content:new Q({valueHex:i})});const a=await t.stampDataWithPassword({password:e.password,hashAlgorithm:e.hmacHashAlgorithm,salt:n,iterationCount:e.iterations,contentToStamp:i});this.macData=new ns({mac:new Fs({digestAlgorithm:new H({algorithmId:t.getOIDByAlgorithm({name:e.hmacHashAlgorithm},!0,"hmacHashAlgorithm")}),digest:new Q({valueHex:a})}),macSalt:new Q({valueHex:n}),iterations:e.iterations})}break;case 1:{if(!("signingCertificate"in e))throw new Ue("signingCertificate");Ue.assertEmpty(e.privateKey,"privateKey"),Ue.assertEmpty(e.hashAlgorithm,"hashAlgorithm");const n=this.parsedValue.authenticatedSafe.toSchema().toBER(!1),r=new $t({version:1,encapContentInfo:new ms({eContentType:"1.2.840.113549.1.7.1",eContent:new Q({valueHex:n})}),certificates:[e.signingCertificate]}),i=await t.digest({name:e.hashAlgorithm},new Uint8Array(n)),a=[];a.push(new nt({type:"1.2.840.113549.1.9.3",values:[new he({value:"1.2.840.113549.1.7.1"})]})),a.push(new nt({type:"1.2.840.113549.1.9.5",values:[new Ic({valueDate:new Date})]})),a.push(new nt({type:"1.2.840.113549.1.9.4",values:[new Q({valueHex:i})]})),r.signerInfos.push(new wt({version:1,sid:new Bt({issuer:e.signingCertificate.issuer,serialNumber:e.signingCertificate.serialNumber}),signedAttrs:new ht({type:0,attributes:a})})),await r.sign(e.privateKey,0,e.hashAlgorithm,void 0,t),this.authSafe=new st({contentType:"1.2.840.113549.1.7.2",content:r.toSchema(!0)})}break;default:throw new Error(`Parameter "integrityMode" has unknown value: ${this.parsedValue.integrityMode}`)}}async parseInternalValues(e,t=Ie(!0)){switch(Ye.assert(e,"parameters","object"),e.checkIntegrity===void 0&&(e.checkIntegrity=!0),this.parsedValue={},this.authSafe.contentType){case st.DATA:{Ue.assertEmpty(e.password,"password"),this.parsedValue.integrityMode=0,Ye.assert(this.authSafe.content,"authSafe.content",Q);const n=this.authSafe.content.getValue();if(this.parsedValue.authenticatedSafe=oo.fromBER(n),e.checkIntegrity){if(!this.macData)throw new Error('Absent "macData" value, can not check PKCS#12 data integrity');const r=t.getAlgorithmByOID(this.macData.mac.digestAlgorithm.algorithmId,!0,"digestAlgorithm");if(!await t.verifyDataStampedWithPassword({password:e.password,hashAlgorithm:r.name,salt:ve.toArrayBuffer(this.macData.macSalt.valueBlock.valueHexView),iterationCount:this.macData.iterations||1,contentToVerify:n,signatureToVerify:ve.toArrayBuffer(this.macData.mac.digest.valueBlock.valueHexView)}))throw new Error("Integrity for the PKCS#12 data is broken!")}}break;case st.SIGNED_DATA:{this.parsedValue.integrityMode=1;const n=new $t({schema:this.authSafe.content}),r=n.encapContentInfo.eContent;Ue.assert(r,"eContent","cmsSigned.encapContentInfo"),Ye.assert(r,"eContent",Q);const i=r.getValue();if(this.parsedValue.authenticatedSafe=oo.fromBER(i),!await n.verify({signer:0,checkChain:!1},t))throw new Error("Integrity for the PKCS#12 data is broken!")}break;default:throw new Error(`Incorrect value for "this.authSafe.contentType": ${this.authSafe.contentType}`)}}}ai.CLASS_NAME="PFX";const ql="status",Zr="statusStrings",ei="failInfo",UV=[ql,Zr,ei];var $b;(function(s){s[s.granted=0]="granted",s[s.grantedWithMods=1]="grantedWithMods",s[s.rejection=2]="rejection",s[s.waiting=3]="waiting",s[s.revocationWarning=4]="revocationWarning",s[s.revocationNotification=5]="revocationNotification"})($b||($b={}));class $s extends G{constructor(e={}){super(),this.status=d(e,ql,$s.defaultValues(ql)),Zr in e&&(this.statusStrings=d(e,Zr,$s.defaultValues(Zr))),ei in e&&(this.failInfo=d(e,ei,$s.defaultValues(ei))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ql:return 2;case Zr:return[];case ei:return new Pe;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ql:return t===$s.defaultValues(e);case Zr:return t.length===0;case ei:return t.isEqual($s.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||g,value:[new U({name:t.status||g}),new N({optional:!0,value:[new _e({name:t.statusStrings||g,value:new mt})]}),new Pe({name:t.failInfo||g,optional:!0})]})}fromSchema(e){X(e,UV);const t=q(e,e,$s.schema({names:{status:ql,statusStrings:Zr,failInfo:ei}}));W.assertSchema(t,this.className);const n=t.result.status;if(n.valueBlock.isHexOnly===!0||n.valueBlock.valueDec<0||n.valueBlock.valueDec>5)throw new Error('PKIStatusInfo "status" has invalid value');this.status=n.valueBlock.valueDec,Zr in t.result&&(this.statusStrings=t.result.statusStrings),ei in t.result&&(this.failInfo=t.result.failInfo)}toSchema(){const e=[];return e.push(new U({value:this.status})),this.statusStrings&&e.push(new N({optional:!0,value:this.statusStrings})),this.failInfo&&e.push(this.failInfo),new N({value:e})}toJSON(){const e={status:this.status};return this.statusStrings&&(e.statusStrings=Array.from(this.statusStrings,t=>t.toJSON())),this.failInfo&&(e.failInfo=this.failInfo.toJSON()),e}}$s.CLASS_NAME="PKIStatusInfo";const Jh="version",Wh="messageImprint",Gl="reqPolicy",Yl="nonce",Hn="certReq",Xl="extensions",yo="TimeStampReq",aw=`${yo}.${Jh}`,ow=`${yo}.${Wh}`,Zd=`${yo}.${Gl}`,em=`${yo}.${Yl}`,tm=`${yo}.${Hn}`,sm=`${yo}.${Xl}`,MV=[aw,ow,Zd,em,tm,sm];class vs extends G{constructor(e={}){super(),this.version=d(e,Jh,vs.defaultValues(Jh)),this.messageImprint=d(e,Wh,vs.defaultValues(Wh)),Gl in e&&(this.reqPolicy=d(e,Gl,vs.defaultValues(Gl))),Yl in e&&(this.nonce=d(e,Yl,vs.defaultValues(Yl))),Hn in e&&(this.certReq=d(e,Hn,vs.defaultValues(Hn))),Xl in e&&(this.extensions=d(e,Xl,vs.defaultValues(Xl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Jh:return 0;case Wh:return new Ft;case Gl:return g;case Yl:return new U;case Hn:return!1;case Xl:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Jh:case Gl:case Hn:return t===vs.defaultValues(e);case Wh:return Ft.compareWithDefault("hashAlgorithm",t.hashAlgorithm)&&Ft.compareWithDefault("hashedMessage",t.hashedMessage);case Yl:return t.isEqual(vs.defaultValues(e));case Xl:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||yo,value:[new U({name:t.version||aw}),Ft.schema(t.messageImprint||{names:{blockName:ow}}),new he({name:t.reqPolicy||Zd,optional:!0}),new U({name:t.nonce||em,optional:!0}),new Cn({name:t.certReq||tm,optional:!0}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new _e({name:t.extensions||sm,value:Je.schema()})]})]})}fromSchema(e){X(e,MV);const t=q(e,e,vs.schema());W.assertSchema(t,this.className),this.version=t.result[aw].valueBlock.valueDec,this.messageImprint=new Ft({schema:t.result[ow]}),Zd in t.result&&(this.reqPolicy=t.result[Zd].valueBlock.toString()),em in t.result&&(this.nonce=t.result[em]),tm in t.result&&(this.certReq=t.result[tm].valueBlock.value),sm in t.result&&(this.extensions=Array.from(t.result[sm],n=>new Je({schema:n})))}toSchema(){const e=[];return e.push(new U({value:this.version})),e.push(this.messageImprint.toSchema()),this.reqPolicy&&e.push(new he({value:this.reqPolicy})),this.nonce&&e.push(this.nonce),Hn in this&&vs.compareWithDefault(Hn,this.certReq)===!1&&e.push(new Cn({value:this.certReq})),this.extensions&&e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.extensions,t=>t.toSchema())})),new N({value:e})}toJSON(){const e={version:this.version,messageImprint:this.messageImprint.toJSON()};return this.reqPolicy!==void 0&&(e.reqPolicy=this.reqPolicy),this.nonce!==void 0&&(e.nonce=this.nonce.toJSON()),this.certReq!==void 0&&vs.compareWithDefault(Hn,this.certReq)===!1&&(e.certReq=this.certReq),this.extensions&&(e.extensions=Array.from(this.extensions,t=>t.toJSON())),e}}vs.CLASS_NAME="TimeStampReq";const Ql="status",zl="timeStampToken",Sy="TimeStampResp",lw=`${Sy}.${Ql}`,nm=`${Sy}.${zl}`,HV=[lw,nm];class tf extends G{constructor(e={}){super(),this.status=d(e,Ql,tf.defaultValues(Ql)),zl in e&&(this.timeStampToken=d(e,zl,tf.defaultValues(zl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ql:return new $s;case zl:return new st;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ql:return $s.compareWithDefault(Ql,t.status)&&!("statusStrings"in t)&&!("failInfo"in t);case zl:return t.contentType===g&&t.content instanceof Ee;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new N({name:t.blockName||Sy,value:[$s.schema(t.status||{names:{blockName:lw}}),st.schema(t.timeStampToken||{names:{blockName:nm,optional:!0}})]})}fromSchema(e){X(e,HV);const t=q(e,e,tf.schema());W.assertSchema(t,this.className),this.status=new $s({schema:t.result[lw]}),nm in t.result&&(this.timeStampToken=new st({schema:t.result[nm]}))}toSchema(){const e=[];return e.push(this.status.toSchema()),this.timeStampToken&&e.push(this.timeStampToken.toSchema()),new N({value:e})}toJSON(){const e={status:this.status.toJSON()};return this.timeStampToken&&(e.timeStampToken=this.timeStampToken.toJSON()),e}async sign(e,t,n=Ie(!0)){return this.assertContentType(),new $t({schema:this.timeStampToken.content}).sign(e,0,t,void 0,n)}async verify(e={signer:0,trustedCerts:[],data:_t},t=Ie(!0)){return this.assertContentType(),new $t({schema:this.timeStampToken.content}).verify(e,t)}assertContentType(){if(!this.timeStampToken)throw new Error("timeStampToken is absent in TSP response");if(this.timeStampToken.contentType!==Uk)throw new Error(`Wrong format of timeStampToken: ${this.timeStampToken.contentType}`)}}tf.CLASS_NAME="TimeStampResp";function $V(){if(typeof self<"u"){if("crypto"in self){let s="webcrypto";"webkitSubtle"in self.crypto&&(s="safari"),Cb(s,new _m({name:s,crypto}))}}else if(typeof crypto<"u"&&"webcrypto"in crypto){const s="NodeJS ^15",e=crypto.webcrypto;Cb(s,new _m({name:s,crypto:e}))}}$V();const FV=Ke(`# issuer distinguished name. It must be same with the DN in the issuer's certificate 
[ca_dn]
CN = common name, C = country name, L = locality name, ST = state or  province name,
STREET = street address, O = organization name, OU = organization unit name,
description = some description, uniqueIdentifier = some uid, dnQualifier = some dnq,
DC = www, DC = xyz, DC = com, UID = user ID

[ca_default]
valid_days=3650,valid_crl_days=365,
output_format=PEM
#output_format=DER

# Usually this option is not used. CA can show or hidden this option to change the subject DN and SAN in the certificate.
[change_dn_san:hidden]
CN = common name, C = country name, L = locality name, ST = state or  province name,
STREET = street address, O = organization name, OU = organization unit name,
description = some description, uniqueIdentifier = some uid, dnQualifier = some dnq,
DC = www, DC = xyz, DC = com, UID = user ID

subjectAltName = email:my@example.com, 
subjectAltName = URI:http://my.example.com/
subjectAltName = DNS:test1.example.com,DNS:test2.example.com
subjectAltName = IP:192.168.7.1,IP:13::17

# by default all certificate will have authorityKeyIdentifier and subjectKeyIdentifier extensions
# extension has critical value means software-consuming certificates must understand its meaning
[ext]
basicConstraints = critical,CA:true,pathlen:3
keyUsage=critical,keyCertSign,cRLSign,digitalSignature,keyEncipherment
extendedKeyUsage = clientAuth,serverAuth,codeSigning

# only sub certificate will have this extension
[authorityInfoAccess]
caIssuers;URI.0=http://abc.def.gh
#caIssuers;URI.1=http://abc1.def2.gh3

[crlDistributionPoints]
URI.0 = http://abc.def.gh`);function xo(s){return String.fromCharCode.apply(null,new Uint8Array(s))}function Xc(s){const e=new ArrayBuffer(s.length),t=new Uint8Array(e);for(let n=0,r=s.length;n<r;n++)t[n]=s.charCodeAt(n);return e}function To(s,e){const t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=[];return s.forEach(r=>{const i=r%16,a=(r-i)/16;n.push(t[a],t[i],e)}),n.join("")}function pr(s){const e=document.createElement("a"),t=URL.createObjectURL(s);e.href=t,e.download=s.name,e.click(),URL.revokeObjectURL(t)}function KV(s,e,t){const n=new U({valueHex:new Uint8Array(s.match(/.{2}/g).map(a=>parseInt(a,16)))}),r=new dt({value:new Date(e)}),i=[];for(let a=1;a<t.length;a++){const o=parseInt(t[a]);Number.isInteger(o)&&i.push(new Je({extnID:"2.5.29.21",extnValue:new Ei({value:o}).toBER(!1)}))}return console.log("makeRC:",s,e,t,n,r,i),new hi({userCertificate:n,revocationDate:r,crlEntryExtensions:new ct({extensions:i})})}function jV(s,e){const t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=[];return s.forEach(r=>{const i=r%16,a=(r-i)/16;n.push(t[a],t[i],e)}),n.join("")}function cw(s){const e=s.indexOf(`
subjectAltName`),n=(e>0?s.substring(0,e):s).split(/,(?=[^,=]+=)/g);console.log("parseDN",s,n);const r=[];return n.forEach(i=>{const a=i.trim().replace(/\s*=\s*/,"=");if(a.startsWith("CN=")){r.push(new xt({type:"2.5.4.3",value:new mt({value:a.substring(3)})}));return}if(a.startsWith("C=")){r.push(new xt({type:"2.5.4.6",value:new mt({value:a.substring(2)})}));return}if(a.startsWith("L=")){r.push(new xt({type:"2.5.4.7",value:new mt({value:a.substring(2)})}));return}if(a.startsWith("ST=")){r.push(new xt({type:"2.5.4.8",value:new mt({value:a.substring(3)})}));return}if(a.startsWith("STREET=")){r.push(new xt({type:"2.5.4.9",value:new mt({value:a.substring(7)})}));return}if(a.startsWith("O=")){r.push(new xt({type:"2.5.4.10",value:new mt({value:a.substring(2)})}));return}if(a.startsWith("OU=")){r.push(new xt({type:"2.5.4.11",value:new mt({value:a.substring(3)})}));return}if(a.startsWith("description=")){r.push(new xt({type:"2.5.4.13",value:new mt({value:a.substring(12)})}));return}if(a.startsWith("uniqueIdentifier=")){r.push(new xt({type:"2.5.4.45",value:new mt({value:a.substring(16)})}));return}if(a.startsWith("dnQualifier=")){r.push(new xt({type:"2.5.4.46",value:new mt({value:a.substring(12)})}));return}if(a.startsWith("DC=")){r.push(new xt({type:"0.9.2342.19200300.100.1.25",value:new mt({value:a.substring(3)})}));return}if(a.startsWith("UID=")){r.push(new xt({type:"0.9.2342.19200300.100.1.1",value:new mt({value:a.substring(4)})}));return}}),r}function Gk(s){let e="";return s.forEach(t=>{switch(t.type){case"2.5.4.3":e+=",CN="+t.value.valueBlock.value;break;case"2.5.4.6":e+=",C="+t.value.valueBlock.value;break;case"2.5.4.7":e+=",L="+t.value.valueBlock.value;break;case"2.5.4.8":e+=",ST="+t.value.valueBlock.value;break;case"2.5.4.9":e+=",STREET="+t.value.valueBlock.value;break;case"2.5.4.10":e+=",O="+t.value.valueBlock.value;break;case"2.5.4.11":e+=",OU="+t.value.valueBlock.value;break;case"2.5.4.13":e+=",description="+t.value.valueBlock.value;break;case"2.5.4.45":e+="uniqueIdentifier="+t.value.valueBlock.value;break;case"2.5.4.46":e+=",dnQualifier="+t.value.valueBlock.value;break;case"0.9.2342.19200300.100.1.25":e+=",DC="+t.value.valueBlock.value;break;default:e+=","+t.type+"="+t.value.valueBlock.value;break}}),e.substring(1)}function JV(s,e){if(console.log("parseIP",s),s.includes(":")){const t=s.split(":").map(i=>parseInt(i,16)),n=t.findIndex(i=>isNaN(i)),r=t.findLastIndex(i=>isNaN(i));if(console.log("ipv6",t,n,r),n>=0)if(n===r&&t.length<8){const i=[0,0,0,0,0,0,0,0];t.splice(n,1,...i.slice(0,9-t.length)),console.log("strs.splice",t,n,...i.slice(0,8-t.length))}else return;if(t.length===8){const i=[];for(let a=0;a<8;a++){const o=t[a]%256;i.push((t[a]-o)/256),i.push(o)}console.log("arr",i),e.push(new Le({type:7,value:new Q({valueHex:new Uint8Array(i).buffer})}))}}else{const t=s.match(/\d+/g).map(n=>parseInt(n));t.length===4&&t[0]<256&&t[1]<256&&t[2]<256&&t[3]<256&&(e.push(new Le({type:7,value:new Q({valueHex:new Uint8Array(t).buffer})})),console.log("ipv4",t))}}function Yk(s){const e=[];s=s.match(new RegExp("(?<=^subjectAltName\\s*=\\s*)(.*)","gm")),s=s?s.join(",")+",":"";const t=s.match(new RegExp("(?<=email:)[^,]*","g")),n=s.match(new RegExp("(?<=URI:)[^,]*","g")),r=s.match(new RegExp("(?<=IP:)[^,]*","g")),i=s.match(new RegExp("(?<=DNS:)[^,]*","g"));return t&&t.forEach(a=>{e.push(new Le({type:1,value:a}))}),n&&n.forEach(a=>{e.push(new Le({type:6,value:a}))}),r&&r.forEach(a=>JV(a,e)),i&&i.forEach(a=>{e.push(new Le({type:2,value:a}))}),console.log("parseSAN",s,t,n,i),console.log("ips",r),e}function Xk(s){let e="";for(let t=0;t<s.length;t++){const n=s[t];switch(n.type){case 1:e+=`
   RFC822 Name=`+n.value;break;case 2:e+=`
   DNS Name=`+n.value;break;case 6:e+=`
   URL=`+n.value;break;case 7:const r=n.value.valueBlock.valueHexView;r.length===4&&(e+=`
   IP Address=`+r.join(".")),r.length===16&&(e+=`
   IP Address=`+jV(r,"").match(/.{4}/g).join(":"))}}return e}function WV(s){const e=new Date,t=[];let n=e.getTime(),r=0;for(console.log("parseSER",e,n,n.toString(16),t,s);n>0;)r=n%256,t.push(r),n=(n-r)/256;return t.reverse(),t.push(s[1],s[0]),console.log("Uint8Array:",t),new Uint8Array(t)}function qV(s,e,t){const n=/^\[change_dn_san\s*:\s*show/;if(e.sw=n.test(s),!e.sw)return;const r=new bt({names:Yk(s)}),i=s.indexOf(`
`);t.contav=cw(s.substring(i)),e.condn=Gk(t.contav),r.names.length>0?(t.consan=new Je({extnID:"2.5.29.17",critical:!1,extnValue:r.toSchema().toBER(!1)}),e.consan=Xk(r.names)):(t.consan=null,e.consan=null),console.log("po",e)}const GV={id:"a123",class:"min-h-screen px-4 bg-gradient-to-r from-green-400 to-blue-500"},YV={class:"container mx-auto min-h-screen px-4 py-4 sm:px-0 flex flex-col-reverse md:flex-col"},XV={class:"flex space-x-1 md:space-x-4 rounded-xl bg-blue-900/20 p-1 mt-2 md:mt-0 md:mb-2"},QV=["onClick"],zV=le("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 24 24"},[le("path",{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 9h8m-8 4h6m0 5h-1l-5 3v-3H6a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v4.5M19 22v.01M19 19a2.003 2.003 0 0 0 .914-3.782a1.98 1.98 0 0 0-2.414.483"})],-1),ZV=[zV],e2={key:0,class:"rounded-2xl p-2 bg-black bg-opacity-25 flex flex-col gap-1"},t2={class:"flex gap-4 flex-wrap justify-center"},s2={class:"flex flex-wrap justify-center"},n2={class:"pt-2"},r2=["placeholder"],i2={class:"flex flex-wrap justify-center"},a2={class:"pt-2"},o2={class:"flex flex-wrap justify-center"},l2={key:1,class:"rounded-2xl p-2 bg-black/25 flex flex-col gap-1"},c2={class:"flex flex-wrap justify-center"},u2={key:0},h2={key:1,class:"pl-7 flex gap-4 flex-wrap"},f2={class:"w-full relative z-10 bg-slate-300 bg-opacity-10 rounded-xl shadow-lg text-xs xl:ml-0"},d2={key:0},m2={class:"overflow-hidden whitespace-pre-wrap"},g2={class:"px-3 pb-3"},p2={class:"flex flex-wrap justify-center"},w2={key:2,class:"rounded-2xl p-2 bg-black bg-opacity-25 flex flex-col gap-1"},y2={class:"flex flex-wrap justify-center"},v2={key:0,class:"px-4"},b2={key:1,class:"px-4 whitespace-pre-wrap"},S2=le("svg",{class:"inline",xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 20 20"},[le("path",{fill:"currentColor",d:"M10 10a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 1 0v-3a.5.5 0 0 0-.5-.5M6 8.5a.5.5 0 0 1 1 0v5a.5.5 0 0 1-1 0zM13.5 6a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 1 0v-7a.5.5 0 0 0-.5-.5M3 5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm1 0v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1"})],-1),A2={class:"pt-2"},k2={class:"flex gap-4 flex-wrap justify-center"},E2={class:"flex flex-wrap justify-center"},C2={key:3,class:"flex flex-col gap-1"},N2={class:"w-full relative p-2 z-10 col-span-3 bg-black/20 rounded-xl shadow-lg text-sm whitespace-pre-wrap break-all"},I2={class:"divide-y divide-slate-700"},_2={class:"py-2"},B2=["onClick"],x2={class:"overflow-hidden pl-12 pr-2 whitespace-pre-wrap"},T2={__name:"app",setup(s){let e=Ke(1),t={},n=Ke(0),r=Ke(""),i=Ke("");const{t:a}=tg(),o=[a("b5"),a("b6"),a("b7")],l=Ke(o.join(",  ")),c=[a("b5"),a("b7")],u=Ke(c.join(",  ")),h=Ke(!1),f=Ke({signalg:"",signhashalg:"sha256",issuer:"",from:"",to:"",user:"",pubkey:"",keypara:"",aki:"",ski:"",san:"",bc:"",ku:"",eku:"",aia:"",crlp:"",csrdn:"",csrsan:"",condn:"",consan:"",sw:!1}),m={issuertav:null,csrtav:null,contav:null,aki:null,ski:null,san:null,csrsan:null,consan:null,cerexts:[]},S=Ke("1"),A=Ke(0),E=Yt(()=>{console.log("previewCert",f.value);let K=a("v2",f.value);return f.value.certtype===2&&(K+=a("v3")+f.value.aki+`
`),K+=a("v4")+f.value.ski+`
`,f.value.san.length>0&&(K+=a("v5")+f.value.san+`
`),f.value.eku.length>0&&(K+=a("v6")+f.value.eku+`
`),f.value.aia.length>0&&(K+=a("v7")+f.value.aia+`
`),f.value.crlp.length>0&&(K+=a("v8")+f.value.crlp+`
`),f.value.bc.length>0&&(K+=a("v9")+f.value.bc+`
`),f.value.ku.length>0&&(K+=a("v10")+f.value.ku+`
`),K+=a("v11"),K}),T=Yt(()=>(console.log("clickable",l.value.length,f.value.sw),l.value.length>0?!1:f.value.sw?A.value>0:!0));Sn(A,K=>{console.log("watch pickedDS",K,K==2),K==0&&(f.value.user="",f.value.san=""),K==1&&(f.value.user=f.value.csrdn,f.value.san=f.value.csrsan),K==2&&(f.value.user=f.value.condn,f.value.san=f.value.consan),console.log("preview.value",f.value)});const x=Ke([]);let y=Ke(!1),p=Ke({}),k=Ke(!0);const C=Ke(0),L=Xt();let M;_w(()=>{const K=et().$i18n;console.log("a.getBrowserLocale",K.getBrowserLocale(),"a.localeCodes",K.localeCodes,"a.locales",K.locales,"t",a("m0")),"serviceWorker"in navigator&&navigator.serviceWorker.register(L.app.baseURL+"sw.js").then(function(){})});async function F(){let K="";switch(S.value){case"1":t=await window.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["sign","verify"]),K="RSA:2048",t.name="RSA",console.log("case 1",K,t);break;case"2":t=await window.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["sign","verify"]),K="RSA:4096",t.name="RSA",console.log("case 2",K,t);break;case"3":t=await window.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]),K="ECDSA:P-256",t.name="ECDSA",console.log("case 3",K,t);break;case"4":t=await window.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-384"},!0,["sign","verify"]),K="ECDSA:P-384",t.name="ECDSA",console.log("case 4",K,t);break}const P=await window.crypto.subtle.exportKey("pkcs8",t.privateKey),w=window.btoa(xo(P));console.log("private key:",w);const I=`-----BEGIN PRIVATE KEY-----
${w}
-----END PRIVATE KEY-----`,R=new File([I],a("m15",1));pr(R)}const ne=Ke(!0);function ce(K,P,w,I,R){p.value={title:K,description:P,modaltype:w,btn1:I,btn2:R},y.value=!0}function te(K,P){if(K===2&&(P===1&&M.prompt(),M=null),K===3&&P===1&&fe(),K===4&&P===1){const w=r.value.substring(1,r.value.length-1);r.value=w.replaceAll('""','"')}K===5&&P===1&&ge(),y.value=!1}async function fe(){if(!("caches"in window)){ze("没有缓存资源文件",3e3);return}const K=await window.caches.keys();""+K.toString();for(let P=0;P<K.length;P++){const w=await window.caches.delete(K[P]);""+K[P]+w}ze("缓存资源文件已清除",3e3)}function Ce(){document.getElementById("fileElem").click()}function ye(){const K=document.getElementById("fileElem");n.value=1,ae(K.files[0])}let ie=null,se=["Index	Serial Number	Expiration Date	Status	Revocation Date	Distinguished Names"];function ae(K){console.log("readKeys");const P=new FileReader;P.readAsText(K),P.onload=async()=>{if(n.value===1&&(Re(P.result),n.value=0),n.value===2){const w=P.result.indexOf("-----BEGIN CERTIFICATE REQUEST-----")+35,I=P.result.indexOf("-----END CERTIFICATE REQUEST-----");let R=null;if(w>=0&&I>0){const B=P.result.substring(w,I).replaceAll(`
`,"");R=Xc(window.atob(B))}else R=await K.arrayBuffer();const O=fs.fromBER(R);if(await O.verify()===!1){console.log("signresult",!1),ze(a("m8"),6e3);return}const Z=await Ie(!0).digest({name:"SHA-1"},O.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex);m.skiext=new Je({extnID:"2.5.29.14",critical:!1,extnValue:new Q({valueHex:Z}).toBER(!1)}),m.subjectPublicKeyInfo=O.subjectPublicKeyInfo,m.csrtav=O.subject.typesAndValues,m.csrsan=null,f.value.ski=To(new Uint8Array(Z),""),f.value.certtype=f.value.aki.endsWith(f.value.ski)?1:2,f.value.csrdn=Gk(O.subject.typesAndValues),f.value.csrsan="";const b=O.attributes.find(_=>_.type==="1.2.840.113549.1.9.14");if(b){const _=new ct({schema:b.values[0]});for(const B of _.extensions)if(B.extnID==="2.5.29.17"){m.csrsan=B;const re=B.parsedValue.altNames;f.value.csrsan=Xk(re),console.log("altNames",re);break}}if(f.value.sw?(A.value=0,f.value.user="",f.value.san=""):(f.value.user=f.value.csrdn,f.value.san=f.value.csrsan),O.subjectPublicKeyInfo.parsedKey.className==="RSAPublicKey"){const _=O.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView,B=O.subjectPublicKeyInfo.parsedKey.modulus.valueBlock.valueHexView;f.value.pubkey=To(_," "),f.value.keypara="05 00, (RSA, "+B.length*8+" Bits)",console.log("mHex",_,_.length,_[0],_[0]%16,(_[0]-_[0]%16)/16,B.length)}if(O.subjectPublicKeyInfo.parsedKey.className==="ECPublicKey"){const _=O.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView,B=O.subjectPublicKeyInfo.parsedKey.namedCurve.replace("-","");f.value.pubkey=To(_," "),h.value?f.value.keypara="ECDH_"+B:f.value.keypara="ECDSA_"+B,console.log("mHex",_,_.length,_[0],_[0]%16,(_[0]-_[0]%16)/16)}o[1]="";const v=o.filter(_=>_.length>0);l.value=v.length>0?v.join(",  "):"",console.log("read CSR",O)}if(n.value===3){m.cerexts=[],h.value=!1,f.value.bc=f.value.ku=f.value.eku=f.value.aia=f.value.crlp="",ie=P.result.split(`*****issued certificate list*****
`);const w=ie[0].match(/^(?!\#).*/gm).filter(v=>v.length>0).join(`
`).split(/\n(?=\[)/g);ie[1]&&(se=ie[1].split(/\n+/g));const I=K.name.split("."),R=parseInt(I[0]),O=parseInt(I[1]),$=se.length;Y.value.index=R||0,Y.value.crlnumber=O||0,Y.value.issuedlistnum=$>1?$-1:0,Y.value.valid_num=0,Y.value.expired_num=0,Y.value.revoked_num=0;const j=new Date;se[0]=se[0].split(/\t/g);for(let v=1;v<$;v++)se[v]=se[v].split(/\t/g),se[v][3].startsWith("V")&&(j<new Date(se[v][2])?Y.value.valid_num+=1:se[v][3]="E"+se[v][3]),se[v][3].startsWith("R")&&(j<new Date(se[v][2])?Y.value.revoked_num+=1:se[v][3]="E"+se[v][3]),se[v][3].startsWith("E")&&(Y.value.expired_num+=1);console.log("strAB",se,Y);for(let v=0;v<w.length;v++){if(w[v].startsWith("[ca_dn]")){const _=w[v].substring(8);f.value.issuer=_.replaceAll(/\n/g,","),m.issuertav=cw(_)}w[v].startsWith("[ca_default]")&&be(1,w[v].substring(13)),w[v].startsWith("[change_dn_san")&&(qV(w[v],f.value,m),console.log("preview.value",f.value)),w[v].startsWith("[ext]")&&be(2,w[v].substring(6)),w[v].startsWith("[crlDistributionPoints]")&&be(3,w[v].substring(23)),w[v].startsWith("[authorityInfoAccess]")&&be(4,w[v].substring(21))}f.value.sw?(A.value=0,f.value.user="",f.value.san=""):(f.value.user=f.value.csrdn,f.value.san=f.value.csrsan),o[2]=c[1]="";const Z=o.filter(v=>v.length>0);l.value=Z.length>0?Z.join(",  "):"";const b=c.filter(v=>v.length>0);u.value=b.length>0?b.join(",  "):"",console.log("read conf.txt",w,w[0].split(`
`))}if(n.value===4){const w=P.result.indexOf("-----BEGIN CERTIFICATE-----")+27,I=P.result.indexOf("-----END CERTIFICATE-----");if(console.log("reader.result",P.result,w,I),w>=0&&I>0){const O=P.result.substring(w,I).replaceAll(`
`,""),$=Xc(window.atob(O)),j=He.fromBER($);console.log("read pem.CER",j)}else{const R=await K.arrayBuffer(),O=He.fromBER(R);console.log("read der.CER",O)}}if(n.value===5){const w=P.result.indexOf("-----BEGIN ENCRYPTED PRIVATE KEY-----")+37,I=P.result.indexOf("-----END ENCRYPTED PRIVATE KEY-----"),O=P.result.substring(w,I).replaceAll(`
`,""),$=Xc(window.atob(O)),j=$n.fromBER($);console.log("key2a",j);const Z=Ie(!0),b=new yt({contentEncryptionAlgorithm:j.encryptionAlgorithm,encryptedContent:j.encryptedData}),v=Z.decryptEncryptedContentInfo({password:Xc("123456"),encryptedContentInfo:b});console.log("key2c",v);const _=Ns.fromBER(v);console.log("key2d",_)}}}async function Re(K){if(K=K.trim(),!K.startsWith("-----BEGIN PRIVATE KEY-----")){ze(a("m2",1),3e3);return}if(!K.endsWith("-----END PRIVATE KEY-----")){ze(a("m2",2),3e3);return}const w=K.substring(27,K.length-25).replaceAll(`
`,""),I=Xc(window.atob(w)),R=St(I);let O=null,$=null;const j=new N({name:"name1",value:[new U({name:"name2"}),new N({name:"name3",value:[new he({name:"name4"}),new he({name:"name5"})]}),new Q({name:"name6",primitiveSchema:new N({name:"name7",value:[new U({name:"name8"}),new Q({name:"name9"}),new V({name:"name10",idBlock:{tagClass:3,tagNumber:1},value:[new Pe({name:"name11"})]})]})})]}),Z=new N({name:"name1",value:[new U({name:"name2"}),new N({name:"name3",value:[new he({name:"name4"}),new pt({name:"name5"})]}),new Q({name:"name6",primitiveSchema:new N({name:"name7",value:[new U({name:"int1"}),new U({name:"int2"}),new U({name:"int3"}),new U({name:"int4"}),new U({name:"int5"}),new U({name:"int6"}),new U({name:"int7"}),new U({name:"int8"}),new U({name:"int9"})]})})]}),b=q(R.result,R.result,j),v=q(R.result,R.result,Z);if(b.verified){console.log("oid",b.result.name4.getValue(),b.result.name5.getValue());let _="",B=!0;if(b.result.name4.getValue()==="1.2.840.10045.2.1"&&b.result.name5.getValue()==="1.2.840.10045.3.1.7"&&(_="P-256",B=!1),b.result.name4.getValue()==="1.2.840.10045.2.1"&&b.result.name5.getValue()==="1.3.132.0.34"&&(_="P-384",B=!1),B){ze(a("m3",1),3e3);return}$=await window.crypto.subtle.importKey("pkcs8",I,{name:"ECDSA",namedCurve:_},!0,["sign"]);const re=new N({value:[new N({value:[b.result.name4,b.result.name5]}),b.result.name11]});console.log("keyB and asn1jspubkey",$,re,re.toBER()),window.btoa(xo(re.toBER())),O=await window.crypto.subtle.importKey("spki",re.toBER(),{name:"ECDSA",namedCurve:_},!0,["verify"]),t.name="ECDSA",console.log("keyA",O)}if(v.verified){console.log("asn2",v,v.result.int2.valueBlock.blockLength);let _=0;if(v.result.name4.getValue()==="1.2.840.113549.1.1.1"&&v.result.int2.valueBlock.blockLength===257&&(_=2048),v.result.name4.getValue()==="1.2.840.113549.1.1.1"&&v.result.int2.valueBlock.blockLength===513&&(_=4096),_===0){ze(a("m3",2),3e3);return}$=await window.crypto.subtle.importKey("pkcs8",I,{name:"RSASSA-PKCS1-v1_5",modulusLength:_,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["sign"]);const B=new N({value:[new N({value:[v.result.name4,v.result.name5]}),new Pe({valueHex:new N({value:[v.result.int2,v.result.int3]}).toBER(!1)})]});console.log("keyB and asn1jspubkey",$,B,B.toBER()),window.btoa(xo(B.toBER())),console.log("keyB",$),O=await window.crypto.subtle.importKey("spki",B.toBER(),{name:"RSASSA-PKCS1-v1_5",modulusLength:_,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["verify"]),t.name="RSA",console.log("keyA",O)}if(O&&$){t.publicKey=O,t.privateKey=$,o[0]=c[0]="";const _=o.filter(pe=>pe.length>0);l.value=_.length>0?_.join(",  "):"";const B=c.filter(pe=>pe.length>0);u.value=B.length>0?B.join(",  "):"",f.value.signalg="sha256"+t.name;const re=Ie(!0);let z=new fs;await z.subjectPublicKeyInfo.importKey(t.publicKey);const D=await re.digest({name:"SHA-1"},z.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex),J=new jn({keyIdentifier:new Q({valueHex:D})});m.akiext=new Je({extnID:"2.5.29.35",critical:!1,extnValue:J.toSchema().toBER(!1)}),f.value.aki="KeyID="+To(new Uint8Array(D),""),f.value.certtype=f.value.aki.endsWith(f.value.ski)?1:2,ze(a("m4",1),3e3)}else ze(a("m4",2),3e3)}let oe=Ke("");async function de(){console.log("createCSR",oe.value.length,a("m6",0),a("m6",1),a("m6",2));let K=null;if(oe.value.length===0){ce(a("m5",1),a("m6",1),1,a("m7",2));return}else if(K=cw(oe.value),K.length===0){ce(a("m5",1),a("m6",2),1,a("m7",2));return}if(t.publicKey===void 0){ce(a("m5",2),a("m7",1),1,a("m7",2));return}const P=new fs;P.subject.typesAndValues=K,await P.subjectPublicKeyInfo.importKey(t.publicKey),P.attributes=[];const I=await Ie(!0).digest({name:"SHA-1"},P.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex),R=[new Je({extnID:"2.5.29.14",critical:!1,extnValue:new Q({valueHex:I}).toBER(!1)})],O=Yk(oe.value);if(O.length>0){const b=new bt({names:O});R.push(new Je({extnID:"2.5.29.17",critical:!1,extnValue:b.toSchema().toBER(!1)}))}P.attributes.push(new nt({type:"1.2.840.113549.1.9.14",values:[new ct({extensions:R}).toSchema()]})),await P.sign(t.privateKey,"SHA-256");const $=P.toSchema(!0).toBER();let j=window.btoa(xo($));const Z=new File([`-----BEGIN CERTIFICATE REQUEST-----
${j}
-----END CERTIFICATE REQUEST-----`],a("m15",2));pr(Z),console.log("pkcs10raw",$)}let Y=Ke({crlnumber:1,valid_days:365,valid_crl_days:30,index:0,issuedlistnum:0,valid_num:0,expired_num:0,revoked_num:0});function be(K,P){if(K===1){const w=P.replaceAll(/\n|\s,/g,"").split(/=|,/);for(let I=0;I<w.length;I++){if(w[I]==="valid_days"){const R=parseInt(w[++I]);Number.isInteger(R)&&(Y.value.valid_days=R),f.value.from=new Date().toISOString();const O=new Date;O.setDate(O.getDate()+Y.value.valid_days),f.value.to=O.toISOString();continue}if(w[I]==="valid_crl_days"){Y.value.valid_crl_days=parseInt(w[++I]);continue}if(w[I]==="output_format"){m.output_format=w[++I];continue}}console.log("parseCADE",K,P)}if(K===2){const w=P.replaceAll(" ","").split(`
`);for(let I=0;I<w.length;I++){if(w[I].startsWith("basicConstraints")){const R=w[I].indexOf("pathlen:"),O=new vi({cA:w[I].indexOf("CA:true")>0});R>0&&(O.pathLenConstraint=parseInt(w[I].substring(R+8))),f.value.bc=(w[I].indexOf("critical")>0?"critical,":"")+(w[I].indexOf("CA:true")>0?"Subject Type=CA,":""),R>0&&(f.value.bc+="Path Length Constraint="+O.pathLenConstraint),m.cerexts.push(new Je({extnID:"2.5.29.19",critical:w[I].indexOf("critical")>0,extnValue:O.toSchema().toBER(!1),parsedValue:O}));continue}if(w[I].startsWith("keyUsage")){const R=new ArrayBuffer(1),O=new Uint8Array(R);let $=w[I].indexOf("critical")>0?"critical, ":"";w[I].indexOf("keyCertSign")>0&&(O[0]|=4)&&($+="Certificate Signing, "),w[I].indexOf("cRLSign")>0&&(O[0]|=2)&&($+="Off-line CRL Signing, CRL Signing,"),w[I].indexOf("digitalSignature")>0&&(O[0]|=128)&&($+="Digital Signature, "),w[I].indexOf("keyEncipherment")>0?(O[0]|=32,$+="Key Encipherment, ",h.value=!0,f.value.keypara.startsWith("ECDSA")&&(f.value.keypara=f.value.keypara.replace("ECDSA","ECDH"))):(h.value=!1,f.value.keypara.startsWith("ECDH")&&(f.value.keypara=f.value.keypara.replace("ECDH","ECDSA"))),f.value.ku=$+" ("+To(O,"")+")";const j=new Pe({valueHex:R});m.cerexts.push(new Je({extnID:"2.5.29.15",critical:w[I].indexOf("critical")>0,extnValue:j.toBER(!1),parsedValue:j}));continue}if(w[I].startsWith("extendedKeyUsage")){const R=[];let O=w[I].indexOf("critical")>0?"critical, ":"";w[I].indexOf("clientAuth")>0&&R.push("1.3.6.1.5.5.7.3.2")&&(O+=a("v21")),w[I].indexOf("serverAuth")>0&&R.push("1.3.6.1.5.5.7.3.1")&&(O+=a("v22")),w[I].indexOf("codeSigning")>0&&R.push("1.3.6.1.5.5.7.3.3")&&(O+=a("v23")),f.value.eku=O;const $=new xc({keyPurposes:R});m.cerexts.push(new Je({extnID:"2.5.29.37",critical:w[I].indexOf("critical")>0,extnValue:$.toSchema().toBER(!1),parsedValue:$}));continue}}console.log("parseCADE",K,P,m.cerexts)}if(K===3){const w=P.replaceAll(" ","").match(new RegExp("(?<=^URI\\.\\d+=)(http.*)","gm"));if(w&&w.length>0){let I="";const R=w.map(($,j)=>(I+=`
   [`+(j+1)+`]CRL Distribution Point
      Distribution Point Name:
      Full Name: URL=`+$,new Jn({distributionPoint:[new Le({type:6,value:$})]})));f.value.crlp=I;const O=new ho({distributionPoints:R});m.cerexts.push(new Je({extnID:"2.5.29.31",critical:P.indexOf("critical")>0,extnValue:O.toSchema().toBER(!1),parsedValue:O})),console.log("parseCADE",K,w,O)}}if(K===4){const w=P.replaceAll(" ","").match(new RegExp("(?<=^caIssuers;URI\\.\\d+=)(http.*)","gm"));if(w&&w.length>0){let I="";const R=w.map(($,j)=>(I+=`
   [`+(j+1)+`]Authority Info Access
      Access Method=`+a("v24")+"      Alternative Name: URL="+$,new yi({accessMethod:"1.3.6.1.5.5.7.48.2",accessLocation:new Le({type:6,value:$})})));f.value.aia=I;const O=new fo({accessDescriptions:R});m.cerexts.push(new Je({extnID:"1.3.6.1.5.5.7.1.1",critical:P.indexOf("critical")>0,extnValue:O.toSchema().toBER(!1),parsedValue:O})),console.log("parseCADE",K,w,O)}}}function Be(){const K=new File([FV.value],"0.0.ca-conf.txt");pr(K)}const qe=Ke("");async function it(){console.log("createCER",m);const K=[];f.value.certtype===2&&K.push(m.akiext),K.push(m.skiext);const P=new He;P.version=2,P.serialNumber=new U({valueHex:WV(window.crypto.getRandomValues(new Uint8Array([0,0])))}),P.issuer.typesAndValues=m.issuertav,f.value.sw&&A.value==2?(P.subject.typesAndValues=m.contav,m.consan&&K.push(m.consan)):(P.subject.typesAndValues=m.csrtav,m.csrsan&&K.push(m.csrsan)),P.notBefore.value=new Date;const w=new Date;w.setDate(w.getDate()+Y.value.valid_days),P.notAfter.value=w,K.push(...m.cerexts),P.extensions=K,P.subjectPublicKeyInfo=m.subjectPublicKeyInfo,await P.sign(t.privateKey,"SHA-256"),console.log("creatCER","para.value.index:"+Y.value.index),Y.value.index+=1,Y.value.issuedlistnum+=1,Y.value.valid_num+=1;const I=To(P.serialNumber.valueBlock.valueHexView,"");se.push([Y.value.index,I,w.toISOString(),"V","",f.value.user]),console.log("issuedlist:"+Y.value.index,se);let R=`

*****issued certificate list*****`;for(let j=0;j<se.length;j++)R+=`
`+se[j].join("	");pr(new File([ie[0]+R],Y.value.index+"."+Y.value.crlnumber+".ca-conf.txt"));const O=P.toSchema().toBER(),$=window.btoa(xo(O));if(m.output_format==="DER")pr(new File([O],Y.value.index+"."+I+".DER.CER"));else{const j=new File([`-----BEGIN CERTIFICATE-----
${$}
-----END CERTIFICATE-----`],Y.value.index+"."+I+".PEM.CER");pr(j)}}const De=[];function Ve(){if(console.log("createCRL",qe.value),qe.value.length>0){De.length=0;const K=qe.value.replace(/,|\n/g," ").split(/\s+/g),P=[K.length,[],[]];let w=!1;console.log("serials",K,se);for(let I=0;I<P[0];I++){w=!1;for(let R=0;R<se.length;R++)if(K[I]===se[R][1]){se[R][3].startsWith("E")?P[2].push(K[I]):De.push(se[R]),w=!0;break}!w&&P[1].push(K[I])}if(console.log("nmst",P),P[1].length+P[2].length>0){let I=a("m9",[P[0]]);P[1].length&&(I+=a("m10",[P[1].length,P[1].join(",")])),P[2].length&&(I+=a("m11",[P[2].length,P[2].join(",")])),I+=a("m12",[De.length]),ce(a("m13"),I,5,a("m14",1),a("m14",2))}else De.length>0&&ge()}else ge()}async function ge(){console.log("downloadCRL");const K=new Date;De.length>0&&De.forEach(j=>{j[3]="R"+x.value.join(""),j[4].length===0&&(j[4]=K.toISOString())&&(Y.value.valid_num-=1)});let P=`

*****issued certificate list*****`;const w=[];Y.value.revoked_num=0;for(let j=0;j<se.length;j++)P+=`
`+se[j].join("	"),se[j][3].startsWith("R")&&(w.push(KV(se[j][1],se[j][4],se[j][3])),Y.value.revoked_num+=1);const I=new kt;I.version=1,I.issuer.typesAndValues=m.issuertav,I.thisUpdate=new dt({type:0,value:K});const R=new Date;R.setDate(R.getDate()+Y.value.valid_crl_days),I.nextUpdate=new dt({type:0,value:R}),I.revokedCertificates=w,Y.value.crlnumber+=1,I.crlExtensions=new ct({extensions:[new Je({extnID:"2.5.29.20",extnValue:new U({value:Y.value.crlnumber}).toBER(!1)})]}),pr(new File([ie[0]+P],Y.value.index+"."+Y.value.crlnumber+".ca-conf.txt")),await I.sign(t.privateKey,"SHA-256");const O=I.toSchema(!0).toBER(!1),$=window.btoa(xo(O));pr(new File([`-----BEGIN X509 CRL-----
${$}
-----END X509 CRL-----`],Y.value.crlnumber+".CRL"))}function ze(K,P){i.value=K,setTimeout(()=>{i.value="",ne.value=!0},P)}return(K,P)=>{const w=fT,I=AT,R=ET,O=NT,$=CT,j=_T,Z=TT,b=DT,v=KT,_=YT;return We(),Et(Ut,null,[ee(i).length>0?(We(),pn(w,{key:0,class:Pt([ee(ne)?"bg-white dark:bg-gray-800":"bg-red-900 dark:bg-red-900"])},{default:zt(()=>[Me(Oe(ee(i)),1)]),_:1},8,["class"])):fn("",!0),ee(y)?(We(),pn(I,ZS({key:1},ee(p),{onSomeEvent:te}),null,16)):fn("",!0),Se(R,{rel:"manifest",href:ee(L).app.baseURL+"manifest.json"},null,8,["href"]),Se(R,{rel:"mask-icon",href:ee(L).app.baseURL+"/digital-ca/img/icons/icon-144.png",color:"#333333"},null,8,["href"]),Se(R,{rel:"apple-touch-icon",href:ee(L).app.baseURL+"/digital-ca/img/icons/icon-144.png"},null,8,["href"]),Se(O,{name:"apple-mobile-web-app-title",content:ee(a)("p0")},null,8,["content"]),Se(O,{name:"apple-mobile-web-app-capable",content:"yes"}),Se(O,{name:"apple-mobile-web-app-status-bar-style",content:"#1976d2"}),Se($,null,{default:zt(()=>[Me(Oe(ee(a)("p0")),1)]),_:1}),Se(O,{"data-rh":"true",property:"og:title",content:ee(a)("p0")},null,8,["content"]),Se(O,{"data-rh":"true",property:"og:type",content:"website"}),Se(O,{"data-rh":"true",property:"og:image",content:ee(L).app.baseURL+"/digital-ca/img/icons/icon-144.png"},null,8,["content"]),Se(R,{rel:"icon",type:"image/x-icon",href:ee(L).app.baseURL+"img/icons/icon-64.png"},null,8,["href"]),Se(O,{name:"theme-color",content:"#1976d2"}),le("div",GV,[le("div",YV,[le("div",XV,[(We(),Et(Ut,null,Uy(3,B=>le("button",{key:B,type:"button",class:Pt(["w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-black-900","ring-black ring-opacity-25 focus:outline-none focus:ring focus:border-black",ee(e)===B?"text-black ring":"hover:bg-white/[0.12] hover:text-white"]),onClick:re=>we(e)?e.value=B:e=B},Oe(K.$t("p"+B)),11,QV)),64)),le("button",{onClick:P[0]||(P[0]=B=>we(e)?e.value=4:e=4),class:Pt(["leading-5 ring-black ring-opacity-25 focus:outline-none focus:ring focus:border-black rounded-lg px-4 hover:bg-white/[0.12] stroke-black",ee(e)===4?"ring":"hover:stroke-white"])},ZV,2)]),le("input",{type:"file",id:"fileElem",onChange:ye,class:"hidden"},null,32),ee(e)===1?(We(),Et("div",e2,[le("p",null,Oe(K.$t("p4")),1),le("div",t2,[le("div",null,[ls(le("input",{type:"radio",value:"1","onUpdate:modelValue":P[1]||(P[1]=B=>we(S)?S.value=B:null)},null,512),[[So,ee(S)]]),Me("RSA:2048")]),le("div",null,[ls(le("input",{type:"radio",value:"2","onUpdate:modelValue":P[2]||(P[2]=B=>we(S)?S.value=B:null)},null,512),[[So,ee(S)]]),Me("RSA:4096")]),le("div",null,[ls(le("input",{type:"radio",value:"3","onUpdate:modelValue":P[3]||(P[3]=B=>we(S)?S.value=B:null)},null,512),[[So,ee(S)]]),Me("ECDSA:P-256")]),le("div",null,[ls(le("input",{type:"radio",value:"4","onUpdate:modelValue":P[4]||(P[4]=B=>we(S)?S.value=B:null)},null,512),[[So,ee(S)]]),Me("ECDSA:P-384")])]),le("div",s2,[Se(j,{onClick:F},{default:zt(()=>[Me(Oe(K.$t("b1")),1)]),_:1}),Se(Z,{onClick:Ce,onDrop:P[5]||(P[5]=Hi(B=>(we(n)?n.value=1:n=1,ae(B.dataTransfer.files[0])),["prevent"])),onDragenter:P[6]||(P[6]=B=>we(n)?n.value=1:n=1),onDragleave:P[7]||(P[7]=B=>we(n)?n.value=0:n=0),class:Pt({"border-white":ee(n)===1})},{default:zt(()=>[Me(Oe(K.$t("b2")),1)]),_:1},8,["class"])]),le("p",n2,[Me(Oe(K.$t("p5")),1),Se(b,{onClick:P[8]||(P[8]=B=>(we(e)?e.value=4:e=4,C.value=3))})]),ls(le("textarea",{"onUpdate:modelValue":P[9]||(P[9]=B=>we(oe)?oe.value=B:oe=B),placeholder:ee(a)("p5a"),class:"w-full relative p-2 z-10 col-span-3 placeholder:text-slate-800 bg-slate-300 bg-opacity-10 rounded-xl shadow-lg text-xs focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 xl:ml-0",rows:"3"},null,8,r2),[[iv,ee(oe)]]),le("div",i2,[Se(j,{onClick:de},{default:zt(()=>[Me(Oe(K.$t("b3")),1)]),_:1})]),le("p",a2,[Me(Oe(K.$t("p6")),1),Se(b,{onClick:P[10]||(P[10]=B=>(we(e)?e.value=4:e=4,C.value=4))})]),le("div",o2,[Se(j,{onClick:Be},{default:zt(()=>[Me(Oe(K.$t("b4")),1)]),_:1})])])):fn("",!0),ee(e)===2?(We(),Et("div",l2,[le("p",null,Oe(K.$t("p7")),1),le("div",c2,[Se(Z,{onClick:Ce,onDrop:P[11]||(P[11]=Hi(B=>(we(n)?n.value=1:n=1,ae(B.dataTransfer.files[0])),["prevent"])),onDragenter:P[12]||(P[12]=B=>we(n)?n.value=1:n=1),onDragleave:P[13]||(P[13]=B=>we(n)?n.value=0:n=0),class:Pt({"border-white":ee(n)===1})},{default:zt(()=>[Me(Oe(K.$t("b5")),1)]),_:1},8,["class"]),Se(Z,{onClick:Ce,onDrop:P[14]||(P[14]=Hi(B=>(we(n)?n.value=2:n=2,ae(B.dataTransfer.files[0])),["prevent"])),onDragenter:P[15]||(P[15]=B=>we(n)?n.value=2:n=2),onDragleave:P[16]||(P[16]=B=>we(n)?n.value=0:n=0),class:Pt({"border-white":ee(n)===2})},{default:zt(()=>[Me(Oe(K.$t("b6")),1)]),_:1},8,["class"]),Se(Z,{onClick:Ce,onDrop:P[17]||(P[17]=Hi(B=>(we(n)?n.value=3:n=3,ae(B.dataTransfer.files[0])),["prevent"])),onDragenter:P[18]||(P[18]=B=>we(n)?n.value=3:n=3),onDragleave:P[19]||(P[19]=B=>we(n)?n.value=0:n=0),class:Pt({"border-white":ee(n)===3})},{default:zt(()=>[Me(Oe(K.$t("b7")),1)]),_:1},8,["class"])]),ee(l).length>0?(We(),Et("p",u2,[Se(v),Me(" "+Oe(K.$t("m0"))+Oe(ee(l)),1)])):ee(f).sw?(We(),Et("div",h2,[Me(Oe(ee(a)("p12"))+" ",1),le("div",null,[ls(le("input",{type:"radio",value:"1","onUpdate:modelValue":P[20]||(P[20]=B=>we(A)?A.value=B:null)},null,512),[[So,ee(A),void 0,{number:!0}]]),Me(Oe(ee(a)("p13",1)),1)]),le("div",null,[ls(le("input",{type:"radio",value:"2","onUpdate:modelValue":P[21]||(P[21]=B=>we(A)?A.value=B:null)},null,512),[[So,ee(A),void 0,{number:!0}]]),Me(Oe(ee(a)("p13",2)),1)])])):fn("",!0),le("div",f2,[le("p",{onClick:P[22]||(P[22]=B=>we(k)?k.value=!ee(k):k=!ee(k)),class:"p-2 z-0 flex gap-1 text-sm align-middle"},[Se(_,{class:Pt(ee(k)?"rotate-90":"rotate-180")},null,8,["class"]),Me(" "+Oe(K.$t("p8")),1),ee(l).length==0?(We(),Et("span",d2,Oe(K.$t("v0",ee(f).certtype)),1)):fn("",!0)]),le("div",{class:Pt(["grid transition-all -z-10 duration-700 ease-in-out",ee(k)?"grid-rows-[0fr]":"grid-rows-[1fr]"])},[le("div",m2,[le("div",g2,Oe(ee(E)),1)])],2)]),le("div",p2,[Se(j,{clickable:ee(T),onClick:P[23]||(P[23]=B=>ee(T)&&it())},{default:zt(()=>[Me(Oe(K.$t("b8")),1)]),_:1},8,["clickable"])])])):fn("",!0),ee(e)===3?(We(),Et("div",w2,[le("p",null,Oe(K.$t("p9")),1),le("div",y2,[Se(Z,{onClick:Ce,onDrop:P[24]||(P[24]=Hi(B=>(we(n)?n.value=1:n=1,ae(B.dataTransfer.files[0])),["prevent"])),onDragenter:P[25]||(P[25]=B=>we(n)?n.value=1:n=1),onDragleave:P[26]||(P[26]=B=>we(n)?n.value=0:n=0),class:Pt({"border-white":ee(n)===1})},{default:zt(()=>[Me(Oe(K.$t("b5")),1)]),_:1},8,["class"]),Se(Z,{onClick:Ce,onDrop:P[27]||(P[27]=Hi(B=>(we(n)?n.value=3:n=3,ae(B.dataTransfer.files[0])),["prevent"])),onDragenter:P[28]||(P[28]=B=>we(n)?n.value=3:n=3),onDragleave:P[29]||(P[29]=B=>we(n)?n.value=0:n=0),class:Pt({"border-white":ee(n)===3})},{default:zt(()=>[Me(Oe(K.$t("b7")),1)]),_:1},8,["class"])]),ee(u).length>0?(We(),Et("p",v2,[Se(v),Me(" "+Oe(K.$t("m0"))+Oe(ee(u)),1)])):(We(),Et("p",b2,[S2,Me(" "+Oe(K.$t("m1",ee(Y))),1),Se(b,{onClick:P[30]||(P[30]=B=>(we(e)?e.value=4:e=4,C.value=8))})])),le("p",A2,[Me(Oe(K.$t("p10")),1),Se(b,{onClick:P[31]||(P[31]=B=>(we(e)?e.value=4:e=4,C.value=9))})]),ls(le("textarea",{"onUpdate:modelValue":P[32]||(P[32]=B=>we(qe)?qe.value=B:null),id:"needtorevoc",class:"w-full relative p-2 z-10 col-span-3 placeholder:text-slate-800 bg-slate-300 bg-opacity-10 rounded-xl shadow-lg text-xs focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 xl:ml-0",rows:"5"},null,512),[[iv,ee(qe)]]),le("div",k2,[le("p",null,Oe(K.$t("p11")),1),le("div",null,[ls(le("input",{type:"checkbox",value:"0","onUpdate:modelValue":P[33]||(P[33]=B=>we(x)?x.value=B:null)},null,512),[[bo,ee(x)]]),Me(Oe(K.$t("r0")),1)]),le("div",null,[ls(le("input",{type:"checkbox",value:"1","onUpdate:modelValue":P[34]||(P[34]=B=>we(x)?x.value=B:null)},null,512),[[bo,ee(x)]]),Me(Oe(K.$t("r1")),1)]),le("div",null,[ls(le("input",{type:"checkbox",value:"2","onUpdate:modelValue":P[35]||(P[35]=B=>we(x)?x.value=B:null)},null,512),[[bo,ee(x)]]),Me(Oe(K.$t("r2")),1)]),le("div",null,[ls(le("input",{type:"checkbox",value:"3","onUpdate:modelValue":P[36]||(P[36]=B=>we(x)?x.value=B:null)},null,512),[[bo,ee(x)]]),Me(Oe(K.$t("r3")),1)]),le("div",null,[ls(le("input",{type:"checkbox",value:"4","onUpdate:modelValue":P[37]||(P[37]=B=>we(x)?x.value=B:null)},null,512),[[bo,ee(x)]]),Me(Oe(K.$t("r4")),1)]),le("div",null,[ls(le("input",{type:"checkbox",value:"5","onUpdate:modelValue":P[38]||(P[38]=B=>we(x)?x.value=B:null)},null,512),[[bo,ee(x)]]),Me(Oe(K.$t("r5")),1)])]),le("div",E2,[Se(j,{clickable:ee(u).length===0,onClick:P[39]||(P[39]=B=>ee(u).length===0&&Ve())},{default:zt(()=>[Me(Oe(K.$t("b9")),1)]),_:1},8,["clickable"])])])):fn("",!0),ee(e)===4?(We(),Et("div",C2,[le("div",N2,[le("div",I2,[(We(),Et(Ut,null,Uy(10,B=>le("div",_2,[le("p",{onClick:re=>C.value=ee(C)===B?0:B,class:"text-base flex"},[Se(_,{class:Pt(ee(C)===B?"rotate-180":"rotate-90")},null,8,["class"]),Me(" "+Oe(B+". "+K.$t("q"+B)),1)],8,B2),le("p",{class:Pt(["grid transition-all duration-500 ease-in-out",ee(C)===B?"grid-rows-[1fr]":"grid-rows-[0fr]"])},[le("div",x2,Oe(K.$t("a"+B)),1)],2)])),64))])])])):fn("",!0)])])],64)}}},R2=T2,O2={__name:"nuxt-error-page",props:{error:Object},setup(s){const t=s.error;(t.stack||"").split(`
`).splice(1).map(h=>({text:h.replace("webpack:/","").replace(".vue",".js").trim(),internal:h.includes("node_modules")&&!h.includes(".cache")||h.includes("internal")||h.includes("new Promise")})).map(h=>`<span class="stack${h.internal?" internal":""}">${h.text}</span>`).join(`
`);const n=Number(t.statusCode||500),r=n===404,i=t.statusMessage??(r?"Page Not Found":"Internal Server Error"),a=t.message||t.toString(),o=void 0,u=r?Dy(()=>Sp(()=>import("./error-404.9c375a55.js"),["./error-404.9c375a55.js","./error-404.d6788580.css"],import.meta.url).then(h=>h.default||h)):Dy(()=>Sp(()=>import("./error-500.bd188f1d.js"),["./error-500.bd188f1d.js","./error-500.4f45934a.css"],import.meta.url).then(h=>h.default||h));return(h,f)=>(We(),pn(ee(u),o0(zS({statusCode:ee(n),statusMessage:ee(i),description:ee(a),stack:ee(o)})),null,16))}},V2=O2,P2={__name:"nuxt-root",setup(s){const e=()=>null,t=et(),n=t.deferHydration(),r=!1;PS(_1,Hw()),t.hooks.callHookWith(o=>o.map(l=>l()),"vue:setup");const i=$w();TS((o,l,c)=>{if(t.hooks.callHook("vue:error",o,l,c).catch(u=>console.error("[nuxt] Error in `vue:error` hook",u)),MI(o)&&(o.fatal||o.unhandled))return t.runWithContext(()=>DI(o)),!1});const a=!1;return(o,l)=>(We(),pn(z0,{onResolve:ee(n)},{default:zt(()=>[ee(i)?(We(),pn(ee(V2),{key:0,error:ee(i)},null,8,["error"])):ee(a)?(We(),pn(ee(e),{key:1,context:ee(a)},null,8,["context"])):ee(r)?(We(),pn(Y0(ee(r)),{key:2})):(We(),pn(ee(R2),{key:3}))]),_:1},8,["onResolve"]))}},Fb=P2;globalThis.$fetch||(globalThis.$fetch=lN.create({baseURL:uN()}));let Kb;{let s;Kb=async function(){var i,a;if(s)return s;const n=!!((i=window.__NUXT__)!=null&&i.serverRendered||((a=document.getElementById("__NUXT_DATA__"))==null?void 0:a.dataset.ssr)==="true")?vC(Fb):yC(Fb),r=kN({vueApp:n});try{await CN(r,aT)}catch(o){await r.callHook("app:error",o),r.payload.error=r.payload.error||o}try{await r.hooks.callHook("app:created",n),await r.hooks.callHook("app:beforeMount",n),n.mount(HI),await r.hooks.callHook("app:mounted",n),await jm()}catch(o){await r.callHook("app:error",o),r.payload.error=r.payload.error||o}return n},s=Kb().catch(e=>{console.error("Error while mounting app:",e)})}export{Me as A,L2 as B,D2 as C,xf as _,T1 as a,Sv as b,Yt as c,Ii as d,xS as e,M2 as f,Vw as g,mo as h,U2 as i,Lw as j,Dw as k,et as l,B1 as m,H2 as n,_w as o,Nf as p,yI as q,Ke as r,We as s,Et as t,If as u,le as v,fm as w,Oe as x,Se as y,zt as z};
