const __vite__fileDeps=["./C-h8oJJY.js","./error-404.Cs7Z0ZwI.css","./BeEZQL5U.js","./error-500.BY691cIp.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
/**
* @vue/shared v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function fw(s,e){const t=new Set(s.split(","));return n=>t.has(n)}const at={},sc=[],Fs=()=>{},c0=()=>!1,Ef=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),dw=s=>s.startsWith("onUpdate:"),Ht=Object.assign,mw=(s,e)=>{const t=s.indexOf(e);t>-1&&s.splice(t,1)},u0=Object.prototype.hasOwnProperty,Je=(s,e)=>u0.call(s,e),Ne=Array.isArray,nc=s=>Cf(s)==="[object Map]",Hm=s=>Cf(s)==="[object Set]",By=s=>Cf(s)==="[object Date]",Te=s=>typeof s=="function",kt=s=>typeof s=="string",ir=s=>typeof s=="symbol",nt=s=>s!==null&&typeof s=="object",Zb=s=>(nt(s)||Te(s))&&Te(s.then)&&Te(s.catch),eS=Object.prototype.toString,Cf=s=>eS.call(s),h0=s=>Cf(s).slice(8,-1),tS=s=>Cf(s)==="[object Object]",gw=s=>kt(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,rc=fw(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),$m=s=>{const e=Object.create(null);return t=>e[t]||(e[t]=s(t))},f0=/-(\w)/g,En=$m(s=>s.replace(f0,(e,t)=>t?t.toUpperCase():"")),d0=/\B([A-Z])/g,Rc=$m(s=>s.replace(d0,"-$1").toLowerCase()),Fm=$m(s=>s.charAt(0).toUpperCase()+s.slice(1)),fg=$m(s=>s?`on${Fm(s)}`:""),Ci=(s,e)=>!Object.is(s,e),Ad=(s,e)=>{for(let t=0;t<s.length;t++)s[t](e)},sS=(s,e,t,n=!1)=>{Object.defineProperty(s,e,{configurable:!0,enumerable:!1,writable:n,value:t})},np=s=>{const e=parseFloat(s);return isNaN(e)?s:e},m0=s=>{const e=kt(s)?Number(s):NaN;return isNaN(e)?s:e};let xy;const nS=()=>xy||(xy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function jm(s){if(Ne(s)){const e={};for(let t=0;t<s.length;t++){const n=s[t],r=kt(n)?y0(n):jm(n);if(r)for(const i in r)e[i]=r[i]}return e}else if(kt(s)||nt(s))return s}const g0=/;(?![^(]*\))/g,p0=/:([^]+)/,w0=/\/\*[^]*?\*\//g;function y0(s){const e={};return s.replace(w0,"").split(g0).forEach(t=>{if(t){const n=t.split(p0);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function xt(s){let e="";if(kt(s))e=s;else if(Ne(s))for(let t=0;t<s.length;t++){const n=xt(s[t]);n&&(e+=n+" ")}else if(nt(s))for(const t in s)s[t]&&(e+=t+" ");return e.trim()}function v0(s){if(!s)return null;let{class:e,style:t}=s;return e&&!kt(e)&&(s.class=xt(e)),t&&(s.style=jm(t)),s}const b0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",S0=fw(b0);function rS(s){return!!s||s===""}function A0(s,e){if(s.length!==e.length)return!1;let t=!0;for(let n=0;t&&n<s.length;n++)t=pc(s[n],e[n]);return t}function pc(s,e){if(s===e)return!0;let t=By(s),n=By(e);if(t||n)return t&&n?s.getTime()===e.getTime():!1;if(t=ir(s),n=ir(e),t||n)return s===e;if(t=Ne(s),n=Ne(e),t||n)return t&&n?A0(s,e):!1;if(t=nt(s),n=nt(e),t||n){if(!t||!n)return!1;const r=Object.keys(s).length,i=Object.keys(e).length;if(r!==i)return!1;for(const a in s){const o=s.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!pc(s[a],e[a]))return!1}}return String(s)===String(e)}function iS(s,e){return s.findIndex(t=>pc(t,e))}const Ve=s=>kt(s)?s:s==null?"":Ne(s)||nt(s)&&(s.toString===eS||!Te(s.toString))?JSON.stringify(s,aS,2):String(s),aS=(s,e)=>e&&e.__v_isRef?aS(s,e.value):nc(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,r],i)=>(t[dg(n,i)+" =>"]=r,t),{})}:Hm(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>dg(t))}:ir(e)?dg(e):nt(e)&&!Ne(e)&&!tS(e)?String(e):e,dg=(s,e="")=>{var t;return ir(s)?`Symbol(${(t=s.description)!=null?t:e})`:s};/**
* @vue/reactivity v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let bs;class oS{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=bs,!e&&bs&&(this.index=(bs.scopes||(bs.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=bs;try{return bs=this,e()}finally{bs=t}}}on(){bs=this}off(){bs=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function pw(s){return new oS(s)}function k0(s,e=bs){e&&e.active&&e.effects.push(s)}function ww(){return bs}function lS(s){bs&&bs.cleanups.push(s)}let Qa;class yw{constructor(e,t,n,r){this.fn=e,this.trigger=t,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,k0(this,r)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,_i();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed&&(E0(t.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Bi()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=pi,t=Qa;try{return pi=!0,Qa=this,this._runnings++,Ty(this),this.fn()}finally{Ry(this),this._runnings--,Qa=t,pi=e}}stop(){this.active&&(Ty(this),Ry(this),this.onStop&&this.onStop(),this.active=!1)}}function E0(s){return s.value}function Ty(s){s._trackId++,s._depsLength=0}function Ry(s){if(s.deps.length>s._depsLength){for(let e=s._depsLength;e<s.deps.length;e++)cS(s.deps[e],s);s.deps.length=s._depsLength}}function cS(s,e){const t=s.get(e);t!==void 0&&e._trackId!==t&&(s.delete(e),s.size===0&&s.cleanup())}let pi=!0,rp=0;const uS=[];function _i(){uS.push(pi),pi=!1}function Bi(){const s=uS.pop();pi=s===void 0?!0:s}function vw(){rp++}function bw(){for(rp--;!rp&&ip.length;)ip.shift()()}function hS(s,e,t){if(e.get(s)!==s._trackId){e.set(s,s._trackId);const n=s.deps[s._depsLength];n!==e?(n&&cS(n,s),s.deps[s._depsLength++]=e):s._depsLength++}}const ip=[];function fS(s,e,t){vw();for(const n of s.keys()){let r;n._dirtyLevel<e&&(r??(r=s.get(n)===n._trackId))&&(n._shouldSchedule||(n._shouldSchedule=n._dirtyLevel===0),n._dirtyLevel=e),n._shouldSchedule&&(r??(r=s.get(n)===n._trackId))&&(n.trigger(),(!n._runnings||n.allowRecurse)&&n._dirtyLevel!==2&&(n._shouldSchedule=!1,n.scheduler&&ip.push(n.scheduler)))}bw()}const dS=(s,e)=>{const t=new Map;return t.cleanup=s,t.computed=e,t},im=new WeakMap,za=Symbol(""),ap=Symbol("");function ms(s,e,t){if(pi&&Qa){let n=im.get(s);n||im.set(s,n=new Map);let r=n.get(t);r||n.set(t,r=dS(()=>n.delete(t))),hS(Qa,r)}}function er(s,e,t,n,r,i){const a=im.get(s);if(!a)return;let o=[];if(e==="clear")o=[...a.values()];else if(t==="length"&&Ne(s)){const l=Number(n);a.forEach((c,u)=>{(u==="length"||!ir(u)&&u>=l)&&o.push(c)})}else switch(t!==void 0&&o.push(a.get(t)),e){case"add":Ne(s)?gw(t)&&o.push(a.get("length")):(o.push(a.get(za)),nc(s)&&o.push(a.get(ap)));break;case"delete":Ne(s)||(o.push(a.get(za)),nc(s)&&o.push(a.get(ap)));break;case"set":nc(s)&&o.push(a.get(za));break}vw();for(const l of o)l&&fS(l,4);bw()}function C0(s,e){const t=im.get(s);return t&&t.get(e)}const N0=fw("__proto__,__v_isRef,__isVue"),mS=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(ir)),Oy=I0();function I0(){const s={};return["includes","indexOf","lastIndexOf"].forEach(e=>{s[e]=function(...t){const n=Qe(this);for(let i=0,a=this.length;i<a;i++)ms(n,"get",i+"");const r=n[e](...t);return r===-1||r===!1?n[e](...t.map(Qe)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{s[e]=function(...t){_i(),vw();const n=Qe(this)[e].apply(this,t);return bw(),Bi(),n}}),s}function _0(s){ir(s)||(s=String(s));const e=Qe(this);return ms(e,"has",s),e.hasOwnProperty(s)}class gS{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){const r=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_isShallow")return i;if(t==="__v_raw")return n===(r?i?$0:vS:i?yS:wS).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=Ne(e);if(!r){if(a&&Je(Oy,t))return Reflect.get(Oy,t,n);if(t==="hasOwnProperty")return _0}const o=Reflect.get(e,t,n);return(ir(t)?mS.has(t):N0(t))||(r||ms(e,"get",t),i)?o:ge(o)?a&&gw(t)?o:o.value:nt(o)?r?SS(o):Ni(o):o}}class pS extends gS{constructor(e=!1){super(!1,e)}set(e,t,n,r){let i=e[t];if(!this._isShallow){const l=wc(i);if(!am(n)&&!wc(n)&&(i=Qe(i),n=Qe(n)),!Ne(e)&&ge(i)&&!ge(n))return l?!1:(i.value=n,!0)}const a=Ne(e)&&gw(t)?Number(t)<e.length:Je(e,t),o=Reflect.set(e,t,n,r);return e===Qe(r)&&(a?Ci(n,i)&&er(e,"set",t,n):er(e,"add",t,n)),o}deleteProperty(e,t){const n=Je(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&er(e,"delete",t,void 0),r}has(e,t){const n=Reflect.has(e,t);return(!ir(t)||!mS.has(t))&&ms(e,"has",t),n}ownKeys(e){return ms(e,"iterate",Ne(e)?"length":za),Reflect.ownKeys(e)}}class B0 extends gS{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const x0=new pS,T0=new B0,R0=new pS(!0);const Sw=s=>s,Km=s=>Reflect.getPrototypeOf(s);function Lf(s,e,t=!1,n=!1){s=s.__v_raw;const r=Qe(s),i=Qe(e);t||(Ci(e,i)&&ms(r,"get",e),ms(r,"get",i));const{has:a}=Km(r),o=n?Sw:t?Ew:af;if(a.call(r,e))return o(s.get(e));if(a.call(r,i))return o(s.get(i));s!==r&&s.get(e)}function Df(s,e=!1){const t=this.__v_raw,n=Qe(t),r=Qe(s);return e||(Ci(s,r)&&ms(n,"has",s),ms(n,"has",r)),s===r?t.has(s):t.has(s)||t.has(r)}function Uf(s,e=!1){return s=s.__v_raw,!e&&ms(Qe(s),"iterate",za),Reflect.get(s,"size",s)}function Vy(s){s=Qe(s);const e=Qe(this);return Km(e).has.call(e,s)||(e.add(s),er(e,"add",s,s)),this}function Py(s,e){e=Qe(e);const t=Qe(this),{has:n,get:r}=Km(t);let i=n.call(t,s);i||(s=Qe(s),i=n.call(t,s));const a=r.call(t,s);return t.set(s,e),i?Ci(e,a)&&er(t,"set",s,e):er(t,"add",s,e),this}function Ly(s){const e=Qe(this),{has:t,get:n}=Km(e);let r=t.call(e,s);r||(s=Qe(s),r=t.call(e,s)),n&&n.call(e,s);const i=e.delete(s);return r&&er(e,"delete",s,void 0),i}function Dy(){const s=Qe(this),e=s.size!==0,t=s.clear();return e&&er(s,"clear",void 0,void 0),t}function Mf(s,e){return function(n,r){const i=this,a=i.__v_raw,o=Qe(a),l=e?Sw:s?Ew:af;return!s&&ms(o,"iterate",za),a.forEach((c,u)=>n.call(r,l(c),l(u),i))}}function Hf(s,e,t){return function(...n){const r=this.__v_raw,i=Qe(r),a=nc(i),o=s==="entries"||s===Symbol.iterator&&a,l=s==="keys"&&a,c=r[s](...n),u=t?Sw:e?Ew:af;return!e&&ms(i,"iterate",l?ap:za),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:o?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function dr(s){return function(...e){return s==="delete"?!1:s==="clear"?void 0:this}}function O0(){const s={get(i){return Lf(this,i)},get size(){return Uf(this)},has:Df,add:Vy,set:Py,delete:Ly,clear:Dy,forEach:Mf(!1,!1)},e={get(i){return Lf(this,i,!1,!0)},get size(){return Uf(this)},has:Df,add:Vy,set:Py,delete:Ly,clear:Dy,forEach:Mf(!1,!0)},t={get(i){return Lf(this,i,!0)},get size(){return Uf(this,!0)},has(i){return Df.call(this,i,!0)},add:dr("add"),set:dr("set"),delete:dr("delete"),clear:dr("clear"),forEach:Mf(!0,!1)},n={get(i){return Lf(this,i,!0,!0)},get size(){return Uf(this,!0)},has(i){return Df.call(this,i,!0)},add:dr("add"),set:dr("set"),delete:dr("delete"),clear:dr("clear"),forEach:Mf(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=Hf(i,!1,!1),t[i]=Hf(i,!0,!1),e[i]=Hf(i,!1,!0),n[i]=Hf(i,!0,!0)}),[s,t,e,n]}const[V0,P0,L0,D0]=O0();function Aw(s,e){const t=e?s?D0:L0:s?P0:V0;return(n,r,i)=>r==="__v_isReactive"?!s:r==="__v_isReadonly"?s:r==="__v_raw"?n:Reflect.get(Je(t,r)&&r in n?t:n,r,i)}const U0={get:Aw(!1,!1)},M0={get:Aw(!1,!0)},H0={get:Aw(!0,!1)};const wS=new WeakMap,yS=new WeakMap,vS=new WeakMap,$0=new WeakMap;function F0(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function j0(s){return s.__v_skip||!Object.isExtensible(s)?0:F0(h0(s))}function Ni(s){return wc(s)?s:kw(s,!1,x0,U0,wS)}function bS(s){return kw(s,!1,R0,M0,yS)}function SS(s){return kw(s,!0,T0,H0,vS)}function kw(s,e,t,n,r){if(!nt(s)||s.__v_raw&&!(e&&s.__v_isReactive))return s;const i=r.get(s);if(i)return i;const a=j0(s);if(a===0)return s;const o=new Proxy(s,a===2?n:t);return r.set(s,o),o}function Yh(s){return wc(s)?Yh(s.__v_raw):!!(s&&s.__v_isReactive)}function wc(s){return!!(s&&s.__v_isReadonly)}function am(s){return!!(s&&s.__v_isShallow)}function AS(s){return s?!!s.__v_raw:!1}function Qe(s){const e=s&&s.__v_raw;return e?Qe(e):s}function K0(s){return Object.isExtensible(s)&&sS(s,"__v_skip",!0),s}const af=s=>nt(s)?Ni(s):s,Ew=s=>nt(s)?SS(s):s;class kS{constructor(e,t,n,r){this.getter=e,this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new yw(()=>e(this._value),()=>Xh(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=n}get value(){const e=Qe(this);return(!e._cacheable||e.effect.dirty)&&Ci(e._value,e._value=e.effect.run())&&Xh(e,4),Cw(e),e.effect._dirtyLevel>=2&&Xh(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function J0(s,e,t=!1){let n,r;const i=Te(s);return i?(n=s,r=Fs):(n=s.get,r=s.set),new kS(n,r,i||!r,t)}function Cw(s){var e;pi&&Qa&&(s=Qe(s),hS(Qa,(e=s.dep)!=null?e:s.dep=dS(()=>s.dep=void 0,s instanceof kS?s:void 0)))}function Xh(s,e=4,t){s=Qe(s);const n=s.dep;n&&fS(n,e)}function ge(s){return!!(s&&s.__v_isRef===!0)}function Fe(s){return ES(s,!1)}function op(s){return ES(s,!0)}function ES(s,e){return ge(s)?s:new W0(s,e)}class W0{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Qe(e),this._value=t?e:af(e)}get value(){return Cw(this),this._value}set value(e){const t=this.__v_isShallow||am(e)||wc(e);e=t?e:Qe(e),Ci(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:af(e),Xh(this,4))}}function ne(s){return ge(s)?s.value:s}const q0={get:(s,e,t)=>ne(Reflect.get(s,e,t)),set:(s,e,t,n)=>{const r=s[e];return ge(r)&&!ge(t)?(r.value=t,!0):Reflect.set(s,e,t,n)}};function CS(s){return Yh(s)?s:new Proxy(s,q0)}class G0{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:t,set:n}=e(()=>Cw(this),()=>Xh(this));this._get=t,this._set=n}get value(){return this._get()}set value(e){this._set(e)}}function Y0(s){return new G0(s)}class X0{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return C0(Qe(this._object),this._key)}}class Q0{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function NS(s,e,t){return ge(s)?s:Te(s)?new Q0(s):nt(s)&&arguments.length>1?z0(s,e,t):Fe(s)}function z0(s,e,t){const n=s[e];return ge(n)?n:new X0(s,e,t)}/**
* @vue/runtime-core v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function wi(s,e,t,n){try{return n?s(...n):s()}catch(r){Oc(r,e,t)}}function en(s,e,t,n){if(Te(s)){const r=wi(s,e,t,n);return r&&Zb(r)&&r.catch(i=>{Oc(i,e,t)}),r}if(Ne(s)){const r=[];for(let i=0;i<s.length;i++)r.push(en(s[i],e,t,n));return r}}function Oc(s,e,t,n=!0){const r=e?e.vnode:null;if(e){let i=e.parent;const a=e.proxy,o=`https://vuejs.org/error-reference/#runtime-${t}`;for(;i;){const c=i.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](s,a,o)===!1)return}i=i.parent}const l=e.appContext.config.errorHandler;if(l){_i(),wi(l,null,10,[s,a,o]),Bi();return}}Z0(s,t,r,n)}function Z0(s,e,t,n=!0){console.error(s)}let of=!1,lp=!1;const Xt=[];let pn=0;const ic=[];let ni=null,ja=0;const IS=Promise.resolve();let Nw=null;function Jm(s){const e=Nw||IS;return s?e.then(this?s.bind(this):s):e}function eE(s){let e=pn+1,t=Xt.length;for(;e<t;){const n=e+t>>>1,r=Xt[n],i=lf(r);i<s||i===s&&r.pre?e=n+1:t=n}return e}function Wm(s){(!Xt.length||!Xt.includes(s,of&&s.allowRecurse?pn+1:pn))&&(s.id==null?Xt.push(s):Xt.splice(eE(s.id),0,s),_S())}function _S(){!of&&!lp&&(lp=!0,Nw=IS.then(BS))}function tE(s){const e=Xt.indexOf(s);e>pn&&Xt.splice(e,1)}function cp(s){Ne(s)?ic.push(...s):(!ni||!ni.includes(s,s.allowRecurse?ja+1:ja))&&ic.push(s),_S()}function Uy(s,e,t=of?pn+1:0){for(;t<Xt.length;t++){const n=Xt[t];if(n&&n.pre){if(s&&n.id!==s.uid)continue;Xt.splice(t,1),t--,n()}}}function om(s){if(ic.length){const e=[...new Set(ic)].sort((t,n)=>lf(t)-lf(n));if(ic.length=0,ni){ni.push(...e);return}for(ni=e,ja=0;ja<ni.length;ja++)ni[ja]();ni=null,ja=0}}const lf=s=>s.id==null?1/0:s.id,sE=(s,e)=>{const t=lf(s)-lf(e);if(t===0){if(s.pre&&!e.pre)return-1;if(e.pre&&!s.pre)return 1}return t};function BS(s){lp=!1,of=!0,Xt.sort(sE);try{for(pn=0;pn<Xt.length;pn++){const e=Xt[pn];e&&e.active!==!1&&wi(e,null,14)}}finally{pn=0,Xt.length=0,om(),of=!1,Nw=null,(Xt.length||ic.length)&&BS()}}function nE(s,e,...t){if(s.isUnmounted)return;const n=s.vnode.props||at;let r=t;const i=e.startsWith("update:"),a=i&&e.slice(7);if(a&&a in n){const u=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:h}=n[u]||at;h&&(r=t.map(m=>kt(m)?m.trim():m)),f&&(r=t.map(np))}let o,l=n[o=fg(e)]||n[o=fg(En(e))];!l&&i&&(l=n[o=fg(Rc(e))]),l&&en(l,s,6,r);const c=n[o+"Once"];if(c){if(!s.emitted)s.emitted={};else if(s.emitted[o])return;s.emitted[o]=!0,en(c,s,6,r)}}function xS(s,e,t=!1){const n=e.emitsCache,r=n.get(s);if(r!==void 0)return r;const i=s.emits;let a={},o=!1;if(!Te(s)){const l=c=>{const u=xS(c,e,!0);u&&(o=!0,Ht(a,u))};!t&&e.mixins.length&&e.mixins.forEach(l),s.extends&&l(s.extends),s.mixins&&s.mixins.forEach(l)}return!i&&!o?(nt(s)&&n.set(s,null),null):(Ne(i)?i.forEach(l=>a[l]=null):Ht(a,i),nt(s)&&n.set(s,a),a)}function qm(s,e){return!s||!Ef(e)?!1:(e=e.slice(2).replace(/Once$/,""),Je(s,e[0].toLowerCase()+e.slice(1))||Je(s,Rc(e))||Je(s,e))}let Rt=null,Gm=null;function lm(s){const e=Rt;return Rt=s,Gm=s&&s.type.__scopeId||null,e}function GP(s){Gm=s}function YP(){Gm=null}function $t(s,e=Rt,t){if(!e||s._n)return s;const n=(...r)=>{n._d&&zy(-1);const i=lm(e);let a;try{a=s(...r)}finally{lm(i),n._d&&zy(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function mg(s){const{type:e,vnode:t,proxy:n,withProxy:r,propsOptions:[i],slots:a,attrs:o,emit:l,render:c,renderCache:u,props:f,data:h,setupState:m,ctx:S,inheritAttrs:A}=s,k=lm(s);let T,x;try{if(t.shapeFlag&4){const p=r||n,E=p;T=Ls(c.call(E,p,u,f,m,h,S)),x=o}else{const p=e;T=Ls(p.length>1?p(f,{attrs:o,slots:a,emit:l}):p(f,null)),x=e.props?o:iE(o)}}catch(p){Zh.length=0,Oc(p,s,1),T=ve(rn)}let y=T;if(x&&A!==!1){const p=Object.keys(x),{shapeFlag:E}=y;p.length&&E&7&&(i&&p.some(dw)&&(x=aE(x,i)),y=vc(y,x,!1,!0))}return t.dirs&&(y=vc(y,null,!1,!0),y.dirs=y.dirs?y.dirs.concat(t.dirs):t.dirs),t.transition&&(y.transition=t.transition),T=y,lm(k),T}function rE(s,e=!0){let t;for(let n=0;n<s.length;n++){const r=s[n];if(uf(r)){if(r.type!==rn||r.children==="v-if"){if(t)return;t=r}}else return}return t}const iE=s=>{let e;for(const t in s)(t==="class"||t==="style"||Ef(t))&&((e||(e={}))[t]=s[t]);return e},aE=(s,e)=>{const t={};for(const n in s)(!dw(n)||!(n.slice(9)in e))&&(t[n]=s[n]);return t};function oE(s,e,t){const{props:n,children:r,component:i}=s,{props:a,children:o,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return n?My(n,a,c):!!a;if(l&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(a[h]!==n[h]&&!qm(c,h))return!0}}}else return(r||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?My(n,a,c):!0:!!a;return!1}function My(s,e,t){const n=Object.keys(e);if(n.length!==Object.keys(s).length)return!0;for(let r=0;r<n.length;r++){const i=n[r];if(e[i]!==s[i]&&!qm(t,i))return!0}return!1}function Iw({vnode:s,parent:e},t){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===s&&(n.el=s.el),n===s)(s=e.vnode).el=t,e=e.parent;else break}}const TS="components";function XP(s,e){return OS(TS,s,!0,e)||s}const RS=Symbol.for("v-ndc");function lE(s){return kt(s)?OS(TS,s,!1)||s:s||RS}function OS(s,e,t=!0,n=!1){const r=Rt||Pt;if(r){const i=r.type;{const o=nC(i,!1);if(o&&(o===e||o===En(e)||o===Fm(En(e))))return i}const a=Hy(r[s]||i[s],e)||Hy(r.appContext[s],e);return!a&&n?i:a}}function Hy(s,e){return s&&(s[e]||s[En(e)]||s[Fm(En(e))])}const cE=s=>s.__isSuspense;let up=0;const uE={name:"Suspense",__isSuspense:!0,process(s,e,t,n,r,i,a,o,l,c){if(s==null)fE(e,t,n,r,i,a,o,l,c);else{if(i&&i.deps>0&&!s.suspense.isInFallback){e.suspense=s.suspense,e.suspense.vnode=e,e.el=s.el;return}dE(s,e,t,n,r,a,o,l,c)}},hydrate:mE,create:_w,normalize:gE},hE=uE;function cf(s,e){const t=s.props&&s.props[e];Te(t)&&t()}function fE(s,e,t,n,r,i,a,o,l){const{p:c,o:{createElement:u}}=l,f=u("div"),h=s.suspense=_w(s,r,n,e,f,t,i,a,o,l);c(null,h.pendingBranch=s.ssContent,f,null,n,h,i,a),h.deps>0?(cf(s,"onPending"),cf(s,"onFallback"),c(null,s.ssFallback,e,t,n,null,i,a),ac(h,s.ssFallback)):h.resolve(!1,!0)}function dE(s,e,t,n,r,i,a,o,{p:l,um:c,o:{createElement:u}}){const f=e.suspense=s.suspense;f.vnode=e,e.el=s.el;const h=e.ssContent,m=e.ssFallback,{activeBranch:S,pendingBranch:A,isInFallback:k,isHydrating:T}=f;if(A)f.pendingBranch=h,ci(h,A)?(l(A,h,f.hiddenContainer,null,r,f,i,a,o),f.deps<=0?f.resolve():k&&(T||(l(S,m,t,n,r,null,i,a,o),ac(f,m)))):(f.pendingId=up++,T?(f.isHydrating=!1,f.activeBranch=A):c(A,r,f),f.deps=0,f.effects.length=0,f.hiddenContainer=u("div"),k?(l(null,h,f.hiddenContainer,null,r,f,i,a,o),f.deps<=0?f.resolve():(l(S,m,t,n,r,null,i,a,o),ac(f,m))):S&&ci(h,S)?(l(S,h,t,n,r,f,i,a,o),f.resolve(!0)):(l(null,h,f.hiddenContainer,null,r,f,i,a,o),f.deps<=0&&f.resolve()));else if(S&&ci(h,S))l(S,h,t,n,r,f,i,a,o),ac(f,h);else if(cf(e,"onPending"),f.pendingBranch=h,h.shapeFlag&512?f.pendingId=h.component.suspenseId:f.pendingId=up++,l(null,h,f.hiddenContainer,null,r,f,i,a,o),f.deps<=0)f.resolve();else{const{timeout:x,pendingId:y}=f;x>0?setTimeout(()=>{f.pendingId===y&&f.fallback(m)},x):x===0&&f.fallback(m)}}function _w(s,e,t,n,r,i,a,o,l,c,u=!1){const{p:f,m:h,um:m,n:S,o:{parentNode:A,remove:k}}=c;let T;const x=pE(s);x&&e&&e.pendingBranch&&(T=e.pendingId,e.deps++);const y=s.props?m0(s.props.timeout):void 0,p=i,E={vnode:s,parent:e,parentComponent:t,namespace:a,container:n,hiddenContainer:r,deps:0,pendingId:up++,timeout:typeof y=="number"?y:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(N=!1,L=!1){const{vnode:M,activeBranch:F,pendingBranch:se,pendingId:ce,effects:ee,parentComponent:fe,container:Ee}=E;let ye=!1;E.isHydrating?E.isHydrating=!1:N||(ye=F&&se.transition&&se.transition.mode==="out-in",ye&&(F.transition.afterLeave=()=>{ce===E.pendingId&&(h(se,Ee,i===p?S(F):i,0),cp(ee))}),F&&(A(F.el)!==E.hiddenContainer&&(i=S(F)),m(F,fe,E,!0)),ye||h(se,Ee,i,0)),ac(E,se),E.pendingBranch=null,E.isInFallback=!1;let ie=E.parent,te=!1;for(;ie;){if(ie.pendingBranch){ie.effects.push(...ee),te=!0;break}ie=ie.parent}!te&&!ye&&cp(ee),E.effects=[],x&&e&&e.pendingBranch&&T===e.pendingId&&(e.deps--,e.deps===0&&!L&&e.resolve()),cf(M,"onResolve")},fallback(N){if(!E.pendingBranch)return;const{vnode:L,activeBranch:M,parentComponent:F,container:se,namespace:ce}=E;cf(L,"onFallback");const ee=S(M),fe=()=>{E.isInFallback&&(f(null,N,se,ee,F,null,ce,o,l),ac(E,N))},Ee=N.transition&&N.transition.mode==="out-in";Ee&&(M.transition.afterLeave=fe),E.isInFallback=!0,m(M,F,null,!0),Ee||fe()},move(N,L,M){E.activeBranch&&h(E.activeBranch,N,L,M),E.container=N},next(){return E.activeBranch&&S(E.activeBranch)},registerDep(N,L){const M=!!E.pendingBranch;M&&E.deps++;const F=N.vnode.el;N.asyncDep.catch(se=>{Oc(se,N,0)}).then(se=>{if(N.isUnmounted||E.isUnmounted||E.pendingId!==N.suspenseId)return;N.asyncResolved=!0;const{vnode:ce}=N;pp(N,se,!1),F&&(ce.el=F);const ee=!F&&N.subTree.el;L(N,ce,A(F||N.subTree.el),F?null:S(N.subTree),E,a,l),ee&&k(ee),Iw(N,ce.el),M&&--E.deps===0&&E.resolve()})},unmount(N,L){E.isUnmounted=!0,E.activeBranch&&m(E.activeBranch,t,N,L),E.pendingBranch&&m(E.pendingBranch,t,N,L)}};return E}function mE(s,e,t,n,r,i,a,o,l){const c=e.suspense=_w(e,n,t,s.parentNode,document.createElement("div"),null,r,i,a,o,!0),u=l(s,c.pendingBranch=e.ssContent,t,c,i,a);return c.deps===0&&c.resolve(!1,!0),u}function gE(s){const{shapeFlag:e,children:t}=s,n=e&32;s.ssContent=$y(n?t.default:t),s.ssFallback=n?$y(t.fallback):ve(rn)}function $y(s){let e;if(Te(s)){const t=yc&&s._c;t&&(s._d=!1,Ke()),s=s(),t&&(s._d=!0,e=js,r1())}return Ne(s)&&(s=rE(s)),s=Ls(s),e&&!s.dynamicChildren&&(s.dynamicChildren=e.filter(t=>t!==s)),s}function VS(s,e){e&&e.pendingBranch?Ne(s)?e.effects.push(...s):e.effects.push(s):cp(s)}function ac(s,e){s.activeBranch=e;const{vnode:t,parentComponent:n}=s;let r=e.el;for(;!r&&e.component;)e=e.component.subTree,r=e.el;t.el=r,n&&n.subTree===t&&(n.vnode.el=r,Iw(n,r))}function pE(s){const e=s.props&&s.props.suspensible;return e!=null&&e!==!1}const wE=Symbol.for("v-scx"),yE=()=>Za(wE);function vE(s,e){return Bw(s,null,e)}const $f={};function tn(s,e,t){return Bw(s,e,t)}function Bw(s,e,{immediate:t,deep:n,flush:r,once:i,onTrack:a,onTrigger:o}=at){if(e&&i){const N=e;e=(...L)=>{N(...L),E()}}const l=Pt,c=N=>n===!0?N:Ga(N,n===!1?1:void 0);let u,f=!1,h=!1;if(ge(s)?(u=()=>s.value,f=am(s)):Yh(s)?(u=()=>c(s),f=!0):Ne(s)?(h=!0,f=s.some(N=>Yh(N)||am(N)),u=()=>s.map(N=>{if(ge(N))return N.value;if(Yh(N))return c(N);if(Te(N))return wi(N,l,2)})):Te(s)?e?u=()=>wi(s,l,2):u=()=>(m&&m(),en(s,l,3,[S])):u=Fs,e&&n){const N=u;u=()=>Ga(N())}let m,S=N=>{m=y.onStop=()=>{wi(N,l,4),m=y.onStop=void 0}},A;if(_f)if(S=Fs,e?t&&en(e,l,3,[u(),h?[]:void 0,S]):u(),r==="sync"){const N=yE();A=N.__watcherHandles||(N.__watcherHandles=[])}else return Fs;let k=h?new Array(s.length).fill($f):$f;const T=()=>{if(!(!y.active||!y.dirty))if(e){const N=y.run();(n||f||(h?N.some((L,M)=>Ci(L,k[M])):Ci(N,k)))&&(m&&m(),en(e,l,3,[N,k===$f?void 0:h&&k[0]===$f?[]:k,S]),k=N)}else y.run()};T.allowRecurse=!!e;let x;r==="sync"?x=T:r==="post"?x=()=>cs(T,l&&l.suspense):(T.pre=!0,l&&(T.id=l.uid),x=()=>Wm(T));const y=new yw(u,Fs,x),p=ww(),E=()=>{y.stop(),p&&mw(p.effects,y)};return e?t?T():k=y.run():r==="post"?cs(y.run.bind(y),l&&l.suspense):y.run(),A&&A.push(E),E}function bE(s,e,t){const n=this.proxy,r=kt(s)?s.includes(".")?PS(n,s):()=>n[s]:s.bind(n,n);let i;Te(e)?i=e:(i=e.handler,t=e);const a=If(this),o=Bw(r,i.bind(n),t);return a(),o}function PS(s,e){const t=e.split(".");return()=>{let n=s;for(let r=0;r<t.length&&n;r++)n=n[t[r]];return n}}function Ga(s,e=1/0,t){if(e<=0||!nt(s)||s.__v_skip||(t=t||new Set,t.has(s)))return s;if(t.add(s),e--,ge(s))Ga(s.value,e,t);else if(Ne(s))for(let n=0;n<s.length;n++)Ga(s[n],e,t);else if(Hm(s)||nc(s))s.forEach(n=>{Ga(n,e,t)});else if(tS(s))for(const n in s)Ga(s[n],e,t);return s}function os(s,e){if(Rt===null)return s;const t=Xm(Rt)||Rt.proxy,n=s.dirs||(s.dirs=[]);for(let r=0;r<e.length;r++){let[i,a,o,l=at]=e[r];i&&(Te(i)&&(i={mounted:i,updated:i}),i.deep&&Ga(a),n.push({dir:i,instance:t,value:a,oldValue:void 0,arg:o,modifiers:l}))}return s}function mn(s,e,t,n){const r=s.dirs,i=e&&e.dirs;for(let a=0;a<r.length;a++){const o=r[a];i&&(o.oldValue=i[a].value);let l=o.dir[n];l&&(_i(),en(l,t,8,[s.el,o,s,e]),Bi())}}/*! #__NO_SIDE_EFFECTS__ */function or(s,e){return Te(s)?Ht({name:s.name},e,{setup:s}):s}const oc=s=>!!s.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Fy(s){Te(s)&&(s={loader:s});const{loader:e,loadingComponent:t,errorComponent:n,delay:r=200,timeout:i,suspensible:a=!0,onError:o}=s;let l=null,c,u=0;const f=()=>(u++,l=null,h()),h=()=>{let m;return l||(m=l=e().catch(S=>{if(S=S instanceof Error?S:new Error(String(S)),o)return new Promise((A,k)=>{o(S,()=>A(f()),()=>k(S),u+1)});throw S}).then(S=>m!==l&&l?l:(S&&(S.__esModule||S[Symbol.toStringTag]==="Module")&&(S=S.default),c=S,S)))};return or({name:"AsyncComponentWrapper",__asyncLoader:h,get __asyncResolved(){return c},setup(){const m=Pt;if(c)return()=>gg(c,m);const S=x=>{l=null,Oc(x,m,13,!n)};if(a&&m.suspense||_f)return h().then(x=>()=>gg(x,m)).catch(x=>(S(x),()=>n?ve(n,{error:x}):null));const A=Fe(!1),k=Fe(),T=Fe(!!r);return r&&setTimeout(()=>{T.value=!1},r),i!=null&&setTimeout(()=>{if(!A.value&&!k.value){const x=new Error(`Async component timed out after ${i}ms.`);S(x),k.value=x}},i),h().then(()=>{A.value=!0,m.parent&&xw(m.parent.vnode)&&(m.parent.effect.dirty=!0,Wm(m.parent.update))}).catch(x=>{S(x),k.value=x}),()=>{if(A.value&&c)return gg(c,m);if(k.value&&n)return ve(n,{error:k.value});if(t&&!T.value)return ve(t)}}})}function gg(s,e){const{ref:t,props:n,children:r,ce:i}=e.vnode,a=ve(s,n,r);return a.ref=t,a.ce=i,delete e.vnode.ce,a}const xw=s=>s.type.__isKeepAlive;function LS(s,e){US(s,"a",e)}function DS(s,e){US(s,"da",e)}function US(s,e,t=Pt){const n=s.__wdc||(s.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return s()});if(Ym(e,n,t),t){let r=t.parent;for(;r&&r.parent;)xw(r.parent.vnode)&&SE(n,e,t,r),r=r.parent}}function SE(s,e,t,n){const r=Ym(e,s,n,!0);Rw(()=>{mw(n[e],r)},t)}function Ym(s,e,t=Pt,n=!1){if(t){const r=t[s]||(t[s]=[]),i=e.__weh||(e.__weh=(...a)=>{if(t.isUnmounted)return;_i();const o=If(t),l=en(e,t,s,a);return o(),Bi(),l});return n?r.unshift(i):r.push(i),i}}const lr=s=>(e,t=Pt)=>(!_f||s==="sp")&&Ym(s,(...n)=>e(...n),t),AE=lr("bm"),Tw=lr("m"),kE=lr("bu"),EE=lr("u"),MS=lr("bum"),Rw=lr("um"),CE=lr("sp"),NE=lr("rtg"),IE=lr("rtc");function HS(s,e=Pt){Ym("ec",s,e)}function jy(s,e,t,n){let r;const i=t;if(Ne(s)||kt(s)){r=new Array(s.length);for(let a=0,o=s.length;a<o;a++)r[a]=e(s[a],a,void 0,i)}else if(typeof s=="number"){r=new Array(s);for(let a=0;a<s;a++)r[a]=e(a+1,a,void 0,i)}else if(nt(s))if(s[Symbol.iterator])r=Array.from(s,(a,o)=>e(a,o,void 0,i));else{const a=Object.keys(s);r=new Array(a.length);for(let o=0,l=a.length;o<l;o++){const c=a[o];r[o]=e(s[c],c,o,i)}}else r=[];return r}function Ow(s,e,t={},n,r){if(Rt.isCE||Rt.parent&&oc(Rt.parent)&&Rt.parent.isCE)return ve("slot",t,n);let i=s[e];i&&i._c&&(i._d=!1),Ke();const a=i&&$S(i(t)),o=wn(Vt,{key:t.key||a&&a.key||`_${e}`},a||[],a&&s._===1?64:-2);return o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),i&&i._c&&(i._d=!0),o}function $S(s){return s.some(e=>uf(e)?!(e.type===rn||e.type===Vt&&!$S(e.children)):!0)?s:null}const hp=s=>s?c1(s)?Xm(s)||s.proxy:hp(s.parent):null,Qh=Ht(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>hp(s.parent),$root:s=>hp(s.root),$emit:s=>s.emit,$options:s=>Vw(s),$forceUpdate:s=>s.f||(s.f=()=>{s.effect.dirty=!0,Wm(s.update)}),$nextTick:s=>s.n||(s.n=Jm.bind(s.proxy)),$watch:s=>bE.bind(s)}),pg=(s,e)=>s!==at&&!s.__isScriptSetup&&Je(s,e),_E={get({_:s},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:n,data:r,props:i,accessCache:a,type:o,appContext:l}=s;let c;if(e[0]!=="$"){const m=a[e];if(m!==void 0)switch(m){case 1:return n[e];case 2:return r[e];case 4:return t[e];case 3:return i[e]}else{if(pg(n,e))return a[e]=1,n[e];if(r!==at&&Je(r,e))return a[e]=2,r[e];if((c=s.propsOptions[0])&&Je(c,e))return a[e]=3,i[e];if(t!==at&&Je(t,e))return a[e]=4,t[e];fp&&(a[e]=0)}}const u=Qh[e];let f,h;if(u)return e==="$attrs"&&ms(s.attrs,"get",""),u(s);if((f=o.__cssModules)&&(f=f[e]))return f;if(t!==at&&Je(t,e))return a[e]=4,t[e];if(h=l.config.globalProperties,Je(h,e))return h[e]},set({_:s},e,t){const{data:n,setupState:r,ctx:i}=s;return pg(r,e)?(r[e]=t,!0):n!==at&&Je(n,e)?(n[e]=t,!0):Je(s.props,e)||e[0]==="$"&&e.slice(1)in s?!1:(i[e]=t,!0)},has({_:{data:s,setupState:e,accessCache:t,ctx:n,appContext:r,propsOptions:i}},a){let o;return!!t[a]||s!==at&&Je(s,a)||pg(e,a)||(o=i[0])&&Je(o,a)||Je(n,a)||Je(Qh,a)||Je(r.config.globalProperties,a)},defineProperty(s,e,t){return t.get!=null?s._.accessCache[e]=0:Je(t,"value")&&this.set(s,e,t.value,null),Reflect.defineProperty(s,e,t)}};function Ky(s){return Ne(s)?s.reduce((e,t)=>(e[t]=null,e),{}):s}let fp=!0;function BE(s){const e=Vw(s),t=s.proxy,n=s.ctx;fp=!1,e.beforeCreate&&Jy(e.beforeCreate,s,"bc");const{data:r,computed:i,methods:a,watch:o,provide:l,inject:c,created:u,beforeMount:f,mounted:h,beforeUpdate:m,updated:S,activated:A,deactivated:k,beforeDestroy:T,beforeUnmount:x,destroyed:y,unmounted:p,render:E,renderTracked:N,renderTriggered:L,errorCaptured:M,serverPrefetch:F,expose:se,inheritAttrs:ce,components:ee,directives:fe,filters:Ee}=e;if(c&&xE(c,n,null),a)for(const te in a){const ae=a[te];Te(ae)&&(n[te]=ae.bind(t))}if(r){const te=r.call(t,t);nt(te)&&(s.data=Ni(te))}if(fp=!0,i)for(const te in i){const ae=i[te],Re=Te(ae)?ae.bind(t,t):Te(ae.get)?ae.get.bind(t,t):Fs,oe=!Te(ae)&&Te(ae.set)?ae.set.bind(t):Fs,de=jt({get:Re,set:oe});Object.defineProperty(n,te,{enumerable:!0,configurable:!0,get:()=>de.value,set:Y=>de.value=Y})}if(o)for(const te in o)FS(o[te],n,t,te);if(l){const te=Te(l)?l.call(t):l;Reflect.ownKeys(te).forEach(ae=>{KS(ae,te[ae])})}u&&Jy(u,s,"c");function ie(te,ae){Ne(ae)?ae.forEach(Re=>te(Re.bind(t))):ae&&te(ae.bind(t))}if(ie(AE,f),ie(Tw,h),ie(kE,m),ie(EE,S),ie(LS,A),ie(DS,k),ie(HS,M),ie(IE,N),ie(NE,L),ie(MS,x),ie(Rw,p),ie(CE,F),Ne(se))if(se.length){const te=s.exposed||(s.exposed={});se.forEach(ae=>{Object.defineProperty(te,ae,{get:()=>t[ae],set:Re=>t[ae]=Re})})}else s.exposed||(s.exposed={});E&&s.render===Fs&&(s.render=E),ce!=null&&(s.inheritAttrs=ce),ee&&(s.components=ee),fe&&(s.directives=fe)}function xE(s,e,t=Fs){Ne(s)&&(s=dp(s));for(const n in s){const r=s[n];let i;nt(r)?"default"in r?i=Za(r.from||n,r.default,!0):i=Za(r.from||n):i=Za(r),ge(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[n]=i}}function Jy(s,e,t){en(Ne(s)?s.map(n=>n.bind(e.proxy)):s.bind(e.proxy),e,t)}function FS(s,e,t,n){const r=n.includes(".")?PS(t,n):()=>t[n];if(kt(s)){const i=e[s];Te(i)&&tn(r,i)}else if(Te(s))tn(r,s.bind(t));else if(nt(s))if(Ne(s))s.forEach(i=>FS(i,e,t,n));else{const i=Te(s.handler)?s.handler.bind(t):e[s.handler];Te(i)&&tn(r,i,s)}}function Vw(s){const e=s.type,{mixins:t,extends:n}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:a}}=s.appContext,o=i.get(e);let l;return o?l=o:!r.length&&!t&&!n?l=e:(l={},r.length&&r.forEach(c=>cm(l,c,a,!0)),cm(l,e,a)),nt(e)&&i.set(e,l),l}function cm(s,e,t,n=!1){const{mixins:r,extends:i}=e;i&&cm(s,i,t,!0),r&&r.forEach(a=>cm(s,a,t,!0));for(const a in e)if(!(n&&a==="expose")){const o=TE[a]||t&&t[a];s[a]=o?o(s[a],e[a]):e[a]}return s}const TE={data:Wy,props:qy,emits:qy,methods:Zc,computed:Zc,beforeCreate:Qt,created:Qt,beforeMount:Qt,mounted:Qt,beforeUpdate:Qt,updated:Qt,beforeDestroy:Qt,beforeUnmount:Qt,destroyed:Qt,unmounted:Qt,activated:Qt,deactivated:Qt,errorCaptured:Qt,serverPrefetch:Qt,components:Zc,directives:Zc,watch:OE,provide:Wy,inject:RE};function Wy(s,e){return e?s?function(){return Ht(Te(s)?s.call(this,this):s,Te(e)?e.call(this,this):e)}:e:s}function RE(s,e){return Zc(dp(s),dp(e))}function dp(s){if(Ne(s)){const e={};for(let t=0;t<s.length;t++)e[s[t]]=s[t];return e}return s}function Qt(s,e){return s?[...new Set([].concat(s,e))]:e}function Zc(s,e){return s?Ht(Object.create(null),s,e):e}function qy(s,e){return s?Ne(s)&&Ne(e)?[...new Set([...s,...e])]:Ht(Object.create(null),Ky(s),Ky(e??{})):e}function OE(s,e){if(!s)return e;if(!e)return s;const t=Ht(Object.create(null),s);for(const n in e)t[n]=Qt(s[n],e[n]);return t}function jS(){return{app:null,config:{isNativeTag:c0,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let VE=0;function PE(s,e){return function(n,r=null){Te(n)||(n=Ht({},n)),r!=null&&!nt(r)&&(r=null);const i=jS(),a=new WeakSet;let o=!1;const l=i.app={_uid:VE++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:h1,get config(){return i.config},set config(c){},use(c,...u){return a.has(c)||(c&&Te(c.install)?(a.add(c),c.install(l,...u)):Te(c)&&(a.add(c),c(l,...u))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,u){return u?(i.components[c]=u,l):i.components[c]},directive(c,u){return u?(i.directives[c]=u,l):i.directives[c]},mount(c,u,f){if(!o){const h=ve(n,r);return h.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),u&&e?e(h,c):s(h,c,f),o=!0,l._container=c,c.__vue_app__=l,Xm(h.component)||h.component.proxy}},unmount(){o&&(s(null,l._container),delete l._container.__vue_app__)},provide(c,u){return i.provides[c]=u,l},runWithContext(c){const u=lc;lc=l;try{return c()}finally{lc=u}}};return l}}let lc=null;function KS(s,e){if(Pt){let t=Pt.provides;const n=Pt.parent&&Pt.parent.provides;n===t&&(t=Pt.provides=Object.create(n)),t[s]=e}}function Za(s,e,t=!1){const n=Pt||Rt;if(n||lc){const r=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:lc._context.provides;if(r&&s in r)return r[s];if(arguments.length>1)return t&&Te(e)?e.call(n&&n.proxy):e}}function JS(){return!!(Pt||Rt||lc)}const WS={},qS=()=>Object.create(WS),GS=s=>Object.getPrototypeOf(s)===WS;function LE(s,e,t,n=!1){const r={},i=qS();s.propsDefaults=Object.create(null),YS(s,e,r,i);for(const a in s.propsOptions[0])a in r||(r[a]=void 0);t?s.props=n?r:bS(r):s.type.props?s.props=r:s.props=i,s.attrs=i}function DE(s,e,t,n){const{props:r,attrs:i,vnode:{patchFlag:a}}=s,o=Qe(r),[l]=s.propsOptions;let c=!1;if((n||a>0)&&!(a&16)){if(a&8){const u=s.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(qm(s.emitsOptions,h))continue;const m=e[h];if(l)if(Je(i,h))m!==i[h]&&(i[h]=m,c=!0);else{const S=En(h);r[S]=mp(l,o,S,m,s,!1)}else m!==i[h]&&(i[h]=m,c=!0)}}}else{YS(s,e,r,i)&&(c=!0);let u;for(const f in o)(!e||!Je(e,f)&&((u=Rc(f))===f||!Je(e,u)))&&(l?t&&(t[f]!==void 0||t[u]!==void 0)&&(r[f]=mp(l,o,f,void 0,s,!0)):delete r[f]);if(i!==o)for(const f in i)(!e||!Je(e,f))&&(delete i[f],c=!0)}c&&er(s.attrs,"set","")}function YS(s,e,t,n){const[r,i]=s.propsOptions;let a=!1,o;if(e)for(let l in e){if(rc(l))continue;const c=e[l];let u;r&&Je(r,u=En(l))?!i||!i.includes(u)?t[u]=c:(o||(o={}))[u]=c:qm(s.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,a=!0)}if(i){const l=Qe(t),c=o||at;for(let u=0;u<i.length;u++){const f=i[u];t[f]=mp(r,l,f,c[f],s,!Je(c,f))}}return a}function mp(s,e,t,n,r,i){const a=s[t];if(a!=null){const o=Je(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Te(l)){const{propsDefaults:c}=r;if(t in c)n=c[t];else{const u=If(r);n=c[t]=l.call(null,e),u()}}else n=l}a[0]&&(i&&!o?n=!1:a[1]&&(n===""||n===Rc(t))&&(n=!0))}return n}function XS(s,e,t=!1){const n=e.propsCache,r=n.get(s);if(r)return r;const i=s.props,a={},o=[];let l=!1;if(!Te(s)){const u=f=>{l=!0;const[h,m]=XS(f,e,!0);Ht(a,h),m&&o.push(...m)};!t&&e.mixins.length&&e.mixins.forEach(u),s.extends&&u(s.extends),s.mixins&&s.mixins.forEach(u)}if(!i&&!l)return nt(s)&&n.set(s,sc),sc;if(Ne(i))for(let u=0;u<i.length;u++){const f=En(i[u]);Gy(f)&&(a[f]=at)}else if(i)for(const u in i){const f=En(u);if(Gy(f)){const h=i[u],m=a[f]=Ne(h)||Te(h)?{type:h}:Ht({},h);if(m){const S=Qy(Boolean,m.type),A=Qy(String,m.type);m[0]=S>-1,m[1]=A<0||S<A,(S>-1||Je(m,"default"))&&o.push(f)}}}const c=[a,o];return nt(s)&&n.set(s,c),c}function Gy(s){return s[0]!=="$"&&!rc(s)}function Yy(s){return s===null?"null":typeof s=="function"?s.name||"":typeof s=="object"&&s.constructor&&s.constructor.name||""}function Xy(s,e){return Yy(s)===Yy(e)}function Qy(s,e){return Ne(e)?e.findIndex(t=>Xy(t,s)):Te(e)&&Xy(e,s)?0:-1}const QS=s=>s[0]==="_"||s==="$stable",Pw=s=>Ne(s)?s.map(Ls):[Ls(s)],UE=(s,e,t)=>{if(e._n)return e;const n=$t((...r)=>Pw(e(...r)),t);return n._c=!1,n},zS=(s,e,t)=>{const n=s._ctx;for(const r in s){if(QS(r))continue;const i=s[r];if(Te(i))e[r]=UE(r,i,n);else if(i!=null){const a=Pw(i);e[r]=()=>a}}},ZS=(s,e)=>{const t=Pw(e);s.slots.default=()=>t},ME=(s,e)=>{const t=s.slots=qS();if(s.vnode.shapeFlag&32){const n=e._;n?(Ht(t,e),sS(t,"_",n,!0)):zS(e,t)}else e&&ZS(s,e)},HE=(s,e,t)=>{const{vnode:n,slots:r}=s;let i=!0,a=at;if(n.shapeFlag&32){const o=e._;o?t&&o===1?i=!1:(Ht(r,e),!t&&o===1&&delete r._):(i=!e.$stable,zS(e,r)),a=e}else e&&(ZS(s,e),a={default:1});if(i)for(const o in r)!QS(o)&&a[o]==null&&delete r[o]};function um(s,e,t,n,r=!1){if(Ne(s)){s.forEach((h,m)=>um(h,e&&(Ne(e)?e[m]:e),t,n,r));return}if(oc(n)&&!r)return;const i=n.shapeFlag&4?Xm(n.component)||n.component.proxy:n.el,a=r?null:i,{i:o,r:l}=s,c=e&&e.r,u=o.refs===at?o.refs={}:o.refs,f=o.setupState;if(c!=null&&c!==l&&(kt(c)?(u[c]=null,Je(f,c)&&(f[c]=null)):ge(c)&&(c.value=null)),Te(l))wi(l,o,12,[a,u]);else{const h=kt(l),m=ge(l);if(h||m){const S=()=>{if(s.f){const A=h?Je(f,l)?f[l]:u[l]:l.value;r?Ne(A)&&mw(A,i):Ne(A)?A.includes(i)||A.push(i):h?(u[l]=[i],Je(f,l)&&(f[l]=u[l])):(l.value=[i],s.k&&(u[s.k]=l.value))}else h?(u[l]=a,Je(f,l)&&(f[l]=a)):m&&(l.value=a,s.k&&(u[s.k]=a))};a?(S.id=-1,cs(S,t)):S()}}}let mr=!1;const $E=s=>s.namespaceURI.includes("svg")&&s.tagName!=="foreignObject",FE=s=>s.namespaceURI.includes("MathML"),Ff=s=>{if($E(s))return"svg";if(FE(s))return"mathml"},jf=s=>s.nodeType===8;function jE(s){const{mt:e,p:t,o:{patchProp:n,createText:r,nextSibling:i,parentNode:a,remove:o,insert:l,createComment:c}}=s,u=(y,p)=>{if(!p.hasChildNodes()){t(null,y,p),om(),p._vnode=y;return}mr=!1,f(p.firstChild,y,null,null,null),om(),p._vnode=y,mr&&console.error("Hydration completed but contains mismatches.")},f=(y,p,E,N,L,M=!1)=>{M=M||!!p.dynamicChildren;const F=jf(y)&&y.data==="[",se=()=>A(y,p,E,N,L,F),{type:ce,ref:ee,shapeFlag:fe,patchFlag:Ee}=p;let ye=y.nodeType;p.el=y,Ee===-2&&(M=!1,p.dynamicChildren=null);let ie=null;switch(ce){case co:ye!==3?p.children===""?(l(p.el=r(""),a(y),y),ie=y):ie=se():(y.data!==p.children&&(mr=!0,y.data=p.children),ie=i(y));break;case rn:x(y)?(ie=i(y),T(p.el=y.content.firstChild,y,E)):ye!==8||F?ie=se():ie=i(y);break;case zh:if(F&&(y=i(y),ye=y.nodeType),ye===1||ye===3){ie=y;const te=!p.children.length;for(let ae=0;ae<p.staticCount;ae++)te&&(p.children+=ie.nodeType===1?ie.outerHTML:ie.data),ae===p.staticCount-1&&(p.anchor=ie),ie=i(ie);return F?i(ie):ie}else se();break;case Vt:F?ie=S(y,p,E,N,L,M):ie=se();break;default:if(fe&1)(ye!==1||p.type.toLowerCase()!==y.tagName.toLowerCase())&&!x(y)?ie=se():ie=h(y,p,E,N,L,M);else if(fe&6){p.slotScopeIds=L;const te=a(y);if(F?ie=k(y):jf(y)&&y.data==="teleport start"?ie=k(y,y.data,"teleport end"):ie=i(y),e(p,te,null,E,N,Ff(te),M),oc(p)){let ae;F?(ae=ve(Vt),ae.anchor=ie?ie.previousSibling:te.lastChild):ae=y.nodeType===3?De(""):ve("div"),ae.el=y,p.component.subTree=ae}}else fe&64?ye!==8?ie=se():ie=p.type.hydrate(y,p,E,N,L,M,s,m):fe&128&&(ie=p.type.hydrate(y,p,E,N,Ff(a(y)),L,M,s,f))}return ee!=null&&um(ee,null,N,p),ie},h=(y,p,E,N,L,M)=>{M=M||!!p.dynamicChildren;const{type:F,props:se,patchFlag:ce,shapeFlag:ee,dirs:fe,transition:Ee}=p,ye=F==="input"||F==="option";if(ye||ce!==-1){fe&&mn(p,null,E,"created");let ie=!1;if(x(y)){ie=t1(N,Ee)&&E&&E.vnode.props&&E.vnode.props.appear;const ae=y.content.firstChild;ie&&Ee.beforeEnter(ae),T(ae,y,E),p.el=y=ae}if(ee&16&&!(se&&(se.innerHTML||se.textContent))){let ae=m(y.firstChild,p,y,E,N,L,M);for(;ae;){mr=!0;const Re=ae;ae=ae.nextSibling,o(Re)}}else ee&8&&y.textContent!==p.children&&(mr=!0,y.textContent=p.children);if(se)if(ye||!M||ce&48)for(const ae in se)(ye&&(ae.endsWith("value")||ae==="indeterminate")||Ef(ae)&&!rc(ae)||ae[0]===".")&&n(y,ae,null,se[ae],void 0,void 0,E);else se.onClick&&n(y,"onClick",null,se.onClick,void 0,void 0,E);let te;(te=se&&se.onVnodeBeforeMount)&&Os(te,E,p),fe&&mn(p,null,E,"beforeMount"),((te=se&&se.onVnodeMounted)||fe||ie)&&VS(()=>{te&&Os(te,E,p),ie&&Ee.enter(y),fe&&mn(p,null,E,"mounted")},N)}return y.nextSibling},m=(y,p,E,N,L,M,F)=>{F=F||!!p.dynamicChildren;const se=p.children,ce=se.length;for(let ee=0;ee<ce;ee++){const fe=F?se[ee]:se[ee]=Ls(se[ee]);if(y)y=f(y,fe,N,L,M,F);else{if(fe.type===co&&!fe.children)continue;mr=!0,t(null,fe,E,null,N,L,Ff(E),M)}}return y},S=(y,p,E,N,L,M)=>{const{slotScopeIds:F}=p;F&&(L=L?L.concat(F):F);const se=a(y),ce=m(i(y),p,se,E,N,L,M);return ce&&jf(ce)&&ce.data==="]"?i(p.anchor=ce):(mr=!0,l(p.anchor=c("]"),se,ce),ce)},A=(y,p,E,N,L,M)=>{if(mr=!0,p.el=null,M){const ce=k(y);for(;;){const ee=i(y);if(ee&&ee!==ce)o(ee);else break}}const F=i(y),se=a(y);return o(y),t(null,p,se,F,E,N,Ff(se),L),F},k=(y,p="[",E="]")=>{let N=0;for(;y;)if(y=i(y),y&&jf(y)&&(y.data===p&&N++,y.data===E)){if(N===0)return i(y);N--}return y},T=(y,p,E)=>{const N=p.parentNode;N&&N.replaceChild(y,p);let L=E;for(;L;)L.vnode.el===p&&(L.vnode.el=L.subTree.el=y),L=L.parent},x=y=>y.nodeType===1&&y.tagName.toLowerCase()==="template";return[u,f]}const cs=VS;function KE(s){return e1(s)}function JE(s){return e1(s,jE)}function e1(s,e){const t=nS();t.__VUE__=!0;const{insert:n,remove:r,patchProp:i,createElement:a,createText:o,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:h,setScopeId:m=Fs,insertStaticContent:S}=s,A=(w,I,O,V=null,$=null,K=null,Z=void 0,b=null,v=!!I.dynamicChildren)=>{if(w===I)return;w&&!ci(w,I)&&(V=Ue(w),Y(w,$,K,!0),w=null),I.patchFlag===-2&&(v=!1,I.dynamicChildren=null);const{type:_,ref:B,shapeFlag:re}=I;switch(_){case co:k(w,I,O,V);break;case rn:T(w,I,O,V);break;case zh:w==null&&x(I,O,V,Z);break;case Vt:ee(w,I,O,V,$,K,Z,b,v);break;default:re&1?E(w,I,O,V,$,K,Z,b,v):re&6?fe(w,I,O,V,$,K,Z,b,v):(re&64||re&128)&&_.process(w,I,O,V,$,K,Z,b,v,ze)}B!=null&&$&&um(B,w&&w.ref,K,I||w,!I)},k=(w,I,O,V)=>{if(w==null)n(I.el=o(I.children),O,V);else{const $=I.el=w.el;I.children!==w.children&&c($,I.children)}},T=(w,I,O,V)=>{w==null?n(I.el=l(I.children||""),O,V):I.el=w.el},x=(w,I,O,V)=>{[w.el,w.anchor]=S(w.children,I,O,V,w.el,w.anchor)},y=({el:w,anchor:I},O,V)=>{let $;for(;w&&w!==I;)$=h(w),n(w,O,V),w=$;n(I,O,V)},p=({el:w,anchor:I})=>{let O;for(;w&&w!==I;)O=h(w),r(w),w=O;r(I)},E=(w,I,O,V,$,K,Z,b,v)=>{I.type==="svg"?Z="svg":I.type==="math"&&(Z="mathml"),w==null?N(I,O,V,$,K,Z,b,v):F(w,I,$,K,Z,b,v)},N=(w,I,O,V,$,K,Z,b)=>{let v,_;const{props:B,shapeFlag:re,transition:z,dirs:D}=w;if(v=w.el=a(w.type,K,B&&B.is,B),re&8?u(v,w.children):re&16&&M(w.children,v,null,V,$,wg(w,K),Z,b),D&&mn(w,null,V,"created"),L(v,w,w.scopeId,Z,V),B){for(const we in B)we!=="value"&&!rc(we)&&i(v,we,null,B[we],K,w.children,V,$,it);"value"in B&&i(v,"value",null,B.value,K),(_=B.onVnodeBeforeMount)&&Os(_,V,w)}D&&mn(w,null,V,"beforeMount");const J=t1($,z);J&&z.beforeEnter(v),n(v,I,O),((_=B&&B.onVnodeMounted)||J||D)&&cs(()=>{_&&Os(_,V,w),J&&z.enter(v),D&&mn(w,null,V,"mounted")},$)},L=(w,I,O,V,$)=>{if(O&&m(w,O),V)for(let K=0;K<V.length;K++)m(w,V[K]);if($){let K=$.subTree;if(I===K){const Z=$.vnode;L(w,Z,Z.scopeId,Z.slotScopeIds,$.parent)}}},M=(w,I,O,V,$,K,Z,b,v=0)=>{for(let _=v;_<w.length;_++){const B=w[_]=b?ri(w[_]):Ls(w[_]);A(null,B,I,O,V,$,K,Z,b)}},F=(w,I,O,V,$,K,Z)=>{const b=I.el=w.el;let{patchFlag:v,dynamicChildren:_,dirs:B}=I;v|=w.patchFlag&16;const re=w.props||at,z=I.props||at;let D;if(O&&Pi(O,!1),(D=z.onVnodeBeforeUpdate)&&Os(D,O,I,w),B&&mn(I,w,O,"beforeUpdate"),O&&Pi(O,!0),_?se(w.dynamicChildren,_,b,O,V,wg(I,$),K):Z||ae(w,I,b,null,O,V,wg(I,$),K,!1),v>0){if(v&16)ce(b,I,re,z,O,V,$);else if(v&2&&re.class!==z.class&&i(b,"class",null,z.class,$),v&4&&i(b,"style",re.style,z.style,$),v&8){const J=I.dynamicProps;for(let we=0;we<J.length;we++){const xe=J[we],et=re[xe],Jt=z[xe];(Jt!==et||xe==="value")&&i(b,xe,et,Jt,$,w.children,O,V,it)}}v&1&&w.children!==I.children&&u(b,I.children)}else!Z&&_==null&&ce(b,I,re,z,O,V,$);((D=z.onVnodeUpdated)||B)&&cs(()=>{D&&Os(D,O,I,w),B&&mn(I,w,O,"updated")},V)},se=(w,I,O,V,$,K,Z)=>{for(let b=0;b<I.length;b++){const v=w[b],_=I[b],B=v.el&&(v.type===Vt||!ci(v,_)||v.shapeFlag&70)?f(v.el):O;A(v,_,B,null,V,$,K,Z,!0)}},ce=(w,I,O,V,$,K,Z)=>{if(O!==V){if(O!==at)for(const b in O)!rc(b)&&!(b in V)&&i(w,b,O[b],null,Z,I.children,$,K,it);for(const b in V){if(rc(b))continue;const v=V[b],_=O[b];v!==_&&b!=="value"&&i(w,b,_,v,Z,I.children,$,K,it)}"value"in V&&i(w,"value",O.value,V.value,Z)}},ee=(w,I,O,V,$,K,Z,b,v)=>{const _=I.el=w?w.el:o(""),B=I.anchor=w?w.anchor:o("");let{patchFlag:re,dynamicChildren:z,slotScopeIds:D}=I;D&&(b=b?b.concat(D):D),w==null?(n(_,O,V),n(B,O,V),M(I.children||[],O,B,$,K,Z,b,v)):re>0&&re&64&&z&&w.dynamicChildren?(se(w.dynamicChildren,z,O,$,K,Z,b),(I.key!=null||$&&I===$.subTree)&&s1(w,I,!0)):ae(w,I,O,B,$,K,Z,b,v)},fe=(w,I,O,V,$,K,Z,b,v)=>{I.slotScopeIds=b,w==null?I.shapeFlag&512?$.ctx.activate(I,O,V,Z,v):Ee(I,O,V,$,K,Z,v):ye(w,I,v)},Ee=(w,I,O,V,$,K,Z)=>{const b=w.component=zE(w,V,$);if(xw(w)&&(b.ctx.renderer=ze),ZE(b),b.asyncDep){if($&&$.registerDep(b,ie),!w.el){const v=b.subTree=ve(rn);T(null,v,I,O)}}else ie(b,w,I,O,$,K,Z)},ye=(w,I,O)=>{const V=I.component=w.component;if(oE(w,I,O))if(V.asyncDep&&!V.asyncResolved){te(V,I,O);return}else V.next=I,tE(V.update),V.effect.dirty=!0,V.update();else I.el=w.el,V.vnode=I},ie=(w,I,O,V,$,K,Z)=>{const b=()=>{if(w.isMounted){let{next:B,bu:re,u:z,parent:D,vnode:J}=w;{const ws=n1(w);if(ws){B&&(B.el=J.el,te(w,B,Z)),ws.asyncDep.then(()=>{w.isUnmounted||b()});return}}let we=B,xe;Pi(w,!1),B?(B.el=J.el,te(w,B,Z)):B=J,re&&Ad(re),(xe=B.props&&B.props.onVnodeBeforeUpdate)&&Os(xe,D,B,J),Pi(w,!0);const et=mg(w),Jt=w.subTree;w.subTree=et,A(Jt,et,f(Jt.el),Ue(Jt),w,$,K),B.el=et.el,we===null&&Iw(w,et.el),z&&cs(z,$),(xe=B.props&&B.props.onVnodeUpdated)&&cs(()=>Os(xe,D,B,J),$)}else{let B;const{el:re,props:z}=I,{bm:D,m:J,parent:we}=w,xe=oc(I);if(Pi(w,!1),D&&Ad(D),!xe&&(B=z&&z.onVnodeBeforeMount)&&Os(B,we,I),Pi(w,!0),re&&R){const et=()=>{w.subTree=mg(w),R(re,w.subTree,w,$,null)};xe?I.type.__asyncLoader().then(()=>!w.isUnmounted&&et()):et()}else{const et=w.subTree=mg(w);A(null,et,O,V,w,$,K),I.el=et.el}if(J&&cs(J,$),!xe&&(B=z&&z.onVnodeMounted)){const et=I;cs(()=>Os(B,we,et),$)}(I.shapeFlag&256||we&&oc(we.vnode)&&we.vnode.shapeFlag&256)&&w.a&&cs(w.a,$),w.isMounted=!0,I=O=V=null}},v=w.effect=new yw(b,Fs,()=>Wm(_),w.scope),_=w.update=()=>{v.dirty&&v.run()};_.id=w.uid,Pi(w,!0),_()},te=(w,I,O)=>{I.component=w;const V=w.vnode.props;w.vnode=I,w.next=null,DE(w,I.props,V,O),HE(w,I.children,O),_i(),Uy(w),Bi()},ae=(w,I,O,V,$,K,Z,b,v=!1)=>{const _=w&&w.children,B=w?w.shapeFlag:0,re=I.children,{patchFlag:z,shapeFlag:D}=I;if(z>0){if(z&128){oe(_,re,O,V,$,K,Z,b,v);return}else if(z&256){Re(_,re,O,V,$,K,Z,b,v);return}}D&8?(B&16&&it(_,$,K),re!==_&&u(O,re)):B&16?D&16?oe(_,re,O,V,$,K,Z,b,v):it(_,$,K,!0):(B&8&&u(O,""),D&16&&M(re,O,V,$,K,Z,b,v))},Re=(w,I,O,V,$,K,Z,b,v)=>{w=w||sc,I=I||sc;const _=w.length,B=I.length,re=Math.min(_,B);let z;for(z=0;z<re;z++){const D=I[z]=v?ri(I[z]):Ls(I[z]);A(w[z],D,O,null,$,K,Z,b,v)}_>B?it(w,$,K,!0,!1,re):M(I,O,V,$,K,Z,b,v,re)},oe=(w,I,O,V,$,K,Z,b,v)=>{let _=0;const B=I.length;let re=w.length-1,z=B-1;for(;_<=re&&_<=z;){const D=w[_],J=I[_]=v?ri(I[_]):Ls(I[_]);if(ci(D,J))A(D,J,O,null,$,K,Z,b,v);else break;_++}for(;_<=re&&_<=z;){const D=w[re],J=I[z]=v?ri(I[z]):Ls(I[z]);if(ci(D,J))A(D,J,O,null,$,K,Z,b,v);else break;re--,z--}if(_>re){if(_<=z){const D=z+1,J=D<B?I[D].el:V;for(;_<=z;)A(null,I[_]=v?ri(I[_]):Ls(I[_]),O,J,$,K,Z,b,v),_++}}else if(_>z)for(;_<=re;)Y(w[_],$,K,!0),_++;else{const D=_,J=_,we=new Map;for(_=J;_<=z;_++){const ys=I[_]=v?ri(I[_]):Ls(I[_]);ys.key!=null&&we.set(ys.key,_)}let xe,et=0;const Jt=z-J+1;let ws=!1,Pf=0;const bo=new Array(Jt);for(_=0;_<Jt;_++)bo[_]=0;for(_=D;_<=re;_++){const ys=w[_];if(et>=Jt){Y(ys,$,K,!0);continue}let cn;if(ys.key!=null)cn=we.get(ys.key);else for(xe=J;xe<=z;xe++)if(bo[xe-J]===0&&ci(ys,I[xe])){cn=xe;break}cn===void 0?Y(ys,$,K,!0):(bo[cn-J]=_+1,cn>=Pf?Pf=cn:ws=!0,A(ys,I[cn],O,null,$,K,Z,b,v),et++)}const Iy=ws?WE(bo):sc;for(xe=Iy.length-1,_=Jt-1;_>=0;_--){const ys=J+_,cn=I[ys],_y=ys+1<B?I[ys+1].el:V;bo[_]===0?A(null,cn,O,_y,$,K,Z,b,v):ws&&(xe<0||_!==Iy[xe]?de(cn,O,_y,2):xe--)}}},de=(w,I,O,V,$=null)=>{const{el:K,type:Z,transition:b,children:v,shapeFlag:_}=w;if(_&6){de(w.component.subTree,I,O,V);return}if(_&128){w.suspense.move(I,O,V);return}if(_&64){Z.move(w,I,O,ze);return}if(Z===Vt){n(K,I,O);for(let re=0;re<v.length;re++)de(v[re],I,O,V);n(w.anchor,I,O);return}if(Z===zh){y(w,I,O);return}if(V!==2&&_&1&&b)if(V===0)b.beforeEnter(K),n(K,I,O),cs(()=>b.enter(K),$);else{const{leave:re,delayLeave:z,afterLeave:D}=b,J=()=>n(K,I,O),we=()=>{re(K,()=>{J(),D&&D()})};z?z(K,J,we):we()}else n(K,I,O)},Y=(w,I,O,V=!1,$=!1)=>{const{type:K,props:Z,ref:b,children:v,dynamicChildren:_,shapeFlag:B,patchFlag:re,dirs:z}=w;if(b!=null&&um(b,null,O,w,!0),B&256){I.ctx.deactivate(w);return}const D=B&1&&z,J=!oc(w);let we;if(J&&(we=Z&&Z.onVnodeBeforeUnmount)&&Os(we,I,w),B&6)qe(w.component,O,V);else{if(B&128){w.suspense.unmount(O,V);return}D&&mn(w,null,I,"beforeUnmount"),B&64?w.type.remove(w,I,O,$,ze,V):_&&(K!==Vt||re>0&&re&64)?it(_,I,O,!1,!0):(K===Vt&&re&384||!$&&B&16)&&it(v,I,O),V&&Se(w)}(J&&(we=Z&&Z.onVnodeUnmounted)||D)&&cs(()=>{we&&Os(we,I,w),D&&mn(w,null,I,"unmounted")},O)},Se=w=>{const{type:I,el:O,anchor:V,transition:$}=w;if(I===Vt){Be(O,V);return}if(I===zh){p(w);return}const K=()=>{r(O),$&&!$.persisted&&$.afterLeave&&$.afterLeave()};if(w.shapeFlag&1&&$&&!$.persisted){const{leave:Z,delayLeave:b}=$,v=()=>Z(O,K);b?b(w.el,K,v):v()}else K()},Be=(w,I)=>{let O;for(;w!==I;)O=h(w),r(w),w=O;r(I)},qe=(w,I,O)=>{const{bum:V,scope:$,update:K,subTree:Z,um:b}=w;V&&Ad(V),$.stop(),K&&(K.active=!1,Y(Z,w,I,O)),b&&cs(b,I),cs(()=>{w.isUnmounted=!0},I),I&&I.pendingBranch&&!I.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===I.pendingId&&(I.deps--,I.deps===0&&I.resolve())},it=(w,I,O,V=!1,$=!1,K=0)=>{for(let Z=K;Z<w.length;Z++)Y(w[Z],I,O,V,$)},Ue=w=>w.shapeFlag&6?Ue(w.component.subTree):w.shapeFlag&128?w.suspense.next():h(w.anchor||w.el);let Oe=!1;const pe=(w,I,O)=>{w==null?I._vnode&&Y(I._vnode,null,null,!0):A(I._vnode||null,w,I,null,null,null,O),Oe||(Oe=!0,Uy(),om(),Oe=!1),I._vnode=w},ze={p:A,um:Y,m:de,r:Se,mt:Ee,mc:M,pc:ae,pbc:se,n:Ue,o:s};let j,R;return e&&([j,R]=e(ze)),{render:pe,hydrate:j,createApp:PE(pe,j)}}function wg({type:s,props:e},t){return t==="svg"&&s==="foreignObject"||t==="mathml"&&s==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Pi({effect:s,update:e},t){s.allowRecurse=e.allowRecurse=t}function t1(s,e){return(!s||s&&!s.pendingBranch)&&e&&!e.persisted}function s1(s,e,t=!1){const n=s.children,r=e.children;if(Ne(n)&&Ne(r))for(let i=0;i<n.length;i++){const a=n[i];let o=r[i];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=r[i]=ri(r[i]),o.el=a.el),t||s1(a,o)),o.type===co&&(o.el=a.el)}}function WE(s){const e=s.slice(),t=[0];let n,r,i,a,o;const l=s.length;for(n=0;n<l;n++){const c=s[n];if(c!==0){if(r=t[t.length-1],s[r]<c){e[n]=r,t.push(n);continue}for(i=0,a=t.length-1;i<a;)o=i+a>>1,s[t[o]]<c?i=o+1:a=o;c<s[t[i]]&&(i>0&&(e[n]=t[i-1]),t[i]=n)}}for(i=t.length,a=t[i-1];i-- >0;)t[i]=a,a=e[a];return t}function n1(s){const e=s.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:n1(e)}const qE=s=>s.__isTeleport,Vt=Symbol.for("v-fgt"),co=Symbol.for("v-txt"),rn=Symbol.for("v-cmt"),zh=Symbol.for("v-stc"),Zh=[];let js=null;function Ke(s=!1){Zh.push(js=s?null:[])}function r1(){Zh.pop(),js=Zh[Zh.length-1]||null}let yc=1;function zy(s){yc+=s}function i1(s){return s.dynamicChildren=yc>0?js||sc:null,r1(),yc>0&&js&&js.push(s),s}function yt(s,e,t,n,r,i){return i1(le(s,e,t,n,r,i,!0))}function wn(s,e,t,n,r){return i1(ve(s,e,t,n,r,!0))}function uf(s){return s?s.__v_isVNode===!0:!1}function ci(s,e){return s.type===e.type&&s.key===e.key}const a1=({key:s})=>s??null,kd=({ref:s,ref_key:e,ref_for:t})=>(typeof s=="number"&&(s=""+s),s!=null?kt(s)||ge(s)||Te(s)?{i:Rt,r:s,k:e,f:!!t}:s:null);function le(s,e=null,t=null,n=0,r=null,i=s===Vt?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:s,props:e,key:e&&a1(e),ref:e&&kd(e),scopeId:Gm,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Rt};return o?(Lw(l,t),i&128&&s.normalize(l)):t&&(l.shapeFlag|=kt(t)?8:16),yc>0&&!a&&js&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&js.push(l),l}const ve=GE;function GE(s,e=null,t=null,n=0,r=null,i=!1){if((!s||s===RS)&&(s=rn),uf(s)){const o=vc(s,e,!0);return t&&Lw(o,t),yc>0&&!i&&js&&(o.shapeFlag&6?js[js.indexOf(s)]=o:js.push(o)),o.patchFlag|=-2,o}if(rC(s)&&(s=s.__vccOpts),e){e=o1(e);let{class:o,style:l}=e;o&&!kt(o)&&(e.class=xt(o)),nt(l)&&(AS(l)&&!Ne(l)&&(l=Ht({},l)),e.style=jm(l))}const a=kt(s)?1:cE(s)?128:qE(s)?64:nt(s)?4:Te(s)?2:0;return le(s,e,t,n,r,a,i,!0)}function o1(s){return s?AS(s)||GS(s)?Ht({},s):s:null}function vc(s,e,t=!1,n=!1){const{props:r,ref:i,patchFlag:a,children:o,transition:l}=s,c=e?l1(r||{},e):r,u={__v_isVNode:!0,__v_skip:!0,type:s.type,props:c,key:c&&a1(c),ref:e&&e.ref?t&&i?Ne(i)?i.concat(kd(e)):[i,kd(e)]:kd(e):i,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:o,target:s.target,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:e&&s.type!==Vt?a===-1?16:a|16:a,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:l,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&vc(s.ssContent),ssFallback:s.ssFallback&&vc(s.ssFallback),el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return l&&n&&(u.transition=l.clone(u)),u}function De(s=" ",e=0){return ve(co,null,s,e)}function YE(s,e){const t=ve(zh,null,s);return t.staticCount=e,t}function fn(s="",e=!1){return e?(Ke(),wn(rn,null,s)):ve(rn,null,s)}function Ls(s){return s==null||typeof s=="boolean"?ve(rn):Ne(s)?ve(Vt,null,s.slice()):typeof s=="object"?ri(s):ve(co,null,String(s))}function ri(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:vc(s)}function Lw(s,e){let t=0;const{shapeFlag:n}=s;if(e==null)e=null;else if(Ne(e))t=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),Lw(s,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!GS(e)?e._ctx=Rt:r===3&&Rt&&(Rt.slots._===1?e._=1:(e._=2,s.patchFlag|=1024))}else Te(e)?(e={default:e,_ctx:Rt},t=32):(e=String(e),n&64?(t=16,e=[De(e)]):t=8);s.children=e,s.shapeFlag|=t}function l1(...s){const e={};for(let t=0;t<s.length;t++){const n=s[t];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=xt([e.class,n.class]));else if(r==="style")e.style=jm([e.style,n.style]);else if(Ef(r)){const i=e[r],a=n[r];a&&i!==a&&!(Ne(i)&&i.includes(a))&&(e[r]=i?[].concat(i,a):a)}else r!==""&&(e[r]=n[r])}return e}function Os(s,e,t,n=null){en(s,e,7,[t,n])}const XE=jS();let QE=0;function zE(s,e,t){const n=s.type,r=(e?e.appContext:s.appContext)||XE,i={uid:QE++,vnode:s,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new oS(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:XS(n,r),emitsOptions:xS(n,r),emit:null,emitted:null,propsDefaults:at,inheritAttrs:n.inheritAttrs,ctx:at,data:at,props:at,attrs:at,slots:at,refs:at,setupState:at,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=nE.bind(null,i),s.ce&&s.ce(i),i}let Pt=null;const Nf=()=>Pt||Rt;let hm,gp;{const s=nS(),e=(t,n)=>{let r;return(r=s[t])||(r=s[t]=[]),r.push(n),i=>{r.length>1?r.forEach(a=>a(i)):r[0](i)}};hm=e("__VUE_INSTANCE_SETTERS__",t=>Pt=t),gp=e("__VUE_SSR_SETTERS__",t=>_f=t)}const If=s=>{const e=Pt;return hm(s),s.scope.on(),()=>{s.scope.off(),hm(e)}},Zy=()=>{Pt&&Pt.scope.off(),hm(null)};function c1(s){return s.vnode.shapeFlag&4}let _f=!1;function ZE(s,e=!1){e&&gp(e);const{props:t,children:n}=s.vnode,r=c1(s);LE(s,t,r,e),ME(s,n);const i=r?eC(s,e):void 0;return e&&gp(!1),i}function eC(s,e){const t=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,_E);const{setup:n}=t;if(n){const r=s.setupContext=n.length>1?sC(s):null,i=If(s);_i();const a=wi(n,s,0,[s.props,r]);if(Bi(),i(),Zb(a)){if(a.then(Zy,Zy),e)return a.then(o=>{pp(s,o,e)}).catch(o=>{Oc(o,s,0)});s.asyncDep=a}else pp(s,a,e)}else u1(s,e)}function pp(s,e,t){Te(e)?s.type.__ssrInlineRender?s.ssrRender=e:s.render=e:nt(e)&&(s.setupState=CS(e)),u1(s,t)}let ev;function u1(s,e,t){const n=s.type;if(!s.render){if(!e&&ev&&!n.render){const r=n.template||Vw(s).template;if(r){const{isCustomElement:i,compilerOptions:a}=s.appContext.config,{delimiters:o,compilerOptions:l}=n,c=Ht(Ht({isCustomElement:i,delimiters:o},a),l);n.render=ev(r,c)}}s.render=n.render||Fs}{const r=If(s);_i();try{BE(s)}finally{Bi(),r()}}}const tC={get(s,e){return ms(s,"get",""),s[e]}};function sC(s){const e=t=>{s.exposed=t||{}};return{attrs:new Proxy(s.attrs,tC),slots:s.slots,emit:s.emit,expose:e}}function Xm(s){if(s.exposed)return s.exposeProxy||(s.exposeProxy=new Proxy(CS(K0(s.exposed)),{get(e,t){if(t in e)return e[t];if(t in Qh)return Qh[t](s)},has(e,t){return t in e||t in Qh}}))}function nC(s,e=!0){return Te(s)?s.displayName||s.name:s.name||e&&s.__name}function rC(s){return Te(s)&&"__vccOpts"in s}const jt=(s,e)=>J0(s,e,_f);function Dw(s,e,t){const n=arguments.length;return n===2?nt(e)&&!Ne(e)?uf(e)?ve(s,null,[e]):ve(s,e):ve(s,null,e):(n>3?t=Array.prototype.slice.call(arguments,2):n===3&&uf(t)&&(t=[t]),ve(s,e,t))}const h1="3.4.27";/**
* @vue/runtime-dom v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const iC="http://www.w3.org/2000/svg",aC="http://www.w3.org/1998/Math/MathML",ii=typeof document<"u"?document:null,tv=ii&&ii.createElement("template"),oC={insert:(s,e,t)=>{e.insertBefore(s,t||null)},remove:s=>{const e=s.parentNode;e&&e.removeChild(s)},createElement:(s,e,t,n)=>{const r=e==="svg"?ii.createElementNS(iC,s):e==="mathml"?ii.createElementNS(aC,s):ii.createElement(s,t?{is:t}:void 0);return s==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:s=>ii.createTextNode(s),createComment:s=>ii.createComment(s),setText:(s,e)=>{s.nodeValue=e},setElementText:(s,e)=>{s.textContent=e},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>ii.querySelector(s),setScopeId(s,e){s.setAttribute(e,"")},insertStaticContent(s,e,t,n,r,i){const a=t?t.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===i||!(r=r.nextSibling)););else{tv.innerHTML=n==="svg"?`<svg>${s}</svg>`:n==="mathml"?`<math>${s}</math>`:s;const o=tv.content;if(n==="svg"||n==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,t)}return[a?a.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},lC=Symbol("_vtc");function cC(s,e,t){const n=s[lC];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?s.removeAttribute("class"):t?s.setAttribute("class",e):s.className=e}const sv=Symbol("_vod"),uC=Symbol("_vsh"),hC=Symbol(""),fC=/(^|;)\s*display\s*:/;function dC(s,e,t){const n=s.style,r=kt(t);let i=!1;if(t&&!r){if(e)if(kt(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();t[o]==null&&Ed(n,o,"")}else for(const a in e)t[a]==null&&Ed(n,a,"");for(const a in t)a==="display"&&(i=!0),Ed(n,a,t[a])}else if(r){if(e!==t){const a=n[hC];a&&(t+=";"+a),n.cssText=t,i=fC.test(t)}}else e&&s.removeAttribute("style");sv in s&&(s[sv]=i?n.display:"",s[uC]&&(n.display="none"))}const nv=/\s*!important$/;function Ed(s,e,t){if(Ne(t))t.forEach(n=>Ed(s,e,n));else if(t==null&&(t=""),e.startsWith("--"))s.setProperty(e,t);else{const n=mC(s,e);nv.test(t)?s.setProperty(Rc(n),t.replace(nv,""),"important"):s[n]=t}}const rv=["Webkit","Moz","ms"],yg={};function mC(s,e){const t=yg[e];if(t)return t;let n=En(e);if(n!=="filter"&&n in s)return yg[e]=n;n=Fm(n);for(let r=0;r<rv.length;r++){const i=rv[r]+n;if(i in s)return yg[e]=i}return e}const iv="http://www.w3.org/1999/xlink";function gC(s,e,t,n,r){if(n&&e.startsWith("xlink:"))t==null?s.removeAttributeNS(iv,e.slice(6,e.length)):s.setAttributeNS(iv,e,t);else{const i=S0(e);t==null||i&&!rS(t)?s.removeAttribute(e):s.setAttribute(e,i?"":t)}}function pC(s,e,t,n,r,i,a){if(e==="innerHTML"||e==="textContent"){n&&a(n,r,i),s[e]=t??"";return}const o=s.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const c=o==="OPTION"?s.getAttribute("value")||"":s.value,u=t??"";(c!==u||!("_value"in s))&&(s.value=u),t==null&&s.removeAttribute(e),s._value=t;return}let l=!1;if(t===""||t==null){const c=typeof s[e];c==="boolean"?t=rS(t):t==null&&c==="string"?(t="",l=!0):c==="number"&&(t=0,l=!0)}try{s[e]=t}catch{}l&&s.removeAttribute(e)}function ui(s,e,t,n){s.addEventListener(e,t,n)}function wC(s,e,t,n){s.removeEventListener(e,t,n)}const av=Symbol("_vei");function yC(s,e,t,n,r=null){const i=s[av]||(s[av]={}),a=i[e];if(n&&a)a.value=n;else{const[o,l]=vC(e);if(n){const c=i[e]=AC(n,r);ui(s,o,c,l)}else a&&(wC(s,o,a,l),i[e]=void 0)}}const ov=/(?:Once|Passive|Capture)$/;function vC(s){let e;if(ov.test(s)){e={};let n;for(;n=s.match(ov);)s=s.slice(0,s.length-n[0].length),e[n[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):Rc(s.slice(2)),e]}let vg=0;const bC=Promise.resolve(),SC=()=>vg||(bC.then(()=>vg=0),vg=Date.now());function AC(s,e){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;en(kC(n,t.value),e,5,[n])};return t.value=s,t.attached=SC(),t}function kC(s,e){if(Ne(e)){const t=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{t.call(s),s._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const lv=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,EC=(s,e,t,n,r,i,a,o,l)=>{const c=r==="svg";e==="class"?cC(s,n,c):e==="style"?dC(s,t,n):Ef(e)?dw(e)||yC(s,e,t,n,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):CC(s,e,n,c))?pC(s,e,n,i,a,o,l):(e==="true-value"?s._trueValue=n:e==="false-value"&&(s._falseValue=n),gC(s,e,n,c))};function CC(s,e,t,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in s&&lv(e)&&Te(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&s.tagName==="INPUT"||e==="type"&&s.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=s.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return lv(e)&&kt(t)?!1:e in s}const bc=s=>{const e=s.props["onUpdate:modelValue"]||!1;return Ne(e)?t=>Ad(e,t):e};function NC(s){s.target.composing=!0}function cv(s){const e=s.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const tr=Symbol("_assign"),uv={created(s,{modifiers:{lazy:e,trim:t,number:n}},r){s[tr]=bc(r);const i=n||r.props&&r.props.type==="number";ui(s,e?"change":"input",a=>{if(a.target.composing)return;let o=s.value;t&&(o=o.trim()),i&&(o=np(o)),s[tr](o)}),t&&ui(s,"change",()=>{s.value=s.value.trim()}),e||(ui(s,"compositionstart",NC),ui(s,"compositionend",cv),ui(s,"change",cv))},mounted(s,{value:e}){s.value=e??""},beforeUpdate(s,{value:e,modifiers:{lazy:t,trim:n,number:r}},i){if(s[tr]=bc(i),s.composing)return;const a=(r||s.type==="number")&&!/^0\d/.test(s.value)?np(s.value):s.value,o=e??"";a!==o&&(document.activeElement===s&&s.type!=="range"&&(t||n&&s.value.trim()===o)||(s.value=o))}},So={deep:!0,created(s,e,t){s[tr]=bc(t),ui(s,"change",()=>{const n=s._modelValue,r=f1(s),i=s.checked,a=s[tr];if(Ne(n)){const o=iS(n,r),l=o!==-1;if(i&&!l)a(n.concat(r));else if(!i&&l){const c=[...n];c.splice(o,1),a(c)}}else if(Hm(n)){const o=new Set(n);i?o.add(r):o.delete(r),a(o)}else a(d1(s,i))})},mounted:hv,beforeUpdate(s,e,t){s[tr]=bc(t),hv(s,e,t)}};function hv(s,{value:e,oldValue:t},n){s._modelValue=e,Ne(e)?s.checked=iS(e,n.props.value)>-1:Hm(e)?s.checked=e.has(n.props.value):e!==t&&(s.checked=pc(e,d1(s,!0)))}const Ao={created(s,{value:e},t){s.checked=pc(e,t.props.value),s[tr]=bc(t),ui(s,"change",()=>{s[tr](f1(s))})},beforeUpdate(s,{value:e,oldValue:t},n){s[tr]=bc(n),e!==t&&(s.checked=pc(e,n.props.value))}};function f1(s){return"_value"in s?s._value:s.value}function d1(s,e){const t=e?"_trueValue":"_falseValue";return t in s?s[t]:e}const IC=["ctrl","shift","alt","meta"],_C={stop:s=>s.stopPropagation(),prevent:s=>s.preventDefault(),self:s=>s.target!==s.currentTarget,ctrl:s=>!s.ctrlKey,shift:s=>!s.shiftKey,alt:s=>!s.altKey,meta:s=>!s.metaKey,left:s=>"button"in s&&s.button!==0,middle:s=>"button"in s&&s.button!==1,right:s=>"button"in s&&s.button!==2,exact:(s,e)=>IC.some(t=>s[`${t}Key`]&&!e.includes(t))},Bn=(s,e)=>{const t=s._withMods||(s._withMods={}),n=e.join(".");return t[n]||(t[n]=(r,...i)=>{for(let a=0;a<e.length;a++){const o=_C[e[a]];if(o&&o(r,e))return}return s(r,...i)})},m1=Ht({patchProp:EC},oC);let ef,fv=!1;function BC(){return ef||(ef=KE(m1))}function xC(){return ef=fv?ef:JE(m1),fv=!0,ef}const TC=(...s)=>{const e=BC().createApp(...s),{mount:t}=e;return e.mount=n=>{const r=p1(n);if(!r)return;const i=e._component;!Te(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.innerHTML="";const a=t(r,!1,g1(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},e},RC=(...s)=>{const e=xC().createApp(...s),{mount:t}=e;return e.mount=n=>{const r=p1(n);if(r)return t(r,!0,g1(r))},e};function g1(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function p1(s){return kt(s)?document.querySelector(s):s}const OC=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,VC=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,PC=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function LC(s,e){if(s==="__proto__"||s==="constructor"&&e&&typeof e=="object"&&"prototype"in e){DC(s);return}return e}function DC(s){console.warn(`[destr] Dropping "${s}" key to prevent prototype pollution.`)}function hf(s,e={}){if(typeof s!="string")return s;const t=s.trim();if(s[0]==='"'&&s.endsWith('"')&&!s.includes("\\"))return t.slice(1,-1);if(t.length<=9){const n=t.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!PC.test(s)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return s}try{if(OC.test(s)||VC.test(s)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(s,LC)}return JSON.parse(s)}catch(n){if(e.strict)throw n;return s}}const UC=/#/g,MC=/&/g,HC=/\//g,$C=/=/g,Uw=/\+/g,FC=/%5e/gi,jC=/%60/gi,KC=/%7c/gi,JC=/%20/gi;function WC(s){return encodeURI(""+s).replace(KC,"|")}function wp(s){return WC(typeof s=="string"?s:JSON.stringify(s)).replace(Uw,"%2B").replace(JC,"+").replace(UC,"%23").replace(MC,"%26").replace(jC,"`").replace(FC,"^").replace(HC,"%2F")}function bg(s){return wp(s).replace($C,"%3D")}function fm(s=""){try{return decodeURIComponent(""+s)}catch{return""+s}}function qC(s){return fm(s.replace(Uw," "))}function GC(s){return fm(s.replace(Uw," "))}function Mw(s=""){const e={};s[0]==="?"&&(s=s.slice(1));for(const t of s.split("&")){const n=t.match(/([^=]+)=?(.*)/)||[];if(n.length<2)continue;const r=qC(n[1]);if(r==="__proto__"||r==="constructor")continue;const i=GC(n[2]||"");e[r]===void 0?e[r]=i:Array.isArray(e[r])?e[r].push(i):e[r]=[e[r],i]}return e}function YC(s,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(t=>`${bg(s)}=${wp(t)}`).join("&"):`${bg(s)}=${wp(e)}`:bg(s)}function w1(s){return Object.keys(s).filter(e=>s[e]!==void 0).map(e=>YC(e,s[e])).filter(Boolean).join("&")}const XC=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,QC=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,zC=/^([/\\]\s*){2,}[^/\\]/,ZC=/^[\s\0]*(blob|data|javascript|vbscript):$/i,eN=/\/$|\/\?|\/#/,tN=/^\.?\//;function cr(s,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?XC.test(s):QC.test(s)||(e.acceptRelative?zC.test(s):!1)}function sN(s){return!!s&&ZC.test(s)}function yp(s="",e){return e?eN.test(s):s.endsWith("/")}function Qm(s="",e){if(!e)return(yp(s)?s.slice(0,-1):s)||"/";if(!yp(s,!0))return s||"/";let t=s,n="";const r=s.indexOf("#");r>=0&&(t=s.slice(0,r),n=s.slice(r));const[i,...a]=t.split("?");return((i.endsWith("/")?i.slice(0,-1):i)||"/")+(a.length>0?`?${a.join("?")}`:"")+n}function dm(s="",e){if(!e)return s.endsWith("/")?s:s+"/";if(yp(s,!0))return s||"/";let t=s,n="";const r=s.indexOf("#");if(r>=0&&(t=s.slice(0,r),n=s.slice(r),!t))return n;const[i,...a]=t.split("?");return i+"/"+(a.length>0?`?${a.join("?")}`:"")+n}function nN(s=""){return s.startsWith("/")}function dv(s=""){return nN(s)?s:"/"+s}function rN(s,e){if(v1(e)||cr(s))return s;const t=Qm(e);return s.startsWith(t)?s:go(t,s)}function iN(s,e){if(v1(e))return s;const t=Qm(e);if(!s.startsWith(t))return s;const n=s.slice(t.length);return n[0]==="/"?n:"/"+n}function y1(s,e){const t=Bf(s),n={...Mw(t.search),...e};return t.search=w1(n),A1(t)}function v1(s){return!s||s==="/"}function aN(s){return s&&s!=="/"}function go(s,...e){let t=s||"";for(const n of e.filter(r=>aN(r)))if(t){const r=n.replace(tN,"");t=dm(t)+r}else t=n;return t}function b1(...s){var a,o,l,c;const e=/\/(?!\/)/,t=s.filter(Boolean),n=[];let r=0;for(const u of t)if(!(!u||u==="/")){for(const[f,h]of u.split(e).entries())if(!(!h||h===".")){if(h===".."){if(n.length===1&&cr(n[0]))continue;n.pop(),r--;continue}if(f===1&&((a=n[n.length-1])!=null&&a.endsWith(":/"))){n[n.length-1]+="/"+h;continue}n.push(h),r++}}let i=n.join("/");return r>=0?(o=t[0])!=null&&o.startsWith("/")&&!i.startsWith("/")?i="/"+i:(l=t[0])!=null&&l.startsWith("./")&&!i.startsWith("./")&&(i="./"+i):i="../".repeat(-1*r)+i,(c=t[t.length-1])!=null&&c.endsWith("/")&&!i.endsWith("/")&&(i+="/"),i}function vp(s,e,t={}){return t.trailingSlash||(s=dm(s),e=dm(e)),t.leadingSlash||(s=dv(s),e=dv(e)),t.encoding||(s=fm(s),e=fm(e)),s===e}const S1=Symbol.for("ufo:protocolRelative");function Bf(s="",e){const t=s.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(t){const[,f,h=""]=t;return{protocol:f.toLowerCase(),pathname:h,href:f+h,auth:"",host:"",search:"",hash:""}}if(!cr(s,{acceptRelative:!0}))return e?Bf(e+s):bp(s);const[,n="",r,i=""]=s.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,a="",o=""]=i.match(/([^#/?]*)(.*)?/)||[],{pathname:l,search:c,hash:u}=bp(o.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:n.toLowerCase(),auth:r?r.slice(0,Math.max(0,r.length-1)):"",host:a,pathname:l,search:c,hash:u,[S1]:!n}}function bp(s=""){const[e="",t="",n=""]=(s.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:t,hash:n}}function A1(s){const e=s.pathname||"",t=s.search?(s.search.startsWith("?")?"":"?")+s.search:"",n=s.hash||"",r=s.auth?s.auth+"@":"",i=s.host||"";return(s.protocol||s[S1]?(s.protocol||"")+"//":"")+r+i+e+t+n}class oN extends Error{constructor(e,t){super(e,t),this.name="FetchError",t!=null&&t.cause&&!this.cause&&(this.cause=t.cause)}}function lN(s){var l,c,u,f,h;const e=((l=s.error)==null?void 0:l.message)||((c=s.error)==null?void 0:c.toString())||"",t=((u=s.request)==null?void 0:u.method)||((f=s.options)==null?void 0:f.method)||"GET",n=((h=s.request)==null?void 0:h.url)||String(s.request)||"/",r=`[${t}] ${JSON.stringify(n)}`,i=s.response?`${s.response.status} ${s.response.statusText}`:"<no response>",a=`${r}: ${i}${e?` ${e}`:""}`,o=new oN(a,s.error?{cause:s.error}:void 0);for(const m of["request","options","response"])Object.defineProperty(o,m,{get(){return s[m]}});for(const[m,S]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(o,m,{get(){return s.response&&s.response[S]}});return o}const cN=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function mv(s="GET"){return cN.has(s.toUpperCase())}function uN(s){if(s===void 0)return!1;const e=typeof s;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(s)?!0:s.buffer?!1:s.constructor&&s.constructor.name==="Object"||typeof s.toJSON=="function"}const hN=new Set(["image/svg","application/xml","application/xhtml","application/html"]),fN=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function dN(s=""){if(!s)return"json";const e=s.split(";").shift()||"";return fN.test(e)?"json":hN.has(e)||e.startsWith("text/")?"text":"blob"}function mN(s,e,t=globalThis.Headers){const n={...e,...s};if(e!=null&&e.params&&(s!=null&&s.params)&&(n.params={...e==null?void 0:e.params,...s==null?void 0:s.params}),e!=null&&e.query&&(s!=null&&s.query)&&(n.query={...e==null?void 0:e.query,...s==null?void 0:s.query}),e!=null&&e.headers&&(s!=null&&s.headers)){n.headers=new t((e==null?void 0:e.headers)||{});for(const[r,i]of new t((s==null?void 0:s.headers)||{}))n.headers.set(r,i)}return n}const gN=new Set([408,409,425,429,500,502,503,504]),pN=new Set([101,204,205,304]);function k1(s={}){const{fetch:e=globalThis.fetch,Headers:t=globalThis.Headers,AbortController:n=globalThis.AbortController}=s;async function r(o){const l=o.error&&o.error.name==="AbortError"&&!o.options.timeout||!1;if(o.options.retry!==!1&&!l){let u;typeof o.options.retry=="number"?u=o.options.retry:u=mv(o.options.method)?0:1;const f=o.response&&o.response.status||500;if(u>0&&(Array.isArray(o.options.retryStatusCodes)?o.options.retryStatusCodes.includes(f):gN.has(f))){const h=o.options.retryDelay||0;return h>0&&await new Promise(m=>setTimeout(m,h)),i(o.request,{...o.options,retry:u-1})}}const c=lN(o);throw Error.captureStackTrace&&Error.captureStackTrace(c,i),c}const i=async function(l,c={}){var m;const u={request:l,options:mN(c,s.defaults,t),response:void 0,error:void 0};u.options.method=(m=u.options.method)==null?void 0:m.toUpperCase(),u.options.onRequest&&await u.options.onRequest(u),typeof u.request=="string"&&(u.options.baseURL&&(u.request=rN(u.request,u.options.baseURL)),(u.options.query||u.options.params)&&(u.request=y1(u.request,{...u.options.params,...u.options.query}))),u.options.body&&mv(u.options.method)&&(uN(u.options.body)?(u.options.body=typeof u.options.body=="string"?u.options.body:JSON.stringify(u.options.body),u.options.headers=new t(u.options.headers||{}),u.options.headers.has("content-type")||u.options.headers.set("content-type","application/json"),u.options.headers.has("accept")||u.options.headers.set("accept","application/json")):("pipeTo"in u.options.body&&typeof u.options.body.pipeTo=="function"||typeof u.options.body.pipe=="function")&&("duplex"in u.options||(u.options.duplex="half")));let f;if(!u.options.signal&&u.options.timeout){const S=new n;f=setTimeout(()=>S.abort(),u.options.timeout),u.options.signal=S.signal}try{u.response=await e(u.request,u.options)}catch(S){return u.error=S,u.options.onRequestError&&await u.options.onRequestError(u),await r(u)}finally{f&&clearTimeout(f)}if(u.response.body&&!pN.has(u.response.status)&&u.options.method!=="HEAD"){const S=(u.options.parseResponse?"json":u.options.responseType)||dN(u.response.headers.get("content-type")||"");switch(S){case"json":{const A=await u.response.text(),k=u.options.parseResponse||hf;u.response._data=k(A);break}case"stream":{u.response._data=u.response.body;break}default:u.response._data=await u.response[S]()}}return u.options.onResponse&&await u.options.onResponse(u),!u.options.ignoreResponseError&&u.response.status>=400&&u.response.status<600?(u.options.onResponseError&&await u.options.onResponseError(u),await r(u)):u.response},a=async function(l,c){return(await i(l,c))._data};return a.raw=i,a.native=(...o)=>e(...o),a.create=(o={})=>k1({...s,defaults:{...s.defaults,...o}}),a}const Hw=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),wN=Hw.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),yN=Hw.Headers,vN=Hw.AbortController,bN=k1({fetch:wN,Headers:yN,AbortController:vN}),SN=bN,AN=()=>{var s;return((s=window==null?void 0:window.__NUXT__)==null?void 0:s.config)||{}},mm=AN().app,kN=()=>mm.baseURL,EN=()=>mm.buildAssetsDir,$w=(...s)=>b1(E1(),EN(),...s),E1=(...s)=>{const e=mm.cdnURL||mm.baseURL;return s.length?b1(e,...s):e};globalThis.__buildAssetsURL=$w,globalThis.__publicAssetsURL=E1;globalThis.$fetch||(globalThis.$fetch=SN.create({baseURL:kN()}));function Sp(s,e={},t){for(const n in s){const r=s[n],i=t?`${t}:${n}`:n;typeof r=="object"&&r!==null?Sp(r,e,i):typeof r=="function"&&(e[i]=r)}return e}const CN={run:s=>s()},NN=()=>CN,C1=typeof console.createTask<"u"?console.createTask:NN;function IN(s,e){const t=e.shift(),n=C1(t);return s.reduce((r,i)=>r.then(()=>n.run(()=>i(...e))),Promise.resolve())}function _N(s,e){const t=e.shift(),n=C1(t);return Promise.all(s.map(r=>n.run(()=>r(...e))))}function Sg(s,e){for(const t of[...s])t(e)}class BN{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,t,n={}){if(!e||typeof t!="function")return()=>{};const r=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!n.allowDeprecated){let a=i.message;a||(a=`${r} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(a)||(console.warn(a),this._deprecatedMessages.add(a))}if(!t.name)try{Object.defineProperty(t,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(t),()=>{t&&(this.removeHook(e,t),t=void 0)}}hookOnce(e,t){let n,r=(...i)=>(typeof n=="function"&&n(),n=void 0,r=void 0,t(...i));return n=this.hook(e,r),n}removeHook(e,t){if(this._hooks[e]){const n=this._hooks[e].indexOf(t);n!==-1&&this._hooks[e].splice(n,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,t){this._deprecatedHooks[e]=typeof t=="string"?{to:t}:t;const n=this._hooks[e]||[];delete this._hooks[e];for(const r of n)this.hook(e,r)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const t in e)this.deprecateHook(t,e[t])}addHooks(e){const t=Sp(e),n=Object.keys(t).map(r=>this.hook(r,t[r]));return()=>{for(const r of n.splice(0,n.length))r()}}removeHooks(e){const t=Sp(e);for(const n in t)this.removeHook(n,t[n])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...t){return t.unshift(e),this.callHookWith(IN,e,...t)}callHookParallel(e,...t){return t.unshift(e),this.callHookWith(_N,e,...t)}callHookWith(e,t,...n){const r=this._before||this._after?{name:t,args:n,context:{}}:void 0;this._before&&Sg(this._before,r);const i=e(t in this._hooks?[...this._hooks[t]]:[],n);return i instanceof Promise?i.finally(()=>{this._after&&r&&Sg(this._after,r)}):(this._after&&r&&Sg(this._after,r),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const t=this._before.indexOf(e);t!==-1&&this._before.splice(t,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const t=this._after.indexOf(e);t!==-1&&this._after.splice(t,1)}}}}function N1(){return new BN}function xN(s={}){let e,t=!1;const n=a=>{if(e&&e!==a)throw new Error("Context conflict")};let r;if(s.asyncContext){const a=s.AsyncLocalStorage||globalThis.AsyncLocalStorage;a?r=new a:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(r&&e===void 0){const a=r.getStore();if(a!==void 0)return a}return e};return{use:()=>{const a=i();if(a===void 0)throw new Error("Context is not available");return a},tryUse:()=>i(),set:(a,o)=>{o||n(a),e=a,t=!0},unset:()=>{e=void 0,t=!1},call:(a,o)=>{n(a),e=a;try{return r?r.run(a,o):o()}finally{t||(e=void 0)}},async callAsync(a,o){e=a;const l=()=>{e=a},c=()=>e===a?l:void 0;Ap.add(c);try{const u=r?r.run(a,o):o();return t||(e=void 0),await u}finally{Ap.delete(c)}}}}function TN(s={}){const e={};return{get(t,n={}){return e[t]||(e[t]=xN({...s,...n})),e[t],e[t]}}}const gm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},gv="__unctx__",RN=gm[gv]||(gm[gv]=TN()),ON=(s,e={})=>RN.get(s,e),pv="__unctx_async_handlers__",Ap=gm[pv]||(gm[pv]=new Set);function Ka(s){const e=[];for(const r of Ap){const i=r();i&&e.push(i)}const t=()=>{for(const r of e)r()};let n=s();return n&&typeof n=="object"&&"catch"in n&&(n=n.catch(r=>{throw t(),r})),[n,t]}const I1=ON("nuxt-app",{asyncContext:!1}),VN="__nuxt_plugin";function PN(s){let e=0;const t={_scope:pw(),provide:void 0,globalName:"nuxt",versions:{get nuxt(){return"3.11.2"},get vue(){return t.vueApp.version}},payload:Ni({data:{},state:{},once:new Set,_errors:{},...window.__NUXT__??{}}),static:{data:{}},runWithContext:r=>t._scope.run(()=>UN(t,r)),isHydrating:!0,deferHydration(){if(!t.isHydrating)return()=>{};e++;let r=!1;return()=>{if(!r&&(r=!0,e--,e===0))return t.isHydrating=!1,t.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:{},_payloadRevivers:{},...s};t.hooks=N1(),t.hook=t.hooks.hook,t.callHook=t.hooks.callHook,t.provide=(r,i)=>{const a="$"+r;Kf(t,a,i),Kf(t.vueApp.config.globalProperties,a,i)},Kf(t.vueApp,"$nuxt",t),Kf(t.vueApp.config.globalProperties,"$nuxt",t);{window.addEventListener("nuxt.preloadError",i=>{t.callHook("app:chunkError",{error:i.payload})}),window.useNuxtApp=window.useNuxtApp||rt;const r=t.hook("app:error",(...i)=>{console.error("[nuxt] error caught during app initialization",...i)});t.hook("app:mounted",r)}const n=t.payload.config;return t.provide("config",n),t}async function LN(s,e){if(e.hooks&&s.hooks.addHooks(e.hooks),typeof e=="function"){const{provide:t}=await s.runWithContext(()=>e(s))||{};if(t&&typeof t=="object")for(const n in t)s.provide(n,t[n])}}async function DN(s,e){const t=[],n=[],r=[],i=[];let a=0;async function o(l){var u;const c=((u=l.dependsOn)==null?void 0:u.filter(f=>e.some(h=>h._name===f)&&!t.includes(f)))??[];if(c.length>0)n.push([new Set(c),l]);else{const f=LN(s,l).then(async()=>{l._name&&(t.push(l._name),await Promise.all(n.map(async([h,m])=>{h.has(l._name)&&(h.delete(l._name),h.size===0&&(a++,await o(m)))})))});l.parallel?r.push(f.catch(h=>i.push(h))):await f}}for(const l of e)await o(l);if(await Promise.all(r),a)for(let l=0;l<a;l++)await Promise.all(r);if(i.length)throw i[0]}function xi(s){if(typeof s=="function")return s;const e=s._name||s.name;return delete s.name,Object.assign(s.setup||(()=>{}),s,{[VN]:!0,_name:e})}function UN(s,e,t){const n=()=>e();return I1.set(s),s.vueApp.runWithContext(n)}function MN(){var e;let s;return JS()&&(s=(e=Nf())==null?void 0:e.appContext.app.$nuxt),s=s||I1.tryUse(),s||null}function rt(){const s=MN();if(!s)throw new Error("[nuxt] instance unavailable");return s}function gs(s){return rt().$config}function Kf(s,e,t){Object.defineProperty(s,e,{get:()=>t})}const Jf=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function HN(s,e){if(typeof s!="string")throw new TypeError("argument str must be a string");const t={},r=(e||{}).decode||jN;let i=0;for(;i<s.length;){const a=s.indexOf("=",i);if(a===-1)break;let o=s.indexOf(";",i);if(o===-1)o=s.length;else if(o<a){i=s.lastIndexOf(";",a-1)+1;continue}const l=s.slice(i,a).trim();if(t[l]===void 0){let c=s.slice(a+1,o).trim();c.codePointAt(0)===34&&(c=c.slice(1,-1)),t[l]=FN(c,r)}i=o+1}return t}function wv(s,e,t){const n=t||{},r=n.encode||KN;if(typeof r!="function")throw new TypeError("option encode is invalid");if(!Jf.test(s))throw new TypeError("argument name is invalid");const i=r(e);if(i&&!Jf.test(i))throw new TypeError("argument val is invalid");let a=s+"="+i;if(n.maxAge!==void 0&&n.maxAge!==null){const o=n.maxAge-0;if(Number.isNaN(o)||!Number.isFinite(o))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(o)}if(n.domain){if(!Jf.test(n.domain))throw new TypeError("option domain is invalid");a+="; Domain="+n.domain}if(n.path){if(!Jf.test(n.path))throw new TypeError("option path is invalid");a+="; Path="+n.path}if(n.expires){if(!$N(n.expires)||Number.isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");a+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(a+="; HttpOnly"),n.secure&&(a+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":{a+="; Priority=Low";break}case"medium":{a+="; Priority=Medium";break}case"high":{a+="; Priority=High";break}default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:{a+="; SameSite=Strict";break}case"lax":{a+="; SameSite=Lax";break}case"strict":{a+="; SameSite=Strict";break}case"none":{a+="; SameSite=None";break}default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(a+="; Partitioned"),a}function $N(s){return Object.prototype.toString.call(s)==="[object Date]"||s instanceof Date}function FN(s,e){try{return e(s)}catch{return s}}function jN(s){return s.includes("%")?decodeURIComponent(s):s}function KN(s){return encodeURIComponent(s)}const yv=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});function vv(s,e){e?e={...yv,...e}:e=yv;const t=_1(e);return t.dispatch(s),t.toString()}const JN=Object.freeze(["prototype","__proto__","constructor"]);function _1(s){let e="",t=new Map;const n=r=>{e+=r};return{toString(){return e},getContext(){return t},dispatch(r){return s.replacer&&(r=s.replacer(r)),this[r===null?"null":typeof r](r)},object(r){if(r&&typeof r.toJSON=="function")return this.object(r.toJSON());const i=Object.prototype.toString.call(r);let a="";const o=i.length;o<10?a="unknown:["+i+"]":a=i.slice(8,o-1),a=a.toLowerCase();let l=null;if((l=t.get(r))===void 0)t.set(r,t.size);else return this.dispatch("[CIRCULAR:"+l+"]");if(typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(r))return n("buffer:"),n(r.toString("utf8"));if(a!=="object"&&a!=="function"&&a!=="asyncfunction")this[a]?this[a](r):s.ignoreUnknown||this.unkown(r,a);else{let c=Object.keys(r);s.unorderedObjects&&(c=c.sort());let u=[];s.respectType!==!1&&!bv(r)&&(u=JN),s.excludeKeys&&(c=c.filter(h=>!s.excludeKeys(h)),u=u.filter(h=>!s.excludeKeys(h))),n("object:"+(c.length+u.length)+":");const f=h=>{this.dispatch(h),n(":"),s.excludeValues||this.dispatch(r[h]),n(",")};for(const h of c)f(h);for(const h of u)f(h)}},array(r,i){if(i=i===void 0?s.unorderedArrays!==!1:i,n("array:"+r.length+":"),!i||r.length<=1){for(const l of r)this.dispatch(l);return}const a=new Map,o=r.map(l=>{const c=_1(s);c.dispatch(l);for(const[u,f]of c.getContext())a.set(u,f);return c.toString()});return t=a,o.sort(),this.array(o,!1)},date(r){return n("date:"+r.toJSON())},symbol(r){return n("symbol:"+r.toString())},unkown(r,i){if(n(i),!!r&&(n(":"),r&&typeof r.entries=="function"))return this.array(Array.from(r.entries()),!0)},error(r){return n("error:"+r.toString())},boolean(r){return n("bool:"+r)},string(r){n("string:"+r.length+":"),n(r)},function(r){n("fn:"),bv(r)?this.dispatch("[native]"):this.dispatch(r.toString()),s.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(r.name)),s.respectFunctionProperties&&this.object(r)},number(r){return n("number:"+r)},xml(r){return n("xml:"+r.toString())},null(){return n("Null")},undefined(){return n("Undefined")},regexp(r){return n("regex:"+r.toString())},uint8array(r){return n("uint8array:"),this.dispatch(Array.prototype.slice.call(r))},uint8clampedarray(r){return n("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(r))},int8array(r){return n("int8array:"),this.dispatch(Array.prototype.slice.call(r))},uint16array(r){return n("uint16array:"),this.dispatch(Array.prototype.slice.call(r))},int16array(r){return n("int16array:"),this.dispatch(Array.prototype.slice.call(r))},uint32array(r){return n("uint32array:"),this.dispatch(Array.prototype.slice.call(r))},int32array(r){return n("int32array:"),this.dispatch(Array.prototype.slice.call(r))},float32array(r){return n("float32array:"),this.dispatch(Array.prototype.slice.call(r))},float64array(r){return n("float64array:"),this.dispatch(Array.prototype.slice.call(r))},arraybuffer(r){return n("arraybuffer:"),this.dispatch(new Uint8Array(r))},url(r){return n("url:"+r.toString())},map(r){n("map:");const i=[...r];return this.array(i,s.unorderedSets!==!1)},set(r){n("set:");const i=[...r];return this.array(i,s.unorderedSets!==!1)},file(r){return n("file:"),this.dispatch([r.name,r.size,r.type,r.lastModfied])},blob(){if(s.ignoreUnknown)return n("[blob]");throw new Error(`Hashing Blob objects is currently not supported
Use "options.replacer" or "options.ignoreUnknown"
`)},domwindow(){return n("domwindow")},bigint(r){return n("bigint:"+r.toString())},process(){return n("process")},timer(){return n("timer")},pipe(){return n("pipe")},tcp(){return n("tcp")},udp(){return n("udp")},tty(){return n("tty")},statwatcher(){return n("statwatcher")},securecontext(){return n("securecontext")},connection(){return n("connection")},zlib(){return n("zlib")},context(){return n("context")},nodescript(){return n("nodescript")},httpparser(){return n("httpparser")},dataview(){return n("dataview")},signal(){return n("signal")},fsevent(){return n("fsevent")},tlswrap(){return n("tlswrap")}}}const B1="[native code] }",WN=B1.length;function bv(s){return typeof s!="function"?!1:Function.prototype.toString.call(s).slice(-WN)===B1}function qN(s,e,t={}){return s===e||vv(s,t)===vv(e,t)}function GN(s,e){return{ctx:{table:s},matchAll:t=>T1(t,s)}}function x1(s){const e={};for(const t in s)e[t]=t==="dynamic"?new Map(Object.entries(s[t]).map(([n,r])=>[n,x1(r)])):new Map(Object.entries(s[t]));return e}function YN(s){return GN(x1(s))}function T1(s,e,t){s.endsWith("/")&&(s=s.slice(0,-1)||"/");const n=[];for(const[i,a]of Sv(e.wildcard))(s===i||s.startsWith(i+"/"))&&n.push(a);for(const[i,a]of Sv(e.dynamic))if(s.startsWith(i+"/")){const o="/"+s.slice(i.length).split("/").splice(2).join("/");n.push(...T1(o,a))}const r=e.static.get(s);return r&&n.push(r),n.filter(Boolean)}function Sv(s){return[...s.entries()].sort((e,t)=>e[0].length-t[0].length)}function Ag(s){if(s===null||typeof s!="object")return!1;const e=Object.getPrototypeOf(s);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in s?!1:Symbol.toStringTag in s?Object.prototype.toString.call(s)==="[object Module]":!0}function kp(s,e,t=".",n){if(!Ag(e))return kp(s,{},t,n);const r=Object.assign({},e);for(const i in s){if(i==="__proto__"||i==="constructor")continue;const a=s[i];a!=null&&(n&&n(r,i,a,t)||(Array.isArray(a)&&Array.isArray(r[i])?r[i]=[...a,...r[i]]:Ag(a)&&Ag(r[i])?r[i]=kp(a,r[i],(t?`${t}.`:"")+i.toString(),n):r[i]=a))}return r}function R1(s){return(...e)=>e.reduce((t,n)=>kp(t,n,"",s),{})}const XN=R1(),QN=R1((s,e,t)=>{if(s[e]!==void 0&&typeof t=="function")return s[e]=t(s[e]),!0});function zN(s,e){try{return e in s}catch{return!1}}var ZN=Object.defineProperty,eI=(s,e,t)=>e in s?ZN(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Fi=(s,e,t)=>(eI(s,typeof e!="symbol"?e+"":e,t),t);class Ep extends Error{constructor(e,t={}){super(e,t),Fi(this,"statusCode",500),Fi(this,"fatal",!1),Fi(this,"unhandled",!1),Fi(this,"statusMessage"),Fi(this,"data"),Fi(this,"cause"),t.cause&&!this.cause&&(this.cause=t.cause)}toJSON(){const e={message:this.message,statusCode:Cp(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=O1(this.statusMessage)),this.data!==void 0&&(e.data=this.data),e}}Fi(Ep,"__h3_error__",!0);function tI(s){if(typeof s=="string")return new Ep(s);if(sI(s))return s;const e=new Ep(s.message??s.statusMessage??"",{cause:s.cause||s});if(zN(s,"stack"))try{Object.defineProperty(e,"stack",{get(){return s.stack}})}catch{try{e.stack=s.stack}catch{}}if(s.data&&(e.data=s.data),s.statusCode?e.statusCode=Cp(s.statusCode,e.statusCode):s.status&&(e.statusCode=Cp(s.status,e.statusCode)),s.statusMessage?e.statusMessage=s.statusMessage:s.statusText&&(e.statusMessage=s.statusText),e.statusMessage){const t=e.statusMessage;O1(e.statusMessage)!==t&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return s.fatal!==void 0&&(e.fatal=s.fatal),s.unhandled!==void 0&&(e.unhandled=s.unhandled),e}function sI(s){var e;return((e=s==null?void 0:s.constructor)==null?void 0:e.__h3_error__)===!0}const nI=/[^\u0009\u0020-\u007E]/g;function O1(s=""){return s.replace(nI,"")}function Cp(s,e=200){return!s||(typeof s=="string"&&(s=Number.parseInt(s,10)),s<100||s>999)?e:s}const V1=Symbol("route"),Vc=()=>{var s;return(s=rt())==null?void 0:s.$router},Fw=()=>JS()?Za(V1,rt()._route):rt()._route;const rI=(s,e,t={})=>{const n=rt(),r=t.global||typeof s!="string",i=e;if(!i){console.warn("[nuxt] No route middleware passed to `addRouteMiddleware`.",s);return}r?n._middleware.global.push(i):n._middleware.named[s]=i},iI=()=>{try{if(rt()._processingMiddleware)return!0}catch{return!1}return!1},P1=(s,e)=>{s||(s="/");const t=typeof s=="string"?s:y1(s.path||"/",s.query||{})+(s.hash||"");if(e!=null&&e.open){const{target:o="_blank",windowFeatures:l={}}=e.open,c=Object.entries(l).filter(([u,f])=>f!==void 0).map(([u,f])=>`${u.toLowerCase()}=${f}`).join(", ");return open(t,o,c),Promise.resolve()}const n=(e==null?void 0:e.external)||cr(t,{acceptRelative:!0});if(n){if(!(e!=null&&e.external))throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const o=Bf(t).protocol;if(o&&sN(o))throw new Error(`Cannot navigate to a URL with '${o}' protocol.`)}const r=iI();if(!n&&r)return s;const i=Vc(),a=rt();return n?(a._scope.stop(),e!=null&&e.replace?location.replace(t):location.href=t,r?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e!=null&&e.replace?i.replace(s):i.push(s)},L1="__nuxt_error",jw=()=>NS(rt().payload,"error"),aI=s=>{const e=Kw(s);try{const t=rt(),n=jw();t.hooks.callHook("app:error",e),n.value=n.value||e}catch{throw e}return e},oI=async(s={})=>{const e=rt(),t=jw();e.callHook("app:error:cleared",s),s.redirect&&await Vc().replace(s.redirect),t.value=null},lI=s=>!!s&&typeof s=="object"&&L1 in s,Kw=s=>{const e=tI(s);return Object.defineProperty(e,L1,{value:!0,configurable:!1,writable:!1}),e},cI=-1,uI=-2,hI=-3,fI=-4,dI=-5,mI=-6;function gI(s,e){return pI(JSON.parse(s),e)}function pI(s,e){if(typeof s=="number")return r(s,!0);if(!Array.isArray(s)||s.length===0)throw new Error("Invalid input");const t=s,n=Array(t.length);function r(i,a=!1){if(i===cI)return;if(i===hI)return NaN;if(i===fI)return 1/0;if(i===dI)return-1/0;if(i===mI)return-0;if(a)throw new Error("Invalid input");if(i in n)return n[i];const o=t[i];if(!o||typeof o!="object")n[i]=o;else if(Array.isArray(o))if(typeof o[0]=="string"){const l=o[0],c=e==null?void 0:e[l];if(c)return n[i]=c(r(o[1]));switch(l){case"Date":n[i]=new Date(o[1]);break;case"Set":const u=new Set;n[i]=u;for(let m=1;m<o.length;m+=1)u.add(r(o[m]));break;case"Map":const f=new Map;n[i]=f;for(let m=1;m<o.length;m+=2)f.set(r(o[m]),r(o[m+1]));break;case"RegExp":n[i]=new RegExp(o[1],o[2]);break;case"Object":n[i]=Object(o[1]);break;case"BigInt":n[i]=BigInt(o[1]);break;case"null":const h=Object.create(null);n[i]=h;for(let m=1;m<o.length;m+=2)h[o[m]]=r(o[m+1]);break;default:throw new Error(`Unknown type ${l}`)}}else{const l=new Array(o.length);n[i]=l;for(let c=0;c<o.length;c+=1){const u=o[c];u!==uI&&(l[c]=r(u))}}else{const l={};n[i]=l;for(const c in o){const u=o[c];l[c]=r(u)}}return n[i]}return r(0)}function wI(s){return Array.isArray(s)?s:[s]}const yI=["title","titleTemplate","script","style","noscript"],Cd=["base","meta","link","style","script","noscript"],vI=["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"],bI=["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"],D1=["tagPosition","tagPriority","tagDuplicateStrategy","children","innerHTML","textContent","processTemplateParams"],SI=typeof window<"u";function Jw(s){let e=9;for(let t=0;t<s.length;)e=Math.imul(e^s.charCodeAt(t++),9**9);return((e^e>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function Av(s){return s._h||Jw(s._d?s._d:`${s.tag}:${s.textContent||s.innerHTML||""}:${Object.entries(s.props).map(([e,t])=>`${e}:${String(t)}`).join(",")}`)}function U1(s,e){const{props:t,tag:n}=s;if(bI.includes(n))return n;if(n==="link"&&t.rel==="canonical")return"canonical";if(t.charset)return"charset";const r=["id"];n==="meta"&&r.push("name","property","http-equiv");for(const i of r)if(typeof t[i]<"u"){const a=String(t[i]);return`${n}:${i}:${a}`}return!1}function kv(s,e){return s==null?e||null:typeof s=="function"?s(e):s}async function AI(s,e,t){const n={tag:s,props:await M1(typeof e=="object"&&typeof e!="function"&&!(e instanceof Promise)?{...e}:{[["script","noscript","style"].includes(s)?"innerHTML":"textContent"]:e},["templateParams","titleTemplate"].includes(s))};return D1.forEach(r=>{const i=typeof n.props[r]<"u"?n.props[r]:t[r];typeof i<"u"&&((!["innerHTML","textContent","children"].includes(r)||yI.includes(n.tag))&&(n[r==="children"?"innerHTML":r]=i),delete n.props[r])}),n.props.body&&(n.tagPosition="bodyClose",delete n.props.body),n.tag==="script"&&typeof n.innerHTML=="object"&&(n.innerHTML=JSON.stringify(n.innerHTML),n.props.type=n.props.type||"application/json"),Array.isArray(n.props.content)?n.props.content.map(r=>({...n,props:{...n.props,content:r}})):n}function kI(s,e){var n;const t=s==="class"?" ":";";return typeof e=="object"&&!Array.isArray(e)&&(e=Object.entries(e).filter(([,r])=>r).map(([r,i])=>s==="style"?`${r}:${i}`:r)),(n=Array.isArray(e)?e.join(t):e)==null?void 0:n.split(t).filter(r=>r.trim()).filter(Boolean).join(t)}async function M1(s,e){for(const t of Object.keys(s)){if(["class","style"].includes(t)){s[t]=kI(t,s[t]);continue}if(s[t]instanceof Promise&&(s[t]=await s[t]),!e&&!D1.includes(t)){const n=String(s[t]),r=t.startsWith("data-");n==="true"||n===""?s[t]=r?"true":!0:s[t]||(r&&n==="false"?s[t]="false":delete s[t])}}return s}const EI=10;async function CI(s){const e=[];return Object.entries(s.resolvedInput).filter(([t,n])=>typeof n<"u"&&vI.includes(t)).forEach(([t,n])=>{const r=wI(n);e.push(...r.map(i=>AI(t,i,s)).flat())}),(await Promise.all(e)).flat().filter(Boolean).map((t,n)=>(t._e=s._i,s.mode&&(t._m=s.mode),t._p=(s._i<<EI)+n,t))}const Ev={base:-10,title:10},Cv={critical:-80,high:-10,low:20};function pm(s){let e=100;const t=s.tagPriority;return typeof t=="number"?t:(s.tag==="meta"?(s.props["http-equiv"]==="content-security-policy"&&(e=-30),s.props.charset&&(e=-20),s.props.name==="viewport"&&(e=-15)):s.tag==="link"&&s.props.rel==="preconnect"?e=20:s.tag in Ev&&(e=Ev[s.tag]),typeof t=="string"&&t in Cv?e+Cv[t]:e)}const NI=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}],Nv=["onload","onerror","onabort","onprogress","onloadstart"],gr="%separator";function Nd(s,e,t){if(typeof s!="string"||!s.includes("%"))return s;function n(a){let o;return["s","pageTitle"].includes(a)?o=e.pageTitle:a.includes(".")?o=a.split(".").reduce((l,c)=>l&&l[c]||void 0,e):o=e[a],typeof o<"u"?(o||"").replace(/"/g,'\\"'):!1}let r=s;try{r=decodeURI(s)}catch{}return(r.match(/%(\w+\.+\w+)|%(\w+)/g)||[]).sort().reverse().forEach(a=>{const o=n(a.slice(1));typeof o=="string"&&(s=s.replace(new RegExp(`\\${a}(\\W|$)`,"g"),(l,c)=>`${o}${c}`).trim())}),s.includes(gr)&&(s.endsWith(gr)&&(s=s.slice(0,-gr.length).trim()),s.startsWith(gr)&&(s=s.slice(gr.length).trim()),s=s.replace(new RegExp(`\\${gr}\\s*\\${gr}`,"g"),gr),s=Nd(s,{separator:t},t)),s}async function H1(s,e={}){var u;const t=e.document||s.resolvedOptions.document;if(!t||!s.dirty)return;const n={shouldRender:!0,tags:[]};if(await s.hooks.callHook("dom:beforeRender",n),!n.shouldRender)return;const r=(await s.resolveTags()).map(f=>({tag:f,id:Cd.includes(f.tag)?Av(f):f.tag,shouldRender:!0}));let i=s._dom;if(!i){i={elMap:{htmlAttrs:t.documentElement,bodyAttrs:t.body}};for(const f of["body","head"]){const h=(u=t[f])==null?void 0:u.children,m=[];for(const S of[...h].filter(A=>Cd.includes(A.tagName.toLowerCase()))){const A={tag:S.tagName.toLowerCase(),props:await M1(S.getAttributeNames().reduce((x,y)=>({...x,[y]:S.getAttribute(y)}),{})),innerHTML:S.innerHTML};let k=1,T=U1(A);for(;T&&m.find(x=>x._d===T);)T=`${T}:${k++}`;A._d=T||void 0,m.push(A),i.elMap[S.getAttribute("data-hid")||Av(A)]=S}}}i.pendingSideEffects={...i.sideEffects||{}},i.sideEffects={};function a(f,h,m){const S=`${f}:${h}`;i.sideEffects[S]=m,delete i.pendingSideEffects[S]}function o({id:f,$el:h,tag:m}){const S=m.tag.endsWith("Attrs");i.elMap[f]=h,S||(["textContent","innerHTML"].forEach(A=>{m[A]&&m[A]!==h[A]&&(h[A]=m[A])}),a(f,"el",()=>{var A;(A=i.elMap[f])==null||A.remove(),delete i.elMap[f]}));for(const[A,k]of Object.entries(m._eventHandlers||{}))h.getAttribute(`data-${A}`)!==""&&((m.tag==="bodyAttrs"?t.defaultView:h).addEventListener(A.replace("on",""),k.bind(h)),h.setAttribute(`data-${A}`,""));Object.entries(m.props).forEach(([A,k])=>{const T=`attr:${A}`;if(A==="class")for(const x of(k||"").split(" ").filter(Boolean))S&&a(f,`${T}:${x}`,()=>h.classList.remove(x)),!h.classList.contains(x)&&h.classList.add(x);else if(A==="style")for(const x of(k||"").split(";").filter(Boolean)){const[y,...p]=x.split(":").map(E=>E.trim());a(f,`${T}:${x}:${y}`,()=>{h.style.removeProperty(y)}),h.style.setProperty(y,p.join(":"))}else h.getAttribute(A)!==k&&h.setAttribute(A,k===!0?"":String(k)),S&&a(f,T,()=>h.removeAttribute(A))})}const l=[],c={bodyClose:void 0,bodyOpen:void 0,head:void 0};for(const f of r){const{tag:h,shouldRender:m,id:S}=f;if(m){if(h.tag==="title"){t.title=h.textContent;continue}f.$el=f.$el||i.elMap[S],f.$el?o(f):Cd.includes(h.tag)&&l.push(f)}}for(const f of l){const h=f.tag.tagPosition||"head";f.$el=t.createElement(f.tag.tag),o(f),c[h]=c[h]||t.createDocumentFragment(),c[h].appendChild(f.$el)}for(const f of r)await s.hooks.callHook("dom:renderTag",f,t,a);c.head&&t.head.appendChild(c.head),c.bodyOpen&&t.body.insertBefore(c.bodyOpen,t.body.firstChild),c.bodyClose&&t.body.appendChild(c.bodyClose),Object.values(i.pendingSideEffects).forEach(f=>f()),s._dom=i,s.dirty=!1,await s.hooks.callHook("dom:rendered",{renders:r})}async function II(s,e={}){const t=e.delayFn||(n=>setTimeout(n,10));return s._domUpdatePromise=s._domUpdatePromise||new Promise(n=>t(async()=>{await H1(s,e),delete s._domUpdatePromise,n()}))}function _I(s){return e=>{var n,r;const t=((r=(n=e.resolvedOptions.document)==null?void 0:n.head.querySelector('script[id="unhead:payload"]'))==null?void 0:r.innerHTML)||!1;return t&&e.push(JSON.parse(t)),{mode:"client",hooks:{"entries:updated":function(i){II(i,s)}}}}}const BI=["templateParams","htmlAttrs","bodyAttrs"],xI={hooks:{"tag:normalise":function({tag:s}){["hid","vmid","key"].forEach(n=>{s.props[n]&&(s.key=s.props[n],delete s.props[n])});const t=U1(s)||(s.key?`${s.tag}:${s.key}`:!1);t&&(s._d=t)},"tags:resolve":function(s){const e={};s.tags.forEach(n=>{const r=(n.key?`${n.tag}:${n.key}`:n._d)||n._p,i=e[r];if(i){let o=n==null?void 0:n.tagDuplicateStrategy;if(!o&&BI.includes(n.tag)&&(o="merge"),o==="merge"){const l=i.props;["class","style"].forEach(c=>{l[c]&&(n.props[c]?(c==="style"&&!l[c].endsWith(";")&&(l[c]+=";"),n.props[c]=`${l[c]} ${n.props[c]}`):n.props[c]=l[c])}),e[r].props={...l,...n.props};return}else if(n._e===i._e){i._duped=i._duped||[],n._d=`${i._d}:${i._duped.length+1}`,i._duped.push(n);return}else if(pm(n)>pm(i))return}const a=Object.keys(n.props).length+(n.innerHTML?1:0)+(n.textContent?1:0);if(Cd.includes(n.tag)&&a===0){delete e[r];return}e[r]=n});const t=[];Object.values(e).forEach(n=>{const r=n._duped;delete n._duped,t.push(n),r&&t.push(...r)}),s.tags=t,s.tags=s.tags.filter(n=>!(n.tag==="meta"&&(n.props.name||n.props.property)&&!n.props.content))}}},TI={mode:"server",hooks:{"tags:resolve":function(s){const e={};s.tags.filter(t=>["titleTemplate","templateParams","title"].includes(t.tag)&&t._m==="server").forEach(t=>{e[t.tag]=t.tag.startsWith("title")?t.textContent:t.props}),Object.keys(e).length&&s.tags.push({tag:"script",innerHTML:JSON.stringify(e),props:{id:"unhead:payload",type:"application/json"}})}}},RI=["script","link","bodyAttrs"],OI=s=>({hooks:{"tags:resolve":function(e){for(const t of e.tags.filter(n=>RI.includes(n.tag)))Object.entries(t.props).forEach(([n,r])=>{n.startsWith("on")&&typeof r=="function"&&(s.ssr&&Nv.includes(n)?t.props[n]=`this.dataset.${n}fired = true`:delete t.props[n],t._eventHandlers=t._eventHandlers||{},t._eventHandlers[n]=r)}),s.ssr&&t._eventHandlers&&(t.props.src||t.props.href)&&(t.key=t.key||Jw(t.props.src||t.props.href))},"dom:renderTag":function({$el:e,tag:t}){var n,r;for(const i of Object.keys((e==null?void 0:e.dataset)||{}).filter(a=>Nv.some(o=>`${o}fired`===a))){const a=i.replace("fired","");(r=(n=t._eventHandlers)==null?void 0:n[a])==null||r.call(e,new Event(a.replace("on","")))}}}}),VI=["link","style","script","noscript"],PI={hooks:{"tag:normalise":({tag:s})=>{s.key&&VI.includes(s.tag)&&(s.props["data-hid"]=s._h=Jw(s.key))}}},LI={hooks:{"tags:resolve":s=>{const e=t=>{var n;return(n=s.tags.find(r=>r._d===t))==null?void 0:n._p};for(const{prefix:t,offset:n}of NI)for(const r of s.tags.filter(i=>typeof i.tagPriority=="string"&&i.tagPriority.startsWith(t))){const i=e(r.tagPriority.replace(t,""));typeof i<"u"&&(r._p=i+n)}s.tags.sort((t,n)=>t._p-n._p).sort((t,n)=>pm(t)-pm(n))}}},DI={meta:"content",link:"href",htmlAttrs:"lang"},UI=s=>({hooks:{"tags:resolve":e=>{var o;const{tags:t}=e,n=(o=t.find(l=>l.tag==="title"))==null?void 0:o.textContent,r=t.findIndex(l=>l.tag==="templateParams"),i=r!==-1?t[r].props:{},a=i.separator||"|";delete i.separator,i.pageTitle=Nd(i.pageTitle||n||"",i,a);for(const l of t.filter(c=>c.processTemplateParams!==!1)){const c=DI[l.tag];c&&typeof l.props[c]=="string"?l.props[c]=Nd(l.props[c],i,a):(l.processTemplateParams===!0||["titleTemplate","title"].includes(l.tag))&&["innerHTML","textContent"].forEach(u=>{typeof l[u]=="string"&&(l[u]=Nd(l[u],i,a))})}s._templateParams=i,s._separator=a,e.tags=t.filter(l=>l.tag!=="templateParams")}}}),MI={hooks:{"tags:resolve":s=>{const{tags:e}=s;let t=e.findIndex(r=>r.tag==="titleTemplate");const n=e.findIndex(r=>r.tag==="title");if(n!==-1&&t!==-1){const r=kv(e[t].textContent,e[n].textContent);r!==null?e[n].textContent=r||e[n].textContent:delete e[n]}else if(t!==-1){const r=kv(e[t].textContent);r!==null&&(e[t].textContent=r,e[t].tag="title",t=-1)}t!==-1&&delete e[t],s.tags=e.filter(Boolean)}}},HI={hooks:{"tags:afterResolve":function(s){for(const e of s.tags)typeof e.innerHTML=="string"&&(e.innerHTML&&["application/ld+json","application/json"].includes(e.props.type)?e.innerHTML=e.innerHTML.replace(/</g,"\\u003C"):e.innerHTML=e.innerHTML.replace(new RegExp(`</${e.tag}`,"g"),`<\\/${e.tag}`))}}};let $1;function $I(s={}){const e=FI(s);return e.use(_I()),$1=e}function Iv(s,e){return!s||s==="server"&&e||s==="client"&&!e}function FI(s={}){const e=N1();e.addHooks(s.hooks||{}),s.document=s.document||(SI?document:void 0);const t=!s.document,n=()=>{o.dirty=!0,e.callHook("entries:updated",o)};let r=0,i=[];const a=[],o={plugins:a,dirty:!1,resolvedOptions:s,hooks:e,headEntries(){return i},use(l){const c=typeof l=="function"?l(o):l;(!c.key||!a.some(u=>u.key===c.key))&&(a.push(c),Iv(c.mode,t)&&e.addHooks(c.hooks||{}))},push(l,c){c==null||delete c.head;const u={_i:r++,input:l,...c};return Iv(u.mode,t)&&(i.push(u),n()),{dispose(){i=i.filter(f=>f._i!==u._i),e.callHook("entries:updated",o),n()},patch(f){i=i.map(h=>(h._i===u._i&&(h.input=u.input=f),h)),n()}}},async resolveTags(){const l={tags:[],entries:[...i]};await e.callHook("entries:resolve",l);for(const c of l.entries){const u=c.resolvedInput||c.input;if(c.resolvedInput=await(c.transform?c.transform(u):u),c.resolvedInput)for(const f of await CI(c)){const h={tag:f,entry:c,resolvedOptions:o.resolvedOptions};await e.callHook("tag:normalise",h),l.tags.push(h.tag)}}return await e.callHook("tags:beforeResolve",l),await e.callHook("tags:resolve",l),await e.callHook("tags:afterResolve",l),l.tags},ssr:t};return[xI,TI,OI,PI,LI,UI,MI,HI,...(s==null?void 0:s.plugins)||[]].forEach(l=>o.use(l)),o.hooks.callHook("init",o),o}function jI(){return $1}const KI=h1.startsWith("3");function JI(s){return typeof s=="function"?s():ne(s)}function wm(s,e=""){if(s instanceof Promise)return s;const t=JI(s);return!s||!t?t:Array.isArray(t)?t.map(n=>wm(n,e)):typeof t=="object"?Object.fromEntries(Object.entries(t).map(([n,r])=>n==="titleTemplate"||n.startsWith("on")?[n,ne(r)]:[n,wm(r,n)])):t}const WI={hooks:{"entries:resolve":function(s){for(const e of s.entries)e.resolvedInput=wm(e.input)}}},F1="usehead";function qI(s){return{install(t){KI&&(t.config.globalProperties.$unhead=s,t.config.globalProperties.$head=s,t.provide(F1,s))}}.install}function GI(s={}){s.domDelayFn=s.domDelayFn||(t=>Jm(()=>setTimeout(()=>t(),0)));const e=$I(s);return e.use(WI),e.install=qI(e),e}const Np=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ip="__unhead_injection_handler__";function YI(s){Np[Ip]=s}function XI(){if(Ip in Np)return Np[Ip]();const s=Za(F1);return s||jI()}function QI(s,e={}){const t=e.head||XI();if(t)return t.ssr?t.push(s,e):zI(t,s,e)}function zI(s,e,t={}){const n=Fe(!1),r=Fe({});vE(()=>{r.value=n.value?{}:wm(e)});const i=s.push(r.value,t);return tn(r,o=>{i.patch(o)}),Nf()&&(MS(()=>{i.dispose()}),DS(()=>{n.value=!0}),LS(()=>{n.value=!1})),i}function dn(s){if(typeof s!="object")return s;var e,t,n=Object.prototype.toString.call(s);if(n==="[object Object]"){if(s.constructor!==Object&&typeof s.constructor=="function"){t=new s.constructor;for(e in s)s.hasOwnProperty(e)&&t[e]!==s[e]&&(t[e]=dn(s[e]))}else{t={};for(e in s)e==="__proto__"?Object.defineProperty(t,e,{value:dn(s[e]),configurable:!0,enumerable:!0,writable:!0}):t[e]=dn(s[e])}return t}if(n==="[object Array]"){for(e=s.length,t=Array(e);e--;)t[e]=dn(s[e]);return t}return n==="[object Set]"?(t=new Set,s.forEach(function(r){t.add(dn(r))}),t):n==="[object Map]"?(t=new Map,s.forEach(function(r,i){t.set(dn(i),dn(r))}),t):n==="[object Date]"?new Date(+s):n==="[object RegExp]"?(t=new RegExp(s.source,s.flags),t.lastIndex=s.lastIndex,t):n==="[object DataView]"?new s.constructor(dn(s.buffer)):n==="[object ArrayBuffer]"?s.slice(0):n.slice(-6)==="Array]"?new s.constructor(s):s}const ZI={nuxt:{buildId:"1eb64423-1457-4cca-9cc4-88609f026863"}},e_=QN(ZI);function j1(){const s=rt();return s._appConfig||(s._appConfig=Ni(e_)),s._appConfig}const QP={componentName:"NuxtLink"},t_="#__nuxt";let Id,K1;function s_(){var e;const s=(e=j1().nuxt)==null?void 0:e.buildId;return Id=$fetch($w(`builds/meta/${s}.json`)),Id.then(t=>{K1=YN(t.matcher)}),Id}function zm(){return Id||s_()}async function Ww(s){return await zm(),XN({},...K1.matchAll(s).reverse())}function _v(s,e={}){const t=r_(s,e),n=rt(),r=n._payloadCache=n._payloadCache||{};return t in r||(r[t]=i_(s).then(i=>i?J1(t).then(a=>a||(delete r[t],null)):(r[t]=null,null))),r[t]}const n_="_payload.json";function r_(s,e={}){var r;const t=new URL(s,"http://localhost");if(t.host!=="localhost"||cr(t.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+s);const n=e.hash||(e.fresh?Date.now():(r=j1().nuxt)==null?void 0:r.buildId);return go(gs().app.baseURL,t.pathname,n_+(n?`?${n}`:""))}async function J1(s){const e=fetch(s).then(t=>t.text().then(W1));try{return await e}catch(t){console.warn("[nuxt] Cannot load payload ",s,t)}return null}async function i_(s=Fw().path){if(s=Qm(s),(await zm()).prerendered.includes(s))return!0;const t=await Ww(s);return!!t.prerender&&!t.redirect}let Wf=null;async function a_(){if(Wf)return Wf;const s=document.getElementById("__NUXT_DATA__");if(!s)return{};const e=await W1(s.textContent||""),t=s.dataset.src?await J1(s.dataset.src):void 0;return Wf={...e,...t,...window.__NUXT__},Wf}async function W1(s){return await gI(s,rt()._payloadRevivers)}function o_(s,e){rt()._payloadRevivers[s]=e}const Bv={NuxtError:s=>Kw(s),EmptyShallowRef:s=>op(s==="_"?void 0:s==="0n"?BigInt(0):hf(s)),EmptyRef:s=>Fe(s==="_"?void 0:s==="0n"?BigInt(0):hf(s)),ShallowRef:s=>op(s),ShallowReactive:s=>bS(s),Ref:s=>Fe(s),Reactive:s=>Ni(s)},l_=xi({name:"nuxt:revive-payload:client",order:-30,async setup(s){let e,t;for(const n in Bv)o_(n,Bv[n]);Object.assign(s.payload,([e,t]=Ka(()=>s.runWithContext(a_)),e=await e,t(),e)),window.__NUXT__=s.payload}}),c_=[],u_=xi({name:"nuxt:head",enforce:"pre",setup(s){const e=GI({plugins:c_});YI(()=>rt().vueApp._context.provides.usehead),s.vueApp.use(e);{let t=!0;const n=async()=>{t=!1,await H1(e)};e.hooks.hook("dom:beforeRender",r=>{r.shouldRender=!t}),s.hooks.hook("page:start",()=>{t=!0}),s.hooks.hook("page:finish",()=>{s.isHydrating||n()}),s.hooks.hook("app:error",n),s.hooks.hook("app:suspense:resolve",n)}}}),h_=async s=>{let e,t;const n=([e,t]=Ka(()=>Ww(s.path)),e=await e,t(),e);if(n.redirect)return cr(n.redirect,{acceptRelative:!0})?(window.location.href=n.redirect,!1):n.redirect},f_=[h_];function kg(s){typeof s=="object"&&(s=A1({pathname:s.path||"",search:w1(s.query||{}),hash:s.hash||""}));const e=Bf(s.toString());return{path:e.pathname,fullPath:s,query:Mw(e.search),hash:e.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:s}}const d_=xi({name:"nuxt:router",enforce:"pre",setup(s){const e=iN(window.location.pathname,gs().app.baseURL)+window.location.search+window.location.hash,t=[],n={"navigate:before":[],"resolve:before":[],"navigate:after":[],error:[]},r=(f,h)=>(n[f].push(h),()=>n[f].splice(n[f].indexOf(h),1)),i=gs().app.baseURL,a=Ni(kg(e));async function o(f,h){try{const m=kg(f);for(const S of n["navigate:before"]){const A=await S(m,a);if(A===!1||A instanceof Error)return;if(typeof A=="string"&&A.length)return o(A,!0)}for(const S of n["resolve:before"])await S(m,a);Object.assign(a,m),window.history[h?"replaceState":"pushState"]({},"",go(i,m.fullPath)),s.isHydrating||await s.runWithContext(oI);for(const S of n["navigate:after"])await S(m,a)}catch(m){for(const S of n.error)await S(m)}}const c={currentRoute:jt(()=>a),isReady:()=>Promise.resolve(),options:{},install:()=>Promise.resolve(),push:f=>o(f,!1),replace:f=>o(f,!0),back:()=>window.history.go(-1),go:f=>window.history.go(f),forward:()=>window.history.go(1),beforeResolve:f=>r("resolve:before",f),beforeEach:f=>r("navigate:before",f),afterEach:f=>r("navigate:after",f),onError:f=>r("error",f),resolve:kg,addRoute:(f,h)=>{t.push(h)},getRoutes:()=>t,hasRoute:f=>t.some(h=>h.name===f),removeRoute:f=>{const h=t.findIndex(m=>m.name===f);h!==-1&&t.splice(h,1)}};s.vueApp.component("RouterLink",or({functional:!0,props:{to:{type:String,required:!0},custom:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:String},setup:(f,{slots:h})=>{const m=()=>o(f.to,f.replace);return()=>{var A;const S=c.resolve(f.to);return f.custom?(A=h.default)==null?void 0:A.call(h,{href:f.to,navigate:m,route:S}):Dw("a",{href:f.to,onClick:k=>(k.preventDefault(),m())},h)}}})),window.addEventListener("popstate",f=>{const h=f.target.location;c.replace(h.href.replace(h.origin,""))}),s._route=a,s._middleware=s._middleware||{global:[],named:{}};const u=s.payload.state._layout;return s.hooks.hookOnce("app:created",async()=>{c.beforeEach(async(f,h)=>{f.meta=Ni(f.meta||{}),s.isHydrating&&u&&!wc(f.meta.layout)&&(f.meta.layout=u),s._processingMiddleware=!0;{const m=new Set([...f_,...s._middleware.global]);{const S=await s.runWithContext(()=>Ww(f.path));if(S.appMiddleware)for(const A in S.appMiddleware){const k=s._middleware.named[A];if(!k)return;S.appMiddleware[A]?m.add(k):m.delete(k)}}for(const S of m){const A=await s.runWithContext(()=>S(f,h));if(A!==!0&&(A||A===!1))return A}}}),c.afterEach(()=>{delete s._processingMiddleware}),await c.replace(e),vp(a.fullPath,e)||await s.runWithContext(()=>P1(a.fullPath))}),{provide:{route:a,router:c}}}}),xv=globalThis.requestIdleCallback||(s=>{const e=Date.now(),t={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{s(t)},1)}),zP=globalThis.cancelIdleCallback||(s=>{clearTimeout(s)}),q1=s=>{const e=rt();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{xv(s)}):xv(s)},m_=xi({name:"nuxt:payload",setup(s){Vc().beforeResolve(async(e,t)=>{if(e.path===t.path)return;const n=await _v(e.path);n&&Object.assign(s.static.data,n.data)}),q1(()=>{var e;s.hooks.hook("link:prefetch",async t=>{Bf(t).protocol||await _v(t)}),((e=navigator.connection)==null?void 0:e.effectiveType)!=="slow-2g"&&setTimeout(zm,1e3)})}}),g_=xi(s=>{let e;async function t(){const n=await zm();e&&clearTimeout(e),e=setTimeout(t,1e3*60*60);try{const r=await $fetch($w("builds/latest.json")+`?${Date.now()}`);r.id!==n.id&&s.hooks.callHook("app:manifest:update",r)}catch{}}q1(()=>{e=setTimeout(t,1e3*60*60)})}),p_=xi({name:"nuxt:global-components"});/*!
  * shared v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const ym=typeof window<"u",Ti=(s,e=!1)=>e?Symbol.for(s):Symbol(s),w_=(s,e,t)=>y_({l:s,k:e,s:t}),y_=s=>JSON.stringify(s).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Mt=s=>typeof s=="number"&&isFinite(s),v_=s=>Y1(s)==="[object Date]",vm=s=>Y1(s)==="[object RegExp]",Zm=s=>je(s)&&Object.keys(s).length===0,It=Object.assign;let Tv;const qw=()=>Tv||(Tv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Rv(s){return s.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const b_=Object.prototype.hasOwnProperty;function bm(s,e){return b_.call(s,e)}const Nt=Array.isArray,Ze=s=>typeof s=="function",ue=s=>typeof s=="string",gt=s=>typeof s=="boolean",S_=s=>typeof s=="symbol",$e=s=>s!==null&&typeof s=="object",A_=s=>$e(s)&&Ze(s.then)&&Ze(s.catch),G1=Object.prototype.toString,Y1=s=>G1.call(s),je=s=>{if(!$e(s))return!1;const e=Object.getPrototypeOf(s);return e===null||e.constructor===Object},k_=s=>s==null?"":Nt(s)||je(s)&&s.toString===G1?JSON.stringify(s,null,2):String(s);function Gw(s,e=""){return s.reduce((t,n,r)=>r===0?t+n:t+e+n,"")}function eg(s){let e=s;return()=>++e}function E_(s,e){typeof console<"u"&&(console.warn("[intlify] "+s),e&&console.warn(e.stack))}const qf=s=>!$e(s)||Nt(s);function eo(s,e){if(qf(s)||qf(e))throw new Error("Invalid value");const t=[{src:s,des:e}];for(;t.length;){const{src:n,des:r}=t.pop();Object.keys(n).forEach(i=>{qf(n[i])||qf(r[i])?r[i]=n[i]:t.push({src:n[i],des:r[i]})})}}/*!
  * message-compiler v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function C_(s,e,t){return{line:s,column:e,offset:t}}function Sm(s,e,t){return{start:s,end:e}}const X1={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2};function N_(s,e,...t){const r={message:String(s),code:s};return e&&(r.location=e),r}const Ge={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17};function tg(s,e,t={}){const{domain:n,messages:r,args:i}=t,a=s,o=new SyntaxError(String(a));return o.code=s,e&&(o.location=e),o.domain=n,o}function I_(s){throw s}const Nn=" ",__="\r",zt=`
`,B_="\u2028",x_="\u2029";function T_(s){const e=s;let t=0,n=1,r=1,i=0;const a=L=>e[L]===__&&e[L+1]===zt,o=L=>e[L]===zt,l=L=>e[L]===x_,c=L=>e[L]===B_,u=L=>a(L)||o(L)||l(L)||c(L),f=()=>t,h=()=>n,m=()=>r,S=()=>i,A=L=>a(L)||l(L)||c(L)?zt:e[L],k=()=>A(t),T=()=>A(t+i);function x(){return i=0,u(t)&&(n++,r=0),a(t)&&t++,t++,r++,e[t]}function y(){return a(t+i)&&i++,i++,e[t+i]}function p(){t=0,n=1,r=1,i=0}function E(L=0){i=L}function N(){const L=t+i;for(;L!==t;)x();i=0}return{index:f,line:h,column:m,peekOffset:S,charAt:A,currentChar:k,currentPeek:T,next:x,peek:y,reset:p,resetPeek:E,skipToPeek:N}}const pr=void 0,R_=".",Ov="'",O_="tokenizer";function V_(s,e={}){const t=e.location!==!1,n=T_(s),r=()=>n.index(),i=()=>C_(n.line(),n.column(),n.index()),a=i(),o=r(),l={currentType:14,offset:o,startLoc:a,endLoc:a,lastType:14,lastOffset:o,lastStartLoc:a,lastEndLoc:a,braceNest:0,inLinked:!1,text:""},c=()=>l,{onError:u}=e;function f(b,v,_,...B){const re=c();if(v.column+=_,v.offset+=_,u){const z=t?Sm(re.startLoc,v):null,D=tg(b,z,{domain:O_,args:B});u(D)}}function h(b,v,_){b.endLoc=i(),b.currentType=v;const B={type:v};return t&&(B.loc=Sm(b.startLoc,b.endLoc)),_!=null&&(B.value=_),B}const m=b=>h(b,14);function S(b,v){return b.currentChar()===v?(b.next(),v):(f(Ge.EXPECTED_TOKEN,i(),0,v),"")}function A(b){let v="";for(;b.currentPeek()===Nn||b.currentPeek()===zt;)v+=b.currentPeek(),b.peek();return v}function k(b){const v=A(b);return b.skipToPeek(),v}function T(b){if(b===pr)return!1;const v=b.charCodeAt(0);return v>=97&&v<=122||v>=65&&v<=90||v===95}function x(b){if(b===pr)return!1;const v=b.charCodeAt(0);return v>=48&&v<=57}function y(b,v){const{currentType:_}=v;if(_!==2)return!1;A(b);const B=T(b.currentPeek());return b.resetPeek(),B}function p(b,v){const{currentType:_}=v;if(_!==2)return!1;A(b);const B=b.currentPeek()==="-"?b.peek():b.currentPeek(),re=x(B);return b.resetPeek(),re}function E(b,v){const{currentType:_}=v;if(_!==2)return!1;A(b);const B=b.currentPeek()===Ov;return b.resetPeek(),B}function N(b,v){const{currentType:_}=v;if(_!==8)return!1;A(b);const B=b.currentPeek()===".";return b.resetPeek(),B}function L(b,v){const{currentType:_}=v;if(_!==9)return!1;A(b);const B=T(b.currentPeek());return b.resetPeek(),B}function M(b,v){const{currentType:_}=v;if(!(_===8||_===12))return!1;A(b);const B=b.currentPeek()===":";return b.resetPeek(),B}function F(b,v){const{currentType:_}=v;if(_!==10)return!1;const B=()=>{const z=b.currentPeek();return z==="{"?T(b.peek()):z==="@"||z==="%"||z==="|"||z===":"||z==="."||z===Nn||!z?!1:z===zt?(b.peek(),B()):ee(b,!1)},re=B();return b.resetPeek(),re}function se(b){A(b);const v=b.currentPeek()==="|";return b.resetPeek(),v}function ce(b){const v=A(b),_=b.currentPeek()==="%"&&b.peek()==="{";return b.resetPeek(),{isModulo:_,hasSpace:v.length>0}}function ee(b,v=!0){const _=(re=!1,z="",D=!1)=>{const J=b.currentPeek();return J==="{"?z==="%"?!1:re:J==="@"||!J?z==="%"?!0:re:J==="%"?(b.peek(),_(re,"%",!0)):J==="|"?z==="%"||D?!0:!(z===Nn||z===zt):J===Nn?(b.peek(),_(!0,Nn,D)):J===zt?(b.peek(),_(!0,zt,D)):!0},B=_();return v&&b.resetPeek(),B}function fe(b,v){const _=b.currentChar();return _===pr?pr:v(_)?(b.next(),_):null}function Ee(b){const v=b.charCodeAt(0);return v>=97&&v<=122||v>=65&&v<=90||v>=48&&v<=57||v===95||v===36}function ye(b){return fe(b,Ee)}function ie(b){const v=b.charCodeAt(0);return v>=97&&v<=122||v>=65&&v<=90||v>=48&&v<=57||v===95||v===36||v===45}function te(b){return fe(b,ie)}function ae(b){const v=b.charCodeAt(0);return v>=48&&v<=57}function Re(b){return fe(b,ae)}function oe(b){const v=b.charCodeAt(0);return v>=48&&v<=57||v>=65&&v<=70||v>=97&&v<=102}function de(b){return fe(b,oe)}function Y(b){let v="",_="";for(;v=Re(b);)_+=v;return _}function Se(b){k(b);const v=b.currentChar();return v!=="%"&&f(Ge.EXPECTED_TOKEN,i(),0,v),b.next(),"%"}function Be(b){let v="";for(;;){const _=b.currentChar();if(_==="{"||_==="}"||_==="@"||_==="|"||!_)break;if(_==="%")if(ee(b))v+=_,b.next();else break;else if(_===Nn||_===zt)if(ee(b))v+=_,b.next();else{if(se(b))break;v+=_,b.next()}else v+=_,b.next()}return v}function qe(b){k(b);let v="",_="";for(;v=te(b);)_+=v;return b.currentChar()===pr&&f(Ge.UNTERMINATED_CLOSING_BRACE,i(),0),_}function it(b){k(b);let v="";return b.currentChar()==="-"?(b.next(),v+=`-${Y(b)}`):v+=Y(b),b.currentChar()===pr&&f(Ge.UNTERMINATED_CLOSING_BRACE,i(),0),v}function Ue(b){return b!==Ov&&b!==zt}function Oe(b){k(b),S(b,"'");let v="",_="";for(;v=fe(b,Ue);)v==="\\"?_+=pe(b):_+=v;const B=b.currentChar();return B===zt||B===pr?(f(Ge.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),B===zt&&(b.next(),S(b,"'")),_):(S(b,"'"),_)}function pe(b){const v=b.currentChar();switch(v){case"\\":case"'":return b.next(),`\\${v}`;case"u":return ze(b,v,4);case"U":return ze(b,v,6);default:return f(Ge.UNKNOWN_ESCAPE_SEQUENCE,i(),0,v),""}}function ze(b,v,_){S(b,v);let B="";for(let re=0;re<_;re++){const z=de(b);if(!z){f(Ge.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,`\\${v}${B}${b.currentChar()}`);break}B+=z}return`\\${v}${B}`}function j(b){return b!=="{"&&b!=="}"&&b!==Nn&&b!==zt}function R(b){k(b);let v="",_="";for(;v=fe(b,j);)_+=v;return _}function w(b){let v="",_="";for(;v=ye(b);)_+=v;return _}function I(b){const v=_=>{const B=b.currentChar();return B==="{"||B==="%"||B==="@"||B==="|"||B==="("||B===")"||!B||B===Nn?_:(_+=B,b.next(),v(_))};return v("")}function O(b){k(b);const v=S(b,"|");return k(b),v}function V(b,v){let _=null;switch(b.currentChar()){case"{":return v.braceNest>=1&&f(Ge.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),b.next(),_=h(v,2,"{"),k(b),v.braceNest++,_;case"}":return v.braceNest>0&&v.currentType===2&&f(Ge.EMPTY_PLACEHOLDER,i(),0),b.next(),_=h(v,3,"}"),v.braceNest--,v.braceNest>0&&k(b),v.inLinked&&v.braceNest===0&&(v.inLinked=!1),_;case"@":return v.braceNest>0&&f(Ge.UNTERMINATED_CLOSING_BRACE,i(),0),_=$(b,v)||m(v),v.braceNest=0,_;default:{let re=!0,z=!0,D=!0;if(se(b))return v.braceNest>0&&f(Ge.UNTERMINATED_CLOSING_BRACE,i(),0),_=h(v,1,O(b)),v.braceNest=0,v.inLinked=!1,_;if(v.braceNest>0&&(v.currentType===5||v.currentType===6||v.currentType===7))return f(Ge.UNTERMINATED_CLOSING_BRACE,i(),0),v.braceNest=0,K(b,v);if(re=y(b,v))return _=h(v,5,qe(b)),k(b),_;if(z=p(b,v))return _=h(v,6,it(b)),k(b),_;if(D=E(b,v))return _=h(v,7,Oe(b)),k(b),_;if(!re&&!z&&!D)return _=h(v,13,R(b)),f(Ge.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,_.value),k(b),_;break}}return _}function $(b,v){const{currentType:_}=v;let B=null;const re=b.currentChar();switch((_===8||_===9||_===12||_===10)&&(re===zt||re===Nn)&&f(Ge.INVALID_LINKED_FORMAT,i(),0),re){case"@":return b.next(),B=h(v,8,"@"),v.inLinked=!0,B;case".":return k(b),b.next(),h(v,9,".");case":":return k(b),b.next(),h(v,10,":");default:return se(b)?(B=h(v,1,O(b)),v.braceNest=0,v.inLinked=!1,B):N(b,v)||M(b,v)?(k(b),$(b,v)):L(b,v)?(k(b),h(v,12,w(b))):F(b,v)?(k(b),re==="{"?V(b,v)||B:h(v,11,I(b))):(_===8&&f(Ge.INVALID_LINKED_FORMAT,i(),0),v.braceNest=0,v.inLinked=!1,K(b,v))}}function K(b,v){let _={type:14};if(v.braceNest>0)return V(b,v)||m(v);if(v.inLinked)return $(b,v)||m(v);switch(b.currentChar()){case"{":return V(b,v)||m(v);case"}":return f(Ge.UNBALANCED_CLOSING_BRACE,i(),0),b.next(),h(v,3,"}");case"@":return $(b,v)||m(v);default:{if(se(b))return _=h(v,1,O(b)),v.braceNest=0,v.inLinked=!1,_;const{isModulo:re,hasSpace:z}=ce(b);if(re)return z?h(v,0,Be(b)):h(v,4,Se(b));if(ee(b))return h(v,0,Be(b));break}}return _}function Z(){const{currentType:b,offset:v,startLoc:_,endLoc:B}=l;return l.lastType=b,l.lastOffset=v,l.lastStartLoc=_,l.lastEndLoc=B,l.offset=r(),l.startLoc=i(),n.currentChar()===pr?h(l,14):K(n,l)}return{nextToken:Z,currentOffset:r,currentPosition:i,context:c}}const P_="parser",L_=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function D_(s,e,t){switch(s){case"\\\\":return"\\";case"\\'":return"'";default:{const n=parseInt(e||t,16);return n<=55295||n>=57344?String.fromCodePoint(n):""}}}function U_(s={}){const e=s.location!==!1,{onError:t,onWarn:n}=s;function r(y,p,E,N,...L){const M=y.currentPosition();if(M.offset+=N,M.column+=N,t){const F=e?Sm(E,M):null,se=tg(p,F,{domain:P_,args:L});t(se)}}function i(y,p,E,N,...L){const M=y.currentPosition();if(M.offset+=N,M.column+=N,n){const F=e?Sm(E,M):null;n(N_(p,F,L))}}function a(y,p,E){const N={type:y};return e&&(N.start=p,N.end=p,N.loc={start:E,end:E}),N}function o(y,p,E,N){e&&(y.end=p,y.loc&&(y.loc.end=E))}function l(y,p){const E=y.context(),N=a(3,E.offset,E.startLoc);return N.value=p,o(N,y.currentOffset(),y.currentPosition()),N}function c(y,p){const E=y.context(),{lastOffset:N,lastStartLoc:L}=E,M=a(5,N,L);return M.index=parseInt(p,10),y.nextToken(),o(M,y.currentOffset(),y.currentPosition()),M}function u(y,p,E){const N=y.context(),{lastOffset:L,lastStartLoc:M}=N,F=a(4,L,M);return F.key=p,E===!0&&(F.modulo=!0),y.nextToken(),o(F,y.currentOffset(),y.currentPosition()),F}function f(y,p){const E=y.context(),{lastOffset:N,lastStartLoc:L}=E,M=a(9,N,L);return M.value=p.replace(L_,D_),y.nextToken(),o(M,y.currentOffset(),y.currentPosition()),M}function h(y){const p=y.nextToken(),E=y.context(),{lastOffset:N,lastStartLoc:L}=E,M=a(8,N,L);return p.type!==12?(r(y,Ge.UNEXPECTED_EMPTY_LINKED_MODIFIER,E.lastStartLoc,0),M.value="",o(M,N,L),{nextConsumeToken:p,node:M}):(p.value==null&&r(y,Ge.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Js(p)),M.value=p.value||"",o(M,y.currentOffset(),y.currentPosition()),{node:M})}function m(y,p){const E=y.context(),N=a(7,E.offset,E.startLoc);return N.value=p,o(N,y.currentOffset(),y.currentPosition()),N}function S(y){const p=y.context(),E=a(6,p.offset,p.startLoc);let N=y.nextToken();if(N.type===9){const L=h(y);E.modifier=L.node,N=L.nextConsumeToken||y.nextToken()}switch(N.type!==10&&r(y,Ge.UNEXPECTED_LEXICAL_ANALYSIS,p.lastStartLoc,0,Js(N)),N=y.nextToken(),N.type===2&&(N=y.nextToken()),N.type){case 11:N.value==null&&r(y,Ge.UNEXPECTED_LEXICAL_ANALYSIS,p.lastStartLoc,0,Js(N)),E.key=m(y,N.value||"");break;case 5:N.value==null&&r(y,Ge.UNEXPECTED_LEXICAL_ANALYSIS,p.lastStartLoc,0,Js(N)),E.key=u(y,N.value||"");break;case 6:N.value==null&&r(y,Ge.UNEXPECTED_LEXICAL_ANALYSIS,p.lastStartLoc,0,Js(N)),E.key=c(y,N.value||"");break;case 7:N.value==null&&r(y,Ge.UNEXPECTED_LEXICAL_ANALYSIS,p.lastStartLoc,0,Js(N)),E.key=f(y,N.value||"");break;default:{r(y,Ge.UNEXPECTED_EMPTY_LINKED_KEY,p.lastStartLoc,0);const L=y.context(),M=a(7,L.offset,L.startLoc);return M.value="",o(M,L.offset,L.startLoc),E.key=M,o(E,L.offset,L.startLoc),{nextConsumeToken:N,node:E}}}return o(E,y.currentOffset(),y.currentPosition()),{node:E}}function A(y){const p=y.context(),E=p.currentType===1?y.currentOffset():p.offset,N=p.currentType===1?p.endLoc:p.startLoc,L=a(2,E,N);L.items=[];let M=null,F=null;do{const ee=M||y.nextToken();switch(M=null,ee.type){case 0:ee.value==null&&r(y,Ge.UNEXPECTED_LEXICAL_ANALYSIS,p.lastStartLoc,0,Js(ee)),L.items.push(l(y,ee.value||""));break;case 6:ee.value==null&&r(y,Ge.UNEXPECTED_LEXICAL_ANALYSIS,p.lastStartLoc,0,Js(ee)),L.items.push(c(y,ee.value||""));break;case 4:F=!0;break;case 5:ee.value==null&&r(y,Ge.UNEXPECTED_LEXICAL_ANALYSIS,p.lastStartLoc,0,Js(ee)),L.items.push(u(y,ee.value||"",!!F)),F&&(i(y,X1.USE_MODULO_SYNTAX,p.lastStartLoc,0,Js(ee)),F=null);break;case 7:ee.value==null&&r(y,Ge.UNEXPECTED_LEXICAL_ANALYSIS,p.lastStartLoc,0,Js(ee)),L.items.push(f(y,ee.value||""));break;case 8:{const fe=S(y);L.items.push(fe.node),M=fe.nextConsumeToken||null;break}}}while(p.currentType!==14&&p.currentType!==1);const se=p.currentType===1?p.lastOffset:y.currentOffset(),ce=p.currentType===1?p.lastEndLoc:y.currentPosition();return o(L,se,ce),L}function k(y,p,E,N){const L=y.context();let M=N.items.length===0;const F=a(1,p,E);F.cases=[],F.cases.push(N);do{const se=A(y);M||(M=se.items.length===0),F.cases.push(se)}while(L.currentType!==14);return M&&r(y,Ge.MUST_HAVE_MESSAGES_IN_PLURAL,E,0),o(F,y.currentOffset(),y.currentPosition()),F}function T(y){const p=y.context(),{offset:E,startLoc:N}=p,L=A(y);return p.currentType===14?L:k(y,E,N,L)}function x(y){const p=V_(y,It({},s)),E=p.context(),N=a(0,E.offset,E.startLoc);return e&&N.loc&&(N.loc.source=y),N.body=T(p),s.onCacheKey&&(N.cacheKey=s.onCacheKey(y)),E.currentType!==14&&r(p,Ge.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,y[E.offset]||""),o(N,p.currentOffset(),p.currentPosition()),N}return{parse:x}}function Js(s){if(s.type===14)return"EOF";const e=(s.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"":e}function M_(s,e={}){const t={ast:s,helpers:new Set};return{context:()=>t,helper:i=>(t.helpers.add(i),i)}}function Vv(s,e){for(let t=0;t<s.length;t++)Yw(s[t],e)}function Yw(s,e){switch(s.type){case 1:Vv(s.cases,e),e.helper("plural");break;case 2:Vv(s.items,e);break;case 6:{Yw(s.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function H_(s,e={}){const t=M_(s);t.helper("normalize"),s.body&&Yw(s.body,t);const n=t.context();s.helpers=Array.from(n.helpers)}function $_(s){const e=s.body;return e.type===2?Pv(e):e.cases.forEach(t=>Pv(t)),s}function Pv(s){if(s.items.length===1){const e=s.items[0];(e.type===3||e.type===9)&&(s.static=e.value,delete e.value)}else{const e=[];for(let t=0;t<s.items.length;t++){const n=s.items[t];if(!(n.type===3||n.type===9)||n.value==null)break;e.push(n.value)}if(e.length===s.items.length){s.static=Gw(e);for(let t=0;t<s.items.length;t++){const n=s.items[t];(n.type===3||n.type===9)&&delete n.value}}}}function Oo(s){switch(s.t=s.type,s.type){case 0:{const e=s;Oo(e.body),e.b=e.body,delete e.body;break}case 1:{const e=s,t=e.cases;for(let n=0;n<t.length;n++)Oo(t[n]);e.c=t,delete e.cases;break}case 2:{const e=s,t=e.items;for(let n=0;n<t.length;n++)Oo(t[n]);e.i=t,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=s;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=s;Oo(e.key),e.k=e.key,delete e.key,e.modifier&&(Oo(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=s;e.i=e.index,delete e.index;break}case 4:{const e=s;e.k=e.key,delete e.key;break}}delete s.type}function F_(s,e){const{sourceMap:t,filename:n,breakLineCode:r,needIndent:i}=e,a=e.location!==!1,o={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:r,needIndent:i,indentLevel:0};a&&s.loc&&(o.source=s.loc.source);const l=()=>o;function c(k,T){o.code+=k}function u(k,T=!0){const x=T?r:"";c(i?x+"  ".repeat(k):x)}function f(k=!0){const T=++o.indentLevel;k&&u(T)}function h(k=!0){const T=--o.indentLevel;k&&u(T)}function m(){u(o.indentLevel)}return{context:l,push:c,indent:f,deindent:h,newline:m,helper:k=>`_${k}`,needIndent:()=>o.needIndent}}function j_(s,e){const{helper:t}=s;s.push(`${t("linked")}(`),Sc(s,e.key),e.modifier?(s.push(", "),Sc(s,e.modifier),s.push(", _type")):s.push(", undefined, _type"),s.push(")")}function K_(s,e){const{helper:t,needIndent:n}=s;s.push(`${t("normalize")}([`),s.indent(n());const r=e.items.length;for(let i=0;i<r&&(Sc(s,e.items[i]),i!==r-1);i++)s.push(", ");s.deindent(n()),s.push("])")}function J_(s,e){const{helper:t,needIndent:n}=s;if(e.cases.length>1){s.push(`${t("plural")}([`),s.indent(n());const r=e.cases.length;for(let i=0;i<r&&(Sc(s,e.cases[i]),i!==r-1);i++)s.push(", ");s.deindent(n()),s.push("])")}}function W_(s,e){e.body?Sc(s,e.body):s.push("null")}function Sc(s,e){const{helper:t}=s;switch(e.type){case 0:W_(s,e);break;case 1:J_(s,e);break;case 2:K_(s,e);break;case 6:j_(s,e);break;case 8:s.push(JSON.stringify(e.value),e);break;case 7:s.push(JSON.stringify(e.value),e);break;case 5:s.push(`${t("interpolate")}(${t("list")}(${e.index}))`,e);break;case 4:s.push(`${t("interpolate")}(${t("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:s.push(JSON.stringify(e.value),e);break;case 3:s.push(JSON.stringify(e.value),e);break}}const q_=(s,e={})=>{const t=ue(e.mode)?e.mode:"normal",n=ue(e.filename)?e.filename:"message.intl",r=!!e.sourceMap,i=e.breakLineCode!=null?e.breakLineCode:t==="arrow"?";":`
`,a=e.needIndent?e.needIndent:t!=="arrow",o=s.helpers||[],l=F_(s,{mode:t,filename:n,sourceMap:r,breakLineCode:i,needIndent:a});l.push(t==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(a),o.length>0&&(l.push(`const { ${Gw(o.map(f=>`${f}: _${f}`),", ")} } = ctx`),l.newline()),l.push("return "),Sc(l,s),l.deindent(a),l.push("}"),delete s.helpers;const{code:c,map:u}=l.context();return{ast:s,code:c,map:u?u.toJSON():void 0}};function G_(s,e={}){const t=It({},e),n=!!t.jit,r=!!t.minify,i=t.optimize==null?!0:t.optimize,o=U_(t).parse(s);return n?(i&&$_(o),r&&Oo(o),{ast:o,code:""}):(H_(o,t),q_(o,t))}/*!
  * core-base v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function Y_(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(qw().__INTLIFY_PROD_DEVTOOLS__=!1)}const Ri=[];Ri[0]={w:[0],i:[3,0],"[":[4],o:[7]};Ri[1]={w:[1],".":[2],"[":[4],o:[7]};Ri[2]={w:[2],i:[3,0],0:[3,0]};Ri[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};Ri[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};Ri[5]={"'":[4,0],o:8,l:[5,0]};Ri[6]={'"':[4,0],o:8,l:[6,0]};const X_=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function Q_(s){return X_.test(s)}function z_(s){const e=s.charCodeAt(0),t=s.charCodeAt(s.length-1);return e===t&&(e===34||e===39)?s.slice(1,-1):s}function Z_(s){if(s==null)return"o";switch(s.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return s;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function eB(s){const e=s.trim();return s.charAt(0)==="0"&&isNaN(parseInt(s))?!1:Q_(e)?z_(e):"*"+e}function tB(s){const e=[];let t=-1,n=0,r=0,i,a,o,l,c,u,f;const h=[];h[0]=()=>{a===void 0?a=o:a+=o},h[1]=()=>{a!==void 0&&(e.push(a),a=void 0)},h[2]=()=>{h[0](),r++},h[3]=()=>{if(r>0)r--,n=4,h[0]();else{if(r=0,a===void 0||(a=eB(a),a===!1))return!1;h[1]()}};function m(){const S=s[t+1];if(n===5&&S==="'"||n===6&&S==='"')return t++,o="\\"+S,h[0](),!0}for(;n!==null;)if(t++,i=s[t],!(i==="\\"&&m())){if(l=Z_(i),f=Ri[n],c=f[l]||f.l||8,c===8||(n=c[0],c[1]!==void 0&&(u=h[c[1]],u&&(o=i,u()===!1))))return;if(n===7)return e}}const Lv=new Map;function sB(s,e){return $e(s)?s[e]:null}function nB(s,e){if(!$e(s))return null;let t=Lv.get(e);if(t||(t=tB(e),t&&Lv.set(e,t)),!t)return null;const n=t.length;let r=s,i=0;for(;i<n;){const a=r[t[i]];if(a===void 0||Ze(r))return null;r=a,i++}return r}const rB=s=>s,iB=s=>"",aB="text",oB=s=>s.length===0?"":Gw(s),lB=k_;function Dv(s,e){return s=Math.abs(s),e===2?s?s>1?1:0:1:s?Math.min(s,2):0}function cB(s){const e=Mt(s.pluralIndex)?s.pluralIndex:-1;return s.named&&(Mt(s.named.count)||Mt(s.named.n))?Mt(s.named.count)?s.named.count:Mt(s.named.n)?s.named.n:e:e}function uB(s,e){e.count||(e.count=s),e.n||(e.n=s)}function hB(s={}){const e=s.locale,t=cB(s),n=$e(s.pluralRules)&&ue(e)&&Ze(s.pluralRules[e])?s.pluralRules[e]:Dv,r=$e(s.pluralRules)&&ue(e)&&Ze(s.pluralRules[e])?Dv:void 0,i=T=>T[n(t,T.length,r)],a=s.list||[],o=T=>a[T],l=s.named||{};Mt(s.pluralIndex)&&uB(t,l);const c=T=>l[T];function u(T){const x=Ze(s.messages)?s.messages(T):$e(s.messages)?s.messages[T]:!1;return x||(s.parent?s.parent.message(T):iB)}const f=T=>s.modifiers?s.modifiers[T]:rB,h=je(s.processor)&&Ze(s.processor.normalize)?s.processor.normalize:oB,m=je(s.processor)&&Ze(s.processor.interpolate)?s.processor.interpolate:lB,S=je(s.processor)&&ue(s.processor.type)?s.processor.type:aB,k={list:o,named:c,plural:i,linked:(T,...x)=>{const[y,p]=x;let E="text",N="";x.length===1?$e(y)?(N=y.modifier||N,E=y.type||E):ue(y)&&(N=y||N):x.length===2&&(ue(y)&&(N=y||N),ue(p)&&(E=p||E));const L=u(T)(k),M=E==="vnode"&&Nt(L)&&N?L[0]:L;return N?f(N)(M,E):M},message:u,type:S,interpolate:m,normalize:h,values:It({},a,l)};return k}let ff=null;function fB(s){ff=s}function dB(s,e,t){ff&&ff.emit("i18n:init",{timestamp:Date.now(),i18n:s,version:e,meta:t})}const mB=gB("function:translate");function gB(s){return e=>ff&&ff.emit(s,e)}const Q1=X1.__EXTEND_POINT__,Li=eg(Q1),pB={NOT_FOUND_KEY:Q1,FALLBACK_TO_TRANSLATE:Li(),CANNOT_FORMAT_NUMBER:Li(),FALLBACK_TO_NUMBER_FORMAT:Li(),CANNOT_FORMAT_DATE:Li(),FALLBACK_TO_DATE_FORMAT:Li(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:Li(),__EXTEND_POINT__:Li()},z1=Ge.__EXTEND_POINT__,Di=eg(z1),vn={INVALID_ARGUMENT:z1,INVALID_DATE_ARGUMENT:Di(),INVALID_ISO_DATE_ARGUMENT:Di(),NOT_SUPPORT_NON_STRING_MESSAGE:Di(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:Di(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:Di(),NOT_SUPPORT_LOCALE_TYPE:Di(),__EXTEND_POINT__:Di()};function Kn(s){return tg(s,null,void 0)}function Xw(s,e){return e.locale!=null?Uv(e.locale):Uv(s.locale)}let Eg;function Uv(s){if(ue(s))return s;if(Ze(s)){if(s.resolvedOnce&&Eg!=null)return Eg;if(s.constructor.name==="Function"){const e=s();if(A_(e))throw Kn(vn.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Eg=e}else throw Kn(vn.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Kn(vn.NOT_SUPPORT_LOCALE_TYPE)}function wB(s,e,t){return[...new Set([t,...Nt(e)?e:$e(e)?Object.keys(e):ue(e)?[e]:[t]])]}function Z1(s,e,t){const n=ue(t)?t:Am,r=s;r.__localeChainCache||(r.__localeChainCache=new Map);let i=r.__localeChainCache.get(n);if(!i){i=[];let a=[t];for(;Nt(a);)a=Mv(i,a,e);const o=Nt(e)||!je(e)?e:e.default?e.default:null;a=ue(o)?[o]:o,Nt(a)&&Mv(i,a,!1),r.__localeChainCache.set(n,i)}return i}function Mv(s,e,t){let n=!0;for(let r=0;r<e.length&&gt(n);r++){const i=e[r];ue(i)&&(n=yB(s,e[r],t))}return n}function yB(s,e,t){let n;const r=e.split("-");do{const i=r.join("-");n=vB(s,i,t),r.splice(-1,1)}while(r.length&&n===!0);return n}function vB(s,e,t){let n=!1;if(!s.includes(e)&&(n=!0,e)){n=e[e.length-1]!=="!";const r=e.replace(/!/g,"");s.push(r),(Nt(t)||je(t))&&t[r]&&(n=t[r])}return n}const bB="9.13.1",sg=-1,Am="en-US",Hv="",$v=s=>`${s.charAt(0).toLocaleUpperCase()}${s.substr(1)}`;function SB(){return{upper:(s,e)=>e==="text"&&ue(s)?s.toUpperCase():e==="vnode"&&$e(s)&&"__v_isVNode"in s?s.children.toUpperCase():s,lower:(s,e)=>e==="text"&&ue(s)?s.toLowerCase():e==="vnode"&&$e(s)&&"__v_isVNode"in s?s.children.toLowerCase():s,capitalize:(s,e)=>e==="text"&&ue(s)?$v(s):e==="vnode"&&$e(s)&&"__v_isVNode"in s?$v(s.children):s}}let eA;function AB(s){eA=s}let tA;function kB(s){tA=s}let sA;function EB(s){sA=s}let nA=null;const CB=s=>{nA=s},NB=()=>nA;let rA=null;const Fv=s=>{rA=s},IB=()=>rA;let jv=0;function _B(s={}){const e=Ze(s.onWarn)?s.onWarn:E_,t=ue(s.version)?s.version:bB,n=ue(s.locale)||Ze(s.locale)?s.locale:Am,r=Ze(n)?Am:n,i=Nt(s.fallbackLocale)||je(s.fallbackLocale)||ue(s.fallbackLocale)||s.fallbackLocale===!1?s.fallbackLocale:r,a=je(s.messages)?s.messages:{[r]:{}},o=je(s.datetimeFormats)?s.datetimeFormats:{[r]:{}},l=je(s.numberFormats)?s.numberFormats:{[r]:{}},c=It({},s.modifiers||{},SB()),u=s.pluralRules||{},f=Ze(s.missing)?s.missing:null,h=gt(s.missingWarn)||vm(s.missingWarn)?s.missingWarn:!0,m=gt(s.fallbackWarn)||vm(s.fallbackWarn)?s.fallbackWarn:!0,S=!!s.fallbackFormat,A=!!s.unresolving,k=Ze(s.postTranslation)?s.postTranslation:null,T=je(s.processor)?s.processor:null,x=gt(s.warnHtmlMessage)?s.warnHtmlMessage:!0,y=!!s.escapeParameter,p=Ze(s.messageCompiler)?s.messageCompiler:eA,E=Ze(s.messageResolver)?s.messageResolver:tA||sB,N=Ze(s.localeFallbacker)?s.localeFallbacker:sA||wB,L=$e(s.fallbackContext)?s.fallbackContext:void 0,M=s,F=$e(M.__datetimeFormatters)?M.__datetimeFormatters:new Map,se=$e(M.__numberFormatters)?M.__numberFormatters:new Map,ce=$e(M.__meta)?M.__meta:{};jv++;const ee={version:t,cid:jv,locale:n,fallbackLocale:i,messages:a,modifiers:c,pluralRules:u,missing:f,missingWarn:h,fallbackWarn:m,fallbackFormat:S,unresolving:A,postTranslation:k,processor:T,warnHtmlMessage:x,escapeParameter:y,messageCompiler:p,messageResolver:E,localeFallbacker:N,fallbackContext:L,onWarn:e,__meta:ce};return ee.datetimeFormats=o,ee.numberFormats=l,ee.__datetimeFormatters=F,ee.__numberFormatters=se,__INTLIFY_PROD_DEVTOOLS__&&dB(ee,t,ce),ee}function Qw(s,e,t,n,r){const{missing:i,onWarn:a}=s;if(i!==null){const o=i(s,t,e,r);return ue(o)?o:e}else return e}function Dc(s,e,t){const n=s;n.__localeChainCache=new Map,s.localeFallbacker(s,t,e)}function BB(s,e){return s===e?!1:s.split("-")[0]===e.split("-")[0]}function xB(s,e){const t=e.indexOf(s);if(t===-1)return!1;for(let n=t+1;n<e.length;n++)if(BB(s,e[n]))return!0;return!1}function Cg(s){return t=>TB(t,s)}function TB(s,e){const t=e.b||e.body;if((t.t||t.type)===1){const n=t,r=n.c||n.cases;return s.plural(r.reduce((i,a)=>[...i,Kv(s,a)],[]))}else return Kv(s,t)}function Kv(s,e){const t=e.s||e.static;if(t)return s.type==="text"?t:s.normalize([t]);{const n=(e.i||e.items).reduce((r,i)=>[...r,_p(s,i)],[]);return s.normalize(n)}}function _p(s,e){const t=e.t||e.type;switch(t){case 3:{const n=e;return n.v||n.value}case 9:{const n=e;return n.v||n.value}case 4:{const n=e;return s.interpolate(s.named(n.k||n.key))}case 5:{const n=e;return s.interpolate(s.list(n.i!=null?n.i:n.index))}case 6:{const n=e,r=n.m||n.modifier;return s.linked(_p(s,n.k||n.key),r?_p(s,r):void 0,s.type)}case 7:{const n=e;return n.v||n.value}case 8:{const n=e;return n.v||n.value}default:throw new Error(`unhandled node type on format message part: ${t}`)}}const RB=s=>s;let Gf=Object.create(null);const Ac=s=>$e(s)&&(s.t===0||s.type===0)&&("b"in s||"body"in s);function OB(s,e={}){let t=!1;const n=e.onError||I_;return e.onError=r=>{t=!0,n(r)},{...G_(s,e),detectError:t}}function VB(s,e){if(ue(s)){gt(e.warnHtmlMessage)&&e.warnHtmlMessage;const n=(e.onCacheKey||RB)(s),r=Gf[n];if(r)return r;const{ast:i,detectError:a}=OB(s,{...e,location:!1,jit:!0}),o=Cg(i);return a?o:Gf[n]=o}else{const t=s.cacheKey;if(t){const n=Gf[t];return n||(Gf[t]=Cg(s))}else return Cg(s)}}const Jv=()=>"",Ds=s=>Ze(s);function Wv(s,...e){const{fallbackFormat:t,postTranslation:n,unresolving:r,messageCompiler:i,fallbackLocale:a,messages:o}=s,[l,c]=Bp(...e),u=gt(c.missingWarn)?c.missingWarn:s.missingWarn,f=gt(c.fallbackWarn)?c.fallbackWarn:s.fallbackWarn,h=gt(c.escapeParameter)?c.escapeParameter:s.escapeParameter,m=!!c.resolvedMessage,S=ue(c.default)||gt(c.default)?gt(c.default)?i?l:()=>l:c.default:t?i?l:()=>l:"",A=t||S!=="",k=Xw(s,c);h&&PB(c);let[T,x,y]=m?[l,k,o[k]||{}]:iA(s,l,k,a,f,u),p=T,E=l;if(!m&&!(ue(p)||Ac(p)||Ds(p))&&A&&(p=S,E=p),!m&&(!(ue(p)||Ac(p)||Ds(p))||!ue(x)))return r?sg:l;let N=!1;const L=()=>{N=!0},M=Ds(p)?p:aA(s,l,x,p,E,L);if(N)return p;const F=UB(s,x,y,c),se=hB(F),ce=LB(s,M,se),ee=n?n(ce,l):ce;if(__INTLIFY_PROD_DEVTOOLS__){const fe={timestamp:Date.now(),key:ue(l)?l:Ds(p)?p.key:"",locale:x||(Ds(p)?p.locale:""),format:ue(p)?p:Ds(p)?p.source:"",message:ee};fe.meta=It({},s.__meta,NB()||{}),mB(fe)}return ee}function PB(s){Nt(s.list)?s.list=s.list.map(e=>ue(e)?Rv(e):e):$e(s.named)&&Object.keys(s.named).forEach(e=>{ue(s.named[e])&&(s.named[e]=Rv(s.named[e]))})}function iA(s,e,t,n,r,i){const{messages:a,onWarn:o,messageResolver:l,localeFallbacker:c}=s,u=c(s,n,t);let f={},h,m=null;const S="translate";for(let A=0;A<u.length&&(h=u[A],f=a[h]||{},(m=l(f,e))===null&&(m=f[e]),!(ue(m)||Ac(m)||Ds(m)));A++)if(!xB(h,u)){const k=Qw(s,e,h,i,S);k!==e&&(m=k)}return[m,h,f]}function aA(s,e,t,n,r,i){const{messageCompiler:a,warnHtmlMessage:o}=s;if(Ds(n)){const c=n;return c.locale=c.locale||t,c.key=c.key||e,c}if(a==null){const c=()=>n;return c.locale=t,c.key=e,c}const l=a(n,DB(s,t,r,n,o,i));return l.locale=t,l.key=e,l.source=n,l}function LB(s,e,t){return e(t)}function Bp(...s){const[e,t,n]=s,r={};if(!ue(e)&&!Mt(e)&&!Ds(e)&&!Ac(e))throw Kn(vn.INVALID_ARGUMENT);const i=Mt(e)?String(e):(Ds(e),e);return Mt(t)?r.plural=t:ue(t)?r.default=t:je(t)&&!Zm(t)?r.named=t:Nt(t)&&(r.list=t),Mt(n)?r.plural=n:ue(n)?r.default=n:je(n)&&It(r,n),[i,r]}function DB(s,e,t,n,r,i){return{locale:e,key:t,warnHtmlMessage:r,onError:a=>{throw i&&i(a),a},onCacheKey:a=>w_(e,t,a)}}function UB(s,e,t,n){const{modifiers:r,pluralRules:i,messageResolver:a,fallbackLocale:o,fallbackWarn:l,missingWarn:c,fallbackContext:u}=s,h={locale:e,modifiers:r,pluralRules:i,messages:m=>{let S=a(t,m);if(S==null&&u){const[,,A]=iA(u,m,e,o,l,c);S=a(A,m)}if(ue(S)||Ac(S)){let A=!1;const T=aA(s,m,e,S,m,()=>{A=!0});return A?Jv:T}else return Ds(S)?S:Jv}};return s.processor&&(h.processor=s.processor),n.list&&(h.list=n.list),n.named&&(h.named=n.named),Mt(n.plural)&&(h.pluralIndex=n.plural),h}function qv(s,...e){const{datetimeFormats:t,unresolving:n,fallbackLocale:r,onWarn:i,localeFallbacker:a}=s,{__datetimeFormatters:o}=s,[l,c,u,f]=xp(...e),h=gt(u.missingWarn)?u.missingWarn:s.missingWarn;gt(u.fallbackWarn)?u.fallbackWarn:s.fallbackWarn;const m=!!u.part,S=Xw(s,u),A=a(s,r,S);if(!ue(l)||l==="")return new Intl.DateTimeFormat(S,f).format(c);let k={},T,x=null;const y="datetime format";for(let N=0;N<A.length&&(T=A[N],k=t[T]||{},x=k[l],!je(x));N++)Qw(s,l,T,h,y);if(!je(x)||!ue(T))return n?sg:l;let p=`${T}__${l}`;Zm(f)||(p=`${p}__${JSON.stringify(f)}`);let E=o.get(p);return E||(E=new Intl.DateTimeFormat(T,It({},x,f)),o.set(p,E)),m?E.formatToParts(c):E.format(c)}const oA=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function xp(...s){const[e,t,n,r]=s,i={};let a={},o;if(ue(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw Kn(vn.INVALID_ISO_DATE_ARGUMENT);const c=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();o=new Date(c);try{o.toISOString()}catch{throw Kn(vn.INVALID_ISO_DATE_ARGUMENT)}}else if(v_(e)){if(isNaN(e.getTime()))throw Kn(vn.INVALID_DATE_ARGUMENT);o=e}else if(Mt(e))o=e;else throw Kn(vn.INVALID_ARGUMENT);return ue(t)?i.key=t:je(t)&&Object.keys(t).forEach(l=>{oA.includes(l)?a[l]=t[l]:i[l]=t[l]}),ue(n)?i.locale=n:je(n)&&(a=n),je(r)&&(a=r),[i.key||"",o,i,a]}function Gv(s,e,t){const n=s;for(const r in t){const i=`${e}__${r}`;n.__datetimeFormatters.has(i)&&n.__datetimeFormatters.delete(i)}}function Yv(s,...e){const{numberFormats:t,unresolving:n,fallbackLocale:r,onWarn:i,localeFallbacker:a}=s,{__numberFormatters:o}=s,[l,c,u,f]=Tp(...e),h=gt(u.missingWarn)?u.missingWarn:s.missingWarn;gt(u.fallbackWarn)?u.fallbackWarn:s.fallbackWarn;const m=!!u.part,S=Xw(s,u),A=a(s,r,S);if(!ue(l)||l==="")return new Intl.NumberFormat(S,f).format(c);let k={},T,x=null;const y="number format";for(let N=0;N<A.length&&(T=A[N],k=t[T]||{},x=k[l],!je(x));N++)Qw(s,l,T,h,y);if(!je(x)||!ue(T))return n?sg:l;let p=`${T}__${l}`;Zm(f)||(p=`${p}__${JSON.stringify(f)}`);let E=o.get(p);return E||(E=new Intl.NumberFormat(T,It({},x,f)),o.set(p,E)),m?E.formatToParts(c):E.format(c)}const lA=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Tp(...s){const[e,t,n,r]=s,i={};let a={};if(!Mt(e))throw Kn(vn.INVALID_ARGUMENT);const o=e;return ue(t)?i.key=t:je(t)&&Object.keys(t).forEach(l=>{lA.includes(l)?a[l]=t[l]:i[l]=t[l]}),ue(n)?i.locale=n:je(n)&&(a=n),je(r)&&(a=r),[i.key||"",o,i,a]}function Xv(s,e,t){const n=s;for(const r in t){const i=`${e}__${r}`;n.__numberFormatters.has(i)&&n.__numberFormatters.delete(i)}}Y_();/*!
  * vue-i18n v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const MB="9.13.1";function HB(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(qw().__INTLIFY_PROD_DEVTOOLS__=!1)}const cA=pB.__EXTEND_POINT__,In=eg(cA);In(),In(),In(),In(),In(),In(),In(),In(),In();const uA=vn.__EXTEND_POINT__,ls=eg(uA),Ks={UNEXPECTED_RETURN_TYPE:uA,INVALID_ARGUMENT:ls(),MUST_BE_CALL_SETUP_TOP:ls(),NOT_INSTALLED:ls(),NOT_AVAILABLE_IN_LEGACY_MODE:ls(),REQUIRED_VALUE:ls(),INVALID_VALUE:ls(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:ls(),NOT_INSTALLED_WITH_PROVIDE:ls(),UNEXPECTED_ERROR:ls(),NOT_COMPATIBLE_LEGACY_VUE_I18N:ls(),BRIDGE_SUPPORT_VUE_2_ONLY:ls(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:ls(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:ls(),__EXTEND_POINT__:ls()};function an(s,...e){return tg(s,null,void 0)}const Rp=Ti("__translateVNode"),Op=Ti("__datetimeParts"),Vp=Ti("__numberParts"),$B=Ti("__setPluralRules"),FB=Ti("__injectWithOption"),Pp=Ti("__dispose");function df(s){if(!$e(s))return s;for(const e in s)if(bm(s,e))if(!e.includes("."))$e(s[e])&&df(s[e]);else{const t=e.split("."),n=t.length-1;let r=s,i=!1;for(let a=0;a<n;a++){if(t[a]in r||(r[t[a]]={}),!$e(r[t[a]])){i=!0;break}r=r[t[a]]}i||(r[t[n]]=s[e],delete s[e]),$e(r[t[n]])&&df(r[t[n]])}return s}function hA(s,e){const{messages:t,__i18n:n,messageResolver:r,flatJson:i}=e,a=je(t)?t:Nt(n)?{}:{[s]:{}};if(Nt(n)&&n.forEach(o=>{if("locale"in o&&"resource"in o){const{locale:l,resource:c}=o;l?(a[l]=a[l]||{},eo(c,a[l])):eo(c,a)}else ue(o)&&eo(JSON.parse(o),a)}),r==null&&i)for(const o in a)bm(a,o)&&df(a[o]);return a}function fA(s){return s.type}function jB(s,e,t){let n=$e(e.messages)?e.messages:{};"__i18nGlobal"in t&&(n=hA(s.locale.value,{messages:n,__i18n:t.__i18nGlobal}));const r=Object.keys(n);r.length&&r.forEach(i=>{s.mergeLocaleMessage(i,n[i])});{if($e(e.datetimeFormats)){const i=Object.keys(e.datetimeFormats);i.length&&i.forEach(a=>{s.mergeDateTimeFormat(a,e.datetimeFormats[a])})}if($e(e.numberFormats)){const i=Object.keys(e.numberFormats);i.length&&i.forEach(a=>{s.mergeNumberFormat(a,e.numberFormats[a])})}}}function Qv(s){return ve(co,null,s,0)}const zv="__INTLIFY_META__",Zv=()=>[],KB=()=>!1;let eb=0;function tb(s){return(e,t,n,r)=>s(t,n,Nf()||void 0,r)}const JB=()=>{const s=Nf();let e=null;return s&&(e=fA(s)[zv])?{[zv]:e}:null};function dA(s={},e){const{__root:t,__injectWithOption:n}=s,r=t===void 0,i=s.flatJson,a=ym?Fe:op,o=!!s.translateExistCompatible;let l=gt(s.inheritLocale)?s.inheritLocale:!0;const c=a(t&&l?t.locale.value:ue(s.locale)?s.locale:Am),u=a(t&&l?t.fallbackLocale.value:ue(s.fallbackLocale)||Nt(s.fallbackLocale)||je(s.fallbackLocale)||s.fallbackLocale===!1?s.fallbackLocale:c.value),f=a(hA(c.value,s)),h=a(je(s.datetimeFormats)?s.datetimeFormats:{[c.value]:{}}),m=a(je(s.numberFormats)?s.numberFormats:{[c.value]:{}});let S=t?t.missingWarn:gt(s.missingWarn)||vm(s.missingWarn)?s.missingWarn:!0,A=t?t.fallbackWarn:gt(s.fallbackWarn)||vm(s.fallbackWarn)?s.fallbackWarn:!0,k=t?t.fallbackRoot:gt(s.fallbackRoot)?s.fallbackRoot:!0,T=!!s.fallbackFormat,x=Ze(s.missing)?s.missing:null,y=Ze(s.missing)?tb(s.missing):null,p=Ze(s.postTranslation)?s.postTranslation:null,E=t?t.warnHtmlMessage:gt(s.warnHtmlMessage)?s.warnHtmlMessage:!0,N=!!s.escapeParameter;const L=t?t.modifiers:je(s.modifiers)?s.modifiers:{};let M=s.pluralRules||t&&t.pluralRules,F;F=(()=>{r&&Fv(null);const D={version:MB,locale:c.value,fallbackLocale:u.value,messages:f.value,modifiers:L,pluralRules:M,missing:y===null?void 0:y,missingWarn:S,fallbackWarn:A,fallbackFormat:T,unresolving:!0,postTranslation:p===null?void 0:p,warnHtmlMessage:E,escapeParameter:N,messageResolver:s.messageResolver,messageCompiler:s.messageCompiler,__meta:{framework:"vue"}};D.datetimeFormats=h.value,D.numberFormats=m.value,D.__datetimeFormatters=je(F)?F.__datetimeFormatters:void 0,D.__numberFormatters=je(F)?F.__numberFormatters:void 0;const J=_B(D);return r&&Fv(J),J})(),Dc(F,c.value,u.value);function ce(){return[c.value,u.value,f.value,h.value,m.value]}const ee=jt({get:()=>c.value,set:D=>{c.value=D,F.locale=c.value}}),fe=jt({get:()=>u.value,set:D=>{u.value=D,F.fallbackLocale=u.value,Dc(F,c.value,D)}}),Ee=jt(()=>f.value),ye=jt(()=>h.value),ie=jt(()=>m.value);function te(){return Ze(p)?p:null}function ae(D){p=D,F.postTranslation=D}function Re(){return x}function oe(D){D!==null&&(y=tb(D)),x=D,F.missing=y}const de=(D,J,we,xe,et,Jt)=>{ce();let ws;try{__INTLIFY_PROD_DEVTOOLS__,r||(F.fallbackContext=t?IB():void 0),ws=D(F)}finally{__INTLIFY_PROD_DEVTOOLS__,r||(F.fallbackContext=void 0)}if(we!=="translate exists"&&Mt(ws)&&ws===sg||we==="translate exists"&&!ws){const[Pf,bo]=J();return t&&k?xe(t):et(Pf)}else{if(Jt(ws))return ws;throw an(Ks.UNEXPECTED_RETURN_TYPE)}};function Y(...D){return de(J=>Reflect.apply(Wv,null,[J,...D]),()=>Bp(...D),"translate",J=>Reflect.apply(J.t,J,[...D]),J=>J,J=>ue(J))}function Se(...D){const[J,we,xe]=D;if(xe&&!$e(xe))throw an(Ks.INVALID_ARGUMENT);return Y(J,we,It({resolvedMessage:!0},xe||{}))}function Be(...D){return de(J=>Reflect.apply(qv,null,[J,...D]),()=>xp(...D),"datetime format",J=>Reflect.apply(J.d,J,[...D]),()=>Hv,J=>ue(J))}function qe(...D){return de(J=>Reflect.apply(Yv,null,[J,...D]),()=>Tp(...D),"number format",J=>Reflect.apply(J.n,J,[...D]),()=>Hv,J=>ue(J))}function it(D){return D.map(J=>ue(J)||Mt(J)||gt(J)?Qv(String(J)):J)}const Oe={normalize:it,interpolate:D=>D,type:"vnode"};function pe(...D){return de(J=>{let we;const xe=J;try{xe.processor=Oe,we=Reflect.apply(Wv,null,[xe,...D])}finally{xe.processor=null}return we},()=>Bp(...D),"translate",J=>J[Rp](...D),J=>[Qv(J)],J=>Nt(J))}function ze(...D){return de(J=>Reflect.apply(Yv,null,[J,...D]),()=>Tp(...D),"number format",J=>J[Vp](...D),Zv,J=>ue(J)||Nt(J))}function j(...D){return de(J=>Reflect.apply(qv,null,[J,...D]),()=>xp(...D),"datetime format",J=>J[Op](...D),Zv,J=>ue(J)||Nt(J))}function R(D){M=D,F.pluralRules=M}function w(D,J){return de(()=>{if(!D)return!1;const we=ue(J)?J:c.value,xe=V(we),et=F.messageResolver(xe,D);return o?et!=null:Ac(et)||Ds(et)||ue(et)},()=>[D],"translate exists",we=>Reflect.apply(we.te,we,[D,J]),KB,we=>gt(we))}function I(D){let J=null;const we=Z1(F,u.value,c.value);for(let xe=0;xe<we.length;xe++){const et=f.value[we[xe]]||{},Jt=F.messageResolver(et,D);if(Jt!=null){J=Jt;break}}return J}function O(D){const J=I(D);return J??(t?t.tm(D)||{}:{})}function V(D){return f.value[D]||{}}function $(D,J){if(i){const we={[D]:J};for(const xe in we)bm(we,xe)&&df(we[xe]);J=we[D]}f.value[D]=J,F.messages=f.value}function K(D,J){f.value[D]=f.value[D]||{};const we={[D]:J};if(i)for(const xe in we)bm(we,xe)&&df(we[xe]);J=we[D],eo(J,f.value[D]),F.messages=f.value}function Z(D){return h.value[D]||{}}function b(D,J){h.value[D]=J,F.datetimeFormats=h.value,Gv(F,D,J)}function v(D,J){h.value[D]=It(h.value[D]||{},J),F.datetimeFormats=h.value,Gv(F,D,J)}function _(D){return m.value[D]||{}}function B(D,J){m.value[D]=J,F.numberFormats=m.value,Xv(F,D,J)}function re(D,J){m.value[D]=It(m.value[D]||{},J),F.numberFormats=m.value,Xv(F,D,J)}eb++,t&&ym&&(tn(t.locale,D=>{l&&(c.value=D,F.locale=D,Dc(F,c.value,u.value))}),tn(t.fallbackLocale,D=>{l&&(u.value=D,F.fallbackLocale=D,Dc(F,c.value,u.value))}));const z={id:eb,locale:ee,fallbackLocale:fe,get inheritLocale(){return l},set inheritLocale(D){l=D,D&&t&&(c.value=t.locale.value,u.value=t.fallbackLocale.value,Dc(F,c.value,u.value))},get availableLocales(){return Object.keys(f.value).sort()},messages:Ee,get modifiers(){return L},get pluralRules(){return M||{}},get isGlobal(){return r},get missingWarn(){return S},set missingWarn(D){S=D,F.missingWarn=S},get fallbackWarn(){return A},set fallbackWarn(D){A=D,F.fallbackWarn=A},get fallbackRoot(){return k},set fallbackRoot(D){k=D},get fallbackFormat(){return T},set fallbackFormat(D){T=D,F.fallbackFormat=T},get warnHtmlMessage(){return E},set warnHtmlMessage(D){E=D,F.warnHtmlMessage=D},get escapeParameter(){return N},set escapeParameter(D){N=D,F.escapeParameter=D},t:Y,getLocaleMessage:V,setLocaleMessage:$,mergeLocaleMessage:K,getPostTranslationHandler:te,setPostTranslationHandler:ae,getMissingHandler:Re,setMissingHandler:oe,[$B]:R};return z.datetimeFormats=ye,z.numberFormats=ie,z.rt=Se,z.te=w,z.tm=O,z.d=Be,z.n=qe,z.getDateTimeFormat=Z,z.setDateTimeFormat=b,z.mergeDateTimeFormat=v,z.getNumberFormat=_,z.setNumberFormat=B,z.mergeNumberFormat=re,z[FB]=n,z[Rp]=pe,z[Op]=j,z[Vp]=ze,z}const zw={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:s=>s==="parent"||s==="global",default:"parent"},i18n:{type:Object}};function WB({slots:s},e){return e.length===1&&e[0]==="default"?(s.default?s.default():[]).reduce((n,r)=>[...n,...r.type===Vt?r.children:[r]],[]):e.reduce((t,n)=>{const r=s[n];return r&&(t[n]=r()),t},{})}function mA(s){return Vt}const qB=or({name:"i18n-t",props:It({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:s=>Mt(s)||!isNaN(s)}},zw),setup(s,e){const{slots:t,attrs:n}=e,r=s.i18n||ng({useScope:s.scope,__useComponent:!0});return()=>{const i=Object.keys(t).filter(f=>f!=="_"),a={};s.locale&&(a.locale=s.locale),s.plural!==void 0&&(a.plural=ue(s.plural)?+s.plural:s.plural);const o=WB(e,i),l=r[Rp](s.keypath,o,a),c=It({},n),u=ue(s.tag)||$e(s.tag)?s.tag:mA();return Dw(u,c,l)}}}),sb=qB;function GB(s){return Nt(s)&&!ue(s[0])}function gA(s,e,t,n){const{slots:r,attrs:i}=e;return()=>{const a={part:!0};let o={};s.locale&&(a.locale=s.locale),ue(s.format)?a.key=s.format:$e(s.format)&&(ue(s.format.key)&&(a.key=s.format.key),o=Object.keys(s.format).reduce((h,m)=>t.includes(m)?It({},h,{[m]:s.format[m]}):h,{}));const l=n(s.value,a,o);let c=[a.key];Nt(l)?c=l.map((h,m)=>{const S=r[h.type],A=S?S({[h.type]:h.value,index:m,parts:l}):[h.value];return GB(A)&&(A[0].key=`${h.type}-${m}`),A}):ue(l)&&(c=[l]);const u=It({},i),f=ue(s.tag)||$e(s.tag)?s.tag:mA();return Dw(f,u,c)}}const YB=or({name:"i18n-n",props:It({value:{type:Number,required:!0},format:{type:[String,Object]}},zw),setup(s,e){const t=s.i18n||ng({useScope:s.scope,__useComponent:!0});return gA(s,e,lA,(...n)=>t[Vp](...n))}}),nb=YB,XB=or({name:"i18n-d",props:It({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},zw),setup(s,e){const t=s.i18n||ng({useScope:s.scope,__useComponent:!0});return gA(s,e,oA,(...n)=>t[Op](...n))}}),rb=XB;function QB(s,e){const t=s;if(s.mode==="composition")return t.__getInstance(e)||s.global;{const n=t.__getInstance(e);return n!=null?n.__composer:s.global.__composer}}function zB(s){const e=a=>{const{instance:o,modifiers:l,value:c}=a;if(!o||!o.$)throw an(Ks.UNEXPECTED_ERROR);const u=QB(s,o.$),f=ib(c);return[Reflect.apply(u.t,u,[...ab(f)]),u]};return{created:(a,o)=>{const[l,c]=e(o);ym&&s.global===c&&(a.__i18nWatcher=tn(c.locale,()=>{o.instance&&o.instance.$forceUpdate()})),a.__composer=c,a.textContent=l},unmounted:a=>{ym&&a.__i18nWatcher&&(a.__i18nWatcher(),a.__i18nWatcher=void 0,delete a.__i18nWatcher),a.__composer&&(a.__composer=void 0,delete a.__composer)},beforeUpdate:(a,{value:o})=>{if(a.__composer){const l=a.__composer,c=ib(o);a.textContent=Reflect.apply(l.t,l,[...ab(c)])}},getSSRProps:a=>{const[o]=e(a);return{textContent:o}}}}function ib(s){if(ue(s))return{path:s};if(je(s)){if(!("path"in s))throw an(Ks.REQUIRED_VALUE,"path");return s}else throw an(Ks.INVALID_VALUE)}function ab(s){const{path:e,locale:t,args:n,choice:r,plural:i}=s,a={},o=n||{};return ue(t)&&(a.locale=t),Mt(r)&&(a.plural=r),Mt(i)&&(a.plural=i),[e,o,a]}function ZB(s,e,...t){const n=je(t[0])?t[0]:{},r=!!n.useI18nComponentName;(gt(n.globalInstall)?n.globalInstall:!0)&&([r?"i18n":sb.name,"I18nT"].forEach(a=>s.component(a,sb)),[nb.name,"I18nN"].forEach(a=>s.component(a,nb)),[rb.name,"I18nD"].forEach(a=>s.component(a,rb))),s.directive("t",zB(e))}const ex=Ti("global-vue-i18n");function tx(s={},e){const t=gt(s.globalInjection)?s.globalInjection:!0,n=!0,r=new Map,[i,a]=sx(s),o=Ti("");function l(f){return r.get(f)||null}function c(f,h){r.set(f,h)}function u(f){r.delete(f)}{const f={get mode(){return"composition"},get allowComposition(){return n},async install(h,...m){if(h.__VUE_I18N_SYMBOL__=o,h.provide(h.__VUE_I18N_SYMBOL__,f),je(m[0])){const k=m[0];f.__composerExtend=k.__composerExtend,f.__vueI18nExtend=k.__vueI18nExtend}let S=null;t&&(S=ux(h,f.global)),ZB(h,f,...m);const A=h.unmount;h.unmount=()=>{S&&S(),f.dispose(),A()}},get global(){return a},dispose(){i.stop()},__instances:r,__getInstance:l,__setInstance:c,__deleteInstance:u};return f}}function ng(s={}){const e=Nf();if(e==null)throw an(Ks.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw an(Ks.NOT_INSTALLED);const t=nx(e),n=ix(t),r=fA(e),i=rx(s,r);if(i==="global")return jB(n,s,r),n;if(i==="parent"){let l=ax(t,e,s.__useComponent);return l==null&&(l=n),l}const a=t;let o=a.__getInstance(e);if(o==null){const l=It({},s);"__i18n"in r&&(l.__i18n=r.__i18n),n&&(l.__root=n),o=dA(l),a.__composerExtend&&(o[Pp]=a.__composerExtend(o)),lx(a,e,o),a.__setInstance(e,o)}return o}function sx(s,e,t){const n=pw();{const r=n.run(()=>dA(s));if(r==null)throw an(Ks.UNEXPECTED_ERROR);return[n,r]}}function nx(s){{const e=Za(s.isCE?ex:s.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw an(s.isCE?Ks.NOT_INSTALLED_WITH_PROVIDE:Ks.UNEXPECTED_ERROR);return e}}function rx(s,e){return Zm(s)?"__i18n"in e?"local":"global":s.useScope?s.useScope:"local"}function ix(s){return s.mode==="composition"?s.global:s.global.__composer}function ax(s,e,t=!1){let n=null;const r=e.root;let i=ox(e,t);for(;i!=null;){const a=s;if(s.mode==="composition"&&(n=a.__getInstance(i)),n!=null||r===i)break;i=i.parent}return n}function ox(s,e=!1){return s==null?null:e&&s.vnode.ctx||s.parent}function lx(s,e,t){Tw(()=>{},e),Rw(()=>{const n=t;s.__deleteInstance(e);const r=n[Pp];r&&(r(),delete n[Pp])},e)}const cx=["locale","fallbackLocale","availableLocales"],ob=["t","rt","d","n","tm","te"];function ux(s,e){const t=Object.create(null);return cx.forEach(r=>{const i=Object.getOwnPropertyDescriptor(e,r);if(!i)throw an(Ks.UNEXPECTED_ERROR);const a=ge(i.value)?{get(){return i.value.value},set(o){i.value.value=o}}:{get(){return i.get&&i.get()}};Object.defineProperty(t,r,a)}),s.config.globalProperties.$i18n=t,ob.forEach(r=>{const i=Object.getOwnPropertyDescriptor(e,r);if(!i||!i.value)throw an(Ks.UNEXPECTED_ERROR);Object.defineProperty(s.config.globalProperties,`$${r}`,i)}),()=>{delete s.config.globalProperties.$i18n,ob.forEach(r=>{delete s.config.globalProperties[`$${r}`]})}}HB();AB(VB);kB(nB);EB(Z1);if(__INTLIFY_PROD_DEVTOOLS__){const s=qw();s.__INTLIFY__=!0,fB(s.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const hx="modulepreload",fx=function(s,e){return s[0]==="."?new URL(s,e).href:s},lb={},dx=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){const i=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.all(t.map(l=>{if(l=fx(l,n),l in lb)return;lb[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(!!n)for(let m=i.length-1;m>=0;m--){const S=i[m];if(S.href===l&&(!c||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":hx,c||(h.as="script",h.crossOrigin=""),h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),c)return new Promise((m,S)=>{h.addEventListener("load",m),h.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${l}`)))})}))}return r.then(()=>e()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})},Lp=(...s)=>dx(...s).catch(e=>{const t=new Event("nuxt.preloadError");throw t.payload=e,window.dispatchEvent(t),e}),uo=["en","zh-CN"],km={en:[],"zh-CN":[]},mx=[()=>Lp(()=>import("./DwhYyBu8.js"),[],import.meta.url)],rg=[{code:"en",name:"English",files:[]},{code:"zh-CN",name:"Chinese",files:[]}],pA="@nuxtjs/i18n",gx=!1,px="nuxtI18n",wx="i18n_redirected",cb="nuxt-i18n-slp",tf=new Map;async function yx(s,e){const t={messages:{}};for(const n of s){const{default:r}=await n(),i=typeof r=="function"?await e.runWithContext(async()=>await r()):r;eo(i,t)}return t}function wA(s,e){let t=[];if(Nt(s))t=s;else if($e(s)){const n=[...e,"default"];for(const r of n)s[r]&&(t=[...t,...s[r].filter(Boolean)])}else ue(s)&&e.every(n=>n!==s)&&t.push(s);return t}async function vx(s,e,t){const{defaultLocale:n,initialLocale:r,localeCodes:i,fallbackLocale:a,lazy:o}=t;if(o&&a){const c=wA(a,[n,r]);await Promise.all(c.map(u=>ub(u,e,s)))}const l=o?[...new Set().add(n).add(r)]:i;return await Promise.all(l.map(c=>ub(c,e,s))),s}async function bx(s,{key:e,load:t}){let n=null;try{const r=await t().then(i=>i.default||i);Ze(r)?n=await r(s):(n=r,n!=null&&tf&&tf.set(e,n))}catch(r){console.error("Failed locale loading: "+r.message)}return n}async function Em(s,e,t){const n=e[s];if(n==null){console.warn("Could not find messages for locale code: "+s);return}const r={};for(const i of n){let a=null;tf&&tf.has(i.key)&&i.cache?a=tf.get(i.key):a=await bx(s,i),a!=null&&eo(a,r)}t(s,r)}async function ub(s,e,t){await Em(s,e,(r,i)=>{const a=t[r]||{};eo(i,a),t[r]=a})}const Sx={path:"/",watch:!0,decode:s=>hf(decodeURIComponent(s)),encode:s=>encodeURIComponent(typeof s=="string"?s:JSON.stringify(s))},Ax=void 0;function kx(s,e){var l;const t={...Sx,...e},n=hb(t)||{};let r;t.maxAge!==void 0?r=t.maxAge*1e3:t.expires&&(r=t.expires.getTime()-Date.now());const i=r!==void 0&&r<=0,a=dn(i?void 0:n[s]??((l=t.default)==null?void 0:l.call(t))),o=r&&!i?Nx(a,r,t.watch&&t.watch!=="shallow"):Fe(a);{let c=null;try{!Ax&&typeof BroadcastChannel<"u"&&(c=new BroadcastChannel(`nuxt:cookies:${s}`))}catch{}const u=()=>{t.readonly||qN(o.value,n[s])||(Cx(s,o.value,t),n[s]=dn(o.value),c==null||c.postMessage({value:t.encode(o.value)}))},f=m=>{var A;const S=m.refresh?(A=hb(t))==null?void 0:A[s]:t.decode(m.value);h=!0,n[s]=o.value=S,Jm(()=>{h=!1})};let h=!1;ww()&&lS(()=>{h=!0,u(),c==null||c.close()}),c&&(c.onmessage=({data:m})=>f(m)),t.watch?tn(o,()=>{h||u()},{deep:t.watch!=="shallow"}):u()}return o}function hb(s={}){return HN(document.cookie,s)}function Ex(s,e,t={}){return e==null?wv(s,e,{...t,maxAge:-1}):wv(s,e,t)}function Cx(s,e,t={}){document.cookie=Ex(s,e,t)}const fb=2147483647;function Nx(s,e,t){let n,r,i=0;const a=t?Fe(s):{value:s};return ww()&&lS(()=>{r==null||r(),clearTimeout(n)}),Y0((o,l)=>{t&&(r=tn(a,l));function c(){clearTimeout(n);const u=e-i,f=u<fb?u:fb;n=setTimeout(()=>{if(i+=f,i<e)return c();a.value=void 0,l()},f)}return{get(){return o(),a.value},set(u){c(),a.value=u,l()}}})}const Ix=typeof window<"u";function _x(s){s=s||[];const e=[];for(const t of s)ue(t)?e.push({code:t}):e.push(t);return e}function Bx(s){return s!=null&&"global"in s&&"mode"in s}function xx(s){return s!=null&&!("__composer"in s)&&"locale"in s&&ge(s.locale)}function yA(s){return s!=null&&"__composer"in s}function Oi(s){return Bx(s)?s.global:s}function kc(s){const e=Oi(s);return xx(e)?e:yA(e)?e.__composer:e}function ig(s){return ne(Oi(s).locale)}function Tx(s){return ne(Oi(s).locales)}function Rx(s){return ne(Oi(s).localeCodes)}function vA(s,e){const t=Oi(s);ge(t.locale)?t.locale.value=e:t.locale=e}function bA(s){return ue(s)?s:S_(s)?s.toString():"(null)"}function db(s,e,{defaultLocale:t,strategy:n,routesNameSeparator:r,defaultLocaleRouteNameSuffix:i}){let a=bA(s)+(n==="no_prefix"?"":r+e);return e===t&&n==="prefix_and_default"&&(a+=r+i),a}function mb(s,e){return Ze(s)?s(e):s}function Ox(s,e){const t=[];for(const[n,r]of e.entries()){const i=s.find(a=>a.iso.toLowerCase()===r.toLowerCase());if(i){t.push({code:i.code,score:1-n/e.length});break}}for(const[n,r]of e.entries()){const i=r.split("-")[0].toLowerCase(),a=s.find(o=>o.iso.split("-")[0].toLowerCase()===i);if(a){t.push({code:a.code,score:.999-n/e.length});break}}return t}const Vx=Ox;function Px(s,e){return s.score===e.score?e.code.length-s.code.length:e.score-s.score}const Lx=Px;function Dx(s,e,{matcher:t=Vx,comparer:n=Lx}={}){const r=[];for(const a of s){const{code:o}=a,l=a.iso||o;r.push({code:o,iso:l})}const i=t(r,e);return i.length>1&&i.sort(n),i.length?i[0].code:""}function Cm(s){return new RegExp(`^/(${s.join("|")})(?:/|$)`,"i")}const Ux="$s";function SA(...s){const e=typeof s[s.length-1]=="string"?s.pop():void 0;typeof s[0]!="string"&&s.unshift(e);const[t,n]=s;if(!t||typeof t!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+t);if(n!==void 0&&typeof n!="function")throw new Error("[nuxt] [useState] init must be a function: "+n);const r=Ux+t,i=rt(),a=NS(i.payload.state,r);if(a.value===void 0&&n){const o=n();if(ge(o))return i.payload.state[r]=o,o;a.value=o}return a}function Mx(s,e){return[s.slice(0,e),s.slice(e)]}function Hx(s){const{fullPath:e,query:t,hash:n,name:r,path:i,params:a,meta:o,redirectedFrom:l,matched:c}=s;return{fullPath:e,params:a,query:t,hash:n,name:r,path:i,meta:o,matched:c,redirectedFrom:l}}function $x({router:s},e,t,n){var c,u;if(t!=="prefix")return s.resolve(e);const[r,i]=Mx(e.path,1),a=`${r}${n}${i===""?i:`/${i}`}`,o=(u=(c=s.options)==null?void 0:c.routes)==null?void 0:u.find(f=>f.path===a);if(o==null)return e;const l=It({},e,o);return l.path=a,s.resolve(l)}const Fx=new Set(["prefix_and_default","prefix_except_default"]);function jx(s){const{currentLocale:e,defaultLocale:t,strategy:n}=s;return!(e===t&&Fx.has(n))&&n!=="no_prefix"}const Kx=jx;function Ec(s,e){const{routesNameSeparator:t}=s.runtimeConfig.public.i18n,n=ne(e);return n==null||!n.name?void 0:bA(n.name).split(t)[0]}function Zw(s,e,t){var r;if(typeof e=="string"&&cr(e,{acceptRelative:!0}))return e;const n=ag(s,e,t);return n==null?"":((r=n.redirectedFrom)==null?void 0:r.fullPath)||n.fullPath}function ey(s,e,t){return ag(s,e,t)??void 0}function Jx(s,e,t){return ag(s,e,t)??void 0}function ag(s,e,t){const{router:n,i18n:r}=s,i=t||ig(r),{routesNameSeparator:a,defaultLocale:o,defaultLocaleRouteNameSuffix:l,strategy:c,trailingSlash:u}=s.runtimeConfig.public.i18n,f=aT(s.runtimeConfig);let h;if(ue(e))if(e[0]==="/"){const{pathname:A,search:k,hash:T}=bp(e),x=Mw(k);h={path:A,query:x,hash:T}}else h={name:e};else h=e;let m=It({},h);if((A=>"path"in A&&!!A.path&&!("name"in A))(m)){const A=$x(s,m,c,i),k=Ec(s,A);ue(k)?(m={name:db(k,i,{defaultLocale:o,strategy:c,routesNameSeparator:a,defaultLocaleRouteNameSuffix:l}),params:A.params,query:A.query,hash:A.hash},m.state=A.state):(f({currentLocale:i,defaultLocale:o,strategy:c})&&(m.path=`/${i}${m.path}`),m.path=u?dm(m.path,!0):Qm(m.path,!0))}else!m.name&&!("path"in m)&&(m.name=Ec(s,n.currentRoute.value)),m.name=db(m.name,i,{defaultLocale:o,strategy:c,routesNameSeparator:a,defaultLocaleRouteNameSuffix:l});try{const A=n.resolve(m);return A.name?A:n.resolve(e)}catch(A){if(typeof A=="object"&&"type"in A&&A.type===1)return null}}const Wx=s=>s;function qx(s,e){var n;if(s.runtimeConfig.public.i18n.experimental.switchLocalePathLinkSSR)return ne(s.metaState.value);const t=e.meta||{};return((n=ne(t))==null?void 0:n[px])||{}}function Cc(s,e,t){const n=t??s.router.currentRoute.value,r=Ec(s,n);if(!r)return"";const i=oT(s.runtimeConfig),a=Hx(n),o=qx(s,n)[e],l={...a,name:r,params:{...a.params,...o}},c=Zw(s,l,e);return i(c,e)}function AA(s,{addDirAttribute:e=!1,addSeoAttributes:t=!0,identifierAttribute:n="hid"}){const{defaultDirection:r}=gs().public.i18n,i=kc(s.i18n),a={htmlAttrs:{},link:[],meta:[]};if(ne(i.locales)==null||ne(i.baseUrl)==null)return a;const o=ig(s.i18n),l=Tx(s.i18n),c=_x(l).find(h=>h.code===o)||{code:o},u=c.iso,f=c.dir||r;return e&&(a.htmlAttrs.dir=f),t&&o&&ne(i.locales)&&(u&&(a.htmlAttrs.lang=u),a.link.push(...Gx(s,ne(l),n),...Yx(s,n,t)),a.meta.push(...Xx(s,n,t),...Qx(c,u,n),...zx(ne(l),u,n))),a}function ty(){const s=rt(),e=kc(s.$i18n);return go(ne(e.baseUrl),s.$config.app.baseURL)}function Gx(s,e,t){const n=ty(),{defaultLocale:r,strategy:i}=gs().public.i18n,a=[];if(i==="no_prefix")return a;const o=new Map;for(const l of e){const c=l.iso;if(!c){console.warn("Locale ISO code is required to generate alternate link");continue}const[u,f]=c.split("-");u&&f&&(l.isCatchallLocale||!o.has(u))&&o.set(u,l),o.set(c,l)}for(const[l,c]of o.entries()){const u=Cc(s,c.code);u&&a.push({[t]:`i18n-alt-${l}`,rel:"alternate",href:Dp(u,n),hreflang:l})}if(r){const l=Cc(s,r);l&&a.push({[t]:"i18n-xd",rel:"alternate",href:Dp(l,n),hreflang:"x-default"})}return a}function kA(s,e,t){const n=s.router.currentRoute.value,r=ey(s,{...n,path:void 0,name:Ec(s,n)});if(!r)return"";let i=Dp(r.path,e);const a=$e(t)&&t.canonicalQueries||[],o=r.query,l=new URLSearchParams;for(const u of a)if(u in o){const f=o[u];Nt(f)?f.forEach(h=>l.append(u,h||"")):l.append(u,f||"")}const c=l.toString();return c&&(i=`${i}?${c}`),i}function Yx(s,e,t){const n=ty(),r=kA(s,n,t);return r?[{[e]:"i18n-can",rel:"canonical",href:r}]:[]}function Xx(s,e,t){const n=ty(),r=kA(s,n,t);return r?[{[e]:"i18n-og-url",property:"og:url",content:r}]:[]}function Qx(s,e,t){return!s||!e?[]:[{[t]:"i18n-og",property:"og:locale",content:EA(e)}]}function zx(s,e,t){return s.filter(r=>r.iso&&r.iso!==e).map(r=>({[t]:`i18n-og-alt-${r.iso}`,property:"og:locale:alternate",content:EA(r.iso)}))}function EA(s){return(s||"").replace(/-/g,"_")}function Dp(s,e){return s.match(/^https?:\/\//)?s:go(e,s)}function Zx(s,e){return xf(s,"setLocale",e)}function eT(s,e){return xf(s,"setLocaleCookie",e)}function CA(s,e,t){return xf(s,"mergeLocaleMessage",e,t)}function tT(s,e,t,n,r){return xf(s,"onBeforeLanguageSwitch",e,t,n,r)}function sT(s,e,t){return xf(s,"onLanguageSwitched",e,t)}function sy(s){return{i18n:s??rt().$i18n,router:Vc(),runtimeConfig:gs(),metaState:SA("nuxt-i18n-meta",()=>({}))}}async function gb(s,e,t,n=!1){const{differentDomains:r,skipSettingLocaleOnNavigate:i,lazy:a}=t,o=Tf(t),l=rt(),c=ig(e),u=Rx(e);function f(m=c){o===!1||!o.useCookie||i||eT(e,m)}if(!s||!n&&r||c===s)return f(),!1;const h=await tT(e,c,s,n,l);if(h&&u.includes(h)){if(c===h)return f(),!1;s=h}if(a){const m=cT(e,"fallbackLocale"),S=(A,k)=>CA(e,A,k);if(m){const A=wA(m,[s]);await Promise.all(A.map(k=>Em(k,km,S)))}await Em(s,km,S)}return i?!1:(f(s),vA(e,s),await sT(e,c,s),!0)}function pb(s,e,t,n,r,i){const{strategy:a,defaultLocale:o,differentDomains:l}=i,c=Tf(i),u=Ze(n)?n():n,{ssg:f,callType:h,firstAccess:m,localeCookie:S}=r,{locale:A,stat:k,reason:T,from:x}=c?BA(s,t,r,u):_A;if(T==="detect_ignore_on_ssg")return u;if((x==="navigator_or_header"||x==="cookie"||x==="fallback")&&A)return A;let y=A;return y||(l?y=dT(rg,a,s):a!=="no_prefix"?y=e(s):c||(y=u)),!y&&c&&c.useCookie&&(y=S||""),y||(y=o||""),y}function wb({route:s,targetLocale:e,routeLocaleGetter:t,calledWithRouting:n=!1}){const r=rt(),i=sy(),{strategy:a,differentDomains:o}=i.runtimeConfig.public.i18n;let l="";const{fullPath:c}=s.to;if(!o&&(n||a!=="no_prefix")&&t(s.to)!==e){const u=r.$switchLocalePath(e)||r.$localePath(c,e);ue(u)&&u&&!vp(u,c)&&!u.startsWith("//")&&(l=s.from&&s.from.fullPath===u?"":u)}if((o||!0)&&t(s.to)!==e){const u=Cc(i,e,s.to);ue(u)&&u&&!vp(u,c)&&!u.startsWith("//")&&(l=u)}return l}function nT(s){return $e(s)&&"path"in s&&"statusCode"in s}const rT=()=>SA(pA+":redirect",()=>"");function yb(s,e){return P1(s,{redirectCode:e})}async function vb(s,{status:e=302,enableNavigate:t=!1}={}){const{nuxtApp:n,i18n:r,locale:i,route:a}=s,{rootRedirect:o,differentDomains:l,skipSettingLocaleOnNavigate:c}=n.$config.public.i18n;let{redirectPath:u}=s;if(a.path==="/"&&o)return ue(o)?u="/"+o:nT(o)&&(u="/"+o.path,e=o.statusCode),u=n.$localePath(u,i),yb(u,e);if(!(c&&(r.__pendingLocale=i,r.__pendingLocalePromise=new Promise(f=>{r.__resolvePendingLocalePromise=f}),!t))){if(l){const f=rT();f.value&&f.value!==u&&(f.value="",window.location.assign(u))}else if(u)return yb(u,e)}}function iT(s,e){ko(s,"$i18n",Oi(e)),ko(s,"$getRouteBaseName",ks(Ec)),ko(s,"$localePath",ks(Zw)),ko(s,"$localeRoute",ks(ey)),ko(s,"$switchLocalePath",ks(Cc)),ko(s,"$localeHead",ks(AA))}function aT(s=gs()){return e=>Kx(e)&&!s.public.i18n.differentDomains}function oT(s=gs()){return(e,t)=>{if(s.public.i18n.differentDomains){const n=xA(t);return n?go(n,e):e}else return Wx(e)}}function lT(){return()=>{const s=rt(),{baseUrl:e,defaultLocale:t,differentDomains:n}=s.$config.public.i18n;if(Ze(e))return e(s);const r=Ze(t)?t():t;if(n&&r){const i=xA(r);if(i)return i}return e}}function NA(s){return pA+" "+s}function xf(s,e,...t){const n=Oi(s),[r,i]=[n,n[e]];return Reflect.apply(i,r,[...t])}function cT(s,e){const t=Oi(s);return ne(t[e])}function ko(s,e,t){Object.defineProperty(s,e,{get:()=>t})}function ks(s,e=sy()){return(...t)=>s(e,...t)}function IA(){let s;return navigator.languages&&(s=Dx(rg,navigator.languages)),s}function uT(){const s=Tf(),e=s&&s.cookieKey||wx,t=new Date,n={expires:new Date(t.setDate(t.getDate()+365)),path:"/",sameSite:s&&s.cookieCrossOrigin?"none":"lax",secure:s&&s.cookieCrossOrigin||s&&s.cookieSecure};return s&&s.cookieDomain&&(n.domain=s.cookieDomain),kx(e,n)}function Yf(s,e,t){if(e===!1||!e.useCookie)return;const n=s.value??void 0;if(n!=null){if(uo.includes(n))return n;if(t)return s.value=t,t;s.value=void 0}}function hT(s,e,t){t===!1||!t.useCookie||(s.value=e)}const _A={locale:"",stat:!1,reason:"unknown",from:"unknown"};function BA(s,e,t,n=""){const{strategy:r}=gs().public.i18n,{ssg:i,callType:a,firstAccess:o,localeCookie:l}=t;if(r==="no_prefix"&&i==="ssg_ignore")return{locale:"",stat:!0,reason:"detect_ignore_on_ssg"};if(!o)return{locale:r==="no_prefix"?n:"",stat:!1,reason:"first_access_only"};const{redirectOn:c,alwaysRedirect:u,useCookie:f,fallbackLocale:h}=Tf(),m=ue(s)?s:s.path;if(r!=="no_prefix"){if(c==="root"){if(m!=="/")return{locale:"",stat:!1,reason:"not_redirect_on_root"}}else if(c==="no prefix"&&!u&&m.match(Cm(uo)))return{locale:"",stat:!1,reason:"not_redirect_on_no_prefix"}}let S="unknown",A,k;f&&(k=A=l,S="cookie"),k||(k=IA(),S="navigator_or_header");const T=k||h;!k&&h&&(S="fallback");const x=n||e;if(T&&(!f||u||!A)){if(r==="no_prefix")return{locale:T,stat:!0,from:S};if(a==="setup"&&T!==x)return{locale:T,stat:!0,from:S};if(u){const y=m==="/",p=c==="all",E=c==="no prefix"&&!m.match(Cm(uo));if(y||p||E)return{locale:T,stat:!0,from:S}}}return i==="ssg_setup"&&T?{locale:T,stat:!0,from:S}:(S==="navigator_or_header"||S==="cookie")&&T?{locale:T,stat:!0,from:S}:{locale:"",stat:!1,reason:"not_found_match"}}function fT(){let s;return s=window.location.host,s}function dT(s,e,t){let n=fT()||"";if(n){let r;const i=s.filter(a=>{if(a&&a.domain){let o=a.domain;return cr(a.domain)&&(o=a.domain.replace(/(http|https):\/\//,"")),o===n}return!1});if(i.length===1)r=i[0];else if(i.length>1)if(e==="no_prefix")console.warn(NA("Multiple matching domains found! This is not supported for no_prefix strategy in combination with differentDomains!")),r=i[0];else{if(t){const a=$e(t)?t.path:ue(t)?t:"";if(a&&a!==""){const o=a.match(Cm(i.map(l=>l.code)));o&&o.length>1&&(r=i.find(l=>l.code===o[1]))}}r||(r=i.find(a=>a.domainDefault))}if(r)return r.code;n=""}return n}function xA(s){var i,a;const t=gs().public.i18n,n=rg.find(o=>o.code===s),r=((a=(i=t==null?void 0:t.locales)==null?void 0:i[s])==null?void 0:a.domain)??(n==null?void 0:n.domain);if(r){if(cr(r,{strict:!0}))return r;let o;return o=new URL(window.location.origin).protocol,o+"//"+r}console.warn(NA("Could not find domain name for locale "+s))}const Tf=(s=gs().public.i18n)=>(s==null?void 0:s.detectBrowserLanguage)===!1?!1:s==null?void 0:s.detectBrowserLanguage;function mT(){return ks(Cc)}function gT(s,{locales:e=[],localeCodes:t=[],baseUrl:n="",hooks:r={},context:i={}}={}){const a=pw(),o=s.install;return s.install=(l,...c)=>{const u=yT(c[0])?It({},c[0]):{inject:!0};u.inject==null&&(u.inject=!0);const f=u.__composerExtend;if(u.__composerExtend=A=>{const k=kc(s);A.locales=jt(()=>k.locales.value),A.localeCodes=jt(()=>k.localeCodes.value),A.baseUrl=jt(()=>k.baseUrl.value);let T;return Ze(f)&&(T=Reflect.apply(f,u,[A])),()=>{T&&T()}},s.mode==="legacy"){const A=u.__vueI18nExtend;u.__vueI18nExtend=k=>{bb(k,r.onExtendVueI18n);let T;return Ze(A)&&(T=Reflect.apply(A,u,[k])),()=>{T&&T()}}}c[0]=u,Reflect.apply(o,s,[l,...c]);const h=kc(s);a.run(()=>{pT(h,{locales:e,localeCodes:t,baseUrl:n,hooks:r,context:i}),s.mode==="legacy"&&yA(s.global)&&bb(s.global,r.onExtendVueI18n)});const m=l,S=s.mode==="composition"?m.config.globalProperties.$i18n:null;if(S&&wT(S,h,r.onExtendExportedGlobal),u.inject){const A=sy(s);l.mixin({methods:{getRouteBaseName:ks(Ec,A),resolveRoute:ks(ag,A),localePath:ks(Zw,A),localeRoute:ks(ey,A),localeLocation:ks(Jx,A),switchLocalePath:ks(Cc,A),localeHead:ks(AA,A)}})}if(m.unmount){const A=m.unmount;m.unmount=()=>{a.stop(),A()}}},a}function pT(s,e){const{locales:t,localeCodes:n,baseUrl:r,context:i}=e,a=Fe(t),o=Fe(n),l=Fe("");s.locales=jt(()=>a.value),s.localeCodes=jt(()=>o.value),s.baseUrl=jt(()=>l.value),Ix?tn(s.locale,()=>{l.value=mb(r,i)},{immediate:!0}):l.value=mb(r,i),e.hooks&&e.hooks.onExtendComposer&&e.hooks.onExtendComposer(s)}function TA(s,e,t){const n=[{locales:{get(){return s.locales.value}},localeCodes:{get(){return s.localeCodes.value}},baseUrl:{get(){return s.baseUrl.value}}}];t&&n.push(t(s));for(const r of n)for(const[i,a]of Object.entries(r))Object.defineProperty(e,i,a)}function wT(s,e,t){TA(e,s,t)}function bb(s,e){const t=kc(s);TA(t,s,e)}function yT(s){return $e(s)&&("inject"in s||"__composerExtend"in s||"__vueI18nExtend"in s)}function vT(s={}){const e=s.path||window.location.pathname;let t={};try{t=hf(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(s.force||(t==null?void 0:t.path)!==e||(t==null?void 0:t.expires)<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(s.ttl??1e4)}))}catch{}if(s.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:rt().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}function bT(){const{routesNameSeparator:s,defaultLocaleRouteNameSuffix:e}=gs().public.i18n,t=`(${uo.join("|")})`,n=`(?:${s}${e})?`,r=new RegExp(`${s}${t}${n}$`,"i"),i=Cm(uo);return o=>{if($e(o)){if(o.name){const c=(ue(o.name)?o.name:o.name.toString()).match(r);if(c&&c.length>1)return c[1]}else if(o.path){const l=o.path.match(i);if(l&&l.length>1)return l[1]}}else if(ue(o)){const l=o.match(i);if(l&&l.length>1)return l[1]}return""}}const ST=xi({name:"i18n:plugin",parallel:gx,async setup(s){let e,t;const n=Fw(),{vueApp:r}=s,i=s,a={...i.$config.public.i18n};a.baseUrl=lT();const o=Tf(),l=([e,t]=Ka(()=>yx(mx,rt())),e=await e,t(),e);l.messages=l.messages||{},l.fallbackLocale=l.fallbackLocale??!1;const c=bT(),u=p=>p||l.locale||"en-US",f=uT();let h=pb(n,c,l.locale,u(a.defaultLocale),{ssg:a.strategy==="no_prefix"?"ssg_ignore":"normal",callType:"setup",firstAccess:!0,localeCookie:Yf(f,o,a.defaultLocale)},a);l.messages=([e,t]=Ka(()=>vx(l.messages,km,{localeCodes:uo,initialLocale:h,lazy:a.lazy,defaultLocale:a.defaultLocale,fallbackLocale:l.fallbackLocale})),e=await e,t(),e),h=u(h);const m=tx({...l,locale:h});let S=!0;const A=p=>h!==p&&S;let k=!0;const T=()=>k;T()&&a.strategy==="no_prefix"&&s.hook("app:mounted",async()=>{const{locale:p,stat:E,reason:N,from:L}=o?BA(n,l.locale,{ssg:"ssg_setup",callType:"setup",firstAccess:!0,localeCookie:Yf(f,o,a.defaultLocale)},h):_A;Zx(m,p),k=!1}),gT(m,{locales:a.configLocales,localeCodes:uo,baseUrl:a.baseUrl,context:i,hooks:{onExtendComposer(p){p.strategy=a.strategy,p.localeProperties=jt(()=>rg.find(E=>E.code===p.locale.value)||{code:p.locale.value}),p.setLocale=async E=>{const N=A(E);await gb(E,m,a,N)&&N&&(S=!1);const M=await i.runWithContext(()=>wb({route:{to:n},targetLocale:E,routeLocaleGetter:c}));await i.runWithContext(async()=>await vb({nuxtApp:i,i18n:m,redirectPath:M,locale:E,route:n},{enableNavigate:!0}))},p.loadLocaleMessages=async E=>{await Em(E,km,(L,M)=>CA(m,L,M))},p.differentDomains=a.differentDomains,p.defaultLocale=a.defaultLocale,p.getBrowserLocale=()=>IA(),p.getLocaleCookie=()=>Yf(f,o,a.defaultLocale),p.setLocaleCookie=E=>hT(f,E,o),p.onBeforeLanguageSwitch=(E,N,L,M)=>s.callHook("i18n:beforeLocaleSwitch",{oldLocale:E,newLocale:N,initialSetup:L,context:M}),p.onLanguageSwitched=(E,N)=>s.callHook("i18n:localeSwitched",{oldLocale:E,newLocale:N}),p.finalizePendingLocaleChange=async()=>{m.__pendingLocale&&(vA(m,m.__pendingLocale),m.__resolvePendingLocalePromise&&await m.__resolvePendingLocalePromise(),m.__pendingLocale=void 0)},p.waitForPendingLocaleChange=async()=>{m.__pendingLocale&&m.__pendingLocalePromise&&await m.__pendingLocalePromise}},onExtendExportedGlobal(p){return{strategy:{get(){return p.strategy}},localeProperties:{get(){return p.localeProperties.value}},setLocale:{get(){return async E=>Reflect.apply(p.setLocale,p,[E])}},differentDomains:{get(){return p.differentDomains}},defaultLocale:{get(){return p.defaultLocale}},getBrowserLocale:{get(){return()=>Reflect.apply(p.getBrowserLocale,p,[])}},getLocaleCookie:{get(){return()=>Reflect.apply(p.getLocaleCookie,p,[])}},setLocaleCookie:{get(){return E=>Reflect.apply(p.setLocaleCookie,p,[E])}},onBeforeLanguageSwitch:{get(){return(E,N,L,M)=>Reflect.apply(p.onBeforeLanguageSwitch,p,[E,N,L,M])}},onLanguageSwitched:{get(){return(E,N)=>Reflect.apply(p.onLanguageSwitched,p,[E,N])}},finalizePendingLocaleChange:{get(){return()=>Reflect.apply(p.finalizePendingLocaleChange,p,[])}},waitForPendingLocaleChange:{get(){return()=>Reflect.apply(p.waitForPendingLocaleChange,p,[])}}}},onExtendVueI18n(p){return{strategy:{get(){return p.strategy}},localeProperties:{get(){return p.localeProperties.value}},setLocale:{get(){return async E=>Reflect.apply(p.setLocale,p,[E])}},loadLocaleMessages:{get(){return async E=>Reflect.apply(p.loadLocaleMessages,p,[E])}},differentDomains:{get(){return p.differentDomains}},defaultLocale:{get(){return p.defaultLocale}},getBrowserLocale:{get(){return()=>Reflect.apply(p.getBrowserLocale,p,[])}},getLocaleCookie:{get(){return()=>Reflect.apply(p.getLocaleCookie,p,[])}},setLocaleCookie:{get(){return E=>Reflect.apply(p.setLocaleCookie,p,[E])}},onBeforeLanguageSwitch:{get(){return(E,N,L,M)=>Reflect.apply(p.onBeforeLanguageSwitch,p,[E,N,L,M])}},onLanguageSwitched:{get(){return(E,N)=>Reflect.apply(p.onLanguageSwitched,p,[E,N])}},finalizePendingLocaleChange:{get(){return()=>Reflect.apply(p.finalizePendingLocaleChange,p,[])}},waitForPendingLocaleChange:{get(){return()=>Reflect.apply(p.waitForPendingLocaleChange,p,[])}}}}}});const x={__composerExtend:p=>{const E=kc(m);return p.strategy=E.strategy,p.localeProperties=jt(()=>E.localeProperties.value),p.setLocale=E.setLocale,p.differentDomains=E.differentDomains,p.getBrowserLocale=E.getBrowserLocale,p.getLocaleCookie=E.getLocaleCookie,p.setLocaleCookie=E.setLocaleCookie,p.onBeforeLanguageSwitch=E.onBeforeLanguageSwitch,p.onLanguageSwitched=E.onLanguageSwitched,p.finalizePendingLocaleChange=E.finalizePendingLocaleChange,p.waitForPendingLocaleChange=E.waitForPendingLocaleChange,()=>{}}};if(r.use(m,x),iT(i,m),a.experimental.switchLocalePathLinkSSR===!0){const p=mT(),E=new RegExp([`<!--${cb}-\\[(\\w+)\\]-->`,".+?",`<!--/${cb}-->`].join(""),"g");s.hook("app:rendered",N=>{var L;((L=N.renderResult)==null?void 0:L.html)!=null&&(N.renderResult.html=N.renderResult.html.replaceAll(E,(M,F)=>M.replace(/href="([^"]+)"/,`href="${p(F??"")}"`)))})}let y=0;rI("locale-changing",async(p,E)=>{let N,L;const M=pb(p,c,l.locale,()=>ig(m)||u(a.defaultLocale),{ssg:T()&&a.strategy==="no_prefix"?"ssg_ignore":"normal",callType:"routing",firstAccess:y===0,localeCookie:Yf(f,o,a.defaultLocale)},a),F=A(M);([N,L]=Ka(()=>gb(M,m,a,F)),N=await N,L(),N)&&F&&(S=!1);const ce=([N,L]=Ka(()=>i.runWithContext(()=>wb({route:{to:p,from:E},targetLocale:M,routeLocaleGetter:a.strategy==="no_prefix"?()=>M:c,calledWithRouting:!0}))),N=await N,L(),N);return y++,[N,L]=Ka(()=>i.runWithContext(async()=>vb({nuxtApp:i,i18n:m,redirectPath:ce,locale:M,route:p}))),N=await N,L(),N},{global:!0})}}),AT=xi({name:"nuxt:chunk-reload",setup(s){const e=Vc(),t=gs(),n=new Set;e.beforeEach(()=>{n.clear()}),s.hook("app:chunkError",({error:i})=>{n.add(i)});function r(i){const o="href"in i&&i.href[0]==="#"?t.app.baseURL+i.href:go(t.app.baseURL,i.fullPath);vT({path:o,persistState:!0})}s.hook("app:manifest:update",()=>{e.beforeResolve(r)}),e.onError((i,a)=>{n.has(i)&&r(a)})}}),kT=[l_,u_,d_,m_,g_,p_,ST,AT],Rf=(s,e)=>{const t=s.__vccOpts||s;for(const[n,r]of e)t[n]=r;return t},ET={},CT={id:"toast-simple",class:"fixed top-0 left-0 right-0 mx-auto mt-4 flex items-center p-4 space-x-4 w-full max-w-xs text-gray-900 rounded-lg divide-x divide-gray-200 shadow dark:text-gray-400 dark:divide-gray-700 space-x",role:"alert"},NT=le("svg",{"aria-hidden":"true",class:"w-5 h-5 text-blue-600 dark:text-blue-500",focusable:"false","data-prefix":"fas","data-icon":"paper-plane",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},[le("path",{fill:"currentColor",d:"M511.6 36.86l-64 415.1c-1.5 9.734-7.375 18.22-15.97 23.05c-4.844 2.719-10.27 4.097-15.68 4.097c-4.188 0-8.319-.8154-12.29-2.472l-122.6-51.1l-50.86 76.29C226.3 508.5 219.8 512 212.8 512C201.3 512 192 502.7 192 491.2v-96.18c0-7.115 2.372-14.03 6.742-19.64L416 96l-293.7 264.3L19.69 317.5C8.438 312.8 .8125 302.2 .0625 289.1s5.469-23.72 16.06-29.77l448-255.1c10.69-6.109 23.88-5.547 34 1.406S513.5 24.72 511.6 36.86z"})],-1),IT={class:"pl-4 text-sm font-normal"};function _T(s,e){return Ke(),yt("div",CT,[NT,le("div",IT,[Ow(s.$slots,"default")])])}const BT=Rf(ET,[["render",_T]]),xT={class:"relative bg-gray-700 rounded-lg shadow m-4"},TT={class:"flex justify-between items-center p-2 rounded-t border-b border-gray-600"},RT={class:"text-l font-semibold text-gray-200"},OT=le("svg",{"aria-hidden":"true",class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[le("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),VT=le("span",{class:"sr-only"},"Close modal",-1),PT=[OT,VT],LT={class:"p-3 space-y-6"},DT={class:"text-sm leading-relaxed text-gray-400"},UT={class:"flex justify-end items-center p-3 space-x-3 rounded-b border-t border-gray-600"},MT=or({__name:"MyModal",props:{title:String,description:String,modaltype:Number,btn1:String,btn2:String},setup(s){const e=s;return(t,n)=>(Ke(),yt("div",{id:"defaultModal",tabindex:"-1","aria-hidden":"true",class:"absolute w-full min-h-screen flex items-center justify-center backdrop-blur backdrop-filter z-50",onClick:n[3]||(n[3]=r=>t.$emit("someEvent",e.modaltype,2))},[le("div",xT,[le("div",TT,[le("h3",RT,Ve(e.title),1),le("button",{onClick:n[0]||(n[0]=r=>t.$emit("someEvent",e.modaltype,2)),type:"button",class:"text-gray-400 bg-transparent rounded-lg text-sm p-1.5 ml-auto inline-flex items-center hover:bg-gray-600 hover:text-white","data-modal-toggle":"defaultModal"},PT)]),le("div",LT,[le("p",DT,Ve(e.description),1)]),le("div",UT,[e.btn1.length>0?(Ke(),yt("button",{key:0,onClick:n[1]||(n[1]=r=>t.$emit("someEvent",e.modaltype,1)),"data-modal-toggle":"defaultModal",type:"button",class:"text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center"},Ve(e.btn1),1)):fn("",!0),e.btn2?(Ke(),yt("button",{key:1,onClick:n[2]||(n[2]=r=>t.$emit("someEvent",e.modaltype,2)),"data-modal-toggle":"defaultModal",type:"button",class:"hover:bg-gray-600 focus:ring-4 focus:outline-none focus:ring-gray-600 rounded-lg border border-gray-500 text-sm font-medium px-5 py-2.5 hover:text-white focus:z-10 bg-gray-700 text-gray-300"},Ve(e.btn2),1)):fn("",!0)])])]))}}),HT=s=>{const e=Object.create(null);for(const t in s){const n=s[t];n!==void 0&&(e[t]=n)}return e},ny=(s,e)=>(t,n)=>(QI(()=>s({...HT(t),...n.attrs},n)),()=>{var r,i;return e?(i=(r=n.slots).default)==null?void 0:i.call(r):null}),RA={accesskey:String,autocapitalize:String,autofocus:{type:Boolean,default:void 0},class:[String,Object,Array],contenteditable:{type:Boolean,default:void 0},contextmenu:String,dir:String,draggable:{type:Boolean,default:void 0},enterkeyhint:String,exportparts:String,hidden:{type:Boolean,default:void 0},id:String,inputmode:String,is:String,itemid:String,itemprop:String,itemref:String,itemscope:String,itemtype:String,lang:String,nonce:String,part:String,slot:String,spellcheck:{type:Boolean,default:void 0},style:String,tabindex:String,title:String,translate:String},$T=or({name:"Link",inheritAttrs:!1,props:{...RA,as:String,crossorigin:String,disabled:Boolean,fetchpriority:String,href:String,hreflang:String,imagesizes:String,imagesrcset:String,integrity:String,media:String,prefetch:{type:Boolean,default:void 0},referrerpolicy:String,rel:String,sizes:String,title:String,type:String,methods:String,target:String,body:Boolean,renderPriority:[String,Number]},setup:ny(s=>({link:[s]}))}),FT=or({name:"Title",inheritAttrs:!1,setup:ny((s,{slots:e})=>{var t,n,r;return{title:((r=(n=(t=e.default)==null?void 0:t.call(e))==null?void 0:n[0])==null?void 0:r.children)||null}})}),jT=or({name:"Meta",inheritAttrs:!1,props:{...RA,charset:String,content:String,httpEquiv:String,name:String,body:Boolean,renderPriority:[String,Number]},setup:ny(s=>{const e={...s};return e.httpEquiv&&(e["http-equiv"]=e.httpEquiv,delete e.httpEquiv),{meta:[e]}})}),KT={__name:"MyBA",props:{clickable:{default:!0}},setup(s){return(e,t)=>(Ke(),yt("button",{class:xt(["rounded-md border-solid border-2 border-black/25 px-3 py-2 text-sm font-medium text-black flex-1 max-w-60 m-1",s.clickable?"hover:border-black focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75":"text-black/50"]),type:"button"},[Ow(e.$slots,"default")],2))}},JT={};function WT(s,e){return Ke(),yt("button",{id:"fileSelect",onDragover:e[0]||(e[0]=Bn(()=>{},["prevent"])),class:"rounded-md border-black/25 border-2 border-dashed px-3 py-2 text-sm font-medium text-black hover:border-black focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 flex-1 max-w-60 m-1"},[Ow(s.$slots,"default")],32)}const qT=Rf(JT,[["render",WT]]),GT={},YT={class:"ml-2 inline cursor-help",xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 1 24 24"},XT=le("path",{fill:"currentColor",d:"M3 5.75A.75.75 0 0 1 3.75 5c2.663 0 5.258-.943 7.8-2.85a.75.75 0 0 1 .9 0C14.992 4.057 17.587 5 20.25 5a.75.75 0 0 1 .75.75V11c0 5.001-2.958 8.676-8.725 10.948a.75.75 0 0 1-.55 0C5.958 19.676 3 16 3 11zm1.5.728V11c0 4.256 2.453 7.379 7.5 9.442c5.047-2.063 7.5-5.186 7.5-9.442V6.478c-2.577-.152-5.08-1.09-7.5-2.8c-2.42 1.71-4.923 2.648-7.5 2.8M13 16a1 1 0 1 1-2 0a1 1 0 0 1 2 0m-2.25-6.25a1.25 1.25 0 1 1 2.5 0c0 .447-.248.737-.78 1.268l-.047.047c-.47.468-1.173 1.167-1.173 2.285a.75.75 0 0 0 1.5 0c0-.45.249-.74.78-1.27l.049-.05c.47-.467 1.171-1.165 1.171-2.28a2.75 2.75 0 1 0-5.5 0a.75.75 0 0 0 1.5 0"},null,-1),QT=[XT];function zT(s,e){return Ke(),yt("svg",YT,QT)}const ZT=Rf(GT,[["render",zT]]),eR={},tR={class:"inline",xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 4 72 72"},sR=YE('<path fill-rule="evenodd" d="M20.4 32.431A16 16 0 0 0 20 36c0 8.837 7.163 16 16 16c1.227 0 2.421-.138 3.569-.4c-3.336-2.435-6.844-5.437-10.288-8.881S22.835 35.767 20.4 32.43m26.217 15.54c-3.326-.69-8.54-4.08-13.523-9.064c-4.984-4.983-8.375-10.197-9.064-13.523A15.96 15.96 0 0 1 36 20c8.837 0 16 7.163 16 16c0 4.763-2.08 9.039-5.383 11.97" clip-rule="evenodd"></path><circle cx="36" cy="36" r="20" fill="#d22f27" stroke="#d22f27" stroke-width="2"></circle><path fill="#d22f27" fill-rule="evenodd" d="M58.88 58.88c-3.949 3.95-17.394-3.093-30.03-15.73C16.213 30.514 9.17 17.07 13.12 13.12c1.848-1.848 5.775-1.29 10.727 1.124c3.405 1.66 7.312 1.98 11.096 1.784Q35.468 16 36 16c11.046 0 20 8.954 20 20q0 .532-.028 1.057c-.197 3.784.124 7.69 1.784 11.096c2.413 4.952 2.972 8.88 1.124 10.727" clip-rule="evenodd"></path><path d="M36 51c8.284 0 15-6.716 15-15s-6.716-15-15-15s-15 6.716-15 15s6.716 15 15 15"></path><path fill="#d22f27" fill-rule="evenodd" d="M18.203 14.039c-.365-.365-.858-.59-1.372-.539c-.967.098-1.756.425-2.331 1c-3.71 3.71 2.907 16.345 14.781 28.219S53.79 61.21 57.5 57.5c.575-.575.902-1.364 1-2.331c.052-.514-.174-1.007-.54-1.372l-6.649-6.65c-.464-.464-1.347-.111-1.811.353c-2.157 2.157-9.503-1.69-16.406-8.594C26.19 32.003 22.343 24.657 24.5 22.5c.464-.464.817-1.347.353-1.811z" clip-rule="evenodd"></path><path fill="#e27022" stroke="#d22f27" stroke-width="0.5" d="M14.71 14.71c.23-.23.842-.564 2.352-.39c1.48.17 3.442.798 5.799 1.947c3.899 1.9 8.247 2.213 12.199 2.007q.466-.024.94-.024c9.803 0 17.75 7.947 17.75 17.75q0 .475-.024.94c-.206 3.952.107 8.3 2.007 12.2c1.15 2.356 1.778 4.318 1.948 5.797c.173 1.51-.162 2.123-.392 2.352c-.246.247-.936.61-2.656.352c-1.668-.251-3.862-1.035-6.466-2.4c-5.183-2.714-11.523-7.479-17.726-13.682S19.473 29.016 16.758 23.833c-1.364-2.604-2.148-4.798-2.398-6.466c-.259-1.72.104-2.41.35-2.656Z"></path><path fill-rule="evenodd" d="M33.094 38.906c4.11 4.111 8.378 7.138 11.614 8.46c1.169.477 2.49.13 3.324-.819A15.94 15.94 0 0 0 52 36c0-8.837-7.163-16-16-16a15.94 15.94 0 0 0-10.547 3.968c-.95.834-1.296 2.155-.818 3.325c1.32 3.235 4.348 7.502 8.459 11.613" clip-rule="evenodd"></path><path d="m28.85 43.15l-.707.707zm30.03 15.73l-.707-.707zm-1.124-10.727l.899-.438zm-29.613-4.296c6.37 6.37 12.97 11.358 18.516 14.264c2.768 1.45 5.325 2.408 7.492 2.733c2.142.322 4.12.05 5.436-1.267l-1.414-1.414c-.657.658-1.842.986-3.725.704c-1.86-.28-4.194-1.131-6.861-2.528c-5.323-2.788-11.763-7.639-18.03-13.906zm-15.73-31.444c-1.318 1.316-1.59 3.294-1.267 5.436c.325 2.167 1.284 4.724 2.733 7.492c2.906 5.546 7.894 12.147 14.264 18.516l1.414-1.414c-6.267-6.267-11.118-12.707-13.906-18.03c-1.397-2.667-2.248-5.001-2.528-6.86c-.283-1.885.046-3.069.704-3.726zm11.872.932c-2.529-1.232-4.863-2.026-6.852-2.255c-1.973-.226-3.788.09-5.02 1.322l1.414 1.415c.615-.615 1.688-.944 3.378-.75c1.676.193 3.78.885 6.204 2.066zM36 15q-.558 0-1.11.029l.105 1.997Q35.495 17 36 17zm21 21c0-11.598-9.402-21-21-21v2c10.493 0 19 8.507 19 19zm-.029 1.11q.03-.552.029-1.11h-2q0 .505-.026 1.005zm2.617 22.478c1.232-1.233 1.548-3.047 1.322-5.022c-.229-1.988-1.023-4.322-2.255-6.85l-1.798.876c1.181 2.422 1.873 4.527 2.066 6.203c.194 1.69-.135 2.763-.75 3.378zm-4.614-22.583c-.201 3.858.116 7.962 1.883 11.587l1.798-.877c-1.553-3.186-1.877-6.897-1.684-10.606zM23.409 15.143c3.624 1.767 7.728 2.084 11.586 1.883l-.104-1.997c-3.709.193-7.42-.131-10.606-1.684z"></path><path fill="none" stroke="#000" stroke-linecap="round" stroke-width="2" d="M16.224 33A20 20 0 0 0 16 36c0 11.046 8.954 20 20 20c1.194 0 2.364-.105 3.5-.305"></path><path fill="none" stroke="#e27022" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M36 52c-8.837 0-16-7.163-16-16"></path>',10),nR=[sR];function rR(s,e){return Ke(),yt("svg",tR,nR)}const iR=Rf(eR,[["render",rR]]),aR={},oR={class:"transition-all duration-700 ease-in-out",xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 24 24"},lR=le("path",{fill:"currentColor","fill-rule":"evenodd",d:"m4 15l8-8l8 8l-2 2l-6-6l-6 6z"},null,-1),cR=[lR];function uR(s,e){return Ke(),yt("svg",oR,cR)}const hR=Rf(aR,[["render",uR]]);/*!
 * MIT License
 * 
 * Copyright (c) 2017-2022 Peculiar Ventures, LLC
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const fR="[object ArrayBuffer]";class be{static isArrayBuffer(e){return Object.prototype.toString.call(e)===fR}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if(e.constructor===t)return e;if(this.isArrayBuffer(e))return new t(e);if(this.isArrayBufferView(e))return new t(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,t){const n=be.toUint8Array(e),r=be.toUint8Array(t);if(n.length!==r.byteLength)return!1;for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}static concat(...e){let t;Array.isArray(e[0])&&!(e[1]instanceof Function)||Array.isArray(e[0])&&e[1]instanceof Function?t=e[0]:e[e.length-1]instanceof Function?t=e.slice(0,e.length-1):t=e;let n=0;for(const a of t)n+=a.byteLength;const r=new Uint8Array(n);let i=0;for(const a of t){const o=this.toUint8Array(a);r.set(o,i),i+=o.length}return e[e.length-1]instanceof Function?this.toView(r,e[e.length-1]):r.buffer}}const Ng="string",dR=/^[0-9a-f]+$/i,mR=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,gR=/^[a-zA-Z0-9-_]+$/;class Sb{static fromString(e){const t=unescape(encodeURIComponent(e)),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer}static toString(e){const t=be.toUint8Array(e);let n="";for(let i=0;i<t.length;i++)n+=String.fromCharCode(t[i]);return decodeURIComponent(escape(n))}}class un{static toString(e,t=!1){const n=be.toArrayBuffer(e),r=new DataView(n);let i="";for(let a=0;a<n.byteLength;a+=2){const o=r.getUint16(a,t);i+=String.fromCharCode(o)}return i}static fromString(e,t=!1){const n=new ArrayBuffer(e.length*2),r=new DataView(n);for(let i=0;i<e.length;i++)r.setUint16(i*2,e.charCodeAt(i),t);return n}}class Ae{static isHex(e){return typeof e===Ng&&dR.test(e)}static isBase64(e){return typeof e===Ng&&mR.test(e)}static isBase64Url(e){return typeof e===Ng&&gR.test(e)}static ToString(e,t="utf8"){const n=be.toUint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(n);case"binary":return this.ToBinary(n);case"hex":return this.ToHex(n);case"base64":return this.ToBase64(n);case"base64url":return this.ToBase64Url(n);case"utf16le":return un.toString(n,!0);case"utf16":case"utf16be":return un.toString(n);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromString(e,t="utf8"){if(!e)return new ArrayBuffer(0);switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return un.fromString(e,!0);case"utf16":case"utf16be":return un.fromString(e);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToBase64(e){const t=be.toUint8Array(e);if(typeof btoa<"u"){const n=this.ToString(t,"binary");return btoa(n)}else return Buffer.from(t).toString("base64")}static FromBase64(e){const t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!Ae.isBase64(t))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(t)):new Uint8Array(Buffer.from(t,"base64")).buffer}static FromBase64Url(e){const t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!Ae.isBase64Url(t))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(t.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,t=Ae.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.FromBinary(e);case"utf8":return Sb.fromString(e);case"utf16":case"utf16be":return un.fromString(e);case"utf16le":case"usc2":return un.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToUtf8String(e,t=Ae.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.ToBinary(e);case"utf8":return Sb.toString(e);case"utf16":case"utf16be":return un.toString(e);case"utf16le":case"usc2":return un.toString(e,!0);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromBinary(e){const t=e.length,n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e.charCodeAt(r);return n.buffer}static ToBinary(e){const t=be.toUint8Array(e);let n="";for(let r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return n}static ToHex(e){const t=be.toUint8Array(e);let n="";const r=t.length;for(let i=0;i<r;i++){const a=t[i];a<16&&(n+="0"),n+=a.toString(16)}return n}static FromHex(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!Ae.isHex(t))throw new TypeError("Argument 'hexString' is not HEX encoded");t.length%2&&(t=`0${t}`);const n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r=r+2){const i=t.slice(r,r+2);n[r/2]=parseInt(i,16)}return n.buffer}static ToUtf16String(e,t=!1){return un.toString(e,t)}static FromUtf16String(e,t=!1){return un.fromString(e,t)}static Base64Padding(e){const t=4-e.length%4;if(t<4)for(let n=0;n<t;n++)e+="=";return e}static formatString(e){return(e==null?void 0:e.replace(/[\n\r\t ]/g,""))||""}}Ae.DEFAULT_UTF8_ENCODING="utf8";/*!
 Copyright (c) Peculiar Ventures, LLC
*/function d(s,e,t){var n;return s instanceof Object&&(n=s[e])!==null&&n!==void 0?n:t}function Ab(s,e=0,t=s.byteLength-e,n=!1){let r="";for(const i of new Uint8Array(s,e,t)){const a=i.toString(16).toUpperCase();a.length===1&&(r+="0"),r+=a,n&&(r+=" ")}return r.trim()}function ho(s,e){let t=0;if(s.length===1)return s[0];for(let n=s.length-1;n>=0;n--)t+=s[s.length-1-n]*Math.pow(2,e*n);return t}function ar(s,e,t=-1){const n=t;let r=s,i=0,a=Math.pow(2,e);for(let o=1;o<8;o++){if(s<a){let l;if(n<0)l=new ArrayBuffer(o),i=o;else{if(n<o)return new ArrayBuffer(0);l=new ArrayBuffer(n),i=n}const c=new Uint8Array(l);for(let u=o-1;u>=0;u--){const f=Math.pow(2,u*e);c[i-u-1]=Math.floor(r/f),r-=c[i-u-1]*f}return l}a*=Math.pow(2,e)}return new ArrayBuffer(0)}function cc(...s){let e=0,t=0;for(const i of s)e+=i.byteLength;const n=new ArrayBuffer(e),r=new Uint8Array(n);for(const i of s)r.set(new Uint8Array(i),t),t+=i.byteLength;return n}function Up(...s){let e=0,t=0;for(const i of s)e+=i.length;const n=new ArrayBuffer(e),r=new Uint8Array(n);for(const i of s)r.set(i,t),t+=i.length;return r}function OA(){const s=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const o=s[0]===255&&s[1]&128,l=s[0]===0&&(s[1]&128)===0;(o||l)&&this.warnings.push("Needlessly long format")}const e=new ArrayBuffer(this.valueHex.byteLength),t=new Uint8Array(e);for(let o=0;o<this.valueHex.byteLength;o++)t[o]=0;t[0]=s[0]&128;const n=ho(t,8),r=new ArrayBuffer(this.valueHex.byteLength),i=new Uint8Array(r);for(let o=0;o<this.valueHex.byteLength;o++)i[o]=s[o];return i[0]&=127,ho(i,8)-n}function pR(s){const e=s<0?s*-1:s;let t=128;for(let n=1;n<8;n++){if(e<=t){if(s<0){const a=t-e,o=ar(a,8,n),l=new Uint8Array(o);return l[0]|=128,o}let r=ar(e,8,n),i=new Uint8Array(r);if(i[0]&128){const a=r.slice(0),o=new Uint8Array(a);r=new ArrayBuffer(r.byteLength+1),i=new Uint8Array(r);for(let l=0;l<a.byteLength;l++)i[l+1]=o[l];i[0]=0}return r}t*=Math.pow(2,8)}return new ArrayBuffer(0)}function Nc(s,e){if(s.byteLength!==e.byteLength)return!1;const t=new Uint8Array(s),n=new Uint8Array(e);for(let r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}function Es(s,e){const t=s.toString(10);if(e<t.length)return"";const n=e-t.length,r=new Array(n);for(let a=0;a<n;a++)r[a]="0";return r.join("").concat(t)}const VA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",PA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function Mp(s,e=!1,t=!1,n=!1){let r=0,i=0,a=0,o="";const l=e?PA:VA;if(n){let c=0;for(let u=0;u<s.length;u++)if(s.charCodeAt(u)!==0){c=u;break}s=s.slice(c)}for(;r<s.length;){const c=s.charCodeAt(r++);r>=s.length&&(i=1);const u=s.charCodeAt(r++);r>=s.length&&(a=1);const f=s.charCodeAt(r++),h=c>>2,m=(c&3)<<4|u>>4;let S=(u&15)<<2|f>>6,A=f&63;i===1?S=A=64:a===1&&(A=64),t?S===64?o+=`${l.charAt(h)}${l.charAt(m)}`:A===64?o+=`${l.charAt(h)}${l.charAt(m)}${l.charAt(S)}`:o+=`${l.charAt(h)}${l.charAt(m)}${l.charAt(S)}${l.charAt(A)}`:o+=`${l.charAt(h)}${l.charAt(m)}${l.charAt(S)}${l.charAt(A)}`}return o}function mf(s,e=!1,t=!1){const n=e?PA:VA;function r(l){for(let c=0;c<64;c++)if(n.charAt(c)===l)return c;return 64}function i(l){return l===64?0:l}let a=0,o="";for(;a<s.length;){const l=r(s.charAt(a++)),c=a>=s.length?0:r(s.charAt(a++)),u=a>=s.length?0:r(s.charAt(a++)),f=a>=s.length?0:r(s.charAt(a++)),h=i(l)<<2|i(c)>>4,m=(i(c)&15)<<4|i(u)>>2,S=(i(u)&3)<<6|i(f);o+=String.fromCharCode(h),u!==64&&(o+=String.fromCharCode(m)),f!==64&&(o+=String.fromCharCode(S))}if(t){const l=o.length;let c=-1;for(let u=l-1;u>=0;u--)if(o.charCodeAt(u)!==0){c=u;break}c!==-1?o=o.slice(0,c+1):o=""}return o}function Nm(s){let e="";const t=new Uint8Array(s);for(const n of t)e+=String.fromCharCode(n);return e}function Ic(s){const e=s.length,t=new ArrayBuffer(e),n=new Uint8Array(t);for(let r=0;r<e;r++)n[r]=s.charCodeAt(r);return t}const wR=Math.log(2);function yR(s){const e=Math.log(s)/wR,t=Math.floor(e),n=Math.round(e);return t===n?t:n}function X(s,e){for(const t of e)delete s[t]}/*!
 * Copyright (c) 2014, GMO GlobalSign
 * Copyright (c) 2015-2022, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */function Im(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function ry(s){let e=0,t=0;for(let r=0;r<s.length;r++){const i=s[r];e+=i.byteLength}const n=new Uint8Array(e);for(let r=0;r<s.length;r++){const i=s[r];n.set(new Uint8Array(i),t),t+=i.byteLength}return n.buffer}function ur(s,e,t,n){return e instanceof Uint8Array?e.byteLength?t<0?(s.error="Wrong parameter: inputOffset less than zero",!1):n<0?(s.error="Wrong parameter: inputLength less than zero",!1):e.byteLength-t-n<0?(s.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(s.error="Wrong parameter: inputBuffer has zero length",!1):(s.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class iy{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return ry(this.items)}}const Uc=[new Uint8Array([1])],kb="0123456789",Ig="name",Eb="valueHexView",vR="isHexOnly",bR="idBlock",SR="tagClass",AR="tagNumber",kR="isConstructed",ER="fromBER",CR="toBER",NR="local",fs="",on=new ArrayBuffer(0),og=new Uint8Array(0),gf="EndOfContent",LA="OCTET STRING",DA="BIT STRING";function hr(s){var e;return e=class extends s{constructor(...n){var r;super(...n);const i=n[0]||{};this.isHexOnly=(r=i.isHexOnly)!==null&&r!==void 0?r:!1,this.valueHexView=i.valueHex?be.toUint8Array(i.valueHex):og}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(n){this.valueHexView=new Uint8Array(n)}fromBER(n,r,i){const a=n instanceof ArrayBuffer?new Uint8Array(n):n;if(!ur(this,a,r,i))return-1;const o=r+i;return this.valueHexView=a.subarray(r,o),this.valueHexView.length?(this.blockLength=i,o):(this.warnings.push("Zero buffer length"),r)}toBER(n=!1){return this.isHexOnly?n?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",on)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:Ae.ToHex(this.valueHexView)}}},e.NAME="hexBlock",e}class po{constructor({blockLength:e=0,error:t=fs,warnings:n=[],valueBeforeDecode:r=og}={}){this.blockLength=e,this.error=t,this.warnings=n,this.valueBeforeDecodeView=be.toUint8Array(r)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:Ae.ToHex(this.valueBeforeDecodeView)}}}po.NAME="baseBlock";class ps extends po{fromBER(e,t,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}ps.NAME="valueBlock";class UA extends hr(po){constructor({idBlock:e={}}={}){var t,n,r,i;super(),e?(this.isHexOnly=(t=e.isHexOnly)!==null&&t!==void 0?t:!1,this.valueHexView=e.valueHex?be.toUint8Array(e.valueHex):og,this.tagClass=(n=e.tagClass)!==null&&n!==void 0?n:-1,this.tagNumber=(r=e.tagNumber)!==null&&r!==void 0?r:-1,this.isConstructed=(i=e.isConstructed)!==null&&i!==void 0?i:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",on}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){const r=new Uint8Array(1);if(!e){let i=this.tagNumber;i&=31,t|=i,r[0]=t}return r.buffer}if(!this.isHexOnly){const r=ar(this.tagNumber,7),i=new Uint8Array(r),a=r.byteLength,o=new Uint8Array(a+1);if(o[0]=t|31,!e){for(let l=0;l<a-1;l++)o[l+1]=i[l]|128;o[a]=i[a-1]}return o.buffer}const n=new Uint8Array(this.valueHexView.byteLength+1);if(n[0]=t|31,!e){const r=this.valueHexView;for(let i=0;i<r.length-1;i++)n[i+1]=r[i]|128;n[this.valueHexView.byteLength]=r[r.length-1]}return n.buffer}fromBER(e,t,n){const r=be.toUint8Array(e);if(!ur(this,r,t,n))return-1;const i=r.subarray(t,t+n);if(i.length===0)return this.error="Zero buffer length",-1;switch(i[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(i[0]&32)===32,this.isHexOnly=!1;const o=i[0]&31;if(o!==31)this.tagNumber=o,this.blockLength=1;else{let l=1,c=this.valueHexView=new Uint8Array(255),u=255;for(;i[l]&128;){if(c[l-1]=i[l]&127,l++,l>=i.length)return this.error="End of input reached before message was fully decoded",-1;if(l===u){u+=255;const h=new Uint8Array(u);for(let m=0;m<c.length;m++)h[m]=c[m];c=this.valueHexView=new Uint8Array(u)}}this.blockLength=l+1,c[l-1]=i[l]&127;const f=new Uint8Array(l);for(let h=0;h<l;h++)f[h]=c[h];c=this.valueHexView=new Uint8Array(l),c.set(f),this.blockLength<=9?this.tagNumber=ho(c,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}UA.NAME="identificationBlock";class MA extends po{constructor({lenBlock:e={}}={}){var t,n,r;super(),this.isIndefiniteForm=(t=e.isIndefiniteForm)!==null&&t!==void 0?t:!1,this.longFormUsed=(n=e.longFormUsed)!==null&&n!==void 0?n:!1,this.length=(r=e.length)!==null&&r!==void 0?r:0}fromBER(e,t,n){const r=be.toUint8Array(e);if(!ur(this,r,t,n))return-1;const i=r.subarray(t,t+n);if(i.length===0)return this.error="Zero buffer length",-1;if(i[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=i[0]===128,this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(i[0]&128),this.longFormUsed===!1)return this.length=i[0],this.blockLength=1,t+this.blockLength;const a=i[0]&127;if(a>8)return this.error="Too big integer",-1;if(a+1>i.length)return this.error="End of input reached before message was fully decoded",-1;const o=t+1,l=r.subarray(o,o+a);return l[a-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=ho(l,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=a+1,t+this.blockLength}toBER(e=!1){let t,n;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(t),n[0]=128),t;if(this.longFormUsed){const r=ar(this.length,8);if(r.byteLength>127)return this.error="Too big length",on;if(t=new ArrayBuffer(r.byteLength+1),e)return t;const i=new Uint8Array(r);n=new Uint8Array(t),n[0]=r.byteLength|128;for(let a=0;a<r.byteLength;a++)n[a+1]=i[a];return t}return t=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(t),n[0]=this.length),t}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}MA.NAME="lengthBlock";const me={};class as extends po{constructor({name:e=fs,optional:t=!1,primitiveSchema:n,...r}={},i){super(r),this.name=e,this.optional=t,n&&(this.primitiveSchema=n),this.idBlock=new UA(r),this.lenBlock=new MA(r),this.valueBlock=i?new i(r):new ps(r)}fromBER(e,t,n){const r=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}toBER(e,t){const n=t||new iy;t||HA(this);const r=this.idBlock.toBER(e);if(n.write(r),this.lenBlock.isIndefiniteForm)n.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,n),n.write(new ArrayBuffer(2));else{const i=this.valueBlock.toBER(e);this.lenBlock.length=i.byteLength;const a=this.lenBlock.toBER(e);n.write(a),n.write(i)}return t?on:n.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return e==="ascii"?this.onAsciiEncoding():Ae.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${Ae.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;const t=this.toBER(),n=e.toBER();return Nc(t,n)}}as.NAME="BaseBlock";function HA(s){if(s instanceof me.Constructed)for(const e of s.valueBlock.value)HA(e)&&(s.lenBlock.isIndefiniteForm=!0);return!!s.lenBlock.isIndefiniteForm}class $A extends as{constructor({value:e=fs,...t}={},n){super(t,n),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,t,n){const r=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}$A.NAME="BaseStringBlock";class FA extends hr(ps){constructor({isHexOnly:e=!0,...t}={}){super(t),this.isHexOnly=e}}FA.NAME="PrimitiveValueBlock";var jA;class ke extends as{constructor(e={}){super(e,FA),this.idBlock.isConstructed=!1}}jA=ke;me.Primitive=jA;ke.NAME="PRIMITIVE";function IR(s,e){if(s instanceof e)return s;const t=new e;return t.idBlock=s.idBlock,t.lenBlock=s.lenBlock,t.warnings=s.warnings,t.valueBeforeDecodeView=s.valueBeforeDecodeView,t}function Of(s,e=0,t=s.length){const n=e;let r=new as({},ps);const i=new po;if(!ur(i,s,e,t))return r.error=i.error,{offset:-1,result:r};if(!s.subarray(e,e+t).length)return r.error="Zero buffer length",{offset:-1,result:r};let o=r.idBlock.fromBER(s,e,t);if(r.idBlock.warnings.length&&r.warnings.concat(r.idBlock.warnings),o===-1)return r.error=r.idBlock.error,{offset:-1,result:r};if(e=o,t-=r.idBlock.blockLength,o=r.lenBlock.fromBER(s,e,t),r.lenBlock.warnings.length&&r.warnings.concat(r.lenBlock.warnings),o===-1)return r.error=r.lenBlock.error,{offset:-1,result:r};if(e=o,t-=r.lenBlock.blockLength,!r.idBlock.isConstructed&&r.lenBlock.isIndefiniteForm)return r.error="Indefinite length form used for primitive encoding form",{offset:-1,result:r};let l=as;switch(r.idBlock.tagClass){case 1:if(r.idBlock.tagNumber>=37&&r.idBlock.isHexOnly===!1)return r.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:r};switch(r.idBlock.tagNumber){case 0:if(r.idBlock.isConstructed&&r.lenBlock.length>0)return r.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:r};l=me.EndOfContent;break;case 1:l=me.Boolean;break;case 2:l=me.Integer;break;case 3:l=me.BitString;break;case 4:l=me.OctetString;break;case 5:l=me.Null;break;case 6:l=me.ObjectIdentifier;break;case 10:l=me.Enumerated;break;case 12:l=me.Utf8String;break;case 13:l=me.RelativeObjectIdentifier;break;case 14:l=me.TIME;break;case 15:return r.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:r};case 16:l=me.Sequence;break;case 17:l=me.Set;break;case 18:l=me.NumericString;break;case 19:l=me.PrintableString;break;case 20:l=me.TeletexString;break;case 21:l=me.VideotexString;break;case 22:l=me.IA5String;break;case 23:l=me.UTCTime;break;case 24:l=me.GeneralizedTime;break;case 25:l=me.GraphicString;break;case 26:l=me.VisibleString;break;case 27:l=me.GeneralString;break;case 28:l=me.UniversalString;break;case 29:l=me.CharacterString;break;case 30:l=me.BmpString;break;case 31:l=me.DATE;break;case 32:l=me.TimeOfDay;break;case 33:l=me.DateTime;break;case 34:l=me.Duration;break;default:{const c=r.idBlock.isConstructed?new me.Constructed:new me.Primitive;c.idBlock=r.idBlock,c.lenBlock=r.lenBlock,c.warnings=r.warnings,r=c}}break;case 2:case 3:case 4:default:l=r.idBlock.isConstructed?me.Constructed:me.Primitive}return r=IR(r,l),o=r.fromBER(s,e,r.lenBlock.isIndefiniteForm?t:r.lenBlock.length),r.valueBeforeDecodeView=s.subarray(n,n+r.blockLength),{offset:o,result:r}}function At(s){if(!s.byteLength){const e=new as({},ps);return e.error="Input buffer has zero length",{offset:-1,result:e}}return Of(be.toUint8Array(s).slice(),0,s.byteLength)}function _R(s,e){return s?1:e}class yi extends ps{constructor({value:e=[],isIndefiniteForm:t=!1,...n}={}){super(n),this.value=e,this.isIndefiniteForm=t}fromBER(e,t,n){const r=be.toUint8Array(e);if(!ur(this,r,t,n))return-1;if(this.valueBeforeDecodeView=r.subarray(t,t+n),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),t;let i=t;for(;_R(this.isIndefiniteForm,n)>0;){const a=Of(r,i,n);if(a.offset===-1)return this.error=a.result.error,this.warnings.concat(a.result.warnings),-1;if(i=a.offset,this.blockLength+=a.result.blockLength,n-=a.result.blockLength,this.value.push(a.result),this.isIndefiniteForm&&a.result.constructor.NAME===gf)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===gf?this.value.pop():this.warnings.push("No EndOfContent block encoded")),i}toBER(e,t){const n=t||new iy;for(let r=0;r<this.value.length;r++)this.value[r].toBER(e,n);return t?on:n.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const t of this.value)e.value.push(t.toJSON());return e}}yi.NAME="ConstructedValueBlock";var KA;class P extends as{constructor(e={}){super(e,yi),this.idBlock.isConstructed=!0}fromBER(e,t,n){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const r=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){const e=[];for(const n of this.valueBlock.value)e.push(n.toString("ascii").split(`
`).map(r=>`  ${r}`).join(`
`));const t=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${t} :
${e.join(`
`)}`:`${t} :`}}KA=P;me.Constructed=KA;P.NAME="CONSTRUCTED";class JA extends ps{fromBER(e,t,n){return t}toBER(e){return on}}JA.override="EndOfContentValueBlock";var WA;class qA extends as{constructor(e={}){super(e,JA),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}WA=qA;me.EndOfContent=WA;qA.NAME=gf;var GA;class pt extends as{constructor(e={}){super(e,ps),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,t,n){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=n,t+n>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+n}toBER(e,t){const n=new ArrayBuffer(2);if(!e){const r=new Uint8Array(n);r[0]=5,r[1]=0}return t&&t.write(n),n}onAsciiEncoding(){return`${this.constructor.NAME}`}}GA=pt;me.Null=GA;pt.NAME="NULL";class YA extends hr(ps){constructor({value:e,...t}={}){super(t),t.valueHex?this.valueHexView=be.toUint8Array(t.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,t,n){const r=be.toUint8Array(e);return ur(this,r,t,n)?(this.valueHexView=r.subarray(t,t+n),n>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,OA.call(this),this.blockLength=n,t+n):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}YA.NAME="BooleanValueBlock";var XA;let Cn=class extends as{constructor(e={}){super(e,YA),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};XA=Cn;me.Boolean=XA;Cn.NAME="BOOLEAN";class QA extends hr(yi){constructor({isConstructed:e=!1,...t}={}){super(t),this.isConstructed=e}fromBER(e,t,n){let r=0;if(this.isConstructed){if(this.isHexOnly=!1,r=yi.prototype.fromBER.call(this,e,t,n),r===-1)return r;for(let i=0;i<this.value.length;i++){const a=this.value[i].constructor.NAME;if(a===gf){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(a!==LA)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,r=super.fromBER(e,t,n),this.blockLength=n;return r}toBER(e,t){return this.isConstructed?yi.prototype.toBER.call(this,e,t):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}QA.NAME="OctetStringValueBlock";var zA;class Q extends as{constructor({idBlock:e={},lenBlock:t={},...n}={}){var r,i;(r=n.isConstructed)!==null&&r!==void 0||(n.isConstructed=!!(!((i=n.value)===null||i===void 0)&&i.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!n.isIndefiniteForm},...n},QA),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,t,n){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,n===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),t;if(!this.valueBlock.isConstructed){const i=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(t,t+n);try{if(i.byteLength){const a=Of(i,0,i.byteLength);a.offset!==-1&&a.offset===n&&(this.valueBlock.value=[a.result])}}catch{}}return super.fromBER(e,t,n)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?P.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${Ae.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const e=[];for(const t of this.valueBlock.value)t instanceof Q&&e.push(t.valueBlock.valueHexView);return be.concat(e)}}zA=Q;me.OctetString=zA;Q.NAME=LA;class ZA extends hr(yi){constructor({unusedBits:e=0,isConstructed:t=!1,...n}={}){super(n),this.unusedBits=e,this.isConstructed=t,this.blockLength=this.valueHexView.byteLength}fromBER(e,t,n){if(!n)return t;let r=-1;if(this.isConstructed){if(r=yi.prototype.fromBER.call(this,e,t,n),r===-1)return r;for(const o of this.value){const l=o.constructor.NAME;if(l===gf){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(l!==DA)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const c=o.valueBlock;if(this.unusedBits>0&&c.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=c.unusedBits}return r}const i=be.toUint8Array(e);if(!ur(this,i,t,n))return-1;const a=i.subarray(t,t+n);if(this.unusedBits=a[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const o=a.subarray(1);try{if(o.byteLength){const l=Of(o,0,o.byteLength);l.offset!==-1&&l.offset===n-1&&(this.value=[l.result])}}catch{}}return this.valueHexView=a.subarray(1),this.blockLength=a.length,t+n}toBER(e,t){if(this.isConstructed)return yi.prototype.toBER.call(this,e,t);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return on;const n=new Uint8Array(this.valueHexView.length+1);return n[0]=this.unusedBits,n.set(this.valueHexView,1),n.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}ZA.NAME="BitStringValueBlock";var ek;class Pe extends as{constructor({idBlock:e={},lenBlock:t={},...n}={}){var r,i;(r=n.isConstructed)!==null&&r!==void 0||(n.isConstructed=!!(!((i=n.value)===null||i===void 0)&&i.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!n.isIndefiniteForm},...n},ZA),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,t,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,t,n)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return P.prototype.onAsciiEncoding.call(this);{const e=[],t=this.valueBlock.valueHexView;for(const r of t)e.push(r.toString(2).padStart(8,"0"));const n=e.join("");return`${this.constructor.NAME} : ${n.substring(0,n.length-this.valueBlock.unusedBits)}`}}}ek=Pe;me.BitString=ek;Pe.NAME=DA;var tk;function BR(s,e){const t=new Uint8Array([0]),n=new Uint8Array(s),r=new Uint8Array(e);let i=n.slice(0);const a=i.length-1,o=r.slice(0),l=o.length-1;let c=0;const u=l<a?a:l;let f=0;for(let h=u;h>=0;h--,f++){switch(!0){case f<o.length:c=i[a-f]+o[l-f]+t[0];break;default:c=i[a-f]+t[0]}switch(t[0]=c/10,!0){case f>=i.length:i=Up(new Uint8Array([c%10]),i);break;default:i[a-f]=c%10}}return t[0]>0&&(i=Up(t,i)),i}function Cb(s){if(s>=Uc.length)for(let e=Uc.length;e<=s;e++){const t=new Uint8Array([0]);let n=Uc[e-1].slice(0);for(let r=n.length-1;r>=0;r--){const i=new Uint8Array([(n[r]<<1)+t[0]]);t[0]=i[0]/10,n[r]=i[0]%10}t[0]>0&&(n=Up(t,n)),Uc.push(n)}return Uc[s]}function xR(s,e){let t=0;const n=new Uint8Array(s),r=new Uint8Array(e),i=n.slice(0),a=i.length-1,o=r.slice(0),l=o.length-1;let c,u=0;for(let f=l;f>=0;f--,u++)switch(c=i[a-u]-o[l-u]-t,!0){case c<0:t=1,i[a-u]=c+10;break;default:t=0,i[a-u]=c}if(t>0)for(let f=a-l+1;f>=0;f--,u++)if(c=i[a-u]-t,c<0)t=1,i[a-u]=c+10;else{t=0,i[a-u]=c;break}return i.slice()}class ay extends hr(ps){constructor({value:e,...t}={}){super(t),this._valueDec=0,t.valueHex&&this.setValueHex(),e!==void 0&&(this.valueDec=e)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=OA.call(this)))}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(pR(e))}get valueDec(){return this._valueDec}fromDER(e,t,n,r=0){const i=this.fromBER(e,t,n);if(i===-1)return i;const a=this.valueHexView;return a[0]===0&&a[1]&128?this.valueHexView=a.subarray(1):r!==0&&a.length<r&&(r-a.length>1&&(r=a.length+1),this.valueHexView=a.subarray(r-a.length)),i}toDER(e=!1){const t=this.valueHexView;switch(!0){case(t[0]&128)!==0:{const n=new Uint8Array(this.valueHexView.length+1);n[0]=0,n.set(t,1),this.valueHexView=n}break;case(t[0]===0&&(t[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(e)}fromBER(e,t,n){const r=super.fromBER(e,t,n);return r===-1||this.setValueHex(),r}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=this.valueHexView.length*8-1;let t=new Uint8Array(this.valueHexView.length*8/3),n=0,r;const i=this.valueHexView;let a="",o=!1;for(let l=i.byteLength-1;l>=0;l--){r=i[l];for(let c=0;c<8;c++){if((r&1)===1)switch(n){case e:t=xR(Cb(n),t),a="-";break;default:t=BR(t,Cb(n))}n++,r>>=1}}for(let l=0;l<t.length;l++)t[l]&&(o=!0),o&&(a+=kb.charAt(t[l]));return o===!1&&(a+=kb.charAt(0)),a}}tk=ay;ay.NAME="IntegerValueBlock";Object.defineProperty(tk.prototype,"valueHex",{set:function(s){this.valueHexView=new Uint8Array(s),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});var sk;class U extends as{constructor(e={}){super(e,ay),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return Im(),BigInt(this.valueBlock.toString())}static fromBigInt(e){Im();const t=BigInt(e),n=new iy,r=t.toString(16).replace(/^-/,""),i=new Uint8Array(Ae.FromHex(r));if(t<0){const o=new Uint8Array(i.length+(i[0]&128?1:0));o[0]|=128;const c=BigInt(`0x${Ae.ToHex(o)}`)+t,u=be.toUint8Array(Ae.FromHex(c.toString(16)));u[0]|=128,n.write(u)}else i[0]&128&&n.write(new Uint8Array([0])),n.write(i);return new U({valueHex:n.final()})}convertToDER(){const e=new U({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new U({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}sk=U;me.Integer=sk;U.NAME="INTEGER";var nk;class Ii extends U{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}nk=Ii;me.Enumerated=nk;Ii.NAME="ENUMERATED";class Hp extends hr(ps){constructor({valueDec:e=-1,isFirstSid:t=!1,...n}={}){super(n),this.valueDec=e,this.isFirstSid=t}fromBER(e,t,n){if(!n)return t;const r=be.toUint8Array(e);if(!ur(this,r,t,n))return-1;const i=r.subarray(t,t+n);this.valueHexView=new Uint8Array(n);for(let o=0;o<n&&(this.valueHexView[o]=i[o]&127,this.blockLength++,!!(i[o]&128));o++);const a=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength;o++)a[o]=this.valueHexView[o];return this.valueHexView=a,i[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=ho(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}set valueBigInt(e){Im();let t=BigInt(e).toString(2);for(;t.length%7;)t="0"+t;const n=new Uint8Array(t.length/7);for(let r=0;r<n.length;r++)n[r]=parseInt(t.slice(r*7,r*7+7),2)+(r+1<n.length?128:0);this.fromBER(n.buffer,0,n.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const r=this.valueHexView,i=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength-1;a++)i[a]=r[a]|128;return i[this.blockLength-1]=r[this.blockLength-1],i.buffer}const t=ar(this.valueDec,7);if(t.byteLength===0)return this.error="Error during encoding SID value",on;const n=new Uint8Array(t.byteLength);if(!e){const r=new Uint8Array(t),i=t.byteLength-1;for(let a=0;a<i;a++)n[a]=r[a]|128;n[i]=r[i]}return n}toString(){let e="";if(this.isHexOnly)e=Ae.ToHex(this.valueHexView);else if(this.isFirstSid){let t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}Hp.NAME="sidBlock";class rk extends ps{constructor({value:e=fs,...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,n){let r=t;for(;n>0;){const i=new Hp;if(r=i.fromBER(e,r,n),r===-1)return this.blockLength=0,this.error=i.error,r;this.value.length===0&&(i.isFirstSid=!0),this.blockLength+=i.blockLength,n-=i.blockLength,this.value.push(i)}return r}toBER(e){const t=[];for(let n=0;n<this.value.length;n++){const r=this.value[n].toBER(e);if(r.byteLength===0)return this.error=this.value[n].error,on;t.push(r)}return ry(t)}fromString(e){this.value=[];let t=0,n=0,r="",i=!1;do if(n=e.indexOf(".",t),n===-1?r=e.substring(t):r=e.substring(t,n),t=n+1,i){const a=this.value[0];let o=0;switch(a.valueDec){case 0:break;case 1:o=40;break;case 2:o=80;break;default:this.value=[];return}const l=parseInt(r,10);if(isNaN(l))return;a.valueDec=l+o,i=!1}else{const a=new Hp;if(r>Number.MAX_SAFE_INTEGER){Im();const o=BigInt(r);a.valueBigInt=o}else if(a.valueDec=parseInt(r,10),isNaN(a.valueDec))return;this.value.length||(a.isFirstSid=!0,i=!0),this.value.push(a)}while(n!==-1)}toString(){let e="",t=!1;for(let n=0;n<this.value.length;n++){t=this.value[n].isHexOnly;let r=this.value[n].toString();n!==0&&(e=`${e}.`),t?(r=`{${r}}`,this.value[n].isFirstSid?e=`2.{${r} - 80}`:e+=r):e+=r}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}rk.NAME="ObjectIdentifierValueBlock";var ik;class he extends as{constructor(e={}){super(e,rk),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}ik=he;me.ObjectIdentifier=ik;he.NAME="OBJECT IDENTIFIER";class $p extends hr(po){constructor({valueDec:e=0,...t}={}){super(t),this.valueDec=e}fromBER(e,t,n){if(n===0)return t;const r=be.toUint8Array(e);if(!ur(this,r,t,n))return-1;const i=r.subarray(t,t+n);this.valueHexView=new Uint8Array(n);for(let o=0;o<n&&(this.valueHexView[o]=i[o]&127,this.blockLength++,!!(i[o]&128));o++);const a=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength;o++)a[o]=this.valueHexView[o];return this.valueHexView=a,i[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=ho(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const r=this.valueHexView,i=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength-1;a++)i[a]=r[a]|128;return i[this.blockLength-1]=r[this.blockLength-1],i.buffer}const t=ar(this.valueDec,7);if(t.byteLength===0)return this.error="Error during encoding SID value",on;const n=new Uint8Array(t.byteLength);if(!e){const r=new Uint8Array(t),i=t.byteLength-1;for(let a=0;a<i;a++)n[a]=r[a]|128;n[i]=r[i]}return n.buffer}toString(){let e="";return this.isHexOnly?e=Ae.ToHex(this.valueHexView):e=this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}$p.NAME="relativeSidBlock";class ak extends ps{constructor({value:e=fs,...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,n){let r=t;for(;n>0;){const i=new $p;if(r=i.fromBER(e,r,n),r===-1)return this.blockLength=0,this.error=i.error,r;this.blockLength+=i.blockLength,n-=i.blockLength,this.value.push(i)}return r}toBER(e,t){const n=[];for(let r=0;r<this.value.length;r++){const i=this.value[r].toBER(e);if(i.byteLength===0)return this.error=this.value[r].error,on;n.push(i)}return ry(n)}fromString(e){this.value=[];let t=0,n=0,r="";do{n=e.indexOf(".",t),n===-1?r=e.substring(t):r=e.substring(t,n),t=n+1;const i=new $p;if(i.valueDec=parseInt(r,10),isNaN(i.valueDec))return!0;this.value.push(i)}while(n!==-1);return!0}toString(){let e="",t=!1;for(let n=0;n<this.value.length;n++){t=this.value[n].isHexOnly;let r=this.value[n].toString();n!==0&&(e=`${e}.`),t&&(r=`{${r}}`),e+=r}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}ak.NAME="RelativeObjectIdentifierValueBlock";var ok;class lk extends as{constructor(e={}){super(e,ak),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}ok=lk;me.RelativeObjectIdentifier=ok;lk.NAME="RelativeObjectIdentifier";var ck;class C extends P{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}ck=C;me.Sequence=ck;C.NAME="SEQUENCE";var uk;let bt=class extends P{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};uk=bt;me.Set=uk;bt.NAME="SET";class hk extends hr(ps){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=fs}toJSON(){return{...super.toJSON(),value:this.value}}}hk.NAME="StringValueBlock";class fk extends hk{}fk.NAME="SimpleStringValueBlock";class xs extends $A{constructor({...e}={}){super(e,fk)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,be.toUint8Array(e))}fromString(e){const t=e.length,n=this.valueBlock.valueHexView=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e.charCodeAt(r);this.valueBlock.value=e}}xs.NAME="SIMPLE STRING";class dk extends xs{fromBuffer(e){this.valueBlock.valueHexView=be.toUint8Array(e);try{this.valueBlock.value=Ae.ToUtf8String(e)}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`),this.valueBlock.value=Ae.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(Ae.FromUtf8String(e)),this.valueBlock.value=e}}dk.NAME="Utf8StringValueBlock";var mk;class mt extends dk{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}mk=mt;me.Utf8String=mk;mt.NAME="UTF8String";class gk extends xs{fromBuffer(e){this.valueBlock.value=Ae.ToUtf16String(e),this.valueBlock.valueHexView=be.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(Ae.FromUtf16String(e))}}gk.NAME="BmpStringValueBlock";var pk;class pf extends gk{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}pk=pf;me.BmpString=pk;pf.NAME="BMPString";class wk extends xs{fromBuffer(e){const t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),n=new Uint8Array(t);for(let r=0;r<n.length;r+=4)n[r]=n[r+3],n[r+1]=n[r+2],n[r+2]=0,n[r+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){const t=e.length,n=this.valueBlock.valueHexView=new Uint8Array(t*4);for(let r=0;r<t;r++){const i=ar(e.charCodeAt(r),8),a=new Uint8Array(i);if(a.length>4)continue;const o=4-a.length;for(let l=a.length-1;l>=0;l--)n[r*4+l+o]=a[l]}this.valueBlock.value=e}}wk.NAME="UniversalStringValueBlock";var yk;class wf extends wk{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}yk=wf;me.UniversalString=yk;wf.NAME="UniversalString";var vk;class uc extends xs{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}vk=uc;me.NumericString=vk;uc.NAME="NumericString";var bk;class Zs extends xs{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}bk=Zs;me.PrintableString=bk;Zs.NAME="PrintableString";var Sk;class yf extends xs{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}Sk=yf;me.TeletexString=Sk;yf.NAME="TeletexString";var Ak;class oy extends xs{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}Ak=oy;me.VideotexString=Ak;oy.NAME="VideotexString";var kk;class lg extends xs{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}kk=lg;me.IA5String=kk;lg.NAME="IA5String";var Ek;class ly extends xs{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}Ek=ly;me.GraphicString=Ek;ly.NAME="GraphicString";var Ck;class cg extends xs{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}Ck=cg;me.VisibleString=Ck;cg.NAME="VisibleString";var Nk;class cy extends xs{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}Nk=cy;me.GeneralString=Nk;cy.NAME="GeneralString";var Ik;class uy extends xs{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}Ik=uy;me.CharacterString=Ik;uy.NAME="CharacterString";var _k;class _c extends cg{constructor({value:e,valueDate:t,...n}={}){if(super(n),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let r=0;r<e.length;r++)this.valueBlock.valueHexView[r]=e.charCodeAt(r)}t&&(this.fromDate(t),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,be.toUint8Array(e)))}toBuffer(){const e=this.toString(),t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return t}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const n=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(n===null){this.error="Wrong input string for conversion";return}const r=parseInt(n[1],10);r>=50?this.year=1900+r:this.year=2e3+r,this.month=parseInt(n[2],10),this.day=parseInt(n[3],10),this.hour=parseInt(n[4],10),this.minute=parseInt(n[5],10),this.second=parseInt(n[6],10)}toString(e="iso"){if(e==="iso"){const t=new Array(7);return t[0]=Es(this.year<2e3?this.year-1900:this.year-2e3,2),t[1]=Es(this.month,2),t[2]=Es(this.day,2),t[3]=Es(this.hour,2),t[4]=Es(this.minute,2),t[5]=Es(this.second,2),t[6]="Z",t.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}_k=_c;me.UTCTime=_k;_c.NAME="UTCTime";var Bk;class ot extends _c{constructor(e={}){var t;super(e),(t=this.millisecond)!==null&&t!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let t=!1,n="",r="",i=0,a,o=0,l=0;if(e[e.length-1]==="Z")n=e.substring(0,e.length-1),t=!0;else{const f=new Number(e[e.length-1]);if(isNaN(f.valueOf()))throw new Error("Wrong input string for conversion");n=e}if(t){if(n.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(n.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let f=1,h=n.indexOf("+"),m="";if(h===-1&&(h=n.indexOf("-"),f=-1),h!==-1){if(m=n.substring(h+1),n=n.substring(0,h),m.length!==2&&m.length!==4)throw new Error("Wrong input string for conversion");let S=parseInt(m.substring(0,2),10);if(isNaN(S.valueOf()))throw new Error("Wrong input string for conversion");if(o=f*S,m.length===4){if(S=parseInt(m.substring(2,4),10),isNaN(S.valueOf()))throw new Error("Wrong input string for conversion");l=f*S}}}let c=n.indexOf(".");if(c===-1&&(c=n.indexOf(",")),c!==-1){const f=new Number(`0${n.substring(c)}`);if(isNaN(f.valueOf()))throw new Error("Wrong input string for conversion");i=f.valueOf(),r=n.substring(0,c)}else r=n;switch(!0){case r.length===8:if(a=/(\d{4})(\d{2})(\d{2})/ig,c!==-1)throw new Error("Wrong input string for conversion");break;case r.length===10:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,c!==-1){let f=60*i;this.minute=Math.floor(f),f=60*(f-this.minute),this.second=Math.floor(f),f=1e3*(f-this.second),this.millisecond=Math.floor(f)}break;case r.length===12:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,c!==-1){let f=60*i;this.second=Math.floor(f),f=1e3*(f-this.second),this.millisecond=Math.floor(f)}break;case r.length===14:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,c!==-1){const f=1e3*i;this.millisecond=Math.floor(f)}break;default:throw new Error("Wrong input string for conversion")}const u=a.exec(r);if(u===null)throw new Error("Wrong input string for conversion");for(let f=1;f<u.length;f++)switch(f){case 1:this.year=parseInt(u[f],10);break;case 2:this.month=parseInt(u[f],10);break;case 3:this.day=parseInt(u[f],10);break;case 4:this.hour=parseInt(u[f],10)+o;break;case 5:this.minute=parseInt(u[f],10)+l;break;case 6:this.second=parseInt(u[f],10);break;default:throw new Error("Wrong input string for conversion")}if(t===!1){const f=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=f.getUTCFullYear(),this.month=f.getUTCMonth(),this.day=f.getUTCDay(),this.hour=f.getUTCHours(),this.minute=f.getUTCMinutes(),this.second=f.getUTCSeconds(),this.millisecond=f.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){const t=[];return t.push(Es(this.year,4)),t.push(Es(this.month,2)),t.push(Es(this.day,2)),t.push(Es(this.hour,2)),t.push(Es(this.minute,2)),t.push(Es(this.second,2)),this.millisecond!==0&&(t.push("."),t.push(Es(this.millisecond,3))),t.push("Z"),t.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}Bk=ot;me.GeneralizedTime=Bk;ot.NAME="GeneralizedTime";var xk;let Tk=class extends mt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}};xk=Tk;me.DATE=xk;Tk.NAME="DATE";var Rk;class Ok extends mt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}Rk=Ok;me.TimeOfDay=Rk;Ok.NAME="TimeOfDay";var Vk;class Pk extends mt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}Vk=Pk;me.DateTime=Vk;Pk.NAME="DateTime";var Lk;class Dk extends mt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}Lk=Dk;me.Duration=Lk;Dk.NAME="Duration";var Uk;class Mk extends mt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}Uk=Mk;me.TIME=Uk;Mk.NAME="TIME";class Ce{constructor({name:e=fs,optional:t=!1}={}){this.name=e,this.optional=t}}class lt extends Ce{constructor({value:e=[],...t}={}){super(t),this.value=e}}class _e extends Ce{constructor({value:e=new Ce,local:t=!1,...n}={}){super(n),this.value=e,this.local=t}}class _m{constructor({data:e=og}={}){this.dataView=be.toUint8Array(e)}get data(){return this.dataView.slice().buffer}set data(e){this.dataView=be.toUint8Array(e)}fromBER(e,t,n){const r=t+n;return this.dataView=be.toUint8Array(e).subarray(t,r),r}toBER(e){return this.dataView.slice().buffer}}function q(s,e,t){if(t instanceof lt){for(let i=0;i<t.value.length;i++)if(q(s,e,t.value[i]).verified)return{verified:!0,result:s};{const i={verified:!1,result:{error:"Wrong values for Choice type"}};return t.hasOwnProperty(Ig)&&(i.name=t.name),i}}if(t instanceof Ce)return t.hasOwnProperty(Ig)&&(s[t.name]=e),{verified:!0,result:s};if(!(s instanceof Object))return{verified:!1,result:{error:"Wrong root object"}};if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(!(t instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(bR in t))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(ER in t.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(CR in t.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const n=t.idBlock.toBER(!1);if(n.byteLength===0)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(t.idBlock.fromBER(n,0,n.byteLength)===-1)return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(t.idBlock.hasOwnProperty(SR)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(t.idBlock.tagClass!==e.idBlock.tagClass)return{verified:!1,result:s};if(t.idBlock.hasOwnProperty(AR)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(t.idBlock.tagNumber!==e.idBlock.tagNumber)return{verified:!1,result:s};if(t.idBlock.hasOwnProperty(kR)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(t.idBlock.isConstructed!==e.idBlock.isConstructed)return{verified:!1,result:s};if(!(vR in t.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(t.idBlock.isHexOnly!==e.idBlock.isHexOnly)return{verified:!1,result:s};if(t.idBlock.isHexOnly){if(!(Eb in t.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const i=t.idBlock.valueHexView,a=e.idBlock.valueHexView;if(i.length!==a.length)return{verified:!1,result:s};for(let o=0;o<i.length;o++)if(i[o]!==a[1])return{verified:!1,result:s}}if(t.name&&(t.name=t.name.replace(/^\s+|\s+$/g,fs),t.name&&(s[t.name]=e)),t instanceof me.Constructed){let i=0,a={verified:!1,result:{error:"Unknown error"}},o=t.valueBlock.value.length;if(o>0&&t.valueBlock.value[0]instanceof _e&&(o=e.valueBlock.value.length),o===0)return{verified:!0,result:s};if(e.valueBlock.value.length===0&&t.valueBlock.value.length!==0){let l=!0;for(let c=0;c<t.valueBlock.value.length;c++)l=l&&(t.valueBlock.value[c].optional||!1);return l?{verified:!0,result:s}:(t.name&&(t.name=t.name.replace(/^\s+|\s+$/g,fs),t.name&&delete s[t.name]),s.error="Inconsistent object length",{verified:!1,result:s})}for(let l=0;l<o;l++)if(l-i>=e.valueBlock.value.length){if(t.valueBlock.value[l].optional===!1){const c={verified:!1,result:s};return s.error="Inconsistent length between ASN.1 data and schema",t.name&&(t.name=t.name.replace(/^\s+|\s+$/g,fs),t.name&&(delete s[t.name],c.name=t.name)),c}}else if(t.valueBlock.value[0]instanceof _e){if(a=q(s,e.valueBlock.value[l],t.valueBlock.value[0].value),a.verified===!1)if(t.valueBlock.value[0].optional)i++;else return t.name&&(t.name=t.name.replace(/^\s+|\s+$/g,fs),t.name&&delete s[t.name]),a;if(Ig in t.valueBlock.value[0]&&t.valueBlock.value[0].name.length>0){let c={};NR in t.valueBlock.value[0]&&t.valueBlock.value[0].local?c=e:c=s,typeof c[t.valueBlock.value[0].name]>"u"&&(c[t.valueBlock.value[0].name]=[]),c[t.valueBlock.value[0].name].push(e.valueBlock.value[l])}}else if(a=q(s,e.valueBlock.value[l-i],t.valueBlock.value[l]),a.verified===!1)if(t.valueBlock.value[l].optional)i++;else return t.name&&(t.name=t.name.replace(/^\s+|\s+$/g,fs),t.name&&delete s[t.name]),a;if(a.verified===!1){const l={verified:!1,result:s};return t.name&&(t.name=t.name.replace(/^\s+|\s+$/g,fs),t.name&&(delete s[t.name],l.name=t.name)),l}return{verified:!0,result:s}}if(t.primitiveSchema&&Eb in e.valueBlock){const i=Of(e.valueBlock.valueHexView);if(i.offset===-1){const a={verified:!1,result:i.result};return t.name&&(t.name=t.name.replace(/^\s+|\s+$/g,fs),t.name&&(delete s[t.name],a.name=t.name)),a}return q(s,i.result,t.primitiveSchema)}return{verified:!0,result:s}}class ft{constructor(e={}){if("view"in e)this.fromUint8Array(e.view);else if("buffer"in e)this.fromArrayBuffer(e.buffer);else if("string"in e)this.fromString(e.string);else if("hexstring"in e)this.fromHexString(e.hexstring);else if("length"in e&&e.length>0){if(this.length=e.length,e.stub)for(let t=0;t<this._view.length;t++)this._view[t]=e.stub}else this.length=0}set buffer(e){this._buffer=e,this._view=new Uint8Array(this._buffer)}get buffer(){return this._buffer}set view(e){this._buffer=new ArrayBuffer(e.length),this._view=new Uint8Array(this._buffer),this._view.set(e)}get view(){return this._view}get length(){return this.view.byteLength}set length(e){this._buffer=new ArrayBuffer(e),this._view=new Uint8Array(this._buffer)}clear(){this._buffer=new ArrayBuffer(0),this._view=new Uint8Array(this._buffer)}fromArrayBuffer(e){this._buffer=e,this._view=new Uint8Array(this._buffer)}fromUint8Array(e){this.fromArrayBuffer(new Uint8Array(e).buffer)}fromString(e){const t=e.length;this.length=t;for(let n=0;n<t;n++)this.view[n]=e.charCodeAt(n)}toString(e=0,t=this.view.length-e){let n="";(e>=this.view.length||e<0)&&(e=0),(t>=this.view.length||t<0)&&(t=this.view.length-e);for(let r=e;r<e+t;r++)n+=String.fromCharCode(this.view[r]);return n}fromHexString(e){const t=e.length;this.buffer=new ArrayBuffer(t>>1),this.view=new Uint8Array(this.buffer);const n=new Map;n.set("0",0),n.set("1",1),n.set("2",2),n.set("3",3),n.set("4",4),n.set("5",5),n.set("6",6),n.set("7",7),n.set("8",8),n.set("9",9),n.set("A",10),n.set("a",10),n.set("B",11),n.set("b",11),n.set("C",12),n.set("c",12),n.set("D",13),n.set("d",13),n.set("E",14),n.set("e",14),n.set("F",15),n.set("f",15);let r=0,i=0;for(let a=0;a<t;a++)a%2?(i|=n.get(e.charAt(a)),this.view[r]=i,r++):i=n.get(e.charAt(a))<<4}toHexString(e=0,t=this.view.length-e){let n="";(e>=this.view.length||e<0)&&(e=0),(t>=this.view.length||t<0)&&(t=this.view.length-e);for(let r=e;r<e+t;r++){const i=this.view[r].toString(16).toUpperCase();n=n+(i.length==1?"0":"")+i}return n}copy(e=0,t=this.length-e){if(!e&&!this.length)return new ft;if(e<0||e>this.length-1)throw new Error(`Wrong start position: ${e}`);return new ft({buffer:this._buffer.slice(e,e+t)})}slice(e=0,t=this.length){if(!e&&!this.length)return new ft;if(e<0||e>this.length-1)throw new Error(`Wrong start position: ${e}`);return new ft({buffer:this._buffer.slice(e,t)})}realloc(e){const t=new ArrayBuffer(e),n=new Uint8Array(t);e>this._view.length?n.set(this._view):n.set(new Uint8Array(this._buffer,0,e)),this._buffer=t,this._view=new Uint8Array(this._buffer)}append(e){const t=this.length,n=e.length,r=e._view.subarray();this.realloc(t+n),this._view.set(r,t)}insert(e,t=0,n=this.length-t){return t>this.length-1?!1:(n>this.length-t&&(n=this.length-t),n>e.length&&(n=e.length),n==e.length?this._view.set(e._view,t):this._view.set(e._view.subarray(0,n),t),!0)}isEqual(e){if(this.length!=e.length)return!1;for(let t=0;t<e.length;t++)if(this.view[t]!=e.view[t])return!1;return!0}isEqualView(e){if(e.length!=this.view.length)return!1;for(let t=0;t<e.length;t++)if(this.view[t]!=e[t])return!1;return!0}findPattern(e,t,n,r){const{start:i,length:a,backward:o}=this.prepareFindParameters(t,n,r),l=e.length;if(l>a)return-1;const c=[];for(let u=0;u<l;u++)c.push(e.view[u]);for(let u=0;u<=a-l;u++){let f=!0;const h=o?i-l-u:i+u;for(let m=0;m<l;m++)if(this.view[m+h]!=c[m]){f=!1;break}if(f)return o?i-l-u:i+l+u}return-1}findFirstIn(e,t,n,r){const{start:i,length:a,backward:o}=this.prepareFindParameters(t,n,r),l={id:-1,position:o?0:i+a,length:0};for(let c=0;c<e.length;c++){const u=this.findPattern(e[c],i,a,o);if(u!=-1){let f=!1;const h=e[c].length;o?u-h>=l.position-l.length&&(f=!0):u-h<=l.position-l.length&&(f=!0),f&&(l.position=u,l.id=c,l.length=h)}}return l}findAllIn(e,t,n){let{start:r,length:i}=this.prepareFindParameters(t,n);const a=[];let o={id:-1,position:r};do{const l=o.position;if(o=this.findFirstIn(e,o.position,i),o.id==-1)break;i-=o.position-l,a.push({id:o.id,position:o.position})}while(!0);return a}findAllPatternIn(e,t,n){const{start:r,length:i}=this.prepareFindParameters(t,n),a=[],o=e.length;if(o>i)return-1;const l=Array.from(e.view);for(let c=0;c<=i-o;c++){let u=!0;const f=r+c;for(let h=0;h<o;h++)if(this.view[h+f]!=l[h]){u=!1;break}u&&(a.push(r+o+c),c+=o-1)}return a}findFirstNotIn(e,t,n,r){let{start:i,length:a,backward:o}=this.prepareFindParameters(t,n,r);const l={left:{id:-1,position:i},right:{id:-1,position:0},value:new ft};let c=a;for(;c>0;){if(l.right=this.findFirstIn(e,o?i-a+c:i+a-c,c,o),l.right.id==-1){a=c,o?i-=a:i=l.left.position,l.value=new ft({buffer:this._buffer.slice(i,i+a)});break}if(l.right.position!=(o?l.left.position-e[l.right.id].length:l.left.position+e[l.right.id].length)){o?(i=l.right.position+e[l.right.id].length,a=l.left.position-l.right.position-e[l.right.id].length):(i=l.left.position,a=l.right.position-l.left.position-e[l.right.id].length),l.value=new ft({buffer:this._buffer.slice(i,i+a)});break}l.left=l.right,c-=e[l.right.id].length}if(o){const u=l.right;l.right=l.left,l.left=u}return l}findAllNotIn(e,t,n){let{start:r,length:i}=this.prepareFindParameters(t,n);const a=[];let o={left:{id:-1,position:r},right:{id:-1,position:r},value:new ft};do{const l=o.right.position;o=this.findFirstNotIn(e,o.right.position,i),i-=o.right.position-l,a.push({left:{id:o.left.id,position:o.left.position},right:{id:o.right.id,position:o.right.position},value:o.value})}while(o.right.id!=-1);return a}findFirstSequence(e,t,n,r){let{start:i,length:a,backward:o}=this.prepareFindParameters(t,n,r);const l=this.skipNotPatterns(e,i,a,o);if(l==-1)return{position:-1,value:new ft};const c=this.skipPatterns(e,l,a-(o?i-l:l-i),o);o?(i=c,a=l-c):(i=l,a=c-l);const u=new ft({buffer:this._buffer.slice(i,i+a)});return{position:c,value:u}}findAllSequences(e,t,n){let{start:r,length:i}=this.prepareFindParameters(t,n);const a=[];let o={position:r,value:new ft};do{const l=o.position;o=this.findFirstSequence(e,o.position,i),o.position!=-1&&(i-=o.position-l,a.push({position:o.position,value:o.value}))}while(o.position!=-1);return a}findPairedPatterns(e,t,n,r){const i=[];if(e.isEqual(t))return i;const{start:a,length:o}=this.prepareFindParameters(n,r);let l=0;const c=this.findAllPatternIn(e,a,o);if(!Array.isArray(c)||c.length==0)return i;const u=this.findAllPatternIn(t,a,o);if(!Array.isArray(u)||u.length==0)return i;for(;l<c.length&&u.length!=0;){if(c[0]==u[0]){i.push({left:c[0],right:u[0]}),c.splice(0,1),u.splice(0,1);continue}if(c[l]>u[0])break;for(;c[l]<u[0]&&(l++,!(l>=c.length)););i.push({left:c[l-1],right:u[0]}),c.splice(l-1,1),u.splice(0,1),l=0}return i.sort((f,h)=>f.left-h.left),i}findPairedArrays(e,t,n,r){const{start:i,length:a}=this.prepareFindParameters(n,r),o=[];let l=0;const c=this.findAllIn(e,i,a);if(c.length==0)return o;const u=this.findAllIn(t,i,a);if(u.length==0)return o;for(;l<c.length&&u.length!=0;){if(c[0].position==u[0].position){o.push({left:c[0],right:u[0]}),c.splice(0,1),u.splice(0,1);continue}if(c[l].position>u[0].position)break;for(;c[l].position<u[0].position&&(l++,!(l>=c.length)););o.push({left:c[l-1],right:u[0]}),c.splice(l-1,1),u.splice(0,1),l=0}return o.sort((f,h)=>f.left.position-h.left.position),o}replacePattern(e,t,n,r,i=null){let a=[],o;const l={status:-1,searchPatternPositions:[],replacePatternPositions:[]},{start:c,length:u}=this.prepareFindParameters(n,r);if(i==null){if(a=this.findAllIn([e],c,u),a.length==0)return l}else a=i;l.searchPatternPositions.push(...Array.from(a,S=>S.position));const f=e.length-t.length,h=new ArrayBuffer(this.view.length-a.length*f),m=new Uint8Array(h);for(m.set(new Uint8Array(this.buffer,0,c)),o=0;o<a.length;o++){const S=o==0?c:a[o-1].position;m.set(new Uint8Array(this.buffer,S,a[o].position-e.length-S),S-o*f),m.set(t.view,a[o].position-e.length-o*f),l.replacePatternPositions.push(a[o].position-e.length-o*f)}return o--,m.set(new Uint8Array(this.buffer,a[o].position,this.length-a[o].position),a[o].position-e.length+t.length-o*f),this.buffer=h,this.view=new Uint8Array(this.buffer),l.status=1,l}skipPatterns(e,t,n,r){const{start:i,length:a,backward:o}=this.prepareFindParameters(t,n,r);let l=i;for(let c=0;c<e.length;c++){const u=e[c].length,f=o?l-u:l;let h=!0;for(let m=0;m<u;m++)if(this.view[m+f]!=e[c].view[m]){h=!1;break}if(h){if(c=-1,o){if(l-=u,l<=0)return l}else if(l+=u,l>=i+a)return l}}return l}skipNotPatterns(e,t,n,r){const{start:i,length:a,backward:o}=this.prepareFindParameters(t,n,r);let l=-1;for(let c=0;c<a;c++){for(let u=0;u<e.length;u++){const f=e[u].length,h=o?i-c-f:i+c;let m=!0;for(let S=0;S<f;S++)if(this.view[S+h]!=e[u].view[S]){m=!1;break}if(m){l=o?i-c:i+c;break}}if(l!=-1)break}return l}prepareFindParameters(e=null,t=null,n=!1){return e===null&&(e=n?this.length:0),e>this.length&&(e=this.length),n?(t===null&&(t=e),t>e&&(t=e)):(t===null&&(t=this.length-e),t>this.length-e&&(t=this.length-e)),{start:e,length:t,backward:n}}}const TR=16777216;class vi{constructor(e={}){this._stream=new ft,this._length=0,this._start=0,this.backward=!1,this.appendBlock=0,this.prevLength=0,this.prevStart=0,"view"in e?this.stream=new ft({view:e.view}):"buffer"in e?this.stream=new ft({buffer:e.buffer}):"string"in e?this.stream=new ft({string:e.string}):"hexstring"in e?this.stream=new ft({hexstring:e.hexstring}):"stream"in e?this.stream=e.stream.slice():this.stream=new ft,"backward"in e&&e.backward&&(this.backward=e.backward,this._start=this.stream.length),"length"in e&&e.length>0&&(this._length=e.length),"start"in e&&e.start&&e.start>0&&(this._start=e.start),"appendBlock"in e&&e.appendBlock&&e.appendBlock>0&&(this.appendBlock=e.appendBlock)}set stream(e){this._stream=e,this.prevLength=this._length,this._length=e.length,this.prevStart=this._start,this._start=0}get stream(){return this._stream}set length(e){this.prevLength=this._length,this._length=e}get length(){return this.appendBlock?this.start:this._length}set start(e){e>this.stream.length||(this.prevStart=this._start,this.prevLength=this._length,this._length-=this.backward?this._start-e:e-this._start,this._start=e)}get start(){return this._start}get buffer(){return this._stream.buffer.slice(0,this._length)}resetPosition(){this._start=this.prevStart,this._length=this.prevLength}findPattern(e,t=null){(t==null||t>this.length)&&(t=this.length);const n=this.stream.findPattern(e,this.start,this.length,this.backward);if(n==-1)return n;if(this.backward){if(n<this.start-e.length-t)return-1}else if(n>this.start+e.length+t)return-1;return this.start=n,n}findFirstIn(e,t=null){(t==null||t>this.length)&&(t=this.length);const n=this.stream.findFirstIn(e,this.start,this.length,this.backward);if(n.id==-1)return n;if(this.backward){if(n.position<this.start-e[n.id].length-t)return{id:-1,position:this.backward?0:this.start+this.length}}else if(n.position>this.start+e[n.id].length+t)return{id:-1,position:this.backward?0:this.start+this.length};return this.start=n.position,n}findAllIn(e){const t=this.backward?this.start-this.length:this.start;return this.stream.findAllIn(e,t,this.length)}findFirstNotIn(e,t=null){(t==null||t>this._length)&&(t=this._length);const n=this._stream.findFirstNotIn(e,this._start,this._length,this.backward);if(n.left.id==-1&&n.right.id==-1)return n;if(this.backward){if(n.right.id!=-1&&n.right.position<this._start-e[n.right.id].length-t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new ft}}else if(n.left.id!=-1&&n.left.position>this._start+e[n.left.id].length+t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new ft};return this.backward?n.left.id==-1?this.start=0:this.start=n.left.position:n.right.id==-1?this.start=this._start+this._length:this.start=n.right.position,n}findAllNotIn(e){const t=this.backward?this._start-this._length:this._start;return this._stream.findAllNotIn(e,t,this._length)}findFirstSequence(e,t=null,n=null){(t==null||t>this._length)&&(t=this._length),(n==null||n>t)&&(n=t);const r=this._stream.findFirstSequence(e,this._start,t,this.backward);if(r.value.length==0)return r;if(this.backward){if(r.position<this._start-r.value.length-n)return{position:-1,value:new ft}}else if(r.position>this._start+r.value.length+n)return{position:-1,value:new ft};return this.start=r.position,r}findAllSequences(e){const t=this.backward?this.start-this.length:this.start;return this.stream.findAllSequences(e,t,this.length)}findPairedPatterns(e,t,n=null){(n==null||n>this.length)&&(n=this.length);const r=this.backward?this.start-this.length:this.start,i=this.stream.findPairedPatterns(e,t,r,this.length);if(i.length){if(this.backward){if(i[0].right<this.start-t.length-n)return[]}else if(i[0].left>this.start+e.length+n)return[]}return i}findPairedArrays(e,t,n=null){(n==null||n>this.length)&&(n=this.length);const r=this.backward?this.start-this.length:this.start,i=this.stream.findPairedArrays(e,t,r,this.length);if(i.length){if(this.backward){if(i[0].right.position<this.start-t[i[0].right.id].length-n)return[]}else if(i[0].left.position>this.start+e[i[0].left.id].length+n)return[]}return i}replacePattern(e,t){const n=this.backward?this.start-this.length:this.start;return this.stream.replacePattern(e,t,n,this.length)}skipPatterns(e){const t=this.stream.skipPatterns(e,this.start,this.length,this.backward);return this.start=t,t}skipNotPatterns(e){const t=this.stream.skipNotPatterns(e,this.start,this.length,this.backward);return t==-1?-1:(this.start=t,t)}append(e){this.beforeAppend(e.length),this._stream.view.set(e.view,this._start),this._length+=e.length*2,this.start=this._start+e.length,this.prevLength-=e.length*2}appendView(e){this.beforeAppend(e.length),this._stream.view.set(e,this._start),this._length+=e.length*2,this.start=this._start+e.length,this.prevLength-=e.length*2}appendChar(e){this.beforeAppend(1),this._stream.view[this._start]=e,this._length+=2,this.start=this._start+1,this.prevLength-=2}appendUint16(e){this.beforeAppend(2);const t=new Uint16Array([e]),n=new Uint8Array(t.buffer);this.stream.view[this._start]=n[1],this._stream.view[this._start+1]=n[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendUint24(e){this.beforeAppend(3);const t=new Uint32Array([e]),n=new Uint8Array(t.buffer);this._stream.view[this._start]=n[2],this._stream.view[this._start+1]=n[1],this._stream.view[this._start+2]=n[0],this._length+=6,this.start=this._start+3,this.prevLength-=6}appendUint32(e){this.beforeAppend(4);const t=new Uint32Array([e]),n=new Uint8Array(t.buffer);this._stream.view[this._start]=n[3],this._stream.view[this._start+1]=n[2],this._stream.view[this._start+2]=n[1],this._stream.view[this._start+3]=n[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}appendInt16(e){this.beforeAppend(2);const t=new Int16Array([e]),n=new Uint8Array(t.buffer);this._stream.view[this._start]=n[1],this._stream.view[this._start+1]=n[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendInt32(e){this.beforeAppend(4);const t=new Int32Array([e]),n=new Uint8Array(t.buffer);this._stream.view[this._start]=n[3],this._stream.view[this._start+1]=n[2],this._stream.view[this._start+2]=n[1],this._stream.view[this._start+3]=n[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}getBlock(e,t=!0){if(this._length<=0)return new Uint8Array(0);this._length<e&&(e=this._length);let n;if(this.backward){const r=this._stream.view.subarray(this._length-e,this._length);n=new Uint8Array(e);for(let i=0;i<e;i++)n[e-1-i]=r[i]}else n=this._stream.view.subarray(this._start,this._start+e);return t&&(this.start+=this.backward?-1*e:e),n}getUint16(e=!0){const t=this.getBlock(2,e);return t.length<2?0:t[0]<<8|t[1]}getInt16(e=!0){const t=this.getUint16(e),n=32768;return t&n?-(n-(t^n)):t}getUint24(e=!0){const t=this.getBlock(4,e);return t.length<3?0:t[0]<<16|t[1]<<8|t[2]}getUint32(e=!0){const t=this.getBlock(4,e);return t.length<4?0:t[0]*TR+(t[1]<<16)+(t[2]<<8)+t[3]}getInt32(e=!0){const t=this.getUint32(e),n=2147483648;return t&n?-(n-(t^n)):t}beforeAppend(e){this._start+e>this._stream.length&&(e>this.appendBlock&&(this.appendBlock=e+vi.APPEND_BLOCK),this._stream.realloc(this._stream.length+this.appendBlock))}}vi.APPEND_BLOCK=1e3;/*!
 * Copyright (c) 2014, GlobalSign
 * Copyright (c) 2015-2019, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the {organization} nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */const _t=new ArrayBuffer(0),g="";class Ye extends TypeError{constructor(){super(...arguments),this.name=Ye.NAME}static isType(e,t){if(typeof t=="string"){if(t==="Array"&&Array.isArray(e))return!0;if(t==="ArrayBuffer"&&e instanceof ArrayBuffer)return!0;if(t==="ArrayBufferView"&&ArrayBuffer.isView(e))return!0;if(typeof e===t)return!0}else if(e instanceof t)return!0;return!1}static assert(e,t,...n){for(const i of n)if(this.isType(e,i))return;const r=n.map(i=>i instanceof Function&&"name"in i?i.name:`${i}`);throw new Ye(`Parameter '${t}' is not of type ${r.length>1?`(${r.join(" or ")})`:r[0]}`)}}Ye.NAME="ArgumentError";class Me extends TypeError{constructor(e,t=null,n){super(),this.name=Me.NAME,this.field=e,t&&(this.target=t),n?this.message=n:this.message=`Absent mandatory parameter '${e}' ${t?` in '${t}'`:g}`}static assert(...e){let t=null,n,r;typeof e[0]=="string"?(t=e[0],n=e[1],r=e.slice(2)):(n=e[0],r=e.slice(1)),Ye.assert(n,"parameters","object");for(const i of r){const a=n[i];if(a==null)throw new Me(i,t)}}static assertEmpty(e,t,n){if(e==null)throw new Me(t,n)}}Me.NAME="ParameterError";class W extends Error{static assertSchema(e,t){if(!e.verified)throw new Error(`Object's schema was not verified against input data for ${t}`)}static assert(e,t){if(e.offset===-1)throw new W(`Error during parsing of ASN.1 data. Data is not correct for '${t}'.`)}constructor(e){super(e),this.name="AsnError"}}class G{static blockName(){return this.CLASS_NAME}static fromBER(e){const t=At(e);W.assert(t,this.name);try{return new this({schema:t.result})}catch{throw new W(`Cannot create '${this.CLASS_NAME}' from ASN.1 object`)}}static defaultValues(e){throw new Error(`Invalid member name for ${this.CLASS_NAME} class: ${e}`)}static schema(e={}){throw new Error(`Method '${this.CLASS_NAME}.schema' should be overridden`)}get className(){return this.constructor.CLASS_NAME}toString(e="hex"){let t;try{t=this.toSchema()}catch{t=this.toSchema(!0)}return Ae.ToString(t.toBER(),e)}}G.CLASS_NAME="PkiObject";function ai(s){let e=!1,t=g;const n=s.trim();for(let r=0;r<n.length;r++)n.charCodeAt(r)===32?e===!1&&(e=!0):(e&&(t+=" ",e=!1),t+=n[r]);return t.toLowerCase()}const Mc="type",_g="value";class Tt extends G{constructor(e={}){super(),this.type=d(e,Mc,Tt.defaultValues(Mc)),this.value=d(e,_g,Tt.defaultValues(_g)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Mc:return g;case _g:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new he({name:t.type||g}),new Ce({name:t.value||g})]})}fromSchema(e){X(e,[Mc,"typeValue"]);const t=q(e,e,Tt.schema({names:{type:Mc,value:"typeValue"}}));W.assertSchema(t,this.className),this.type=t.result.type.valueBlock.toString(),this.value=t.result.typeValue}toSchema(){return new C({value:[new he({value:this.type}),this.value]})}toJSON(){const e={type:this.type};return Object.keys(this.value).length!==0?e.value=this.value.toJSON():e.value=this.value,e}isEqual(e){const t=[mt.blockName(),pf.blockName(),wf.blockName(),uc.blockName(),Zs.blockName(),yf.blockName(),oy.blockName(),lg.blockName(),ly.blockName(),cg.blockName(),cy.blockName(),uy.blockName()];if(e instanceof ArrayBuffer)return be.isEqual(this.value.valueBeforeDecodeView,e);if(e.constructor.blockName()===Tt.blockName()){if(this.type!==e.type)return!1;const n=[!1,!1],r=this.value.constructor.blockName();for(const a of t)r===a&&(n[0]=!0),e.value.constructor.blockName()===a&&(n[1]=!0);if(n[0]!==n[1])return!1;if(n[0]&&n[1]){const a=ai(this.value.valueBlock.value),o=ai(e.value.valueBlock.value);if(a.localeCompare(o)!==0)return!1}else if(!be.isEqual(this.value.valueBeforeDecodeView,e.value.valueBeforeDecodeView))return!1;return!0}return!1}}Tt.CLASS_NAME="AttributeTypeAndValue";const Ui="typesAndValues",Xf="valueBeforeDecode",Nb="RDN";class Xe extends G{constructor(e={}){super(),this.typesAndValues=d(e,Ui,Xe.defaultValues(Ui)),this.valueBeforeDecode=d(e,Xf,Xe.defaultValues(Xf)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ui:return[];case Xf:return _t;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ui:return t.length===0;case Xf:return t.byteLength===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new _e({name:t.repeatedSequence||g,value:new bt({value:[new _e({name:t.repeatedSet||g,value:Tt.schema(t.typeAndValue||{})})]})})]})}fromSchema(e){X(e,[Nb,Ui]);const t=q(e,e,Xe.schema({names:{blockName:Nb,repeatedSet:Ui}}));W.assertSchema(t,this.className),Ui in t.result&&(this.typesAndValues=Array.from(t.result.typesAndValues,n=>new Tt({schema:n}))),this.valueBeforeDecode=t.result.RDN.valueBeforeDecodeView.slice().buffer}toSchema(){if(this.valueBeforeDecode.byteLength===0)return new C({value:[new bt({value:Array.from(this.typesAndValues,t=>t.toSchema())})]});const e=At(this.valueBeforeDecode);if(W.assert(e,"RelativeDistinguishedNames"),!(e.result instanceof C))throw new Error("ASN.1 result should be SEQUENCE");return e.result}toJSON(){return{typesAndValues:Array.from(this.typesAndValues,e=>e.toJSON())}}isEqual(e){if(e instanceof Xe){if(this.typesAndValues.length!==e.typesAndValues.length)return!1;for(const[t,n]of this.typesAndValues.entries())if(n.isEqual(e.typesAndValues[t])===!1)return!1;return!0}return e instanceof ArrayBuffer?Nc(this.valueBeforeDecode,e):!1}}Xe.CLASS_NAME="RelativeDistinguishedNames";const eu="type",tu="value";function RR(s={},e=!1){const t=d(s,"names",{});return new C({optional:e,value:[new P({optional:!0,idBlock:{tagClass:2,tagNumber:1},name:t.country_name||g,value:[new lt({value:[new uc,new Zs]})]}),new P({optional:!0,idBlock:{tagClass:2,tagNumber:2},name:t.administration_domain_name||g,value:[new lt({value:[new uc,new Zs]})]}),new ke({optional:!0,idBlock:{tagClass:3,tagNumber:0},name:t.network_address||g,isHexOnly:!0}),new ke({optional:!0,idBlock:{tagClass:3,tagNumber:1},name:t.terminal_identifier||g,isHexOnly:!0}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:2},name:t.private_domain_name||g,value:[new lt({value:[new uc,new Zs]})]}),new ke({optional:!0,idBlock:{tagClass:3,tagNumber:3},name:t.organization_name||g,isHexOnly:!0}),new ke({optional:!0,name:t.numeric_user_identifier||g,idBlock:{tagClass:3,tagNumber:4},isHexOnly:!0}),new P({optional:!0,name:t.personal_name||g,idBlock:{tagClass:3,tagNumber:5},value:[new ke({idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new ke({optional:!0,idBlock:{tagClass:3,tagNumber:1},isHexOnly:!0}),new ke({optional:!0,idBlock:{tagClass:3,tagNumber:2},isHexOnly:!0}),new ke({optional:!0,idBlock:{tagClass:3,tagNumber:3},isHexOnly:!0})]}),new P({optional:!0,name:t.organizational_unit_names||g,idBlock:{tagClass:3,tagNumber:6},value:[new _e({value:new Zs})]})]})}function OR(s=!1){return new C({optional:s,value:[new Zs,new Zs]})}function VR(s=!1){return new bt({optional:s,value:[new ke({optional:!0,idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ce]})]})}class Le extends G{constructor(e={}){super(),this.type=d(e,eu,Le.defaultValues(eu)),this.value=d(e,tu,Le.defaultValues(tu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case eu:return 9;case tu:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case eu:return t===Le.defaultValues(e);case tu:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new lt({value:[new P({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||g,value:[new he,new P({idBlock:{tagClass:3,tagNumber:0},value:[new Ce]})]}),new ke({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:1}}),new ke({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:2}}),new P({idBlock:{tagClass:3,tagNumber:3},name:t.blockName||g,value:[RR(t.builtInStandardAttributes||{},!1),OR(!0),VR(!0)]}),new P({idBlock:{tagClass:3,tagNumber:4},name:t.blockName||g,value:[Xe.schema(t.directoryName||{})]}),new P({idBlock:{tagClass:3,tagNumber:5},name:t.blockName||g,value:[new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new lt({value:[new yf,new Zs,new wf,new mt,new pf]})]}),new P({idBlock:{tagClass:3,tagNumber:1},value:[new lt({value:[new yf,new Zs,new wf,new mt,new pf]})]})]}),new ke({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:6}}),new ke({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:7}}),new ke({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:8}})]})}fromSchema(e){X(e,["blockName","otherName","rfc822Name","dNSName","x400Address","directoryName","ediPartyName","uniformResourceIdentifier","iPAddress","registeredID"]);const t=q(e,e,Le.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));switch(W.assertSchema(t,this.className),this.type=t.result.blockName.idBlock.tagNumber,this.type){case 0:this.value=t.result.blockName;break;case 1:case 2:case 6:{const n=t.result.blockName;n.idBlock.tagClass=1,n.idBlock.tagNumber=22;const r=n.toBER(!1),i=At(r);W.assert(i,"GeneralName value"),this.value=i.result.valueBlock.value}break;case 3:this.value=t.result.blockName;break;case 4:this.value=new Xe({schema:t.result.directoryName});break;case 5:this.value=t.result.ediPartyName;break;case 7:this.value=new Q({valueHex:t.result.blockName.valueBlock.valueHex});break;case 8:{const n=t.result.blockName;n.idBlock.tagClass=1,n.idBlock.tagNumber=6;const r=n.toBER(!1),i=At(r);W.assert(i,"GeneralName registeredID"),this.value=i.result.valueBlock.toString()}break}}toSchema(){switch(this.type){case 0:case 3:case 5:return new P({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:{const e=new lg({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}case 4:return new P({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:{const e=this.value;return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}case 8:{const e=new he({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}default:return Le.schema()}}toJSON(){const e={type:this.type,value:g};if(typeof this.value=="string")e.value=this.value;else try{e.value=this.value.toJSON()}catch{}return e}}Le.CLASS_NAME="GeneralName";const su="accessMethod",nu="accessLocation",PR=[su,nu];class bi extends G{constructor(e={}){super(),this.accessMethod=d(e,su,bi.defaultValues(su)),this.accessLocation=d(e,nu,bi.defaultValues(nu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case su:return g;case nu:return new Le;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new he({name:t.accessMethod||g}),Le.schema(t.accessLocation||{})]})}fromSchema(e){X(e,PR);const t=q(e,e,bi.schema({names:{accessMethod:su,accessLocation:{names:{blockName:nu}}}}));W.assertSchema(t,this.className),this.accessMethod=t.result.accessMethod.valueBlock.toString(),this.accessLocation=new Le({schema:t.result.accessLocation})}toSchema(){return new C({value:[new he({value:this.accessMethod}),this.accessLocation.toSchema()]})}toJSON(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}bi.CLASS_NAME="AccessDescription";const vr="seconds",br="millis",Sr="micros";class Cs extends G{constructor(e={}){super(),vr in e&&(this.seconds=d(e,vr,Cs.defaultValues(vr))),br in e&&(this.millis=d(e,br,Cs.defaultValues(br))),Sr in e&&(this.micros=d(e,Sr,Cs.defaultValues(Sr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case vr:case br:case Sr:return 0;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case vr:case br:case Sr:return t===Cs.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,optional:!0,value:[new U({optional:!0,name:t.seconds||g}),new ke({name:t.millis||g,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new ke({name:t.micros||g,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){X(e,[vr,br,Sr]);const t=q(e,e,Cs.schema({names:{seconds:vr,millis:br,micros:Sr}}));if(W.assertSchema(t,this.className),"seconds"in t.result&&(this.seconds=t.result.seconds.valueBlock.valueDec),"millis"in t.result){const n=new U({valueHex:t.result.millis.valueBlock.valueHex});this.millis=n.valueBlock.valueDec}if("micros"in t.result){const n=new U({valueHex:t.result.micros.valueBlock.valueHex});this.micros=n.valueBlock.valueDec}}toSchema(){const e=[];if(this.seconds!==void 0&&e.push(new U({value:this.seconds})),this.millis!==void 0){const t=new U({value:this.millis});e.push(new ke({idBlock:{tagClass:3,tagNumber:0},valueHex:t.valueBlock.valueHexView}))}if(this.micros!==void 0){const t=new U({value:this.micros});e.push(new ke({idBlock:{tagClass:3,tagNumber:1},valueHex:t.valueBlock.valueHexView}))}return new C({value:e})}toJSON(){const e={};return this.seconds!==void 0&&(e.seconds=this.seconds),this.millis!==void 0&&(e.millis=this.millis),this.micros!==void 0&&(e.micros=this.micros),e}}Cs.CLASS_NAME="Accuracy";const Qf="algorithmId",Hc="algorithmParams",Hk="algorithm",Fp="params",LR=[Hk,Fp];class H extends G{constructor(e={}){super(),this.algorithmId=d(e,Qf,H.defaultValues(Qf)),Hc in e&&(this.algorithmParams=d(e,Hc,H.defaultValues(Hc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Qf:return g;case Hc:return new Ce;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Qf:return t===g;case Hc:return t instanceof Ce;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,optional:t.optional||!1,value:[new he({name:t.algorithmIdentifier||g}),new Ce({name:t.algorithmParams||g,optional:!0})]})}fromSchema(e){X(e,LR);const t=q(e,e,H.schema({names:{algorithmIdentifier:Hk,algorithmParams:Fp}}));W.assertSchema(t,this.className),this.algorithmId=t.result.algorithm.valueBlock.toString(),Fp in t.result&&(this.algorithmParams=t.result.params)}toSchema(){const e=[];return e.push(new he({value:this.algorithmId})),this.algorithmParams&&!(this.algorithmParams instanceof Ce)&&e.push(this.algorithmParams),new C({value:e})}toJSON(){const e={algorithmId:this.algorithmId};return this.algorithmParams&&!(this.algorithmParams instanceof Ce)&&(e.algorithmParams=this.algorithmParams.toJSON()),e}isEqual(e){return!(e instanceof H)||this.algorithmId!==e.algorithmId?!1:this.algorithmParams?e.algorithmParams?JSON.stringify(this.algorithmParams)===JSON.stringify(e.algorithmParams):!1:!e.algorithmParams}}H.CLASS_NAME="AlgorithmIdentifier";const Vo="altNames",DR=[Vo];class Bc extends G{constructor(e={}){super(),this.altNames=d(e,Vo,Bc.defaultValues(Vo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Vo:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new _e({name:t.altNames||g,value:Le.schema()})]})}fromSchema(e){X(e,DR);const t=q(e,e,Bc.schema({names:{altNames:Vo}}));W.assertSchema(t,this.className),Vo in t.result&&(this.altNames=Array.from(t.result.altNames,n=>new Le({schema:n})))}toSchema(){return new C({value:Array.from(this.altNames,e=>e.toSchema())})}toJSON(){return{altNames:Array.from(this.altNames,e=>e.toJSON())}}}Bc.CLASS_NAME="AltName";const Po="type",Lo="values",UR=[Po,Lo];class st extends G{constructor(e={}){super(),this.type=d(e,Po,st.defaultValues(Po)),this.values=d(e,Lo,st.defaultValues(Lo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Po:return g;case Lo:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Po:return t===g;case Lo:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new he({name:t.type||g}),new bt({name:t.setName||g,value:[new _e({name:t.values||g,value:new Ce})]})]})}fromSchema(e){X(e,UR);const t=q(e,e,st.schema({names:{type:Po,values:Lo}}));W.assertSchema(t,this.className),this.type=t.result.type.valueBlock.toString(),this.values=t.result.values}toSchema(){return new C({value:[new he({value:this.type}),new bt({value:this.values})]})}toJSON(){return{type:this.type,values:Array.from(this.values,e=>e.toJSON())}}}st.CLASS_NAME="Attribute";const ru="notBeforeTime",iu="notAfterTime",MR=[ru,iu];class sn extends G{constructor(e={}){super(),this.notBeforeTime=d(e,ru,sn.defaultValues(ru)),this.notAfterTime=d(e,iu,sn.defaultValues(iu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ru:case iu:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new ot({name:t.notBeforeTime||g}),new ot({name:t.notAfterTime||g})]})}fromSchema(e){X(e,MR);const t=q(e,e,sn.schema({names:{notBeforeTime:ru,notAfterTime:iu}}));W.assertSchema(t,this.className),this.notBeforeTime=t.result.notBeforeTime.toDate(),this.notAfterTime=t.result.notAfterTime.toDate()}toSchema(){return new C({value:[new ot({valueDate:this.notBeforeTime}),new ot({valueDate:this.notAfterTime})]})}toJSON(){return{notBeforeTime:this.notBeforeTime,notAfterTime:this.notAfterTime}}}sn.CLASS_NAME="AttCertValidityPeriod";const $c="names",Ib="generalNames";class St extends G{constructor(e={}){super(),this.names=d(e,$c,St.defaultValues($c)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"names":return[];default:return super.defaultValues(e)}}static schema(e={},t=!1){const n=d(e,$c,{});return new C({optional:t,name:n.blockName||g,value:[new _e({name:n.generalNames||g,value:Le.schema()})]})}fromSchema(e){X(e,[$c,Ib]);const t=q(e,e,St.schema({names:{blockName:$c,generalNames:Ib}}));W.assertSchema(t,this.className),this.names=Array.from(t.result.generalNames,n=>new Le({schema:n}))}toSchema(){return new C({value:Array.from(this.names,e=>e.toSchema())})}toJSON(){return{names:Array.from(this.names,e=>e.toJSON())}}}St.CLASS_NAME="GeneralNames";const HR="2.5.29.9",$R="2.5.29.14",FR="2.5.29.15",jR="2.5.29.16",$k="2.5.29.17",Fk="2.5.29.18",hy="2.5.29.19",KR="2.5.29.20",JR="2.5.29.27",WR="2.5.29.21",qR="2.5.29.24",jk="2.5.29.28",Kk="2.5.29.29",Jk="2.5.29.30",Wk="2.5.29.31",fy="2.5.29.46",qk="2.5.29.32",Rs="2.5.29.32.0",GR="1.3.6.1.4.1.311.21.10",Gk="2.5.29.33",dy="2.5.29.35",Yk="2.5.29.36",YR="2.5.29.37",XR="2.5.29.54",my="1.3.6.1.5.5.7.1.1",QR="1.3.6.1.5.5.7.1.11",zR="1.3.6.1.4.1.11129.2.4.2",ZR="1.3.6.1.4.1.311.21.7",eO="1.3.6.1.4.1.311.21.1",tO="1.3.6.1.5.5.7.1.3",gy="1.2.840.113549.1.7.1",Xk="1.2.840.113549.1.7.2",Qk="1.2.840.113549.1.7.3",zk="1.2.840.113549.1.7.6",sO="1.2.840.113549.1.9.16.1.4",_b="1.2.840.113549.1.9.22.1",nO="1.2.840.113549.1.9.22.2",Bb="1.2.840.113549.1.9.22.3",xb="1.2.840.113549.1.9.23.1",rO="1.3.6.1.5.5.7",iO=`${rO}.48`,_d=`${iO}.1.1`,ji="keyIdentifier",Ki="authorityCertIssuer",Ji="authorityCertSerialNumber",aO=[ji,Ki,Ji];class Jn extends G{constructor(e={}){super(),ji in e&&(this.keyIdentifier=d(e,ji,Jn.defaultValues(ji))),Ki in e&&(this.authorityCertIssuer=d(e,Ki,Jn.defaultValues(Ki))),Ji in e&&(this.authorityCertSerialNumber=d(e,Ji,Jn.defaultValues(Ji))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ji:return new Q;case Ki:return[];case Ji:return new U;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new ke({name:t.keyIdentifier||g,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new _e({name:t.authorityCertIssuer||g,value:Le.schema()})]}),new ke({name:t.authorityCertSerialNumber||g,optional:!0,idBlock:{tagClass:3,tagNumber:2}})]})}fromSchema(e){X(e,aO);const t=q(e,e,Jn.schema({names:{keyIdentifier:ji,authorityCertIssuer:Ki,authorityCertSerialNumber:Ji}}));W.assertSchema(t,this.className),ji in t.result&&(this.keyIdentifier=new Q({valueHex:t.result.keyIdentifier.valueBlock.valueHex})),Ki in t.result&&(this.authorityCertIssuer=Array.from(t.result.authorityCertIssuer,n=>new Le({schema:n}))),Ji in t.result&&(this.authorityCertSerialNumber=new U({valueHex:t.result.authorityCertSerialNumber.valueBlock.valueHex}))}toSchema(){const e=[];return this.keyIdentifier&&e.push(new ke({idBlock:{tagClass:3,tagNumber:0},valueHex:this.keyIdentifier.valueBlock.valueHexView})),this.authorityCertIssuer&&e.push(new P({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.authorityCertIssuer,t=>t.toSchema())})),this.authorityCertSerialNumber&&e.push(new ke({idBlock:{tagClass:3,tagNumber:2},valueHex:this.authorityCertSerialNumber.valueBlock.valueHexView})),new C({value:e})}toJSON(){const e={};return this.keyIdentifier&&(e.keyIdentifier=this.keyIdentifier.toJSON()),this.authorityCertIssuer&&(e.authorityCertIssuer=Array.from(this.authorityCertIssuer,t=>t.toJSON())),this.authorityCertSerialNumber&&(e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()),e}}Jn.CLASS_NAME="AuthorityKeyIdentifier";const Mi="pathLenConstraint",Hi="cA";class Si extends G{constructor(e={}){super(),this.cA=d(e,Hi,!1),Mi in e&&(this.pathLenConstraint=d(e,Mi,0)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Hi:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new Cn({optional:!0,name:t.cA||g}),new U({optional:!0,name:t.pathLenConstraint||g})]})}fromSchema(e){X(e,[Hi,Mi]);const t=q(e,e,Si.schema({names:{cA:Hi,pathLenConstraint:Mi}}));W.assertSchema(t,this.className),Hi in t.result&&(this.cA=t.result.cA.valueBlock.value),Mi in t.result&&(t.result.pathLenConstraint.valueBlock.isHexOnly?this.pathLenConstraint=t.result.pathLenConstraint:this.pathLenConstraint=t.result.pathLenConstraint.valueBlock.valueDec)}toSchema(){const e=[];return this.cA!==Si.defaultValues(Hi)&&e.push(new Cn({value:this.cA})),Mi in this&&(this.pathLenConstraint instanceof U?e.push(this.pathLenConstraint):e.push(new U({value:this.pathLenConstraint}))),new C({value:e})}toJSON(){const e={};return this.cA!==Si.defaultValues(Hi)&&(e.cA=this.cA),Mi in this&&(this.pathLenConstraint instanceof U?e.pathLenConstraint=this.pathLenConstraint.toJSON():e.pathLenConstraint=this.pathLenConstraint),e}}Si.CLASS_NAME="BasicConstraints";const Bg="certificateIndex",xg="keyIndex";class vf extends G{constructor(e={}){super(),this.certificateIndex=d(e,Bg,vf.defaultValues(Bg)),this.keyIndex=d(e,xg,vf.defaultValues(xg)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Bg:case xg:return 0;default:return super.defaultValues(e)}}static schema(){return new U}fromSchema(e){if(e.constructor.blockName()!==U.blockName())throw new Error("Object's schema was not verified against input data for CAVersion");let t=e.valueBlock.valueHex.slice(0);const n=new Uint8Array(t);switch(!0){case t.byteLength<4:{const f=new ArrayBuffer(4);new Uint8Array(f).set(n,4-t.byteLength),t=f.slice(0)}break;case t.byteLength>4:{const f=new ArrayBuffer(4);new Uint8Array(f).set(n.slice(0,4)),t=f.slice(0)}break}const r=t.slice(0,2),i=new Uint8Array(r);let a=i[0];i[0]=i[1],i[1]=a;const o=new Uint16Array(r);this.keyIndex=o[0];const l=t.slice(2),c=new Uint8Array(l);a=c[0],c[0]=c[1],c[1]=a;const u=new Uint16Array(l);this.certificateIndex=u[0]}toSchema(){const e=new ArrayBuffer(2),t=new Uint16Array(e);t[0]=this.certificateIndex;const n=new Uint8Array(e);let r=n[0];n[0]=n[1],n[1]=r;const i=new ArrayBuffer(2),a=new Uint16Array(i);a[0]=this.keyIndex;const o=new Uint8Array(i);return r=o[0],o[0]=o[1],o[1]=r,new U({valueHex:cc(i,e)})}toJSON(){return{certificateIndex:this.certificateIndex,keyIndex:this.keyIndex}}}vf.CLASS_NAME="CAVersion";const au="policyQualifierId",ou="qualifier",oO=[au,ou];class to extends G{constructor(e={}){super(),this.policyQualifierId=d(e,au,to.defaultValues(au)),this.qualifier=d(e,ou,to.defaultValues(ou)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case au:return g;case ou:return new Ce;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new he({name:t.policyQualifierId||g}),new Ce({name:t.qualifier||g})]})}fromSchema(e){X(e,oO);const t=q(e,e,to.schema({names:{policyQualifierId:au,qualifier:ou}}));W.assertSchema(t,this.className),this.policyQualifierId=t.result.policyQualifierId.valueBlock.toString(),this.qualifier=t.result.qualifier}toSchema(){return new C({value:[new he({value:this.policyQualifierId}),this.qualifier]})}toJSON(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}to.CLASS_NAME="PolicyQualifierInfo";const lu="policyIdentifier",Wi="policyQualifiers",lO=[lu,Wi];class so extends G{constructor(e={}){super(),this.policyIdentifier=d(e,lu,so.defaultValues(lu)),Wi in e&&(this.policyQualifiers=d(e,Wi,so.defaultValues(Wi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case lu:return g;case Wi:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new he({name:t.policyIdentifier||g}),new C({optional:!0,value:[new _e({name:t.policyQualifiers||g,value:to.schema()})]})]})}fromSchema(e){X(e,lO);const t=q(e,e,so.schema({names:{policyIdentifier:lu,policyQualifiers:Wi}}));W.assertSchema(t,this.className),this.policyIdentifier=t.result.policyIdentifier.valueBlock.toString(),Wi in t.result&&(this.policyQualifiers=Array.from(t.result.policyQualifiers,n=>new to({schema:n})))}toSchema(){const e=[];return e.push(new he({value:this.policyIdentifier})),this.policyQualifiers&&e.push(new C({value:Array.from(this.policyQualifiers,t=>t.toSchema())})),new C({value:e})}toJSON(){const e={policyIdentifier:this.policyIdentifier};return this.policyQualifiers&&(e.policyQualifiers=Array.from(this.policyQualifiers,t=>t.toJSON())),e}}so.CLASS_NAME="PolicyInformation";const cu="certificatePolicies",cO=[cu];class xc extends G{constructor(e={}){super(),this.certificatePolicies=d(e,cu,xc.defaultValues(cu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case cu:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new _e({name:t.certificatePolicies||g,value:so.schema()})]})}fromSchema(e){X(e,cO);const t=q(e,e,xc.schema({names:{certificatePolicies:cu}}));W.assertSchema(t,this.className),this.certificatePolicies=Array.from(t.result.certificatePolicies,n=>new so({schema:n}))}toSchema(){return new C({value:Array.from(this.certificatePolicies,e=>e.toSchema())})}toJSON(){return{certificatePolicies:Array.from(this.certificatePolicies,e=>e.toJSON())}}}xc.CLASS_NAME="CertificatePolicies";const uu="templateID",xn="templateMajorVersion",Tn="templateMinorVersion",uO=[uu,xn,Tn];class ec extends G{constructor(e={}){super(),this.templateID=d(e,uu,ec.defaultValues(uu)),xn in e&&(this.templateMajorVersion=d(e,xn,ec.defaultValues(xn))),Tn in e&&(this.templateMinorVersion=d(e,Tn,ec.defaultValues(Tn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case uu:return g;case xn:case Tn:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new he({name:t.templateID||g}),new U({name:t.templateMajorVersion||g,optional:!0}),new U({name:t.templateMinorVersion||g,optional:!0})]})}fromSchema(e){X(e,uO);const t=q(e,e,ec.schema({names:{templateID:uu,templateMajorVersion:xn,templateMinorVersion:Tn}}));W.assertSchema(t,this.className),this.templateID=t.result.templateID.valueBlock.toString(),xn in t.result&&(this.templateMajorVersion=t.result.templateMajorVersion.valueBlock.valueDec),Tn in t.result&&(this.templateMinorVersion=t.result.templateMinorVersion.valueBlock.valueDec)}toSchema(){const e=[];return e.push(new he({value:this.templateID})),xn in this&&e.push(new U({value:this.templateMajorVersion})),Tn in this&&e.push(new U({value:this.templateMinorVersion})),new C({value:e})}toJSON(){const e={templateID:this.templateID};return xn in this&&(e.templateMajorVersion=this.templateMajorVersion),Tn in this&&(e.templateMinorVersion=this.templateMinorVersion),e}}const qi="distributionPoint",Zk="distributionPointNames",Gi="reasons",Yi="cRLIssuer",e0="cRLIssuerNames",hO=[qi,Zk,Gi,Yi,e0];class Wn extends G{constructor(e={}){super(),qi in e&&(this.distributionPoint=d(e,qi,Wn.defaultValues(qi))),Gi in e&&(this.reasons=d(e,Gi,Wn.defaultValues(Gi))),Yi in e&&(this.cRLIssuer=d(e,Yi,Wn.defaultValues(Yi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case qi:return[];case Gi:return new Pe;case Yi:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new lt({value:[new P({name:t.distributionPoint||g,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new _e({name:t.distributionPointNames||g,value:Le.schema()})]}),new P({name:t.distributionPoint||g,optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Xe.schema().valueBlock.value})]})]}),new ke({name:t.reasons||g,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new P({name:t.cRLIssuer||g,optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[new _e({name:t.cRLIssuerNames||g,value:Le.schema()})]})]})}fromSchema(e){X(e,hO);const t=q(e,e,Wn.schema({names:{distributionPoint:qi,distributionPointNames:Zk,reasons:Gi,cRLIssuer:Yi,cRLIssuerNames:e0}}));W.assertSchema(t,this.className),qi in t.result&&(t.result.distributionPoint.idBlock.tagNumber===0&&(this.distributionPoint=Array.from(t.result.distributionPointNames,n=>new Le({schema:n}))),t.result.distributionPoint.idBlock.tagNumber===1&&(this.distributionPoint=new Xe({schema:new C({value:t.result.distributionPoint.valueBlock.value})}))),Gi in t.result&&(this.reasons=new Pe({valueHex:t.result.reasons.valueBlock.valueHex})),Yi in t.result&&(this.cRLIssuer=Array.from(t.result.cRLIssuerNames,n=>new Le({schema:n})))}toSchema(){const e=[];if(this.distributionPoint){let t;this.distributionPoint instanceof Array?t=new P({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,n=>n.toSchema())}):t=new P({idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]}),e.push(new P({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}return this.reasons&&e.push(new ke({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHexView})),this.cRLIssuer&&e.push(new P({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,t=>t.toSchema())})),new C({value:e})}toJSON(){const e={};return this.distributionPoint&&(this.distributionPoint instanceof Array?e.distributionPoint=Array.from(this.distributionPoint,t=>t.toJSON()):e.distributionPoint=this.distributionPoint.toJSON()),this.reasons&&(e.reasons=this.reasons.toJSON()),this.cRLIssuer&&(e.cRLIssuer=Array.from(this.cRLIssuer,t=>t.toJSON())),e}}Wn.CLASS_NAME="DistributionPoint";const hu="distributionPoints",fO=[hu];class fo extends G{constructor(e={}){super(),this.distributionPoints=d(e,hu,fo.defaultValues(hu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case hu:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new _e({name:t.distributionPoints||g,value:Wn.schema()})]})}fromSchema(e){X(e,fO);const t=q(e,e,fo.schema({names:{distributionPoints:hu}}));W.assertSchema(t,this.className),this.distributionPoints=Array.from(t.result.distributionPoints,n=>new Wn({schema:n}))}toSchema(){return new C({value:Array.from(this.distributionPoints,e=>e.toSchema())})}toJSON(){return{distributionPoints:Array.from(this.distributionPoints,e=>e.toJSON())}}}fo.CLASS_NAME="CRLDistributionPoints";const fu="keyPurposes",dO=[fu];class Tc extends G{constructor(e={}){super(),this.keyPurposes=d(e,fu,Tc.defaultValues(fu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case fu:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new _e({name:t.keyPurposes||g,value:new he})]})}fromSchema(e){X(e,dO);const t=q(e,e,Tc.schema({names:{keyPurposes:fu}}));W.assertSchema(t,this.className),this.keyPurposes=Array.from(t.result.keyPurposes,n=>n.valueBlock.toString())}toSchema(){return new C({value:Array.from(this.keyPurposes,e=>new he({value:e}))})}toJSON(){return{keyPurposes:Array.from(this.keyPurposes)}}}Tc.CLASS_NAME="ExtKeyUsage";const Fc="accessDescriptions";class mo extends G{constructor(e={}){super(),this.accessDescriptions=d(e,Fc,mo.defaultValues(Fc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Fc:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new _e({name:t.accessDescriptions||g,value:bi.schema()})]})}fromSchema(e){X(e,[Fc]);const t=q(e,e,mo.schema({names:{accessDescriptions:Fc}}));W.assertSchema(t,this.className),this.accessDescriptions=Array.from(t.result.accessDescriptions,n=>new bi({schema:n}))}toSchema(){return new C({value:Array.from(this.accessDescriptions,e=>e.toSchema())})}toJSON(){return{accessDescriptions:Array.from(this.accessDescriptions,e=>e.toJSON())}}}mo.CLASS_NAME="InfoAccess";const Xi="distributionPoint",t0="distributionPointNames",Ar="onlyContainsUserCerts",kr="onlyContainsCACerts",Er="onlySomeReasons",Cr="indirectCRL",Nr="onlyContainsAttributeCerts",mO=[Xi,t0,Ar,kr,Er,Cr,Nr];class Lt extends G{constructor(e={}){super(),Xi in e&&(this.distributionPoint=d(e,Xi,Lt.defaultValues(Xi))),this.onlyContainsUserCerts=d(e,Ar,Lt.defaultValues(Ar)),this.onlyContainsCACerts=d(e,kr,Lt.defaultValues(kr)),Er in e&&(this.onlySomeReasons=d(e,Er,Lt.defaultValues(Er))),this.indirectCRL=d(e,Cr,Lt.defaultValues(Cr)),this.onlyContainsAttributeCerts=d(e,Nr,Lt.defaultValues(Nr)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Xi:return[];case Ar:return!1;case kr:return!1;case Er:return 0;case Cr:return!1;case Nr:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new lt({value:[new P({name:t.distributionPoint||g,idBlock:{tagClass:3,tagNumber:0},value:[new _e({name:t.distributionPointNames||g,value:Le.schema()})]}),new P({name:t.distributionPoint||g,idBlock:{tagClass:3,tagNumber:1},value:Xe.schema().valueBlock.value})]})]}),new ke({name:t.onlyContainsUserCerts||g,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new ke({name:t.onlyContainsCACerts||g,optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new ke({name:t.onlySomeReasons||g,optional:!0,idBlock:{tagClass:3,tagNumber:3}}),new ke({name:t.indirectCRL||g,optional:!0,idBlock:{tagClass:3,tagNumber:4}}),new ke({name:t.onlyContainsAttributeCerts||g,optional:!0,idBlock:{tagClass:3,tagNumber:5}})]})}fromSchema(e){X(e,mO);const t=q(e,e,Lt.schema({names:{distributionPoint:Xi,distributionPointNames:t0,onlyContainsUserCerts:Ar,onlyContainsCACerts:kr,onlySomeReasons:Er,indirectCRL:Cr,onlyContainsAttributeCerts:Nr}}));if(W.assertSchema(t,this.className),Xi in t.result)switch(!0){case t.result.distributionPoint.idBlock.tagNumber===0:this.distributionPoint=Array.from(t.result.distributionPointNames,n=>new Le({schema:n}));break;case t.result.distributionPoint.idBlock.tagNumber===1:this.distributionPoint=new Xe({schema:new C({value:t.result.distributionPoint.valueBlock.value})});break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}if(Ar in t.result){const n=new Uint8Array(t.result.onlyContainsUserCerts.valueBlock.valueHex);this.onlyContainsUserCerts=n[0]!==0}if(kr in t.result){const n=new Uint8Array(t.result.onlyContainsCACerts.valueBlock.valueHex);this.onlyContainsCACerts=n[0]!==0}if(Er in t.result){const n=new Uint8Array(t.result.onlySomeReasons.valueBlock.valueHex);this.onlySomeReasons=n[0]}if(Cr in t.result){const n=new Uint8Array(t.result.indirectCRL.valueBlock.valueHex);this.indirectCRL=n[0]!==0}if(Nr in t.result){const n=new Uint8Array(t.result.onlyContainsAttributeCerts.valueBlock.valueHex);this.onlyContainsAttributeCerts=n[0]!==0}}toSchema(){const e=[];if(this.distributionPoint){let t;this.distributionPoint instanceof Array?t=new P({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,n=>n.toSchema())}):(t=this.distributionPoint.toSchema(),t.idBlock.tagClass=3,t.idBlock.tagNumber=1),e.push(new P({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(this.onlyContainsUserCerts!==Lt.defaultValues(Ar)&&e.push(new ke({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsCACerts!==Lt.defaultValues(kr)&&e.push(new ke({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer})),this.onlySomeReasons!==void 0){const t=new ArrayBuffer(1),n=new Uint8Array(t);n[0]=this.onlySomeReasons,e.push(new ke({idBlock:{tagClass:3,tagNumber:3},valueHex:t}))}return this.indirectCRL!==Lt.defaultValues(Cr)&&e.push(new ke({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsAttributeCerts!==Lt.defaultValues(Nr)&&e.push(new ke({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer})),new C({value:e})}toJSON(){const e={};return this.distributionPoint&&(this.distributionPoint instanceof Array?e.distributionPoint=Array.from(this.distributionPoint,t=>t.toJSON()):e.distributionPoint=this.distributionPoint.toJSON()),this.onlyContainsUserCerts!==Lt.defaultValues(Ar)&&(e.onlyContainsUserCerts=this.onlyContainsUserCerts),this.onlyContainsCACerts!==Lt.defaultValues(kr)&&(e.onlyContainsCACerts=this.onlyContainsCACerts),Er in this&&(e.onlySomeReasons=this.onlySomeReasons),this.indirectCRL!==Lt.defaultValues(Cr)&&(e.indirectCRL=this.indirectCRL),this.onlyContainsAttributeCerts!==Lt.defaultValues(Nr)&&(e.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts),e}}Lt.CLASS_NAME="IssuingDistributionPoint";const du="base",Do="minimum",Ir="maximum",gO=[du,Do,Ir];class bn extends G{constructor(e={}){super(),this.base=d(e,du,bn.defaultValues(du)),this.minimum=d(e,Do,bn.defaultValues(Do)),Ir in e&&(this.maximum=d(e,Ir,bn.defaultValues(Ir))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case du:return new Le;case Do:return 0;case Ir:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[Le.schema(t.base||{}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new U({name:t.minimum||g})]}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new U({name:t.maximum||g})]})]})}fromSchema(e){X(e,gO);const t=q(e,e,bn.schema({names:{base:{names:{blockName:du}},minimum:Do,maximum:Ir}}));W.assertSchema(t,this.className),this.base=new Le({schema:t.result.base}),Do in t.result&&(t.result.minimum.valueBlock.isHexOnly?this.minimum=t.result.minimum:this.minimum=t.result.minimum.valueBlock.valueDec),Ir in t.result&&(t.result.maximum.valueBlock.isHexOnly?this.maximum=t.result.maximum:this.maximum=t.result.maximum.valueBlock.valueDec)}toSchema(){const e=[];if(e.push(this.base.toSchema()),this.minimum!==0){let t=0;this.minimum instanceof U?t=this.minimum:t=new U({value:this.minimum}),e.push(new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(Ir in this){let t=0;this.maximum instanceof U?t=this.maximum:t=new U({value:this.maximum}),e.push(new P({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[t]}))}return new C({value:e})}toJSON(){const e={base:this.base.toJSON()};return this.minimum!==0&&(typeof this.minimum=="number"?e.minimum=this.minimum:e.minimum=this.minimum.toJSON()),this.maximum!==void 0&&(typeof this.maximum=="number"?e.maximum=this.maximum:e.maximum=this.maximum.toJSON()),e}}bn.CLASS_NAME="GeneralSubtree";const Qi="permittedSubtrees",zi="excludedSubtrees",pO=[Qi,zi];class hc extends G{constructor(e={}){super(),Qi in e&&(this.permittedSubtrees=d(e,Qi,hc.defaultValues(Qi))),zi in e&&(this.excludedSubtrees=d(e,zi,hc.defaultValues(zi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Qi:case zi:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new _e({name:t.permittedSubtrees||g,value:bn.schema()})]}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new _e({name:t.excludedSubtrees||g,value:bn.schema()})]})]})}fromSchema(e){X(e,pO);const t=q(e,e,hc.schema({names:{permittedSubtrees:Qi,excludedSubtrees:zi}}));W.assertSchema(t,this.className),Qi in t.result&&(this.permittedSubtrees=Array.from(t.result.permittedSubtrees,n=>new bn({schema:n}))),zi in t.result&&(this.excludedSubtrees=Array.from(t.result.excludedSubtrees,n=>new bn({schema:n})))}toSchema(){const e=[];return this.permittedSubtrees&&e.push(new P({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.permittedSubtrees,t=>t.toSchema())})),this.excludedSubtrees&&e.push(new P({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.excludedSubtrees,t=>t.toSchema())})),new C({value:e})}toJSON(){const e={};return this.permittedSubtrees&&(e.permittedSubtrees=Array.from(this.permittedSubtrees,t=>t.toJSON())),this.excludedSubtrees&&(e.excludedSubtrees=Array.from(this.excludedSubtrees,t=>t.toJSON())),e}}hc.CLASS_NAME="NameConstraints";const Rn="requireExplicitPolicy",On="inhibitPolicyMapping",wO=[Rn,On];class fc extends G{constructor(e={}){super(),Rn in e&&(this.requireExplicitPolicy=d(e,Rn,fc.defaultValues(Rn))),On in e&&(this.inhibitPolicyMapping=d(e,On,fc.defaultValues(On))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Rn:return 0;case On:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new ke({name:t.requireExplicitPolicy||g,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new ke({name:t.inhibitPolicyMapping||g,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){X(e,wO);const t=q(e,e,fc.schema({names:{requireExplicitPolicy:Rn,inhibitPolicyMapping:On}}));if(W.assertSchema(t,this.className),Rn in t.result){const n=t.result.requireExplicitPolicy;n.idBlock.tagClass=1,n.idBlock.tagNumber=2;const r=n.toBER(!1),i=At(r);W.assert(i,"Integer"),this.requireExplicitPolicy=i.result.valueBlock.valueDec}if(On in t.result){const n=t.result.inhibitPolicyMapping;n.idBlock.tagClass=1,n.idBlock.tagNumber=2;const r=n.toBER(!1),i=At(r);W.assert(i,"Integer"),this.inhibitPolicyMapping=i.result.valueBlock.valueDec}}toSchema(){const e=[];if(Rn in this){const t=new U({value:this.requireExplicitPolicy});t.idBlock.tagClass=3,t.idBlock.tagNumber=0,e.push(t)}if(On in this){const t=new U({value:this.inhibitPolicyMapping});t.idBlock.tagClass=3,t.idBlock.tagNumber=1,e.push(t)}return new C({value:e})}toJSON(){const e={};return Rn in this&&(e.requireExplicitPolicy=this.requireExplicitPolicy),On in this&&(e.inhibitPolicyMapping=this.inhibitPolicyMapping),e}}fc.CLASS_NAME="PolicyConstraints";const mu="issuerDomainPolicy",gu="subjectDomainPolicy",yO=[mu,gu];class no extends G{constructor(e={}){super(),this.issuerDomainPolicy=d(e,mu,no.defaultValues(mu)),this.subjectDomainPolicy=d(e,gu,no.defaultValues(gu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case mu:return g;case gu:return g;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new he({name:t.issuerDomainPolicy||g}),new he({name:t.subjectDomainPolicy||g})]})}fromSchema(e){X(e,yO);const t=q(e,e,no.schema({names:{issuerDomainPolicy:mu,subjectDomainPolicy:gu}}));W.assertSchema(t,this.className),this.issuerDomainPolicy=t.result.issuerDomainPolicy.valueBlock.toString(),this.subjectDomainPolicy=t.result.subjectDomainPolicy.valueBlock.toString()}toSchema(){return new C({value:[new he({value:this.issuerDomainPolicy}),new he({value:this.subjectDomainPolicy})]})}toJSON(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}no.CLASS_NAME="PolicyMapping";const pu="mappings",vO=[pu];class bf extends G{constructor(e={}){super(),this.mappings=d(e,pu,bf.defaultValues(pu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case pu:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new _e({name:t.mappings||g,value:no.schema()})]})}fromSchema(e){X(e,vO);const t=q(e,e,bf.schema({names:{mappings:pu}}));W.assertSchema(t,this.className),this.mappings=Array.from(t.result.mappings,n=>new no({schema:n}))}toSchema(){return new C({value:Array.from(this.mappings,e=>e.toSchema())})}toJSON(){return{mappings:Array.from(this.mappings,e=>e.toJSON())}}}bf.CLASS_NAME="PolicyMappings";const _r="notBefore",Br="notAfter",bO=[_r,Br];class dc extends G{constructor(e={}){super(),_r in e&&(this.notBefore=d(e,_r,dc.defaultValues(_r))),Br in e&&(this.notAfter=d(e,Br,dc.defaultValues(Br))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case _r:return new Date;case Br:return new Date;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new ke({name:t.notBefore||g,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new ke({name:t.notAfter||g,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){X(e,bO);const t=q(e,e,dc.schema({names:{notBefore:_r,notAfter:Br}}));if(W.assertSchema(t,this.className),_r in t.result){const n=new ot;n.fromBuffer(t.result.notBefore.valueBlock.valueHex),this.notBefore=n.toDate()}if(Br in t.result){const n=new ot({valueHex:t.result.notAfter.valueBlock.valueHex});n.fromBuffer(t.result.notAfter.valueBlock.valueHex),this.notAfter=n.toDate()}}toSchema(){const e=[];return _r in this&&e.push(new ke({idBlock:{tagClass:3,tagNumber:0},valueHex:new ot({valueDate:this.notBefore}).valueBlock.valueHexView})),Br in this&&e.push(new ke({idBlock:{tagClass:3,tagNumber:1},valueHex:new ot({valueDate:this.notAfter}).valueBlock.valueHexView})),new C({value:e})}toJSON(){const e={};return this.notBefore&&(e.notBefore=this.notBefore),this.notAfter&&(e.notAfter=this.notAfter),e}}dc.CLASS_NAME="PrivateKeyUsagePeriod";const Uo="id",Vn="type",Mo="values",SO=[Uo,Vn],AO=[Mo];class ro extends G{constructor(e={}){super(),this.id=d(e,Uo,ro.defaultValues(Uo)),Vn in e&&(this.type=d(e,Vn,ro.defaultValues(Vn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Uo:return g;case Vn:return new pt;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Uo:return t===g;case Vn:return t instanceof pt;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new he({name:t.id||g}),new Ce({name:t.type||g,optional:!0})]})}fromSchema(e){X(e,SO);const t=q(e,e,ro.schema({names:{id:Uo,type:Vn}}));W.assertSchema(t,this.className),this.id=t.result.id.valueBlock.toString(),Vn in t.result&&(this.type=t.result.type)}toSchema(){const e=[new he({value:this.id})];return Vn in this&&e.push(this.type),new C({value:e})}toJSON(){const e={id:this.id};return this.type&&(e.type=this.type.toJSON()),e}}ro.CLASS_NAME="QCStatement";class Sf extends G{constructor(e={}){super(),this.values=d(e,Mo,Sf.defaultValues(Mo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Mo:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Mo:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new _e({name:t.values||g,value:ro.schema(t.value||{})})]})}fromSchema(e){X(e,AO);const t=q(e,e,Sf.schema({names:{values:Mo}}));W.assertSchema(t,this.className),this.values=Array.from(t.result.values,n=>new ro({schema:n}))}toSchema(){return new C({value:Array.from(this.values,e=>e.toSchema())})}toJSON(){return{values:Array.from(this.values,e=>e.toJSON())}}}Sf.CLASS_NAME="QCStatements";var Zi;class Ai{static register(e,t,n){this.namedCurves[e.toLowerCase()]=this.namedCurves[t]={name:e,id:t,size:n}}static find(e){return this.namedCurves[e.toLowerCase()]||null}}Zi=Ai;Ai.namedCurves={};Zi.register("P-256","1.2.840.10045.3.1.7",32),Zi.register("P-384","1.3.132.0.34",48),Zi.register("P-521","1.3.132.0.35",66),Zi.register("brainpoolP256r1","1.3.36.3.3.2.8.1.1.7",32),Zi.register("brainpoolP384r1","1.3.36.3.3.2.8.1.1.11",48),Zi.register("brainpoolP512r1","1.3.36.3.3.2.8.1.1.13",64);const zf="x",Zf="y",ed="namedCurve";class ns extends G{constructor(e={}){super(),this.x=d(e,zf,ns.defaultValues(zf)),this.y=d(e,Zf,ns.defaultValues(Zf)),this.namedCurve=d(e,ed,ns.defaultValues(ed)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case zf:case Zf:return _t;case ed:return g;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case zf:case Zf:return t instanceof ArrayBuffer&&Nc(t,ns.defaultValues(e));case ed:return typeof t=="string"&&t===ns.defaultValues(e);default:return super.defaultValues(e)}}static schema(){return new _m}fromSchema(e){const t=be.toUint8Array(e);if(t[0]!==4)throw new Error("Object's schema was not verified against input data for ECPublicKey");const n=Ai.find(this.namedCurve);if(!n)throw new Error(`Incorrect curve OID: ${this.namedCurve}`);const r=n.size;if(t.byteLength!==r*2+1)throw new Error("Object's schema was not verified against input data for ECPublicKey");this.namedCurve=n.name,this.x=t.slice(1,r+1).buffer,this.y=t.slice(1+r,r*2+1).buffer}toSchema(){return new _m({data:cc(new Uint8Array([4]).buffer,this.x,this.y)})}toJSON(){const e=Ai.find(this.namedCurve);return{crv:e?e.name:this.namedCurve,x:Mp(Nm(this.x),!0,!0,!1),y:Mp(Nm(this.y),!0,!0,!1)}}fromJSON(e){Me.assert("json",e,"crv","x","y");let t=0;const n=Ai.find(e.crv);n&&(this.namedCurve=n.id,t=n.size);const r=Ic(mf(e.x,!0));if(r.byteLength<t){this.x=new ArrayBuffer(t);const a=new Uint8Array(this.x),o=new Uint8Array(r);a.set(o,1)}else this.x=r.slice(0,t);const i=Ic(mf(e.y,!0));if(i.byteLength<t){this.y=new ArrayBuffer(t);const a=new Uint8Array(this.y),o=new Uint8Array(i);a.set(o,1)}else this.y=i.slice(0,t)}}ns.CLASS_NAME="ECPublicKey";const wu="modulus",yu="publicExponent",kO=[wu,yu];class io extends G{constructor(e={}){super(),this.modulus=d(e,wu,io.defaultValues(wu)),this.publicExponent=d(e,yu,io.defaultValues(yu)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wu:return new U;case yu:return new U;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new U({name:t.modulus||g}),new U({name:t.publicExponent||g})]})}fromSchema(e){X(e,kO);const t=q(e,e,io.schema({names:{modulus:wu,publicExponent:yu}}));W.assertSchema(t,this.className),this.modulus=t.result.modulus.convertFromDER(256),this.publicExponent=t.result.publicExponent}toSchema(){return new C({value:[this.modulus.convertToDER(),this.publicExponent]})}toJSON(){return{n:Ae.ToBase64Url(this.modulus.valueBlock.valueHexView),e:Ae.ToBase64Url(this.publicExponent.valueBlock.valueHexView)}}fromJSON(e){Me.assert("json",e,"n","e");const t=Ic(mf(e.n,!0));this.modulus=new U({valueHex:t.slice(0,Math.pow(2,yR(t.byteLength)))}),this.publicExponent=new U({valueHex:Ic(mf(e.e,!0)).slice(0,3)})}}io.CLASS_NAME="RSAPublicKey";const vu="algorithm",bu="subjectPublicKey",EO=[vu,bu];class is extends G{constructor(e={}){super(),this.algorithm=d(e,vu,is.defaultValues(vu)),this.subjectPublicKey=d(e,bu,is.defaultValues(bu));const t=d(e,"parsedKey",null);t&&(this.parsedKey=t),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}get parsedKey(){if(this._parsedKey===void 0){switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":if("algorithmParams"in this.algorithm&&this.algorithm.algorithmParams.constructor.blockName()===he.blockName())try{this._parsedKey=new ns({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHexView})}catch{}break;case"1.2.840.113549.1.1.1":{const e=At(this.subjectPublicKey.valueBlock.valueHexView);if(e.offset!==-1)try{this._parsedKey=new io({schema:e.result})}catch{}}break}this._parsedKey||(this._parsedKey=null)}return this._parsedKey||void 0}set parsedKey(e){this._parsedKey=e}static defaultValues(e){switch(e){case vu:return new H;case bu:return new Pe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[H.schema(t.algorithm||{}),new Pe({name:t.subjectPublicKey||g})]})}fromSchema(e){X(e,EO);const t=q(e,e,is.schema({names:{algorithm:{names:{blockName:vu}},subjectPublicKey:bu}}));W.assertSchema(t,this.className),this.algorithm=new H({schema:t.result.algorithm}),this.subjectPublicKey=t.result.subjectPublicKey}toSchema(){return new C({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}toJSON(){if(!this.parsedKey)return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()};const e={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA";break}const t=this.parsedKey.toJSON();return Object.assign(e,t),e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new ns({json:e}),this.algorithm=new H({algorithmId:"1.2.840.10045.2.1",algorithmParams:new he({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new io({json:e}),this.algorithm=new H({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new pt});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.subjectPublicKey=new Pe({valueHex:this.parsedKey.toSchema().toBER(!1)})}}async importKey(e,t=Ie(!0)){try{if(!e)throw new Error("Need to provide publicKey input parameter");const n=await t.exportKey("spki",e),r=At(n);try{this.fromSchema(r.result)}catch{throw new Error("Error during initializing object from schema")}}catch(n){const r=n instanceof Error?n.message:`${n}`;throw new Error(`Error during exporting public key: ${r}`)}}}is.CLASS_NAME="PublicKeyInfo";const Ho="version",$o="privateKey",Ws="namedCurve",xr="publicKey",CO=[Ho,$o,Ws,xr];class Vs extends G{constructor(e={}){super(),this.version=d(e,Ho,Vs.defaultValues(Ho)),this.privateKey=d(e,$o,Vs.defaultValues($o)),Ws in e&&(this.namedCurve=d(e,Ws,Vs.defaultValues(Ws))),xr in e&&(this.publicKey=d(e,xr,Vs.defaultValues(xr))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ho:return 1;case $o:return new Q;case Ws:return g;case xr:return new ns;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ho:return t===Vs.defaultValues(e);case $o:return t.isEqual(Vs.defaultValues(e));case Ws:return t===g;case xr:return ns.compareWithDefault(Ws,t.namedCurve)&&ns.compareWithDefault("x",t.x)&&ns.compareWithDefault("y",t.y);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new U({name:t.version||g}),new Q({name:t.privateKey||g}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new he({name:t.namedCurve||g})]}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Pe({name:t.publicKey||g})]})]})}fromSchema(e){X(e,CO);const t=q(e,e,Vs.schema({names:{version:Ho,privateKey:$o,namedCurve:Ws,publicKey:xr}}));if(W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.privateKey=t.result.privateKey,Ws in t.result&&(this.namedCurve=t.result.namedCurve.valueBlock.toString()),xr in t.result){const n={schema:t.result.publicKey.valueBlock.valueHex};Ws in this&&(n.namedCurve=this.namedCurve),this.publicKey=new ns(n)}}toSchema(){const e=[new U({value:this.version}),this.privateKey];return this.namedCurve&&e.push(new P({idBlock:{tagClass:3,tagNumber:0},value:[new he({value:this.namedCurve})]})),this.publicKey&&e.push(new P({idBlock:{tagClass:3,tagNumber:1},value:[new Pe({valueHex:this.publicKey.toSchema().toBER(!1)})]})),new C({value:e})}toJSON(){if(!this.namedCurve||Vs.compareWithDefault(Ws,this.namedCurve))throw new Error('Not enough information for making JSON: absent "namedCurve" value');const e=Ai.find(this.namedCurve),t={crv:e?e.name:this.namedCurve,d:Ae.ToBase64Url(this.privateKey.valueBlock.valueHexView)};if(this.publicKey){const n=this.publicKey.toJSON();t.x=n.x,t.y=n.y}return t}fromJSON(e){Me.assert("json",e,"crv","d");let t=0;const n=Ai.find(e.crv);n&&(this.namedCurve=n.id,t=n.size);const r=Ae.FromBase64Url(e.d);if(r.byteLength<t){const i=new ArrayBuffer(t),a=new Uint8Array(i),o=new Uint8Array(r);a.set(o,1),this.privateKey=new Q({valueHex:i})}else this.privateKey=new Q({valueHex:r.slice(0,t)});e.x&&e.y&&(this.publicKey=new ns({json:e}))}}Vs.CLASS_NAME="ECPrivateKey";const Su="prime",Au="exponent",ku="coefficient",NO=[Su,Au,ku];class qn extends G{constructor(e={}){super(),this.prime=d(e,Su,qn.defaultValues(Su)),this.exponent=d(e,Au,qn.defaultValues(Au)),this.coefficient=d(e,ku,qn.defaultValues(ku)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Su:return new U;case Au:return new U;case ku:return new U;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new U({name:t.prime||g}),new U({name:t.exponent||g}),new U({name:t.coefficient||g})]})}fromSchema(e){X(e,NO);const t=q(e,e,qn.schema({names:{prime:Su,exponent:Au,coefficient:ku}}));W.assertSchema(t,this.className),this.prime=t.result.prime.convertFromDER(),this.exponent=t.result.exponent.convertFromDER(),this.coefficient=t.result.coefficient.convertFromDER()}toSchema(){return new C({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}toJSON(){return{r:Ae.ToBase64Url(this.prime.valueBlock.valueHexView),d:Ae.ToBase64Url(this.exponent.valueBlock.valueHexView),t:Ae.ToBase64Url(this.coefficient.valueBlock.valueHexView)}}fromJSON(e){Me.assert("json",e,"r","d","r"),this.prime=new U({valueHex:Ae.FromBase64Url(e.r)}),this.exponent=new U({valueHex:Ae.FromBase64Url(e.d)}),this.coefficient=new U({valueHex:Ae.FromBase64Url(e.t)})}}qn.CLASS_NAME="OtherPrimeInfo";const Eu="version",Cu="modulus",Nu="publicExponent",Iu="privateExponent",_u="prime1",Bu="prime2",xu="exponent1",Tu="exponent2",Ru="coefficient",ea="otherPrimeInfos",IO=[Eu,Cu,Nu,Iu,_u,Bu,xu,Tu,Ru,ea];class Zt extends G{constructor(e={}){super(),this.version=d(e,Eu,Zt.defaultValues(Eu)),this.modulus=d(e,Cu,Zt.defaultValues(Cu)),this.publicExponent=d(e,Nu,Zt.defaultValues(Nu)),this.privateExponent=d(e,Iu,Zt.defaultValues(Iu)),this.prime1=d(e,_u,Zt.defaultValues(_u)),this.prime2=d(e,Bu,Zt.defaultValues(Bu)),this.exponent1=d(e,xu,Zt.defaultValues(xu)),this.exponent2=d(e,Tu,Zt.defaultValues(Tu)),this.coefficient=d(e,Ru,Zt.defaultValues(Ru)),ea in e&&(this.otherPrimeInfos=d(e,ea,Zt.defaultValues(ea))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Eu:return 0;case Cu:return new U;case Nu:return new U;case Iu:return new U;case _u:return new U;case Bu:return new U;case xu:return new U;case Tu:return new U;case Ru:return new U;case ea:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new U({name:t.version||g}),new U({name:t.modulus||g}),new U({name:t.publicExponent||g}),new U({name:t.privateExponent||g}),new U({name:t.prime1||g}),new U({name:t.prime2||g}),new U({name:t.exponent1||g}),new U({name:t.exponent2||g}),new U({name:t.coefficient||g}),new C({optional:!0,value:[new _e({name:t.otherPrimeInfosName||g,value:qn.schema(t.otherPrimeInfo||{})})]})]})}fromSchema(e){X(e,IO);const t=q(e,e,Zt.schema({names:{version:Eu,modulus:Cu,publicExponent:Nu,privateExponent:Iu,prime1:_u,prime2:Bu,exponent1:xu,exponent2:Tu,coefficient:Ru,otherPrimeInfo:{names:{blockName:ea}}}}));W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.modulus=t.result.modulus.convertFromDER(256),this.publicExponent=t.result.publicExponent,this.privateExponent=t.result.privateExponent.convertFromDER(256),this.prime1=t.result.prime1.convertFromDER(128),this.prime2=t.result.prime2.convertFromDER(128),this.exponent1=t.result.exponent1.convertFromDER(128),this.exponent2=t.result.exponent2.convertFromDER(128),this.coefficient=t.result.coefficient.convertFromDER(128),ea in t.result&&(this.otherPrimeInfos=Array.from(t.result.otherPrimeInfos,n=>new qn({schema:n})))}toSchema(){const e=[];return e.push(new U({value:this.version})),e.push(this.modulus.convertToDER()),e.push(this.publicExponent),e.push(this.privateExponent.convertToDER()),e.push(this.prime1.convertToDER()),e.push(this.prime2.convertToDER()),e.push(this.exponent1.convertToDER()),e.push(this.exponent2.convertToDER()),e.push(this.coefficient.convertToDER()),this.otherPrimeInfos&&e.push(new C({value:Array.from(this.otherPrimeInfos,t=>t.toSchema())})),new C({value:e})}toJSON(){const e={n:Ae.ToBase64Url(this.modulus.valueBlock.valueHexView),e:Ae.ToBase64Url(this.publicExponent.valueBlock.valueHexView),d:Ae.ToBase64Url(this.privateExponent.valueBlock.valueHexView),p:Ae.ToBase64Url(this.prime1.valueBlock.valueHexView),q:Ae.ToBase64Url(this.prime2.valueBlock.valueHexView),dp:Ae.ToBase64Url(this.exponent1.valueBlock.valueHexView),dq:Ae.ToBase64Url(this.exponent2.valueBlock.valueHexView),qi:Ae.ToBase64Url(this.coefficient.valueBlock.valueHexView)};return this.otherPrimeInfos&&(e.oth=Array.from(this.otherPrimeInfos,t=>t.toJSON())),e}fromJSON(e){Me.assert("json",e,"n","e","d","p","q","dp","dq","qi"),this.modulus=new U({valueHex:Ae.FromBase64Url(e.n)}),this.publicExponent=new U({valueHex:Ae.FromBase64Url(e.e)}),this.privateExponent=new U({valueHex:Ae.FromBase64Url(e.d)}),this.prime1=new U({valueHex:Ae.FromBase64Url(e.p)}),this.prime2=new U({valueHex:Ae.FromBase64Url(e.q)}),this.exponent1=new U({valueHex:Ae.FromBase64Url(e.dp)}),this.exponent2=new U({valueHex:Ae.FromBase64Url(e.dq)}),this.coefficient=new U({valueHex:Ae.FromBase64Url(e.qi)}),e.oth&&(this.otherPrimeInfos=Array.from(e.oth,t=>new qn({json:t})))}}Zt.CLASS_NAME="RSAPrivateKey";const Ou="version",Vu="privateKeyAlgorithm",Pu="privateKey",ta="attributes",td="parsedKey",_O=[Ou,Vu,Pu,ta];class Ns extends G{constructor(e={}){super(),this.version=d(e,Ou,Ns.defaultValues(Ou)),this.privateKeyAlgorithm=d(e,Vu,Ns.defaultValues(Vu)),this.privateKey=d(e,Pu,Ns.defaultValues(Pu)),ta in e&&(this.attributes=d(e,ta,Ns.defaultValues(ta))),td in e&&(this.parsedKey=d(e,td,Ns.defaultValues(td))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ou:return 0;case Vu:return new H;case Pu:return new Q;case ta:return[];case td:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new U({name:t.version||g}),H.schema(t.privateKeyAlgorithm||{}),new Q({name:t.privateKey||g}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new _e({name:t.attributes||g,value:st.schema()})]})]})}fromSchema(e){X(e,_O);const t=q(e,e,Ns.schema({names:{version:Ou,privateKeyAlgorithm:{names:{blockName:Vu}},privateKey:Pu,attributes:ta}}));switch(W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.privateKeyAlgorithm=new H({schema:t.result.privateKeyAlgorithm}),this.privateKey=t.result.privateKey,ta in t.result&&(this.attributes=Array.from(t.result.attributes,n=>new st({schema:n}))),this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":{const n=At(this.privateKey.valueBlock.valueHexView);n.offset!==-1&&(this.parsedKey=new Zt({schema:n.result}))}break;case"1.2.840.10045.2.1":if("algorithmParams"in this.privateKeyAlgorithm&&this.privateKeyAlgorithm.algorithmParams instanceof he){const n=At(this.privateKey.valueBlock.valueHexView);n.offset!==-1&&(this.parsedKey=new Vs({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:n.result}))}break}}toSchema(){const e=[new U({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];return this.attributes&&e.push(new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,t=>t.toSchema())})),new C({value:e})}toJSON(){if(!this.parsedKey){const n={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};return this.attributes&&(n.attributes=Array.from(this.attributes,r=>r.toJSON())),n}const e={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA";break}const t=this.parsedKey.toJSON();return Object.assign(e,t),e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new Vs({json:e}),this.privateKeyAlgorithm=new H({algorithmId:"1.2.840.10045.2.1",algorithmParams:new he({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new Zt({json:e}),this.privateKeyAlgorithm=new H({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new pt});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.privateKey=new Q({valueHex:this.parsedKey.toSchema().toBER(!1)})}}}Ns.CLASS_NAME="PrivateKeyInfo";const Fo="contentType",jo="contentEncryptionAlgorithm",sa="encryptedContent",BO=[Fo,jo,sa],Tb=1024;class vt extends G{constructor(e={}){if(super(),this.contentType=d(e,Fo,vt.defaultValues(Fo)),this.contentEncryptionAlgorithm=d(e,jo,vt.defaultValues(jo)),sa in e&&e.encryptedContent&&(this.encryptedContent=e.encryptedContent,this.encryptedContent.idBlock.tagClass===1&&this.encryptedContent.idBlock.tagNumber===4&&this.encryptedContent.idBlock.isConstructed===!1&&!e.disableSplit)){const t=new Q({idBlock:{isConstructed:!0},isConstructed:!0});let n=0;const r=this.encryptedContent.valueBlock.valueHexView.slice().buffer;let i=r.byteLength;for(;i>0;){const a=new Uint8Array(r,n,n+Tb>r.byteLength?r.byteLength-n:Tb),o=new ArrayBuffer(a.length),l=new Uint8Array(o);for(let c=0;c<l.length;c++)l[c]=a[c];t.valueBlock.value.push(new Q({valueHex:o})),i-=a.length,n+=a.length}this.encryptedContent=t}e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Fo:return g;case jo:return new H;case sa:return new Q;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Fo:return t===g;case jo:return t.algorithmId===g&&!("algorithmParams"in t);case sa:return t.isEqual(vt.defaultValues(sa));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new he({name:t.contentType||g}),H.schema(t.contentEncryptionAlgorithm||{}),new lt({value:[new P({name:t.encryptedContent||g,idBlock:{tagClass:3,tagNumber:0},value:[new _e({value:new Q})]}),new ke({name:t.encryptedContent||g,idBlock:{tagClass:3,tagNumber:0}})]})]})}fromSchema(e){X(e,BO);const t=q(e,e,vt.schema({names:{contentType:Fo,contentEncryptionAlgorithm:{names:{blockName:jo}},encryptedContent:sa}}));W.assertSchema(t,this.className),this.contentType=t.result.contentType.valueBlock.toString(),this.contentEncryptionAlgorithm=new H({schema:t.result.contentEncryptionAlgorithm}),sa in t.result&&(this.encryptedContent=t.result.encryptedContent,this.encryptedContent.idBlock.tagClass=1,this.encryptedContent.idBlock.tagNumber=4)}toSchema(){const e={isIndefiniteForm:!1},t=[];if(t.push(new he({value:this.contentType})),t.push(this.contentEncryptionAlgorithm.toSchema()),this.encryptedContent){e.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;const n=this.encryptedContent;n.idBlock.tagClass=3,n.idBlock.tagNumber=0,n.lenBlock.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed,t.push(n)}return new C({lenBlock:e,value:t})}toJSON(){const e={contentType:this.contentType,contentEncryptionAlgorithm:this.contentEncryptionAlgorithm.toJSON()};return this.encryptedContent&&(e.encryptedContent=this.encryptedContent.toJSON()),e}getEncryptedContent(){if(!this.encryptedContent)throw new Error("Parameter 'encryptedContent' is undefined");return Q.prototype.getValue.call(this.encryptedContent)}}vt.CLASS_NAME="EncryptedContentInfo";const Tr="hashAlgorithm",Rr="maskGenAlgorithm",Or="saltLength",Vr="trailerField",xO=[Tr,Rr,Or,Vr];class Dt extends G{constructor(e={}){super(),this.hashAlgorithm=d(e,Tr,Dt.defaultValues(Tr)),this.maskGenAlgorithm=d(e,Rr,Dt.defaultValues(Rr)),this.saltLength=d(e,Or,Dt.defaultValues(Or)),this.trailerField=d(e,Vr,Dt.defaultValues(Vr)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Tr:return new H({algorithmId:"1.3.14.3.2.26",algorithmParams:new pt});case Rr:return new H({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new H({algorithmId:"1.3.14.3.2.26",algorithmParams:new pt}).toSchema()});case Or:return 20;case Vr:return 1;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new P({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[H.schema(t.hashAlgorithm||{})]}),new P({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[H.schema(t.maskGenAlgorithm||{})]}),new P({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[new U({name:t.saltLength||g})]}),new P({idBlock:{tagClass:3,tagNumber:3},optional:!0,value:[new U({name:t.trailerField||g})]})]})}fromSchema(e){X(e,xO);const t=q(e,e,Dt.schema({names:{hashAlgorithm:{names:{blockName:Tr}},maskGenAlgorithm:{names:{blockName:Rr}},saltLength:Or,trailerField:Vr}}));W.assertSchema(t,this.className),Tr in t.result&&(this.hashAlgorithm=new H({schema:t.result.hashAlgorithm})),Rr in t.result&&(this.maskGenAlgorithm=new H({schema:t.result.maskGenAlgorithm})),Or in t.result&&(this.saltLength=t.result.saltLength.valueBlock.valueDec),Vr in t.result&&(this.trailerField=t.result.trailerField.valueBlock.valueDec)}toSchema(){const e=[];return this.hashAlgorithm.isEqual(Dt.defaultValues(Tr))||e.push(new P({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(Dt.defaultValues(Rr))||e.push(new P({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.saltLength!==Dt.defaultValues(Or)&&e.push(new P({idBlock:{tagClass:3,tagNumber:2},value:[new U({value:this.saltLength})]})),this.trailerField!==Dt.defaultValues(Vr)&&e.push(new P({idBlock:{tagClass:3,tagNumber:3},value:[new U({value:this.trailerField})]})),new C({value:e})}toJSON(){const e={};return this.hashAlgorithm.isEqual(Dt.defaultValues(Tr))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(Dt.defaultValues(Rr))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.saltLength!==Dt.defaultValues(Or)&&(e.saltLength=this.saltLength),this.trailerField!==Dt.defaultValues(Vr)&&(e.trailerField=this.trailerField),e}}Dt.CLASS_NAME="RSASSAPSSParams";const Ko="salt",Lu="iterationCount",qs="keyLength",Pn="prf",TO=[Ko,Lu,qs,Pn];class Yt extends G{constructor(e={}){super(),this.salt=d(e,Ko,Yt.defaultValues(Ko)),this.iterationCount=d(e,Lu,Yt.defaultValues(Lu)),qs in e&&(this.keyLength=d(e,qs,Yt.defaultValues(qs))),Pn in e&&(this.prf=d(e,Pn,Yt.defaultValues(Pn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ko:return{};case Lu:return-1;case qs:return 0;case Pn:return new H({algorithmId:"1.3.14.3.2.26",algorithmParams:new pt});default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new lt({value:[new Q({name:t.saltPrimitive||g}),H.schema(t.saltConstructed||{})]}),new U({name:t.iterationCount||g}),new U({name:t.keyLength||g,optional:!0}),H.schema(t.prf||{names:{optional:!0}})]})}fromSchema(e){X(e,TO);const t=q(e,e,Yt.schema({names:{saltPrimitive:Ko,saltConstructed:{names:{blockName:Ko}},iterationCount:Lu,keyLength:qs,prf:{names:{blockName:Pn,optional:!0}}}}));W.assertSchema(t,this.className),this.salt=t.result.salt,this.iterationCount=t.result.iterationCount.valueBlock.valueDec,qs in t.result&&(this.keyLength=t.result.keyLength.valueBlock.valueDec),Pn in t.result&&(this.prf=new H({schema:t.result.prf}))}toSchema(){const e=[];return e.push(this.salt),e.push(new U({value:this.iterationCount})),qs in this&&Yt.defaultValues(qs)!==this.keyLength&&e.push(new U({value:this.keyLength})),this.prf&&Yt.defaultValues(Pn).isEqual(this.prf)===!1&&e.push(this.prf.toSchema()),new C({value:e})}toJSON(){const e={salt:this.salt.toJSON(),iterationCount:this.iterationCount};return qs in this&&Yt.defaultValues(qs)!==this.keyLength&&(e.keyLength=this.keyLength),this.prf&&Yt.defaultValues(Pn).isEqual(this.prf)===!1&&(e.prf=this.prf.toJSON()),e}}Yt.CLASS_NAME="PBKDF2Params";const Du="keyDerivationFunc",Uu="encryptionScheme",RO=[Du,Uu];class ao extends G{constructor(e={}){super(),this.keyDerivationFunc=d(e,Du,ao.defaultValues(Du)),this.encryptionScheme=d(e,Uu,ao.defaultValues(Uu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Du:return new H;case Uu:return new H;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[H.schema(t.keyDerivationFunc||{}),H.schema(t.encryptionScheme||{})]})}fromSchema(e){X(e,RO);const t=q(e,e,ao.schema({names:{keyDerivationFunc:{names:{blockName:Du}},encryptionScheme:{names:{blockName:Uu}}}}));W.assertSchema(t,this.className),this.keyDerivationFunc=new H({schema:t.result.keyDerivationFunc}),this.encryptionScheme=new H({schema:t.result.encryptionScheme})}toSchema(){return new C({value:[this.keyDerivationFunc.toSchema(),this.encryptionScheme.toSchema()]})}toJSON(){return{keyDerivationFunc:this.keyDerivationFunc.toJSON(),encryptionScheme:this.encryptionScheme.toJSON()}}}ao.CLASS_NAME="PBES2Params";class OO{constructor(e){this.crypto=e.crypto,this.subtle="webkitSubtle"in e.crypto?e.crypto.webkitSubtle:e.crypto.subtle,this.name=d(e,"name",g)}async encrypt(...e){return this.subtle.encrypt(...e)}async decrypt(...e){return this.subtle.decrypt(...e)}sign(...e){return this.subtle.sign(...e)}async verify(...e){return this.subtle.verify(...e)}async digest(...e){return this.subtle.digest(...e)}async generateKey(...e){return this.subtle.generateKey(...e)}async deriveKey(...e){return this.subtle.deriveKey(...e)}async deriveBits(...e){return this.subtle.deriveBits(...e)}async wrapKey(...e){return this.subtle.wrapKey(...e)}async unwrapKey(...e){return this.subtle.unwrapKey(...e)}exportKey(...e){return this.subtle.exportKey(...e)}importKey(...e){return this.subtle.importKey(...e)}getRandomValues(e){return this.crypto.getRandomValues(e)}}async function Rb(s,e,t,n,r,i){let a,o;const l=[];switch(e.toUpperCase()){case"SHA-1":a=20,o=64;break;case"SHA-256":a=32,o=64;break;case"SHA-384":a=48,o=128;break;case"SHA-512":a=64,o=128;break;default:throw new Error("Unsupported hashing algorithm")}const c=new Uint8Array(n),u=new ArrayBuffer(n.byteLength*2+2),f=new Uint8Array(u);for(let fe=0;fe<c.length;fe++)f[fe*2]=0,f[fe*2+1]=c[fe];f[f.length-2]=0,f[f.length-1]=0,n=u.slice(0);const h=new ArrayBuffer(o),m=new Uint8Array(h);for(let fe=0;fe<h.byteLength;fe++)m[fe]=3;const S=r.byteLength,A=o*Math.ceil(S/o),k=new ArrayBuffer(A),T=new Uint8Array(k),x=new Uint8Array(r);for(let fe=0;fe<A;fe++)T[fe]=x[fe%S];const y=n.byteLength,p=o*Math.ceil(y/o),E=new ArrayBuffer(p),N=new Uint8Array(E),L=new Uint8Array(n);for(let fe=0;fe<p;fe++)N[fe]=L[fe%y];const M=k.byteLength+E.byteLength;let F=new ArrayBuffer(M),se=new Uint8Array(F);se.set(T),se.set(N,T.length);const ce=Math.ceil((t>>3)/a);let ee=Promise.resolve(F);for(let fe=0;fe<=ce;fe++){ee=ee.then(Ee=>{const ye=new ArrayBuffer(h.byteLength+Ee.byteLength),ie=new Uint8Array(ye);return ie.set(m),ie.set(se,m.length),ye});for(let Ee=0;Ee<i;Ee++)ee=ee.then(ye=>s.digest({name:e},new Uint8Array(ye)));ee=ee.then(Ee=>{const ye=new ArrayBuffer(o),ie=new Uint8Array(ye);for(let de=0;de<ye.byteLength;de++)ie[de]=Ee[de%Ee.byteLength];const te=Math.ceil(S/o)+Math.ceil(y/o),ae=[];let Re=0,oe=o;for(let de=0;de<te;de++){const Y=Array.from(new Uint8Array(F.slice(Re,Re+oe)));Re+=o,Re+o>F.byteLength&&(oe=F.byteLength-Re);let Se=511;for(let Be=ye.byteLength-1;Be>=0;Be--)Se>>=8,Se+=ie[Be]+Y[Be],Y[Be]=Se&255;ae.push(...Y)}return F=new ArrayBuffer(ae.length),se=new Uint8Array(F),se.set(ae),l.push(...new Uint8Array(Ee)),F})}return ee=ee.then(()=>{const fe=new ArrayBuffer(t>>3);return new Uint8Array(fe).set(new Uint8Array(l).slice(0,t>>3)),fe}),ee}function s0(s){const e=typeof s=="string"?{name:s}:s;return"hash"in e?{...e,hash:s0(e.hash)}:e}class Bm extends OO{async importKey(e,t,n,r,i){var a,o,l,c,u,f;let h={};const m=s0(n);switch(e.toLowerCase()){case"raw":return this.subtle.importKey("raw",t,n,r,i);case"spki":{const S=At(be.toArrayBuffer(t));W.assert(S,"keyData");const A=new is;try{A.fromSchema(S.result)}catch{throw new Ye("Incorrect keyData")}switch(m.name.toUpperCase()){case"RSA-PSS":{if(!m.hash)throw new Me("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(m.hash.name.toUpperCase()){case"SHA-1":h.alg="PS1";break;case"SHA-256":h.alg="PS256";break;case"SHA-384":h.alg="PS384";break;case"SHA-512":h.alg="PS512";break;default:throw new Error(`Incorrect hash algorithm: ${m.hash.name.toUpperCase()}`)}}case"RSASSA-PKCS1-V1_5":{if(i=["verify"],h.kty="RSA",h.ext=r,h.key_ops=i,A.algorithm.algorithmId!=="1.2.840.113549.1.1.1")throw new Error(`Incorrect public key algorithm: ${A.algorithm.algorithmId}`);if(!h.alg){if(!m.hash)throw new Me("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(m.hash.name.toUpperCase()){case"SHA-1":h.alg="RS1";break;case"SHA-256":h.alg="RS256";break;case"SHA-384":h.alg="RS384";break;case"SHA-512":h.alg="RS512";break;default:throw new Error(`Incorrect hash algorithm: ${m.hash.name.toUpperCase()}`)}}const k=A.toJSON();Object.assign(h,k)}break;case"ECDSA":i=["verify"];case"ECDH":{if(h={kty:"EC",ext:r,key_ops:i},A.algorithm.algorithmId!=="1.2.840.10045.2.1")throw new Error(`Incorrect public key algorithm: ${A.algorithm.algorithmId}`);const k=A.toJSON();Object.assign(h,k)}break;case"RSA-OAEP":{if(h.kty="RSA",h.ext=r,h.key_ops=i,this.name.toLowerCase()==="safari")h.alg="RSA-OAEP";else{if(!m.hash)throw new Me("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(m.hash.name.toUpperCase()){case"SHA-1":h.alg="RSA-OAEP";break;case"SHA-256":h.alg="RSA-OAEP-256";break;case"SHA-384":h.alg="RSA-OAEP-384";break;case"SHA-512":h.alg="RSA-OAEP-512";break;default:throw new Error(`Incorrect hash algorithm: ${m.hash.name.toUpperCase()}`)}}const k=A.toJSON();Object.assign(h,k)}break;case"RSAES-PKCS1-V1_5":{h.kty="RSA",h.ext=r,h.key_ops=i,h.alg="PS1";const k=A.toJSON();Object.assign(h,k)}break;default:throw new Error(`Incorrect algorithm name: ${m.name.toUpperCase()}`)}}break;case"pkcs8":{const S=new Ns,A=At(be.toArrayBuffer(t));W.assert(A,"keyData");try{S.fromSchema(A.result)}catch{throw new Error("Incorrect keyData")}if(!S.parsedKey)throw new Error("Incorrect keyData");switch(m.name.toUpperCase()){case"RSA-PSS":switch((a=m.hash)===null||a===void 0?void 0:a.name.toUpperCase()){case"SHA-1":h.alg="PS1";break;case"SHA-256":h.alg="PS256";break;case"SHA-384":h.alg="PS384";break;case"SHA-512":h.alg="PS512";break;default:throw new Error(`Incorrect hash algorithm: ${(o=m.hash)===null||o===void 0?void 0:o.name.toUpperCase()}`)}case"RSASSA-PKCS1-V1_5":{if(i=["sign"],h.kty="RSA",h.ext=r,h.key_ops=i,S.privateKeyAlgorithm.algorithmId!=="1.2.840.113549.1.1.1")throw new Error(`Incorrect private key algorithm: ${S.privateKeyAlgorithm.algorithmId}`);if(!("alg"in h))switch((l=m.hash)===null||l===void 0?void 0:l.name.toUpperCase()){case"SHA-1":h.alg="RS1";break;case"SHA-256":h.alg="RS256";break;case"SHA-384":h.alg="RS384";break;case"SHA-512":h.alg="RS512";break;default:throw new Error(`Incorrect hash algorithm: ${(c=m.hash)===null||c===void 0?void 0:c.name.toUpperCase()}`)}const k=S.toJSON();Object.assign(h,k)}break;case"ECDSA":i=["sign"];case"ECDH":{if(h={kty:"EC",ext:r,key_ops:i},S.privateKeyAlgorithm.algorithmId!=="1.2.840.10045.2.1")throw new Error(`Incorrect algorithm: ${S.privateKeyAlgorithm.algorithmId}`);const k=S.toJSON();Object.assign(h,k)}break;case"RSA-OAEP":{if(h.kty="RSA",h.ext=r,h.key_ops=i,this.name.toLowerCase()==="safari")h.alg="RSA-OAEP";else switch((u=m.hash)===null||u===void 0?void 0:u.name.toUpperCase()){case"SHA-1":h.alg="RSA-OAEP";break;case"SHA-256":h.alg="RSA-OAEP-256";break;case"SHA-384":h.alg="RSA-OAEP-384";break;case"SHA-512":h.alg="RSA-OAEP-512";break;default:throw new Error(`Incorrect hash algorithm: ${(f=m.hash)===null||f===void 0?void 0:f.name.toUpperCase()}`)}const k=S.toJSON();Object.assign(h,k)}break;case"RSAES-PKCS1-V1_5":{i=["decrypt"],h.kty="RSA",h.ext=r,h.key_ops=i,h.alg="PS1";const k=S.toJSON();Object.assign(h,k)}break;default:throw new Error(`Incorrect algorithm name: ${m.name.toUpperCase()}`)}}break;case"jwk":h=t;break;default:throw new Error(`Incorrect format: ${e}`)}if(this.name.toLowerCase()==="safari")try{return this.subtle.importKey("jwk",Ic(JSON.stringify(h)),n,r,i)}catch{return this.subtle.importKey("jwk",h,n,r,i)}return this.subtle.importKey("jwk",h,n,r,i)}async exportKey(e,t){let n=await this.subtle.exportKey("jwk",t);switch(this.name.toLowerCase()==="safari"&&n instanceof ArrayBuffer&&(n=JSON.parse(Nm(n))),e.toLowerCase()){case"raw":return this.subtle.exportKey("raw",t);case"spki":{const r=new is;try{r.fromJSON(n)}catch{throw new Error("Incorrect key data")}return r.toSchema().toBER(!1)}case"pkcs8":{const r=new Ns;try{r.fromJSON(n)}catch{throw new Error("Incorrect key data")}return r.toSchema().toBER(!1)}case"jwk":return n;default:throw new Error(`Incorrect format: ${e}`)}}async convert(e,t,n,r,i,a){if(e.toLowerCase()===t.toLowerCase())return n;const o=await this.importKey(e,n,r,i,a);return this.exportKey(t,o)}getAlgorithmByOID(e,t=!1,n){switch(e){case"1.2.840.113549.1.1.1":return{name:"RSAES-PKCS1-v1_5"};case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"}}if(t)throw new Error(`Unsupported algorithm identifier ${n?`for ${n} `:g}: ${e}`);return{}}getOIDByAlgorithm(e,t=!1,n){let r=g;switch(e.name.toUpperCase()){case"RSAES-PKCS1-V1_5":r="1.2.840.113549.1.1.1";break;case"RSASSA-PKCS1-V1_5":switch(e.hash.name.toUpperCase()){case"SHA-1":r="1.2.840.113549.1.1.5";break;case"SHA-256":r="1.2.840.113549.1.1.11";break;case"SHA-384":r="1.2.840.113549.1.1.12";break;case"SHA-512":r="1.2.840.113549.1.1.13";break}break;case"RSA-PSS":r="1.2.840.113549.1.1.10";break;case"RSA-OAEP":r="1.2.840.113549.1.1.7";break;case"ECDSA":switch(e.hash.name.toUpperCase()){case"SHA-1":r="1.2.840.10045.4.1";break;case"SHA-256":r="1.2.840.10045.4.3.2";break;case"SHA-384":r="1.2.840.10045.4.3.3";break;case"SHA-512":r="1.2.840.10045.4.3.4";break}break;case"ECDH":switch(e.kdf.toUpperCase()){case"SHA-1":r="1.3.133.16.840.63.0.2";break;case"SHA-256":r="1.3.132.1.11.1";break;case"SHA-384":r="1.3.132.1.11.2";break;case"SHA-512":r="1.3.132.1.11.3";break}break;case"AES-CTR":break;case"AES-CBC":switch(e.length){case 128:r="2.16.840.1.101.3.4.1.2";break;case 192:r="2.16.840.1.101.3.4.1.22";break;case 256:r="2.16.840.1.101.3.4.1.42";break}break;case"AES-CMAC":break;case"AES-GCM":switch(e.length){case 128:r="2.16.840.1.101.3.4.1.6";break;case 192:r="2.16.840.1.101.3.4.1.26";break;case 256:r="2.16.840.1.101.3.4.1.46";break}break;case"AES-CFB":switch(e.length){case 128:r="2.16.840.1.101.3.4.1.4";break;case 192:r="2.16.840.1.101.3.4.1.24";break;case 256:r="2.16.840.1.101.3.4.1.44";break}break;case"AES-KW":switch(e.length){case 128:r="2.16.840.1.101.3.4.1.5";break;case 192:r="2.16.840.1.101.3.4.1.25";break;case 256:r="2.16.840.1.101.3.4.1.45";break}break;case"HMAC":switch(e.hash.name.toUpperCase()){case"SHA-1":r="1.2.840.113549.2.7";break;case"SHA-256":r="1.2.840.113549.2.9";break;case"SHA-384":r="1.2.840.113549.2.10";break;case"SHA-512":r="1.2.840.113549.2.11";break}break;case"DH":r="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":r="1.3.14.3.2.26";break;case"SHA-256":r="2.16.840.1.101.3.4.2.1";break;case"SHA-384":r="2.16.840.1.101.3.4.2.2";break;case"SHA-512":r="2.16.840.1.101.3.4.2.3";break;case"CONCAT":break;case"HKDF":break;case"PBKDF2":r="1.2.840.113549.1.5.12";break;case"P-256":r="1.2.840.10045.3.1.7";break;case"P-384":r="1.3.132.0.34";break;case"P-521":r="1.3.132.0.35";break}if(!r&&t)throw new Error(`Unsupported algorithm ${n?`for ${n} `:g}: ${e.name}`);return r}getAlgorithmParameters(e,t){let n={algorithm:{},usages:[]};switch(e.toUpperCase()){case"RSAES-PKCS1-V1_5":case"RSASSA-PKCS1-V1_5":switch(t.toLowerCase()){case"generatekey":n={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":n={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(t.toLowerCase()){case"sign":case"verify":n={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":n={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":n={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(t.toLowerCase()){case"encrypt":case"decrypt":n={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":n={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":n={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;case"exportkey":default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(t.toLowerCase()){case"generatekey":n={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":n={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":n={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(t.toLowerCase()){case"exportkey":case"importkey":case"generatekey":n={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":n={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":n={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":n={algorithm:{name:"AES-CBC",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":n={algorithm:{name:"AES-GCM",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":n={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(t.toLowerCase()){case"sign":case"verify":n={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":switch(t.toLowerCase()){case"derivekey":n={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"HKDF"},usages:[]}}break;case"PBKDF2":switch(t.toLowerCase()){case"derivekey":n={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e4},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"PBKDF2"},usages:[]}}break}return n}getHashAlgorithm(e){let t=g;switch(e.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":t="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":t="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":t="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":t="SHA-512";break;case"1.2.840.113549.1.1.10":try{const n=new Dt({schema:e.algorithmParams});if(n.hashAlgorithm){const r=this.getAlgorithmByOID(n.hashAlgorithm.algorithmId);if("name"in r)t=r.name;else return g}else t="SHA-1"}catch{}break}return t}async encryptEncryptedContentInfo(e){Me.assert(e,"password","contentEncryptionAlgorithm","hmacHashAlgorithm","iterationCount","contentToEncrypt","contentToEncrypt","contentType");const t=this.getOIDByAlgorithm(e.contentEncryptionAlgorithm,!0,"contentEncryptionAlgorithm"),n=this.getOIDByAlgorithm({name:"PBKDF2"},!0,"PBKDF2"),r=this.getOIDByAlgorithm({name:"HMAC",hash:{name:e.hmacHashAlgorithm}},!0,"hmacHashAlgorithm"),i=new ArrayBuffer(16),a=new Uint8Array(i);this.getRandomValues(a);const o=new ArrayBuffer(64),l=new Uint8Array(o);this.getRandomValues(l);const c=new Uint8Array(e.contentToEncrypt),u=new Yt({salt:new Q({valueHex:o}),iterationCount:e.iterationCount,prf:new H({algorithmId:r,algorithmParams:new pt})}),f=new Uint8Array(e.password),h=await this.importKey("raw",f,"PBKDF2",!1,["deriveKey"]),m=await this.deriveKey({name:"PBKDF2",hash:{name:e.hmacHashAlgorithm},salt:l,iterations:e.iterationCount},h,e.contentEncryptionAlgorithm,!1,["encrypt"]),S=await this.encrypt({name:e.contentEncryptionAlgorithm.name,iv:a},m,c),A=new ao({keyDerivationFunc:new H({algorithmId:n,algorithmParams:u.toSchema()}),encryptionScheme:new H({algorithmId:t,algorithmParams:new Q({valueHex:i})})});return new vt({contentType:e.contentType,contentEncryptionAlgorithm:new H({algorithmId:"1.2.840.113549.1.5.13",algorithmParams:A.toSchema()}),encryptedContent:new Q({valueHex:S})})}async decryptEncryptedContentInfo(e){if(Me.assert(e,"password","encryptedContentInfo"),e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId!=="1.2.840.113549.1.5.13")throw new Error(`Unknown "contentEncryptionAlgorithm": ${e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId}`);let t;try{t=new ao({schema:e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams})}catch{throw new Error('Incorrectly encoded "pbes2Parameters"')}let n;try{n=new Yt({schema:t.keyDerivationFunc.algorithmParams})}catch{throw new Error('Incorrectly encoded "pbkdf2Params"')}const r=this.getAlgorithmByOID(t.encryptionScheme.algorithmId,!0),i=t.encryptionScheme.algorithmParams.valueBlock.valueHex,a=new Uint8Array(i),o=n.salt.valueBlock.valueHex,l=new Uint8Array(o),c=n.iterationCount;let u="SHA-1";n.prf&&(u=this.getAlgorithmByOID(n.prf.algorithmId,!0).hash.name);const f=await this.importKey("raw",e.password,"PBKDF2",!1,["deriveKey"]),h=await this.deriveKey({name:"PBKDF2",hash:{name:u},salt:l,iterations:c},f,r,!1,["decrypt"]),m=e.encryptedContentInfo.getEncryptedContent();return this.decrypt({name:r.name,iv:a},h,m)}async stampDataWithPassword(e){if(!(e instanceof Object))throw new Error('Parameters must have type "Object"');Me.assert(e,"password","hashAlgorithm","iterationCount","salt","contentToStamp");let t;switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error(`Incorrect "parameters.hashAlgorithm" parameter: ${e.hashAlgorithm}`)}const n={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}},r=await Rb(this,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount),i=await this.importKey("raw",new Uint8Array(r),n,!1,["sign"]);return this.sign(n,i,new Uint8Array(e.contentToStamp))}async verifyDataStampedWithPassword(e){Me.assert(e,"password","hashAlgorithm","salt","iterationCount","contentToVerify","signatureToVerify");let t=0;switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error(`Incorrect "parameters.hashAlgorithm" parameter: ${e.hashAlgorithm}`)}const n={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}},r=await Rb(this,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount),i=await this.importKey("raw",new Uint8Array(r),n,!1,["verify"]);return this.verify(n,i,new Uint8Array(e.signatureToVerify),new Uint8Array(e.contentToVerify))}async getSignatureParameters(e,t="SHA-1"){this.getOIDByAlgorithm({name:t},!0,"hashAlgorithm");const n=new H,r=this.getAlgorithmParameters(e.algorithm.name,"sign");if(!Object.keys(r.algorithm).length)throw new Error("Parameter 'algorithm' is empty");const i=r.algorithm;switch(i.hash.name=t,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":n.algorithmId=this.getOIDByAlgorithm(i,!0);break;case"RSA-PSS":{switch(t.toUpperCase()){case"SHA-256":i.saltLength=32;break;case"SHA-384":i.saltLength=48;break;case"SHA-512":i.saltLength=64;break}const a={};if(t.toUpperCase()!=="SHA-1"){const l=this.getOIDByAlgorithm({name:t},!0,"hashAlgorithm");a.hashAlgorithm=new H({algorithmId:l,algorithmParams:new pt}),a.maskGenAlgorithm=new H({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:a.hashAlgorithm.toSchema()})}i.saltLength!==20&&(a.saltLength=i.saltLength);const o=new Dt(a);n.algorithmId="1.2.840.113549.1.1.10",n.algorithmParams=o.toSchema()}break;default:throw new Error(`Unsupported signature algorithm: ${e.algorithm.name}`)}return{signatureAlgorithm:n,parameters:r}}async signWithPrivateKey(e,t,n){const r=await this.sign(n.algorithm,t,e);return n.algorithm.name==="ECDSA"?PO(r):r}fillPublicKeyParameters(e,t){const n={},r=this.getHashAlgorithm(t);if(r===g)throw new Error(`Unsupported signature algorithm: ${t.algorithmId}`);let i;t.algorithmId==="1.2.840.113549.1.1.10"?i=t.algorithmId:i=e.algorithm.algorithmId;const a=this.getAlgorithmByOID(i,!0);if(n.algorithm=this.getAlgorithmParameters(a.name,"importKey"),"hash"in n.algorithm.algorithm&&(n.algorithm.algorithm.hash.name=r),a.name==="ECDSA"){const o=e.algorithm;if(!o.algorithmParams)throw new Error("Algorithm parameters for ECDSA public key are missed");const l=o.algorithmParams;if("idBlock"in o.algorithmParams&&!(l.idBlock.tagClass===1&&l.idBlock.tagNumber===6))throw new Error("Incorrect type for ECDSA public key parameters");const c=this.getAlgorithmByOID(l.valueBlock.toString(),!0);n.algorithm.algorithm.namedCurve=c.name}return n}async getPublicKey(e,t,n){n||(n=this.fillPublicKeyParameters(e,t));const r=e.toSchema().toBER(!1);return this.importKey("spki",r,n.algorithm.algorithm,!0,n.algorithm.usages)}async verifyWithPublicKey(e,t,n,r,i){let a;if(i){const c={};let u;r.algorithmId==="1.2.840.113549.1.1.10"?u=r.algorithmId:u=n.algorithm.algorithmId;const f=this.getAlgorithmByOID(u,!0);if(c.algorithm=this.getAlgorithmParameters(f.name,"importKey"),"hash"in c.algorithm.algorithm&&(c.algorithm.algorithm.hash.name=i),f.name==="ECDSA"){let h=!1;if("algorithmParams"in n.algorithm&&"idBlock"in n.algorithm.algorithmParams&&n.algorithm.algorithmParams.idBlock.tagClass===1&&n.algorithm.algorithmParams.idBlock.tagNumber===6&&(h=!0),h===!1)throw new Error("Incorrect type for ECDSA public key parameters");const m=this.getAlgorithmByOID(n.algorithm.algorithmParams.valueBlock.toString(),!0);c.algorithm.algorithm.namedCurve=m.name}a=await this.getPublicKey(n,null,c)}else{if(i=this.getHashAlgorithm(r),!i)throw new Error(`Unsupported signature algorithm: ${r.algorithmId}`);a=await this.getPublicKey(n,r)}const o=this.getAlgorithmParameters(a.algorithm.name,"verify");"hash"in o.algorithm&&(o.algorithm.hash.name=i);let l=t.valueBlock.valueHexView;if(a.algorithm.name==="ECDSA"){const c=Ai.find(a.algorithm.namedCurve);if(!c)throw new Error("Unsupported named curve in use");const u=At(l);W.assert(u,"Signature value"),l=LO(u.result,c.size)}if(a.algorithm.name==="RSA-PSS"){const c=new Dt({schema:r.algorithmParams});"saltLength"in c?o.algorithm.saltLength=c.saltLength:o.algorithm.saltLength=20;let u="SHA-1";"hashAlgorithm"in c&&(u=this.getAlgorithmByOID(c.hashAlgorithm.algorithmId,!0).name),o.algorithm.hash.name=u}return this.verify(o.algorithm,a,l,e)}}let n0={name:"none",crypto:null};function Ob(s){return!!(s&&typeof s=="object"&&"crypto"in s)}function Vb(s,...e){let t=null;if(e.length<2)e.length?t=e[0]:t=typeof self<"u"&&self.crypto?new Bm({name:"browser",crypto:self.crypto}):null;else{const n=e[0],r=e[1];Ob(r)?t=r:Ob(n)?t=n:"subtle"in n&&"getRandomValues"in n&&(t=new Bm({crypto:n}))}if(typeof process<"u"&&"pid"in process&&typeof global<"u"&&typeof window>"u"){if(typeof global[process.pid]>"u")global[process.pid]={};else if(typeof global[process.pid]!="object")throw new Error(`Name global.${process.pid} already exists and it is not an object`);if(typeof global[process.pid].pkijs>"u")global[process.pid].pkijs={};else if(typeof global[process.pid].pkijs!="object")throw new Error(`Name global.${process.pid}.pkijs already exists and it is not an object`);global[process.pid].pkijs.engine={name:s,crypto:t}}else n0={name:s,crypto:t}}function VO(){if(typeof process<"u"&&"pid"in process&&typeof global<"u"&&typeof window>"u"){let s;try{s=global[process.pid].pkijs.engine}catch{throw new Error("Please call 'setEngine' before call to 'getEngine'")}return s}return n0}function Ie(s=!1){const e=VO();if(!e.crypto&&s)throw new Error("Unable to create WebCrypto object");return e.crypto}function PO(s){if(s.byteLength%2!==0)return _t;const e=s.byteLength/2,t=new ArrayBuffer(e);new Uint8Array(t).set(new Uint8Array(s,0,e));const r=new U({valueHex:t}),i=new ArrayBuffer(e);new Uint8Array(i).set(new Uint8Array(s,e,e));const o=new U({valueHex:i});return new C({value:[r.convertToDER(),o.convertToDER()]}).toBER(!1)}function LO(s,e){if(!(s instanceof C&&s.valueBlock.value.length===2&&s.valueBlock.value[0]instanceof U&&s.valueBlock.value[1]instanceof U))return _t;const t=s.valueBlock.value[0].convertFromDER().valueBlock.valueHexView,n=s.valueBlock.value[1].convertFromDER().valueBlock.valueHexView,r=new Uint8Array(e*2);return r.set(t,e-t.byteLength),r.set(n,2*e-n.byteLength),r.buffer}async function DO(s,e,t,n,r){switch(s.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;default:throw new Ye(`Unknown hash function: ${s}`)}if(Ye.assert(e,"zBuffer","ArrayBuffer"),e.byteLength===0)throw new Ye("'zBuffer' has zero length, error");if(Ye.assert(n,"SharedInfo","ArrayBuffer"),t>255)throw new Ye("Please set 'Counter' argument to value less or equal to 255");const i=new ArrayBuffer(4),a=new Uint8Array(i);a[0]=0,a[1]=0,a[2]=0,a[3]=t;let o=_t;o=cc(o,e),o=cc(o,i),o=cc(o,n);const l=await r.digest({name:s},o);return{counter:t,result:l}}async function Pb(s,e,t,n,r=Ie(!0)){let i=0,a=1;switch(s.toUpperCase()){case"SHA-1":i=160;break;case"SHA-256":i=256;break;case"SHA-384":i=384;break;case"SHA-512":i=512;break;default:throw new Ye(`Unknown hash function: ${s}`)}if(Ye.assert(e,"Zbuffer","ArrayBuffer"),e.byteLength===0)throw new Ye("'Zbuffer' has zero length, error");Ye.assert(n,"SharedInfo","ArrayBuffer");const o=t/i;Math.floor(o)>0&&(a=Math.floor(o),o-a>0&&a++);const l=[];for(let h=1;h<=a;h++)l.push(await DO(s,e,h,n,r));let c=_t,u=1,f=!0;for(;f;){f=!1;for(const h of l)if(h.counter===u){c=cc(c,h.result),f=!0;break}u++}if(t>>=3,c.byteLength>t){const h=new ArrayBuffer(t),m=new Uint8Array(h),S=new Uint8Array(c);for(let A=0;A<t;A++)m[A]=S[A];return h}return c}const Tg="version",Rg="logID",Og="extensions",Vg="timestamp",Pg="hashAlgorithm",Lg="signatureAlgorithm",Dg="signature",Lb="none",Db="md5",Ub="sha1",Mb="sha224",Hb="sha256",$b="sha384",Fb="sha512",jb="anonymous",Kb="rsa",Jb="dsa",Wb="ecdsa";class gn extends G{constructor(e={}){super(),this.version=d(e,Tg,gn.defaultValues(Tg)),this.logID=d(e,Rg,gn.defaultValues(Rg)),this.timestamp=d(e,Vg,gn.defaultValues(Vg)),this.extensions=d(e,Og,gn.defaultValues(Og)),this.hashAlgorithm=d(e,Pg,gn.defaultValues(Pg)),this.signatureAlgorithm=d(e,Lg,gn.defaultValues(Lg)),this.signature=d(e,Dg,gn.defaultValues(Dg)),"stream"in e&&e.stream&&this.fromStream(e.stream),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Tg:return 0;case Rg:case Og:return _t;case Vg:return new Date(0);case Pg:case Lg:return g;case Dg:return new Ce;default:return super.defaultValues(e)}}fromSchema(e){if(!(e instanceof _m))throw new Error("Object's schema was not verified against input data for SignedCertificateTimestamp");const t=new vi({stream:new ft({buffer:e.data})});this.fromStream(t)}fromStream(e){const t=e.getUint16();if(this.version=e.getBlock(1)[0],this.version===0){this.logID=new Uint8Array(e.getBlock(32)).buffer.slice(0),this.timestamp=new Date(ho(new Uint8Array(e.getBlock(8)),8));const n=e.getUint16();switch(this.extensions=new Uint8Array(e.getBlock(n)).buffer.slice(0),e.getBlock(1)[0]){case 0:this.hashAlgorithm=Lb;break;case 1:this.hashAlgorithm=Db;break;case 2:this.hashAlgorithm=Ub;break;case 3:this.hashAlgorithm=Mb;break;case 4:this.hashAlgorithm=Hb;break;case 5:this.hashAlgorithm=$b;break;case 6:this.hashAlgorithm=Fb;break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}switch(e.getBlock(1)[0]){case 0:this.signatureAlgorithm=jb;break;case 1:this.signatureAlgorithm=Kb;break;case 2:this.signatureAlgorithm=Jb;break;case 3:this.signatureAlgorithm=Wb;break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}const r=e.getUint16(),i=new Uint8Array(e.getBlock(r)).buffer.slice(0),a=At(i);if(W.assert(a,"SignedCertificateTimestamp"),this.signature=a.result,t!==47+n+r)throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}}toSchema(){const e=this.toStream();return new _m({data:e.stream.buffer})}toStream(){const e=new vi;e.appendUint16(47+this.extensions.byteLength+this.signature.valueBeforeDecodeView.byteLength),e.appendChar(this.version),e.appendView(new Uint8Array(this.logID));const t=new ArrayBuffer(8),n=new Uint8Array(t),r=ar(this.timestamp.valueOf(),8);n.set(new Uint8Array(r),8-r.byteLength),e.appendView(n),e.appendUint16(this.extensions.byteLength),this.extensions.byteLength&&e.appendView(new Uint8Array(this.extensions));let i;switch(this.hashAlgorithm.toLowerCase()){case Lb:i=0;break;case Db:i=1;break;case Ub:i=2;break;case Mb:i=3;break;case Hb:i=4;break;case $b:i=5;break;case Fb:i=6;break;default:throw new Error(`Incorrect data for hashAlgorithm: ${this.hashAlgorithm}`)}e.appendChar(i);let a;switch(this.signatureAlgorithm.toLowerCase()){case jb:a=0;break;case Kb:a=1;break;case Jb:a=2;break;case Wb:a=3;break;default:throw new Error(`Incorrect data for signatureAlgorithm: ${this.signatureAlgorithm}`)}e.appendChar(a);const o=this.signature.toBER(!1);return e.appendUint16(o.byteLength),e.appendView(new Uint8Array(o)),e}toJSON(){return{version:this.version,logID:Ab(this.logID),timestamp:this.timestamp,extensions:Ab(this.extensions),hashAlgorithm:this.hashAlgorithm,signatureAlgorithm:this.signatureAlgorithm,signature:this.signature.toJSON()}}async verify(e,t,n=0,r=Ie(!0)){const i=Mp(Nm(this.logID));let a=null;const o=new vi;for(const m of e)if(m.log_id===i){a=m.key;break}if(!a)throw new Error(`Public key not found for CT with logId: ${i}`);const l=Ic(mf(a)),c=is.fromBER(l);o.appendChar(0),o.appendChar(0);const u=new ArrayBuffer(8),f=new Uint8Array(u),h=ar(this.timestamp.valueOf(),8);return f.set(new Uint8Array(h),8-h.byteLength),o.appendView(f),o.appendUint16(n),n===0&&o.appendUint24(t.byteLength),o.appendView(new Uint8Array(t)),o.appendUint16(this.extensions.byteLength),this.extensions.byteLength!==0&&o.appendView(new Uint8Array(this.extensions)),r.verifyWithPublicKey(o.buffer.slice(0,o.length),new Q({valueHex:this.signature.toBER(!1)}),c,{algorithmId:g},"SHA-256")}}gn.CLASS_NAME="SignedCertificateTimestamp";const sd="timestamps";class ug extends G{constructor(e={}){super(),this.timestamps=d(e,sd,ug.defaultValues(sd)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case sd:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case sd:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){var t;const n=d(e,"names",{});return(t=n.optional)!==null&&t!==void 0||(n.optional=!1),new Q({name:n.blockName||"SignedCertificateTimestampList",optional:n.optional})}fromSchema(e){if(!(e instanceof Q))throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");const t=new vi({stream:new ft({buffer:e.valueBlock.valueHex})});if(t.getUint16()!==t.length)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");for(;t.length;)this.timestamps.push(new gn({stream:t}))}toSchema(){const e=new vi;let t=0;const n=[];for(const r of this.timestamps){const i=r.toStream();n.push(i),t+=i.stream.buffer.byteLength}e.appendUint16(t);for(const r of n)e.appendView(r.stream.view);return new Q({valueHex:e.stream.buffer.slice(0)})}toJSON(){return{timestamps:Array.from(this.timestamps,e=>e.toJSON())}}}ug.CLASS_NAME="SignedCertificateTimestampList";const Mu="attributes",UO=[Mu];class Af extends G{constructor(e={}){super(),this.attributes=d(e,Mu,Af.defaultValues(Mu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Mu:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new _e({name:t.attributes||g,value:st.schema()})]})}fromSchema(e){X(e,UO);const t=q(e,e,Af.schema({names:{attributes:Mu}}));W.assertSchema(t,this.className),this.attributes=Array.from(t.result.attributes,n=>new st({schema:n}))}toSchema(){return new C({value:Array.from(this.attributes,e=>e.toSchema())})}toJSON(){return{attributes:Array.from(this.attributes,e=>e.toJSON())}}}Af.CLASS_NAME="SubjectDirectoryAttributes";class ut{static getItems(){return this.types||(this.types={},ut.register($k,"SubjectAltName",Bc),ut.register(Fk,"IssuerAltName",Bc),ut.register(dy,"AuthorityKeyIdentifier",Jn),ut.register(hy,"BasicConstraints",Si),ut.register(eO,"MicrosoftCaVersion",vf),ut.register(qk,"CertificatePolicies",xc),ut.register(GR,"CertificatePoliciesMicrosoft",xc),ut.register(ZR,"MicrosoftCertTemplateV2",ec),ut.register(Wk,"CRLDistributionPoints",fo),ut.register(fy,"FreshestCRL",fo),ut.register(YR,"ExtKeyUsage",Tc),ut.register(Kk,"CertificateIssuer",St),ut.register(my,"AuthorityInfoAccess",mo),ut.register(QR,"SubjectInfoAccess",mo),ut.register(jk,"IssuingDistributionPoint",Lt),ut.register(Jk,"NameConstraints",hc),ut.register(Yk,"PolicyConstraints",fc),ut.register(Gk,"PolicyMappings",bf),ut.register(jR,"PrivateKeyUsagePeriod",dc),ut.register(tO,"QCStatements",Sf),ut.register(zR,"SignedCertificateTimestampList",ug),ut.register(HR,"SubjectDirectoryAttributes",Af)),this.types}static fromBER(e,t){const n=At(t);if(n.offset===-1)return null;const r=this.find(e);if(r)try{return new r.type({schema:n.result})}catch{const a=new r.type;return a.parsingError=`Incorrectly formatted value of extension ${r.name} (${e})`,a}return n.result}static find(e){return this.getItems()[e]||null}static register(e,t,n){this.getItems()[e]={name:t,type:n}}}const Hu="extnID",Pr="critical",$u="extnValue",nd="parsedValue",MO=[Hu,Pr,$u];class We extends G{constructor(e={}){super(),this.extnID=d(e,Hu,We.defaultValues(Hu)),this.critical=d(e,Pr,We.defaultValues(Pr)),$u in e?this.extnValue=new Q({valueHex:e.extnValue}):this.extnValue=We.defaultValues($u),nd in e&&(this.parsedValue=d(e,nd,We.defaultValues(nd))),e.schema&&this.fromSchema(e.schema)}get parsedValue(){if(this._parsedValue===void 0){const e=ut.fromBER(this.extnID,this.extnValue.valueBlock.valueHexView);this._parsedValue=e}return this._parsedValue||void 0}set parsedValue(e){this._parsedValue=e}static defaultValues(e){switch(e){case Hu:return g;case Pr:return!1;case $u:return new Q;case nd:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new he({name:t.extnID||g}),new Cn({name:t.critical||g,optional:!0}),new Q({name:t.extnValue||g})]})}fromSchema(e){X(e,MO);const t=q(e,e,We.schema({names:{extnID:Hu,critical:Pr,extnValue:$u}}));W.assertSchema(t,this.className),this.extnID=t.result.extnID.valueBlock.toString(),Pr in t.result&&(this.critical=t.result.critical.valueBlock.value),this.extnValue=t.result.extnValue}toSchema(){const e=[];return e.push(new he({value:this.extnID})),this.critical!==We.defaultValues(Pr)&&e.push(new Cn({value:this.critical})),e.push(this.extnValue),new C({value:e})}toJSON(){const e={extnID:this.extnID,extnValue:this.extnValue.toJSON()};return this.critical!==We.defaultValues(Pr)&&(e.critical=this.critical),this.parsedValue&&this.parsedValue.toJSON&&(e.parsedValue=this.parsedValue.toJSON()),e}}We.CLASS_NAME="Extension";const Fu="extensions",HO=[Fu];class ct extends G{constructor(e={}){super(),this.extensions=d(e,Fu,ct.defaultValues(Fu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Fu:return[];default:return super.defaultValues(e)}}static schema(e={},t=!1){const n=d(e,"names",{});return new C({optional:t,name:n.blockName||g,value:[new _e({name:n.extensions||g,value:We.schema(n.extension||{})})]})}fromSchema(e){X(e,HO);const t=q(e,e,ct.schema({names:{extensions:Fu}}));W.assertSchema(t,this.className),this.extensions=Array.from(t.result.extensions,n=>new We({schema:n}))}toSchema(){return new C({value:Array.from(this.extensions,e=>e.toSchema())})}toJSON(){return{extensions:this.extensions.map(e=>e.toJSON())}}}ct.CLASS_NAME="Extensions";const ju="issuer",Ku="serialNumber",na="issuerUID",$O=[ju,Ku,na];class rs extends G{constructor(e={}){super(),this.issuer=d(e,ju,rs.defaultValues(ju)),this.serialNumber=d(e,Ku,rs.defaultValues(Ku)),na in e&&(this.issuerUID=d(e,na,rs.defaultValues(na))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ju:return new St;case Ku:return new U;case na:return new Pe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[St.schema(t.issuer||{}),new U({name:t.serialNumber||g}),new Pe({optional:!0,name:t.issuerUID||g})]})}fromSchema(e){X(e,$O);const t=q(e,e,rs.schema({names:{issuer:{names:{blockName:ju}},serialNumber:Ku,issuerUID:na}}));W.assertSchema(t,this.className),this.issuer=new St({schema:t.result.issuer}),this.serialNumber=t.result.serialNumber,na in t.result&&(this.issuerUID=t.result.issuerUID)}toSchema(){const e=new C({value:[this.issuer.toSchema(),this.serialNumber]});return this.issuerUID&&e.valueBlock.value.push(this.issuerUID),e}toJSON(){const e={issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()};return this.issuerUID&&(e.issuerUID=this.issuerUID.toJSON()),e}}rs.CLASS_NAME="IssuerSerial";const Ju="version",ra="baseCertificateID",ia="subjectName",Wu="issuer",qu="signature",Gu="serialNumber",Yu="attrCertValidityPeriod",Xu="attributes",aa="issuerUniqueID",oa="extensions",FO=[Ju,ra,ia,Wu,qu,Gu,Yu,Xu,aa,oa];class Gt extends G{constructor(e={}){super(),this.version=d(e,Ju,Gt.defaultValues(Ju)),ra in e&&(this.baseCertificateID=d(e,ra,Gt.defaultValues(ra))),ia in e&&(this.subjectName=d(e,ia,Gt.defaultValues(ia))),this.issuer=d(e,Wu,Gt.defaultValues(Wu)),this.signature=d(e,qu,Gt.defaultValues(qu)),this.serialNumber=d(e,Gu,Gt.defaultValues(Gu)),this.attrCertValidityPeriod=d(e,Yu,Gt.defaultValues(Yu)),this.attributes=d(e,Xu,Gt.defaultValues(Xu)),aa in e&&(this.issuerUniqueID=d(e,aa,Gt.defaultValues(aa))),oa in e&&(this.extensions=d(e,oa,Gt.defaultValues(oa))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ju:return 0;case ra:return new rs;case ia:return new St;case Wu:return new St;case qu:return new H;case Gu:return new U;case Yu:return new sn;case Xu:return[];case aa:return new Pe;case oa:return new ct;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new U({name:t.version||g}),new lt({value:[new P({name:t.baseCertificateID||g,idBlock:{tagClass:3,tagNumber:0},value:rs.schema().valueBlock.value}),new P({name:t.subjectName||g,idBlock:{tagClass:3,tagNumber:1},value:St.schema().valueBlock.value})]}),St.schema({names:{blockName:t.issuer||g}}),H.schema(t.signature||{}),new U({name:t.serialNumber||g}),sn.schema(t.attrCertValidityPeriod||{}),new C({name:t.attributes||g,value:[new _e({value:st.schema()})]}),new Pe({optional:!0,name:t.issuerUniqueID||g}),ct.schema(t.extensions||{},!0)]})}fromSchema(e){X(e,FO);const t=q(e,e,Gt.schema({names:{version:Ju,baseCertificateID:ra,subjectName:ia,issuer:Wu,signature:{names:{blockName:qu}},serialNumber:Gu,attrCertValidityPeriod:{names:{blockName:Yu}},attributes:Xu,issuerUniqueID:aa,extensions:{names:{blockName:oa}}}}));W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,ra in t.result&&(this.baseCertificateID=new rs({schema:new C({value:t.result.baseCertificateID.valueBlock.value})})),ia in t.result&&(this.subjectName=new St({schema:new C({value:t.result.subjectName.valueBlock.value})})),this.issuer=t.result.issuer,this.signature=new H({schema:t.result.signature}),this.serialNumber=t.result.serialNumber,this.attrCertValidityPeriod=new sn({schema:t.result.attrCertValidityPeriod}),this.attributes=Array.from(t.result.attributes.valueBlock.value,n=>new st({schema:n})),aa in t.result&&(this.issuerUniqueID=t.result.issuerUniqueID),oa in t.result&&(this.extensions=new ct({schema:t.result.extensions}))}toSchema(){const e=new C({value:[new U({value:this.version})]});return this.baseCertificateID&&e.valueBlock.value.push(new P({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.subjectName&&e.valueBlock.value.push(new P({idBlock:{tagClass:3,tagNumber:1},value:this.subjectName.toSchema().valueBlock.value})),e.valueBlock.value.push(this.issuer.toSchema()),e.valueBlock.value.push(this.signature.toSchema()),e.valueBlock.value.push(this.serialNumber),e.valueBlock.value.push(this.attrCertValidityPeriod.toSchema()),e.valueBlock.value.push(new C({value:Array.from(this.attributes,t=>t.toSchema())})),this.issuerUniqueID&&e.valueBlock.value.push(this.issuerUniqueID),this.extensions&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){const e={version:this.version};return this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.subjectName&&(e.subjectName=this.subjectName.toJSON()),e.issuer=this.issuer.toJSON(),e.signature=this.signature.toJSON(),e.serialNumber=this.serialNumber.toJSON(),e.attrCertValidityPeriod=this.attrCertValidityPeriod.toJSON(),e.attributes=Array.from(this.attributes,t=>t.toJSON()),this.issuerUniqueID&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),this.extensions&&(e.extensions=this.extensions.toJSON()),e}}Gt.CLASS_NAME="AttributeCertificateInfoV1";const Qu="acinfo",zu="signatureAlgorithm",Zu="signatureValue",jO=[Qu,Zu,zu];class Gn extends G{constructor(e={}){super(),this.acinfo=d(e,Qu,Gn.defaultValues(Qu)),this.signatureAlgorithm=d(e,zu,Gn.defaultValues(zu)),this.signatureValue=d(e,Zu,Gn.defaultValues(Zu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Qu:return new Gt;case zu:return new H;case Zu:return new Pe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[Gt.schema(t.acinfo||{}),H.schema(t.signatureAlgorithm||{}),new Pe({name:t.signatureValue||g})]})}fromSchema(e){X(e,jO);const t=q(e,e,Gn.schema({names:{acinfo:{names:{blockName:Qu}},signatureAlgorithm:{names:{blockName:zu}},signatureValue:Zu}}));W.assertSchema(t,this.className),this.acinfo=new Gt({schema:t.result.acinfo}),this.signatureAlgorithm=new H({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}toSchema(){return new C({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}Gn.CLASS_NAME="AttributeCertificateV1";const eh="digestedObjectType",la="otherObjectTypeID",th="digestAlgorithm",sh="objectDigest",KO=[eh,la,th,sh];class _s extends G{constructor(e={}){super(),this.digestedObjectType=d(e,eh,_s.defaultValues(eh)),la in e&&(this.otherObjectTypeID=d(e,la,_s.defaultValues(la))),this.digestAlgorithm=d(e,th,_s.defaultValues(th)),this.objectDigest=d(e,sh,_s.defaultValues(sh)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case eh:return new Ii;case la:return new he;case th:return new H;case sh:return new Pe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new Ii({name:t.digestedObjectType||g}),new he({optional:!0,name:t.otherObjectTypeID||g}),H.schema(t.digestAlgorithm||{}),new Pe({name:t.objectDigest||g})]})}fromSchema(e){X(e,KO);const t=q(e,e,_s.schema({names:{digestedObjectType:eh,otherObjectTypeID:la,digestAlgorithm:{names:{blockName:th}},objectDigest:sh}}));W.assertSchema(t,this.className),this.digestedObjectType=t.result.digestedObjectType,la in t.result&&(this.otherObjectTypeID=t.result.otherObjectTypeID),this.digestAlgorithm=new H({schema:t.result.digestAlgorithm}),this.objectDigest=t.result.objectDigest}toSchema(){const e=new C({value:[this.digestedObjectType]});return this.otherObjectTypeID&&e.valueBlock.value.push(this.otherObjectTypeID),e.valueBlock.value.push(this.digestAlgorithm.toSchema()),e.valueBlock.value.push(this.objectDigest),e}toJSON(){const e={digestedObjectType:this.digestedObjectType.toJSON(),digestAlgorithm:this.digestAlgorithm.toJSON(),objectDigest:this.objectDigest.toJSON()};return this.otherObjectTypeID&&(e.otherObjectTypeID=this.otherObjectTypeID.toJSON()),e}}_s.CLASS_NAME="ObjectDigestInfo";const ca="issuerName",ua="baseCertificateID",ha="objectDigestInfo",JO=[ca,ua,ha];class fi extends G{constructor(e={}){super(),ca in e&&(this.issuerName=d(e,ca,fi.defaultValues(ca))),ua in e&&(this.baseCertificateID=d(e,ua,fi.defaultValues(ua))),ha in e&&(this.objectDigestInfo=d(e,ha,fi.defaultValues(ha))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ca:return new St;case ua:return new rs;case ha:return new _s;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[St.schema({names:{blockName:t.issuerName}},!0),new P({optional:!0,name:t.baseCertificateID||g,idBlock:{tagClass:3,tagNumber:0},value:rs.schema().valueBlock.value}),new P({optional:!0,name:t.objectDigestInfo||g,idBlock:{tagClass:3,tagNumber:1},value:_s.schema().valueBlock.value})]})}fromSchema(e){X(e,JO);const t=q(e,e,fi.schema({names:{issuerName:ca,baseCertificateID:ua,objectDigestInfo:ha}}));W.assertSchema(t,this.className),ca in t.result&&(this.issuerName=new St({schema:t.result.issuerName})),ua in t.result&&(this.baseCertificateID=new rs({schema:new C({value:t.result.baseCertificateID.valueBlock.value})})),ha in t.result&&(this.objectDigestInfo=new _s({schema:new C({value:t.result.objectDigestInfo.valueBlock.value})}))}toSchema(){const e=new C;return this.issuerName&&e.valueBlock.value.push(this.issuerName.toSchema()),this.baseCertificateID&&e.valueBlock.value.push(new P({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.objectDigestInfo&&e.valueBlock.value.push(new P({idBlock:{tagClass:3,tagNumber:1},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){const e={};return this.issuerName&&(e.issuerName=this.issuerName.toJSON()),this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.objectDigestInfo&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}fi.CLASS_NAME="V2Form";const fa="baseCertificateID",da="entityName",ma="objectDigestInfo",WO=[fa,da,ma];class Yn extends G{constructor(e={}){super(),fa in e&&(this.baseCertificateID=d(e,fa,Yn.defaultValues(fa))),da in e&&(this.entityName=d(e,da,Yn.defaultValues(da))),ma in e&&(this.objectDigestInfo=d(e,ma,Yn.defaultValues(ma))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case fa:return new rs;case da:return new St;case ma:return new _s;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new P({optional:!0,name:t.baseCertificateID||g,idBlock:{tagClass:3,tagNumber:0},value:rs.schema().valueBlock.value}),new P({optional:!0,name:t.entityName||g,idBlock:{tagClass:3,tagNumber:1},value:St.schema().valueBlock.value}),new P({optional:!0,name:t.objectDigestInfo||g,idBlock:{tagClass:3,tagNumber:2},value:_s.schema().valueBlock.value})]})}fromSchema(e){X(e,WO);const t=q(e,e,Yn.schema({names:{baseCertificateID:fa,entityName:da,objectDigestInfo:ma}}));W.assertSchema(t,this.className),fa in t.result&&(this.baseCertificateID=new rs({schema:new C({value:t.result.baseCertificateID.valueBlock.value})})),da in t.result&&(this.entityName=new St({schema:new C({value:t.result.entityName.valueBlock.value})})),ma in t.result&&(this.objectDigestInfo=new _s({schema:new C({value:t.result.objectDigestInfo.valueBlock.value})}))}toSchema(){const e=new C;return this.baseCertificateID&&e.valueBlock.value.push(new P({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.entityName&&e.valueBlock.value.push(new P({idBlock:{tagClass:3,tagNumber:1},value:this.entityName.toSchema().valueBlock.value})),this.objectDigestInfo&&e.valueBlock.value.push(new P({idBlock:{tagClass:3,tagNumber:2},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){const e={};return this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.entityName&&(e.entityName=this.entityName.toJSON()),this.objectDigestInfo&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}Yn.CLASS_NAME="Holder";const nh="version",rh="holder",ih="issuer",ah="signature",oh="serialNumber",lh="attrCertValidityPeriod",ch="attributes",ga="issuerUniqueID",pa="extensions",qO=[nh,rh,ih,ah,oh,lh,ch,ga,pa];class es extends G{constructor(e={}){super(),this.version=d(e,nh,es.defaultValues(nh)),this.holder=d(e,rh,es.defaultValues(rh)),this.issuer=d(e,ih,es.defaultValues(ih)),this.signature=d(e,ah,es.defaultValues(ah)),this.serialNumber=d(e,oh,es.defaultValues(oh)),this.attrCertValidityPeriod=d(e,lh,es.defaultValues(lh)),this.attributes=d(e,ch,es.defaultValues(ch)),ga in e&&(this.issuerUniqueID=d(e,ga,es.defaultValues(ga))),pa in e&&(this.extensions=d(e,pa,es.defaultValues(pa))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case nh:return 1;case rh:return new Yn;case ih:return{};case ah:return new H;case oh:return new U;case lh:return new sn;case ch:return[];case ga:return new Pe;case pa:return new ct;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new U({name:t.version||g}),Yn.schema(t.holder||{}),new lt({value:[St.schema({names:{blockName:t.issuer||g}}),new P({name:t.issuer||g,idBlock:{tagClass:3,tagNumber:0},value:fi.schema().valueBlock.value})]}),H.schema(t.signature||{}),new U({name:t.serialNumber||g}),sn.schema(t.attrCertValidityPeriod||{}),new C({name:t.attributes||g,value:[new _e({value:st.schema()})]}),new Pe({optional:!0,name:t.issuerUniqueID||g}),ct.schema(t.extensions||{},!0)]})}fromSchema(e){X(e,qO);const t=q(e,e,es.schema({names:{version:nh,holder:{names:{blockName:rh}},issuer:ih,signature:{names:{blockName:ah}},serialNumber:oh,attrCertValidityPeriod:{names:{blockName:lh}},attributes:ch,issuerUniqueID:ga,extensions:{names:{blockName:pa}}}}));switch(W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.holder=new Yn({schema:t.result.holder}),t.result.issuer.idBlock.tagClass){case 3:this.issuer=new fi({schema:new C({value:t.result.issuer.valueBlock.value})});break;case 1:default:throw new Error("Incorrect value for 'issuer' in AttributeCertificateInfoV2")}this.signature=new H({schema:t.result.signature}),this.serialNumber=t.result.serialNumber,this.attrCertValidityPeriod=new sn({schema:t.result.attrCertValidityPeriod}),this.attributes=Array.from(t.result.attributes.valueBlock.value,n=>new st({schema:n})),ga in t.result&&(this.issuerUniqueID=t.result.issuerUniqueID),pa in t.result&&(this.extensions=new ct({schema:t.result.extensions}))}toSchema(){const e=new C({value:[new U({value:this.version}),this.holder.toSchema(),new P({idBlock:{tagClass:3,tagNumber:0},value:this.issuer.toSchema().valueBlock.value}),this.signature.toSchema(),this.serialNumber,this.attrCertValidityPeriod.toSchema(),new C({value:Array.from(this.attributes,t=>t.toSchema())})]});return this.issuerUniqueID&&e.valueBlock.value.push(this.issuerUniqueID),this.extensions&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){const e={version:this.version,holder:this.holder.toJSON(),issuer:this.issuer.toJSON(),signature:this.signature.toJSON(),serialNumber:this.serialNumber.toJSON(),attrCertValidityPeriod:this.attrCertValidityPeriod.toJSON(),attributes:Array.from(this.attributes,t=>t.toJSON())};return this.issuerUniqueID&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),this.extensions&&(e.extensions=this.extensions.toJSON()),e}}es.CLASS_NAME="AttributeCertificateInfoV2";const uh="acinfo",hh="signatureAlgorithm",fh="signatureValue",GO=[uh,hh,fh];class Bs extends G{constructor(e={}){super(),this.acinfo=d(e,uh,Bs.defaultValues(uh)),this.signatureAlgorithm=d(e,hh,Bs.defaultValues(hh)),this.signatureValue=d(e,fh,Bs.defaultValues(fh)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case uh:return new es;case hh:return new H;case fh:return new Pe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[es.schema(t.acinfo||{}),H.schema(t.signatureAlgorithm||{}),new Pe({name:t.signatureValue||g})]})}fromSchema(e){X(e,GO);const t=q(e,e,Bs.schema({names:{acinfo:{names:{blockName:uh}},signatureAlgorithm:{names:{blockName:hh}},signatureValue:fh}}));W.assertSchema(t,this.className),this.acinfo=new es({schema:t.result.acinfo}),this.signatureAlgorithm=new H({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}toSchema(){return new C({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}Bs.CLASS_NAME="AttributeCertificateV2";const wa="contentType",Jo="content",YO=[wa,Jo];class tt extends G{constructor(e={}){super(),this.contentType=d(e,wa,tt.defaultValues(wa)),this.content=d(e,Jo,tt.defaultValues(Jo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wa:return g;case Jo:return new Ce;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wa:return typeof t=="string"&&t===this.defaultValues(wa);case Jo:return t instanceof Ce;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return"optional"in t||(t.optional=!1),new C({name:t.blockName||"ContentInfo",optional:t.optional,value:[new he({name:t.contentType||wa}),new P({idBlock:{tagClass:3,tagNumber:0},value:[new Ce({name:t.content||Jo})]})]})}fromSchema(e){X(e,YO);const t=q(e,e,tt.schema());W.assertSchema(t,this.className),this.contentType=t.result.contentType.valueBlock.toString(),this.content=t.result.content}toSchema(){return new C({value:[new he({value:this.contentType}),new P({idBlock:{tagClass:3,tagNumber:0},value:[this.content]})]})}toJSON(){const e={contentType:this.contentType};return this.content instanceof Ce||(e.content=this.content.toJSON()),e}}tt.CLASS_NAME="ContentInfo";tt.DATA=gy;tt.SIGNED_DATA=Xk;tt.ENVELOPED_DATA=Qk;tt.ENCRYPTED_DATA=zk;const Ug="type",Mg="value",jp="utcTimeName",Kp="generalTimeName",XO=[jp,Kp];var qb;(function(s){s[s.UTCTime=0]="UTCTime",s[s.GeneralizedTime=1]="GeneralizedTime",s[s.empty=2]="empty"})(qb||(qb={}));class dt extends G{constructor(e={}){super(),this.type=d(e,Ug,dt.defaultValues(Ug)),this.value=d(e,Mg,dt.defaultValues(Mg)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ug:return 0;case Mg:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(e={},t=!1){const n=d(e,"names",{});return new lt({optional:t,value:[new _c({name:n.utcTimeName||g}),new ot({name:n.generalTimeName||g})]})}fromSchema(e){X(e,XO);const t=q(e,e,dt.schema({names:{utcTimeName:jp,generalTimeName:Kp}}));W.assertSchema(t,this.className),jp in t.result&&(this.type=0,this.value=t.result.utcTimeName.toDate()),Kp in t.result&&(this.type=1,this.value=t.result.generalTimeName.toDate())}toSchema(){return this.type===0?new _c({valueDate:this.value}):this.type===1?new ot({valueDate:this.value}):{}}toJSON(){return{type:this.type,value:this.value}}}dt.CLASS_NAME="Time";const Hg="tbs",Lr="version",Bd="serialNumber",xd="signature",Td="issuer",Rd="notBefore",Od="notAfter",Vd="subject",Pd="subjectPublicKeyInfo",dh="issuerUniqueID",mh="subjectUniqueID",gh="extensions",ph="signatureAlgorithm",wh="signatureValue",Ts="tbsCertificate",xm=`${Ts}.${Lr}`,py=`${Ts}.${Bd}`,wy=`${Ts}.${xd}`,yy=`${Ts}.${Td}`,Tm=`${Ts}.${Rd}`,Rm=`${Ts}.${Od}`,vy=`${Ts}.${Vd}`,by=`${Ts}.${Pd}`,Om=`${Ts}.${dh}`,Vm=`${Ts}.${mh}`,sf=`${Ts}.${gh}`,QO=[Ts,xm,py,wy,yy,Tm,Rm,vy,by,Om,Vm,sf,ph,wh];function zO(s={}){const e=d(s,"names",{});return new C({name:e.blockName||Ts,value:[new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new U({name:e.tbsCertificateVersion||xm})]}),new U({name:e.tbsCertificateSerialNumber||py}),H.schema(e.signature||{names:{blockName:wy}}),Xe.schema(e.issuer||{names:{blockName:yy}}),new C({name:e.tbsCertificateValidity||"tbsCertificate.validity",value:[dt.schema(e.notBefore||{names:{utcTimeName:Tm,generalTimeName:Tm}}),dt.schema(e.notAfter||{names:{utcTimeName:Rm,generalTimeName:Rm}})]}),Xe.schema(e.subject||{names:{blockName:vy}}),is.schema(e.subjectPublicKeyInfo||{names:{blockName:by}}),new ke({name:e.tbsCertificateIssuerUniqueID||Om,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new ke({name:e.tbsCertificateSubjectUniqueID||Vm,optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[ct.schema(e.extensions||{names:{blockName:sf}})]})]})}class He extends G{constructor(e={}){super(),this.tbsView=new Uint8Array(d(e,Hg,He.defaultValues(Hg))),this.version=d(e,Lr,He.defaultValues(Lr)),this.serialNumber=d(e,Bd,He.defaultValues(Bd)),this.signature=d(e,xd,He.defaultValues(xd)),this.issuer=d(e,Td,He.defaultValues(Td)),this.notBefore=d(e,Rd,He.defaultValues(Rd)),this.notAfter=d(e,Od,He.defaultValues(Od)),this.subject=d(e,Vd,He.defaultValues(Vd)),this.subjectPublicKeyInfo=d(e,Pd,He.defaultValues(Pd)),dh in e&&(this.issuerUniqueID=d(e,dh,He.defaultValues(dh))),mh in e&&(this.subjectUniqueID=d(e,mh,He.defaultValues(mh))),gh in e&&(this.extensions=d(e,gh,He.defaultValues(gh))),this.signatureAlgorithm=d(e,ph,He.defaultValues(ph)),this.signatureValue=d(e,wh,He.defaultValues(wh)),e.schema&&this.fromSchema(e.schema)}get tbs(){return be.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case Hg:return _t;case Lr:return 0;case Bd:return new U;case xd:return new H;case Td:return new Xe;case Rd:return new dt;case Od:return new dt;case Vd:return new Xe;case Pd:return new is;case dh:return _t;case mh:return _t;case gh:return[];case ph:return new H;case wh:return new Pe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[zO(t.tbsCertificate),H.schema(t.signatureAlgorithm||{names:{blockName:ph}}),new Pe({name:t.signatureValue||wh})]})}fromSchema(e){X(e,QO);const t=q(e,e,He.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:sf}}}}}}));W.assertSchema(t,this.className),this.tbsView=t.result.tbsCertificate.valueBeforeDecodeView,xm in t.result&&(this.version=t.result[xm].valueBlock.valueDec),this.serialNumber=t.result[py],this.signature=new H({schema:t.result[wy]}),this.issuer=new Xe({schema:t.result[yy]}),this.notBefore=new dt({schema:t.result[Tm]}),this.notAfter=new dt({schema:t.result[Rm]}),this.subject=new Xe({schema:t.result[vy]}),this.subjectPublicKeyInfo=new is({schema:t.result[by]}),Om in t.result&&(this.issuerUniqueID=t.result[Om].valueBlock.valueHex),Vm in t.result&&(this.subjectUniqueID=t.result[Vm].valueBlock.valueHex),sf in t.result&&(this.extensions=Array.from(t.result[sf],n=>new We({schema:n}))),this.signatureAlgorithm=new H({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];return Lr in this&&this.version!==He.defaultValues(Lr)&&e.push(new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new U({value:this.version})]})),e.push(this.serialNumber),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(new C({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]})),e.push(this.subject.toSchema()),e.push(this.subjectPublicKeyInfo.toSchema()),this.issuerUniqueID&&e.push(new ke({optional:!0,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID})),this.subjectUniqueID&&e.push(new ke({optional:!0,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID})),this.extensions&&e.push(new P({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[new C({value:Array.from(this.extensions,t=>t.toSchema())})]})),new C({value:e})}toSchema(e=!1){let t;if(e===!1){if(!this.tbsView.byteLength)return He.schema().value[0];const n=At(this.tbsView);W.assert(n,"TBS Certificate"),t=n.result}else t=this.encodeTBS();return new C({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:Ae.ToHex(this.tbsView),version:this.version,serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return Lr in this&&this.version!==He.defaultValues(Lr)&&(e.version=this.version),this.issuerUniqueID&&(e.issuerUniqueID=Ae.ToHex(this.issuerUniqueID)),this.subjectUniqueID&&(e.subjectUniqueID=Ae.ToHex(this.subjectUniqueID)),this.extensions&&(e.extensions=Array.from(this.extensions,t=>t.toJSON())),e}async getPublicKey(e,t=Ie(!0)){return t.getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}async getKeyHash(e="SHA-1",t=Ie(!0)){return t.digest({name:e},this.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView)}async sign(e,t="SHA-1",n=Ie(!0)){if(!e)throw new Error("Need to provide a private key for signing");const r=await n.getSignatureParameters(e,t),i=r.parameters;this.signature=r.signatureAlgorithm,this.signatureAlgorithm=r.signatureAlgorithm,this.tbsView=new Uint8Array(this.encodeTBS().toBER());const a=await n.signWithPrivateKey(this.tbsView,e,i);this.signatureValue=new Pe({valueHex:a})}async verify(e,t=Ie(!0)){let n;if(e?n=e.subjectPublicKeyInfo:this.issuer.isEqual(this.subject)&&(n=this.subjectPublicKeyInfo),!(n instanceof is))throw new Error("Please provide issuer certificate as a parameter");return t.verifyWithPublicKey(this.tbsView,this.signatureValue,n,this.signatureAlgorithm)}}He.CLASS_NAME="Certificate";function r0(s,e=null){if(e&&s.issuer.isEqual(e.issuer)&&s.serialNumber.isEqual(e.serialNumber))return null;let t=!1;if(s.extensions){for(const n of s.extensions)if(n.extnID===hy&&n.parsedValue instanceof Si&&n.parsedValue.cA){t=!0;break}}return t?s:null}const Wo="certId",qo="certValue",Eo="parsedValue",ZO=[Wo,qo];class Ya extends G{constructor(e={}){super(),this.certId=d(e,Wo,Ya.defaultValues(Wo)),this.certValue=d(e,qo,Ya.defaultValues(qo)),Eo in e&&(this.parsedValue=d(e,Eo,Ya.defaultValues(Eo))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Wo:return g;case qo:return new Ce;case Eo:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Wo:return t===g;case qo:return t instanceof Ce;case Eo:return t instanceof Object&&Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new he({name:t.id||"id"}),new P({idBlock:{tagClass:3,tagNumber:0},value:[new Ce({name:t.value||"value"})]})]})}fromSchema(e){X(e,ZO);const t=q(e,e,Ya.schema({names:{id:Wo,value:qo}}));W.assertSchema(t,this.className),this.certId=t.result.certId.valueBlock.toString(),this.certValue=t.result.certValue;const n=this.certValue.valueBlock.valueHexView;switch(this.certId){case _b:try{this.parsedValue=He.fromBER(n)}catch{Bs.fromBER(n)}break;case Bb:this.parsedValue=Bs.fromBER(n);break;case nO:default:throw new Error(`Incorrect CERT_ID value in CertBag: ${this.certId}`)}}toSchema(){return Eo in this&&("acinfo"in this.parsedValue?this.certId=Bb:this.certId=_b,this.certValue=new Q({valueHex:this.parsedValue.toSchema().toBER(!1)})),new C({value:[new he({value:this.certId}),new P({idBlock:{tagClass:3,tagNumber:0},value:["toSchema"in this.certValue?this.certValue.toSchema():this.certValue]})]})}toJSON(){return{certId:this.certId,certValue:this.certValue.toJSON()}}}Ya.CLASS_NAME="CertBag";const yh="userCertificate",Go="revocationDate",ya="crlEntryExtensions",eV=[yh,Go,ya];class di extends G{constructor(e={}){super(),this.userCertificate=d(e,yh,di.defaultValues(yh)),this.revocationDate=d(e,Go,di.defaultValues(Go)),ya in e&&(this.crlEntryExtensions=d(e,ya,di.defaultValues(ya))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case yh:return new U;case Go:return new dt;case ya:return new ct;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new U({name:t.userCertificate||yh}),dt.schema({names:{utcTimeName:t.revocationDate||Go,generalTimeName:t.revocationDate||Go}}),ct.schema({names:{blockName:t.crlEntryExtensions||ya}},!0)]})}fromSchema(e){X(e,eV);const t=q(e,e,di.schema());W.assertSchema(t,this.className),this.userCertificate=t.result.userCertificate,this.revocationDate=new dt({schema:t.result.revocationDate}),ya in t.result&&(this.crlEntryExtensions=new ct({schema:t.result.crlEntryExtensions}))}toSchema(){const e=[this.userCertificate,this.revocationDate.toSchema()];return this.crlEntryExtensions&&e.push(this.crlEntryExtensions.toSchema()),new C({value:e})}toJSON(){const e={userCertificate:this.userCertificate.toJSON(),revocationDate:this.revocationDate.toJSON()};return this.crlEntryExtensions&&(e.crlEntryExtensions=this.crlEntryExtensions.toJSON()),e}}di.CLASS_NAME="RevokedCertificate";const $g="tbs",jc="version",Fg="signature",jg="issuer",Kg="thisUpdate",rd="nextUpdate",id="revokedCertificates",ad="crlExtensions",vh="signatureAlgorithm",bh="signatureValue",fr="tbsCertList",Pm=`${fr}.version`,Sy=`${fr}.signature`,Ay=`${fr}.issuer`,Lm=`${fr}.thisUpdate`,kf=`${fr}.nextUpdate`,Dm=`${fr}.revokedCertificates`,Um=`${fr}.extensions`,tV=[fr,Pm,Sy,Ay,Lm,kf,Dm,Um,vh,bh];function sV(s={}){const e=d(s,"names",{});return new C({name:e.blockName||fr,value:[new U({optional:!0,name:e.tbsCertListVersion||Pm,value:2}),H.schema(e.signature||{names:{blockName:Sy}}),Xe.schema(e.issuer||{names:{blockName:Ay}}),dt.schema(e.tbsCertListThisUpdate||{names:{utcTimeName:Lm,generalTimeName:Lm}}),dt.schema(e.tbsCertListNextUpdate||{names:{utcTimeName:kf,generalTimeName:kf}},!0),new C({optional:!0,value:[new _e({name:e.tbsCertListRevokedCertificates||Dm,value:new C({value:[new U,dt.schema(),ct.schema({},!0)]})})]}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[ct.schema(e.crlExtensions||{names:{blockName:Um}})]})]})}const nV=[dy,Fk,KR,JR,jk,fy,my,WR,qR,Kk];class Et extends G{constructor(e={}){super(),this.tbsView=new Uint8Array(d(e,$g,Et.defaultValues($g))),this.version=d(e,jc,Et.defaultValues(jc)),this.signature=d(e,Fg,Et.defaultValues(Fg)),this.issuer=d(e,jg,Et.defaultValues(jg)),this.thisUpdate=d(e,Kg,Et.defaultValues(Kg)),rd in e&&(this.nextUpdate=d(e,rd,Et.defaultValues(rd))),id in e&&(this.revokedCertificates=d(e,id,Et.defaultValues(id))),ad in e&&(this.crlExtensions=d(e,ad,Et.defaultValues(ad))),this.signatureAlgorithm=d(e,vh,Et.defaultValues(vh)),this.signatureValue=d(e,bh,Et.defaultValues(bh)),e.schema&&this.fromSchema(e.schema)}get tbs(){return be.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case $g:return _t;case jc:return 0;case Fg:return new H;case jg:return new Xe;case Kg:return new dt;case rd:return new dt;case id:return[];case ad:return new ct;case vh:return new H;case bh:return new Pe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||"CertificateList",value:[sV(e),H.schema(t.signatureAlgorithm||{names:{blockName:vh}}),new Pe({name:t.signatureValue||bh})]})}fromSchema(e){X(e,tV);const t=q(e,e,Et.schema());W.assertSchema(t,this.className),this.tbsView=t.result.tbsCertList.valueBeforeDecodeView,Pm in t.result&&(this.version=t.result[Pm].valueBlock.valueDec),this.signature=new H({schema:t.result[Sy]}),this.issuer=new Xe({schema:t.result[Ay]}),this.thisUpdate=new dt({schema:t.result[Lm]}),kf in t.result&&(this.nextUpdate=new dt({schema:t.result[kf]})),Dm in t.result&&(this.revokedCertificates=Array.from(t.result[Dm],n=>new di({schema:n}))),Um in t.result&&(this.crlExtensions=new ct({schema:t.result[Um]})),this.signatureAlgorithm=new H({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];return this.version!==Et.defaultValues(jc)&&e.push(new U({value:this.version})),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(this.thisUpdate.toSchema()),this.nextUpdate&&e.push(this.nextUpdate.toSchema()),this.revokedCertificates&&e.push(new C({value:Array.from(this.revokedCertificates,t=>t.toSchema())})),this.crlExtensions&&e.push(new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.crlExtensions.toSchema()]})),new C({value:e})}toSchema(e=!1){let t;if(e)t=this.encodeTBS();else{if(!this.tbsView.byteLength)return Et.schema();const n=At(this.tbsView);W.assert(n,"TBS Certificate Revocation List"),t=n.result}return new C({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:Ae.ToHex(this.tbsView),version:this.version,signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),thisUpdate:this.thisUpdate.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return this.version!==Et.defaultValues(jc)&&(e.version=this.version),this.nextUpdate&&(e.nextUpdate=this.nextUpdate.toJSON()),this.revokedCertificates&&(e.revokedCertificates=Array.from(this.revokedCertificates,t=>t.toJSON())),this.crlExtensions&&(e.crlExtensions=this.crlExtensions.toJSON()),e}isCertificateRevoked(e){if(!this.issuer.isEqual(e.issuer)||!this.revokedCertificates)return!1;for(const t of this.revokedCertificates)if(t.userCertificate.isEqual(e.serialNumber))return!0;return!1}async sign(e,t="SHA-1",n=Ie(!0)){if(!e)throw new Error("Need to provide a private key for signing");const r=await n.getSignatureParameters(e,t),{parameters:i}=r;this.signature=r.signatureAlgorithm,this.signatureAlgorithm=r.signatureAlgorithm,this.tbsView=new Uint8Array(this.encodeTBS().toBER());const a=await n.signWithPrivateKey(this.tbsView,e,i);this.signatureValue=new Pe({valueHex:a})}async verify(e={},t=Ie(!0)){let n;if(e.issuerCertificate&&(n=e.issuerCertificate.subjectPublicKeyInfo,!this.issuer.isEqual(e.issuerCertificate.subject)))return!1;if(e.publicKeyInfo&&(n=e.publicKeyInfo),!n)throw new Error("Issuer's certificate must be provided as an input parameter");if(this.crlExtensions){for(const r of this.crlExtensions.extensions)if(r.critical&&!nV.includes(r.extnID))return!1}return t.verifyWithPublicKey(this.tbsView,this.signatureValue,n,this.signatureAlgorithm)}}Et.CLASS_NAME="CertificateRevocationList";const Yo="crlId",Xo="crlValue",Kc="parsedValue",rV=[Yo,Xo];class Xa extends G{constructor(e={}){super(),this.crlId=d(e,Yo,Xa.defaultValues(Yo)),this.crlValue=d(e,Xo,Xa.defaultValues(Xo)),Kc in e&&(this.parsedValue=d(e,Kc,Xa.defaultValues(Kc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Yo:return g;case Xo:return new Ce;case Kc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Yo:return t===g;case Xo:return t instanceof Ce;case Kc:return t instanceof Object&&Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new he({name:t.id||"id"}),new P({idBlock:{tagClass:3,tagNumber:0},value:[new Ce({name:t.value||"value"})]})]})}fromSchema(e){X(e,rV);const t=q(e,e,Xa.schema({names:{id:Yo,value:Xo}}));switch(W.assertSchema(t,this.className),this.crlId=t.result.crlId.valueBlock.toString(),this.crlValue=t.result.crlValue,this.crlId){case xb:this.parsedValue=Et.fromBER(this.certValue.valueBlock.valueHex);break;default:throw new Error(`Incorrect CRL_ID value in CRLBag: ${this.crlId}`)}}toSchema(){return this.parsedValue&&(this.crlId=xb,this.crlValue=new Q({valueHex:this.parsedValue.toSchema().toBER(!1)})),new C({value:[new he({value:this.crlId}),new P({idBlock:{tagClass:3,tagNumber:0},value:[this.crlValue.toSchema()]})]})}toJSON(){return{crlId:this.crlId,crlValue:this.crlValue.toJSON()}}}Xa.CLASS_NAME="CRLBag";const Qo="version",zo="encryptedContentInfo",Dr="unprotectedAttrs",iV=[Qo,zo,Dr];class Sn extends G{constructor(e={}){super(),this.version=d(e,Qo,Sn.defaultValues(Qo)),this.encryptedContentInfo=d(e,zo,Sn.defaultValues(zo)),Dr in e&&(this.unprotectedAttrs=d(e,Dr,Sn.defaultValues(Dr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Qo:return 0;case zo:return new vt;case Dr:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Qo:return t===0;case zo:return vt.compareWithDefault("contentType",t.contentType)&&vt.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&vt.compareWithDefault("encryptedContent",t.encryptedContent);case Dr:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new U({name:t.version||g}),vt.schema(t.encryptedContentInfo||{}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new _e({name:t.unprotectedAttrs||g,value:st.schema()})]})]})}fromSchema(e){X(e,iV);const t=q(e,e,Sn.schema({names:{version:Qo,encryptedContentInfo:{names:{blockName:zo}},unprotectedAttrs:Dr}}));W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.encryptedContentInfo=new vt({schema:t.result.encryptedContentInfo}),Dr in t.result&&(this.unprotectedAttrs=Array.from(t.result.unprotectedAttrs,n=>new st({schema:n})))}toSchema(){const e=[];return e.push(new U({value:this.version})),e.push(this.encryptedContentInfo.toSchema()),this.unprotectedAttrs&&e.push(new P({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,t=>t.toSchema())})),new C({value:e})}toJSON(){const e={version:this.version,encryptedContentInfo:this.encryptedContentInfo.toJSON()};return this.unprotectedAttrs&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,t=>t.toJSON())),e}async encrypt(e,t=Ie(!0)){Ye.assert(e,"parameters","object");const n={...e,contentType:"1.2.840.113549.1.7.1"};this.encryptedContentInfo=await t.encryptEncryptedContentInfo(n)}async decrypt(e,t=Ie(!0)){Ye.assert(e,"parameters","object");const n={...e,encryptedContentInfo:this.encryptedContentInfo};return t.decryptEncryptedContentInfo(n)}}Sn.CLASS_NAME="EncryptedData";const va="encryptionAlgorithm",Ur="encryptedData",Jc="parsedValue",aV=[va,Ur];class Fn extends G{constructor(e={}){super(),this.encryptionAlgorithm=d(e,va,Fn.defaultValues(va)),this.encryptedData=d(e,Ur,Fn.defaultValues(Ur)),Jc in e&&(this.parsedValue=d(e,Jc,Fn.defaultValues(Jc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case va:return new H;case Ur:return new Q;case Jc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case va:return H.compareWithDefault("algorithmId",t.algorithmId)&&!("algorithmParams"in t);case Ur:return t.isEqual(Fn.defaultValues(e));case Jc:return t instanceof Object&&Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[H.schema(t.encryptionAlgorithm||{names:{blockName:va}}),new lt({value:[new Q({name:t.encryptedData||Ur}),new Q({idBlock:{isConstructed:!0},name:t.encryptedData||Ur})]})]})}fromSchema(e){X(e,aV);const t=q(e,e,Fn.schema({names:{encryptionAlgorithm:{names:{blockName:va}},encryptedData:Ur}}));W.assertSchema(t,this.className),this.encryptionAlgorithm=new H({schema:t.result.encryptionAlgorithm}),this.encryptedData=t.result.encryptedData}toSchema(){return new C({value:[this.encryptionAlgorithm.toSchema(),this.encryptedData]})}toJSON(){return{encryptionAlgorithm:this.encryptionAlgorithm.toJSON(),encryptedData:this.encryptedData.toJSON()}}async parseInternalValues(e,t=Ie(!0)){const r=await new Sn({encryptedContentInfo:new vt({contentEncryptionAlgorithm:this.encryptionAlgorithm,encryptedContent:this.encryptedData})}).decrypt(e,t);this.parsedValue=Ns.fromBER(r)}async makeInternalValues(e,t=Ie(!0)){if(!this.parsedValue)throw new Error('Please initialize "parsedValue" first');const n=new Sn,r={...e,contentToEncrypt:this.parsedValue.toSchema().toBER(!1)};if(await n.encrypt(r,t),!n.encryptedContentInfo.encryptedContent)throw new Error("The filed `encryptedContent` in EncryptedContentInfo is empty");this.encryptionAlgorithm=n.encryptedContentInfo.contentEncryptionAlgorithm,this.encryptedData=n.encryptedContentInfo.encryptedContent}}Fn.CLASS_NAME="PKCS8ShroudedKeyBag";const Zo="secretTypeId",el="secretValue",oV=[Zo,el];class mc extends G{constructor(e={}){super(),this.secretTypeId=d(e,Zo,mc.defaultValues(Zo)),this.secretValue=d(e,el,mc.defaultValues(el)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Zo:return g;case el:return new Ce;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Zo:return t===g;case el:return t instanceof Ce;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new he({name:t.id||"id"}),new P({idBlock:{tagClass:3,tagNumber:0},value:[new Ce({name:t.value||"value"})]})]})}fromSchema(e){X(e,oV);const t=q(e,e,mc.schema({names:{id:Zo,value:el}}));W.assertSchema(t,this.className),this.secretTypeId=t.result.secretTypeId.valueBlock.toString(),this.secretValue=t.result.secretValue}toSchema(){return new C({value:[new he({value:this.secretTypeId}),new P({idBlock:{tagClass:3,tagNumber:0},value:[this.secretValue.toSchema()]})]})}toJSON(){return{secretTypeId:this.secretTypeId,secretValue:this.secretValue.toJSON()}}}mc.CLASS_NAME="SecretBag";class oi{static getItems(){return this.items||(this.items={},oi.register("1.2.840.113549.1.12.10.1.1",Ns),oi.register("1.2.840.113549.1.12.10.1.2",Fn),oi.register("1.2.840.113549.1.12.10.1.3",Ya),oi.register("1.2.840.113549.1.12.10.1.4",Xa),oi.register("1.2.840.113549.1.12.10.1.5",mc),oi.register("1.2.840.113549.1.12.10.1.6",Xn)),this.items}static register(e,t){this.getItems()[e]=t}static find(e){return this.getItems()[e]||null}}const ba="bagId",Sa="bagValue",Ln="bagAttributes",lV=[ba,Sa,Ln];class mi extends G{constructor(e={}){super(),this.bagId=d(e,ba,mi.defaultValues(ba)),this.bagValue=d(e,Sa,mi.defaultValues(Sa)),Ln in e&&(this.bagAttributes=d(e,Ln,mi.defaultValues(Ln))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ba:return g;case Sa:return new Ce;case Ln:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ba:return t===g;case Sa:return t instanceof Ce;case Ln:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new he({name:t.bagId||ba}),new P({idBlock:{tagClass:3,tagNumber:0},value:[new Ce({name:t.bagValue||Sa})]}),new bt({optional:!0,value:[new _e({name:t.bagAttributes||Ln,value:st.schema()})]})]})}fromSchema(e){X(e,lV);const t=q(e,e,mi.schema({names:{bagId:ba,bagValue:Sa,bagAttributes:Ln}}));W.assertSchema(t,this.className),this.bagId=t.result.bagId.valueBlock.toString();const n=oi.find(this.bagId);if(!n)throw new Error(`Invalid BAG_ID for SafeBag: ${this.bagId}`);this.bagValue=new n({schema:t.result.bagValue}),Ln in t.result&&(this.bagAttributes=Array.from(t.result.bagAttributes,r=>new st({schema:r})))}toSchema(){const e=[new he({value:this.bagId}),new P({idBlock:{tagClass:3,tagNumber:0},value:[this.bagValue.toSchema()]})];return this.bagAttributes&&e.push(new bt({value:Array.from(this.bagAttributes,t=>t.toSchema())})),new C({value:e})}toJSON(){const e={bagId:this.bagId,bagValue:this.bagValue.toJSON()};return this.bagAttributes&&(e.bagAttributes=Array.from(this.bagAttributes,t=>t.toJSON())),e}}mi.CLASS_NAME="SafeBag";const Co="safeBags";class Xn extends G{constructor(e={}){super(),this.safeBags=d(e,Co,Xn.defaultValues(Co)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Co:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Co:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new _e({name:t.safeBags||g,value:mi.schema()})]})}fromSchema(e){X(e,[Co]);const t=q(e,e,Xn.schema({names:{safeBags:Co}}));W.assertSchema(t,this.className),this.safeBags=Array.from(t.result.safeBags,n=>new mi({schema:n}))}toSchema(){return new C({value:Array.from(this.safeBags,e=>e.toSchema())})}toJSON(){return{safeBags:Array.from(this.safeBags,e=>e.toJSON())}}}Xn.CLASS_NAME="SafeContents";const Sh="otherCertFormat",Ah="otherCert",cV=[Sh,Ah];class ki extends G{constructor(e={}){super(),this.otherCertFormat=d(e,Sh,ki.defaultValues(Sh)),this.otherCert=d(e,Ah,ki.defaultValues(Ah)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Sh:return g;case Ah:return new Ce;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new he({name:t.otherCertFormat||Sh}),new Ce({name:t.otherCert||Ah})]})}fromSchema(e){X(e,cV);const t=q(e,e,ki.schema());W.assertSchema(t,this.className),this.otherCertFormat=t.result.otherCertFormat.valueBlock.toString(),this.otherCert=t.result.otherCert}toSchema(){return new C({value:[new he({value:this.otherCertFormat}),this.otherCert]})}toJSON(){const e={otherCertFormat:this.otherCertFormat};return this.otherCert instanceof Ce||(e.otherCert=this.otherCert.toJSON()),e}}const kh="certificates",uV=[kh];class An extends G{constructor(e={}){super(),this.certificates=d(e,kh,An.defaultValues(kh)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case kh:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new bt({name:t.blockName||g,value:[new _e({name:t.certificates||kh,value:new lt({value:[He.schema(),new P({idBlock:{tagClass:3,tagNumber:0},value:[new Ce]}),new P({idBlock:{tagClass:3,tagNumber:1},value:[new C]}),new P({idBlock:{tagClass:3,tagNumber:2},value:Bs.schema().valueBlock.value}),new P({idBlock:{tagClass:3,tagNumber:3},value:ki.schema().valueBlock.value})]})})]})}fromSchema(e){X(e,uV);const t=q(e,e,An.schema());W.assertSchema(t,this.className),this.certificates=Array.from(t.result.certificates||[],n=>{const r=n.idBlock.tagNumber;if(n.idBlock.tagClass===1)return new He({schema:n});const i=new C({value:n.valueBlock.value});switch(r){case 1:return i.valueBlock.value[0].valueBlock.value[0].valueBlock.valueDec===1?new Bs({schema:i}):new Gn({schema:i});case 2:return new Bs({schema:i});case 3:return new ki({schema:i})}return n})}toSchema(){return new bt({value:Array.from(this.certificates,e=>{switch(!0){case e instanceof He:return e.toSchema();case e instanceof Gn:return new P({idBlock:{tagClass:3,tagNumber:1},value:e.toSchema().valueBlock.value});case e instanceof Bs:return new P({idBlock:{tagClass:3,tagNumber:2},value:e.toSchema().valueBlock.value});case e instanceof ki:return new P({idBlock:{tagClass:3,tagNumber:3},value:e.toSchema().valueBlock.value})}return e.toSchema()})})}toJSON(){return{certificates:Array.from(this.certificates,e=>e.toJSON())}}}An.CLASS_NAME="CertificateSet";const Eh="otherRevInfoFormat",Ch="otherRevInfo",hV=[Eh,Ch];class sr extends G{constructor(e={}){super(),this.otherRevInfoFormat=d(e,Eh,sr.defaultValues(Eh)),this.otherRevInfo=d(e,Ch,sr.defaultValues(Ch)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Eh:return g;case Ch:return new Ce;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new he({name:t.otherRevInfoFormat||Eh}),new Ce({name:t.otherRevInfo||Ch})]})}fromSchema(e){X(e,hV);const t=q(e,e,sr.schema());W.assertSchema(t,this.className),this.otherRevInfoFormat=t.result.otherRevInfoFormat.valueBlock.toString(),this.otherRevInfo=t.result.otherRevInfo}toSchema(){return new C({value:[new he({value:this.otherRevInfoFormat}),this.otherRevInfo]})}toJSON(){const e={otherRevInfoFormat:this.otherRevInfoFormat};return this.otherRevInfo instanceof Ce||(e.otherRevInfo=this.otherRevInfo.toJSON()),e}}sr.CLASS_NAME="OtherRevocationInfoFormat";const Nh="crls",Jg="otherRevocationInfos",fV=[Nh];class nr extends G{constructor(e={}){super(),this.crls=d(e,Nh,nr.defaultValues(Nh)),this.otherRevocationInfos=d(e,Jg,nr.defaultValues(Jg)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Nh:return[];case Jg:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new bt({name:t.blockName||g,value:[new _e({name:t.crls||g,value:new lt({value:[Et.schema(),new P({idBlock:{tagClass:3,tagNumber:1},value:[new he,new Ce]})]})})]})}fromSchema(e){X(e,fV);const t=q(e,e,nr.schema({names:{crls:Nh}}));if(W.assertSchema(t,this.className),t.result.crls)for(const n of t.result.crls)n.idBlock.tagClass===1?this.crls.push(new Et({schema:n})):this.otherRevocationInfos.push(new sr({schema:n}))}toSchema(){const e=[];return e.push(...Array.from(this.crls,t=>t.toSchema())),e.push(...Array.from(this.otherRevocationInfos,t=>{const n=t.toSchema();return n.idBlock.tagClass=3,n.idBlock.tagNumber=1,n})),new bt({value:e})}toJSON(){return{crls:Array.from(this.crls,e=>e.toJSON()),otherRevocationInfos:Array.from(this.otherRevocationInfos,e=>e.toJSON())}}}nr.CLASS_NAME="RevocationInfoChoices";const Ih="certs",Aa="crls",dV=[Ih,Aa];class oo extends G{constructor(e={}){super(),this.crls=d(e,Aa,oo.defaultValues(Aa)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ih:return new An;case Aa:return new nr;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ih:return t.certificates.length===0;case Aa:return t.crls.length===0&&t.otherRevocationInfos.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new P({name:t.certs||g,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:An.schema().valueBlock.value}),new P({name:t.crls||g,optional:!0,idBlock:{tagClass:3,tagNumber:1},value:nr.schema().valueBlock.value})]})}fromSchema(e){X(e,dV);const t=q(e,e,oo.schema({names:{certs:Ih,crls:Aa}}));W.assertSchema(t,this.className),Ih in t.result&&(this.certs=new An({schema:new bt({value:t.result.certs.valueBlock.value})})),Aa in t.result&&(this.crls=new nr({schema:new bt({value:t.result.crls.valueBlock.value})}))}toSchema(){const e=[];return this.certs&&e.push(new P({idBlock:{tagClass:3,tagNumber:0},value:this.certs.toSchema().valueBlock.value})),this.crls&&e.push(new P({idBlock:{tagClass:3,tagNumber:1},value:this.crls.toSchema().valueBlock.value})),new C({value:e})}toJSON(){const e={};return this.certs&&(e.certs=this.certs.toJSON()),this.crls&&(e.crls=this.crls.toJSON()),e}}oo.CLASS_NAME="OriginatorInfo";const _h="issuer",Bh="serialNumber",mV=[_h,Bh];class Bt extends G{constructor(e={}){super(),this.issuer=d(e,_h,Bt.defaultValues(_h)),this.serialNumber=d(e,Bh,Bt.defaultValues(Bh)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case _h:return new Xe;case Bh:return new U;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[Xe.schema(t.issuer||{}),new U({name:t.serialNumber||g})]})}fromSchema(e){X(e,mV);const t=q(e,e,Bt.schema({names:{issuer:{names:{blockName:_h}},serialNumber:Bh}}));W.assertSchema(t,this.className),this.issuer=new Xe({schema:t.result.issuer}),this.serialNumber=t.result.serialNumber}toSchema(){return new C({value:[this.issuer.toSchema(),this.serialNumber]})}toJSON(){return{issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()}}}Bt.CLASS_NAME="IssuerAndSerialNumber";const od="variant",Wc="value",gV=["blockName"];class gc extends G{constructor(e={}){super(),this.variant=d(e,od,gc.defaultValues(od)),Wc in e&&(this.value=d(e,Wc,gc.defaultValues(Wc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case od:return-1;case Wc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case od:return t===-1;case Wc:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new lt({value:[Bt.schema({names:{blockName:t.blockName||g}}),new ke({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:0}})]})}fromSchema(e){X(e,gV);const t=q(e,e,gc.schema({names:{blockName:"blockName"}}));W.assertSchema(t,this.className),t.result.blockName.idBlock.tagClass===1?(this.variant=1,this.value=new Bt({schema:t.result.blockName})):(this.variant=2,this.value=new Q({valueHex:t.result.blockName.valueBlock.valueHex}))}toSchema(){switch(this.variant){case 1:if(!(this.value instanceof Bt))throw new Error("Incorrect type of RecipientIdentifier.value. It should be IssuerAndSerialNumber.");return this.value.toSchema();case 2:if(!(this.value instanceof Q))throw new Error("Incorrect type of RecipientIdentifier.value. It should be ASN.1 OctetString.");return new ke({idBlock:{tagClass:3,tagNumber:0},valueHex:this.value.valueBlock.valueHexView});default:return new Ce}}toJSON(){const e={variant:this.variant};return(this.variant===1||this.variant===2)&&this.value&&(e.value=this.value.toJSON()),e}}gc.CLASS_NAME="RecipientIdentifier";const ka="version",tl="rid",sl="keyEncryptionAlgorithm",nl="encryptedKey",ld="recipientCertificate",pV=[ka,tl,sl,nl];class Ss extends G{constructor(e={}){super(),this.version=d(e,ka,Ss.defaultValues(ka)),this.rid=d(e,tl,Ss.defaultValues(tl)),this.keyEncryptionAlgorithm=d(e,sl,Ss.defaultValues(sl)),this.encryptedKey=d(e,nl,Ss.defaultValues(nl)),this.recipientCertificate=d(e,ld,Ss.defaultValues(ld)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ka:return-1;case tl:return{};case sl:return new H;case nl:return new Q;case ld:return new He;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ka:return t===Ss.defaultValues(ka);case tl:return Object.keys(t).length===0;case sl:case nl:return t.isEqual(Ss.defaultValues(e));case ld:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new U({name:t.version||g}),gc.schema(t.rid||{}),H.schema(t.keyEncryptionAlgorithm||{}),new Q({name:t.encryptedKey||g})]})}fromSchema(e){X(e,pV);const t=q(e,e,Ss.schema({names:{version:ka,rid:{names:{blockName:tl}},keyEncryptionAlgorithm:{names:{blockName:sl}},encryptedKey:nl}}));W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,t.result.rid.idBlock.tagClass===3?this.rid=new Q({valueHex:t.result.rid.valueBlock.valueHex}):this.rid=new Bt({schema:t.result.rid}),this.keyEncryptionAlgorithm=new H({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){const e=[];return this.rid instanceof Bt?(this.version=0,e.push(new U({value:this.version})),e.push(this.rid.toSchema())):(this.version=2,e.push(new U({value:this.version})),e.push(new ke({idBlock:{tagClass:3,tagNumber:0},valueHex:this.rid.valueBlock.valueHexView}))),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new C({value:e})}toJSON(){return{version:this.version,rid:this.rid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}Ss.CLASS_NAME="KeyTransRecipientInfo";const rl="algorithm",il="publicKey",wV=[rl,il];class Qn extends G{constructor(e={}){super(),this.algorithm=d(e,rl,Qn.defaultValues(rl)),this.publicKey=d(e,il,Qn.defaultValues(il)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case rl:return new H;case il:return new Pe;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case rl:case il:return t.isEqual(Qn.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[H.schema(t.algorithm||{}),new Pe({name:t.publicKey||g})]})}fromSchema(e){X(e,wV);const t=q(e,e,Qn.schema({names:{algorithm:{names:{blockName:rl}},publicKey:il}}));W.assertSchema(t,this.className),this.algorithm=new H({schema:t.result.algorithm}),this.publicKey=t.result.publicKey}toSchema(){return new C({value:[this.algorithm.toSchema(),this.publicKey]})}toJSON(){return{algorithm:this.algorithm.toJSON(),publicKey:this.publicKey.toJSON()}}}Qn.CLASS_NAME="OriginatorPublicKey";const cd="variant",qc="value",yV=["blockName"];class rr extends G{constructor(e={}){super(),this.variant=d(e,cd,rr.defaultValues(cd)),qc in e&&(this.value=d(e,qc,rr.defaultValues(qc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case cd:return-1;case qc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case cd:return t===-1;case qc:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new lt({value:[Bt.schema({names:{blockName:t.blockName||g}}),new ke({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||g}),new P({idBlock:{tagClass:3,tagNumber:1},name:t.blockName||g,value:Qn.schema().valueBlock.value})]})}fromSchema(e){X(e,yV);const t=q(e,e,rr.schema({names:{blockName:"blockName"}}));W.assertSchema(t,this.className),t.result.blockName.idBlock.tagClass===1?(this.variant=1,this.value=new Bt({schema:t.result.blockName})):t.result.blockName.idBlock.tagNumber===0?(t.result.blockName.idBlock.tagClass=1,t.result.blockName.idBlock.tagNumber=4,this.variant=2,this.value=t.result.blockName):(this.variant=3,this.value=new Qn({schema:new C({value:t.result.blockName.valueBlock.value})}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return this.value.idBlock.tagClass=3,this.value.idBlock.tagNumber=0,this.value;case 3:{const e=this.value.toSchema();return e.idBlock.tagClass=3,e.idBlock.tagNumber=1,e}default:return new Ce}}toJSON(){const e={variant:this.variant};return(this.variant===1||this.variant===2||this.variant===3)&&(e.value=this.value.toJSON()),e}}rr.CLASS_NAME="OriginatorIdentifierOrKey";const al="keyAttrId",hn="keyAttr",vV=[al,hn];class nn extends G{constructor(e={}){super(),this.keyAttrId=d(e,al,nn.defaultValues(al)),hn in e&&(this.keyAttr=d(e,hn,nn.defaultValues(hn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case al:return g;case hn:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case al:return typeof t=="string"&&t===g;case hn:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({optional:t.optional||!0,name:t.blockName||g,value:[new he({name:t.keyAttrId||g}),new Ce({optional:!0,name:t.keyAttr||g})]})}fromSchema(e){X(e,vV);const t=q(e,e,nn.schema({names:{keyAttrId:al,keyAttr:hn}}));W.assertSchema(t,this.className),this.keyAttrId=t.result.keyAttrId.valueBlock.toString(),hn in t.result&&(this.keyAttr=t.result.keyAttr)}toSchema(){const e=[];return e.push(new he({value:this.keyAttrId})),hn in this&&e.push(this.keyAttr),new C({value:e})}toJSON(){const e={keyAttrId:this.keyAttrId};return hn in this&&(e.keyAttr=this.keyAttr.toJSON()),e}}nn.CLASS_NAME="OtherKeyAttribute";const Ea="subjectKeyIdentifier",Mr="date",Hr="other",bV=[Ea,Mr,Hr];class yn extends G{constructor(e={}){super(),this.subjectKeyIdentifier=d(e,Ea,yn.defaultValues(Ea)),Mr in e&&(this.date=d(e,Mr,yn.defaultValues(Mr))),Hr in e&&(this.other=d(e,Hr,yn.defaultValues(Hr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ea:return new Q;case Mr:return new ot;case Hr:return new nn;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ea:return t.isEqual(yn.defaultValues(Ea));case Mr:return t.year===0&&t.month===0&&t.day===0&&t.hour===0&&t.minute===0&&t.second===0&&t.millisecond===0;case Hr:return t.keyAttrId===g&&!("keyAttr"in t);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new Q({name:t.subjectKeyIdentifier||g}),new ot({optional:!0,name:t.date||g}),nn.schema(t.other||{})]})}fromSchema(e){X(e,bV);const t=q(e,e,yn.schema({names:{subjectKeyIdentifier:Ea,date:Mr,other:{names:{blockName:Hr}}}}));W.assertSchema(t,this.className),this.subjectKeyIdentifier=t.result.subjectKeyIdentifier,Mr in t.result&&(this.date=t.result.date),Hr in t.result&&(this.other=new nn({schema:t.result.other}))}toSchema(){const e=[];return e.push(this.subjectKeyIdentifier),this.date&&e.push(this.date),this.other&&e.push(this.other.toSchema()),new C({value:e})}toJSON(){const e={subjectKeyIdentifier:this.subjectKeyIdentifier.toJSON()};return this.date&&(e.date=this.date.toJSON()),this.other&&(e.other=this.other.toJSON()),e}}yn.CLASS_NAME="RecipientKeyIdentifier";const ud="variant",hd="value",SV=["blockName"];class kn extends G{constructor(e={}){super(),this.variant=d(e,ud,kn.defaultValues(ud)),this.value=d(e,hd,kn.defaultValues(hd)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ud:return-1;case hd:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ud:return t===-1;case hd:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new lt({value:[Bt.schema(t.issuerAndSerialNumber||{names:{blockName:t.blockName||g}}),new P({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:0},value:yn.schema(t.rKeyId||{names:{blockName:t.blockName||g}}).valueBlock.value})]})}fromSchema(e){X(e,SV);const t=q(e,e,kn.schema({names:{blockName:"blockName"}}));W.assertSchema(t,this.className),t.result.blockName.idBlock.tagClass===1?(this.variant=1,this.value=new Bt({schema:t.result.blockName})):(this.variant=2,this.value=new yn({schema:new C({value:t.result.blockName.valueBlock.value})}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new P({idBlock:{tagClass:3,tagNumber:0},value:this.value.toSchema().valueBlock.value});default:return new Ce}}toJSON(){const e={variant:this.variant};return(this.variant===1||this.variant===2)&&(e.value=this.value.toJSON()),e}}kn.CLASS_NAME="KeyAgreeRecipientIdentifier";const ol="rid",Ca="encryptedKey",AV=[ol,Ca];class zn extends G{constructor(e={}){super(),this.rid=d(e,ol,zn.defaultValues(ol)),this.encryptedKey=d(e,Ca,zn.defaultValues(Ca)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ol:return new kn;case Ca:return new Q;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ol:return t.variant===-1&&!("value"in t);case Ca:return t.isEqual(zn.defaultValues(Ca));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[kn.schema(t.rid||{}),new Q({name:t.encryptedKey||g})]})}fromSchema(e){X(e,AV);const t=q(e,e,zn.schema({names:{rid:{names:{blockName:ol}},encryptedKey:Ca}}));W.assertSchema(t,this.className),this.rid=new kn({schema:t.result.rid}),this.encryptedKey=t.result.encryptedKey}toSchema(){return new C({value:[this.rid.toSchema(),this.encryptedKey]})}toJSON(){return{rid:this.rid.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}zn.CLASS_NAME="RecipientEncryptedKey";const fd="encryptedKeys",i0="RecipientEncryptedKeys",kV=[i0];class Ei extends G{constructor(e={}){super(),this.encryptedKeys=d(e,fd,Ei.defaultValues(fd)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case fd:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case fd:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new _e({name:t.RecipientEncryptedKeys||g,value:zn.schema()})]})}fromSchema(e){X(e,kV);const t=q(e,e,Ei.schema({names:{RecipientEncryptedKeys:i0}}));W.assertSchema(t,this.className),this.encryptedKeys=Array.from(t.result.RecipientEncryptedKeys,n=>new zn({schema:n}))}toSchema(){return new C({value:Array.from(this.encryptedKeys,e=>e.toSchema())})}toJSON(){return{encryptedKeys:Array.from(this.encryptedKeys,e=>e.toJSON())}}}Ei.CLASS_NAME="RecipientEncryptedKeys";const ll="version",cl="originator",Dn="ukm",ul="keyEncryptionAlgorithm",hl="recipientEncryptedKeys",dd="recipientCertificate",md="recipientPublicKey",EV=[ll,cl,Dn,ul,hl];class us extends G{constructor(e={}){super(),this.version=d(e,ll,us.defaultValues(ll)),this.originator=d(e,cl,us.defaultValues(cl)),Dn in e&&(this.ukm=d(e,Dn,us.defaultValues(Dn))),this.keyEncryptionAlgorithm=d(e,ul,us.defaultValues(ul)),this.recipientEncryptedKeys=d(e,hl,us.defaultValues(hl)),this.recipientCertificate=d(e,dd,us.defaultValues(dd)),this.recipientPublicKey=d(e,md,us.defaultValues(md)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ll:return 0;case cl:return new rr;case Dn:return new Q;case ul:return new H;case hl:return new Ei;case dd:return new He;case md:return null;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ll:return t===0;case cl:return t.variant===-1&&!("value"in t);case Dn:return t.isEqual(us.defaultValues(Dn));case ul:return t.algorithmId===g&&!("algorithmParams"in t);case hl:return t.encryptedKeys.length===0;case dd:return!1;case md:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new U({name:t.version||g}),new P({idBlock:{tagClass:3,tagNumber:0},value:[rr.schema(t.originator||{})]}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Q({name:t.ukm||g})]}),H.schema(t.keyEncryptionAlgorithm||{}),Ei.schema(t.recipientEncryptedKeys||{})]})}fromSchema(e){X(e,EV);const t=q(e,e,us.schema({names:{version:ll,originator:{names:{blockName:cl}},ukm:Dn,keyEncryptionAlgorithm:{names:{blockName:ul}},recipientEncryptedKeys:{names:{blockName:hl}}}}));W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.originator=new rr({schema:t.result.originator}),Dn in t.result&&(this.ukm=t.result.ukm),this.keyEncryptionAlgorithm=new H({schema:t.result.keyEncryptionAlgorithm}),this.recipientEncryptedKeys=new Ei({schema:t.result.recipientEncryptedKeys})}toSchema(){const e=[];return e.push(new U({value:this.version})),e.push(new P({idBlock:{tagClass:3,tagNumber:0},value:[this.originator.toSchema()]})),this.ukm&&e.push(new P({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[this.ukm]})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.recipientEncryptedKeys.toSchema()),new C({value:e})}toJSON(){const e={version:this.version,originator:this.originator.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),recipientEncryptedKeys:this.recipientEncryptedKeys.toJSON()};return this.ukm&&(e.ukm=this.ukm.toJSON()),e}}us.CLASS_NAME="KeyAgreeRecipientInfo";const Na="keyIdentifier",$r="date",Fr="other",CV=[Na,$r,Fr];class Qs extends G{constructor(e={}){super(),this.keyIdentifier=d(e,Na,Qs.defaultValues(Na)),$r in e&&(this.date=d(e,$r,Qs.defaultValues($r))),Fr in e&&(this.other=d(e,Fr,Qs.defaultValues(Fr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Na:return new Q;case $r:return new ot;case Fr:return new nn;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Na:return t.isEqual(Qs.defaultValues(Na));case $r:return t.year===0&&t.month===0&&t.day===0&&t.hour===0&&t.minute===0&&t.second===0&&t.millisecond===0;case Fr:return t.compareWithDefault("keyAttrId",t.keyAttrId)&&!("keyAttr"in t);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new Q({name:t.keyIdentifier||g}),new ot({optional:!0,name:t.date||g}),nn.schema(t.other||{})]})}fromSchema(e){X(e,CV);const t=q(e,e,Qs.schema({names:{keyIdentifier:Na,date:$r,other:{names:{blockName:Fr}}}}));W.assertSchema(t,this.className),this.keyIdentifier=t.result.keyIdentifier,$r in t.result&&(this.date=t.result.date),Fr in t.result&&(this.other=new nn({schema:t.result.other}))}toSchema(){const e=[];return e.push(this.keyIdentifier),this.date&&e.push(this.date),this.other&&e.push(this.other.toSchema()),new C({value:e})}toJSON(){const e={keyIdentifier:this.keyIdentifier.toJSON()};return this.date&&(e.date=this.date),this.other&&(e.other=this.other.toJSON()),e}}Qs.CLASS_NAME="KEKIdentifier";const fl="version",dl="kekid",ml="keyEncryptionAlgorithm",Ia="encryptedKey",gd="preDefinedKEK",NV=[fl,dl,ml,Ia];class As extends G{constructor(e={}){super(),this.version=d(e,fl,As.defaultValues(fl)),this.kekid=d(e,dl,As.defaultValues(dl)),this.keyEncryptionAlgorithm=d(e,ml,As.defaultValues(ml)),this.encryptedKey=d(e,Ia,As.defaultValues(Ia)),this.preDefinedKEK=d(e,gd,As.defaultValues(gd)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case fl:return 0;case dl:return new Qs;case ml:return new H;case Ia:return new Q;case gd:return _t;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"KEKRecipientInfo":return t===As.defaultValues(fl);case dl:return t.compareWithDefault("keyIdentifier",t.keyIdentifier)&&!("date"in t)&&!("other"in t);case ml:return t.algorithmId===g&&!("algorithmParams"in t);case Ia:return t.isEqual(As.defaultValues(Ia));case gd:return t.byteLength===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new U({name:t.version||g}),Qs.schema(t.kekid||{}),H.schema(t.keyEncryptionAlgorithm||{}),new Q({name:t.encryptedKey||g})]})}fromSchema(e){X(e,NV);const t=q(e,e,As.schema({names:{version:fl,kekid:{names:{blockName:dl}},keyEncryptionAlgorithm:{names:{blockName:ml}},encryptedKey:Ia}}));W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.kekid=new Qs({schema:t.result.kekid}),this.keyEncryptionAlgorithm=new H({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){return new C({value:[new U({value:this.version}),this.kekid.toSchema(),this.keyEncryptionAlgorithm.toSchema(),this.encryptedKey]})}toJSON(){return{version:this.version,kekid:this.kekid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}As.CLASS_NAME="KEKRecipientInfo";const gl="version",jr="keyDerivationAlgorithm",pl="keyEncryptionAlgorithm",_a="encryptedKey",pd="password",IV=[gl,jr,pl,_a];class Ps extends G{constructor(e={}){super(),this.version=d(e,gl,Ps.defaultValues(gl)),jr in e&&(this.keyDerivationAlgorithm=d(e,jr,Ps.defaultValues(jr))),this.keyEncryptionAlgorithm=d(e,pl,Ps.defaultValues(pl)),this.encryptedKey=d(e,_a,Ps.defaultValues(_a)),this.password=d(e,pd,Ps.defaultValues(pd)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case gl:return-1;case jr:return new H;case pl:return new H;case _a:return new Q;case pd:return _t;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case gl:return t===-1;case jr:case pl:return t.algorithmId===g&&!("algorithmParams"in t);case _a:return t.isEqual(Ps.defaultValues(_a));case pd:return t.byteLength===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new U({name:t.version||g}),new P({name:t.keyDerivationAlgorithm||g,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:H.schema().valueBlock.value}),H.schema(t.keyEncryptionAlgorithm||{}),new Q({name:t.encryptedKey||g})]})}fromSchema(e){X(e,IV);const t=q(e,e,Ps.schema({names:{version:gl,keyDerivationAlgorithm:jr,keyEncryptionAlgorithm:{names:{blockName:pl}},encryptedKey:_a}}));W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,jr in t.result&&(this.keyDerivationAlgorithm=new H({schema:new C({value:t.result.keyDerivationAlgorithm.valueBlock.value})})),this.keyEncryptionAlgorithm=new H({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){const e=[];return e.push(new U({value:this.version})),this.keyDerivationAlgorithm&&e.push(new P({idBlock:{tagClass:3,tagNumber:0},value:this.keyDerivationAlgorithm.toSchema().valueBlock.value})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new C({value:e})}toJSON(){const e={version:this.version,keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()};return this.keyDerivationAlgorithm&&(e.keyDerivationAlgorithm=this.keyDerivationAlgorithm.toJSON()),e}}Ps.CLASS_NAME="PasswordRecipientInfo";const wl="oriType",Ba="oriValue",_V=[wl,Ba];class gi extends G{constructor(e={}){super(),this.oriType=d(e,wl,gi.defaultValues(wl)),this.oriValue=d(e,Ba,gi.defaultValues(Ba)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wl:return g;case Ba:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wl:return t===g;case Ba:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new he({name:t.oriType||g}),new Ce({name:t.oriValue||g})]})}fromSchema(e){X(e,_V);const t=q(e,e,gi.schema({names:{oriType:wl,oriValue:Ba}}));W.assertSchema(t,this.className),this.oriType=t.result.oriType.valueBlock.toString(),this.oriValue=t.result.oriValue}toSchema(){return new C({value:[new he({value:this.oriType}),this.oriValue]})}toJSON(){const e={oriType:this.oriType};return gi.compareWithDefault(Ba,this.oriValue)||(e.oriValue=this.oriValue.toJSON()),e}}gi.CLASS_NAME="OtherRecipientInfo";const wd="variant",Gc="value",BV=["blockName"];class Us extends G{constructor(e={}){super(),this.variant=d(e,wd,Us.defaultValues(wd)),Gc in e&&(this.value=d(e,Gc,Us.defaultValues(Gc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wd:return-1;case Gc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wd:return t===Us.defaultValues(e);case Gc:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new lt({value:[Ss.schema({names:{blockName:t.blockName||g}}),new P({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:1},value:us.schema().valueBlock.value}),new P({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:2},value:As.schema().valueBlock.value}),new P({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:3},value:Ps.schema().valueBlock.value}),new P({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:4},value:gi.schema().valueBlock.value})]})}fromSchema(e){X(e,BV);const t=q(e,e,Us.schema({names:{blockName:"blockName"}}));if(W.assertSchema(t,this.className),t.result.blockName.idBlock.tagClass===1)this.variant=1,this.value=new Ss({schema:t.result.blockName});else{const n=new C({value:t.result.blockName.valueBlock.value});switch(t.result.blockName.idBlock.tagNumber){case 1:this.variant=2,this.value=new us({schema:n});break;case 2:this.variant=3,this.value=new As({schema:n});break;case 3:this.variant=4,this.value=new Ps({schema:n});break;case 4:this.variant=5,this.value=new gi({schema:n});break;default:throw new Error("Incorrect structure of RecipientInfo block")}}}toSchema(){Me.assertEmpty(this.value,"value","RecipientInfo");const e=this.value.toSchema();switch(this.variant){case 1:return e;case 2:case 3:case 4:return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.variant-1,e;default:return new Ce}}toJSON(){const e={variant:this.variant};return this.value&&this.variant>=1&&this.variant<=4&&(e.value=this.value.toJSON()),e}}Us.CLASS_NAME="RecipientInfo";const Kr="hashAlgorithm",Jr="maskGenAlgorithm",Wr="pSourceAlgorithm",xV=[Kr,Jr,Wr];class ts extends G{constructor(e={}){super(),this.hashAlgorithm=d(e,Kr,ts.defaultValues(Kr)),this.maskGenAlgorithm=d(e,Jr,ts.defaultValues(Jr)),this.pSourceAlgorithm=d(e,Wr,ts.defaultValues(Wr)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Kr:return new H({algorithmId:"1.3.14.3.2.26",algorithmParams:new pt});case Jr:return new H({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new H({algorithmId:"1.3.14.3.2.26",algorithmParams:new pt}).toSchema()});case Wr:return new H({algorithmId:"1.2.840.113549.1.1.9",algorithmParams:new Q({valueHex:new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer})});default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new P({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[H.schema(t.hashAlgorithm||{})]}),new P({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[H.schema(t.maskGenAlgorithm||{})]}),new P({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[H.schema(t.pSourceAlgorithm||{})]})]})}fromSchema(e){X(e,xV);const t=q(e,e,ts.schema({names:{hashAlgorithm:{names:{blockName:Kr}},maskGenAlgorithm:{names:{blockName:Jr}},pSourceAlgorithm:{names:{blockName:Wr}}}}));W.assertSchema(t,this.className),Kr in t.result&&(this.hashAlgorithm=new H({schema:t.result.hashAlgorithm})),Jr in t.result&&(this.maskGenAlgorithm=new H({schema:t.result.maskGenAlgorithm})),Wr in t.result&&(this.pSourceAlgorithm=new H({schema:t.result.pSourceAlgorithm}))}toSchema(){const e=[];return this.hashAlgorithm.isEqual(ts.defaultValues(Kr))||e.push(new P({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(ts.defaultValues(Jr))||e.push(new P({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.pSourceAlgorithm.isEqual(ts.defaultValues(Wr))||e.push(new P({idBlock:{tagClass:3,tagNumber:2},value:[this.pSourceAlgorithm.toSchema()]})),new C({value:e})}toJSON(){const e={};return this.hashAlgorithm.isEqual(ts.defaultValues(Kr))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(ts.defaultValues(Jr))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.pSourceAlgorithm.isEqual(ts.defaultValues(Wr))||(e.pSourceAlgorithm=this.pSourceAlgorithm.toJSON()),e}}ts.CLASS_NAME="RSAESOAEPParams";const yl="keyInfo",qr="entityUInfo",vl="suppPubInfo",TV=[yl,qr,vl];class jn extends G{constructor(e={}){super(),this.keyInfo=d(e,yl,jn.defaultValues(yl)),qr in e&&(this.entityUInfo=d(e,qr,jn.defaultValues(qr))),this.suppPubInfo=d(e,vl,jn.defaultValues(vl)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case yl:return new H;case qr:return new Q;case vl:return new Q;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case yl:case qr:case vl:return t.isEqual(jn.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[H.schema(t.keyInfo||{}),new P({name:t.entityUInfo||g,idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[new Q]}),new P({name:t.suppPubInfo||g,idBlock:{tagClass:3,tagNumber:2},value:[new Q]})]})}fromSchema(e){X(e,TV);const t=q(e,e,jn.schema({names:{keyInfo:{names:{blockName:yl}},entityUInfo:qr,suppPubInfo:vl}}));W.assertSchema(t,this.className),this.keyInfo=new H({schema:t.result.keyInfo}),qr in t.result&&(this.entityUInfo=t.result.entityUInfo.valueBlock.value[0]),this.suppPubInfo=t.result.suppPubInfo.valueBlock.value[0]}toSchema(){const e=[];return e.push(this.keyInfo.toSchema()),this.entityUInfo&&e.push(new P({idBlock:{tagClass:3,tagNumber:0},value:[this.entityUInfo]})),e.push(new P({idBlock:{tagClass:3,tagNumber:2},value:[this.suppPubInfo]})),new C({value:e})}toJSON(){const e={keyInfo:this.keyInfo.toJSON(),suppPubInfo:this.suppPubInfo.toJSON()};return this.entityUInfo&&(e.entityUInfo=this.entityUInfo.toJSON()),e}}jn.CLASS_NAME="ECCCMSSharedInfo";const bl="version",Gr="originatorInfo",Sl="recipientInfos",Al="encryptedContentInfo",Yr="unprotectedAttrs",RV=[bl,Gr,Sl,Al,Yr],Gb={kdfAlgorithm:"SHA-512",kekEncryptionLength:256},OV={"P-256":256,"P-384":384,"P-521":528};class Ys extends G{constructor(e={}){super(),this.version=d(e,bl,Ys.defaultValues(bl)),Gr in e&&(this.originatorInfo=d(e,Gr,Ys.defaultValues(Gr))),this.recipientInfos=d(e,Sl,Ys.defaultValues(Sl)),this.encryptedContentInfo=d(e,Al,Ys.defaultValues(Al)),Yr in e&&(this.unprotectedAttrs=d(e,Yr,Ys.defaultValues(Yr))),this.policy={disableSplit:!!e.disableSplit},e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case bl:return 0;case Gr:return new oo;case Sl:return[];case Al:return new vt;case Yr:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case bl:return t===Ys.defaultValues(e);case Gr:return t.certs.certificates.length===0&&t.crls.crls.length===0;case Sl:case Yr:return t.length===0;case Al:return vt.compareWithDefault("contentType",t.contentType)&&vt.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&vt.compareWithDefault("encryptedContent",t.encryptedContent);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new U({name:t.version||g}),new P({name:t.originatorInfo||g,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:oo.schema().valueBlock.value}),new bt({value:[new _e({name:t.recipientInfos||g,value:Us.schema()})]}),vt.schema(t.encryptedContentInfo||{}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new _e({name:t.unprotectedAttrs||g,value:st.schema()})]})]})}fromSchema(e){X(e,RV);const t=q(e,e,Ys.schema({names:{version:bl,originatorInfo:Gr,recipientInfos:Sl,encryptedContentInfo:{names:{blockName:Al}},unprotectedAttrs:Yr}}));W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,Gr in t.result&&(this.originatorInfo=new oo({schema:new C({value:t.result.originatorInfo.valueBlock.value})})),this.recipientInfos=Array.from(t.result.recipientInfos,n=>new Us({schema:n})),this.encryptedContentInfo=new vt({schema:t.result.encryptedContentInfo}),Yr in t.result&&(this.unprotectedAttrs=Array.from(t.result.unprotectedAttrs,n=>new st({schema:n})))}toSchema(){const e=[];return e.push(new U({value:this.version})),this.originatorInfo&&e.push(new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:this.originatorInfo.toSchema().valueBlock.value})),e.push(new bt({value:Array.from(this.recipientInfos,t=>t.toSchema())})),e.push(this.encryptedContentInfo.toSchema()),this.unprotectedAttrs&&e.push(new P({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,t=>t.toSchema())})),new C({value:e})}toJSON(){const e={version:this.version,recipientInfos:Array.from(this.recipientInfos,t=>t.toJSON()),encryptedContentInfo:this.encryptedContentInfo.toJSON()};return this.originatorInfo&&(e.originatorInfo=this.originatorInfo.toJSON()),this.unprotectedAttrs&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,t=>t.toJSON())),e}addRecipientByCertificate(e,t,n,r=Ie(!0)){const i=Object.assign({useOAEP:!0,oaepHashAlgorithm:"SHA-512"},Gb,t||{});if(e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.113549")!==-1)n=1;else if(e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.10045")!==-1)n=2;else throw new Error(`Unknown type of certificate's public key: ${e.subjectPublicKeyInfo.algorithm.algorithmId}`);switch(n){case 1:{let a,o;if(i.useOAEP===!0){a=r.getOIDByAlgorithm({name:"RSA-OAEP"},!0,"keyEncryptionAlgorithm");const c=r.getOIDByAlgorithm({name:i.oaepHashAlgorithm},!0,"RSAES-OAEP-params"),u=new H({algorithmId:c,algorithmParams:new pt});o=new ts({hashAlgorithm:u,maskGenAlgorithm:new H({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:u.toSchema()})}).toSchema()}else{if(a=r.getOIDByAlgorithm({name:"RSAES-PKCS1-v1_5"}),a===g)throw new Error("Can not find OID for RSAES-PKCS1-v1_5");o=new pt}const l=new Ss({version:0,rid:new Bt({issuer:e.issuer,serialNumber:e.serialNumber}),keyEncryptionAlgorithm:new H({algorithmId:a,algorithmParams:o}),recipientCertificate:e});this.recipientInfos.push(new Us({variant:1,value:l}))}break;case 2:{const a=new kn({variant:1,value:new Bt({issuer:e.issuer,serialNumber:e.serialNumber})});this._addKeyAgreeRecipientInfo(a,i,{recipientCertificate:e},r)}break;default:throw new Error(`Unknown "variant" value: ${n}`)}return!0}addRecipientByPreDefinedData(e,t={},n,r=Ie(!0)){if(Ye.assert(e,"preDefinedData","ArrayBuffer"),!e.byteLength)throw new Error("Pre-defined data could have zero length");if(!t.keyIdentifier){const i=new ArrayBuffer(16),a=new Uint8Array(i);r.getRandomValues(a),t.keyIdentifier=i}switch(t.hmacHashAlgorithm||(t.hmacHashAlgorithm="SHA-512"),t.iterationCount===void 0&&(t.iterationCount=2048),t.keyEncryptionAlgorithm||(t.keyEncryptionAlgorithm={name:"AES-KW",length:256}),t.keyEncryptionAlgorithmParams||(t.keyEncryptionAlgorithmParams=new pt),n){case 1:{const i=r.getOIDByAlgorithm(t.keyEncryptionAlgorithm,!0,"keyEncryptionAlgorithm"),a=new As({version:4,kekid:new Qs({keyIdentifier:new Q({valueHex:t.keyIdentifier})}),keyEncryptionAlgorithm:new H({algorithmId:i,algorithmParams:t.keyEncryptionAlgorithmParams}),preDefinedKEK:e});this.recipientInfos.push(new Us({variant:3,value:a}))}break;case 2:{const i=r.getOIDByAlgorithm({name:"PBKDF2"},!0,"keyDerivationAlgorithm"),a=new ArrayBuffer(64),o=new Uint8Array(a);r.getRandomValues(o);const l=r.getOIDByAlgorithm({name:"HMAC",hash:{name:t.hmacHashAlgorithm}},!0,"hmacHashAlgorithm"),c=new Yt({salt:new Q({valueHex:a}),iterationCount:t.iterationCount,prf:new H({algorithmId:l,algorithmParams:new pt})}),u=r.getOIDByAlgorithm(t.keyEncryptionAlgorithm,!0,"keyEncryptionAlgorithm"),f=new Ps({version:0,keyDerivationAlgorithm:new H({algorithmId:i,algorithmParams:c.toSchema()}),keyEncryptionAlgorithm:new H({algorithmId:u,algorithmParams:t.keyEncryptionAlgorithmParams}),password:e});this.recipientInfos.push(new Us({variant:4,value:f}))}break;default:throw new Error(`Unknown value for "variant": ${n}`)}}addRecipientByKeyIdentifier(e,t,n,r=Ie(!0)){const i=Object.assign({},Gb,n||{}),a=new kn({variant:2,value:new yn({subjectKeyIdentifier:new Q({valueHex:t})})});this._addKeyAgreeRecipientInfo(a,i,{recipientPublicKey:e},r)}_addKeyAgreeRecipientInfo(e,t,n,r=Ie(!0)){const i=new zn({rid:e}),a=r.getOIDByAlgorithm({name:"AES-KW",length:t.kekEncryptionLength},!0,"keyEncryptionAlgorithm"),o=new H({algorithmId:a}),l=r.getOIDByAlgorithm({name:"ECDH",kdf:t.kdfAlgorithm},!0,"KeyAgreeRecipientInfo"),c=new ArrayBuffer(64),u=new Uint8Array(c);r.getRandomValues(u);const f={version:3,ukm:new Q({valueHex:c}),keyEncryptionAlgorithm:new H({algorithmId:l,algorithmParams:o.toSchema()}),recipientEncryptedKeys:new Ei({encryptedKeys:[i]})},h=new us(Object.assign(f,n));this.recipientInfos.push(new Us({variant:2,value:h}))}async encrypt(e,t,n=Ie(!0)){const r=new ArrayBuffer(16),i=new Uint8Array(r);n.getRandomValues(i);const a=new Uint8Array(t),o=n.getOIDByAlgorithm(e,!0,"contentEncryptionAlgorithm"),l=await n.generateKey(e,!0,["encrypt"]),c=await n.encrypt({name:e.name,iv:i},l,a),u=await n.exportKey("raw",l);this.version=2,this.encryptedContentInfo=new vt({disableSplit:this.policy.disableSplit,contentType:"1.2.840.113549.1.7.1",contentEncryptionAlgorithm:new H({algorithmId:o,algorithmParams:new Q({valueHex:r})}),encryptedContent:new Q({valueHex:c})});const f=async k=>{const T=this.recipientInfos[k].value;let x,y;if(T.recipientPublicKey)x=T.recipientPublicKey.algorithm.namedCurve,y=T.recipientPublicKey;else if(T.recipientCertificate){const oe=T.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(oe.constructor.blockName()!==he.blockName())throw new Error(`Incorrect "recipientCertificate" for index ${k}`);switch(oe.valueBlock.toString()){case"1.2.840.10045.3.1.7":x="P-256";break;case"1.3.132.0.34":x="P-384";break;case"1.3.132.0.35":x="P-521";break;default:throw new Error(`Incorrect curve OID for index ${k}`)}y=await T.recipientCertificate.getPublicKey({algorithm:{algorithm:{name:"ECDH",namedCurve:x},usages:[]}},n)}else throw new Error("Unsupported RecipientInfo");const p=OV[x],E=await n.generateKey({name:"ECDH",namedCurve:x},!0,["deriveBits"]),N=await n.exportKey("spki",E.publicKey),L=await n.deriveBits({name:"ECDH",public:y},E.privateKey,p),M=new H({schema:T.keyEncryptionAlgorithm.algorithmParams}),F=n.getAlgorithmByOID(M.algorithmId,!0,"aesKWAlgorithm");let se=F.length;const ce=new ArrayBuffer(4),ee=new Uint8Array(ce);for(let oe=3;oe>=0;oe--)ee[oe]=se,se>>=8;const Ee=new jn({keyInfo:new H({algorithmId:M.algorithmId}),entityUInfo:T.ukm,suppPubInfo:new Q({valueHex:ce})}).toSchema().toBER(!1),ye=n.getAlgorithmByOID(T.keyEncryptionAlgorithm.algorithmId,!0,"ecdhAlgorithm"),ie=await Pb(ye.kdf,L,F.length,Ee,n),te=await n.importKey("raw",ie,{name:"AES-KW"},!0,["wrapKey"]),ae=await n.wrapKey("raw",l,te,{name:"AES-KW"}),Re=new rr;return Re.variant=3,Re.value=Qn.fromBER(N),T.originator=Re,T.recipientEncryptedKeys.encryptedKeys[0].encryptedKey=new Q({valueHex:ae}),{ecdhPrivateKey:E.privateKey}},h=async k=>{const T=this.recipientInfos[k].value,x=n.getAlgorithmByOID(T.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm");if(x.name==="RSA-OAEP"){const y=T.keyEncryptionAlgorithm.algorithmParams,p=new ts({schema:y});if(x.hash=n.getAlgorithmByOID(p.hashAlgorithm.algorithmId),!("name"in x.hash))throw new Error(`Incorrect OID for hash algorithm: ${p.hashAlgorithm.algorithmId}`)}try{const y=await T.recipientCertificate.getPublicKey({algorithm:{algorithm:x,usages:["encrypt","wrapKey"]}},n),p=await n.encrypt(y.algorithm,y,u);T.encryptedKey=new Q({valueHex:p})}catch{}},m=async k=>{const T=this.recipientInfos[k].value,x=n.getAlgorithmByOID(T.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm"),y=await n.importKey("raw",new Uint8Array(T.preDefinedKEK),x,!0,["wrapKey"]),p=await n.wrapKey("raw",l,y,x);T.encryptedKey=new Q({valueHex:p})},S=async k=>{const T=this.recipientInfos[k].value;let x;if(!T.keyDerivationAlgorithm)throw new Error('Please append encoded "keyDerivationAlgorithm"');if(!T.keyDerivationAlgorithm.algorithmParams)throw new Error('Incorrectly encoded "keyDerivationAlgorithm"');try{x=new Yt({schema:T.keyDerivationAlgorithm.algorithmParams})}catch{throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}const y=new Uint8Array(T.password),p=await n.importKey("raw",y,"PBKDF2",!1,["deriveKey"]),E=n.getAlgorithmByOID(T.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm");let N="SHA-1";x.prf&&(N=n.getAlgorithmByOID(x.prf.algorithmId,!0,"prfAlgorithm").hash.name);const L=new Uint8Array(x.salt.valueBlock.valueHex),M=x.iterationCount,F=await n.deriveKey({name:"PBKDF2",hash:{name:N},salt:L,iterations:M},p,E,!0,["wrapKey"]),se=await n.wrapKey("raw",l,F,E);T.encryptedKey=new Q({valueHex:se})},A=[];for(let k=0;k<this.recipientInfos.length;k++)switch(this.recipientInfos[k].variant){case 1:A.push(await h(k));break;case 2:A.push(await f(k));break;case 3:A.push(await m(k));break;case 4:A.push(await S(k));break;default:throw new Error(`Unknown recipient type in array with index ${k}`)}return A}async decrypt(e,t,n=Ie(!0)){const r=t||{};if(e+1>this.recipientInfos.length)throw new Error(`Maximum value for "index" is: ${this.recipientInfos.length-1}`);const i=async A=>{const k=this.recipientInfos[A].value;let T,x,y;const p=k.originator;if(r.recipientCertificate){const ye=r.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(ye.constructor.blockName()!==he.blockName())throw new Error(`Incorrect "recipientCertificate" for index ${A}`);T=ye.valueBlock.toString()}else if(p.value.algorithm.algorithmParams){const ye=p.value.algorithm.algorithmParams;if(ye.constructor.blockName()!==he.blockName())throw new Error(`Incorrect originator for index ${A}`);T=ye.valueBlock.toString()}else throw new Error('Parameter "recipientCertificate" is mandatory for "KeyAgreeRecipientInfo" if algorithm params are missing from originator');if(!r.recipientPrivateKey)throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyAgreeRecipientInfo"');switch(T){case"1.2.840.10045.3.1.7":x="P-256",y=256;break;case"1.3.132.0.34":x="P-384",y=384;break;case"1.3.132.0.35":x="P-521",y=528;break;default:throw new Error(`Incorrect curve OID for index ${A}`)}let E,N=n;be.isBufferSource(r.recipientPrivateKey)?E=await n.importKey("pkcs8",r.recipientPrivateKey,{name:"ECDH",namedCurve:x},!0,["deriveBits"]):(E=r.recipientPrivateKey,"crypto"in r&&r.crypto&&(N=r.crypto.subtle)),"algorithmParams"in p.value.algorithm||(p.value.algorithm.algorithmParams=new he({value:T}));const L=p.value.toSchema().toBER(!1),M=await n.importKey("spki",L,{name:"ECDH",namedCurve:x},!0,[]),F=await N.deriveBits({name:"ECDH",public:M},E,y);async function se(ye){ye=ye||!1;const ie=new H({schema:k.keyEncryptionAlgorithm.algorithmParams}),te=n.getAlgorithmByOID(ie.algorithmId,!0,"kwAlgorithm");let ae=te.length;const Re=new ArrayBuffer(4),oe=new Uint8Array(Re);for(let qe=3;qe>=0;qe--)oe[qe]=ae,ae>>=8;const de={algorithmId:ie.algorithmId};ye&&(de.algorithmParams=new pt);const Se=new jn({keyInfo:new H(de),entityUInfo:k.ukm,suppPubInfo:new Q({valueHex:Re})}).toSchema().toBER(!1),Be=n.getAlgorithmByOID(k.keyEncryptionAlgorithm.algorithmId,!0,"ecdhAlgorithm");if(!Be.name)throw new Error(`Incorrect OID for key encryption algorithm: ${k.keyEncryptionAlgorithm.algorithmId}`);return Pb(Be.kdf,F,te.length,Se,n)}const ce=await se(),ee=async ye=>n.importKey("raw",ye,{name:"AES-KW"},!0,["unwrapKey"]),fe=await ee(ce),Ee=async ye=>{const ie=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,te=n.getAlgorithmByOID(ie,!0,"contentEncryptionAlgorithm");return n.unwrapKey("raw",k.recipientEncryptedKeys.encryptedKeys[0].encryptedKey.valueBlock.valueHexView,ye,{name:"AES-KW"},te,!0,["decrypt"])};try{return await Ee(fe)}catch{const ye=await se(!0),ie=await ee(ye);return Ee(ie)}},a=async A=>{const k=this.recipientInfos[A].value;if(!r.recipientPrivateKey)throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyTransRecipientInfo"');const T=n.getAlgorithmByOID(k.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm");if(T.name==="RSA-OAEP"){const L=k.keyEncryptionAlgorithm.algorithmParams,M=new ts({schema:L});if(T.hash=n.getAlgorithmByOID(M.hashAlgorithm.algorithmId),!("name"in T.hash))throw new Error(`Incorrect OID for hash algorithm: ${M.hashAlgorithm.algorithmId}`)}let x,y=n;be.isBufferSource(r.recipientPrivateKey)?x=await n.importKey("pkcs8",r.recipientPrivateKey,T,!0,["decrypt"]):(x=r.recipientPrivateKey,"crypto"in r&&r.crypto&&(y=r.crypto.subtle));const p=await y.decrypt(x.algorithm,x,k.encryptedKey.valueBlock.valueHexView),E=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,N=n.getAlgorithmByOID(E,!0,"contentEncryptionAlgorithm");if(!("name"in N))throw new Error(`Incorrect "contentEncryptionAlgorithm": ${E}`);return n.importKey("raw",p,N,!0,["decrypt"])},o=async A=>{const k=this.recipientInfos[A].value;if(!r.preDefinedData)throw new Error('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');const T=n.getAlgorithmByOID(k.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm"),x=await n.importKey("raw",r.preDefinedData,T,!0,["unwrapKey"]),y=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,p=n.getAlgorithmByOID(y,!0,"contentEncryptionAlgorithm");if(!p.name)throw new Error(`Incorrect "contentEncryptionAlgorithm": ${y}`);return n.unwrapKey("raw",k.encryptedKey.valueBlock.valueHexView,x,T,p,!0,["decrypt"])},l=async A=>{const k=this.recipientInfos[A].value;let T;if(!r.preDefinedData)throw new Error('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');if(!k.keyDerivationAlgorithm)throw new Error('Please append encoded "keyDerivationAlgorithm"');if(!k.keyDerivationAlgorithm.algorithmParams)throw new Error('Incorrectly encoded "keyDerivationAlgorithm"');try{T=new Yt({schema:k.keyDerivationAlgorithm.algorithmParams})}catch{throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}const x=await n.importKey("raw",r.preDefinedData,"PBKDF2",!1,["deriveKey"]),y=n.getAlgorithmByOID(k.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm"),p=T.prf?n.getAlgorithmByOID(T.prf.algorithmId,!0,"prfAlgorithm").hash.name:"SHA-1",E=new Uint8Array(T.salt.valueBlock.valueHex),N=T.iterationCount,L=await n.deriveKey({name:"PBKDF2",hash:{name:p},salt:E,iterations:N},x,y,!0,["unwrapKey"]),M=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,F=n.getAlgorithmByOID(M,!0,"contentEncryptionAlgorithm");return n.unwrapKey("raw",k.encryptedKey.valueBlock.valueHexView,L,y,F,!0,["decrypt"])};let c;switch(this.recipientInfos[e].variant){case 1:c=await a(e);break;case 2:c=await i(e);break;case 3:c=await o(e);break;case 4:c=await l(e);break;default:throw new Error(`Unknown recipient type in array with index ${e}`)}const u=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,f=n.getAlgorithmByOID(u,!0,"contentEncryptionAlgorithm"),h=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams.valueBlock.valueHex,m=new Uint8Array(h);if(!this.encryptedContentInfo.encryptedContent)throw new Error("Required property `encryptedContent` is empty");const S=this.encryptedContentInfo.getEncryptedContent();return n.decrypt({name:f.name,iv:m},c,S)}}Ys.CLASS_NAME="EnvelopedData";const No="safeContents",Yc="parsedValue",Yb="contentInfos";class lo extends G{constructor(e={}){super(),this.safeContents=d(e,No,lo.defaultValues(No)),Yc in e&&(this.parsedValue=d(e,Yc,lo.defaultValues(Yc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case No:return[];case Yc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case No:return t.length===0;case Yc:return t instanceof Object&&Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new _e({name:t.contentInfos||g,value:tt.schema()})]})}fromSchema(e){X(e,[Yb]);const t=q(e,e,lo.schema({names:{contentInfos:Yb}}));W.assertSchema(t,this.className),this.safeContents=Array.from(t.result.contentInfos,n=>new tt({schema:n}))}toSchema(){return new C({value:Array.from(this.safeContents,e=>e.toSchema())})}toJSON(){return{safeContents:Array.from(this.safeContents,e=>e.toJSON())}}async parseInternalValues(e,t=Ie(!0)){if(Me.assert(e,No),Ye.assert(e.safeContents,No,"Array"),e.safeContents.length!==this.safeContents.length)throw new Ye('Length of "parameters.safeContents" must be equal to "this.safeContents.length"');this.parsedValue={safeContents:[]};for(const[n,r]of this.safeContents.entries()){const i=e.safeContents[n],a=`parameters.safeContents[${n}]`;switch(r.contentType){case gy:{Ye.assert(r.content,"this.safeContents[j].content",Q);const o=r.content.getValue();this.parsedValue.safeContents.push({privacyMode:0,value:Xn.fromBER(o)})}break;case Qk:{const o=new Ys({schema:r.content});Me.assert(a,i,"recipientCertificate","recipientKey");const l=i,c=l.recipientCertificate,u=l.recipientKey,f=await o.decrypt(0,{recipientCertificate:c,recipientPrivateKey:u},t);this.parsedValue.safeContents.push({privacyMode:2,value:Xn.fromBER(f)})}break;case zk:{const o=new Sn({schema:r.content});Me.assert(a,i,"password");const l=i.password,c=await o.decrypt({password:l},t);this.parsedValue.safeContents.push({privacyMode:1,value:Xn.fromBER(c)})}break;default:throw new Error(`Unknown "contentType" for AuthenticatedSafe: " ${r.contentType}`)}}}async makeInternalValues(e,t=Ie(!0)){if(!this.parsedValue)throw new Error('Please run "parseValues" first or add "parsedValue" manually');if(Ye.assert(this.parsedValue,"this.parsedValue","object"),Ye.assert(this.parsedValue.safeContents,"this.parsedValue.safeContents","Array"),Ye.assert(e,"parameters","object"),Me.assert(e,"safeContents"),Ye.assert(e.safeContents,"parameters.safeContents","Array"),e.safeContents.length!==this.parsedValue.safeContents.length)throw new Ye('Length of "parameters.safeContents" must be equal to "this.parsedValue.safeContents"');this.safeContents=[];for(const[n,r]of this.parsedValue.safeContents.entries())switch(Me.assert("content",r,"privacyMode","value"),Ye.assert(r.value,"content.value",Xn),r.privacyMode){case 0:{const i=r.value.toSchema().toBER(!1);this.safeContents.push(new tt({contentType:"1.2.840.113549.1.7.1",content:new Q({valueHex:i})}))}break;case 1:{const i=new Sn,a=e.safeContents[n];a.contentToEncrypt=r.value.toSchema().toBER(!1),await i.encrypt(a,t),this.safeContents.push(new tt({contentType:"1.2.840.113549.1.7.6",content:i.toSchema()}))}break;case 2:{const i=new Ys,a=r.value.toSchema().toBER(!1),o=e.safeContents[n];switch(Me.assert(`parameters.safeContents[${n}]`,o,"encryptingCertificate","encryptionAlgorithm"),!0){case o.encryptionAlgorithm.name.toLowerCase()==="aes-cbc":case o.encryptionAlgorithm.name.toLowerCase()==="aes-gcm":break;default:throw new Error(`Incorrect parameter "encryptionAlgorithm" in "parameters.safeContents[i]": ${o.encryptionAlgorithm}`)}switch(!0){case o.encryptionAlgorithm.length===128:case o.encryptionAlgorithm.length===192:case o.encryptionAlgorithm.length===256:break;default:throw new Error(`Incorrect parameter "encryptionAlgorithm.length" in "parameters.safeContents[i]": ${o.encryptionAlgorithm.length}`)}const l=o.encryptionAlgorithm;i.addRecipientByCertificate(o.encryptingCertificate,{},void 0,t),await i.encrypt(l,a,t),this.safeContents.push(new tt({contentType:"1.2.840.113549.1.7.3",content:i.toSchema()}))}break;default:throw new Error(`Incorrect value for "content.privacyMode": ${r.privacyMode}`)}return this}}lo.CLASS_NAME="AuthenticatedSafe";const xa="hashAlgorithm",kl="issuerNameHash",El="issuerKeyHash",Ta="serialNumber",VV=[xa,kl,El,Ta];class Ct extends G{constructor(e={}){super(),this.hashAlgorithm=d(e,xa,Ct.defaultValues(xa)),this.issuerNameHash=d(e,kl,Ct.defaultValues(kl)),this.issuerKeyHash=d(e,El,Ct.defaultValues(El)),this.serialNumber=d(e,Ta,Ct.defaultValues(Ta)),e.schema&&this.fromSchema(e.schema)}static async create(e,t,n=Ie(!0)){const r=new Ct;return await r.createForCertificate(e,t,n),r}static defaultValues(e){switch(e){case xa:return new H;case kl:case El:return new Q;case Ta:return new U;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case xa:return t.algorithmId===g&&!("algorithmParams"in t);case kl:case El:case Ta:return t.isEqual(Ct.defaultValues(Ta));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[H.schema(t.hashAlgorithmObject||{names:{blockName:t.hashAlgorithm||g}}),new Q({name:t.issuerNameHash||g}),new Q({name:t.issuerKeyHash||g}),new U({name:t.serialNumber||g})]})}fromSchema(e){X(e,VV);const t=q(e,e,Ct.schema({names:{hashAlgorithm:xa,issuerNameHash:kl,issuerKeyHash:El,serialNumber:Ta}}));W.assertSchema(t,this.className),this.hashAlgorithm=new H({schema:t.result.hashAlgorithm}),this.issuerNameHash=t.result.issuerNameHash,this.issuerKeyHash=t.result.issuerKeyHash,this.serialNumber=t.result.serialNumber}toSchema(){return new C({value:[this.hashAlgorithm.toSchema(),this.issuerNameHash,this.issuerKeyHash,this.serialNumber]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),issuerNameHash:this.issuerNameHash.toJSON(),issuerKeyHash:this.issuerKeyHash.toJSON(),serialNumber:this.serialNumber.toJSON()}}isEqual(e){return!(this.hashAlgorithm.algorithmId!==e.hashAlgorithm.algorithmId||!be.isEqual(this.issuerNameHash.valueBlock.valueHexView,e.issuerNameHash.valueBlock.valueHexView)||!be.isEqual(this.issuerKeyHash.valueBlock.valueHexView,e.issuerKeyHash.valueBlock.valueHexView)||!this.serialNumber.isEqual(e.serialNumber))}async createForCertificate(e,t,n=Ie(!0)){Me.assert(t,xa,"issuerCertificate");const r=n.getOIDByAlgorithm({name:t.hashAlgorithm},!0,"hashAlgorithm");this.hashAlgorithm=new H({algorithmId:r,algorithmParams:new pt});const i=t.issuerCertificate;this.serialNumber=e.serialNumber;const a=await n.digest({name:t.hashAlgorithm},i.subject.toSchema().toBER(!1));this.issuerNameHash=new Q({valueHex:a});const o=i.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView,l=await n.digest({name:t.hashAlgorithm},o);this.issuerKeyHash=new Q({valueHex:l})}}Ct.CLASS_NAME="CertID";const Cl="certID",Nl="certStatus",Il="thisUpdate",Xr="nextUpdate",Ra="singleExtensions",PV=[Cl,Nl,Il,Xr,Ra];class Xs extends G{constructor(e={}){super(),this.certID=d(e,Cl,Xs.defaultValues(Cl)),this.certStatus=d(e,Nl,Xs.defaultValues(Nl)),this.thisUpdate=d(e,Il,Xs.defaultValues(Il)),Xr in e&&(this.nextUpdate=d(e,Xr,Xs.defaultValues(Xr))),Ra in e&&(this.singleExtensions=d(e,Ra,Xs.defaultValues(Ra))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Cl:return new Ct;case Nl:return{};case Il:case Xr:return new Date(0,0,0);case Ra:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Cl:return Ct.compareWithDefault("hashAlgorithm",t.hashAlgorithm)&&Ct.compareWithDefault("issuerNameHash",t.issuerNameHash)&&Ct.compareWithDefault("issuerKeyHash",t.issuerKeyHash)&&Ct.compareWithDefault("serialNumber",t.serialNumber);case Nl:return Object.keys(t).length===0;case Il:case Xr:return t===Xs.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[Ct.schema(t.certID||{}),new lt({value:[new ke({name:t.certStatus||g,idBlock:{tagClass:3,tagNumber:0}}),new P({name:t.certStatus||g,idBlock:{tagClass:3,tagNumber:1},value:[new ot,new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ii]})]}),new ke({name:t.certStatus||g,idBlock:{tagClass:3,tagNumber:2},lenBlock:{length:1}})]}),new ot({name:t.thisUpdate||g}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ot({name:t.nextUpdate||g})]}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[ct.schema(t.singleExtensions||{})]})]})}fromSchema(e){X(e,PV);const t=q(e,e,Xs.schema({names:{certID:{names:{blockName:Cl}},certStatus:Nl,thisUpdate:Il,nextUpdate:Xr,singleExtensions:{names:{blockName:Ra}}}}));W.assertSchema(t,this.className),this.certID=new Ct({schema:t.result.certID}),this.certStatus=t.result.certStatus,this.thisUpdate=t.result.thisUpdate.toDate(),Xr in t.result&&(this.nextUpdate=t.result.nextUpdate.toDate()),Ra in t.result&&(this.singleExtensions=Array.from(t.result.singleExtensions.valueBlock.value,n=>new We({schema:n})))}toSchema(){const e=[];return e.push(this.certID.toSchema()),e.push(this.certStatus),e.push(new ot({valueDate:this.thisUpdate})),this.nextUpdate&&e.push(new P({idBlock:{tagClass:3,tagNumber:0},value:[new ot({valueDate:this.nextUpdate})]})),this.singleExtensions&&e.push(new C({value:Array.from(this.singleExtensions,t=>t.toSchema())})),new C({value:e})}toJSON(){const e={certID:this.certID.toJSON(),certStatus:this.certStatus.toJSON(),thisUpdate:this.thisUpdate};return this.nextUpdate&&(e.nextUpdate=this.nextUpdate),this.singleExtensions&&(e.singleExtensions=Array.from(this.singleExtensions,t=>t.toJSON())),e}}Xs.CLASS_NAME="SingleResponse";const yd="tbs",Oa="version",xh="responderID",Th="producedAt",Rh="responses",_l="responseExtensions",wo="ResponseData",Ld=`${wo}.${Oa}`,Bl=`${wo}.${xh}`,Jp=`${wo}.${Th}`,Wp=`${wo}.${Rh}`,Dd=`${wo}.${_l}`,LV=[wo,Ld,Bl,Jp,Wp,Dd];class Ot extends G{constructor(e={}){super(),this.tbsView=new Uint8Array(d(e,yd,Ot.defaultValues(yd))),Oa in e&&(this.version=d(e,Oa,Ot.defaultValues(Oa))),this.responderID=d(e,xh,Ot.defaultValues(xh)),this.producedAt=d(e,Th,Ot.defaultValues(Th)),this.responses=d(e,Rh,Ot.defaultValues(Rh)),_l in e&&(this.responseExtensions=d(e,_l,Ot.defaultValues(_l))),e.schema&&this.fromSchema(e.schema)}get tbs(){return be.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case Oa:return 0;case yd:return _t;case xh:return{};case Th:return new Date(0,0,0);case Rh:case _l:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case yd:return t.byteLength===0;case xh:return Object.keys(t).length===0;case Th:return t===Ot.defaultValues(e);case Rh:case _l:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||wo,value:[new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new U({name:t.version||Ld})]}),new lt({value:[new P({name:t.responderID||Bl,idBlock:{tagClass:3,tagNumber:1},value:[Xe.schema(t.ResponseDataByName||{names:{blockName:"ResponseData.byName"}})]}),new P({name:t.responderID||Bl,idBlock:{tagClass:3,tagNumber:2},value:[new Q({name:t.ResponseDataByKey||"ResponseData.byKey"})]})]}),new ot({name:t.producedAt||Jp}),new C({value:[new _e({name:Wp,value:Xs.schema(t.response||{})})]}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[ct.schema(t.extensions||{names:{blockName:Dd}})]})]})}fromSchema(e){X(e,LV);const t=q(e,e,Ot.schema());W.assertSchema(t,this.className),this.tbsView=t.result.ResponseData.valueBeforeDecodeView,Ld in t.result&&(this.version=t.result[Ld].valueBlock.valueDec),t.result[Bl].idBlock.tagNumber===1?this.responderID=new Xe({schema:t.result[Bl].valueBlock.value[0]}):this.responderID=t.result[Bl].valueBlock.value[0],this.producedAt=t.result[Jp].toDate(),this.responses=Array.from(t.result[Wp],n=>new Xs({schema:n})),Dd in t.result&&(this.responseExtensions=Array.from(t.result[Dd].valueBlock.value,n=>new We({schema:n})))}toSchema(e=!1){let t;if(e===!1){if(!this.tbsView.byteLength)return Ot.schema();const n=At(this.tbsView);W.assert(n,"TBS Response Data"),t=n.result}else{const n=[];Oa in this&&n.push(new P({idBlock:{tagClass:3,tagNumber:0},value:[new U({value:this.version})]})),this.responderID instanceof Xe?n.push(new P({idBlock:{tagClass:3,tagNumber:1},value:[this.responderID.toSchema()]})):n.push(new P({idBlock:{tagClass:3,tagNumber:2},value:[this.responderID]})),n.push(new ot({valueDate:this.producedAt})),n.push(new C({value:Array.from(this.responses,r=>r.toSchema())})),this.responseExtensions&&n.push(new P({idBlock:{tagClass:3,tagNumber:1},value:[new C({value:Array.from(this.responseExtensions,r=>r.toSchema())})]})),t=new C({value:n})}return t}toJSON(){const e={};return Oa in this&&(e.version=this.version),this.responderID&&(e.responderID=this.responderID),this.producedAt&&(e.producedAt=this.producedAt),this.responses&&(e.responses=Array.from(this.responses,t=>t.toJSON())),this.responseExtensions&&(e.responseExtensions=Array.from(this.responseExtensions,t=>t.toJSON())),e}}Ot.CLASS_NAME="ResponseData";const Wg="trustedCerts",qg="certs",Gg="crls",Yg="ocsps",Xg="checkDate",Qg="findOrigin",zg="findIssuer";var Ja;(function(s){s[s.unknown=-1]="unknown",s[s.success=0]="success",s[s.noRevocation=11]="noRevocation",s[s.noPath=60]="noPath",s[s.noValidPath=97]="noValidPath"})(Ja||(Ja={}));class hi extends Error{constructor(e,t){super(t),this.name=hi.NAME,this.code=e,this.message=t}}hi.NAME="ChainValidationError";function DV(s,e){for(let t=0;t<e.length;t++)if(be.isEqual(s.tbsView,e[t].tbsView))return!0;return!1}class hg{constructor(e={}){this.trustedCerts=d(e,Wg,this.defaultValues(Wg)),this.certs=d(e,qg,this.defaultValues(qg)),this.crls=d(e,Gg,this.defaultValues(Gg)),this.ocsps=d(e,Yg,this.defaultValues(Yg)),this.checkDate=d(e,Xg,this.defaultValues(Xg)),this.findOrigin=d(e,Qg,this.defaultValues(Qg)),this.findIssuer=d(e,zg,this.defaultValues(zg))}static defaultFindOrigin(e,t){e.tbsView.byteLength===0&&(e.tbsView=new Uint8Array(e.encodeTBS().toBER()));for(const n of t.certs)if(n.tbsView.byteLength===0&&(n.tbsView=new Uint8Array(n.encodeTBS().toBER())),be.isEqual(e.tbsView,n.tbsView))return"Intermediate Certificates";for(const n of t.trustedCerts)if(n.tbsView.byteLength===0&&(n.tbsView=new Uint8Array(n.encodeTBS().toBER())),be.isEqual(e.tbsView,n.tbsView))return"Trusted Certificates";return"Unknown"}async defaultFindIssuer(e,t,n=Ie(!0)){const r=[];let i=null,a=null,o=null;if(e.subject.isEqual(e.issuer))try{if(await e.verify(void 0,n))return[e]}catch{}if(e.extensions){for(const c of e.extensions)if(c.extnID===dy&&c.parsedValue instanceof Jn){c.parsedValue.keyIdentifier?i=c.parsedValue.keyIdentifier:(c.parsedValue.authorityCertIssuer&&(a=c.parsedValue.authorityCertIssuer),c.parsedValue.authorityCertSerialNumber&&(o=c.parsedValue.authorityCertSerialNumber));break}}function l(c){if(i!==null&&c.extensions){let f=!1;for(const h of c.extensions)if(h.extnID===$R&&h.parsedValue){f=!0,be.isEqual(h.parsedValue.valueBlock.valueHex,i.valueBlock.valueHexView)&&r.push(c);break}if(f)return}let u=!1;o!==null&&(u=c.serialNumber.isEqual(o)),a!==null?c.subject.isEqual(a)&&u&&r.push(c):e.issuer.isEqual(c.subject)&&r.push(c)}for(const c of t.trustedCerts)l(c);for(const c of t.certs)l(c);for(let c=r.length-1;c>=0;c--)try{await e.verify(r[c],n)===!1&&r.splice(c,1)}catch{r.splice(c,1)}return r}defaultValues(e){switch(e){case Wg:return[];case qg:return[];case Gg:return[];case Yg:return[];case Xg:return new Date;case Qg:return hg.defaultFindOrigin;case zg:return this.defaultFindIssuer;default:throw new Error(`Invalid member name for CertificateChainValidationEngine class: ${e}`)}}async sort(e=!1,t=Ie(!0)){const n=[],r=async(S,A)=>{const k=[];function T(y){let p=!0;for(let E=0;E<y.length;E++){for(let N=0;N<y.length;N++)if(N!==E&&y[E]===y[N]){p=!1;break}if(!p)break}return p}if(DV(S,this.trustedCerts))return[[S]];const x=await this.findIssuer(S,this,A);if(x.length===0)throw new Error("No valid certificate paths found");for(let y=0;y<x.length;y++){if(be.isEqual(x[y].tbsView,S.tbsView)){k.push([x[y]]);continue}const p=await r(x[y],A);for(let E=0;E<p.length;E++){const N=p[E].slice();N.splice(0,0,x[y]),T(N)?k.push(N):k.push(p[E])}}return k},i=async S=>{const A=[],k=[],T=[];if(A.push(...n.filter(x=>S.issuer.isEqual(x.subject))),A.length===0)return{status:1,statusMessage:"No certificate's issuers"};if(k.push(...this.crls.filter(x=>x.issuer.isEqual(S.issuer))),k.length===0)return{status:2,statusMessage:"No CRLs for specific certificate issuer"};for(let x=0;x<k.length;x++){const y=k[x];if(!(y.nextUpdate&&y.nextUpdate.value<this.checkDate))for(let p=0;p<A.length;p++)try{if(await k[x].verify({issuerCertificate:A[p]},t)){T.push({crl:k[x],certificate:A[p]});break}}catch{}}return T.length?{status:0,statusMessage:g,result:T}:{status:3,statusMessage:"No valid CRLs found"}},a=async(S,A)=>{const k=t.getAlgorithmByOID(S.signatureAlgorithm.algorithmId);if(!k.name||!k.hash)return 1;for(let T=0;T<this.ocsps.length;T++){const y=await this.ocsps[T].getCertificateStatus(S,A,t);if(y.isForCertificate)return y.status===0?0:1}return 2};async function o(S,A=!1){let k=!1,T=!1,x=!1,y=!1;if(S.extensions){for(let p=0;p<S.extensions.length;p++){const E=S.extensions[p];if(E.critical&&!E.parsedValue)return{result:!1,resultCode:6,resultMessage:`Unable to parse critical certificate extension: ${E.extnID}`};if(E.extnID===FR){x=!0;const N=new Uint8Array(E.parsedValue.valueBlock.valueHex);(N[0]&4)===4&&(T=!0),(N[0]&2)===2&&(y=!0)}E.extnID===hy&&"cA"in E.parsedValue&&E.parsedValue.cA===!0&&(k=!0)}if(T===!0&&k===!1)return{result:!1,resultCode:3,resultMessage:'Unable to build certificate chain - using "keyCertSign" flag set without BasicConstraints'};if(x===!0&&k===!0&&T===!1)return{result:!1,resultCode:4,resultMessage:'Unable to build certificate chain - "keyCertSign" flag was not set'};if(k===!0&&x===!0&&A&&y===!1)return{result:!1,resultCode:5,resultMessage:'Unable to build certificate chain - intermediate certificate must have "cRLSign" key usage flag'}}return k===!1?{result:!1,resultCode:7,resultMessage:"Unable to build certificate chain - more than one possible end-user certificate"}:{result:!0,resultCode:0,resultMessage:g}}const l=async(S,A)=>{for(let k=0;k<S.length;k++)if(S[k].notBefore.value>A||S[k].notAfter.value<A)return{result:!1,resultCode:8,resultMessage:"The certificate is either not yet valid or expired"};if(S.length<2)return{result:!1,resultCode:9,resultMessage:"Too short certificate path"};for(let k=S.length-2;k>=0;k--)if(S[k].issuer.isEqual(S[k].subject)===!1&&S[k].issuer.isEqual(S[k+1].subject)===!1)return{result:!1,resultCode:10,resultMessage:"Incorrect name chaining"};if(this.crls.length!==0||this.ocsps.length!==0)for(let k=0;k<S.length-1;k++){let T=2,x={status:0,statusMessage:g};if(this.ocsps.length!==0)switch(T=await a(S[k],S[k+1]),T){case 0:continue;case 1:return{result:!1,resultCode:12,resultMessage:"One of certificates was revoked via OCSP response"}}if(this.crls.length!==0){if(x=await i(S[k]),x.status===0&&x.result)for(let y=0;y<x.result.length;y++){if(x.result[y].crl.isCertificateRevoked(S[k]))return{result:!1,resultCode:12,resultMessage:"One of certificates had been revoked"};if((await o(x.result[y].certificate,!0)).result===!1)return{result:!1,resultCode:13,resultMessage:"CRL issuer certificate is not a CA certificate or does not have crlSign flag"}}else if(e===!1)throw new hi(Ja.noRevocation,`No revocation values found for one of certificates: ${x.statusMessage}`)}else if(T===2)return{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates"};if(T===2&&x.status===2&&e){const y=S[k+1];let p=!1;if(y.extensions)for(const E of y.extensions)switch(E.extnID){case Wk:case fy:case my:p=!0;break}if(p)throw new hi(Ja.noRevocation,`No revocation values found for one of certificates: ${x.statusMessage}`)}}for(const[k,T]of S.entries()){if(!k)continue;if(!(await o(T)).result)return{result:!1,resultCode:14,resultMessage:"One of intermediate certificates is not a CA certificate"}}return{result:!0}};n.push(...this.trustedCerts),n.push(...this.certs);for(let S=0;S<n.length;S++)for(let A=0;A<n.length;A++)if(S!==A&&be.isEqual(n[S].tbsView,n[A].tbsView)){n.splice(A,1),S=0;break}const c=n[n.length-1];let u;const f=[c];if(u=await r(c,t),u.length===0)throw new hi(Ja.noPath,"Unable to find certificate path");for(let S=u.length-1;S>=0;S--){let A=!1;for(let k=0;k<u[S].length;k++){const T=u[S][k];for(let x=0;x<this.trustedCerts.length;x++)if(be.isEqual(T.tbsView,this.trustedCerts[x].tbsView)){A=!0;break}if(A)break}A||u.splice(S,1)}if(u.length===0)throw new hi(Ja.noValidPath,"No valid certificate paths found");let h=u[0].length,m=0;for(let S=0;S<u.length;S++)u[S].length<h&&(h=u[S].length,m=S);for(let S=0;S<u[m].length;S++)f.push(u[m][S]);if(u=await l(f,this.checkDate),u.result===!1)throw u;return f}async verify(e={},t=Ie(!0)){function n(l,c){const u=ai(l),f=ai(c),h=u.split("."),m=f.split("."),S=h.length,A=m.length;if(S===0||A===0||S<A)return!1;for(let k=0;k<S;k++)if(h[k].length===0)return!1;for(let k=0;k<A;k++)if(m[k].length===0){if(k===0){if(A===1)return!1;continue}return!1}for(let k=0;k<A;k++)if(m[A-1-k].length!==0&&h[S-1-k].localeCompare(m[A-1-k])!==0)return!1;return!0}function r(l,c){const u=ai(l),f=ai(c),h=u.split("@"),m=f.split("@");if(h.length===0||m.length===0||h.length<m.length)return!1;if(m.length===1){if(n(h[1],m[0])){const A=h[1].split("."),k=m[0].split(".");return k[0].length===0?!0:A.length===k.length}return!1}return u.localeCompare(f)===0}function i(l,c){let u=ai(l);const f=ai(c),h=u.split("/");if(f.split("/").length>1)return!1;if(h.length>1){for(let A=0;A<h.length;A++)if(h[A].length>0&&h[A].charAt(h[A].length-1)!==":"){u=h[A].split(":")[0];break}}if(n(u,f)){const A=u.split("."),k=f.split(".");return k[0].length===0?!0:A.length===k.length}return!1}function a(l,c){const u=l.valueBlock.valueHexView,f=c.valueBlock.valueHexView;if(u.length===4&&f.length===8){for(let h=0;h<4;h++)if((u[h]^f[h])&f[h+4])return!1;return!0}if(u.length===16&&f.length===32){for(let h=0;h<16;h++)if((u[h]^f[h])&f[h+16])return!1;return!0}return!1}function o(l,c){if(l.typesAndValues.length===0||c.typesAndValues.length===0)return!0;if(l.typesAndValues.length<c.typesAndValues.length)return!1;let u=!0,f=0;for(let h=0;h<c.typesAndValues.length;h++){let m=!1;for(let S=f;S<l.typesAndValues.length;S++)if(m=l.typesAndValues[S].isEqual(c.typesAndValues[h]),l.typesAndValues[S].type===c.typesAndValues[h].type&&(u=u&&m),m===!0)if(f===0||f===S){f=S+1;break}else return!1;if(m===!1)return!1}return f===0?!1:u}try{if(this.certs.length===0)throw new Error("Empty certificate array");const l=e.passedWhenNotRevValues||!1,c=e.initialPolicySet||[Rs],u=e.initialExplicitPolicy||!1,f=e.initialPolicyMappingInhibit||!1,h=e.initialInhibitPolicy||!1,m=e.initialPermittedSubtreesSet||[],S=e.initialExcludedSubtreesSet||[],A=e.initialRequiredNameForms||[];let k=u,T=f,x=h;const y=[!1,!1,!1];let p=0,E=0,N=0,L=m,M=S;const F=A;let se=1;this.certs=await this.sort(l,t);const ce=[];ce.push(Rs);const ee=[],fe=new Array(this.certs.length-1);for(let oe=0;oe<this.certs.length-1;oe++)fe[oe]=!0;ee.push(fe);const Ee=new Array(this.certs.length-1),ye=new Array(this.certs.length-1);let ie=k?this.certs.length-1:-1;for(let oe=this.certs.length-2;oe>=0;oe--,se++){const de=this.certs[oe];if(de.extensions){for(let Y=0;Y<de.extensions.length;Y++){const Se=de.extensions[Y];if(Se.extnID===qk){ye[oe]=Se.parsedValue;for(let Be=0;Be<ce.length;Be++)if(ce[Be]===Rs){delete ee[Be][oe];break}for(let Be=0;Be<Se.parsedValue.certificatePolicies.length;Be++){let qe=-1;const it=Se.parsedValue.certificatePolicies[Be].policyIdentifier;for(let Ue=0;Ue<ce.length;Ue++)if(it===ce[Ue]){qe=Ue;break}if(qe===-1){ce.push(it);const Ue=new Array(this.certs.length-1);Ue[oe]=!0,ee.push(Ue)}else ee[qe][oe]=!0}}if(Se.extnID===Gk){if(T)return{result:!1,resultCode:98,resultMessage:"Policy mapping prohibited"};Ee[oe]=Se.parsedValue}Se.extnID===Yk&&k===!1&&(Se.parsedValue.requireExplicitPolicy===0?(k=!0,ie=oe):y[0]===!1?(y[0]=!0,p=Se.parsedValue.requireExplicitPolicy):p=p>Se.parsedValue.requireExplicitPolicy?Se.parsedValue.requireExplicitPolicy:p,Se.parsedValue.inhibitPolicyMapping===0?T=!0:y[1]===!1?(y[1]=!0,E=Se.parsedValue.inhibitPolicyMapping+1):E=E>Se.parsedValue.inhibitPolicyMapping+1?Se.parsedValue.inhibitPolicyMapping+1:E),Se.extnID===XR&&x===!1&&(Se.parsedValue.valueBlock.valueDec===0?x=!0:y[2]===!1?(y[2]=!0,N=Se.parsedValue.valueBlock.valueDec):N=N>Se.parsedValue.valueBlock.valueDec?Se.parsedValue.valueBlock.valueDec:N)}if(x===!0){let Y=-1;for(let Se=0;Se<ce.length;Se++)if(ce[Se]===Rs){Y=Se;break}Y!==-1&&delete ee[0][oe]}k===!1&&y[0]===!0&&(p--,p===0&&(k=!0,ie=oe,y[0]=!1)),T===!1&&y[1]===!0&&(E--,E===0&&(T=!0,y[1]=!1)),x===!1&&y[2]===!0&&(N--,N===0&&(x=!0,y[2]=!1))}}for(let oe=0;oe<this.certs.length-1;oe++)if(oe<this.certs.length-2&&typeof Ee[oe+1]<"u")for(let de=0;de<Ee[oe+1].mappings.length;de++){if(Ee[oe+1].mappings[de].issuerDomainPolicy===Rs||Ee[oe+1].mappings[de].subjectDomainPolicy===Rs)return{result:!1,resultCode:99,resultMessage:'The "anyPolicy" should not be a part of policy mapping scheme'};let Y=-1,Se=-1;for(let Be=0;Be<ce.length;Be++)ce[Be]===Ee[oe+1].mappings[de].issuerDomainPolicy&&(Y=Be),ce[Be]===Ee[oe+1].mappings[de].subjectDomainPolicy&&(Se=Be);typeof ee[Y][oe]<"u"&&delete ee[Y][oe];for(let Be=0;Be<ye[oe].certificatePolicies.length;Be++)if(Ee[oe+1].mappings[de].subjectDomainPolicy===ye[oe].certificatePolicies[Be].policyIdentifier&&Y!==-1&&Se!==-1)for(let qe=0;qe<=oe;qe++)typeof ee[Se][qe]<"u"&&(ee[Y][qe]=!0,delete ee[Se][qe])}for(let oe=0;oe<ce.length;oe++)if(ce[oe]===Rs)for(let de=0;de<ie;de++)delete ee[oe][de];const te=[];for(let oe=0;oe<ee.length;oe++){let de=!0;for(let Y=0;Y<this.certs.length-1;Y++){let Se=!1;if(Y<ie&&ce[oe]===Rs&&ce.length>1){de=!1;break}if(typeof ee[oe][Y]>"u"){if(Y>=ie){for(let Be=0;Be<ce.length;Be++)if(ce[Be]===Rs){ee[Be][Y]===!0&&(Se=!0);break}}if(!Se){de=!1;break}}}de===!0&&te.push(ce[oe])}let ae=[];if(c.length===1&&c[0]===Rs&&k===!1)ae=c;else if(te.length===1&&te[0]===Rs)ae=c;else for(let oe=0;oe<te.length;oe++)for(let de=0;de<c.length;de++)if(c[de]===te[oe]||c[de]===Rs){ae.push(te[oe]);break}const Re={result:ae.length>0,resultCode:0,resultMessage:ae.length>0?g:'Zero "userConstrPolicies" array, no intersections with "authConstrPolicies"',authConstrPolicies:te,userConstrPolicies:ae,explicitPolicyIndicator:k,policyMappings:Ee,certificatePath:this.certs};if(ae.length===0||Re.result===!1)return Re;se=1;for(let oe=this.certs.length-2;oe>=0;oe--,se++){const de=this.certs[oe];let Y=[],Se=[],Be=[];if(de.extensions)for(let Oe=0;Oe<de.extensions.length;Oe++){const pe=de.extensions[Oe];pe.extnID===Jk&&("permittedSubtrees"in pe.parsedValue&&(Se=Se.concat(pe.parsedValue.permittedSubtrees)),"excludedSubtrees"in pe.parsedValue&&(Be=Be.concat(pe.parsedValue.excludedSubtrees))),pe.extnID===$k&&(Y=Y.concat(pe.parsedValue.altNames))}let qe=F.length<=0;for(let Oe=0;Oe<F.length;Oe++)switch(F[Oe].base.type){case 4:{if(F[Oe].base.value.typesAndValues.length!==de.subject.typesAndValues.length)continue;qe=!0;for(let pe=0;pe<de.subject.typesAndValues.length;pe++)if(de.subject.typesAndValues[pe].type!==F[Oe].base.value.typesAndValues[pe].type){qe=!1;break}if(qe===!0)break}break;default:}if(qe===!1)throw Re.result=!1,Re.resultCode=21,Re.resultMessage="No necessary name form found",Re;const it=[[],[],[],[],[]];for(let Oe=0;Oe<L.length;Oe++)switch(L[Oe].base.type){case 1:it[0].push(L[Oe]);break;case 2:it[1].push(L[Oe]);break;case 4:it[2].push(L[Oe]);break;case 6:it[3].push(L[Oe]);break;case 7:it[4].push(L[Oe]);break;default:}for(let Oe=0;Oe<5;Oe++){let pe=!1,ze=!1;const j=it[Oe];for(let R=0;R<j.length;R++){switch(Oe){case 0:if(Y.length>0)for(let w=0;w<Y.length;w++)Y[w].type===1&&(ze=!0,pe=pe||r(Y[w].value,j[R].base.value));else for(let w=0;w<de.subject.typesAndValues.length;w++)(de.subject.typesAndValues[w].type==="1.2.840.113549.1.9.1"||de.subject.typesAndValues[w].type==="0.9.2342.19200300.100.1.3")&&(ze=!0,pe=pe||r(de.subject.typesAndValues[w].value.valueBlock.value,j[R].base.value));break;case 1:if(Y.length>0)for(let w=0;w<Y.length;w++)Y[w].type===2&&(ze=!0,pe=pe||n(Y[w].value,j[R].base.value));break;case 2:ze=!0,pe=o(de.subject,j[R].base.value);break;case 3:if(Y.length>0)for(let w=0;w<Y.length;w++)Y[w].type===6&&(ze=!0,pe=pe||i(Y[w].value,j[R].base.value));break;case 4:if(Y.length>0)for(let w=0;w<Y.length;w++)Y[w].type===7&&(ze=!0,pe=pe||a(Y[w].value,j[R].base.value));break;default:}if(pe)break}if(pe===!1&&j.length>0&&ze)throw Re.result=!1,Re.resultCode=41,Re.resultMessage='Failed to meet "permitted sub-trees" name constraint',Re}let Ue=!1;for(let Oe=0;Oe<M.length;Oe++){switch(M[Oe].base.type){case 1:if(Y.length>=0)for(let pe=0;pe<Y.length;pe++)Y[pe].type===1&&(Ue=Ue||r(Y[pe].value,M[Oe].base.value));else for(let pe=0;pe<de.subject.typesAndValues.length;pe++)(de.subject.typesAndValues[pe].type==="1.2.840.113549.1.9.1"||de.subject.typesAndValues[pe].type==="0.9.2342.19200300.100.1.3")&&(Ue=Ue||r(de.subject.typesAndValues[pe].value.valueBlock.value,M[Oe].base.value));break;case 2:if(Y.length>0)for(let pe=0;pe<Y.length;pe++)Y[pe].type===2&&(Ue=Ue||n(Y[pe].value,M[Oe].base.value));break;case 4:Ue=Ue||o(de.subject,M[Oe].base.value);break;case 6:if(Y.length>0)for(let pe=0;pe<Y.length;pe++)Y[pe].type===6&&(Ue=Ue||i(Y[pe].value,M[Oe].base.value));break;case 7:if(Y.length>0)for(let pe=0;pe<Y.length;pe++)Y[pe].type===7&&(Ue=Ue||a(Y[pe].value,M[Oe].base.value));break;default:}if(Ue)break}if(Ue===!0)throw Re.result=!1,Re.resultCode=42,Re.resultMessage='Failed to meet "excluded sub-trees" name constraint',Re;L=L.concat(Se),M=M.concat(Be)}return Re}catch(l){return l instanceof Error?l instanceof hi?{result:!1,resultCode:l.code,resultMessage:l.message,error:l}:{result:!1,resultCode:Ja.unknown,resultMessage:l.message,error:l}:l&&typeof l=="object"&&"resultMessage"in l?l:{result:!1,resultCode:-1,resultMessage:`${l}`}}}}const Ud="tbsResponseData",Oh="signatureAlgorithm",Vh="signature",xl="certs",Vf="BasicOCSPResponse",qp=`${Vf}.${Ud}`,Gp=`${Vf}.${Oh}`,Yp=`${Vf}.${Vh}`,Md=`${Vf}.${xl}`,UV=[qp,Gp,Yp,Md];class Ms extends G{constructor(e={}){super(),this.tbsResponseData=d(e,Ud,Ms.defaultValues(Ud)),this.signatureAlgorithm=d(e,Oh,Ms.defaultValues(Oh)),this.signature=d(e,Vh,Ms.defaultValues(Vh)),xl in e&&(this.certs=d(e,xl,Ms.defaultValues(xl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ud:return new Ot;case Oh:return new H;case Vh:return new Pe;case xl:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"type":{let n=Ot.compareWithDefault("tbs",t.tbs)&&Ot.compareWithDefault("responderID",t.responderID)&&Ot.compareWithDefault("producedAt",t.producedAt)&&Ot.compareWithDefault("responses",t.responses);return"responseExtensions"in t&&(n=n&&Ot.compareWithDefault("responseExtensions",t.responseExtensions)),n}case Oh:return t.algorithmId===g&&!("algorithmParams"in t);case Vh:return t.isEqual(Ms.defaultValues(e));case xl:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||Vf,value:[Ot.schema(t.tbsResponseData||{names:{blockName:qp}}),H.schema(t.signatureAlgorithm||{names:{blockName:Gp}}),new Pe({name:t.signature||Yp}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new C({value:[new _e({name:Md,value:He.schema(t.certs||{})})]})]})]})}fromSchema(e){X(e,UV);const t=q(e,e,Ms.schema());W.assertSchema(t,this.className),this.tbsResponseData=new Ot({schema:t.result[qp]}),this.signatureAlgorithm=new H({schema:t.result[Gp]}),this.signature=t.result[Yp],Md in t.result&&(this.certs=Array.from(t.result[Md],n=>new He({schema:n})))}toSchema(){const e=[];return e.push(this.tbsResponseData.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.certs&&e.push(new P({idBlock:{tagClass:3,tagNumber:0},value:[new C({value:Array.from(this.certs,t=>t.toSchema())})]})),new C({value:e})}toJSON(){const e={tbsResponseData:this.tbsResponseData.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.certs&&(e.certs=Array.from(this.certs,t=>t.toJSON())),e}async getCertificateStatus(e,t,n=Ie(!0)){const r={isForCertificate:!1,status:2},i={},a=[];for(const o of this.tbsResponseData.responses){const l=n.getAlgorithmByOID(o.certID.hashAlgorithm.algorithmId,!0,"CertID.hashAlgorithm");if(!i[l.name]){i[l.name]=1;const c=new Ct;a.push(c),await c.createForCertificate(e,{hashAlgorithm:l.name,issuerCertificate:t},n)}}for(const o of this.tbsResponseData.responses)for(const l of a)if(o.certID.isEqual(l)){r.isForCertificate=!0;try{switch(o.certStatus.idBlock.isConstructed){case!0:o.certStatus.idBlock.tagNumber===1&&(r.status=1);break;case!1:switch(o.certStatus.idBlock.tagNumber){case 0:r.status=0;break;case 2:r.status=2;break;default:}break;default:}}catch{}return r}return r}async sign(e,t="SHA-1",n=Ie(!0)){if(!e)throw new Error("Need to provide a private key for signing");const r=await n.getSignatureParameters(e,t),i=r.parameters.algorithm;if(!("name"in i))throw new Error("Empty algorithm");this.signatureAlgorithm=r.signatureAlgorithm,this.tbsResponseData.tbsView=new Uint8Array(this.tbsResponseData.toSchema(!0).toBER());const a=await n.signWithPrivateKey(this.tbsResponseData.tbsView,e,{algorithm:i});this.signature=new Pe({valueHex:a})}async verify(e={},t=Ie(!0)){let n=null,r=-1;const i=e.trustedCerts||[];if(!this.certs)throw new Error("No certificates attached to the BasicOCSPResponse");switch(!0){case this.tbsResponseData.responderID instanceof Xe:for(const[c,u]of this.certs.entries())if(u.subject.isEqual(this.tbsResponseData.responderID)){r=c;break}break;case this.tbsResponseData.responderID instanceof Q:for(const[c,u]of this.certs.entries()){const f=await t.digest({name:"sha-1"},u.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView);if(Nc(f,this.tbsResponseData.responderID.valueBlock.valueHex)){r=c;break}}break;default:throw new Error("Wrong value for responderID")}if(r===-1)throw new Error("Correct certificate was not found in OCSP response");n=this.certs[r];const a=[n];for(const c of this.certs){const u=await r0(c,n);u&&a.push(u)}if(!(await new hg({certs:a,trustedCerts:i}).verify({},t)).result)throw new Error("Validation of signer's certificate failed");return t.verifyWithPublicKey(this.tbsResponseData.tbsView,this.signature,this.certs[r].subjectPublicKeyInfo,this.signatureAlgorithm)}}Ms.CLASS_NAME="BasicOCSPResponse";const Zg="tbs",ep="version",tp="subject",sp="subjectPublicKeyInfo",Io="attributes",Ph="signatureAlgorithm",Lh="signatureValue",Pc="CertificationRequestInfo",ky=`${Pc}.version`,Ey=`${Pc}.subject`,Cy=`${Pc}.subjectPublicKeyInfo`,Mm=`${Pc}.attributes`,MV=[Pc,ky,Ey,Cy,Mm,Ph,Lh];function HV(s={}){const e=d(s,"names",{});return new C({name:e.CertificationRequestInfo||Pc,value:[new U({name:e.CertificationRequestInfoVersion||ky}),Xe.schema(e.subject||{names:{blockName:Ey}}),is.schema({names:{blockName:Cy}}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new _e({optional:!0,name:e.CertificationRequestInfoAttributes||Mm,value:st.schema(e.attributes||{})})]})]})}class hs extends G{constructor(e={}){super(),this.tbsView=new Uint8Array(d(e,Zg,hs.defaultValues(Zg))),this.version=d(e,ep,hs.defaultValues(ep)),this.subject=d(e,tp,hs.defaultValues(tp)),this.subjectPublicKeyInfo=d(e,sp,hs.defaultValues(sp)),Io in e&&(this.attributes=d(e,Io,hs.defaultValues(Io))),this.signatureAlgorithm=d(e,Ph,hs.defaultValues(Ph)),this.signatureValue=d(e,Lh,hs.defaultValues(Lh)),e.schema&&this.fromSchema(e.schema)}get tbs(){return be.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case Zg:return _t;case ep:return 0;case tp:return new Xe;case sp:return new is;case Io:return[];case Ph:return new H;case Lh:return new Pe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({value:[HV(t.certificationRequestInfo||{}),new C({name:t.signatureAlgorithm||Ph,value:[new he,new Ce({optional:!0})]}),new Pe({name:t.signatureValue||Lh})]})}fromSchema(e){X(e,MV);const t=q(e,e,hs.schema());W.assertSchema(t,this.className),this.tbsView=t.result.CertificationRequestInfo.valueBeforeDecodeView,this.version=t.result[ky].valueBlock.valueDec,this.subject=new Xe({schema:t.result[Ey]}),this.subjectPublicKeyInfo=new is({schema:t.result[Cy]}),Mm in t.result&&(this.attributes=Array.from(t.result[Mm],n=>new st({schema:n}))),this.signatureAlgorithm=new H({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[new U({value:this.version}),this.subject.toSchema(),this.subjectPublicKeyInfo.toSchema()];return Io in this&&e.push(new P({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes||[],t=>t.toSchema())})),new C({value:e})}toSchema(e=!1){let t;if(e===!1){if(this.tbsView.byteLength===0)return hs.schema();const n=At(this.tbsView);W.assert(n,"PKCS#10 Certificate Request"),t=n.result}else t=this.encodeTBS();return new C({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:Ae.ToHex(this.tbsView),version:this.version,subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return Io in this&&(e.attributes=Array.from(this.attributes||[],t=>t.toJSON())),e}async sign(e,t="SHA-1",n=Ie(!0)){if(!e)throw new Error("Need to provide a private key for signing");const r=await n.getSignatureParameters(e,t),i=r.parameters;this.signatureAlgorithm=r.signatureAlgorithm,this.tbsView=new Uint8Array(this.encodeTBS().toBER());const a=await n.signWithPrivateKey(this.tbsView,e,i);this.signatureValue=new Pe({valueHex:a})}async verify(e=Ie(!0)){return e.verifyWithPublicKey(this.tbsView,this.signatureValue,this.subjectPublicKeyInfo,this.signatureAlgorithm)}async getPublicKey(e,t=Ie(!0)){return t.getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}}hs.CLASS_NAME="CertificationRequest";const Va="digestAlgorithm",Pa="digest",$V=[Va,Pa];class $s extends G{constructor(e={}){super(),this.digestAlgorithm=d(e,Va,$s.defaultValues(Va)),this.digest=d(e,Pa,$s.defaultValues(Pa)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Va:return new H;case Pa:return new Q;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Va:return H.compareWithDefault("algorithmId",t.algorithmId)&&!("algorithmParams"in t);case Pa:return t.isEqual($s.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[H.schema(t.digestAlgorithm||{names:{blockName:Va}}),new Q({name:t.digest||Pa})]})}fromSchema(e){X(e,$V);const t=q(e,e,$s.schema({names:{digestAlgorithm:{names:{blockName:Va}},digest:Pa}}));W.assertSchema(t,this.className),this.digestAlgorithm=new H({schema:t.result.digestAlgorithm}),this.digest=t.result.digest}toSchema(){return new C({value:[this.digestAlgorithm.toSchema(),this.digest]})}toJSON(){return{digestAlgorithm:this.digestAlgorithm.toJSON(),digest:this.digest.toJSON()}}}$s.CLASS_NAME="DigestInfo";const Tl="eContentType",Gs="eContent",FV=[Tl,Gs];class ds extends G{constructor(e={}){if(super(),this.eContentType=d(e,Tl,ds.defaultValues(Tl)),Gs in e&&(this.eContent=d(e,Gs,ds.defaultValues(Gs)),this.eContent.idBlock.tagClass===1&&this.eContent.idBlock.tagNumber===4&&this.eContent.idBlock.isConstructed===!1)){const t=new Q({idBlock:{isConstructed:!0},isConstructed:!0});let n=0;const r=this.eContent.valueBlock.valueHexView.slice().buffer;let i=r.byteLength;for(;i>0;){const a=new Uint8Array(r,n,n+65536>r.byteLength?r.byteLength-n:65536),o=new ArrayBuffer(a.length),l=new Uint8Array(o);for(let c=0;c<l.length;c++)l[c]=a[c];t.valueBlock.value.push(new Q({valueHex:o})),i-=a.length,n+=a.length}this.eContent=t}e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Tl:return g;case Gs:return new Q;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Tl:return t===g;case Gs:return t.idBlock.tagClass===1&&t.idBlock.tagNumber===4?t.isEqual(ds.defaultValues(Gs)):!1;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new he({name:t.eContentType||g}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ce({name:t.eContent||g})]})]})}fromSchema(e){X(e,FV);const t=q(e,e,ds.schema({names:{eContentType:Tl,eContent:Gs}}));W.assertSchema(t,this.className),this.eContentType=t.result.eContentType.valueBlock.toString(),Gs in t.result&&(this.eContent=t.result.eContent)}toSchema(){const e=[];return e.push(new he({value:this.eContentType})),this.eContent&&ds.compareWithDefault(Gs,this.eContent)===!1&&e.push(new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.eContent]})),new C({value:e})}toJSON(){const e={eContentType:this.eContentType};return this.eContent&&ds.compareWithDefault(Gs,this.eContent)===!1&&(e.eContent=this.eContent.toJSON()),e}}ds.CLASS_NAME="EncapsulatedContentInfo";const La="mac",Da="macSalt",Un="iterations",jV=[La,Da,Un];class ss extends G{constructor(e={}){super(),this.mac=d(e,La,ss.defaultValues(La)),this.macSalt=d(e,Da,ss.defaultValues(Da)),Un in e&&(this.iterations=d(e,Un,ss.defaultValues(Un))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case La:return new $s;case Da:return new Q;case Un:return 1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case La:return $s.compareWithDefault("digestAlgorithm",t.digestAlgorithm)&&$s.compareWithDefault("digest",t.digest);case Da:return t.isEqual(ss.defaultValues(e));case Un:return t===ss.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,optional:t.optional||!0,value:[$s.schema(t.mac||{names:{blockName:La}}),new Q({name:t.macSalt||Da}),new U({optional:!0,name:t.iterations||Un})]})}fromSchema(e){X(e,jV);const t=q(e,e,ss.schema({names:{mac:{names:{blockName:La}},macSalt:Da,iterations:Un}}));W.assertSchema(t,this.className),this.mac=new $s({schema:t.result.mac}),this.macSalt=t.result.macSalt,Un in t.result&&(this.iterations=t.result.iterations.valueBlock.valueDec)}toSchema(){const e=[this.mac.toSchema(),this.macSalt];return this.iterations!==void 0&&e.push(new U({value:this.iterations})),new C({value:e})}toJSON(){const e={mac:this.mac.toJSON(),macSalt:this.macSalt.toJSON()};return this.iterations!==void 0&&(e.iterations=this.iterations),e}}ss.CLASS_NAME="MacData";const Wa="hashAlgorithm",qa="hashedMessage",KV=[Wa,qa];class Kt extends G{constructor(e={}){super(),this.hashAlgorithm=d(e,Wa,Kt.defaultValues(Wa)),this.hashedMessage=d(e,qa,Kt.defaultValues(qa)),e.schema&&this.fromSchema(e.schema)}static async create(e,t,n=Ie(!0)){const r=n.getOIDByAlgorithm({name:e},!0,"hashAlgorithm"),i=await n.digest(e,t);return new Kt({hashAlgorithm:new H({algorithmId:r,algorithmParams:new pt}),hashedMessage:new Q({valueHex:i})})}static defaultValues(e){switch(e){case Wa:return new H;case qa:return new Q;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Wa:return t.algorithmId===g&&!("algorithmParams"in t);case qa:return t.isEqual(Kt.defaultValues(e))===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[H.schema(t.hashAlgorithm||{}),new Q({name:t.hashedMessage||g})]})}fromSchema(e){X(e,KV);const t=q(e,e,Kt.schema({names:{hashAlgorithm:{names:{blockName:Wa}},hashedMessage:qa}}));W.assertSchema(t,this.className),this.hashAlgorithm=new H({schema:t.result.hashAlgorithm}),this.hashedMessage=t.result.hashedMessage}toSchema(){return new C({value:[this.hashAlgorithm.toSchema(),this.hashedMessage]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),hashedMessage:this.hashedMessage.toJSON()}}}Kt.CLASS_NAME="MessageImprint";const Rl="reqCert",Qr="singleRequestExtensions",JV=[Rl,Qr];class Zn extends G{constructor(e={}){super(),this.reqCert=d(e,Rl,Zn.defaultValues(Rl)),Qr in e&&(this.singleRequestExtensions=d(e,Qr,Zn.defaultValues(Qr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Rl:return new Ct;case Qr:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Rl:return t.isEqual(Zn.defaultValues(e));case Qr:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[Ct.schema(t.reqCert||{}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[We.schema(t.extensions||{names:{blockName:t.singleRequestExtensions||g}})]})]})}fromSchema(e){X(e,JV);const t=q(e,e,Zn.schema({names:{reqCert:{names:{blockName:Rl}},extensions:{names:{blockName:Qr}}}}));W.assertSchema(t,this.className),this.reqCert=new Ct({schema:t.result.reqCert}),Qr in t.result&&(this.singleRequestExtensions=Array.from(t.result.singleRequestExtensions.valueBlock.value,n=>new We({schema:n})))}toSchema(){const e=[];return e.push(this.reqCert.toSchema()),this.singleRequestExtensions&&e.push(new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new C({value:Array.from(this.singleRequestExtensions,t=>t.toSchema())})]})),new C({value:e})}toJSON(){const e={reqCert:this.reqCert.toJSON()};return this.singleRequestExtensions&&(e.singleRequestExtensions=Array.from(this.singleRequestExtensions,t=>t.toJSON())),e}}Zn.CLASS_NAME="Request";const vd="tbs",Ol="version",Vl="requestorName",bd="requestList",Pl="requestExtensions",Lc="TBSRequest",Hd=`${Lc}.${Ol}`,$d=`${Lc}.${Vl}`,Xp=`${Lc}.requests`,Fd=`${Lc}.${Pl}`,WV=[Lc,Hd,$d,Xp,Fd];class Ut extends G{constructor(e={}){super(),this.tbsView=new Uint8Array(d(e,vd,Ut.defaultValues(vd))),Ol in e&&(this.version=d(e,Ol,Ut.defaultValues(Ol))),Vl in e&&(this.requestorName=d(e,Vl,Ut.defaultValues(Vl))),this.requestList=d(e,bd,Ut.defaultValues(bd)),Pl in e&&(this.requestExtensions=d(e,Pl,Ut.defaultValues(Pl))),e.schema&&this.fromSchema(e.schema)}get tbs(){return be.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case vd:return _t;case Ol:return 0;case Vl:return new Le;case bd:case Pl:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case vd:return t.byteLength===0;case Ol:return t===Ut.defaultValues(e);case Vl:return t.type===Le.defaultValues("type")&&Object.keys(t.value).length===0;case bd:case Pl:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||Lc,value:[new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new U({name:t.TBSRequestVersion||Hd})]}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[Le.schema(t.requestorName||{names:{blockName:$d}})]}),new C({name:t.requestList||"TBSRequest.requestList",value:[new _e({name:t.requests||Xp,value:Zn.schema(t.requestNames||{})})]}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[ct.schema(t.extensions||{names:{blockName:t.requestExtensions||Fd}})]})]})}fromSchema(e){X(e,WV);const t=q(e,e,Ut.schema());W.assertSchema(t,this.className),this.tbsView=t.result.TBSRequest.valueBeforeDecodeView,Hd in t.result&&(this.version=t.result[Hd].valueBlock.valueDec),$d in t.result&&(this.requestorName=new Le({schema:t.result[$d]})),this.requestList=Array.from(t.result[Xp],n=>new Zn({schema:n})),Fd in t.result&&(this.requestExtensions=Array.from(t.result[Fd].valueBlock.value,n=>new We({schema:n})))}toSchema(e=!1){let t;if(e===!1){if(this.tbsView.byteLength===0)return Ut.schema();const n=At(this.tbsView);if(W.assert(n,"TBS Request"),!(n.result instanceof C))throw new Error("ASN.1 result should be SEQUENCE");t=n.result}else{const n=[];this.version!==void 0&&n.push(new P({idBlock:{tagClass:3,tagNumber:0},value:[new U({value:this.version})]})),this.requestorName&&n.push(new P({idBlock:{tagClass:3,tagNumber:1},value:[this.requestorName.toSchema()]})),n.push(new C({value:Array.from(this.requestList,r=>r.toSchema())})),this.requestExtensions&&n.push(new P({idBlock:{tagClass:3,tagNumber:2},value:[new C({value:Array.from(this.requestExtensions,r=>r.toSchema())})]})),t=new C({value:n})}return t}toJSON(){const e={};return this.version!=null&&(e.version=this.version),this.requestorName&&(e.requestorName=this.requestorName.toJSON()),e.requestList=Array.from(this.requestList,t=>t.toJSON()),this.requestExtensions&&(e.requestExtensions=Array.from(this.requestExtensions,t=>t.toJSON())),e}}Ut.CLASS_NAME="TBSRequest";const _o="signatureAlgorithm",Bo="signature",wr="certs";class Is extends G{constructor(e={}){super(),this.signatureAlgorithm=d(e,_o,Is.defaultValues(_o)),this.signature=d(e,Bo,Is.defaultValues(Bo)),wr in e&&(this.certs=d(e,wr,Is.defaultValues(wr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case _o:return new H;case Bo:return new Pe;case wr:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case _o:return t.algorithmId===g&&!("algorithmParams"in t);case Bo:return t.isEqual(Is.defaultValues(e));case wr:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[H.schema(t.signatureAlgorithm||{}),new Pe({name:t.signature||g}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new C({value:[new _e({name:t.certs||g,value:He.schema({})})]})]})]})}fromSchema(e){X(e,[_o,Bo,wr]);const t=q(e,e,Is.schema({names:{signatureAlgorithm:{names:{blockName:_o}},signature:Bo,certs:wr}}));W.assertSchema(t,this.className),this.signatureAlgorithm=new H({schema:t.result.signatureAlgorithm}),this.signature=t.result.signature,wr in t.result&&(this.certs=Array.from(t.result.certs,n=>new He({schema:n})))}toSchema(){const e=[];return e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.certs&&e.push(new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new C({value:Array.from(this.certs,t=>t.toSchema())})]})),new C({value:e})}toJSON(){const e={signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.certs&&(e.certs=Array.from(this.certs,t=>t.toJSON())),e}}Is.CLASS_NAME="Signature";const Ll="tbsRequest",zr="optionalSignature",qV=[Ll,zr];class nf extends G{constructor(e={}){super(),this.tbsRequest=d(e,Ll,nf.defaultValues(Ll)),zr in e&&(this.optionalSignature=d(e,zr,nf.defaultValues(zr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ll:return new Ut;case zr:return new Is;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ll:return Ut.compareWithDefault("tbs",t.tbs)&&Ut.compareWithDefault("version",t.version)&&Ut.compareWithDefault("requestorName",t.requestorName)&&Ut.compareWithDefault("requestList",t.requestList)&&Ut.compareWithDefault("requestExtensions",t.requestExtensions);case zr:return Is.compareWithDefault("signatureAlgorithm",t.signatureAlgorithm)&&Is.compareWithDefault("signature",t.signature)&&Is.compareWithDefault("certs",t.certs);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||"OCSPRequest",value:[Ut.schema(t.tbsRequest||{names:{blockName:Ll}}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Is.schema(t.optionalSignature||{names:{blockName:zr}})]})]})}fromSchema(e){X(e,qV);const t=q(e,e,nf.schema());W.assertSchema(t,this.className),this.tbsRequest=new Ut({schema:t.result.tbsRequest}),zr in t.result&&(this.optionalSignature=new Is({schema:t.result.optionalSignature}))}toSchema(e=!1){const t=[];return t.push(this.tbsRequest.toSchema(e)),this.optionalSignature&&t.push(new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.optionalSignature.toSchema()]})),new C({value:t})}toJSON(){const e={tbsRequest:this.tbsRequest.toJSON()};return this.optionalSignature&&(e.optionalSignature=this.optionalSignature.toJSON()),e}async createForCertificate(e,t,n=Ie(!0)){const r=new Ct;await r.createForCertificate(e,t,n),this.tbsRequest.requestList.push(new Zn({reqCert:r}))}async sign(e,t="SHA-1",n=Ie(!0)){if(Me.assertEmpty(e,"privateKey","OCSPRequest.sign method"),!this.optionalSignature)throw new Error('Need to create "optionalSignature" field before signing');const r=await n.getSignatureParameters(e,t),i=r.parameters;this.optionalSignature.signatureAlgorithm=r.signatureAlgorithm;const a=this.tbsRequest.toSchema(!0).toBER(!1),o=await n.signWithPrivateKey(a,e,i);this.optionalSignature.signature=new Pe({valueHex:o})}verify(){}}nf.CLASS_NAME="OCSPRequest";const Dl="responseType",Ul="response",GV=[Dl,Ul];class zs extends G{constructor(e={}){super(),this.responseType=d(e,Dl,zs.defaultValues(Dl)),this.response=d(e,Ul,zs.defaultValues(Ul)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Dl:return g;case Ul:return new Q;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Dl:return t===g;case Ul:return t.isEqual(zs.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new he({name:t.responseType||g}),new Q({name:t.response||g})]})}fromSchema(e){X(e,GV);const t=q(e,e,zs.schema({names:{responseType:Dl,response:Ul}}));W.assertSchema(t,this.className),this.responseType=t.result.responseType.valueBlock.toString(),this.response=t.result.response}toSchema(){return new C({value:[new he({value:this.responseType}),this.response]})}toJSON(){return{responseType:this.responseType,response:this.response.toJSON()}}}zs.CLASS_NAME="ResponseBytes";const xo="responseStatus",_n="responseBytes";class tc extends G{constructor(e={}){super(),this.responseStatus=d(e,xo,tc.defaultValues(xo)),_n in e&&(this.responseBytes=d(e,_n,tc.defaultValues(_n))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case xo:return new Ii;case _n:return new zs;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case xo:return t.isEqual(tc.defaultValues(e));case _n:return zs.compareWithDefault("responseType",t.responseType)&&zs.compareWithDefault("response",t.response);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||"OCSPResponse",value:[new Ii({name:t.responseStatus||xo}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[zs.schema(t.responseBytes||{names:{blockName:_n}})]})]})}fromSchema(e){X(e,[xo,_n]);const t=q(e,e,tc.schema());W.assertSchema(t,this.className),this.responseStatus=t.result.responseStatus,_n in t.result&&(this.responseBytes=new zs({schema:t.result.responseBytes}))}toSchema(){const e=[];return e.push(this.responseStatus),this.responseBytes&&e.push(new P({idBlock:{tagClass:3,tagNumber:0},value:[this.responseBytes.toSchema()]})),new C({value:e})}toJSON(){const e={responseStatus:this.responseStatus.toJSON()};return this.responseBytes&&(e.responseBytes=this.responseBytes.toJSON()),e}async getCertificateStatus(e,t,n=Ie(!0)){let r;const i={isForCertificate:!1,status:2};if(!this.responseBytes||this.responseBytes.responseType!==_d)return i;try{const a=At(this.responseBytes.response.valueBlock.valueHexView);W.assert(a,"Basic OCSP response"),r=new Ms({schema:a.result})}catch{return i}return r.getCertificateStatus(e,t,n)}async sign(e,t,n=Ie(!0)){var r;if(this.responseBytes&&this.responseBytes.responseType===_d)return Ms.fromBER(this.responseBytes.response.valueBlock.valueHexView).sign(e,t,n);throw new Error(`Unknown ResponseBytes type: ${((r=this.responseBytes)===null||r===void 0?void 0:r.responseType)||"Unknown"}`)}async verify(e=null,t=Ie(!0)){var n;if(!(_n in this))throw new Error("Empty ResponseBytes field");if(this.responseBytes&&this.responseBytes.responseType===_d){const r=Ms.fromBER(this.responseBytes.response.valueBlock.valueHexView);return e!==null&&(r.certs||(r.certs=[]),r.certs.push(e)),r.verify({},t)}throw new Error(`Unknown ResponseBytes type: ${((n=this.responseBytes)===null||n===void 0?void 0:n.responseType)||"Unknown"}`)}}tc.CLASS_NAME="OCSPResponse";const $i="type",Mn="attributes",Sd="encodedValue",YV=[Mn];class ht extends G{constructor(e={}){super(),this.type=d(e,$i,ht.defaultValues($i)),this.attributes=d(e,Mn,ht.defaultValues(Mn)),this.encodedValue=d(e,Sd,ht.defaultValues(Sd)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case $i:return-1;case Mn:return[];case Sd:return _t;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case $i:return t===ht.defaultValues($i);case Mn:return t.length===0;case Sd:return t.byteLength===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new P({name:t.blockName||g,optional:!0,idBlock:{tagClass:3,tagNumber:t.tagNumber||0},value:[new _e({name:t.attributes||g,value:st.schema()})]})}fromSchema(e){X(e,YV);const t=q(e,e,ht.schema({names:{tagNumber:this.type,attributes:Mn}}));W.assertSchema(t,this.className),this.type=t.result.idBlock.tagNumber,this.encodedValue=be.toArrayBuffer(t.result.valueBeforeDecodeView);const n=new Uint8Array(this.encodedValue);if(n[0]=49,!(Mn in t.result)){if(this.type===0)throw new Error("Wrong structure of SignedUnsignedAttributes");return}this.attributes=Array.from(t.result.attributes,r=>new st({schema:r}))}toSchema(){if(ht.compareWithDefault($i,this.type)||ht.compareWithDefault(Mn,this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return new P({optional:!0,idBlock:{tagClass:3,tagNumber:this.type},value:Array.from(this.attributes,e=>e.toSchema())})}toJSON(){if(ht.compareWithDefault($i,this.type)||ht.compareWithDefault(Mn,this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return{type:this.type,attributes:Array.from(this.attributes,e=>e.toJSON())}}}ht.CLASS_NAME="SignedAndUnsignedAttributes";const Ml="version",Ua="sid",Hl="digestAlgorithm",Zr="signedAttrs",$l="signatureAlgorithm",Dh="signature",ei="unsignedAttrs",Vi="SignerInfo",Qp=`${Vi}.${Ml}`,Uh=`${Vi}.${Ua}`,zp=`${Vi}.${Hl}`,jd=`${Vi}.${Zr}`,Zp=`${Vi}.${$l}`,ew=`${Vi}.${Dh}`,Kd=`${Vi}.${ei}`,XV=[Qp,Uh,zp,jd,Zp,ew,Kd];class wt extends G{constructor(e={}){super(),this.version=d(e,Ml,wt.defaultValues(Ml)),this.sid=d(e,Ua,wt.defaultValues(Ua)),this.digestAlgorithm=d(e,Hl,wt.defaultValues(Hl)),Zr in e&&(this.signedAttrs=d(e,Zr,wt.defaultValues(Zr))),this.signatureAlgorithm=d(e,$l,wt.defaultValues($l)),this.signature=d(e,Dh,wt.defaultValues(Dh)),ei in e&&(this.unsignedAttrs=d(e,ei,wt.defaultValues(ei))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ml:return 0;case Ua:return new Ce;case Hl:return new H;case Zr:return new ht({type:0});case $l:return new H;case Dh:return new Q;case ei:return new ht({type:1});default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ml:return wt.defaultValues(Ml)===t;case Ua:return t instanceof Ce;case Hl:return t instanceof H?t.isEqual(wt.defaultValues(Hl)):!1;case Zr:return ht.compareWithDefault("type",t.type)&&ht.compareWithDefault("attributes",t.attributes)&&ht.compareWithDefault("encodedValue",t.encodedValue);case $l:return t instanceof H?t.isEqual(wt.defaultValues($l)):!1;case Dh:case ei:return ht.compareWithDefault("type",t.type)&&ht.compareWithDefault("attributes",t.attributes)&&ht.compareWithDefault("encodedValue",t.encodedValue);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:Vi,value:[new U({name:t.version||Qp}),new lt({value:[Bt.schema(t.sidSchema||{names:{blockName:Uh}}),new lt({value:[new P({optional:!0,name:t.sid||Uh,idBlock:{tagClass:3,tagNumber:0},value:[new Q]}),new ke({optional:!0,name:t.sid||Uh,idBlock:{tagClass:3,tagNumber:0}})]})]}),H.schema(t.digestAlgorithm||{names:{blockName:zp}}),ht.schema(t.signedAttrs||{names:{blockName:jd,tagNumber:0}}),H.schema(t.signatureAlgorithm||{names:{blockName:Zp}}),new Q({name:t.signature||ew}),ht.schema(t.unsignedAttrs||{names:{blockName:Kd,tagNumber:1}})]})}fromSchema(e){X(e,XV);const t=q(e,e,wt.schema());W.assertSchema(t,this.className),this.version=t.result[Qp].valueBlock.valueDec;const n=t.result[Uh];n.idBlock.tagClass===1?this.sid=new Bt({schema:n}):this.sid=n,this.digestAlgorithm=new H({schema:t.result[zp]}),jd in t.result&&(this.signedAttrs=new ht({type:0,schema:t.result[jd]})),this.signatureAlgorithm=new H({schema:t.result[Zp]}),this.signature=t.result[ew],Kd in t.result&&(this.unsignedAttrs=new ht({type:1,schema:t.result[Kd]}))}toSchema(){if(wt.compareWithDefault(Ua,this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e=[];return e.push(new U({value:this.version})),this.sid instanceof Bt?e.push(this.sid.toSchema()):e.push(this.sid),e.push(this.digestAlgorithm.toSchema()),this.signedAttrs&&wt.compareWithDefault(Zr,this.signedAttrs)===!1&&e.push(this.signedAttrs.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.unsignedAttrs&&wt.compareWithDefault(ei,this.unsignedAttrs)===!1&&e.push(this.unsignedAttrs.toSchema()),new C({value:e})}toJSON(){if(wt.compareWithDefault(Ua,this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e={version:this.version,digestAlgorithm:this.digestAlgorithm.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.sid instanceof Ce||(e.sid=this.sid.toJSON()),this.signedAttrs&&wt.compareWithDefault(Zr,this.signedAttrs)===!1&&(e.signedAttrs=this.signedAttrs.toJSON()),this.unsignedAttrs&&wt.compareWithDefault(ei,this.unsignedAttrs)===!1&&(e.unsignedAttrs=this.unsignedAttrs.toJSON()),e}}wt.CLASS_NAME="SignerInfo";const Mh="version",Hh="policy",$h="messageImprint",Fh="serialNumber",jh="genTime",Ma="ordering",Ha="nonce",Fl="accuracy",jl="tsa",Kl="extensions",ln="TSTInfo",tw=`${ln}.${Mh}`,sw=`${ln}.${Hh}`,nw=`${ln}.${$h}`,rw=`${ln}.${Fh}`,iw=`${ln}.${jh}`,Jd=`${ln}.${Fl}`,Wd=`${ln}.${Ma}`,qd=`${ln}.${Ha}`,Gd=`${ln}.${jl}`,Yd=`${ln}.${Kl}`,QV=[tw,sw,nw,rw,iw,Jd,Wd,qd,Gd,Yd];class qt extends G{constructor(e={}){super(),this.version=d(e,Mh,qt.defaultValues(Mh)),this.policy=d(e,Hh,qt.defaultValues(Hh)),this.messageImprint=d(e,$h,qt.defaultValues($h)),this.serialNumber=d(e,Fh,qt.defaultValues(Fh)),this.genTime=d(e,jh,qt.defaultValues(jh)),Fl in e&&(this.accuracy=d(e,Fl,qt.defaultValues(Fl))),Ma in e&&(this.ordering=d(e,Ma,qt.defaultValues(Ma))),Ha in e&&(this.nonce=d(e,Ha,qt.defaultValues(Ha))),jl in e&&(this.tsa=d(e,jl,qt.defaultValues(jl))),Kl in e&&(this.extensions=d(e,Kl,qt.defaultValues(Kl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Mh:return 0;case Hh:return g;case $h:return new Kt;case Fh:return new U;case jh:return new Date(0,0,0);case Fl:return new Cs;case Ma:return!1;case Ha:return new U;case jl:return new Le;case Kl:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Mh:case Hh:case jh:case Ma:return t===qt.defaultValues(Ma);case $h:return Kt.compareWithDefault(Wa,t.hashAlgorithm)&&Kt.compareWithDefault(qa,t.hashedMessage);case Fh:case Ha:return t.isEqual(qt.defaultValues(Ha));case Fl:return Cs.compareWithDefault(vr,t.seconds)&&Cs.compareWithDefault(br,t.millis)&&Cs.compareWithDefault(Sr,t.micros);case jl:return Le.compareWithDefault(eu,t.type)&&Le.compareWithDefault(tu,t.value);case Kl:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||ln,value:[new U({name:t.version||tw}),new he({name:t.policy||sw}),Kt.schema(t.messageImprint||{names:{blockName:nw}}),new U({name:t.serialNumber||rw}),new ot({name:t.genTime||iw}),Cs.schema(t.accuracy||{names:{blockName:Jd}}),new Cn({name:t.ordering||Wd,optional:!0}),new U({name:t.nonce||qd,optional:!0}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Le.schema(t.tsa||{names:{blockName:Gd}})]}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new _e({name:t.extensions||Yd,value:We.schema(t.extension||{})})]})]})}fromSchema(e){X(e,QV);const t=q(e,e,qt.schema());W.assertSchema(t,this.className),this.version=t.result[tw].valueBlock.valueDec,this.policy=t.result[sw].valueBlock.toString(),this.messageImprint=new Kt({schema:t.result[nw]}),this.serialNumber=t.result[rw],this.genTime=t.result[iw].toDate(),Jd in t.result&&(this.accuracy=new Cs({schema:t.result[Jd]})),Wd in t.result&&(this.ordering=t.result[Wd].valueBlock.value),qd in t.result&&(this.nonce=t.result[qd]),Gd in t.result&&(this.tsa=new Le({schema:t.result[Gd]})),Yd in t.result&&(this.extensions=Array.from(t.result[Yd],n=>new We({schema:n})))}toSchema(){const e=[];return e.push(new U({value:this.version})),e.push(new he({value:this.policy})),e.push(this.messageImprint.toSchema()),e.push(this.serialNumber),e.push(new ot({valueDate:this.genTime})),this.accuracy&&e.push(this.accuracy.toSchema()),this.ordering!==void 0&&e.push(new Cn({value:this.ordering})),this.nonce&&e.push(this.nonce),this.tsa&&e.push(new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.tsa.toSchema()]})),this.extensions&&e.push(new P({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.extensions,t=>t.toSchema())})),new C({value:e})}toJSON(){const e={version:this.version,policy:this.policy,messageImprint:this.messageImprint.toJSON(),serialNumber:this.serialNumber.toJSON(),genTime:this.genTime};return this.accuracy&&(e.accuracy=this.accuracy.toJSON()),this.ordering!==void 0&&(e.ordering=this.ordering),this.nonce&&(e.nonce=this.nonce.toJSON()),this.tsa&&(e.tsa=this.tsa.toJSON()),this.extensions&&(e.extensions=Array.from(this.extensions,t=>t.toJSON())),e}async verify(e,t=Ie(!0)){if(!e.data)throw new Error('"data" is a mandatory attribute for TST_INFO verification');const n=e.data;if(e.notBefore&&this.genTime<e.notBefore)throw new Error("Generation time for TSTInfo object is less than notBefore value");if(e.notAfter&&this.genTime>e.notAfter)throw new Error("Generation time for TSTInfo object is more than notAfter value");const r=t.getAlgorithmByOID(this.messageImprint.hashAlgorithm.algorithmId,!0,"MessageImprint.hashAlgorithm"),i=await t.digest(r.name,new Uint8Array(n));return be.isEqual(i,this.messageImprint.hashedMessage.valueBlock.valueHexView)}}qt.CLASS_NAME="TSTInfo";const Jl="version",Kh="digestAlgorithms",Jh="encapContentInfo",Wl="certificates",ql="crls",Wh="signerInfos",Xc="ocsps",yo="SignedData",aw=`${yo}.${Jl}`,Xd=`${yo}.${Kh}`,ow=`${yo}.${Jh}`,Qd=`${yo}.${Wl}`,zd=`${yo}.${ql}`,Zd=`${yo}.${Wh}`,zV=[aw,Xd,ow,Qd,zd,Zd];class Wt extends Error{constructor({message:e,code:t=0,date:n=new Date,signatureVerified:r=null,signerCertificate:i=null,signerCertificateVerified:a=null,timestampSerial:o=null,certificatePath:l=[]}){super(e),this.name="SignedDataVerifyError",this.date=n,this.code=t,this.timestampSerial=o,this.signatureVerified=r,this.signerCertificate=i,this.signerCertificateVerified=a,this.certificatePath=l}}class Ft extends G{constructor(e={}){super(),this.version=d(e,Jl,Ft.defaultValues(Jl)),this.digestAlgorithms=d(e,Kh,Ft.defaultValues(Kh)),this.encapContentInfo=d(e,Jh,Ft.defaultValues(Jh)),Wl in e&&(this.certificates=d(e,Wl,Ft.defaultValues(Wl))),ql in e&&(this.crls=d(e,ql,Ft.defaultValues(ql))),Xc in e&&(this.ocsps=d(e,Xc,Ft.defaultValues(Xc))),this.signerInfos=d(e,Wh,Ft.defaultValues(Wh)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Jl:return 0;case Kh:return[];case Jh:return new ds;case Wl:return[];case ql:return[];case Xc:return[];case Wh:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Jl:return t===Ft.defaultValues(Jl);case Jh:return ds.compareWithDefault("eContentType",t.eContentType)&&ds.compareWithDefault("eContent",t.eContent);case Kh:case Wl:case ql:case Xc:case Wh:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return t.optional===void 0&&(t.optional=!1),new C({name:t.blockName||yo,optional:t.optional,value:[new U({name:t.version||aw}),new bt({value:[new _e({name:t.digestAlgorithms||Xd,value:H.schema()})]}),ds.schema(t.encapContentInfo||{names:{blockName:ow}}),new P({name:t.certificates||Qd,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:An.schema().valueBlock.value}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:nr.schema(t.crls||{names:{crls:zd}}).valueBlock.value}),new bt({value:[new _e({name:t.signerInfos||Zd,value:wt.schema()})]})]})}fromSchema(e){X(e,zV);const t=q(e,e,Ft.schema());if(W.assertSchema(t,this.className),this.version=t.result[aw].valueBlock.valueDec,Xd in t.result&&(this.digestAlgorithms=Array.from(t.result[Xd],n=>new H({schema:n}))),this.encapContentInfo=new ds({schema:t.result[ow]}),Qd in t.result){const n=new An({schema:new bt({value:t.result[Qd].valueBlock.value})});this.certificates=n.certificates.slice(0)}zd in t.result&&(this.crls=Array.from(t.result[zd],n=>n.idBlock.tagClass===1?new Et({schema:n}):(n.idBlock.tagClass=1,n.idBlock.tagNumber=16,new sr({schema:n})))),Zd in t.result&&(this.signerInfos=Array.from(t.result[Zd],n=>new wt({schema:n})))}toSchema(e=!1){const t=[];if(this.certificates&&this.certificates.length&&this.certificates.some(n=>n instanceof ki)||this.crls&&this.crls.length&&this.crls.some(n=>n instanceof sr)?this.version=5:this.certificates&&this.certificates.length&&this.certificates.some(n=>n instanceof Bs)?this.version=4:this.certificates&&this.certificates.length&&this.certificates.some(n=>n instanceof Gn)||this.signerInfos.some(n=>n.version===3)||this.encapContentInfo.eContentType!==Ft.ID_DATA?this.version=3:this.version=1,t.push(new U({value:this.version})),t.push(new bt({value:Array.from(this.digestAlgorithms,n=>n.toSchema())})),t.push(this.encapContentInfo.toSchema()),this.certificates){const r=new An({certificates:this.certificates}).toSchema();t.push(new P({idBlock:{tagClass:3,tagNumber:0},value:r.valueBlock.value}))}return this.crls&&t.push(new P({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.crls,n=>{if(n instanceof sr){const r=n.toSchema();return r.idBlock.tagClass=3,r.idBlock.tagNumber=1,r}return n.toSchema(e)})})),t.push(new bt({value:Array.from(this.signerInfos,n=>n.toSchema())})),new C({value:t})}toJSON(){const e={version:this.version,digestAlgorithms:Array.from(this.digestAlgorithms,t=>t.toJSON()),encapContentInfo:this.encapContentInfo.toJSON(),signerInfos:Array.from(this.signerInfos,t=>t.toJSON())};return this.certificates&&(e.certificates=Array.from(this.certificates,t=>t.toJSON())),this.crls&&(e.crls=Array.from(this.crls,t=>t.toJSON())),e}async verify({signer:e=-1,data:t=_t,trustedCerts:n=[],checkDate:r=new Date,checkChain:i=!1,passedWhenNotRevValues:a=!1,extendedMode:o=!1,findOrigin:l=null,findIssuer:c=null}={},u=Ie(!0)){let f=null,h=null;try{let m=_t,S=g,A=[];const k=this.signerInfos[e];if(!k)throw new Wt({date:r,code:1,message:"Unable to get signer by supplied index"});if(!this.certificates)throw new Wt({date:r,code:2,message:"No certificates attached to this signed data"});if(k.sid instanceof Bt){for(const p of this.certificates)if(p instanceof He&&p.issuer.isEqual(k.sid.issuer)&&p.serialNumber.isEqual(k.sid.serialNumber)){f=p;break}}else{const p=k.sid,E=p.idBlock.isConstructed?p.valueBlock.value[0].valueBlock.valueHex:p.valueBlock.valueHex;for(const N of this.certificates){if(!(N instanceof He))continue;const L=await u.digest({name:"sha-1"},N.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView);if(Nc(L,E)){f=N;break}}}if(!f)throw new Wt({date:r,code:3,message:"Unable to find signer certificate"});if(this.encapContentInfo.eContentType===sO){if(!this.encapContentInfo.eContent)throw new Wt({date:r,code:15,message:"Error during verification: TSTInfo eContent is empty",signatureVerified:null,signerCertificate:f,timestampSerial:h,signerCertificateVerified:!0});let p;try{p=qt.fromBER(this.encapContentInfo.eContent.valueBlock.valueHexView)}catch{throw new Wt({date:r,code:15,message:"Error during verification: TSTInfo wrong ASN.1 schema ",signatureVerified:null,signerCertificate:f,timestampSerial:h,signerCertificateVerified:!0})}if(r=p.genTime,h=p.serialNumber.valueBlock.valueHexView.slice(),t.byteLength===0)throw new Wt({date:r,code:4,message:"Missed detached data input array"});if(!await p.verify({data:t},u))throw new Wt({date:r,code:15,message:"Error during verification: TSTInfo verification is failed",signatureVerified:!1,signerCertificate:f,timestampSerial:h,signerCertificateVerified:!0})}if(i){const p=this.certificates.filter(M=>M instanceof He&&!!r0(M,f)),E={checkDate:r,certs:p,trustedCerts:n};c&&(E.findIssuer=c),l&&(E.findOrigin=l);const N=new hg(E);if(N.certs.push(f),this.crls)for(const M of this.crls)"thisUpdate"in M?N.crls.push(M):M.otherRevInfoFormat===_d&&N.ocsps.push(new Ms({schema:M.otherRevInfo}));this.ocsps&&N.ocsps.push(...this.ocsps);const L=await N.verify({passedWhenNotRevValues:a},u).catch(M=>{throw new Wt({date:r,code:5,message:`Validation of signer's certificate failed with error: ${M instanceof Object?M.resultMessage:M}`,signerCertificate:f,signerCertificateVerified:!1})});if(L.certificatePath&&(A=L.certificatePath),!L.result)throw new Wt({date:r,code:5,message:`Validation of signer's certificate failed: ${L.resultMessage}`,signerCertificate:f,signerCertificateVerified:!1})}const T=u.getAlgorithmByOID(k.digestAlgorithm.algorithmId);if(!("name"in T))throw new Wt({date:r,code:7,message:`Unsupported signature algorithm: ${k.digestAlgorithm.algorithmId}`,signerCertificate:f,signerCertificateVerified:!0});S=T.name;const x=this.encapContentInfo.eContent;if(x)x.idBlock.tagClass===1&&x.idBlock.tagNumber===4?t=x.getValue():t=x.valueBlock.valueBeforeDecodeView;else if(t.byteLength===0)throw new Wt({date:r,code:8,message:"Missed detached data input array",signerCertificate:f,signerCertificateVerified:!0});if(k.signedAttrs){let p=!1,E=!1;for(const N of k.signedAttrs.attributes)if(N.type==="1.2.840.113549.1.9.3"&&(p=!0),N.type==="1.2.840.113549.1.9.4"&&(E=!0,m=N.values[0].valueBlock.valueHex),p&&E)break;if(p===!1)throw new Wt({date:r,code:9,message:'Attribute "content-type" is a mandatory attribute for "signed attributes"',signerCertificate:f,signerCertificateVerified:!0});if(E===!1)throw new Wt({date:r,code:10,message:'Attribute "message-digest" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:f,signerCertificateVerified:!0})}if(k.signedAttrs){const p=await u.digest(S,new Uint8Array(t));if(!Nc(p,m))throw new Wt({date:r,code:15,message:"Error during verification: Message digest doesn't match",signatureVerified:null,signerCertificate:f,timestampSerial:h,signerCertificateVerified:!0});t=k.signedAttrs.encodedValue}const y=await u.verifyWithPublicKey(t,k.signature,f.subjectPublicKeyInfo,f.signatureAlgorithm,S);return o?{date:r,code:14,message:g,signatureVerified:y,signerCertificate:f,timestampSerial:h,signerCertificateVerified:!0,certificatePath:A}:y}catch(m){throw m instanceof Wt?m:new Wt({date:r,code:15,message:`Error during verification: ${m instanceof Error?m.message:m}`,signatureVerified:null,signerCertificate:f,timestampSerial:h,signerCertificateVerified:!0})}}async sign(e,t,n="SHA-1",r=_t,i=Ie(!0)){if(!e)throw new Error("Need to provide a private key for signing");const a=i.getOIDByAlgorithm({name:n},!0,"hashAlgorithm");this.digestAlgorithms.filter(f=>f.algorithmId===a).length===0&&this.digestAlgorithms.push(new H({algorithmId:a,algorithmParams:new pt}));const o=this.signerInfos[t];if(!o)throw new RangeError("SignerInfo index is out of range");o.digestAlgorithm=new H({algorithmId:a,algorithmParams:new pt});const l=await i.getSignatureParameters(e,n),c=l.parameters;if(o.signatureAlgorithm=l.signatureAlgorithm,o.signedAttrs)if(o.signedAttrs.encodedValue.byteLength!==0)r=o.signedAttrs.encodedValue;else{r=o.signedAttrs.toSchema().toBER();const f=be.toUint8Array(r);f[0]=49}else{const f=this.encapContentInfo.eContent;if(f)f.idBlock.tagClass===1&&f.idBlock.tagNumber===4?r=f.getValue():r=f.valueBlock.valueBeforeDecodeView;else if(r.byteLength===0)throw new Error("Missed detached data input array")}const u=await i.signWithPrivateKey(r,e,c);o.signature=new Q({valueHex:u})}}Ft.CLASS_NAME="SignedData";Ft.ID_DATA=gy;const $a="version",Fa="authSafe",Hn="macData",Qc="parsedValue",ZV=[$a,Fa,Hn];class li extends G{constructor(e={}){super(),this.version=d(e,$a,li.defaultValues($a)),this.authSafe=d(e,Fa,li.defaultValues(Fa)),Hn in e&&(this.macData=d(e,Hn,li.defaultValues(Hn))),Qc in e&&(this.parsedValue=d(e,Qc,li.defaultValues(Qc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case $a:return 3;case Fa:return new tt;case Hn:return new ss;case Qc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case $a:return t===li.defaultValues(e);case Fa:return tt.compareWithDefault("contentType",t.contentType)&&tt.compareWithDefault("content",t.content);case Hn:return ss.compareWithDefault("mac",t.mac)&&ss.compareWithDefault("macSalt",t.macSalt)&&ss.compareWithDefault("iterations",t.iterations);case Qc:return t instanceof Object&&Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new U({name:t.version||$a}),tt.schema(t.authSafe||{names:{blockName:Fa}}),ss.schema(t.macData||{names:{blockName:Hn,optional:!0}})]})}fromSchema(e){X(e,ZV);const t=q(e,e,li.schema({names:{version:$a,authSafe:{names:{blockName:Fa}},macData:{names:{blockName:Hn}}}}));W.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.authSafe=new tt({schema:t.result.authSafe}),Hn in t.result&&(this.macData=new ss({schema:t.result.macData}))}toSchema(){const e=[new U({value:this.version}),this.authSafe.toSchema()];return this.macData&&e.push(this.macData.toSchema()),new C({value:e})}toJSON(){const e={version:this.version,authSafe:this.authSafe.toJSON()};return this.macData&&(e.macData=this.macData.toJSON()),e}async makeInternalValues(e={},t=Ie(!0)){if(Ye.assert(e,"parameters","object"),!this.parsedValue)throw new Error('Please call "parseValues" function first in order to make "parsedValue" data');switch(Me.assertEmpty(this.parsedValue.integrityMode,"integrityMode","parsedValue"),Me.assertEmpty(this.parsedValue.authenticatedSafe,"authenticatedSafe","parsedValue"),this.parsedValue.integrityMode){case 0:{if(!("iterations"in e))throw new Me("iterations");Me.assertEmpty(e.pbkdf2HashAlgorithm,"pbkdf2HashAlgorithm"),Me.assertEmpty(e.hmacHashAlgorithm,"hmacHashAlgorithm"),Me.assertEmpty(e.password,"password");const n=new ArrayBuffer(64),r=new Uint8Array(n);t.getRandomValues(r);const i=this.parsedValue.authenticatedSafe.toSchema().toBER(!1);this.authSafe=new tt({contentType:tt.DATA,content:new Q({valueHex:i})});const a=await t.stampDataWithPassword({password:e.password,hashAlgorithm:e.hmacHashAlgorithm,salt:n,iterationCount:e.iterations,contentToStamp:i});this.macData=new ss({mac:new $s({digestAlgorithm:new H({algorithmId:t.getOIDByAlgorithm({name:e.hmacHashAlgorithm},!0,"hmacHashAlgorithm")}),digest:new Q({valueHex:a})}),macSalt:new Q({valueHex:n}),iterations:e.iterations})}break;case 1:{if(!("signingCertificate"in e))throw new Me("signingCertificate");Me.assertEmpty(e.privateKey,"privateKey"),Me.assertEmpty(e.hashAlgorithm,"hashAlgorithm");const n=this.parsedValue.authenticatedSafe.toSchema().toBER(!1),r=new Ft({version:1,encapContentInfo:new ds({eContentType:"1.2.840.113549.1.7.1",eContent:new Q({valueHex:n})}),certificates:[e.signingCertificate]}),i=await t.digest({name:e.hashAlgorithm},new Uint8Array(n)),a=[];a.push(new st({type:"1.2.840.113549.1.9.3",values:[new he({value:"1.2.840.113549.1.7.1"})]})),a.push(new st({type:"1.2.840.113549.1.9.5",values:[new _c({valueDate:new Date})]})),a.push(new st({type:"1.2.840.113549.1.9.4",values:[new Q({valueHex:i})]})),r.signerInfos.push(new wt({version:1,sid:new Bt({issuer:e.signingCertificate.issuer,serialNumber:e.signingCertificate.serialNumber}),signedAttrs:new ht({type:0,attributes:a})})),await r.sign(e.privateKey,0,e.hashAlgorithm,void 0,t),this.authSafe=new tt({contentType:"1.2.840.113549.1.7.2",content:r.toSchema(!0)})}break;default:throw new Error(`Parameter "integrityMode" has unknown value: ${this.parsedValue.integrityMode}`)}}async parseInternalValues(e,t=Ie(!0)){switch(Ye.assert(e,"parameters","object"),e.checkIntegrity===void 0&&(e.checkIntegrity=!0),this.parsedValue={},this.authSafe.contentType){case tt.DATA:{Me.assertEmpty(e.password,"password"),this.parsedValue.integrityMode=0,Ye.assert(this.authSafe.content,"authSafe.content",Q);const n=this.authSafe.content.getValue();if(this.parsedValue.authenticatedSafe=lo.fromBER(n),e.checkIntegrity){if(!this.macData)throw new Error('Absent "macData" value, can not check PKCS#12 data integrity');const r=t.getAlgorithmByOID(this.macData.mac.digestAlgorithm.algorithmId,!0,"digestAlgorithm");if(!await t.verifyDataStampedWithPassword({password:e.password,hashAlgorithm:r.name,salt:be.toArrayBuffer(this.macData.macSalt.valueBlock.valueHexView),iterationCount:this.macData.iterations||1,contentToVerify:n,signatureToVerify:be.toArrayBuffer(this.macData.mac.digest.valueBlock.valueHexView)}))throw new Error("Integrity for the PKCS#12 data is broken!")}}break;case tt.SIGNED_DATA:{this.parsedValue.integrityMode=1;const n=new Ft({schema:this.authSafe.content}),r=n.encapContentInfo.eContent;Me.assert(r,"eContent","cmsSigned.encapContentInfo"),Ye.assert(r,"eContent",Q);const i=r.getValue();if(this.parsedValue.authenticatedSafe=lo.fromBER(i),!await n.verify({signer:0,checkChain:!1},t))throw new Error("Integrity for the PKCS#12 data is broken!")}break;default:throw new Error(`Incorrect value for "this.authSafe.contentType": ${this.authSafe.contentType}`)}}}li.CLASS_NAME="PFX";const Gl="status",ti="statusStrings",si="failInfo",eP=[Gl,ti,si];var Xb;(function(s){s[s.granted=0]="granted",s[s.grantedWithMods=1]="grantedWithMods",s[s.rejection=2]="rejection",s[s.waiting=3]="waiting",s[s.revocationWarning=4]="revocationWarning",s[s.revocationNotification=5]="revocationNotification"})(Xb||(Xb={}));class Hs extends G{constructor(e={}){super(),this.status=d(e,Gl,Hs.defaultValues(Gl)),ti in e&&(this.statusStrings=d(e,ti,Hs.defaultValues(ti))),si in e&&(this.failInfo=d(e,si,Hs.defaultValues(si))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Gl:return 2;case ti:return[];case si:return new Pe;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Gl:return t===Hs.defaultValues(e);case ti:return t.length===0;case si:return t.isEqual(Hs.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||g,value:[new U({name:t.status||g}),new C({optional:!0,value:[new _e({name:t.statusStrings||g,value:new mt})]}),new Pe({name:t.failInfo||g,optional:!0})]})}fromSchema(e){X(e,eP);const t=q(e,e,Hs.schema({names:{status:Gl,statusStrings:ti,failInfo:si}}));W.assertSchema(t,this.className);const n=t.result.status;if(n.valueBlock.isHexOnly===!0||n.valueBlock.valueDec<0||n.valueBlock.valueDec>5)throw new Error('PKIStatusInfo "status" has invalid value');this.status=n.valueBlock.valueDec,ti in t.result&&(this.statusStrings=t.result.statusStrings),si in t.result&&(this.failInfo=t.result.failInfo)}toSchema(){const e=[];return e.push(new U({value:this.status})),this.statusStrings&&e.push(new C({optional:!0,value:this.statusStrings})),this.failInfo&&e.push(this.failInfo),new C({value:e})}toJSON(){const e={status:this.status};return this.statusStrings&&(e.statusStrings=Array.from(this.statusStrings,t=>t.toJSON())),this.failInfo&&(e.failInfo=this.failInfo.toJSON()),e}}Hs.CLASS_NAME="PKIStatusInfo";const qh="version",Gh="messageImprint",Yl="reqPolicy",Xl="nonce",$n="certReq",Ql="extensions",vo="TimeStampReq",lw=`${vo}.${qh}`,cw=`${vo}.${Gh}`,em=`${vo}.${Yl}`,tm=`${vo}.${Xl}`,sm=`${vo}.${$n}`,nm=`${vo}.${Ql}`,tP=[lw,cw,em,tm,sm,nm];class vs extends G{constructor(e={}){super(),this.version=d(e,qh,vs.defaultValues(qh)),this.messageImprint=d(e,Gh,vs.defaultValues(Gh)),Yl in e&&(this.reqPolicy=d(e,Yl,vs.defaultValues(Yl))),Xl in e&&(this.nonce=d(e,Xl,vs.defaultValues(Xl))),$n in e&&(this.certReq=d(e,$n,vs.defaultValues($n))),Ql in e&&(this.extensions=d(e,Ql,vs.defaultValues(Ql))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case qh:return 0;case Gh:return new Kt;case Yl:return g;case Xl:return new U;case $n:return!1;case Ql:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case qh:case Yl:case $n:return t===vs.defaultValues(e);case Gh:return Kt.compareWithDefault("hashAlgorithm",t.hashAlgorithm)&&Kt.compareWithDefault("hashedMessage",t.hashedMessage);case Xl:return t.isEqual(vs.defaultValues(e));case Ql:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||vo,value:[new U({name:t.version||lw}),Kt.schema(t.messageImprint||{names:{blockName:cw}}),new he({name:t.reqPolicy||em,optional:!0}),new U({name:t.nonce||tm,optional:!0}),new Cn({name:t.certReq||sm,optional:!0}),new P({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new _e({name:t.extensions||nm,value:We.schema()})]})]})}fromSchema(e){X(e,tP);const t=q(e,e,vs.schema());W.assertSchema(t,this.className),this.version=t.result[lw].valueBlock.valueDec,this.messageImprint=new Kt({schema:t.result[cw]}),em in t.result&&(this.reqPolicy=t.result[em].valueBlock.toString()),tm in t.result&&(this.nonce=t.result[tm]),sm in t.result&&(this.certReq=t.result[sm].valueBlock.value),nm in t.result&&(this.extensions=Array.from(t.result[nm],n=>new We({schema:n})))}toSchema(){const e=[];return e.push(new U({value:this.version})),e.push(this.messageImprint.toSchema()),this.reqPolicy&&e.push(new he({value:this.reqPolicy})),this.nonce&&e.push(this.nonce),$n in this&&vs.compareWithDefault($n,this.certReq)===!1&&e.push(new Cn({value:this.certReq})),this.extensions&&e.push(new P({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.extensions,t=>t.toSchema())})),new C({value:e})}toJSON(){const e={version:this.version,messageImprint:this.messageImprint.toJSON()};return this.reqPolicy!==void 0&&(e.reqPolicy=this.reqPolicy),this.nonce!==void 0&&(e.nonce=this.nonce.toJSON()),this.certReq!==void 0&&vs.compareWithDefault($n,this.certReq)===!1&&(e.certReq=this.certReq),this.extensions&&(e.extensions=Array.from(this.extensions,t=>t.toJSON())),e}}vs.CLASS_NAME="TimeStampReq";const zl="status",Zl="timeStampToken",Ny="TimeStampResp",uw=`${Ny}.${zl}`,rm=`${Ny}.${Zl}`,sP=[uw,rm];class rf extends G{constructor(e={}){super(),this.status=d(e,zl,rf.defaultValues(zl)),Zl in e&&(this.timeStampToken=d(e,Zl,rf.defaultValues(Zl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case zl:return new Hs;case Zl:return new tt;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case zl:return Hs.compareWithDefault(zl,t.status)&&!("statusStrings"in t)&&!("failInfo"in t);case Zl:return t.contentType===g&&t.content instanceof Ce;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new C({name:t.blockName||Ny,value:[Hs.schema(t.status||{names:{blockName:uw}}),tt.schema(t.timeStampToken||{names:{blockName:rm,optional:!0}})]})}fromSchema(e){X(e,sP);const t=q(e,e,rf.schema());W.assertSchema(t,this.className),this.status=new Hs({schema:t.result[uw]}),rm in t.result&&(this.timeStampToken=new tt({schema:t.result[rm]}))}toSchema(){const e=[];return e.push(this.status.toSchema()),this.timeStampToken&&e.push(this.timeStampToken.toSchema()),new C({value:e})}toJSON(){const e={status:this.status.toJSON()};return this.timeStampToken&&(e.timeStampToken=this.timeStampToken.toJSON()),e}async sign(e,t,n=Ie(!0)){return this.assertContentType(),new Ft({schema:this.timeStampToken.content}).sign(e,0,t,void 0,n)}async verify(e={signer:0,trustedCerts:[],data:_t},t=Ie(!0)){return this.assertContentType(),new Ft({schema:this.timeStampToken.content}).verify(e,t)}assertContentType(){if(!this.timeStampToken)throw new Error("timeStampToken is absent in TSP response");if(this.timeStampToken.contentType!==Xk)throw new Error(`Wrong format of timeStampToken: ${this.timeStampToken.contentType}`)}}rf.CLASS_NAME="TimeStampResp";function nP(){if(typeof self<"u"){if("crypto"in self){let s="webcrypto";"webkitSubtle"in self.crypto&&(s="safari"),Vb(s,new Bm({name:s,crypto}))}}else if(typeof crypto<"u"&&"webcrypto"in crypto){const s="NodeJS ^15",e=crypto.webcrypto;Vb(s,new Bm({name:s,crypto:e}))}}nP();const rP=Fe(`# issuer distinguished name. It must be same with the DN in the issuer's certificate 
[ca_dn]
CN = common name, C = country name, L = locality name, ST = state or  province name,
STREET = street address, O = organization name, OU = organization unit name,
description = some description, uniqueIdentifier = some uid, dnQualifier = some dnq,
DC = www, DC = xyz, DC = com, UID = user ID

[ca_default]
valid_days=3650,valid_crl_days=365,
output_format=PEM
#output_format=DER

# Usually this option is not used. CA can show or hidden this option to change the subject DN and SAN in the certificate.
[change_dn_san:hidden]
CN = common name, C = country name, L = locality name, ST = state or  province name,
STREET = street address, O = organization name, OU = organization unit name,
description = some description, uniqueIdentifier = some uid, dnQualifier = some dnq,
DC = www, DC = xyz, DC = com, UID = user ID

subjectAltName = email:my@example.com, 
subjectAltName = URI:http://my.example.com/
subjectAltName = DNS:test1.example.com,DNS:test2.example.com
subjectAltName = IP:192.168.7.1,IP:13::17

# by default all certificate will have authorityKeyIdentifier and subjectKeyIdentifier extensions
# extension has critical value means software-consuming certificates must understand its meaning
[ext]
basicConstraints = critical,CA:true,pathlen:3
keyUsage=critical,keyCertSign,cRLSign,digitalSignature,keyEncipherment
extendedKeyUsage = clientAuth,serverAuth,codeSigning

# only sub certificate will have this extension
[authorityInfoAccess]
caIssuers;URI.0=http://abc.def.gh
#caIssuers;URI.1=http://abc1.def2.gh3

[crlDistributionPoints]
URI.0 = http://abc.def.gh`);function To(s){return String.fromCharCode.apply(null,new Uint8Array(s))}function zc(s){const e=new ArrayBuffer(s.length),t=new Uint8Array(e);for(let n=0,r=s.length;n<r;n++)t[n]=s.charCodeAt(n);return e}function Ro(s,e){const t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=[];return s.forEach(r=>{const i=r%16,a=(r-i)/16;n.push(t[a],t[i],e)}),n.join("")}function yr(s){const e=document.createElement("a"),t=URL.createObjectURL(s);e.href=t,e.download=s.name,e.click(),URL.revokeObjectURL(t)}function iP(s,e,t){const n=new U({valueHex:new Uint8Array(s.match(/.{2}/g).map(a=>parseInt(a,16)))}),r=new dt({value:new Date(e)}),i=[];for(let a=1;a<t.length;a++){const o=parseInt(t[a]);Number.isInteger(o)&&i.push(new We({extnID:"2.5.29.21",extnValue:new Ii({value:o}).toBER(!1)}))}return console.log("makeRC:",s,e,t,n,r,i),new di({userCertificate:n,revocationDate:r,crlEntryExtensions:new ct({extensions:i})})}function aP(s,e){const t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=[];return s.forEach(r=>{const i=r%16,a=(r-i)/16;n.push(t[a],t[i],e)}),n.join("")}function hw(s){const e=s.indexOf(`
subjectAltName`),n=(e>0?s.substring(0,e):s).split(/,(?=[^,=]+=)/g);console.log("parseDN",s,n);const r=[];return n.forEach(i=>{const a=i.trim().replace(/\s*=\s*/,"=");if(a.startsWith("CN=")){r.push(new Tt({type:"2.5.4.3",value:new mt({value:a.substring(3)})}));return}if(a.startsWith("C=")){r.push(new Tt({type:"2.5.4.6",value:new mt({value:a.substring(2)})}));return}if(a.startsWith("L=")){r.push(new Tt({type:"2.5.4.7",value:new mt({value:a.substring(2)})}));return}if(a.startsWith("ST=")){r.push(new Tt({type:"2.5.4.8",value:new mt({value:a.substring(3)})}));return}if(a.startsWith("STREET=")){r.push(new Tt({type:"2.5.4.9",value:new mt({value:a.substring(7)})}));return}if(a.startsWith("O=")){r.push(new Tt({type:"2.5.4.10",value:new mt({value:a.substring(2)})}));return}if(a.startsWith("OU=")){r.push(new Tt({type:"2.5.4.11",value:new mt({value:a.substring(3)})}));return}if(a.startsWith("description=")){r.push(new Tt({type:"2.5.4.13",value:new mt({value:a.substring(12)})}));return}if(a.startsWith("uniqueIdentifier=")){r.push(new Tt({type:"2.5.4.45",value:new mt({value:a.substring(16)})}));return}if(a.startsWith("dnQualifier=")){r.push(new Tt({type:"2.5.4.46",value:new mt({value:a.substring(12)})}));return}if(a.startsWith("DC=")){r.push(new Tt({type:"0.9.2342.19200300.100.1.25",value:new mt({value:a.substring(3)})}));return}if(a.startsWith("UID=")){r.push(new Tt({type:"0.9.2342.19200300.100.1.1",value:new mt({value:a.substring(4)})}));return}}),r}function a0(s){let e="";return s.forEach(t=>{switch(t.type){case"2.5.4.3":e+=",CN="+t.value.valueBlock.value;break;case"2.5.4.6":e+=",C="+t.value.valueBlock.value;break;case"2.5.4.7":e+=",L="+t.value.valueBlock.value;break;case"2.5.4.8":e+=",ST="+t.value.valueBlock.value;break;case"2.5.4.9":e+=",STREET="+t.value.valueBlock.value;break;case"2.5.4.10":e+=",O="+t.value.valueBlock.value;break;case"2.5.4.11":e+=",OU="+t.value.valueBlock.value;break;case"2.5.4.13":e+=",description="+t.value.valueBlock.value;break;case"2.5.4.45":e+="uniqueIdentifier="+t.value.valueBlock.value;break;case"2.5.4.46":e+=",dnQualifier="+t.value.valueBlock.value;break;case"0.9.2342.19200300.100.1.25":e+=",DC="+t.value.valueBlock.value;break;default:e+=","+t.type+"="+t.value.valueBlock.value;break}}),e.substring(1)}function oP(s,e){if(console.log("parseIP",s),s.includes(":")){const t=s.split(":").map(i=>parseInt(i,16)),n=t.findIndex(i=>isNaN(i)),r=t.findLastIndex(i=>isNaN(i));if(console.log("ipv6",t,n,r),n>=0)if(n===r&&t.length<8){const i=[0,0,0,0,0,0,0,0];t.splice(n,1,...i.slice(0,9-t.length)),console.log("strs.splice",t,n,...i.slice(0,8-t.length))}else return;if(t.length===8){const i=[];for(let a=0;a<8;a++){const o=t[a]%256;i.push((t[a]-o)/256),i.push(o)}console.log("arr",i),e.push(new Le({type:7,value:new Q({valueHex:new Uint8Array(i).buffer})}))}}else{const t=s.match(/\d+/g).map(n=>parseInt(n));t.length===4&&t[0]<256&&t[1]<256&&t[2]<256&&t[3]<256&&(e.push(new Le({type:7,value:new Q({valueHex:new Uint8Array(t).buffer})})),console.log("ipv4",t))}}function o0(s){const e=[];s=s.match(new RegExp("(?<=^subjectAltName\\s*=\\s*)(.*)","gm")),s=s?s.join(",")+",":"";const t=s.match(new RegExp("(?<=email:)[^,]*","g")),n=s.match(new RegExp("(?<=URI:)[^,]*","g")),r=s.match(new RegExp("(?<=IP:)[^,]*","g")),i=s.match(new RegExp("(?<=DNS:)[^,]*","g"));return t&&t.forEach(a=>{e.push(new Le({type:1,value:a}))}),n&&n.forEach(a=>{e.push(new Le({type:6,value:a}))}),r&&r.forEach(a=>oP(a,e)),i&&i.forEach(a=>{e.push(new Le({type:2,value:a}))}),console.log("parseSAN",s,t,n,i),console.log("ips",r),e}function l0(s){let e="";for(let t=0;t<s.length;t++){const n=s[t];switch(n.type){case 1:e+=`
   RFC822 Name=`+n.value;break;case 2:e+=`
   DNS Name=`+n.value;break;case 6:e+=`
   URL=`+n.value;break;case 7:const r=n.value.valueBlock.valueHexView;r.length===4&&(e+=`
   IP Address=`+r.join(".")),r.length===16&&(e+=`
   IP Address=`+aP(r,"").match(/.{4}/g).join(":"))}}return e}function lP(s){const e=new Date,t=[];let n=e.getTime(),r=0;for(console.log("parseSER",e,n,n.toString(16),t,s);n>0;)r=n%256,t.push(r),n=(n-r)/256;return t.reverse(),t.push(s[1],s[0]),console.log("Uint8Array:",t),new Uint8Array(t)}function cP(s,e,t){const n=/^\[change_dn_san\s*:\s*show/;if(e.sw=n.test(s),!e.sw)return;const r=new St({names:o0(s)}),i=s.indexOf(`
`);t.contav=hw(s.substring(i)),e.condn=a0(t.contav),r.names.length>0?(t.consan=new We({extnID:"2.5.29.17",critical:!1,extnValue:r.toSchema().toBER(!1)}),e.consan=l0(r.names)):(t.consan=null,e.consan=null),console.log("po",e)}const uP={id:"a123",class:"min-h-screen px-4 bg-gradient-to-r from-green-400 to-blue-500"},hP={class:"container mx-auto min-h-screen px-4 py-4 sm:px-0 flex flex-col-reverse md:flex-col"},fP={class:"flex space-x-1 md:space-x-4 rounded-xl bg-blue-900/20 p-1 mt-2 md:mt-0 md:mb-2"},dP=["onClick"],mP=le("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 24 24"},[le("path",{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 9h8m-8 4h6m0 5h-1l-5 3v-3H6a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v4.5M19 22v.01M19 19a2.003 2.003 0 0 0 .914-3.782a1.98 1.98 0 0 0-2.414.483"})],-1),gP=[mP],pP={key:0,class:"rounded-2xl p-2 bg-black bg-opacity-25 flex flex-col gap-1"},wP={class:"flex gap-4 flex-wrap justify-center"},yP={class:"flex flex-wrap justify-center"},vP={class:"pt-2"},bP=["placeholder"],SP={class:"flex flex-wrap justify-center"},AP={class:"pt-2"},kP={class:"flex flex-wrap justify-center"},EP={key:1,class:"rounded-2xl p-2 bg-black/25 flex flex-col gap-1"},CP={class:"flex flex-wrap justify-center"},NP={key:0},IP={key:1,class:"pl-7 flex gap-4 flex-wrap"},_P={class:"w-full relative z-10 bg-slate-300 bg-opacity-10 rounded-xl shadow-lg text-xs xl:ml-0"},BP={key:0},xP={class:"overflow-hidden whitespace-pre-wrap"},TP={class:"px-3 pb-3"},RP={class:"flex flex-wrap justify-center"},OP={key:2,class:"rounded-2xl p-2 bg-black bg-opacity-25 flex flex-col gap-1"},VP={class:"flex flex-wrap justify-center"},PP={key:0,class:"px-4"},LP={key:1,class:"px-4 whitespace-pre-wrap"},DP=le("svg",{class:"inline",xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 20 20"},[le("path",{fill:"currentColor",d:"M10 10a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 1 0v-3a.5.5 0 0 0-.5-.5M6 8.5a.5.5 0 0 1 1 0v5a.5.5 0 0 1-1 0zM13.5 6a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 1 0v-7a.5.5 0 0 0-.5-.5M3 5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm1 0v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1"})],-1),UP={class:"pt-2"},MP={class:"flex gap-4 flex-wrap justify-center"},HP={class:"flex flex-wrap justify-center"},$P={key:3,class:"flex flex-col gap-1"},FP={class:"w-full relative p-2 z-10 col-span-3 bg-black/20 rounded-xl shadow-lg text-sm whitespace-pre-wrap break-all"},jP={class:""},KP=["onClick"],JP={class:"overflow-hidden px-4 whitespace-pre-wrap"},WP={__name:"app",setup(s){let e=Fe(1),t={},n=Fe(0),r=Fe(""),i=Fe("");const{t:a}=ng(),o=[a("b5"),a("b6"),a("b7")],l=Fe(o.join(",  ")),c=[a("b5"),a("b7")],u=Fe(c.join(",  ")),f=Fe(!1),h=Fe({signalg:"",signhashalg:"sha256",issuer:"",from:"",to:"",user:"",pubkey:"",keypara:"",aki:"",ski:"",san:"",bc:"",ku:"",eku:"",aia:"",crlp:"",csrdn:"",csrsan:"",condn:"",consan:"",sw:!1}),m={issuertav:null,csrtav:null,contav:null,aki:null,ski:null,san:null,csrsan:null,consan:null,cerexts:[]},S=Fe("1"),A=Fe(0),k=jt(()=>{console.log("previewCert",h.value);let j=a("v2",h.value);return h.value.certtype===2&&(j+=a("v3")+h.value.aki+`
`),j+=a("v4")+h.value.ski+`
`,h.value.san.length>0&&(j+=a("v5")+h.value.san+`
`),h.value.eku.length>0&&(j+=a("v6")+h.value.eku+`
`),h.value.aia.length>0&&(j+=a("v7")+h.value.aia+`
`),h.value.crlp.length>0&&(j+=a("v8")+h.value.crlp+`
`),h.value.bc.length>0&&(j+=a("v9")+h.value.bc+`
`),h.value.ku.length>0&&(j+=a("v10")+h.value.ku+`
`),j+=a("v11"),j}),T=jt(()=>(console.log("clickable",l.value.length,h.value.sw),l.value.length>0?!1:h.value.sw?A.value>0:!0));tn(A,j=>{console.log("watch pickedDS",j,j==2),j==0&&(h.value.user="",h.value.san=""),j==1&&(h.value.user=h.value.csrdn,h.value.san=h.value.csrsan),j==2&&(h.value.user=h.value.condn,h.value.san=h.value.consan),console.log("preview.value",h.value)});const x=Fe([]);let y=Fe(!1),p=Fe({}),E=Fe(!0);const N=Fe(0),L=gs();let M;Tw(()=>{const j=rt().$i18n;console.log("a.getBrowserLocale",j.getBrowserLocale(),"a.localeCodes",j.localeCodes,"a.locales",j.locales,"t",a("m0")),"serviceWorker"in navigator&&navigator.serviceWorker.register(L.app.baseURL+"sw.js").then(function(){})});async function F(){let j="";switch(S.value){case"1":t=await window.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["sign","verify"]),j="RSA:2048",t.name="RSA",console.log("case 1",j,t);break;case"2":t=await window.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["sign","verify"]),j="RSA:4096",t.name="RSA",console.log("case 2",j,t);break;case"3":t=await window.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]),j="ECDSA:P-256",t.name="ECDSA",console.log("case 3",j,t);break;case"4":t=await window.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-384"},!0,["sign","verify"]),j="ECDSA:P-384",t.name="ECDSA",console.log("case 4",j,t);break}const R=await window.crypto.subtle.exportKey("pkcs8",t.privateKey),w=window.btoa(To(R));console.log("private key:",w);const I=`-----BEGIN PRIVATE KEY-----
${w}
-----END PRIVATE KEY-----`,O=new File([I],a("m15",1));yr(O)}const se=Fe(!0);function ce(j,R,w,I,O){p.value={title:j,description:R,modaltype:w,btn1:I,btn2:O},y.value=!0}function ee(j,R){if(j===2&&(R===1&&M.prompt(),M=null),j===3&&R===1&&fe(),j===4&&R===1){const w=r.value.substring(1,r.value.length-1);r.value=w.replaceAll('""','"')}j===5&&R===1&&pe(),y.value=!1}async function fe(){if(!("caches"in window)){ze("",3e3);return}const j=await window.caches.keys();""+j.toString();for(let R=0;R<j.length;R++){const w=await window.caches.delete(j[R]);""+j[R]+w}ze("",3e3)}function Ee(){document.getElementById("fileElem").click()}function ye(){const j=document.getElementById("fileElem");n.value=1,ae(j.files[0])}let ie=null,te=["Index	Serial Number	Expiration Date	Status	Revocation Date	Distinguished Names"];function ae(j){console.log("readKeys");const R=new FileReader;R.readAsText(j),R.onload=async()=>{if(n.value===1&&(Re(R.result),n.value=0),n.value===2){const w=R.result.indexOf("-----BEGIN CERTIFICATE REQUEST-----")+35,I=R.result.indexOf("-----END CERTIFICATE REQUEST-----");let O=null;if(w>=0&&I>0){const B=R.result.substring(w,I).replaceAll(`
`,"");O=zc(window.atob(B))}else O=await j.arrayBuffer();const V=hs.fromBER(O);if(await V.verify()===!1){console.log("signresult",!1),ze(a("m8"),6e3);return}const Z=await Ie(!0).digest({name:"SHA-1"},V.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex);m.skiext=new We({extnID:"2.5.29.14",critical:!1,extnValue:new Q({valueHex:Z}).toBER(!1)}),m.subjectPublicKeyInfo=V.subjectPublicKeyInfo,m.csrtav=V.subject.typesAndValues,m.csrsan=null,h.value.ski=Ro(new Uint8Array(Z),""),h.value.certtype=h.value.aki.endsWith(h.value.ski)?1:2,h.value.csrdn=a0(V.subject.typesAndValues),h.value.csrsan="";const b=V.attributes.find(_=>_.type==="1.2.840.113549.1.9.14");if(b){const _=new ct({schema:b.values[0]});for(const B of _.extensions)if(B.extnID==="2.5.29.17"){m.csrsan=B;const re=B.parsedValue.altNames;h.value.csrsan=l0(re),console.log("altNames",re);break}}if(h.value.sw?(A.value=0,h.value.user="",h.value.san=""):(h.value.user=h.value.csrdn,h.value.san=h.value.csrsan),V.subjectPublicKeyInfo.parsedKey.className==="RSAPublicKey"){const _=V.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView,B=V.subjectPublicKeyInfo.parsedKey.modulus.valueBlock.valueHexView;h.value.pubkey=Ro(_," "),h.value.keypara="05 00, (RSA, "+B.length*8+" Bits)",console.log("mHex",_,_.length,_[0],_[0]%16,(_[0]-_[0]%16)/16,B.length)}if(V.subjectPublicKeyInfo.parsedKey.className==="ECPublicKey"){const _=V.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView,B=V.subjectPublicKeyInfo.parsedKey.namedCurve;h.value.pubkey=Ro(_," "),f.value?h.value.keypara="ECDH_"+B:h.value.keypara="ECDSA_"+B,console.log("mHex",_,_.length,_[0],_[0]%16,(_[0]-_[0]%16)/16)}o[1]="";const v=o.filter(_=>_.length>0);l.value=v.length>0?v.join(",  "):"",console.log("read CSR",V)}if(n.value===3){m.cerexts=[],f.value=!1,h.value.bc=h.value.ku=h.value.eku=h.value.aia=h.value.crlp="",ie=R.result.split(`*****issued certificate list*****
`);const w=ie[0].match(/^(?!\#).*/gm).filter(v=>v.length>0).join(`
`).split(/\n(?=\[)/g);ie[1]&&(te=ie[1].split(/\n+/g));const I=j.name.split("."),O=parseInt(I[0]),V=parseInt(I[1]),$=te.length;Y.value.index=O||0,Y.value.crlnumber=V||0,Y.value.issuedlistnum=$>1?$-1:0,Y.value.valid_num=0,Y.value.expired_num=0,Y.value.revoked_num=0;const K=new Date;te[0]=te[0].split(/\t/g);for(let v=1;v<$;v++)te[v]=te[v].split(/\t/g),te[v][3].startsWith("V")&&(K<new Date(te[v][2])?Y.value.valid_num+=1:te[v][3]="E"+te[v][3]),te[v][3].startsWith("R")&&(K<new Date(te[v][2])?Y.value.revoked_num+=1:te[v][3]="E"+te[v][3]),te[v][3].startsWith("E")&&(Y.value.expired_num+=1);console.log("strAB",te,Y);for(let v=0;v<w.length;v++){if(w[v].startsWith("[ca_dn]")){const _=w[v].substring(8);h.value.issuer=_.replaceAll(/\n/g,","),m.issuertav=hw(_)}w[v].startsWith("[ca_default]")&&Se(1,w[v].substring(13)),w[v].startsWith("[change_dn_san")&&(cP(w[v],h.value,m),console.log("preview.value",h.value)),w[v].startsWith("[ext]")&&Se(2,w[v].substring(6)),w[v].startsWith("[crlDistributionPoints]")&&Se(3,w[v].substring(23)),w[v].startsWith("[authorityInfoAccess]")&&Se(4,w[v].substring(21))}h.value.sw?(A.value=0,h.value.user="",h.value.san=""):(h.value.user=h.value.csrdn,h.value.san=h.value.csrsan),o[2]=c[1]="";const Z=o.filter(v=>v.length>0);l.value=Z.length>0?Z.join(",  "):"";const b=c.filter(v=>v.length>0);u.value=b.length>0?b.join(",  "):"",console.log("read conf.txt",w,w[0].split(`
`))}if(n.value===4){const w=R.result.indexOf("-----BEGIN CERTIFICATE-----")+27,I=R.result.indexOf("-----END CERTIFICATE-----");if(console.log("reader.result",R.result,w,I),w>=0&&I>0){const V=R.result.substring(w,I).replaceAll(`
`,""),$=zc(window.atob(V)),K=He.fromBER($);console.log("read pem.CER",K)}else{const O=await j.arrayBuffer(),V=He.fromBER(O);console.log("read der.CER",V)}}if(n.value===5){const w=R.result.indexOf("-----BEGIN ENCRYPTED PRIVATE KEY-----")+37,I=R.result.indexOf("-----END ENCRYPTED PRIVATE KEY-----"),V=R.result.substring(w,I).replaceAll(`
`,""),$=zc(window.atob(V)),K=Fn.fromBER($);console.log("key2a",K);const Z=Ie(!0),b=new vt({contentEncryptionAlgorithm:K.encryptionAlgorithm,encryptedContent:K.encryptedData}),v=Z.decryptEncryptedContentInfo({password:zc("123456"),encryptedContentInfo:b});console.log("key2c",v);const _=Ns.fromBER(v);console.log("key2d",_)}}}async function Re(j){if(j=j.trim(),!j.startsWith("-----BEGIN PRIVATE KEY-----")){ze(a("m2",1),3e3);return}if(!j.endsWith("-----END PRIVATE KEY-----")){ze(a("m2",2),3e3);return}const w=j.substring(27,j.length-25).replaceAll(`
`,""),I=zc(window.atob(w)),O=At(I);let V=null,$=null;const K=new C({name:"name1",value:[new U({name:"name2"}),new C({name:"name3",value:[new he({name:"name4"}),new he({name:"name5"})]}),new Q({name:"name6",primitiveSchema:new C({name:"name7",value:[new U({name:"name8"}),new Q({name:"name9"}),new P({name:"name10",idBlock:{tagClass:3,tagNumber:1},value:[new Pe({name:"name11"})]})]})})]}),Z=new C({name:"name1",value:[new U({name:"name2"}),new C({name:"name3",value:[new he({name:"name4"}),new pt({name:"name5"})]}),new Q({name:"name6",primitiveSchema:new C({name:"name7",value:[new U({name:"int1"}),new U({name:"int2"}),new U({name:"int3"}),new U({name:"int4"}),new U({name:"int5"}),new U({name:"int6"}),new U({name:"int7"}),new U({name:"int8"}),new U({name:"int9"})]})})]}),b=q(O.result,O.result,K),v=q(O.result,O.result,Z);if(b.verified){console.log("oid",b.result.name4.getValue(),b.result.name5.getValue());let _="",B=!0;if(b.result.name4.getValue()==="1.2.840.10045.2.1"&&b.result.name5.getValue()==="1.2.840.10045.3.1.7"&&(_="P-256",B=!1),b.result.name4.getValue()==="1.2.840.10045.2.1"&&b.result.name5.getValue()==="1.3.132.0.34"&&(_="P-384",B=!1),B){ze(a("m3",1),3e3);return}$=await window.crypto.subtle.importKey("pkcs8",I,{name:"ECDSA",namedCurve:_},!0,["sign"]);const re=new C({value:[new C({value:[b.result.name4,b.result.name5]}),b.result.name11]});console.log("keyB and asn1jspubkey",$,re,re.toBER()),window.btoa(To(re.toBER())),V=await window.crypto.subtle.importKey("spki",re.toBER(),{name:"ECDSA",namedCurve:_},!0,["verify"]),t.name="ECDSA",console.log("keyA",V)}if(v.verified){console.log("asn2",v,v.result.int2.valueBlock.blockLength);let _=0;if(v.result.name4.getValue()==="1.2.840.113549.1.1.1"&&v.result.int2.valueBlock.blockLength===257&&(_=2048),v.result.name4.getValue()==="1.2.840.113549.1.1.1"&&v.result.int2.valueBlock.blockLength===513&&(_=4096),_===0){ze(a("m3",2),3e3);return}$=await window.crypto.subtle.importKey("pkcs8",I,{name:"RSASSA-PKCS1-v1_5",modulusLength:_,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["sign"]);const B=new C({value:[new C({value:[v.result.name4,v.result.name5]}),new Pe({valueHex:new C({value:[v.result.int2,v.result.int3]}).toBER(!1)})]});console.log("keyB and asn1jspubkey",$,B,B.toBER()),window.btoa(To(B.toBER())),console.log("keyB",$),V=await window.crypto.subtle.importKey("spki",B.toBER(),{name:"RSASSA-PKCS1-v1_5",modulusLength:_,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["verify"]),t.name="RSA",console.log("keyA",V)}if(V&&$){t.publicKey=V,t.privateKey=$,o[0]=c[0]="";const _=o.filter(we=>we.length>0);l.value=_.length>0?_.join(",  "):"";const B=c.filter(we=>we.length>0);u.value=B.length>0?B.join(",  "):"",h.value.signalg="sha256"+t.name;const re=Ie(!0);let z=new hs;await z.subjectPublicKeyInfo.importKey(t.publicKey);const D=await re.digest({name:"SHA-1"},z.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex),J=new Jn({keyIdentifier:new Q({valueHex:D})});m.akiext=new We({extnID:"2.5.29.35",critical:!1,extnValue:J.toSchema().toBER(!1)}),h.value.aki="KeyID="+Ro(new Uint8Array(D),""),h.value.certtype=h.value.aki.endsWith(h.value.ski)?1:2,ze(a("m4",1),3e3)}else ze(a("m4",2),3e3)}let oe=Fe("");async function de(){console.log("createCSR",oe.value.length,a("m6",0),a("m6",1),a("m6",2));let j=null;if(oe.value.length===0){ce(a("m5",1),a("m6",1),1,a("m7",2));return}else if(j=hw(oe.value),j.length===0){ce(a("m5",1),a("m6",2),1,a("m7",2));return}if(t.publicKey===void 0){ce(a("m5",2),a("m7",1),1,a("m7",2));return}const R=new hs;R.subject.typesAndValues=j,await R.subjectPublicKeyInfo.importKey(t.publicKey),R.attributes=[];const I=await Ie(!0).digest({name:"SHA-1"},R.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex),O=[new We({extnID:"2.5.29.14",critical:!1,extnValue:new Q({valueHex:I}).toBER(!1)})],V=o0(oe.value);if(V.length>0){const b=new St({names:V});O.push(new We({extnID:"2.5.29.17",critical:!1,extnValue:b.toSchema().toBER(!1)}))}R.attributes.push(new st({type:"1.2.840.113549.1.9.14",values:[new ct({extensions:O}).toSchema()]})),await R.sign(t.privateKey,"SHA-256");const $=R.toSchema(!0).toBER();let K=window.btoa(To($));const Z=new File([`-----BEGIN CERTIFICATE REQUEST-----
${K}
-----END CERTIFICATE REQUEST-----`],a("m15",2));yr(Z),console.log("pkcs10raw",$)}let Y=Fe({crlnumber:1,valid_days:365,valid_crl_days:30,index:0,issuedlistnum:0,valid_num:0,expired_num:0,revoked_num:0});function Se(j,R){if(j===1){const w=R.replaceAll(/\n|\s,/g,"").split(/=|,/);for(let I=0;I<w.length;I++){if(w[I]==="valid_days"){const O=parseInt(w[++I]);Number.isInteger(O)&&(Y.value.valid_days=O),h.value.from=new Date().toISOString();const V=new Date;V.setDate(V.getDate()+Y.value.valid_days),h.value.to=V.toISOString();continue}if(w[I]==="valid_crl_days"){Y.value.valid_crl_days=parseInt(w[++I]);continue}if(w[I]==="output_format"){m.output_format=w[++I];continue}}console.log("parseCADE",j,R)}if(j===2){const w=R.replaceAll(" ","").split(`
`);for(let I=0;I<w.length;I++){if(w[I].startsWith("basicConstraints")){const O=w[I].indexOf("pathlen:"),V=new Si({cA:w[I].indexOf("CA:true")>0});O>0&&(V.pathLenConstraint=parseInt(w[I].substring(O+8))),h.value.bc=(w[I].indexOf("critical")>0?"critical,":"")+(w[I].indexOf("CA:true")>0?"Subject Type=CA,":""),O>0&&(h.value.bc+="Path Length Constraint="+V.pathLenConstraint),m.cerexts.push(new We({extnID:"2.5.29.19",critical:w[I].indexOf("critical")>0,extnValue:V.toSchema().toBER(!1),parsedValue:V}));continue}if(w[I].startsWith("keyUsage")){const O=new ArrayBuffer(1),V=new Uint8Array(O);let $=w[I].indexOf("critical")>0?"critical, ":"";w[I].indexOf("keyCertSign")>0&&(V[0]|=4)&&($+="Certificate Signing, "),w[I].indexOf("cRLSign")>0&&(V[0]|=2)&&($+="Off-line CRL Signing, CRL Signing,"),w[I].indexOf("digitalSignature")>0&&(V[0]|=128)&&($+="Digital Signature, "),w[I].indexOf("keyEncipherment")>0?(V[0]|=32,$+="Key Encipherment, ",f.value=!0,h.value.keypara.startsWith("ECDSA")&&(h.value.keypara=h.value.keypara.replace("ECDSA","ECDH"))):(f.value=!1,h.value.keypara.startsWith("ECDH")&&(h.value.keypara=h.value.keypara.replace("ECDH","ECDSA"))),h.value.ku=$+" ("+Ro(V,"")+")";const K=new Pe({valueHex:O});m.cerexts.push(new We({extnID:"2.5.29.15",critical:w[I].indexOf("critical")>0,extnValue:K.toBER(!1),parsedValue:K}));continue}if(w[I].startsWith("extendedKeyUsage")){const O=[];let V=w[I].indexOf("critical")>0?"critical, ":"";w[I].indexOf("clientAuth")>0&&O.push("1.3.6.1.5.5.7.3.2")&&(V+=a("v21")),w[I].indexOf("serverAuth")>0&&O.push("1.3.6.1.5.5.7.3.1")&&(V+=a("v22")),w[I].indexOf("codeSigning")>0&&O.push("1.3.6.1.5.5.7.3.3")&&(V+=a("v23")),h.value.eku=V;const $=new Tc({keyPurposes:O});m.cerexts.push(new We({extnID:"2.5.29.37",critical:w[I].indexOf("critical")>0,extnValue:$.toSchema().toBER(!1),parsedValue:$}));continue}}console.log("parseCADE",j,R,m.cerexts)}if(j===3){const w=R.replaceAll(" ","").match(new RegExp("(?<=^URI\\.\\d+=)(http.*)","gm"));if(w&&w.length>0){let I="";const O=w.map(($,K)=>(I+=`
   [`+(K+1)+`]CRL Distribution Point
      Distribution Point Name:
      Full Name: URL=`+$,new Wn({distributionPoint:[new Le({type:6,value:$})]})));h.value.crlp=I;const V=new fo({distributionPoints:O});m.cerexts.push(new We({extnID:"2.5.29.31",critical:R.indexOf("critical")>0,extnValue:V.toSchema().toBER(!1),parsedValue:V})),console.log("parseCADE",j,w,V)}}if(j===4){const w=R.replaceAll(" ","").match(new RegExp("(?<=^caIssuers;URI\\.\\d+=)(http.*)","gm"));if(w&&w.length>0){let I="";const O=w.map(($,K)=>(I+=`
   [`+(K+1)+`]Authority Info Access
      Access Method=`+a("v24")+"      Alternative Name: URL="+$,new bi({accessMethod:"1.3.6.1.5.5.7.48.2",accessLocation:new Le({type:6,value:$})})));h.value.aia=I;const V=new mo({accessDescriptions:O});m.cerexts.push(new We({extnID:"1.3.6.1.5.5.7.1.1",critical:R.indexOf("critical")>0,extnValue:V.toSchema().toBER(!1),parsedValue:V})),console.log("parseCADE",j,w,V)}}}function Be(){const j=new File([rP.value],"0.0.ca-conf.txt");yr(j)}const qe=Fe("");async function it(){console.log("createCER",m);const j=[];h.value.certtype===2&&j.push(m.akiext),j.push(m.skiext);const R=new He;R.version=2,R.serialNumber=new U({valueHex:lP(window.crypto.getRandomValues(new Uint8Array([0,0])))}),R.issuer.typesAndValues=m.issuertav,h.value.sw&&A.value==2?(R.subject.typesAndValues=m.contav,m.consan&&j.push(m.consan)):(R.subject.typesAndValues=m.csrtav,m.csrsan&&j.push(m.csrsan)),R.notBefore.value=new Date;const w=new Date;w.setDate(w.getDate()+Y.value.valid_days),R.notAfter.value=w,j.push(...m.cerexts),R.extensions=j,R.subjectPublicKeyInfo=m.subjectPublicKeyInfo,await R.sign(t.privateKey,"SHA-256"),console.log("creatCER","para.value.index:"+Y.value.index),Y.value.index+=1,Y.value.issuedlistnum+=1,Y.value.valid_num+=1;const I=Ro(R.serialNumber.valueBlock.valueHexView,"");te.push([Y.value.index,I,w.toISOString(),"V","",h.value.user]),console.log("issuedlist:"+Y.value.index,te);let O=`

*****issued certificate list*****`;for(let K=0;K<te.length;K++)O+=`
`+te[K].join("	");yr(new File([ie[0]+O],Y.value.index+"."+Y.value.crlnumber+".ca-conf.txt"));const V=R.toSchema().toBER(),$=window.btoa(To(V));if(m.output_format==="DER")yr(new File([V],Y.value.index+"."+I+".DER.CER"));else{const K=new File([`-----BEGIN CERTIFICATE-----
${$}
-----END CERTIFICATE-----`],Y.value.index+"."+I+".PEM.CER");yr(K)}}const Ue=[];function Oe(){if(console.log("createCRL",qe.value),qe.value.length>0){Ue.length=0;const j=qe.value.replace(/,|\n/g," ").split(/\s+/g),R=[j.length,[],[]];let w=!1;console.log("serials",j,te);for(let I=0;I<R[0];I++){w=!1;for(let O=0;O<te.length;O++)if(j[I]===te[O][1]){te[O][3].startsWith("E")?R[2].push(j[I]):Ue.push(te[O]),w=!0;break}!w&&R[1].push(j[I])}if(console.log("nmst",R),R[1].length+R[2].length>0){let I=a("m9",[R[0]]);R[1].length&&(I+=a("m10",[R[1].length,R[1].join(",")])),R[2].length&&(I+=a("m11",[R[2].length,R[2].join(",")])),I+=a("m12",[Ue.length]),ce(a("m13"),I,5,a("m14",1),a("m14",2))}else Ue.length>0&&pe()}else pe()}async function pe(){console.log("downloadCRL");const j=new Date;Ue.length>0&&Ue.forEach(K=>{K[3]="R"+x.value.join(""),K[4].length===0&&(K[4]=j.toISOString())&&(Y.value.valid_num-=1)});let R=`

*****issued certificate list*****`;const w=[];Y.value.revoked_num=0;for(let K=0;K<te.length;K++)R+=`
`+te[K].join("	"),te[K][3].startsWith("R")&&(w.push(iP(te[K][1],te[K][4],te[K][3])),Y.value.revoked_num+=1);const I=new Et;I.version=1,I.issuer.typesAndValues=m.issuertav,I.thisUpdate=new dt({type:0,value:j});const O=new Date;O.setDate(O.getDate()+Y.value.valid_crl_days),I.nextUpdate=new dt({type:0,value:O}),I.revokedCertificates=w,Y.value.crlnumber+=1,I.crlExtensions=new ct({extensions:[new We({extnID:"2.5.29.20",extnValue:new U({value:Y.value.crlnumber}).toBER(!1)})]}),yr(new File([ie[0]+R],Y.value.index+"."+Y.value.crlnumber+".ca-conf.txt")),await I.sign(t.privateKey,"SHA-256");const V=I.toSchema(!0).toBER(!1),$=window.btoa(To(V));yr(new File([`-----BEGIN X509 CRL-----
${$}
-----END X509 CRL-----`],"0."+Y.value.crlnumber+".CRL"))}function ze(j,R){i.value=j,setTimeout(()=>{i.value="",se.value=!0},R)}return(j,R)=>{const w=BT,I=MT,O=$T,V=jT,$=FT,K=KT,Z=qT,b=ZT,v=iR,_=hR;return Ke(),yt(Vt,null,[ne(i).length>0?(Ke(),wn(w,{key:0,class:xt([ne(se)?"bg-white dark:bg-gray-800":"bg-red-900 dark:bg-red-900"])},{default:$t(()=>[De(Ve(ne(i)),1)]),_:1},8,["class"])):fn("",!0),ne(y)?(Ke(),wn(I,l1({key:1},ne(p),{onSomeEvent:ee}),null,16)):fn("",!0),ve(O,{rel:"manifest",href:ne(L).app.baseURL+"manifest.json"},null,8,["href"]),ve(O,{rel:"mask-icon",href:"https://i.328888.xyz/2022/12/13/ymW0P.png",color:"#333333"}),ve(O,{rel:"apple-touch-icon",href:"https://i.328888.xyz/2022/12/13/ymW0P.png"}),ve(V,{name:"apple-mobile-web-app-title",content:""}),ve(V,{name:"apple-mobile-web-app-capable",content:"yes"}),ve(V,{name:"apple-mobile-web-app-status-bar-style",content:"#1976d2"}),ve($,null,{default:$t(()=>[De("")]),_:1}),ve(V,{"data-rh":"true",property:"og:title",content:""}),ve(V,{"data-rh":"true",property:"og:type",content:"website"}),ve(V,{"data-rh":"true",property:"og:image",content:"https://i.328888.xyz/2022/12/13/ymW0P.png"}),ve(O,{rel:"icon",type:"image/x-icon",href:"https://i.328888.xyz/2022/12/13/ymW0P.th.png"}),ve(V,{name:"theme-color",content:"#1976d2"}),le("div",uP,[le("div",hP,[le("div",fP,[(Ke(),yt(Vt,null,jy(3,B=>le("button",{key:B,type:"button",class:xt(["w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-black-900","ring-black ring-opacity-25 focus:outline-none focus:ring focus:border-black",ne(e)===B?"text-black ring":"hover:bg-white/[0.12] hover:text-white"]),onClick:re=>ge(e)?e.value=B:e=B},Ve(j.$t("p"+B)),11,dP)),64)),le("button",{onClick:R[0]||(R[0]=B=>ge(e)?e.value=4:e=4),class:xt(["leading-5 ring-black ring-opacity-25 focus:outline-none focus:ring focus:border-black rounded-lg px-4 hover:bg-white/[0.12] stroke-black",ne(e)===4?"ring":"hover:stroke-white"])},gP,2)]),le("input",{type:"file",id:"fileElem",onChange:ye,class:"hidden"},null,32),ne(e)===1?(Ke(),yt("div",pP,[le("p",null,Ve(j.$t("p4")),1),le("div",wP,[le("div",null,[os(le("input",{type:"radio",value:"1","onUpdate:modelValue":R[1]||(R[1]=B=>ge(S)?S.value=B:null)},null,512),[[Ao,ne(S)]]),De("RSA:2048")]),le("div",null,[os(le("input",{type:"radio",value:"2","onUpdate:modelValue":R[2]||(R[2]=B=>ge(S)?S.value=B:null)},null,512),[[Ao,ne(S)]]),De("RSA:4096")]),le("div",null,[os(le("input",{type:"radio",value:"3","onUpdate:modelValue":R[3]||(R[3]=B=>ge(S)?S.value=B:null)},null,512),[[Ao,ne(S)]]),De("ECDSA:P-256")]),le("div",null,[os(le("input",{type:"radio",value:"4","onUpdate:modelValue":R[4]||(R[4]=B=>ge(S)?S.value=B:null)},null,512),[[Ao,ne(S)]]),De("ECDSA:P-384")])]),le("div",yP,[ve(K,{onClick:F},{default:$t(()=>[De(Ve(j.$t("b1")),1)]),_:1}),ve(Z,{onClick:Ee,onDrop:R[5]||(R[5]=Bn(B=>(ge(n)?n.value=1:n=1,ae(B.dataTransfer.files[0])),["prevent"])),onDragenter:R[6]||(R[6]=B=>ge(n)?n.value=1:n=1),onDragleave:R[7]||(R[7]=B=>ge(n)?n.value=0:n=0),class:xt({"border-white":ne(n)===1})},{default:$t(()=>[De(Ve(j.$t("b2")),1)]),_:1},8,["class"])]),le("p",vP,[De(Ve(j.$t("p5")),1),ve(b,{onClick:R[8]||(R[8]=B=>(ge(e)?e.value=4:e=4,N.value=5))})]),os(le("textarea",{"onUpdate:modelValue":R[9]||(R[9]=B=>ge(oe)?oe.value=B:oe=B),placeholder:ne(a)("p5a"),class:"w-full relative p-2 z-10 col-span-3 placeholder:text-slate-800 bg-slate-300 bg-opacity-10 rounded-xl shadow-lg text-xs focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 xl:ml-0",rows:"3"},null,8,bP),[[uv,ne(oe)]]),le("div",SP,[ve(K,{onClick:de},{default:$t(()=>[De(Ve(j.$t("b3")),1)]),_:1})]),le("p",AP,[De(Ve(j.$t("p6")),1),ve(b,{onClick:R[10]||(R[10]=B=>(ge(e)?e.value=4:e=4,N.value=6))})]),le("div",kP,[ve(K,{onClick:Be},{default:$t(()=>[De(Ve(j.$t("b4")),1)]),_:1})])])):fn("",!0),ne(e)===2?(Ke(),yt("div",EP,[le("p",null,Ve(j.$t("p7")),1),le("div",CP,[ve(Z,{onClick:Ee,onDrop:R[11]||(R[11]=Bn(B=>(ge(n)?n.value=1:n=1,ae(B.dataTransfer.files[0])),["prevent"])),onDragenter:R[12]||(R[12]=B=>ge(n)?n.value=1:n=1),onDragleave:R[13]||(R[13]=B=>ge(n)?n.value=0:n=0),class:xt({"border-white":ne(n)===1})},{default:$t(()=>[De(Ve(j.$t("b5")),1)]),_:1},8,["class"]),ve(Z,{onClick:Ee,onDrop:R[14]||(R[14]=Bn(B=>(ge(n)?n.value=2:n=2,ae(B.dataTransfer.files[0])),["prevent"])),onDragenter:R[15]||(R[15]=B=>ge(n)?n.value=2:n=2),onDragleave:R[16]||(R[16]=B=>ge(n)?n.value=0:n=0),class:xt({"border-white":ne(n)===2})},{default:$t(()=>[De(Ve(j.$t("b6")),1)]),_:1},8,["class"]),ve(Z,{onClick:Ee,onDrop:R[17]||(R[17]=Bn(B=>(ge(n)?n.value=3:n=3,ae(B.dataTransfer.files[0])),["prevent"])),onDragenter:R[18]||(R[18]=B=>ge(n)?n.value=3:n=3),onDragleave:R[19]||(R[19]=B=>ge(n)?n.value=0:n=0),class:xt({"border-white":ne(n)===3})},{default:$t(()=>[De(Ve(j.$t("b7")),1)]),_:1},8,["class"])]),ne(l).length>0?(Ke(),yt("p",NP,[ve(v),De(" "+Ve(j.$t("m0"))+Ve(ne(l)),1)])):ne(h).sw?(Ke(),yt("div",IP,[De(Ve(ne(a)("p12"))+" ",1),le("div",null,[os(le("input",{type:"radio",value:"1","onUpdate:modelValue":R[20]||(R[20]=B=>ge(A)?A.value=B:null)},null,512),[[Ao,ne(A),void 0,{number:!0}]]),De(Ve(ne(a)("p13",1)),1)]),le("div",null,[os(le("input",{type:"radio",value:"2","onUpdate:modelValue":R[21]||(R[21]=B=>ge(A)?A.value=B:null)},null,512),[[Ao,ne(A),void 0,{number:!0}]]),De(Ve(ne(a)("p13",2)),1)])])):fn("",!0),le("div",_P,[le("p",{onClick:R[22]||(R[22]=B=>ge(E)?E.value=!ne(E):E=!ne(E)),class:"p-2 z-0 flex gap-1 text-sm align-middle"},[ve(_,{class:xt(ne(E)?"rotate-90":"rotate-180")},null,8,["class"]),De(" "+Ve(j.$t("p8")),1),ne(l).length==0?(Ke(),yt("span",BP,Ve(j.$t("v0",ne(h).certtype)),1)):fn("",!0)]),le("div",{class:xt(["grid transition-all -z-10 duration-700 ease-in-out",ne(E)?"grid-rows-[0fr]":"grid-rows-[1fr]"])},[le("div",xP,[le("div",TP,Ve(ne(k)),1)])],2)]),le("div",RP,[ve(K,{clickable:ne(T),onClick:R[23]||(R[23]=B=>ne(T)&&it())},{default:$t(()=>[De(Ve(j.$t("b8")),1)]),_:1},8,["clickable"])])])):fn("",!0),ne(e)===3?(Ke(),yt("div",OP,[le("p",null,Ve(j.$t("p9")),1),le("div",VP,[ve(Z,{onClick:Ee,onDrop:R[24]||(R[24]=Bn(B=>(ge(n)?n.value=1:n=1,ae(B.dataTransfer.files[0])),["prevent"])),onDragenter:R[25]||(R[25]=B=>ge(n)?n.value=1:n=1),onDragleave:R[26]||(R[26]=B=>ge(n)?n.value=0:n=0),class:xt({"border-white":ne(n)===1})},{default:$t(()=>[De(Ve(j.$t("b5")),1)]),_:1},8,["class"]),ve(Z,{onClick:Ee,onDrop:R[27]||(R[27]=Bn(B=>(ge(n)?n.value=3:n=3,ae(B.dataTransfer.files[0])),["prevent"])),onDragenter:R[28]||(R[28]=B=>ge(n)?n.value=3:n=3),onDragleave:R[29]||(R[29]=B=>ge(n)?n.value=0:n=0),class:xt({"border-white":ne(n)===3})},{default:$t(()=>[De(Ve(j.$t("b7")),1)]),_:1},8,["class"])]),ne(u).length>0?(Ke(),yt("p",PP,[ve(v),De(" "+Ve(j.$t("m0"))+Ve(ne(u)),1)])):(Ke(),yt("p",LP,[DP,De(" "+Ve(j.$t("m1",ne(Y))),1),ve(b,{onClick:R[30]||(R[30]=B=>(ge(e)?e.value=4:e=4,N.value=9))})])),le("p",UP,[De(Ve(j.$t("p10")),1),ve(b,{onClick:R[31]||(R[31]=B=>(ge(e)?e.value=4:e=4,N.value=10))})]),os(le("textarea",{"onUpdate:modelValue":R[32]||(R[32]=B=>ge(qe)?qe.value=B:null),id:"needtorevoc",class:"w-full relative p-2 z-10 col-span-3 placeholder:text-slate-800 bg-slate-300 bg-opacity-10 rounded-xl shadow-lg text-xs focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 xl:ml-0",rows:"5"},null,512),[[uv,ne(qe)]]),le("div",MP,[le("p",null,Ve(j.$t("p11")),1),le("div",null,[os(le("input",{type:"checkbox",value:"0","onUpdate:modelValue":R[33]||(R[33]=B=>ge(x)?x.value=B:null)},null,512),[[So,ne(x)]]),De(Ve(j.$t("r0")),1)]),le("div",null,[os(le("input",{type:"checkbox",value:"1","onUpdate:modelValue":R[34]||(R[34]=B=>ge(x)?x.value=B:null)},null,512),[[So,ne(x)]]),De(Ve(j.$t("r1")),1)]),le("div",null,[os(le("input",{type:"checkbox",value:"2","onUpdate:modelValue":R[35]||(R[35]=B=>ge(x)?x.value=B:null)},null,512),[[So,ne(x)]]),De(Ve(j.$t("r2")),1)]),le("div",null,[os(le("input",{type:"checkbox",value:"3","onUpdate:modelValue":R[36]||(R[36]=B=>ge(x)?x.value=B:null)},null,512),[[So,ne(x)]]),De(Ve(j.$t("r3")),1)]),le("div",null,[os(le("input",{type:"checkbox",value:"4","onUpdate:modelValue":R[37]||(R[37]=B=>ge(x)?x.value=B:null)},null,512),[[So,ne(x)]]),De(Ve(j.$t("r4")),1)]),le("div",null,[os(le("input",{type:"checkbox",value:"5","onUpdate:modelValue":R[38]||(R[38]=B=>ge(x)?x.value=B:null)},null,512),[[So,ne(x)]]),De(Ve(j.$t("r5")),1)])]),le("div",HP,[ve(K,{clickable:ne(u).length===0,onClick:R[39]||(R[39]=B=>ne(u).length===0&&Oe())},{default:$t(()=>[De(Ve(j.$t("b9")),1)]),_:1},8,["clickable"])]),ve(Z,{onClick:Ee,onDrop:R[40]||(R[40]=Bn(B=>(ge(n)?n.value=4:n=4,ae(B.dataTransfer.files[0])),["prevent"])),onDragenter:R[41]||(R[41]=B=>ge(n)?n.value=4:n=4),onDragleave:R[42]||(R[42]=B=>ge(n)?n.value=0:n=0),class:xt({"border-white":ne(n)===4})},{default:$t(()=>[De(" ")]),_:1},8,["class"]),ve(Z,{onClick:Ee,onDrop:R[43]||(R[43]=Bn(B=>(ge(n)?n.value=5:n=5,ae(B.dataTransfer.files[0])),["prevent"])),onDragenter:R[44]||(R[44]=B=>ge(n)?n.value=5:n=5),onDragleave:R[45]||(R[45]=B=>ge(n)?n.value=0:n=0),class:xt({"border-white":ne(n)===5})},{default:$t(()=>[De(" ")]),_:1},8,["class"])])):fn("",!0),ne(e)===4?(Ke(),yt("div",$P,[le("div",FP,[le("div",jP,[(Ke(),yt(Vt,null,jy(11,B=>(Ke(),yt(Vt,null,[le("p",{onClick:re=>N.value=ne(N)===B?0:B,class:"text-base flex"},[ve(_,{class:xt(ne(N)===B?"rotate-180":"rotate-90")},null,8,["class"]),De(" "+Ve(B+". "+j.$t("q"+B)),1)],8,KP),le("p",{class:xt(["grid transition-all duration-500 ease-in-out",ne(N)===B?"grid-rows-[1fr]":"grid-rows-[0fr]"])},[le("div",JP,Ve(j.$t("a"+B)),1)],2)],64))),64))])])])):fn("",!0)])])],64)}}},qP={__name:"nuxt-error-page",props:{error:Object},setup(s){const t=s.error;t.stack&&t.stack.split(`
`).splice(1).map(f=>({text:f.replace("webpack:/","").replace(".vue",".js").trim(),internal:f.includes("node_modules")&&!f.includes(".cache")||f.includes("internal")||f.includes("new Promise")})).map(f=>`<span class="stack${f.internal?" internal":""}">${f.text}</span>`).join(`
`);const n=Number(t.statusCode||500),r=n===404,i=t.statusMessage??(r?"Page Not Found":"Internal Server Error"),a=t.message||t.toString(),o=void 0,u=r?Fy(()=>Lp(()=>import("./C-h8oJJY.js"),__vite__mapDeps([0,1]),import.meta.url).then(f=>f.default||f)):Fy(()=>Lp(()=>import("./BeEZQL5U.js"),__vite__mapDeps([2,3]),import.meta.url).then(f=>f.default||f));return(f,h)=>(Ke(),wn(ne(u),v0(o1({statusCode:ne(n),statusMessage:ne(i),description:ne(a),stack:ne(o)})),null,16))}},Qb={__name:"nuxt-root",setup(s){const e=()=>null,t=rt(),n=t.deferHydration();if(t.isHydrating){const o=t.hooks.hookOnce("app:error",n);Vc().beforeEach(o)}const r=!1;KS(V1,Fw()),t.hooks.callHookWith(o=>o.map(l=>l()),"vue:setup");const i=jw();HS((o,l,c)=>{if(t.hooks.callHook("vue:error",o,l,c).catch(u=>console.error("[nuxt] Error in `vue:error` hook",u)),lI(o)&&(o.fatal||o.unhandled))return t.runWithContext(()=>aI(o)),!1});const a=!1;return(o,l)=>(Ke(),wn(hE,{onResolve:ne(n)},{default:$t(()=>[ne(i)?(Ke(),wn(ne(qP),{key:0,error:ne(i)},null,8,["error"])):ne(a)?(Ke(),wn(ne(e),{key:1,context:ne(a)},null,8,["context"])):ne(r)?(Ke(),wn(lE(ne(r)),{key:2})):(Ke(),wn(ne(WP),{key:3}))]),_:1},8,["onResolve"]))}};let zb;{let s;zb=async function(){var a,o;if(s)return s;const n=!!((a=window.__NUXT__)!=null&&a.serverRendered||((o=document.getElementById("__NUXT_DATA__"))==null?void 0:o.dataset.ssr)==="true")?RC(Qb):TC(Qb),r=PN({vueApp:n});async function i(l){await r.callHook("app:error",l),r.payload.error=r.payload.error||Kw(l)}n.config.errorHandler=i;try{await DN(r,kT)}catch(l){i(l)}try{await r.hooks.callHook("app:created",n),await r.hooks.callHook("app:beforeMount",n),n.mount(t_),await r.hooks.callHook("app:mounted",n),await Jm()}catch(l){i(l)}return n.config.errorHandler===i&&(n.config.errorHandler=void 0),n},s=zb().catch(e=>{throw console.error("Error while mounting app:",e),e})}export{ve as A,$t as B,De as C,GP as D,YP as E,Rf as _,q1 as a,xv as b,jt as c,or as d,MS as e,zP as f,Dw as g,cr as h,XP as i,go as j,Mw as k,gs as l,rt as m,QP as n,Tw as o,Bf as p,P1 as q,Fe as r,Qm as s,QI as t,Vc as u,Ke as v,dm as w,yt as x,le as y,Ve as z};
