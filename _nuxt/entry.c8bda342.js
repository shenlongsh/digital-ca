/**
* @vue/shared v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function hw(s,e){const t=new Set(s.split(","));return e?n=>t.has(n.toLowerCase()):n=>t.has(n)}const rt={},tc=[],Bs=()=>{},Qk=()=>!1,Af=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),fw=s=>s.startsWith("onUpdate:"),Ht=Object.assign,dw=(s,e)=>{const t=s.indexOf(e);t>-1&&s.splice(t,1)},zk=Object.prototype.hasOwnProperty,$e=(s,e)=>zk.call(s,e),Ee=Array.isArray,sc=s=>kf(s)==="[object Map]",Mm=s=>kf(s)==="[object Set]",Cy=s=>kf(s)==="[object Date]",Te=s=>typeof s=="function",St=s=>typeof s=="string",rr=s=>typeof s=="symbol",tt=s=>s!==null&&typeof s=="object",Jb=s=>(tt(s)||Te(s))&&Te(s.then)&&Te(s.catch),Wb=Object.prototype.toString,kf=s=>Wb.call(s),Zk=s=>kf(s).slice(8,-1),qb=s=>kf(s)==="[object Object]",mw=s=>St(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,nc=hw(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Hm=s=>{const e=Object.create(null);return t=>e[t]||(e[t]=s(t))},e0=/-(\w)/g,En=Hm(s=>s.replace(e0,(e,t)=>t?t.toUpperCase():"")),t0=/\B([A-Z])/g,Tc=Hm(s=>s.replace(t0,"-$1").toLowerCase()),$m=Hm(s=>s.charAt(0).toUpperCase()+s.slice(1)),ug=Hm(s=>s?`on${$m(s)}`:""),ki=(s,e)=>!Object.is(s,e),bd=(s,e)=>{for(let t=0;t<s.length;t++)s[t](e)},Gb=(s,e,t,n=!1)=>{Object.defineProperty(s,e,{configurable:!0,enumerable:!1,writable:n,value:t})},tp=s=>{const e=parseFloat(s);return isNaN(e)?s:e},s0=s=>{const e=St(s)?Number(s):NaN;return isNaN(e)?s:e};let Ny;const Yb=()=>Ny||(Ny=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Fm(s){if(Ee(s)){const e={};for(let t=0;t<s.length;t++){const n=s[t],r=St(n)?a0(n):Fm(n);if(r)for(const i in r)e[i]=r[i]}return e}else if(St(s)||tt(s))return s}const n0=/;(?![^(]*\))/g,r0=/:([^]+)/,i0=/\/\*[^]*?\*\//g;function a0(s){const e={};return s.replace(i0,"").split(n0).forEach(t=>{if(t){const n=t.split(r0);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function xt(s){let e="";if(St(s))e=s;else if(Ee(s))for(let t=0;t<s.length;t++){const n=xt(s[t]);n&&(e+=n+" ")}else if(tt(s))for(const t in s)s[t]&&(e+=t+" ");return e.trim()}function o0(s){if(!s)return null;let{class:e,style:t}=s;return e&&!St(e)&&(s.class=xt(e)),t&&(s.style=Fm(t)),s}const l0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",c0=hw(l0);function Xb(s){return!!s||s===""}function u0(s,e){if(s.length!==e.length)return!1;let t=!0;for(let n=0;t&&n<s.length;n++)t=gc(s[n],e[n]);return t}function gc(s,e){if(s===e)return!0;let t=Cy(s),n=Cy(e);if(t||n)return t&&n?s.getTime()===e.getTime():!1;if(t=rr(s),n=rr(e),t||n)return s===e;if(t=Ee(s),n=Ee(e),t||n)return t&&n?u0(s,e):!1;if(t=tt(s),n=tt(e),t||n){if(!t||!n)return!1;const r=Object.keys(s).length,i=Object.keys(e).length;if(r!==i)return!1;for(const a in s){const o=s.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!gc(s[a],e[a]))return!1}}return String(s)===String(e)}function Qb(s,e){return s.findIndex(t=>gc(t,e))}const Be=s=>St(s)?s:s==null?"":Ee(s)||tt(s)&&(s.toString===Wb||!Te(s.toString))?JSON.stringify(s,zb,2):String(s),zb=(s,e)=>e&&e.__v_isRef?zb(s,e.value):sc(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,r],i)=>(t[hg(n,i)+" =>"]=r,t),{})}:Mm(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>hg(t))}:rr(e)?hg(e):tt(e)&&!Ee(e)&&!qb(e)?String(e):e,hg=(s,e="")=>{var t;return rr(s)?`Symbol(${(t=s.description)!=null?t:e})`:s};/**
* @vue/reactivity v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let bs;class Zb{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=bs,!e&&bs&&(this.index=(bs.scopes||(bs.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=bs;try{return bs=this,e()}finally{bs=t}}}on(){bs=this}off(){bs=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function gw(s){return new Zb(s)}function h0(s,e=bs){e&&e.active&&e.effects.push(s)}function eS(){return bs}function f0(s){bs&&bs.cleanups.push(s)}let Xa;class pw{constructor(e,t,n,r){this.fn=e,this.trigger=t,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,h0(this,r)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Ci();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed&&(d0(t.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Ni()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=mi,t=Xa;try{return mi=!0,Xa=this,this._runnings++,Iy(this),this.fn()}finally{_y(this),this._runnings--,Xa=t,mi=e}}stop(){this.active&&(Iy(this),_y(this),this.onStop&&this.onStop(),this.active=!1)}}function d0(s){return s.value}function Iy(s){s._trackId++,s._depsLength=0}function _y(s){if(s.deps.length>s._depsLength){for(let e=s._depsLength;e<s.deps.length;e++)tS(s.deps[e],s);s.deps.length=s._depsLength}}function tS(s,e){const t=s.get(e);t!==void 0&&e._trackId!==t&&(s.delete(e),s.size===0&&s.cleanup())}let mi=!0,sp=0;const sS=[];function Ci(){sS.push(mi),mi=!1}function Ni(){const s=sS.pop();mi=s===void 0?!0:s}function ww(){sp++}function yw(){for(sp--;!sp&&np.length;)np.shift()()}function nS(s,e,t){if(e.get(s)!==s._trackId){e.set(s,s._trackId);const n=s.deps[s._depsLength];n!==e?(n&&tS(n,s),s.deps[s._depsLength++]=e):s._depsLength++}}const np=[];function rS(s,e,t){ww();for(const n of s.keys()){let r;n._dirtyLevel<e&&(r??(r=s.get(n)===n._trackId))&&(n._shouldSchedule||(n._shouldSchedule=n._dirtyLevel===0),n._dirtyLevel=e),n._shouldSchedule&&(r??(r=s.get(n)===n._trackId))&&(n.trigger(),(!n._runnings||n.allowRecurse)&&n._dirtyLevel!==2&&(n._shouldSchedule=!1,n.scheduler&&np.push(n.scheduler)))}yw()}const iS=(s,e)=>{const t=new Map;return t.cleanup=s,t.computed=e,t},rm=new WeakMap,Qa=Symbol(""),rp=Symbol("");function gs(s,e,t){if(mi&&Xa){let n=rm.get(s);n||rm.set(s,n=new Map);let r=n.get(t);r||n.set(t,r=iS(()=>n.delete(t))),nS(Xa,r)}}function Zn(s,e,t,n,r,i){const a=rm.get(s);if(!a)return;let o=[];if(e==="clear")o=[...a.values()];else if(t==="length"&&Ee(s)){const l=Number(n);a.forEach((c,u)=>{(u==="length"||!rr(u)&&u>=l)&&o.push(c)})}else switch(t!==void 0&&o.push(a.get(t)),e){case"add":Ee(s)?mw(t)&&o.push(a.get("length")):(o.push(a.get(Qa)),sc(s)&&o.push(a.get(rp)));break;case"delete":Ee(s)||(o.push(a.get(Qa)),sc(s)&&o.push(a.get(rp)));break;case"set":sc(s)&&o.push(a.get(Qa));break}ww();for(const l of o)l&&rS(l,4);yw()}function m0(s,e){const t=rm.get(s);return t&&t.get(e)}const g0=hw("__proto__,__v_isRef,__isVue"),aS=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(rr)),By=p0();function p0(){const s={};return["includes","indexOf","lastIndexOf"].forEach(e=>{s[e]=function(...t){const n=Ye(this);for(let i=0,a=this.length;i<a;i++)gs(n,"get",i+"");const r=n[e](...t);return r===-1||r===!1?n[e](...t.map(Ye)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{s[e]=function(...t){Ci(),ww();const n=Ye(this)[e].apply(this,t);return yw(),Ni(),n}}),s}function w0(s){rr(s)||(s=String(s));const e=Ye(this);return gs(e,"has",s),e.hasOwnProperty(s)}class oS{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){const r=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_isShallow")return i;if(t==="__v_raw")return n===(r?i?x0:hS:i?uS:cS).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=Ee(e);if(!r){if(a&&$e(By,t))return Reflect.get(By,t,n);if(t==="hasOwnProperty")return w0}const o=Reflect.get(e,t,n);return(rr(t)?aS.has(t):g0(t))||(r||gs(e,"get",t),i)?o:pe(o)?a&&mw(t)?o:o.value:tt(o)?r?dS(o):ir(o):o}}class lS extends oS{constructor(e=!1){super(!1,e)}set(e,t,n,r){let i=e[t];if(!this._isShallow){const l=pc(i);if(!im(n)&&!pc(n)&&(i=Ye(i),n=Ye(n)),!Ee(e)&&pe(i)&&!pe(n))return l?!1:(i.value=n,!0)}const a=Ee(e)&&mw(t)?Number(t)<e.length:$e(e,t),o=Reflect.set(e,t,n,r);return e===Ye(r)&&(a?ki(n,i)&&Zn(e,"set",t,n):Zn(e,"add",t,n)),o}deleteProperty(e,t){const n=$e(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Zn(e,"delete",t,void 0),r}has(e,t){const n=Reflect.has(e,t);return(!rr(t)||!aS.has(t))&&gs(e,"has",t),n}ownKeys(e){return gs(e,"iterate",Ee(e)?"length":Qa),Reflect.ownKeys(e)}}class y0 extends oS{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const v0=new lS,b0=new y0,S0=new lS(!0);const vw=s=>s,Km=s=>Reflect.getPrototypeOf(s);function Vf(s,e,t=!1,n=!1){s=s.__v_raw;const r=Ye(s),i=Ye(e);t||(ki(e,i)&&gs(r,"get",e),gs(r,"get",i));const{has:a}=Km(r),o=n?vw:t?Aw:nf;if(a.call(r,e))return o(s.get(e));if(a.call(r,i))return o(s.get(i));s!==r&&s.get(e)}function Pf(s,e=!1){const t=this.__v_raw,n=Ye(t),r=Ye(s);return e||(ki(s,r)&&gs(n,"has",s),gs(n,"has",r)),s===r?t.has(s):t.has(s)||t.has(r)}function Lf(s,e=!1){return s=s.__v_raw,!e&&gs(Ye(s),"iterate",Qa),Reflect.get(s,"size",s)}function xy(s){s=Ye(s);const e=Ye(this);return Km(e).has.call(e,s)||(e.add(s),Zn(e,"add",s,s)),this}function Ty(s,e){e=Ye(e);const t=Ye(this),{has:n,get:r}=Km(t);let i=n.call(t,s);i||(s=Ye(s),i=n.call(t,s));const a=r.call(t,s);return t.set(s,e),i?ki(e,a)&&Zn(t,"set",s,e):Zn(t,"add",s,e),this}function Ry(s){const e=Ye(this),{has:t,get:n}=Km(e);let r=t.call(e,s);r||(s=Ye(s),r=t.call(e,s)),n&&n.call(e,s);const i=e.delete(s);return r&&Zn(e,"delete",s,void 0),i}function Oy(){const s=Ye(this),e=s.size!==0,t=s.clear();return e&&Zn(s,"clear",void 0,void 0),t}function Df(s,e){return function(n,r){const i=this,a=i.__v_raw,o=Ye(a),l=e?vw:s?Aw:nf;return!s&&gs(o,"iterate",Qa),a.forEach((c,u)=>n.call(r,l(c),l(u),i))}}function Uf(s,e,t){return function(...n){const r=this.__v_raw,i=Ye(r),a=sc(i),o=s==="entries"||s===Symbol.iterator&&a,l=s==="keys"&&a,c=r[s](...n),u=t?vw:e?Aw:nf;return!e&&gs(i,"iterate",l?rp:Qa),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:o?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function hr(s){return function(...e){return s==="delete"?!1:s==="clear"?void 0:this}}function A0(){const s={get(i){return Vf(this,i)},get size(){return Lf(this)},has:Pf,add:xy,set:Ty,delete:Ry,clear:Oy,forEach:Df(!1,!1)},e={get(i){return Vf(this,i,!1,!0)},get size(){return Lf(this)},has:Pf,add:xy,set:Ty,delete:Ry,clear:Oy,forEach:Df(!1,!0)},t={get(i){return Vf(this,i,!0)},get size(){return Lf(this,!0)},has(i){return Pf.call(this,i,!0)},add:hr("add"),set:hr("set"),delete:hr("delete"),clear:hr("clear"),forEach:Df(!0,!1)},n={get(i){return Vf(this,i,!0,!0)},get size(){return Lf(this,!0)},has(i){return Pf.call(this,i,!0)},add:hr("add"),set:hr("set"),delete:hr("delete"),clear:hr("clear"),forEach:Df(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=Uf(i,!1,!1),t[i]=Uf(i,!0,!1),e[i]=Uf(i,!1,!0),n[i]=Uf(i,!0,!0)}),[s,t,e,n]}const[k0,E0,C0,N0]=A0();function bw(s,e){const t=e?s?N0:C0:s?E0:k0;return(n,r,i)=>r==="__v_isReactive"?!s:r==="__v_isReadonly"?s:r==="__v_raw"?n:Reflect.get($e(t,r)&&r in n?t:n,r,i)}const I0={get:bw(!1,!1)},_0={get:bw(!1,!0)},B0={get:bw(!0,!1)};const cS=new WeakMap,uS=new WeakMap,hS=new WeakMap,x0=new WeakMap;function T0(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function R0(s){return s.__v_skip||!Object.isExtensible(s)?0:T0(Zk(s))}function ir(s){return pc(s)?s:Sw(s,!1,v0,I0,cS)}function fS(s){return Sw(s,!1,S0,_0,uS)}function dS(s){return Sw(s,!0,b0,B0,hS)}function Sw(s,e,t,n,r){if(!tt(s)||s.__v_raw&&!(e&&s.__v_isReactive))return s;const i=r.get(s);if(i)return i;const a=R0(s);if(a===0)return s;const o=new Proxy(s,a===2?n:t);return r.set(s,o),o}function Gh(s){return pc(s)?Gh(s.__v_raw):!!(s&&s.__v_isReactive)}function pc(s){return!!(s&&s.__v_isReadonly)}function im(s){return!!(s&&s.__v_isShallow)}function mS(s){return s?!!s.__v_raw:!1}function Ye(s){const e=s&&s.__v_raw;return e?Ye(e):s}function O0(s){return Object.isExtensible(s)&&Gb(s,"__v_skip",!0),s}const nf=s=>tt(s)?ir(s):s,Aw=s=>tt(s)?dS(s):s;class gS{constructor(e,t,n,r){this.getter=e,this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new pw(()=>e(this._value),()=>Sd(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=n}get value(){const e=Ye(this);return(!e._cacheable||e.effect.dirty)&&ki(e._value,e._value=e.effect.run())&&Sd(e,4),pS(e),e.effect._dirtyLevel>=2&&Sd(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function V0(s,e,t=!1){let n,r;const i=Te(s);return i?(n=s,r=Bs):(n=s.get,r=s.set),new gS(n,r,i||!r,t)}function pS(s){var e;mi&&Xa&&(s=Ye(s),nS(Xa,(e=s.dep)!=null?e:s.dep=iS(()=>s.dep=void 0,s instanceof gS?s:void 0)))}function Sd(s,e=4,t){s=Ye(s);const n=s.dep;n&&rS(n,e)}function pe(s){return!!(s&&s.__v_isRef===!0)}function Me(s){return wS(s,!1)}function ip(s){return wS(s,!0)}function wS(s,e){return pe(s)?s:new P0(s,e)}class P0{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Ye(e),this._value=t?e:nf(e)}get value(){return pS(this),this._value}set value(e){const t=this.__v_isShallow||im(e)||pc(e);e=t?e:Ye(e),ki(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:nf(e),Sd(this,4))}}function Z(s){return pe(s)?s.value:s}const L0={get:(s,e,t)=>Z(Reflect.get(s,e,t)),set:(s,e,t,n)=>{const r=s[e];return pe(r)&&!pe(t)?(r.value=t,!0):Reflect.set(s,e,t,n)}};function yS(s){return Gh(s)?s:new Proxy(s,L0)}class D0{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return m0(Ye(this._object),this._key)}}class U0{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function vS(s,e,t){return pe(s)?s:Te(s)?new U0(s):tt(s)&&arguments.length>1?M0(s,e,t):Me(s)}function M0(s,e,t){const n=s[e];return pe(n)?n:new D0(s,e,t)}/**
* @vue/runtime-core v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function gi(s,e,t,n){try{return n?s(...n):s()}catch(r){Rc(r,e,t)}}function tn(s,e,t,n){if(Te(s)){const r=gi(s,e,t,n);return r&&Jb(r)&&r.catch(i=>{Rc(i,e,t)}),r}if(Ee(s)){const r=[];for(let i=0;i<s.length;i++)r.push(tn(s[i],e,t,n));return r}}function Rc(s,e,t,n=!0){const r=e?e.vnode:null;if(e){let i=e.parent;const a=e.proxy,o=`https://vuejs.org/error-reference/#runtime-${t}`;for(;i;){const c=i.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](s,a,o)===!1)return}i=i.parent}const l=e.appContext.config.errorHandler;if(l){Ci(),gi(l,null,10,[s,a,o]),Ni();return}}H0(s,t,r,n)}function H0(s,e,t,n=!0){console.error(s)}let rf=!1,ap=!1;const Gt=[];let gn=0;const rc=[];let ti=null,Fa=0;const bS=Promise.resolve();let kw=null;function jm(s){const e=kw||bS;return s?e.then(this?s.bind(this):s):e}function $0(s){let e=gn+1,t=Gt.length;for(;e<t;){const n=e+t>>>1,r=Gt[n],i=af(r);i<s||i===s&&r.pre?e=n+1:t=n}return e}function Jm(s){(!Gt.length||!Gt.includes(s,rf&&s.allowRecurse?gn+1:gn))&&(s.id==null?Gt.push(s):Gt.splice($0(s.id),0,s),SS())}function SS(){!rf&&!ap&&(ap=!0,kw=bS.then(AS))}function F0(s){const e=Gt.indexOf(s);e>gn&&Gt.splice(e,1)}function op(s){Ee(s)?rc.push(...s):(!ti||!ti.includes(s,s.allowRecurse?Fa+1:Fa))&&rc.push(s),SS()}function Vy(s,e,t=rf?gn+1:0){for(;t<Gt.length;t++){const n=Gt[t];if(n&&n.pre){if(s&&n.id!==s.uid)continue;Gt.splice(t,1),t--,n()}}}function am(s){if(rc.length){const e=[...new Set(rc)].sort((t,n)=>af(t)-af(n));if(rc.length=0,ti){ti.push(...e);return}for(ti=e,Fa=0;Fa<ti.length;Fa++)ti[Fa]();ti=null,Fa=0}}const af=s=>s.id==null?1/0:s.id,K0=(s,e)=>{const t=af(s)-af(e);if(t===0){if(s.pre&&!e.pre)return-1;if(e.pre&&!s.pre)return 1}return t};function AS(s){ap=!1,rf=!0,Gt.sort(K0);const e=Bs;try{for(gn=0;gn<Gt.length;gn++){const t=Gt[gn];t&&t.active!==!1&&gi(t,null,14)}}finally{gn=0,Gt.length=0,am(),rf=!1,kw=null,(Gt.length||rc.length)&&AS()}}function j0(s,e,...t){if(s.isUnmounted)return;const n=s.vnode.props||rt;let r=t;const i=e.startsWith("update:"),a=i&&e.slice(7);if(a&&a in n){const u=`${a==="modelValue"?"model":a}Modifiers`,{number:h,trim:f}=n[u]||rt;f&&(r=t.map(m=>St(m)?m.trim():m)),h&&(r=t.map(tp))}let o,l=n[o=ug(e)]||n[o=ug(En(e))];!l&&i&&(l=n[o=ug(Tc(e))]),l&&tn(l,s,6,r);const c=n[o+"Once"];if(c){if(!s.emitted)s.emitted={};else if(s.emitted[o])return;s.emitted[o]=!0,tn(c,s,6,r)}}function kS(s,e,t=!1){const n=e.emitsCache,r=n.get(s);if(r!==void 0)return r;const i=s.emits;let a={},o=!1;if(!Te(s)){const l=c=>{const u=kS(c,e,!0);u&&(o=!0,Ht(a,u))};!t&&e.mixins.length&&e.mixins.forEach(l),s.extends&&l(s.extends),s.mixins&&s.mixins.forEach(l)}return!i&&!o?(tt(s)&&n.set(s,null),null):(Ee(i)?i.forEach(l=>a[l]=null):Ht(a,i),tt(s)&&n.set(s,a),a)}function Wm(s,e){return!s||!Af(e)?!1:(e=e.slice(2).replace(/Once$/,""),$e(s,e[0].toLowerCase()+e.slice(1))||$e(s,Tc(e))||$e(s,e))}let Tt=null,qm=null;function om(s){const e=Tt;return Tt=s,qm=s&&s.type.__scopeId||null,e}function QV(s){qm=s}function zV(){qm=null}function zt(s,e=Tt,t){if(!e||s._n)return s;const n=(...r)=>{n._d&&Gy(-1);const i=om(e);let a;try{a=s(...r)}finally{om(i),n._d&&Gy(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function fg(s){const{type:e,vnode:t,proxy:n,withProxy:r,propsOptions:[i],slots:a,attrs:o,emit:l,render:c,renderCache:u,props:h,data:f,setupState:m,ctx:S,inheritAttrs:k}=s,C=om(s);let R,T;try{if(t.shapeFlag&4){const w=r||n,E=w;R=Ds(c.call(E,w,u,h,m,f,S)),T=o}else{const w=e;R=Ds(w.length>1?w(h,{attrs:o,slots:a,emit:l}):w(h,null)),T=e.props?o:W0(o)}}catch(w){Qh.length=0,Rc(w,s,1),R=ye(rn)}let b=R;if(T&&k!==!1){const w=Object.keys(T),{shapeFlag:E}=b;w.length&&E&7&&(i&&w.some(fw)&&(T=q0(T,i)),b=yc(b,T,!1,!0))}return t.dirs&&(b=yc(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(t.dirs):t.dirs),t.transition&&(b.transition=t.transition),R=b,om(C),R}function J0(s,e=!0){let t;for(let n=0;n<s.length;n++){const r=s[n];if(lf(r)){if(r.type!==rn||r.children==="v-if"){if(t)return;t=r}}else return}return t}const W0=s=>{let e;for(const t in s)(t==="class"||t==="style"||Af(t))&&((e||(e={}))[t]=s[t]);return e},q0=(s,e)=>{const t={};for(const n in s)(!fw(n)||!(n.slice(9)in e))&&(t[n]=s[n]);return t};function G0(s,e,t){const{props:n,children:r,component:i}=s,{props:a,children:o,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return n?Py(n,a,c):!!a;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(a[f]!==n[f]&&!Wm(c,f))return!0}}}else return(r||o)&&(!o||!o.$stable)?!0:n===a?!1:n?a?Py(n,a,c):!0:!!a;return!1}function Py(s,e,t){const n=Object.keys(e);if(n.length!==Object.keys(s).length)return!0;for(let r=0;r<n.length;r++){const i=n[r];if(e[i]!==s[i]&&!Wm(t,i))return!0}return!1}function Ew({vnode:s,parent:e},t){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===s&&(n.el=s.el),n===s)(s=e.vnode).el=t,e=e.parent;else break}}const Cw="components";function ZV(s,e){return CS(Cw,s,!0,e)||s}const ES=Symbol.for("v-ndc");function Y0(s){return St(s)?CS(Cw,s,!1)||s:s||ES}function CS(s,e,t=!0,n=!1){const r=Tt||Ot;if(r){const i=r.type;if(s===Cw){const o=jE(i,!1);if(o&&(o===e||o===En(e)||o===$m(En(e))))return i}const a=Ly(r[s]||i[s],e)||Ly(r.appContext[s],e);return!a&&n?i:a}}function Ly(s,e){return s&&(s[e]||s[En(e)]||s[$m(En(e))])}const X0=s=>s.__isSuspense;let lp=0;const Q0={name:"Suspense",__isSuspense:!0,process(s,e,t,n,r,i,a,o,l,c){if(s==null)Z0(e,t,n,r,i,a,o,l,c);else{if(i&&i.deps>0&&!s.suspense.isInFallback){e.suspense=s.suspense,e.suspense.vnode=e,e.el=s.el;return}eE(s,e,t,n,r,a,o,l,c)}},hydrate:tE,create:Nw,normalize:sE},z0=Q0;function of(s,e){const t=s.props&&s.props[e];Te(t)&&t()}function Z0(s,e,t,n,r,i,a,o,l){const{p:c,o:{createElement:u}}=l,h=u("div"),f=s.suspense=Nw(s,r,n,e,h,t,i,a,o,l);c(null,f.pendingBranch=s.ssContent,h,null,n,f,i,a),f.deps>0?(of(s,"onPending"),of(s,"onFallback"),c(null,s.ssFallback,e,t,n,null,i,a),ic(f,s.ssFallback)):f.resolve(!1,!0)}function eE(s,e,t,n,r,i,a,o,{p:l,um:c,o:{createElement:u}}){const h=e.suspense=s.suspense;h.vnode=e,e.el=s.el;const f=e.ssContent,m=e.ssFallback,{activeBranch:S,pendingBranch:k,isInFallback:C,isHydrating:R}=h;if(k)h.pendingBranch=f,oi(f,k)?(l(k,f,h.hiddenContainer,null,r,h,i,a,o),h.deps<=0?h.resolve():C&&(R||(l(S,m,t,n,r,null,i,a,o),ic(h,m)))):(h.pendingId=lp++,R?(h.isHydrating=!1,h.activeBranch=k):c(k,r,h),h.deps=0,h.effects.length=0,h.hiddenContainer=u("div"),C?(l(null,f,h.hiddenContainer,null,r,h,i,a,o),h.deps<=0?h.resolve():(l(S,m,t,n,r,null,i,a,o),ic(h,m))):S&&oi(f,S)?(l(S,f,t,n,r,h,i,a,o),h.resolve(!0)):(l(null,f,h.hiddenContainer,null,r,h,i,a,o),h.deps<=0&&h.resolve()));else if(S&&oi(f,S))l(S,f,t,n,r,h,i,a,o),ic(h,f);else if(of(e,"onPending"),h.pendingBranch=f,f.shapeFlag&512?h.pendingId=f.component.suspenseId:h.pendingId=lp++,l(null,f,h.hiddenContainer,null,r,h,i,a,o),h.deps<=0)h.resolve();else{const{timeout:T,pendingId:b}=h;T>0?setTimeout(()=>{h.pendingId===b&&h.fallback(m)},T):T===0&&h.fallback(m)}}function Nw(s,e,t,n,r,i,a,o,l,c,u=!1){const{p:h,m:f,um:m,n:S,o:{parentNode:k,remove:C}}=c;let R;const T=nE(s);T&&e&&e.pendingBranch&&(R=e.pendingId,e.deps++);const b=s.props?s0(s.props.timeout):void 0,w=i,E={vnode:s,parent:e,parentComponent:t,namespace:a,container:n,hiddenContainer:r,deps:0,pendingId:lp++,timeout:typeof b=="number"?b:-1,activeBranch:null,pendingBranch:null,isInFallback:!u,isHydrating:u,isUnmounted:!1,effects:[],resolve(N=!1,L=!1){const{vnode:H,activeBranch:F,pendingBranch:ne,pendingId:ce,effects:te,parentComponent:fe,container:xe}=E;let ge=!1;E.isHydrating?E.isHydrating=!1:N||(ge=F&&ne.transition&&ne.transition.mode==="out-in",ge&&(F.transition.afterLeave=()=>{ce===E.pendingId&&(f(ne,xe,i===w?S(F):i,0),op(te))}),F&&(k(F.el)!==E.hiddenContainer&&(i=S(F)),m(F,fe,E,!0)),ge||f(ne,xe,i,0)),ic(E,ne),E.pendingBranch=null,E.isInFallback=!1;let ie=E.parent,me=!1;for(;ie;){if(ie.pendingBranch){ie.effects.push(...te),me=!0;break}ie=ie.parent}!me&&!ge&&op(te),E.effects=[],T&&e&&e.pendingBranch&&R===e.pendingId&&(e.deps--,e.deps===0&&!L&&e.resolve()),of(H,"onResolve")},fallback(N){if(!E.pendingBranch)return;const{vnode:L,activeBranch:H,parentComponent:F,container:ne,namespace:ce}=E;of(L,"onFallback");const te=S(H),fe=()=>{E.isInFallback&&(h(null,N,ne,te,F,null,ce,o,l),ic(E,N))},xe=N.transition&&N.transition.mode==="out-in";xe&&(H.transition.afterLeave=fe),E.isInFallback=!0,m(H,F,null,!0),xe||fe()},move(N,L,H){E.activeBranch&&f(E.activeBranch,N,L,H),E.container=N},next(){return E.activeBranch&&S(E.activeBranch)},registerDep(N,L){const H=!!E.pendingBranch;H&&E.deps++;const F=N.vnode.el;N.asyncDep.catch(ne=>{Rc(ne,N,0)}).then(ne=>{if(N.isUnmounted||E.isUnmounted||E.pendingId!==N.suspenseId)return;N.asyncResolved=!0;const{vnode:ce}=N;mp(N,ne,!1),F&&(ce.el=F);const te=!F&&N.subTree.el;L(N,ce,k(F||N.subTree.el),F?null:S(N.subTree),E,a,l),te&&C(te),Ew(N,ce.el),H&&--E.deps===0&&E.resolve()})},unmount(N,L){E.isUnmounted=!0,E.activeBranch&&m(E.activeBranch,t,N,L),E.pendingBranch&&m(E.pendingBranch,t,N,L)}};return E}function tE(s,e,t,n,r,i,a,o,l){const c=e.suspense=Nw(e,n,t,s.parentNode,document.createElement("div"),null,r,i,a,o,!0),u=l(s,c.pendingBranch=e.ssContent,t,c,i,a);return c.deps===0&&c.resolve(!1,!0),u}function sE(s){const{shapeFlag:e,children:t}=s,n=e&32;s.ssContent=Dy(n?t.default:t),s.ssFallback=n?Dy(t.fallback):ye(rn)}function Dy(s){let e;if(Te(s)){const t=wc&&s._c;t&&(s._d=!1,je()),s=s(),t&&(s._d=!0,e=Ks,XS())}return Ee(s)&&(s=J0(s)),s=Ds(s),e&&!s.dynamicChildren&&(s.dynamicChildren=e.filter(t=>t!==s)),s}function NS(s,e){e&&e.pendingBranch?Ee(s)?e.effects.push(...s):e.effects.push(s):op(s)}function ic(s,e){s.activeBranch=e;const{vnode:t,parentComponent:n}=s;let r=e.el;for(;!r&&e.component;)e=e.component.subTree,r=e.el;t.el=r,n&&n.subTree===t&&(n.vnode.el=r,Ew(n,r))}function nE(s){const e=s.props&&s.props.suspensible;return e!=null&&e!==!1}const rE=Symbol.for("v-scx"),iE=()=>za(rE);function aE(s,e){return Iw(s,null,e)}const Mf={};function Sn(s,e,t){return Iw(s,e,t)}function Iw(s,e,{immediate:t,deep:n,flush:r,once:i,onTrack:a,onTrigger:o}=rt){if(e&&i){const N=e;e=(...L)=>{N(...L),E()}}const l=Ot,c=N=>n===!0?N:qa(N,n===!1?1:void 0);let u,h=!1,f=!1;if(pe(s)?(u=()=>s.value,h=im(s)):Gh(s)?(u=()=>c(s),h=!0):Ee(s)?(f=!0,h=s.some(N=>Gh(N)||im(N)),u=()=>s.map(N=>{if(pe(N))return N.value;if(Gh(N))return c(N);if(Te(N))return gi(N,l,2)})):Te(s)?e?u=()=>gi(s,l,2):u=()=>(m&&m(),tn(s,l,3,[S])):u=Bs,e&&n){const N=u;u=()=>qa(N())}let m,S=N=>{m=b.onStop=()=>{gi(N,l,4),m=b.onStop=void 0}},k;if(Nf)if(S=Bs,e?t&&tn(e,l,3,[u(),f?[]:void 0,S]):u(),r==="sync"){const N=iE();k=N.__watcherHandles||(N.__watcherHandles=[])}else return Bs;let C=f?new Array(s.length).fill(Mf):Mf;const R=()=>{if(!(!b.active||!b.dirty))if(e){const N=b.run();(n||h||(f?N.some((L,H)=>ki(L,C[H])):ki(N,C)))&&(m&&m(),tn(e,l,3,[N,C===Mf?void 0:f&&C[0]===Mf?[]:C,S]),C=N)}else b.run()};R.allowRecurse=!!e;let T;r==="sync"?T=R:r==="post"?T=()=>us(R,l&&l.suspense):(R.pre=!0,l&&(R.id=l.uid),T=()=>Jm(R));const b=new pw(u,Bs,T),w=eS(),E=()=>{b.stop(),w&&dw(w.effects,b)};return e?t?R():C=b.run():r==="post"?us(b.run.bind(b),l&&l.suspense):b.run(),k&&k.push(E),E}function oE(s,e,t){const n=this.proxy,r=St(s)?s.includes(".")?IS(n,s):()=>n[s]:s.bind(n,n);let i;Te(e)?i=e:(i=e.handler,t=e);const a=Cf(this),o=Iw(r,i.bind(n),t);return a(),o}function IS(s,e){const t=e.split(".");return()=>{let n=s;for(let r=0;r<t.length&&n;r++)n=n[t[r]];return n}}function qa(s,e=1/0,t){if(e<=0||!tt(s)||s.__v_skip||(t=t||new Set,t.has(s)))return s;if(t.add(s),e--,pe(s))qa(s.value,e,t);else if(Ee(s))for(let n=0;n<s.length;n++)qa(s[n],e,t);else if(Mm(s)||sc(s))s.forEach(n=>{qa(n,e,t)});else if(qb(s))for(const n in s)qa(s[n],e,t);return s}function ls(s,e){if(Tt===null)return s;const t=Ym(Tt)||Tt.proxy,n=s.dirs||(s.dirs=[]);for(let r=0;r<e.length;r++){let[i,a,o,l=rt]=e[r];i&&(Te(i)&&(i={mounted:i,updated:i}),i.deep&&qa(a),n.push({dir:i,instance:t,value:a,oldValue:void 0,arg:o,modifiers:l}))}return s}function dn(s,e,t,n){const r=s.dirs,i=e&&e.dirs;for(let a=0;a<r.length;a++){const o=r[a];i&&(o.oldValue=i[a].value);let l=o.dir[n];l&&(Ci(),tn(l,t,8,[s.el,o,s,e]),Ni())}}/*! #__NO_SIDE_EFFECTS__ */function Ii(s,e){return Te(s)?(()=>Ht({name:s.name},e,{setup:s}))():s}const ac=s=>!!s.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Uy(s){Te(s)&&(s={loader:s});const{loader:e,loadingComponent:t,errorComponent:n,delay:r=200,timeout:i,suspensible:a=!0,onError:o}=s;let l=null,c,u=0;const h=()=>(u++,l=null,f()),f=()=>{let m;return l||(m=l=e().catch(S=>{if(S=S instanceof Error?S:new Error(String(S)),o)return new Promise((k,C)=>{o(S,()=>k(h()),()=>C(S),u+1)});throw S}).then(S=>m!==l&&l?l:(S&&(S.__esModule||S[Symbol.toStringTag]==="Module")&&(S=S.default),c=S,S)))};return Ii({name:"AsyncComponentWrapper",__asyncLoader:f,get __asyncResolved(){return c},setup(){const m=Ot;if(c)return()=>dg(c,m);const S=T=>{l=null,Rc(T,m,13,!n)};if(a&&m.suspense||Nf)return f().then(T=>()=>dg(T,m)).catch(T=>(S(T),()=>n?ye(n,{error:T}):null));const k=Me(!1),C=Me(),R=Me(!!r);return r&&setTimeout(()=>{R.value=!1},r),i!=null&&setTimeout(()=>{if(!k.value&&!C.value){const T=new Error(`Async component timed out after ${i}ms.`);S(T),C.value=T}},i),f().then(()=>{k.value=!0,m.parent&&_w(m.parent.vnode)&&(m.parent.effect.dirty=!0,Jm(m.parent.update))}).catch(T=>{S(T),C.value=T}),()=>{if(k.value&&c)return dg(c,m);if(C.value&&n)return ye(n,{error:C.value});if(t&&!R.value)return ye(t)}}})}function dg(s,e){const{ref:t,props:n,children:r,ce:i}=e.vnode,a=ye(s,n,r);return a.ref=t,a.ce=i,delete e.vnode.ce,a}const _w=s=>s.type.__isKeepAlive;function _S(s,e){xS(s,"a",e)}function BS(s,e){xS(s,"da",e)}function xS(s,e,t=Ot){const n=s.__wdc||(s.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return s()});if(Gm(e,n,t),t){let r=t.parent;for(;r&&r.parent;)_w(r.parent.vnode)&&lE(n,e,t,r),r=r.parent}}function lE(s,e,t,n){const r=Gm(e,s,n,!0);xw(()=>{dw(n[e],r)},t)}function Gm(s,e,t=Ot,n=!1){if(t){const r=t[s]||(t[s]=[]),i=e.__weh||(e.__weh=(...a)=>{if(t.isUnmounted)return;Ci();const o=Cf(t),l=tn(e,t,s,a);return o(),Ni(),l});return n?r.unshift(i):r.push(i),i}}const or=s=>(e,t=Ot)=>(!Nf||s==="sp")&&Gm(s,(...n)=>e(...n),t),cE=or("bm"),Bw=or("m"),uE=or("bu"),hE=or("u"),TS=or("bum"),xw=or("um"),fE=or("sp"),dE=or("rtg"),mE=or("rtc");function RS(s,e=Ot){Gm("ec",s,e)}function My(s,e,t,n){let r;const i=t&&t[n];if(Ee(s)||St(s)){r=new Array(s.length);for(let a=0,o=s.length;a<o;a++)r[a]=e(s[a],a,void 0,i&&i[a])}else if(typeof s=="number"){r=new Array(s);for(let a=0;a<s;a++)r[a]=e(a+1,a,void 0,i&&i[a])}else if(tt(s))if(s[Symbol.iterator])r=Array.from(s,(a,o)=>e(a,o,void 0,i&&i[o]));else{const a=Object.keys(s);r=new Array(a.length);for(let o=0,l=a.length;o<l;o++){const c=a[o];r[o]=e(s[c],c,o,i&&i[o])}}else r=[];return t&&(t[n]=r),r}function Tw(s,e,t={},n,r){if(Tt.isCE||Tt.parent&&ac(Tt.parent)&&Tt.parent.isCE)return e!=="default"&&(t.name=e),ye("slot",t,n&&n());let i=s[e];i&&i._c&&(i._d=!1),je();const a=i&&OS(i(t)),o=pn(Ut,{key:t.key||a&&a.key||`_${e}`},a||(n?n():[]),a&&s._===1?64:-2);return!r&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),i&&i._c&&(i._d=!0),o}function OS(s){return s.some(e=>lf(e)?!(e.type===rn||e.type===Ut&&!OS(e.children)):!0)?s:null}const cp=s=>s?t1(s)?Ym(s)||s.proxy:cp(s.parent):null,Yh=Ht(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>cp(s.parent),$root:s=>cp(s.root),$emit:s=>s.emit,$options:s=>Rw(s),$forceUpdate:s=>s.f||(s.f=()=>{s.effect.dirty=!0,Jm(s.update)}),$nextTick:s=>s.n||(s.n=jm.bind(s.proxy)),$watch:s=>oE.bind(s)}),mg=(s,e)=>s!==rt&&!s.__isScriptSetup&&$e(s,e),gE={get({_:s},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:n,data:r,props:i,accessCache:a,type:o,appContext:l}=s;let c;if(e[0]!=="$"){const m=a[e];if(m!==void 0)switch(m){case 1:return n[e];case 2:return r[e];case 4:return t[e];case 3:return i[e]}else{if(mg(n,e))return a[e]=1,n[e];if(r!==rt&&$e(r,e))return a[e]=2,r[e];if((c=s.propsOptions[0])&&$e(c,e))return a[e]=3,i[e];if(t!==rt&&$e(t,e))return a[e]=4,t[e];up&&(a[e]=0)}}const u=Yh[e];let h,f;if(u)return e==="$attrs"&&gs(s.attrs,"get",""),u(s);if((h=o.__cssModules)&&(h=h[e]))return h;if(t!==rt&&$e(t,e))return a[e]=4,t[e];if(f=l.config.globalProperties,$e(f,e))return f[e]},set({_:s},e,t){const{data:n,setupState:r,ctx:i}=s;return mg(r,e)?(r[e]=t,!0):n!==rt&&$e(n,e)?(n[e]=t,!0):$e(s.props,e)||e[0]==="$"&&e.slice(1)in s?!1:(i[e]=t,!0)},has({_:{data:s,setupState:e,accessCache:t,ctx:n,appContext:r,propsOptions:i}},a){let o;return!!t[a]||s!==rt&&$e(s,a)||mg(e,a)||(o=i[0])&&$e(o,a)||$e(n,a)||$e(Yh,a)||$e(r.config.globalProperties,a)},defineProperty(s,e,t){return t.get!=null?s._.accessCache[e]=0:$e(t,"value")&&this.set(s,e,t.value,null),Reflect.defineProperty(s,e,t)}};function Hy(s){return Ee(s)?s.reduce((e,t)=>(e[t]=null,e),{}):s}let up=!0;function pE(s){const e=Rw(s),t=s.proxy,n=s.ctx;up=!1,e.beforeCreate&&$y(e.beforeCreate,s,"bc");const{data:r,computed:i,methods:a,watch:o,provide:l,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:m,updated:S,activated:k,deactivated:C,beforeDestroy:R,beforeUnmount:T,destroyed:b,unmounted:w,render:E,renderTracked:N,renderTriggered:L,errorCaptured:H,serverPrefetch:F,expose:ne,inheritAttrs:ce,components:te,directives:fe,filters:xe}=e;if(c&&wE(c,n,null),a)for(const me in a){const Q=a[me];Te(Q)&&(n[me]=Q.bind(t))}if(r){const me=r.call(t,t);tt(me)&&(s.data=ir(me))}if(up=!0,i)for(const me in i){const Q=i[me],ke=Te(Q)?Q.bind(t,t):Te(Q.get)?Q.get.bind(t,t):Bs,ue=!Te(Q)&&Te(Q.set)?Q.set.bind(t):Bs,ae=Yt({get:ke,set:ue});Object.defineProperty(n,me,{enumerable:!0,configurable:!0,get:()=>ae.value,set:oe=>ae.value=oe})}if(o)for(const me in o)VS(o[me],n,t,me);if(l){const me=Te(l)?l.call(t):l;Reflect.ownKeys(me).forEach(Q=>{LS(Q,me[Q])})}u&&$y(u,s,"c");function ie(me,Q){Ee(Q)?Q.forEach(ke=>me(ke.bind(t))):Q&&me(Q.bind(t))}if(ie(cE,h),ie(Bw,f),ie(uE,m),ie(hE,S),ie(_S,k),ie(BS,C),ie(RS,H),ie(mE,N),ie(dE,L),ie(TS,T),ie(xw,w),ie(fE,F),Ee(ne))if(ne.length){const me=s.exposed||(s.exposed={});ne.forEach(Q=>{Object.defineProperty(me,Q,{get:()=>t[Q],set:ke=>t[Q]=ke})})}else s.exposed||(s.exposed={});E&&s.render===Bs&&(s.render=E),ce!=null&&(s.inheritAttrs=ce),te&&(s.components=te),fe&&(s.directives=fe)}function wE(s,e,t=Bs){Ee(s)&&(s=hp(s));for(const n in s){const r=s[n];let i;tt(r)?"default"in r?i=za(r.from||n,r.default,!0):i=za(r.from||n):i=za(r),pe(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[n]=i}}function $y(s,e,t){tn(Ee(s)?s.map(n=>n.bind(e.proxy)):s.bind(e.proxy),e,t)}function VS(s,e,t,n){const r=n.includes(".")?IS(t,n):()=>t[n];if(St(s)){const i=e[s];Te(i)&&Sn(r,i)}else if(Te(s))Sn(r,s.bind(t));else if(tt(s))if(Ee(s))s.forEach(i=>VS(i,e,t,n));else{const i=Te(s.handler)?s.handler.bind(t):e[s.handler];Te(i)&&Sn(r,i,s)}}function Rw(s){const e=s.type,{mixins:t,extends:n}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:a}}=s.appContext,o=i.get(e);let l;return o?l=o:!r.length&&!t&&!n?l=e:(l={},r.length&&r.forEach(c=>lm(l,c,a,!0)),lm(l,e,a)),tt(e)&&i.set(e,l),l}function lm(s,e,t,n=!1){const{mixins:r,extends:i}=e;i&&lm(s,i,t,!0),r&&r.forEach(a=>lm(s,a,t,!0));for(const a in e)if(!(n&&a==="expose")){const o=yE[a]||t&&t[a];s[a]=o?o(s[a],e[a]):e[a]}return s}const yE={data:Fy,props:Ky,emits:Ky,methods:zc,computed:zc,beforeCreate:Qt,created:Qt,beforeMount:Qt,mounted:Qt,beforeUpdate:Qt,updated:Qt,beforeDestroy:Qt,beforeUnmount:Qt,destroyed:Qt,unmounted:Qt,activated:Qt,deactivated:Qt,errorCaptured:Qt,serverPrefetch:Qt,components:zc,directives:zc,watch:bE,provide:Fy,inject:vE};function Fy(s,e){return e?s?function(){return Ht(Te(s)?s.call(this,this):s,Te(e)?e.call(this,this):e)}:e:s}function vE(s,e){return zc(hp(s),hp(e))}function hp(s){if(Ee(s)){const e={};for(let t=0;t<s.length;t++)e[s[t]]=s[t];return e}return s}function Qt(s,e){return s?[...new Set([].concat(s,e))]:e}function zc(s,e){return s?Ht(Object.create(null),s,e):e}function Ky(s,e){return s?Ee(s)&&Ee(e)?[...new Set([...s,...e])]:Ht(Object.create(null),Hy(s),Hy(e??{})):e}function bE(s,e){if(!s)return e;if(!e)return s;const t=Ht(Object.create(null),s);for(const n in e)t[n]=Qt(s[n],e[n]);return t}function PS(){return{app:null,config:{isNativeTag:Qk,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let SE=0;function AE(s,e){return function(n,r=null){Te(n)||(n=Ht({},n)),r!=null&&!tt(r)&&(r=null);const i=PS(),a=new WeakSet;let o=!1;const l=i.app={_uid:SE++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:n1,get config(){return i.config},set config(c){},use(c,...u){return a.has(c)||(c&&Te(c.install)?(a.add(c),c.install(l,...u)):Te(c)&&(a.add(c),c(l,...u))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,u){return u?(i.components[c]=u,l):i.components[c]},directive(c,u){return u?(i.directives[c]=u,l):i.directives[c]},mount(c,u,h){if(!o){const f=ye(n,r);return f.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),u&&e?e(f,c):s(f,c,h),o=!0,l._container=c,c.__vue_app__=l,Ym(f.component)||f.component.proxy}},unmount(){o&&(s(null,l._container),delete l._container.__vue_app__)},provide(c,u){return i.provides[c]=u,l},runWithContext(c){const u=oc;oc=l;try{return c()}finally{oc=u}}};return l}}let oc=null;function LS(s,e){if(Ot){let t=Ot.provides;const n=Ot.parent&&Ot.parent.provides;n===t&&(t=Ot.provides=Object.create(n)),t[s]=e}}function za(s,e,t=!1){const n=Ot||Tt;if(n||oc){const r=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:oc._context.provides;if(r&&s in r)return r[s];if(arguments.length>1)return t&&Te(e)?e.call(n&&n.proxy):e}}function DS(){return!!(Ot||Tt||oc)}const US={},MS=()=>Object.create(US),HS=s=>Object.getPrototypeOf(s)===US;function kE(s,e,t,n=!1){const r={},i=MS();s.propsDefaults=Object.create(null),$S(s,e,r,i);for(const a in s.propsOptions[0])a in r||(r[a]=void 0);t?s.props=n?r:fS(r):s.type.props?s.props=r:s.props=i,s.attrs=i}function EE(s,e,t,n){const{props:r,attrs:i,vnode:{patchFlag:a}}=s,o=Ye(r),[l]=s.propsOptions;let c=!1;if((n||a>0)&&!(a&16)){if(a&8){const u=s.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(Wm(s.emitsOptions,f))continue;const m=e[f];if(l)if($e(i,f))m!==i[f]&&(i[f]=m,c=!0);else{const S=En(f);r[S]=fp(l,o,S,m,s,!1)}else m!==i[f]&&(i[f]=m,c=!0)}}}else{$S(s,e,r,i)&&(c=!0);let u;for(const h in o)(!e||!$e(e,h)&&((u=Tc(h))===h||!$e(e,u)))&&(l?t&&(t[h]!==void 0||t[u]!==void 0)&&(r[h]=fp(l,o,h,void 0,s,!0)):delete r[h]);if(i!==o)for(const h in i)(!e||!$e(e,h))&&(delete i[h],c=!0)}c&&Zn(s.attrs,"set","")}function $S(s,e,t,n){const[r,i]=s.propsOptions;let a=!1,o;if(e)for(let l in e){if(nc(l))continue;const c=e[l];let u;r&&$e(r,u=En(l))?!i||!i.includes(u)?t[u]=c:(o||(o={}))[u]=c:Wm(s.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,a=!0)}if(i){const l=Ye(t),c=o||rt;for(let u=0;u<i.length;u++){const h=i[u];t[h]=fp(r,l,h,c[h],s,!$e(c,h))}}return a}function fp(s,e,t,n,r,i){const a=s[t];if(a!=null){const o=$e(a,"default");if(o&&n===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Te(l)){const{propsDefaults:c}=r;if(t in c)n=c[t];else{const u=Cf(r);n=c[t]=l.call(null,e),u()}}else n=l}a[0]&&(i&&!o?n=!1:a[1]&&(n===""||n===Tc(t))&&(n=!0))}return n}function FS(s,e,t=!1){const n=e.propsCache,r=n.get(s);if(r)return r;const i=s.props,a={},o=[];let l=!1;if(!Te(s)){const u=h=>{l=!0;const[f,m]=FS(h,e,!0);Ht(a,f),m&&o.push(...m)};!t&&e.mixins.length&&e.mixins.forEach(u),s.extends&&u(s.extends),s.mixins&&s.mixins.forEach(u)}if(!i&&!l)return tt(s)&&n.set(s,tc),tc;if(Ee(i))for(let u=0;u<i.length;u++){const h=En(i[u]);jy(h)&&(a[h]=rt)}else if(i)for(const u in i){const h=En(u);if(jy(h)){const f=i[u],m=a[h]=Ee(f)||Te(f)?{type:f}:Ht({},f);if(m){const S=qy(Boolean,m.type),k=qy(String,m.type);m[0]=S>-1,m[1]=k<0||S<k,(S>-1||$e(m,"default"))&&o.push(h)}}}const c=[a,o];return tt(s)&&n.set(s,c),c}function jy(s){return s[0]!=="$"&&!nc(s)}function Jy(s){return s===null?"null":typeof s=="function"?s.name||"":typeof s=="object"&&s.constructor&&s.constructor.name||""}function Wy(s,e){return Jy(s)===Jy(e)}function qy(s,e){return Ee(e)?e.findIndex(t=>Wy(t,s)):Te(e)&&Wy(e,s)?0:-1}const KS=s=>s[0]==="_"||s==="$stable",Ow=s=>Ee(s)?s.map(Ds):[Ds(s)],CE=(s,e,t)=>{if(e._n)return e;const n=zt((...r)=>Ow(e(...r)),t);return n._c=!1,n},jS=(s,e,t)=>{const n=s._ctx;for(const r in s){if(KS(r))continue;const i=s[r];if(Te(i))e[r]=CE(r,i,n);else if(i!=null){const a=Ow(i);e[r]=()=>a}}},JS=(s,e)=>{const t=Ow(e);s.slots.default=()=>t},NE=(s,e)=>{const t=s.slots=MS();if(s.vnode.shapeFlag&32){const n=e._;n?(Ht(t,e),Gb(t,"_",n,!0)):jS(e,t)}else e&&JS(s,e)},IE=(s,e,t)=>{const{vnode:n,slots:r}=s;let i=!0,a=rt;if(n.shapeFlag&32){const o=e._;o?t&&o===1?i=!1:(Ht(r,e),!t&&o===1&&delete r._):(i=!e.$stable,jS(e,r)),a=e}else e&&(JS(s,e),a={default:1});if(i)for(const o in r)!KS(o)&&a[o]==null&&delete r[o]};function cm(s,e,t,n,r=!1){if(Ee(s)){s.forEach((f,m)=>cm(f,e&&(Ee(e)?e[m]:e),t,n,r));return}if(ac(n)&&!r)return;const i=n.shapeFlag&4?Ym(n.component)||n.component.proxy:n.el,a=r?null:i,{i:o,r:l}=s,c=e&&e.r,u=o.refs===rt?o.refs={}:o.refs,h=o.setupState;if(c!=null&&c!==l&&(St(c)?(u[c]=null,$e(h,c)&&(h[c]=null)):pe(c)&&(c.value=null)),Te(l))gi(l,o,12,[a,u]);else{const f=St(l),m=pe(l);if(f||m){const S=()=>{if(s.f){const k=f?$e(h,l)?h[l]:u[l]:l.value;r?Ee(k)&&dw(k,i):Ee(k)?k.includes(i)||k.push(i):f?(u[l]=[i],$e(h,l)&&(h[l]=u[l])):(l.value=[i],s.k&&(u[s.k]=l.value))}else f?(u[l]=a,$e(h,l)&&(h[l]=a)):m&&(l.value=a,s.k&&(u[s.k]=a))};a?(S.id=-1,us(S,t)):S()}}}let fr=!1;const _E=s=>s.namespaceURI.includes("svg")&&s.tagName!=="foreignObject",BE=s=>s.namespaceURI.includes("MathML"),Hf=s=>{if(_E(s))return"svg";if(BE(s))return"mathml"},$f=s=>s.nodeType===8;function xE(s){const{mt:e,p:t,o:{patchProp:n,createText:r,nextSibling:i,parentNode:a,remove:o,insert:l,createComment:c}}=s,u=(b,w)=>{if(!w.hasChildNodes()){t(null,b,w),am(),w._vnode=b;return}fr=!1,h(w.firstChild,b,null,null,null),am(),w._vnode=b,fr&&console.error("Hydration completed but contains mismatches.")},h=(b,w,E,N,L,H=!1)=>{H=H||!!w.dynamicChildren;const F=$f(b)&&b.data==="[",ne=()=>k(b,w,E,N,L,F),{type:ce,ref:te,shapeFlag:fe,patchFlag:xe}=w;let ge=b.nodeType;w.el=b,xe===-2&&(H=!1,w.dynamicChildren=null);let ie=null;switch(ce){case lo:ge!==3?w.children===""?(l(w.el=r(""),a(b),b),ie=b):ie=ne():(b.data!==w.children&&(fr=!0,b.data=w.children),ie=i(b));break;case rn:T(b)?(ie=i(b),R(w.el=b.content.firstChild,b,E)):ge!==8||F?ie=ne():ie=i(b);break;case Xh:if(F&&(b=i(b),ge=b.nodeType),ge===1||ge===3){ie=b;const me=!w.children.length;for(let Q=0;Q<w.staticCount;Q++)me&&(w.children+=ie.nodeType===1?ie.outerHTML:ie.data),Q===w.staticCount-1&&(w.anchor=ie),ie=i(ie);return F?i(ie):ie}else ne();break;case Ut:F?ie=S(b,w,E,N,L,H):ie=ne();break;default:if(fe&1)(ge!==1||w.type.toLowerCase()!==b.tagName.toLowerCase())&&!T(b)?ie=ne():ie=f(b,w,E,N,L,H);else if(fe&6){w.slotScopeIds=L;const me=a(b);if(F?ie=C(b):$f(b)&&b.data==="teleport start"?ie=C(b,b.data,"teleport end"):ie=i(b),e(w,me,null,E,N,Hf(me),H),ac(w)){let Q;F?(Q=ye(Ut),Q.anchor=ie?ie.previousSibling:me.lastChild):Q=b.nodeType===3?Le(""):ye("div"),Q.el=b,w.component.subTree=Q}}else fe&64?ge!==8?ie=ne():ie=w.type.hydrate(b,w,E,N,L,H,s,m):fe&128&&(ie=w.type.hydrate(b,w,E,N,Hf(a(b)),L,H,s,h))}return te!=null&&cm(te,null,N,w),ie},f=(b,w,E,N,L,H)=>{H=H||!!w.dynamicChildren;const{type:F,props:ne,patchFlag:ce,shapeFlag:te,dirs:fe,transition:xe}=w,ge=F==="input"||F==="option";if(ge||ce!==-1){fe&&dn(w,null,E,"created");let ie=!1;if(T(b)){ie=qS(N,xe)&&E&&E.vnode.props&&E.vnode.props.appear;const Q=b.content.firstChild;ie&&xe.beforeEnter(Q),R(Q,b,E),w.el=b=Q}if(te&16&&!(ne&&(ne.innerHTML||ne.textContent))){let Q=m(b.firstChild,w,b,E,N,L,H);for(;Q;){fr=!0;const ke=Q;Q=Q.nextSibling,o(ke)}}else te&8&&b.textContent!==w.children&&(fr=!0,b.textContent=w.children);if(ne)if(ge||!H||ce&48)for(const Q in ne)(ge&&(Q.endsWith("value")||Q==="indeterminate")||Af(Q)&&!nc(Q)||Q[0]===".")&&n(b,Q,null,ne[Q],void 0,void 0,E);else ne.onClick&&n(b,"onClick",null,ne.onClick,void 0,void 0,E);let me;(me=ne&&ne.onVnodeBeforeMount)&&Vs(me,E,w),fe&&dn(w,null,E,"beforeMount"),((me=ne&&ne.onVnodeMounted)||fe||ie)&&NS(()=>{me&&Vs(me,E,w),ie&&xe.enter(b),fe&&dn(w,null,E,"mounted")},N)}return b.nextSibling},m=(b,w,E,N,L,H,F)=>{F=F||!!w.dynamicChildren;const ne=w.children,ce=ne.length;for(let te=0;te<ce;te++){const fe=F?ne[te]:ne[te]=Ds(ne[te]);if(b)b=h(b,fe,N,L,H,F);else{if(fe.type===lo&&!fe.children)continue;fr=!0,t(null,fe,E,null,N,L,Hf(E),H)}}return b},S=(b,w,E,N,L,H)=>{const{slotScopeIds:F}=w;F&&(L=L?L.concat(F):F);const ne=a(b),ce=m(i(b),w,ne,E,N,L,H);return ce&&$f(ce)&&ce.data==="]"?i(w.anchor=ce):(fr=!0,l(w.anchor=c("]"),ne,ce),ce)},k=(b,w,E,N,L,H)=>{if(fr=!0,w.el=null,H){const ce=C(b);for(;;){const te=i(b);if(te&&te!==ce)o(te);else break}}const F=i(b),ne=a(b);return o(b),t(null,w,ne,F,E,N,Hf(ne),L),F},C=(b,w="[",E="]")=>{let N=0;for(;b;)if(b=i(b),b&&$f(b)&&(b.data===w&&N++,b.data===E)){if(N===0)return i(b);N--}return b},R=(b,w,E)=>{const N=w.parentNode;N&&N.replaceChild(b,w);let L=E;for(;L;)L.vnode.el===w&&(L.vnode.el=L.subTree.el=b),L=L.parent},T=b=>b.nodeType===1&&b.tagName.toLowerCase()==="template";return[u,h]}const us=NS;function TE(s){return WS(s)}function RE(s){return WS(s,xE)}function WS(s,e){const t=Yb();t.__VUE__=!0;const{insert:n,remove:r,patchProp:i,createElement:a,createText:o,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:m=Bs,insertStaticContent:S}=s,k=(p,v,x,O=null,D=null,M=null,q=void 0,y=null,A=!!v.dynamicChildren)=>{if(p===v)return;p&&!oi(p,v)&&(O=Ke(p),oe(p,D,M,!0),p=null),v.patchFlag===-2&&(A=!1,v.dynamicChildren=null);const{type:B,ref:P,shapeFlag:W}=v;switch(B){case lo:C(p,v,x,O);break;case rn:R(p,v,x,O);break;case Xh:p==null&&T(v,x,O,q);break;case Ut:te(p,v,x,O,D,M,q,y,A);break;default:W&1?E(p,v,x,O,D,M,q,y,A):W&6?fe(p,v,x,O,D,M,q,y,A):(W&64||W&128)&&B.process(p,v,x,O,D,M,q,y,A,gt)}P!=null&&D&&cm(P,p&&p.ref,M,v||p,!v)},C=(p,v,x,O)=>{if(p==null)n(v.el=o(v.children),x,O);else{const D=v.el=p.el;v.children!==p.children&&c(D,v.children)}},R=(p,v,x,O)=>{p==null?n(v.el=l(v.children||""),x,O):v.el=p.el},T=(p,v,x,O)=>{[p.el,p.anchor]=S(p.children,v,x,O,p.el,p.anchor)},b=({el:p,anchor:v},x,O)=>{let D;for(;p&&p!==v;)D=f(p),n(p,x,O),p=D;n(v,x,O)},w=({el:p,anchor:v})=>{let x;for(;p&&p!==v;)x=f(p),r(p),p=x;r(v)},E=(p,v,x,O,D,M,q,y,A)=>{v.type==="svg"?q="svg":v.type==="math"&&(q="mathml"),p==null?N(v,x,O,D,M,q,y,A):F(p,v,D,M,q,y,A)},N=(p,v,x,O,D,M,q,y)=>{let A,B;const{props:P,shapeFlag:W,transition:J,dirs:_}=p;if(A=p.el=a(p.type,M,P&&P.is,P),W&8?u(A,p.children):W&16&&H(p.children,A,null,O,D,gg(p,M),q,y),_&&dn(p,null,O,"created"),L(A,p,p.scopeId,q,O),P){for(const we in P)we!=="value"&&!nc(we)&&i(A,we,null,P[we],M,p.children,O,D,Xe);"value"in P&&i(A,"value",null,P.value,M),(B=P.onVnodeBeforeMount)&&Vs(B,O,p)}_&&dn(p,null,O,"beforeMount");const K=qS(D,J);K&&J.beforeEnter(A),n(A,v,x),((B=P&&P.onVnodeMounted)||K||_)&&us(()=>{B&&Vs(B,O,p),K&&J.enter(A),_&&dn(p,null,O,"mounted")},D)},L=(p,v,x,O,D)=>{if(x&&m(p,x),O)for(let M=0;M<O.length;M++)m(p,O[M]);if(D){let M=D.subTree;if(v===M){const q=D.vnode;L(p,q,q.scopeId,q.slotScopeIds,D.parent)}}},H=(p,v,x,O,D,M,q,y,A=0)=>{for(let B=A;B<p.length;B++){const P=p[B]=y?si(p[B]):Ds(p[B]);k(null,P,v,x,O,D,M,q,y)}},F=(p,v,x,O,D,M,q)=>{const y=v.el=p.el;let{patchFlag:A,dynamicChildren:B,dirs:P}=v;A|=p.patchFlag&16;const W=p.props||rt,J=v.props||rt;let _;if(x&&Oi(x,!1),(_=J.onVnodeBeforeUpdate)&&Vs(_,x,v,p),P&&dn(v,p,x,"beforeUpdate"),x&&Oi(x,!0),B?ne(p.dynamicChildren,B,y,x,O,gg(v,D),M):q||Q(p,v,y,null,x,O,gg(v,D),M,!1),A>0){if(A&16)ce(y,v,W,J,x,O,D);else if(A&2&&W.class!==J.class&&i(y,"class",null,J.class,D),A&4&&i(y,"style",W.style,J.style,D),A&8){const K=v.dynamicProps;for(let we=0;we<K.length;we++){const _e=K[we],Je=W[_e],Kt=J[_e];(Kt!==Je||_e==="value")&&i(y,_e,Je,Kt,D,p.children,x,O,Xe)}}A&1&&p.children!==v.children&&u(y,v.children)}else!q&&B==null&&ce(y,v,W,J,x,O,D);((_=J.onVnodeUpdated)||P)&&us(()=>{_&&Vs(_,x,v,p),P&&dn(v,p,x,"updated")},O)},ne=(p,v,x,O,D,M,q)=>{for(let y=0;y<v.length;y++){const A=p[y],B=v[y],P=A.el&&(A.type===Ut||!oi(A,B)||A.shapeFlag&70)?h(A.el):x;k(A,B,P,null,O,D,M,q,!0)}},ce=(p,v,x,O,D,M,q)=>{if(x!==O){if(x!==rt)for(const y in x)!nc(y)&&!(y in O)&&i(p,y,x[y],null,q,v.children,D,M,Xe);for(const y in O){if(nc(y))continue;const A=O[y],B=x[y];A!==B&&y!=="value"&&i(p,y,B,A,q,v.children,D,M,Xe)}"value"in O&&i(p,"value",x.value,O.value,q)}},te=(p,v,x,O,D,M,q,y,A)=>{const B=v.el=p?p.el:o(""),P=v.anchor=p?p.anchor:o("");let{patchFlag:W,dynamicChildren:J,slotScopeIds:_}=v;_&&(y=y?y.concat(_):_),p==null?(n(B,x,O),n(P,x,O),H(v.children||[],x,P,D,M,q,y,A)):W>0&&W&64&&J&&p.dynamicChildren?(ne(p.dynamicChildren,J,x,D,M,q,y),(v.key!=null||D&&v===D.subTree)&&GS(p,v,!0)):Q(p,v,x,P,D,M,q,y,A)},fe=(p,v,x,O,D,M,q,y,A)=>{v.slotScopeIds=y,p==null?v.shapeFlag&512?D.ctx.activate(v,x,O,q,A):xe(v,x,O,D,M,q,A):ge(p,v,A)},xe=(p,v,x,O,D,M,q)=>{const y=p.component=ME(p,O,D);if(_w(p)&&(y.ctx.renderer=gt),HE(y),y.asyncDep){if(D&&D.registerDep(y,ie),!p.el){const A=y.subTree=ye(rn);R(null,A,v,x)}}else ie(y,p,v,x,D,M,q)},ge=(p,v,x)=>{const O=v.component=p.component;if(G0(p,v,x))if(O.asyncDep&&!O.asyncResolved){me(O,v,x);return}else O.next=v,F0(O.update),O.effect.dirty=!0,O.update();else v.el=p.el,O.vnode=v},ie=(p,v,x,O,D,M,q)=>{const y=()=>{if(p.isMounted){let{next:P,bu:W,u:J,parent:_,vnode:K}=p;{const ws=YS(p);if(ws){P&&(P.el=K.el,me(p,P,q)),ws.asyncDep.then(()=>{p.isUnmounted||y()});return}}let we=P,_e;Oi(p,!1),P?(P.el=K.el,me(p,P,q)):P=K,W&&bd(W),(_e=P.props&&P.props.onVnodeBeforeUpdate)&&Vs(_e,_,P,K),Oi(p,!0);const Je=fg(p),Kt=p.subTree;p.subTree=Je,k(Kt,Je,h(Kt.el),Ke(Kt),p,D,M),P.el=Je.el,we===null&&Ew(p,Je.el),J&&us(J,D),(_e=P.props&&P.props.onVnodeUpdated)&&us(()=>Vs(_e,_,P,K),D)}else{let P;const{el:W,props:J}=v,{bm:_,m:K,parent:we}=p,_e=ac(v);if(Oi(p,!1),_&&bd(_),!_e&&(P=J&&J.onVnodeBeforeMount)&&Vs(P,we,v),Oi(p,!0),W&&ze){const Je=()=>{p.subTree=fg(p),ze(W,p.subTree,p,D,null)};_e?v.type.__asyncLoader().then(()=>!p.isUnmounted&&Je()):Je()}else{const Je=p.subTree=fg(p);k(null,Je,x,O,p,D,M),v.el=Je.el}if(K&&us(K,D),!_e&&(P=J&&J.onVnodeMounted)){const Je=v;us(()=>Vs(P,we,Je),D)}(v.shapeFlag&256||we&&ac(we.vnode)&&we.vnode.shapeFlag&256)&&p.a&&us(p.a,D),p.isMounted=!0,v=x=O=null}},A=p.effect=new pw(y,Bs,()=>Jm(B),p.scope),B=p.update=()=>{A.dirty&&A.run()};B.id=p.uid,Oi(p,!0),B()},me=(p,v,x)=>{v.component=p;const O=p.vnode.props;p.vnode=v,p.next=null,EE(p,v.props,O,x),IE(p,v.children,x),Ci(),Vy(p),Ni()},Q=(p,v,x,O,D,M,q,y,A=!1)=>{const B=p&&p.children,P=p?p.shapeFlag:0,W=v.children,{patchFlag:J,shapeFlag:_}=v;if(J>0){if(J&128){ue(B,W,x,O,D,M,q,y,A);return}else if(J&256){ke(B,W,x,O,D,M,q,y,A);return}}_&8?(P&16&&Xe(B,D,M),W!==B&&u(x,W)):P&16?_&16?ue(B,W,x,O,D,M,q,y,A):Xe(B,D,M,!0):(P&8&&u(x,""),_&16&&H(W,x,O,D,M,q,y,A))},ke=(p,v,x,O,D,M,q,y,A)=>{p=p||tc,v=v||tc;const B=p.length,P=v.length,W=Math.min(B,P);let J;for(J=0;J<W;J++){const _=v[J]=A?si(v[J]):Ds(v[J]);k(p[J],_,x,null,D,M,q,y,A)}B>P?Xe(p,D,M,!0,!1,W):H(v,x,O,D,M,q,y,A,W)},ue=(p,v,x,O,D,M,q,y,A)=>{let B=0;const P=v.length;let W=p.length-1,J=P-1;for(;B<=W&&B<=J;){const _=p[B],K=v[B]=A?si(v[B]):Ds(v[B]);if(oi(_,K))k(_,K,x,null,D,M,q,y,A);else break;B++}for(;B<=W&&B<=J;){const _=p[W],K=v[J]=A?si(v[J]):Ds(v[J]);if(oi(_,K))k(_,K,x,null,D,M,q,y,A);else break;W--,J--}if(B>W){if(B<=J){const _=J+1,K=_<P?v[_].el:O;for(;B<=J;)k(null,v[B]=A?si(v[B]):Ds(v[B]),x,K,D,M,q,y,A),B++}}else if(B>J)for(;B<=W;)oe(p[B],D,M,!0),B++;else{const _=B,K=B,we=new Map;for(B=K;B<=J;B++){const ys=v[B]=A?si(v[B]):Ds(v[B]);ys.key!=null&&we.set(ys.key,B)}let _e,Je=0;const Kt=J-K+1;let ws=!1,Of=0;const vo=new Array(Kt);for(B=0;B<Kt;B++)vo[B]=0;for(B=_;B<=W;B++){const ys=p[B];if(Je>=Kt){oe(ys,D,M,!0);continue}let un;if(ys.key!=null)un=we.get(ys.key);else for(_e=K;_e<=J;_e++)if(vo[_e-K]===0&&oi(ys,v[_e])){un=_e;break}un===void 0?oe(ys,D,M,!0):(vo[un-K]=B+1,un>=Of?Of=un:ws=!0,k(ys,v[un],x,null,D,M,q,y,A),Je++)}const ky=ws?OE(vo):tc;for(_e=ky.length-1,B=Kt-1;B>=0;B--){const ys=K+B,un=v[ys],Ey=ys+1<P?v[ys+1].el:O;vo[B]===0?k(null,un,x,Ey,D,M,q,y,A):ws&&(_e<0||B!==ky[_e]?ae(un,x,Ey,2):_e--)}}},ae=(p,v,x,O,D=null)=>{const{el:M,type:q,transition:y,children:A,shapeFlag:B}=p;if(B&6){ae(p.component.subTree,v,x,O);return}if(B&128){p.suspense.move(v,x,O);return}if(B&64){q.move(p,v,x,gt);return}if(q===Ut){n(M,v,x);for(let W=0;W<A.length;W++)ae(A[W],v,x,O);n(p.anchor,v,x);return}if(q===Xh){b(p,v,x);return}if(O!==2&&B&1&&y)if(O===0)y.beforeEnter(M),n(M,v,x),us(()=>y.enter(M),D);else{const{leave:W,delayLeave:J,afterLeave:_}=y,K=()=>n(M,v,x),we=()=>{W(M,()=>{K(),_&&_()})};J?J(M,K,we):we()}else n(M,v,x)},oe=(p,v,x,O=!1,D=!1)=>{const{type:M,props:q,ref:y,children:A,dynamicChildren:B,shapeFlag:P,patchFlag:W,dirs:J}=p;if(y!=null&&cm(y,null,x,p,!0),P&256){v.ctx.deactivate(p);return}const _=P&1&&J,K=!ac(p);let we;if(K&&(we=q&&q.onVnodeBeforeUnmount)&&Vs(we,v,p),P&6)nt(p.component,x,O);else{if(P&128){p.suspense.unmount(x,O);return}_&&dn(p,null,v,"beforeUnmount"),P&64?p.type.remove(p,v,x,D,gt,O):B&&(M!==Ut||W>0&&W&64)?Xe(B,v,x,!1,!0):(M===Ut&&W&384||!D&&P&16)&&Xe(A,v,x),O&&se(p)}(K&&(we=q&&q.onVnodeUnmounted)||_)&&us(()=>{we&&Vs(we,v,p),_&&dn(p,null,v,"unmounted")},x)},se=p=>{const{type:v,el:x,anchor:O,transition:D}=p;if(v===Ut){Ce(x,O);return}if(v===Xh){w(p);return}const M=()=>{r(x),D&&!D.persisted&&D.afterLeave&&D.afterLeave()};if(p.shapeFlag&1&&D&&!D.persisted){const{leave:q,delayLeave:y}=D,A=()=>q(x,M);y?y(p.el,M,A):A()}else M()},Ce=(p,v)=>{let x;for(;p!==v;)x=f(p),r(p),p=x;r(v)},nt=(p,v,x)=>{const{bum:O,scope:D,update:M,subTree:q,um:y}=p;O&&bd(O),D.stop(),M&&(M.active=!1,oe(q,p,v,x)),y&&us(y,v),us(()=>{p.isUnmounted=!0},v),v&&v.pendingBranch&&!v.isUnmounted&&p.asyncDep&&!p.asyncResolved&&p.suspenseId===v.pendingId&&(v.deps--,v.deps===0&&v.resolve())},Xe=(p,v,x,O=!1,D=!1,M=0)=>{for(let q=M;q<p.length;q++)oe(p[q],v,x,O,D)},Ke=p=>p.shapeFlag&6?Ke(p.component.subTree):p.shapeFlag&128?p.suspense.next():f(p.anchor||p.el);let Re=!1;const re=(p,v,x)=>{p==null?v._vnode&&oe(v._vnode,null,null,!0):k(v._vnode||null,p,v,null,null,null,x),Re||(Re=!0,Vy(),am(),Re=!1),v._vnode=p},gt={p:k,um:oe,m:ae,r:se,mt:xe,mc:H,pc:Q,pbc:ne,n:Ke,o:s};let Vt,ze;return e&&([Vt,ze]=e(gt)),{render:re,hydrate:Vt,createApp:AE(re,Vt)}}function gg({type:s,props:e},t){return t==="svg"&&s==="foreignObject"||t==="mathml"&&s==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Oi({effect:s,update:e},t){s.allowRecurse=e.allowRecurse=t}function qS(s,e){return(!s||s&&!s.pendingBranch)&&e&&!e.persisted}function GS(s,e,t=!1){const n=s.children,r=e.children;if(Ee(n)&&Ee(r))for(let i=0;i<n.length;i++){const a=n[i];let o=r[i];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=r[i]=si(r[i]),o.el=a.el),t||GS(a,o)),o.type===lo&&(o.el=a.el)}}function OE(s){const e=s.slice(),t=[0];let n,r,i,a,o;const l=s.length;for(n=0;n<l;n++){const c=s[n];if(c!==0){if(r=t[t.length-1],s[r]<c){e[n]=r,t.push(n);continue}for(i=0,a=t.length-1;i<a;)o=i+a>>1,s[t[o]]<c?i=o+1:a=o;c<s[t[i]]&&(i>0&&(e[n]=t[i-1]),t[i]=n)}}for(i=t.length,a=t[i-1];i-- >0;)t[i]=a,a=e[a];return t}function YS(s){const e=s.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:YS(e)}const VE=s=>s.__isTeleport,Ut=Symbol.for("v-fgt"),lo=Symbol.for("v-txt"),rn=Symbol.for("v-cmt"),Xh=Symbol.for("v-stc"),Qh=[];let Ks=null;function je(s=!1){Qh.push(Ks=s?null:[])}function XS(){Qh.pop(),Ks=Qh[Qh.length-1]||null}let wc=1;function Gy(s){wc+=s}function QS(s){return s.dynamicChildren=wc>0?Ks||tc:null,XS(),wc>0&&Ks&&Ks.push(s),s}function Et(s,e,t,n,r,i){return QS(ee(s,e,t,n,r,i,!0))}function pn(s,e,t,n,r){return QS(ye(s,e,t,n,r,!0))}function lf(s){return s?s.__v_isVNode===!0:!1}function oi(s,e){return s.type===e.type&&s.key===e.key}const zS=({key:s})=>s??null,Ad=({ref:s,ref_key:e,ref_for:t})=>(typeof s=="number"&&(s=""+s),s!=null?St(s)||pe(s)||Te(s)?{i:Tt,r:s,k:e,f:!!t}:s:null);function ee(s,e=null,t=null,n=0,r=null,i=s===Ut?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:s,props:e,key:e&&zS(e),ref:e&&Ad(e),scopeId:qm,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Tt};return o?(Vw(l,t),i&128&&s.normalize(l)):t&&(l.shapeFlag|=St(t)?8:16),wc>0&&!a&&Ks&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Ks.push(l),l}const ye=PE;function PE(s,e=null,t=null,n=0,r=null,i=!1){if((!s||s===ES)&&(s=rn),lf(s)){const o=yc(s,e,!0);return t&&Vw(o,t),wc>0&&!i&&Ks&&(o.shapeFlag&6?Ks[Ks.indexOf(s)]=o:Ks.push(o)),o.patchFlag|=-2,o}if(JE(s)&&(s=s.__vccOpts),e){e=ZS(e);let{class:o,style:l}=e;o&&!St(o)&&(e.class=xt(o)),tt(l)&&(mS(l)&&!Ee(l)&&(l=Ht({},l)),e.style=Fm(l))}const a=St(s)?1:X0(s)?128:VE(s)?64:tt(s)?4:Te(s)?2:0;return ee(s,e,t,n,r,a,i,!0)}function ZS(s){return s?mS(s)||HS(s)?Ht({},s):s:null}function yc(s,e,t=!1,n=!1){const{props:r,ref:i,patchFlag:a,children:o,transition:l}=s,c=e?e1(r||{},e):r,u={__v_isVNode:!0,__v_skip:!0,type:s.type,props:c,key:c&&zS(c),ref:e&&e.ref?t&&i?Ee(i)?i.concat(Ad(e)):[i,Ad(e)]:Ad(e):i,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:o,target:s.target,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:e&&s.type!==Ut?a===-1?16:a|16:a,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:l,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&yc(s.ssContent),ssFallback:s.ssFallback&&yc(s.ssFallback),el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return l&&n&&(u.transition=l.clone(u)),u}function Le(s=" ",e=0){return ye(lo,null,s,e)}function LE(s,e){const t=ye(Xh,null,s);return t.staticCount=e,t}function Ys(s="",e=!1){return e?(je(),pn(rn,null,s)):ye(rn,null,s)}function Ds(s){return s==null||typeof s=="boolean"?ye(rn):Ee(s)?ye(Ut,null,s.slice()):typeof s=="object"?si(s):ye(lo,null,String(s))}function si(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:yc(s)}function Vw(s,e){let t=0;const{shapeFlag:n}=s;if(e==null)e=null;else if(Ee(e))t=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),Vw(s,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!HS(e)?e._ctx=Tt:r===3&&Tt&&(Tt.slots._===1?e._=1:(e._=2,s.patchFlag|=1024))}else Te(e)?(e={default:e,_ctx:Tt},t=32):(e=String(e),n&64?(t=16,e=[Le(e)]):t=8);s.children=e,s.shapeFlag|=t}function e1(...s){const e={};for(let t=0;t<s.length;t++){const n=s[t];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=xt([e.class,n.class]));else if(r==="style")e.style=Fm([e.style,n.style]);else if(Af(r)){const i=e[r],a=n[r];a&&i!==a&&!(Ee(i)&&i.includes(a))&&(e[r]=i?[].concat(i,a):a)}else r!==""&&(e[r]=n[r])}return e}function Vs(s,e,t,n=null){tn(s,e,7,[t,n])}const DE=PS();let UE=0;function ME(s,e,t){const n=s.type,r=(e?e.appContext:s.appContext)||DE,i={uid:UE++,vnode:s,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new Zb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:FS(n,r),emitsOptions:kS(n,r),emit:null,emitted:null,propsDefaults:rt,inheritAttrs:n.inheritAttrs,ctx:rt,data:rt,props:rt,attrs:rt,slots:rt,refs:rt,setupState:rt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=j0.bind(null,i),s.ce&&s.ce(i),i}let Ot=null;const Ef=()=>Ot||Tt;let um,dp;{const s=Yb(),e=(t,n)=>{let r;return(r=s[t])||(r=s[t]=[]),r.push(n),i=>{r.length>1?r.forEach(a=>a(i)):r[0](i)}};um=e("__VUE_INSTANCE_SETTERS__",t=>Ot=t),dp=e("__VUE_SSR_SETTERS__",t=>Nf=t)}const Cf=s=>{const e=Ot;return um(s),s.scope.on(),()=>{s.scope.off(),um(e)}},Yy=()=>{Ot&&Ot.scope.off(),um(null)};function t1(s){return s.vnode.shapeFlag&4}let Nf=!1;function HE(s,e=!1){e&&dp(e);const{props:t,children:n}=s.vnode,r=t1(s);kE(s,t,r,e),NE(s,n);const i=r?$E(s,e):void 0;return e&&dp(!1),i}function $E(s,e){const t=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,gE);const{setup:n}=t;if(n){const r=s.setupContext=n.length>1?KE(s):null,i=Cf(s);Ci();const a=gi(n,s,0,[s.props,r]);if(Ni(),i(),Jb(a)){if(a.then(Yy,Yy),e)return a.then(o=>{mp(s,o,e)}).catch(o=>{Rc(o,s,0)});s.asyncDep=a}else mp(s,a,e)}else s1(s,e)}function mp(s,e,t){Te(e)?s.type.__ssrInlineRender?s.ssrRender=e:s.render=e:tt(e)&&(s.setupState=yS(e)),s1(s,t)}let Xy;function s1(s,e,t){const n=s.type;if(!s.render){if(!e&&Xy&&!n.render){const r=n.template||Rw(s).template;if(r){const{isCustomElement:i,compilerOptions:a}=s.appContext.config,{delimiters:o,compilerOptions:l}=n,c=Ht(Ht({isCustomElement:i,delimiters:o},a),l);n.render=Xy(r,c)}}s.render=n.render||Bs}{const r=Cf(s);Ci();try{pE(s)}finally{Ni(),r()}}}const FE={get(s,e){return gs(s,"get",""),s[e]}};function KE(s){const e=t=>{s.exposed=t||{}};return{attrs:new Proxy(s.attrs,FE),slots:s.slots,emit:s.emit,expose:e}}function Ym(s){if(s.exposed)return s.exposeProxy||(s.exposeProxy=new Proxy(yS(O0(s.exposed)),{get(e,t){if(t in e)return e[t];if(t in Yh)return Yh[t](s)},has(e,t){return t in e||t in Yh}}))}function jE(s,e=!0){return Te(s)?s.displayName||s.name:s.name||e&&s.__name}function JE(s){return Te(s)&&"__vccOpts"in s}const Yt=(s,e)=>V0(s,e,Nf);function Pw(s,e,t){const n=arguments.length;return n===2?tt(e)&&!Ee(e)?lf(e)?ye(s,null,[e]):ye(s,e):ye(s,null,e):(n>3?t=Array.prototype.slice.call(arguments,2):n===3&&lf(t)&&(t=[t]),ye(s,e,t))}const n1="3.4.27";/**
* @vue/runtime-dom v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const WE="http://www.w3.org/2000/svg",qE="http://www.w3.org/1998/Math/MathML",ni=typeof document<"u"?document:null,Qy=ni&&ni.createElement("template"),GE={insert:(s,e,t)=>{e.insertBefore(s,t||null)},remove:s=>{const e=s.parentNode;e&&e.removeChild(s)},createElement:(s,e,t,n)=>{const r=e==="svg"?ni.createElementNS(WE,s):e==="mathml"?ni.createElementNS(qE,s):ni.createElement(s,t?{is:t}:void 0);return s==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:s=>ni.createTextNode(s),createComment:s=>ni.createComment(s),setText:(s,e)=>{s.nodeValue=e},setElementText:(s,e)=>{s.textContent=e},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>ni.querySelector(s),setScopeId(s,e){s.setAttribute(e,"")},insertStaticContent(s,e,t,n,r,i){const a=t?t.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===i||!(r=r.nextSibling)););else{Qy.innerHTML=n==="svg"?`<svg>${s}</svg>`:n==="mathml"?`<math>${s}</math>`:s;const o=Qy.content;if(n==="svg"||n==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,t)}return[a?a.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},YE=Symbol("_vtc");function XE(s,e,t){const n=s[YE];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?s.removeAttribute("class"):t?s.setAttribute("class",e):s.className=e}const zy=Symbol("_vod"),QE=Symbol("_vsh"),zE=Symbol(""),ZE=/(^|;)\s*display\s*:/;function eC(s,e,t){const n=s.style,r=St(t);let i=!1;if(t&&!r){if(e)if(St(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();t[o]==null&&kd(n,o,"")}else for(const a in e)t[a]==null&&kd(n,a,"");for(const a in t)a==="display"&&(i=!0),kd(n,a,t[a])}else if(r){if(e!==t){const a=n[zE];a&&(t+=";"+a),n.cssText=t,i=ZE.test(t)}}else e&&s.removeAttribute("style");zy in s&&(s[zy]=i?n.display:"",s[QE]&&(n.display="none"))}const Zy=/\s*!important$/;function kd(s,e,t){if(Ee(t))t.forEach(n=>kd(s,e,n));else if(t==null&&(t=""),e.startsWith("--"))s.setProperty(e,t);else{const n=tC(s,e);Zy.test(t)?s.setProperty(Tc(n),t.replace(Zy,""),"important"):s[n]=t}}const ev=["Webkit","Moz","ms"],pg={};function tC(s,e){const t=pg[e];if(t)return t;let n=En(e);if(n!=="filter"&&n in s)return pg[e]=n;n=$m(n);for(let r=0;r<ev.length;r++){const i=ev[r]+n;if(i in s)return pg[e]=i}return e}const tv="http://www.w3.org/1999/xlink";function sC(s,e,t,n,r){if(n&&e.startsWith("xlink:"))t==null?s.removeAttributeNS(tv,e.slice(6,e.length)):s.setAttributeNS(tv,e,t);else{const i=c0(e);t==null||i&&!Xb(t)?s.removeAttribute(e):s.setAttribute(e,i?"":t)}}function nC(s,e,t,n,r,i,a){if(e==="innerHTML"||e==="textContent"){n&&a(n,r,i),s[e]=t??"";return}const o=s.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const c=o==="OPTION"?s.getAttribute("value")||"":s.value,u=t??"";(c!==u||!("_value"in s))&&(s.value=u),t==null&&s.removeAttribute(e),s._value=t;return}let l=!1;if(t===""||t==null){const c=typeof s[e];c==="boolean"?t=Xb(t):t==null&&c==="string"?(t="",l=!0):c==="number"&&(t=0,l=!0)}try{s[e]=t}catch{}l&&s.removeAttribute(e)}function li(s,e,t,n){s.addEventListener(e,t,n)}function rC(s,e,t,n){s.removeEventListener(e,t,n)}const sv=Symbol("_vei");function iC(s,e,t,n,r=null){const i=s[sv]||(s[sv]={}),a=i[e];if(n&&a)a.value=n;else{const[o,l]=aC(e);if(n){const c=i[e]=cC(n,r);li(s,o,c,l)}else a&&(rC(s,o,a,l),i[e]=void 0)}}const nv=/(?:Once|Passive|Capture)$/;function aC(s){let e;if(nv.test(s)){e={};let n;for(;n=s.match(nv);)s=s.slice(0,s.length-n[0].length),e[n[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):Tc(s.slice(2)),e]}let wg=0;const oC=Promise.resolve(),lC=()=>wg||(oC.then(()=>wg=0),wg=Date.now());function cC(s,e){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;tn(uC(n,t.value),e,5,[n])};return t.value=s,t.attached=lC(),t}function uC(s,e){if(Ee(e)){const t=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{t.call(s),s._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const rv=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,hC=(s,e,t,n,r,i,a,o,l)=>{const c=r==="svg";e==="class"?XE(s,n,c):e==="style"?eC(s,t,n):Af(e)?fw(e)||iC(s,e,t,n,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):fC(s,e,n,c))?nC(s,e,n,i,a,o,l):(e==="true-value"?s._trueValue=n:e==="false-value"&&(s._falseValue=n),sC(s,e,n,c))};function fC(s,e,t,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in s&&rv(e)&&Te(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&s.tagName==="INPUT"||e==="type"&&s.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=s.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return rv(e)&&St(t)?!1:e in s}const vc=s=>{const e=s.props["onUpdate:modelValue"]||!1;return Ee(e)?t=>bd(e,t):e};function dC(s){s.target.composing=!0}function iv(s){const e=s.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const er=Symbol("_assign"),av={created(s,{modifiers:{lazy:e,trim:t,number:n}},r){s[er]=vc(r);const i=n||r.props&&r.props.type==="number";li(s,e?"change":"input",a=>{if(a.target.composing)return;let o=s.value;t&&(o=o.trim()),i&&(o=tp(o)),s[er](o)}),t&&li(s,"change",()=>{s.value=s.value.trim()}),e||(li(s,"compositionstart",dC),li(s,"compositionend",iv),li(s,"change",iv))},mounted(s,{value:e}){s.value=e??""},beforeUpdate(s,{value:e,modifiers:{lazy:t,trim:n,number:r}},i){if(s[er]=vc(i),s.composing)return;const a=(r||s.type==="number")&&!/^0\d/.test(s.value)?tp(s.value):s.value,o=e??"";a!==o&&(document.activeElement===s&&s.type!=="range"&&(t||n&&s.value.trim()===o)||(s.value=o))}},bo={deep:!0,created(s,e,t){s[er]=vc(t),li(s,"change",()=>{const n=s._modelValue,r=r1(s),i=s.checked,a=s[er];if(Ee(n)){const o=Qb(n,r),l=o!==-1;if(i&&!l)a(n.concat(r));else if(!i&&l){const c=[...n];c.splice(o,1),a(c)}}else if(Mm(n)){const o=new Set(n);i?o.add(r):o.delete(r),a(o)}else a(i1(s,i))})},mounted:ov,beforeUpdate(s,e,t){s[er]=vc(t),ov(s,e,t)}};function ov(s,{value:e,oldValue:t},n){s._modelValue=e,Ee(e)?s.checked=Qb(e,n.props.value)>-1:Mm(e)?s.checked=e.has(n.props.value):e!==t&&(s.checked=gc(e,i1(s,!0)))}const So={created(s,{value:e},t){s.checked=gc(e,t.props.value),s[er]=vc(t),li(s,"change",()=>{s[er](r1(s))})},beforeUpdate(s,{value:e,oldValue:t},n){s[er]=vc(n),e!==t&&(s.checked=gc(e,n.props.value))}};function r1(s){return"_value"in s?s._value:s.value}function i1(s,e){const t=e?"_trueValue":"_falseValue";return t in s?s[t]:e}const mC=["ctrl","shift","alt","meta"],gC={stop:s=>s.stopPropagation(),prevent:s=>s.preventDefault(),self:s=>s.target!==s.currentTarget,ctrl:s=>!s.ctrlKey,shift:s=>!s.shiftKey,alt:s=>!s.altKey,meta:s=>!s.metaKey,left:s=>"button"in s&&s.button!==0,middle:s=>"button"in s&&s.button!==1,right:s=>"button"in s&&s.button!==2,exact:(s,e)=>mC.some(t=>s[`${t}Key`]&&!e.includes(t))},Hi=(s,e)=>{const t=s._withMods||(s._withMods={}),n=e.join(".");return t[n]||(t[n]=(r,...i)=>{for(let a=0;a<e.length;a++){const o=gC[e[a]];if(o&&o(r,e))return}return s(r,...i)})},a1=Ht({patchProp:hC},GE);let zh,lv=!1;function pC(){return zh||(zh=TE(a1))}function wC(){return zh=lv?zh:RE(a1),lv=!0,zh}const yC=(...s)=>{const e=pC().createApp(...s),{mount:t}=e;return e.mount=n=>{const r=l1(n);if(!r)return;const i=e._component;!Te(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.innerHTML="";const a=t(r,!1,o1(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},e},vC=(...s)=>{const e=wC().createApp(...s),{mount:t}=e;return e.mount=n=>{const r=l1(n);if(r)return t(r,!0,o1(r))},e};function o1(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function l1(s){return St(s)?document.querySelector(s):s}const bC=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,SC=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,AC=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function kC(s,e){if(s==="__proto__"||s==="constructor"&&e&&typeof e=="object"&&"prototype"in e){EC(s);return}return e}function EC(s){console.warn(`[destr] Dropping "${s}" key to prevent prototype pollution.`)}function cf(s,e={}){if(typeof s!="string")return s;const t=s.trim();if(s[0]==='"'&&s.endsWith('"')&&!s.includes("\\"))return t.slice(1,-1);if(t.length<=9){const n=t.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n==="undefined")return;if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY}if(!AC.test(s)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return s}try{if(bC.test(s)||SC.test(s)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(s,kC)}return JSON.parse(s)}catch(n){if(e.strict)throw n;return s}}const CC=/#/g,NC=/&/g,IC=/\//g,_C=/=/g,Lw=/\+/g,BC=/%5e/gi,xC=/%60/gi,TC=/%7c/gi,RC=/%20/gi;function OC(s){return encodeURI(""+s).replace(TC,"|")}function gp(s){return OC(typeof s=="string"?s:JSON.stringify(s)).replace(Lw,"%2B").replace(RC,"+").replace(CC,"%23").replace(NC,"%26").replace(xC,"`").replace(BC,"^").replace(IC,"%2F")}function yg(s){return gp(s).replace(_C,"%3D")}function hm(s=""){try{return decodeURIComponent(""+s)}catch{return""+s}}function VC(s){return hm(s.replace(Lw," "))}function PC(s){return hm(s.replace(Lw," "))}function Dw(s=""){const e={};s[0]==="?"&&(s=s.slice(1));for(const t of s.split("&")){const n=t.match(/([^=]+)=?(.*)/)||[];if(n.length<2)continue;const r=VC(n[1]);if(r==="__proto__"||r==="constructor")continue;const i=PC(n[2]||"");e[r]===void 0?e[r]=i:Array.isArray(e[r])?e[r].push(i):e[r]=[e[r],i]}return e}function LC(s,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(t=>`${yg(s)}=${gp(t)}`).join("&"):`${yg(s)}=${gp(e)}`:yg(s)}function c1(s){return Object.keys(s).filter(e=>s[e]!==void 0).map(e=>LC(e,s[e])).filter(Boolean).join("&")}const DC=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,UC=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,MC=/^([/\\]\s*){2,}[^/\\]/,HC=/^[\s\0]*(blob|data|javascript|vbscript):$/i,$C=/\/$|\/\?|\/#/,FC=/^\.?\//;function mo(s,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?DC.test(s):UC.test(s)||(e.acceptRelative?MC.test(s):!1)}function KC(s){return!!s&&HC.test(s)}function pp(s="",e){return e?$C.test(s):s.endsWith("/")}function Uw(s="",e){if(!e)return(pp(s)?s.slice(0,-1):s)||"/";if(!pp(s,!0))return s||"/";let t=s,n="";const r=s.indexOf("#");r>=0&&(t=s.slice(0,r),n=s.slice(r));const[i,...a]=t.split("?");return((i.endsWith("/")?i.slice(0,-1):i)||"/")+(a.length>0?`?${a.join("?")}`:"")+n}function fm(s="",e){if(!e)return s.endsWith("/")?s:s+"/";if(pp(s,!0))return s||"/";let t=s,n="";const r=s.indexOf("#");if(r>=0&&(t=s.slice(0,r),n=s.slice(r),!t))return n;const[i,...a]=t.split("?");return i+"/"+(a.length>0?`?${a.join("?")}`:"")+n}function jC(s=""){return s.startsWith("/")}function cv(s=""){return jC(s)?s:"/"+s}function JC(s,e){if(h1(e)||mo(s))return s;const t=Uw(e);return s.startsWith(t)?s:on(t,s)}function WC(s,e){if(h1(e))return s;const t=Uw(e);if(!s.startsWith(t))return s;const n=s.slice(t.length);return n[0]==="/"?n:"/"+n}function u1(s,e){const t=If(s),n={...Dw(t.search),...e};return t.search=c1(n),d1(t)}function h1(s){return!s||s==="/"}function qC(s){return s&&s!=="/"}function on(s,...e){let t=s||"";for(const n of e.filter(r=>qC(r)))if(t){const r=n.replace(FC,"");t=fm(t)+r}else t=n;return t}function wp(s,e,t={}){return t.trailingSlash||(s=fm(s),e=fm(e)),t.leadingSlash||(s=cv(s),e=cv(e)),t.encoding||(s=hm(s),e=hm(e)),s===e}const f1=Symbol.for("ufo:protocolRelative");function If(s="",e){const t=s.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(t){const[,h,f=""]=t;return{protocol:h.toLowerCase(),pathname:f,href:h+f,auth:"",host:"",search:"",hash:""}}if(!mo(s,{acceptRelative:!0}))return e?If(e+s):yp(s);const[,n="",r,i=""]=s.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,a="",o=""]=i.match(/([^#/?]*)(.*)?/)||[],{pathname:l,search:c,hash:u}=yp(o.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:n.toLowerCase(),auth:r?r.slice(0,Math.max(0,r.length-1)):"",host:a,pathname:l,search:c,hash:u,[f1]:!n}}function yp(s=""){const[e="",t="",n=""]=(s.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:t,hash:n}}function d1(s){const e=s.pathname||"",t=s.search?(s.search.startsWith("?")?"":"?")+s.search:"",n=s.hash||"",r=s.auth?s.auth+"@":"",i=s.host||"";return(s.protocol||s[f1]?(s.protocol||"")+"//":"")+r+i+e+t+n}class GC extends Error{constructor(e,t){super(e,t),this.name="FetchError",t!=null&&t.cause&&!this.cause&&(this.cause=t.cause)}}function YC(s){var l,c,u,h,f;const e=((l=s.error)==null?void 0:l.message)||((c=s.error)==null?void 0:c.toString())||"",t=((u=s.request)==null?void 0:u.method)||((h=s.options)==null?void 0:h.method)||"GET",n=((f=s.request)==null?void 0:f.url)||String(s.request)||"/",r=`[${t}] ${JSON.stringify(n)}`,i=s.response?`${s.response.status} ${s.response.statusText}`:"<no response>",a=`${r}: ${i}${e?` ${e}`:""}`,o=new GC(a,s.error?{cause:s.error}:void 0);for(const m of["request","options","response"])Object.defineProperty(o,m,{get(){return s[m]}});for(const[m,S]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(o,m,{get(){return s.response&&s.response[S]}});return o}const XC=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function uv(s="GET"){return XC.has(s.toUpperCase())}function QC(s){if(s===void 0)return!1;const e=typeof s;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(s)?!0:s.buffer?!1:s.constructor&&s.constructor.name==="Object"||typeof s.toJSON=="function"}const zC=new Set(["image/svg","application/xml","application/xhtml","application/html"]),ZC=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function eN(s=""){if(!s)return"json";const e=s.split(";").shift()||"";return ZC.test(e)?"json":zC.has(e)||e.startsWith("text/")?"text":"blob"}function tN(s,e,t=globalThis.Headers){const n={...e,...s};if(e!=null&&e.params&&(s!=null&&s.params)&&(n.params={...e==null?void 0:e.params,...s==null?void 0:s.params}),e!=null&&e.query&&(s!=null&&s.query)&&(n.query={...e==null?void 0:e.query,...s==null?void 0:s.query}),e!=null&&e.headers&&(s!=null&&s.headers)){n.headers=new t((e==null?void 0:e.headers)||{});for(const[r,i]of new t((s==null?void 0:s.headers)||{}))n.headers.set(r,i)}return n}const sN=new Set([408,409,425,429,500,502,503,504]),nN=new Set([101,204,205,304]);function m1(s={}){const{fetch:e=globalThis.fetch,Headers:t=globalThis.Headers,AbortController:n=globalThis.AbortController}=s;async function r(o){const l=o.error&&o.error.name==="AbortError"&&!o.options.timeout||!1;if(o.options.retry!==!1&&!l){let u;typeof o.options.retry=="number"?u=o.options.retry:u=uv(o.options.method)?0:1;const h=o.response&&o.response.status||500;if(u>0&&(Array.isArray(o.options.retryStatusCodes)?o.options.retryStatusCodes.includes(h):sN.has(h))){const f=o.options.retryDelay||0;return f>0&&await new Promise(m=>setTimeout(m,f)),i(o.request,{...o.options,retry:u-1})}}const c=YC(o);throw Error.captureStackTrace&&Error.captureStackTrace(c,i),c}const i=async function(l,c={}){var m;const u={request:l,options:tN(c,s.defaults,t),response:void 0,error:void 0};u.options.method=(m=u.options.method)==null?void 0:m.toUpperCase(),u.options.onRequest&&await u.options.onRequest(u),typeof u.request=="string"&&(u.options.baseURL&&(u.request=JC(u.request,u.options.baseURL)),(u.options.query||u.options.params)&&(u.request=u1(u.request,{...u.options.params,...u.options.query}))),u.options.body&&uv(u.options.method)&&(QC(u.options.body)?(u.options.body=typeof u.options.body=="string"?u.options.body:JSON.stringify(u.options.body),u.options.headers=new t(u.options.headers||{}),u.options.headers.has("content-type")||u.options.headers.set("content-type","application/json"),u.options.headers.has("accept")||u.options.headers.set("accept","application/json")):("pipeTo"in u.options.body&&typeof u.options.body.pipeTo=="function"||typeof u.options.body.pipe=="function")&&("duplex"in u.options||(u.options.duplex="half")));let h;if(!u.options.signal&&u.options.timeout){const S=new n;h=setTimeout(()=>S.abort(),u.options.timeout),u.options.signal=S.signal}try{u.response=await e(u.request,u.options)}catch(S){return u.error=S,u.options.onRequestError&&await u.options.onRequestError(u),await r(u)}finally{h&&clearTimeout(h)}if(u.response.body&&!nN.has(u.response.status)&&u.options.method!=="HEAD"){const S=(u.options.parseResponse?"json":u.options.responseType)||eN(u.response.headers.get("content-type")||"");switch(S){case"json":{const k=await u.response.text(),C=u.options.parseResponse||cf;u.response._data=C(k);break}case"stream":{u.response._data=u.response.body;break}default:u.response._data=await u.response[S]()}}return u.options.onResponse&&await u.options.onResponse(u),!u.options.ignoreResponseError&&u.response.status>=400&&u.response.status<600?(u.options.onResponseError&&await u.options.onResponseError(u),await r(u)):u.response},a=async function(l,c){return(await i(l,c))._data};return a.raw=i,a.native=(...o)=>e(...o),a.create=(o={})=>m1({...s,defaults:{...s.defaults,...o}}),a}const Mw=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),rN=Mw.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),iN=Mw.Headers,aN=Mw.AbortController,oN=m1({fetch:rN,Headers:iN,AbortController:aN}),lN=oN,cN=()=>{var s;return((s=window==null?void 0:window.__NUXT__)==null?void 0:s.config)||{}},dm=cN().app,uN=()=>dm.baseURL,hN=()=>dm.buildAssetsDir,fN=(...s)=>on(g1(),hN(),...s),g1=(...s)=>{const e=dm.cdnURL||dm.baseURL;return s.length?on(e,...s):e};globalThis.__buildAssetsURL=fN,globalThis.__publicAssetsURL=g1;function vp(s,e={},t){for(const n in s){const r=s[n],i=t?`${t}:${n}`:n;typeof r=="object"&&r!==null?vp(r,e,i):typeof r=="function"&&(e[i]=r)}return e}const dN={run:s=>s()},mN=()=>dN,p1=typeof console.createTask<"u"?console.createTask:mN;function gN(s,e){const t=e.shift(),n=p1(t);return s.reduce((r,i)=>r.then(()=>n.run(()=>i(...e))),Promise.resolve())}function pN(s,e){const t=e.shift(),n=p1(t);return Promise.all(s.map(r=>n.run(()=>r(...e))))}function vg(s,e){for(const t of[...s])t(e)}class wN{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,t,n={}){if(!e||typeof t!="function")return()=>{};const r=e;let i;for(;this._deprecatedHooks[e];)i=this._deprecatedHooks[e],e=i.to;if(i&&!n.allowDeprecated){let a=i.message;a||(a=`${r} hook has been deprecated`+(i.to?`, please use ${i.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(a)||(console.warn(a),this._deprecatedMessages.add(a))}if(!t.name)try{Object.defineProperty(t,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(t),()=>{t&&(this.removeHook(e,t),t=void 0)}}hookOnce(e,t){let n,r=(...i)=>(typeof n=="function"&&n(),n=void 0,r=void 0,t(...i));return n=this.hook(e,r),n}removeHook(e,t){if(this._hooks[e]){const n=this._hooks[e].indexOf(t);n!==-1&&this._hooks[e].splice(n,1),this._hooks[e].length===0&&delete this._hooks[e]}}deprecateHook(e,t){this._deprecatedHooks[e]=typeof t=="string"?{to:t}:t;const n=this._hooks[e]||[];delete this._hooks[e];for(const r of n)this.hook(e,r)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const t in e)this.deprecateHook(t,e[t])}addHooks(e){const t=vp(e),n=Object.keys(t).map(r=>this.hook(r,t[r]));return()=>{for(const r of n.splice(0,n.length))r()}}removeHooks(e){const t=vp(e);for(const n in t)this.removeHook(n,t[n])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...t){return t.unshift(e),this.callHookWith(gN,e,...t)}callHookParallel(e,...t){return t.unshift(e),this.callHookWith(pN,e,...t)}callHookWith(e,t,...n){const r=this._before||this._after?{name:t,args:n,context:{}}:void 0;this._before&&vg(this._before,r);const i=e(t in this._hooks?[...this._hooks[t]]:[],n);return i instanceof Promise?i.finally(()=>{this._after&&r&&vg(this._after,r)}):(this._after&&r&&vg(this._after,r),i)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(this._before!==void 0){const t=this._before.indexOf(e);t!==-1&&this._before.splice(t,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(this._after!==void 0){const t=this._after.indexOf(e);t!==-1&&this._after.splice(t,1)}}}}function w1(){return new wN}function yN(s={}){let e,t=!1;const n=a=>{if(e&&e!==a)throw new Error("Context conflict")};let r;if(s.asyncContext){const a=s.AsyncLocalStorage||globalThis.AsyncLocalStorage;a?r=new a:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const i=()=>{if(r&&e===void 0){const a=r.getStore();if(a!==void 0)return a}return e};return{use:()=>{const a=i();if(a===void 0)throw new Error("Context is not available");return a},tryUse:()=>i(),set:(a,o)=>{o||n(a),e=a,t=!0},unset:()=>{e=void 0,t=!1},call:(a,o)=>{n(a),e=a;try{return r?r.run(a,o):o()}finally{t||(e=void 0)}},async callAsync(a,o){e=a;const l=()=>{e=a},c=()=>e===a?l:void 0;bp.add(c);try{const u=r?r.run(a,o):o();return t||(e=void 0),await u}finally{bp.delete(c)}}}}function vN(s={}){const e={};return{get(t,n={}){return e[t]||(e[t]=yN({...s,...n})),e[t],e[t]}}}const mm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},hv="__unctx__",bN=mm[hv]||(mm[hv]=vN()),SN=(s,e={})=>bN.get(s,e),fv="__unctx_async_handlers__",bp=mm[fv]||(mm[fv]=new Set);function Ka(s){const e=[];for(const r of bp){const i=r();i&&e.push(i)}const t=()=>{for(const r of e)r()};let n=s();return n&&typeof n=="object"&&"catch"in n&&(n=n.catch(r=>{throw t(),r})),[n,t]}const y1=SN("nuxt-app",{asyncContext:!1}),AN="__nuxt_plugin";function kN(s){let e=0;const t={_scope:gw(),provide:void 0,globalName:"nuxt",versions:{get nuxt(){return"3.8.0"},get vue(){return t.vueApp.version}},payload:ir({data:{},state:{},_errors:{},...window.__NUXT__??{}}),static:{data:{}},runWithContext:r=>t._scope.run(()=>NN(t,r)),isHydrating:!0,deferHydration(){if(!t.isHydrating)return()=>{};e++;let r=!1;return()=>{if(!r&&(r=!0,e--,e===0))return t.isHydrating=!1,t.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:{},_payloadRevivers:{},...s};t.hooks=w1(),t.hook=t.hooks.hook,t.callHook=t.hooks.callHook,t.provide=(r,i)=>{const a="$"+r;Ff(t,a,i),Ff(t.vueApp.config.globalProperties,a,i)},Ff(t.vueApp,"$nuxt",t),Ff(t.vueApp.config.globalProperties,"$nuxt",t);{window.addEventListener("nuxt.preloadError",i=>{t.callHook("app:chunkError",{error:i.payload})}),window.useNuxtApp=window.useNuxtApp||st;const r=t.hook("app:error",(...i)=>{console.error("[nuxt] error caught during app initialization",...i)});t.hook("app:mounted",r)}const n=ir(t.payload.config);return t.provide("config",n),t}async function EN(s,e){if(e.hooks&&s.hooks.addHooks(e.hooks),typeof e=="function"){const{provide:t}=await s.runWithContext(()=>e(s))||{};if(t&&typeof t=="object")for(const n in t)s.provide(n,t[n])}}async function CN(s,e){const t=[],n=[];for(const r of e){const i=EN(s,r);r.parallel?t.push(i.catch(a=>n.push(a))):await i}if(await Promise.all(t),n.length)throw n[0]}/*! @__NO_SIDE_EFFECTS__ */function _i(s){return typeof s=="function"?s:(delete s.name,Object.assign(s.setup||(()=>{}),s,{[AN]:!0}))}function NN(s,e,t){const n=()=>t?e(...t):e();return y1.set(s),s.vueApp.runWithContext(n)}/*! @__NO_SIDE_EFFECTS__ */function st(){var e;let s;if(DS()&&(s=(e=Ef())==null?void 0:e.appContext.app.$nuxt),s=s||y1.tryUse(),!s)throw new Error("[nuxt] instance unavailable");return s}/*! @__NO_SIDE_EFFECTS__ */function Xt(){return st().$config}function Ff(s,e,t){Object.defineProperty(s,e,{get:()=>t})}const IN="modulepreload",_N=function(s,e){return s[0]==="."?new URL(s,e).href:s},dv={},BN=function(e,t,n){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=_N(i,n),i in dv)return;dv[i]=!0;const a=i.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!n)for(let u=r.length-1;u>=0;u--){const h=r[u];if(h.href===i&&(!a||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${o}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":IN,a||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),a)return new Promise((u,h)=>{c.addEventListener("load",u),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})},Sp=(...s)=>BN(...s).catch(e=>{const t=new Event("nuxt.preloadError");throw t.payload=e,window.dispatchEvent(t),e}),xN=-1,TN=-2,RN=-3,ON=-4,VN=-5,PN=-6;function LN(s,e){return DN(JSON.parse(s),e)}function DN(s,e){if(typeof s=="number")return r(s,!0);if(!Array.isArray(s)||s.length===0)throw new Error("Invalid input");const t=s,n=Array(t.length);function r(i,a=!1){if(i===xN)return;if(i===RN)return NaN;if(i===ON)return 1/0;if(i===VN)return-1/0;if(i===PN)return-0;if(a)throw new Error("Invalid input");if(i in n)return n[i];const o=t[i];if(!o||typeof o!="object")n[i]=o;else if(Array.isArray(o))if(typeof o[0]=="string"){const l=o[0],c=e==null?void 0:e[l];if(c)return n[i]=c(r(o[1]));switch(l){case"Date":n[i]=new Date(o[1]);break;case"Set":const u=new Set;n[i]=u;for(let m=1;m<o.length;m+=1)u.add(r(o[m]));break;case"Map":const h=new Map;n[i]=h;for(let m=1;m<o.length;m+=2)h.set(r(o[m]),r(o[m+1]));break;case"RegExp":n[i]=new RegExp(o[1],o[2]);break;case"Object":n[i]=Object(o[1]);break;case"BigInt":n[i]=BigInt(o[1]);break;case"null":const f=Object.create(null);n[i]=f;for(let m=1;m<o.length;m+=2)f[o[m]]=r(o[m+1]);break;default:throw new Error(`Unknown type ${l}`)}}else{const l=new Array(o.length);n[i]=l;for(let c=0;c<o.length;c+=1){const u=o[c];u!==TN&&(l[c]=r(u))}}else{const l={};n[i]=l;for(const c in o){const u=o[c];l[c]=r(u)}}return n[i]}return r(0)}function UN(s){return Array.isArray(s)?s:[s]}const MN=["title","titleTemplate","script","style","noscript"],Ed=["base","meta","link","style","script","noscript"],HN=["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"],$N=["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"],v1=["tagPosition","tagPriority","tagDuplicateStrategy","children","innerHTML","textContent","processTemplateParams"],FN=typeof window<"u";function Hw(s){let e=9;for(let t=0;t<s.length;)e=Math.imul(e^s.charCodeAt(t++),9**9);return((e^e>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function mv(s){return s._h||Hw(s._d?s._d:`${s.tag}:${s.textContent||s.innerHTML||""}:${Object.entries(s.props).map(([e,t])=>`${e}:${String(t)}`).join(",")}`)}function b1(s,e){const{props:t,tag:n}=s;if($N.includes(n))return n;if(n==="link"&&t.rel==="canonical")return"canonical";if(t.charset)return"charset";const r=["id"];n==="meta"&&r.push("name","property","http-equiv");for(const i of r)if(typeof t[i]<"u"){const a=String(t[i]);return e&&!e(a)?!1:`${n}:${i}:${a}`}return!1}function gv(s,e){return s==null?e||null:typeof s=="function"?s(e):s}async function KN(s,e,t){const n={tag:s,props:await S1(typeof e=="object"&&typeof e!="function"&&!(e instanceof Promise)?{...e}:{[["script","noscript","style"].includes(s)?"innerHTML":"textContent"]:e},["templateParams","titleTemplate"].includes(s))};return v1.forEach(r=>{const i=typeof n.props[r]<"u"?n.props[r]:t[r];typeof i<"u"&&((!["innerHTML","textContent","children"].includes(r)||MN.includes(n.tag))&&(n[r==="children"?"innerHTML":r]=i),delete n.props[r])}),n.props.body&&(n.tagPosition="bodyClose",delete n.props.body),n.tag==="script"&&typeof n.innerHTML=="object"&&(n.innerHTML=JSON.stringify(n.innerHTML),n.props.type=n.props.type||"application/json"),Array.isArray(n.props.content)?n.props.content.map(r=>({...n,props:{...n.props,content:r}})):n}function jN(s,e){var n;const t=s==="class"?" ":";";return typeof e=="object"&&!Array.isArray(e)&&(e=Object.entries(e).filter(([,r])=>r).map(([r,i])=>s==="style"?`${r}:${i}`:r)),(n=String(Array.isArray(e)?e.join(t):e))==null?void 0:n.split(t).filter(r=>r.trim()).filter(Boolean).join(t)}async function S1(s,e){for(const t of Object.keys(s)){if(["class","style"].includes(t)){s[t]=jN(t,s[t]);continue}if(s[t]instanceof Promise&&(s[t]=await s[t]),!e&&!v1.includes(t)){const n=String(s[t]),r=t.startsWith("data-");n==="true"||n===""?s[t]=r?"true":!0:s[t]||(r&&n==="false"?s[t]="false":delete s[t])}}return s}const JN=10;async function WN(s){const e=[];return Object.entries(s.resolvedInput).filter(([t,n])=>typeof n<"u"&&HN.includes(t)).forEach(([t,n])=>{const r=UN(n);e.push(...r.map(i=>KN(t,i,s)).flat())}),(await Promise.all(e)).flat().filter(Boolean).map((t,n)=>(t._e=s._i,s.mode&&(t._m=s.mode),t._p=(s._i<<JN)+n,t))}const pv={base:-10,title:10},wv={critical:-80,high:-10,low:20};function gm(s){let e=100;const t=s.tagPriority;return typeof t=="number"?t:(s.tag==="meta"?(s.props["http-equiv"]==="content-security-policy"&&(e=-30),s.props.charset&&(e=-20),s.props.name==="viewport"&&(e=-15)):s.tag==="link"&&s.props.rel==="preconnect"?e=20:s.tag in pv&&(e=pv[s.tag]),typeof t=="string"&&t in wv?e+wv[t]:e)}const qN=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}],yv=["onload","onerror","onabort","onprogress","onloadstart"],dr="%separator";function Cd(s,e,t){if(typeof s!="string"||!s.includes("%"))return s;function n(a){let o;return["s","pageTitle"].includes(a)?o=e.pageTitle:a.includes(".")?o=a.split(".").reduce((l,c)=>l&&l[c]||void 0,e):o=e[a],typeof o<"u"?(o||"").replace(/"/g,'\\"'):!1}let r=s;try{r=decodeURI(s)}catch{}return(r.match(/%(\w+\.+\w+)|%(\w+)/g)||[]).sort().reverse().forEach(a=>{const o=n(a.slice(1));typeof o=="string"&&(s=s.replace(new RegExp(`\\${a}(\\W|$)`,"g"),(l,c)=>`${o}${c}`).trim())}),s.includes(dr)&&(s.endsWith(dr)&&(s=s.slice(0,-dr.length).trim()),s.startsWith(dr)&&(s=s.slice(dr.length).trim()),s=s.replace(new RegExp(`\\${dr}\\s*\\${dr}`,"g"),dr),s=Cd(s,{separator:t},t)),s}async function A1(s,e={}){var u;const t=e.document||s.resolvedOptions.document;if(!t||!s.dirty)return;const n={shouldRender:!0,tags:[]};if(await s.hooks.callHook("dom:beforeRender",n),!n.shouldRender)return;const r=(await s.resolveTags()).map(h=>({tag:h,id:Ed.includes(h.tag)?mv(h):h.tag,shouldRender:!0}));let i=s._dom;if(!i){i={elMap:{htmlAttrs:t.documentElement,bodyAttrs:t.body}};for(const h of["body","head"]){const f=(u=t[h])==null?void 0:u.children,m=[];for(const S of[...f].filter(k=>Ed.includes(k.tagName.toLowerCase()))){const k={tag:S.tagName.toLowerCase(),props:await S1(S.getAttributeNames().reduce((T,b)=>({...T,[b]:S.getAttribute(b)}),{})),innerHTML:S.innerHTML};let C=1,R=b1(k);for(;R&&m.find(T=>T._d===R);)R=`${R}:${C++}`;k._d=R||void 0,m.push(k),i.elMap[S.getAttribute("data-hid")||mv(k)]=S}}}i.pendingSideEffects={...i.sideEffects||{}},i.sideEffects={};function a(h,f,m){const S=`${h}:${f}`;i.sideEffects[S]=m,delete i.pendingSideEffects[S]}function o({id:h,$el:f,tag:m}){const S=m.tag.endsWith("Attrs");i.elMap[h]=f,S||(["textContent","innerHTML"].forEach(k=>{m[k]&&m[k]!==f[k]&&(f[k]=m[k])}),a(h,"el",()=>{var k;(k=i.elMap[h])==null||k.remove(),delete i.elMap[h]}));for(const[k,C]of Object.entries(m._eventHandlers||{}))f.getAttribute(`data-${k}`)!==""&&((m.tag==="bodyAttrs"?t.defaultView:f).addEventListener(k.replace("on",""),C.bind(f)),f.setAttribute(`data-${k}`,""));Object.entries(m.props).forEach(([k,C])=>{const R=`attr:${k}`;if(k==="class")for(const T of(C||"").split(" ").filter(Boolean))S&&a(h,`${R}:${T}`,()=>f.classList.remove(T)),!f.classList.contains(T)&&f.classList.add(T);else if(k==="style")for(const T of(C||"").split(";").filter(Boolean)){const[b,...w]=T.split(":").map(E=>E.trim());a(h,`${R}:${T}:${b}`,()=>{f.style.removeProperty(b)}),f.style.setProperty(b,w.join(":"))}else f.getAttribute(k)!==C&&f.setAttribute(k,C===!0?"":String(C)),S&&a(h,R,()=>f.removeAttribute(k))})}const l=[],c={bodyClose:void 0,bodyOpen:void 0,head:void 0};for(const h of r){const{tag:f,shouldRender:m,id:S}=h;if(m){if(f.tag==="title"){t.title=f.textContent;continue}h.$el=h.$el||i.elMap[S],h.$el?o(h):Ed.includes(f.tag)&&l.push(h)}}for(const h of l){const f=h.tag.tagPosition||"head";h.$el=t.createElement(h.tag.tag),o(h),c[f]=c[f]||t.createDocumentFragment(),c[f].appendChild(h.$el)}for(const h of r)await s.hooks.callHook("dom:renderTag",h,t,a);c.head&&t.head.appendChild(c.head),c.bodyOpen&&t.body.insertBefore(c.bodyOpen,t.body.firstChild),c.bodyClose&&t.body.appendChild(c.bodyClose),Object.values(i.pendingSideEffects).forEach(h=>h()),s._dom=i,s.dirty=!1,await s.hooks.callHook("dom:rendered",{renders:r})}async function GN(s,e={}){const t=e.delayFn||(n=>setTimeout(n,10));return s._domUpdatePromise=s._domUpdatePromise||new Promise(n=>t(async()=>{await A1(s,e),delete s._domUpdatePromise,n()}))}function YN(s){return e=>{var n,r;const t=((r=(n=e.resolvedOptions.document)==null?void 0:n.head.querySelector('script[id="unhead:payload"]'))==null?void 0:r.innerHTML)||!1;return t&&e.push(JSON.parse(t)),{mode:"client",hooks:{"entries:updated":function(i){GN(i,s)}}}}}const XN=["templateParams","htmlAttrs","bodyAttrs"],QN={hooks:{"tag:normalise":function({tag:s}){["hid","vmid","key"].forEach(n=>{s.props[n]&&(s.key=s.props[n],delete s.props[n])});const t=b1(s)||(s.key?`${s.tag}:${s.key}`:!1);t&&(s._d=t)},"tags:resolve":function(s){const e={};s.tags.forEach(n=>{const r=(n.key?`${n.tag}:${n.key}`:n._d)||n._p,i=e[r];if(i){let o=n==null?void 0:n.tagDuplicateStrategy;if(!o&&XN.includes(n.tag)&&(o="merge"),o==="merge"){const l=i.props;["class","style"].forEach(c=>{l[c]&&(n.props[c]?(c==="style"&&!l[c].endsWith(";")&&(l[c]+=";"),n.props[c]=`${l[c]} ${n.props[c]}`):n.props[c]=l[c])}),e[r].props={...l,...n.props};return}else if(n._e===i._e){i._duped=i._duped||[],n._d=`${i._d}:${i._duped.length+1}`,i._duped.push(n);return}else if(gm(n)>gm(i))return}const a=Object.keys(n.props).length+(n.innerHTML?1:0)+(n.textContent?1:0);if(Ed.includes(n.tag)&&a===0){delete e[r];return}e[r]=n});const t=[];Object.values(e).forEach(n=>{const r=n._duped;delete n._duped,t.push(n),r&&t.push(...r)}),s.tags=t,s.tags=s.tags.filter(n=>!(n.tag==="meta"&&(n.props.name||n.props.property)&&!n.props.content))}}},zN={mode:"server",hooks:{"tags:resolve":function(s){const e={};s.tags.filter(t=>["titleTemplate","templateParams","title"].includes(t.tag)&&t._m==="server").forEach(t=>{e[t.tag]=t.tag.startsWith("title")?t.textContent:t.props}),Object.keys(e).length&&s.tags.push({tag:"script",innerHTML:JSON.stringify(e),props:{id:"unhead:payload",type:"application/json"}})}}},ZN=["script","link","bodyAttrs"],eI=s=>({hooks:{"tags:resolve":function(e){for(const t of e.tags.filter(n=>ZN.includes(n.tag)))Object.entries(t.props).forEach(([n,r])=>{n.startsWith("on")&&typeof r=="function"&&(s.ssr&&yv.includes(n)?t.props[n]=`this.dataset.${n}fired = true`:delete t.props[n],t._eventHandlers=t._eventHandlers||{},t._eventHandlers[n]=r)}),s.ssr&&t._eventHandlers&&(t.props.src||t.props.href)&&(t.key=t.key||Hw(t.props.src||t.props.href))},"dom:renderTag":function({$el:e,tag:t}){var n,r;for(const i of Object.keys((e==null?void 0:e.dataset)||{}).filter(a=>yv.some(o=>`${o}fired`===a))){const a=i.replace("fired","");(r=(n=t._eventHandlers)==null?void 0:n[a])==null||r.call(e,new Event(a.replace("on","")))}}}}),tI=["link","style","script","noscript"],sI={hooks:{"tag:normalise":({tag:s})=>{s.key&&tI.includes(s.tag)&&(s.props["data-hid"]=s._h=Hw(s.key))}}},nI={hooks:{"tags:resolve":s=>{const e=t=>{var n;return(n=s.tags.find(r=>r._d===t))==null?void 0:n._p};for(const{prefix:t,offset:n}of qN)for(const r of s.tags.filter(i=>typeof i.tagPriority=="string"&&i.tagPriority.startsWith(t))){const i=e(r.tagPriority.replace(t,""));typeof i<"u"&&(r._p=i+n)}s.tags.sort((t,n)=>t._p-n._p).sort((t,n)=>gm(t)-gm(n))}}},rI={meta:"content",link:"href",htmlAttrs:"lang"},iI=s=>({hooks:{"tags:resolve":e=>{var o;const{tags:t}=e,n=(o=t.find(l=>l.tag==="title"))==null?void 0:o.textContent,r=t.findIndex(l=>l.tag==="templateParams"),i=r!==-1?t[r].props:{},a=i.separator||"|";delete i.separator,i.pageTitle=Cd(i.pageTitle||n||"",i,a);for(const l of t.filter(c=>c.processTemplateParams!==!1)){const c=rI[l.tag];c&&typeof l.props[c]=="string"?l.props[c]=Cd(l.props[c],i,a):(l.processTemplateParams===!0||["titleTemplate","title"].includes(l.tag))&&["innerHTML","textContent"].forEach(u=>{typeof l[u]=="string"&&(l[u]=Cd(l[u],i,a))})}s._templateParams=i,s._separator=a,e.tags=t.filter(l=>l.tag!=="templateParams")}}}),aI={hooks:{"tags:resolve":s=>{const{tags:e}=s;let t=e.findIndex(r=>r.tag==="titleTemplate");const n=e.findIndex(r=>r.tag==="title");if(n!==-1&&t!==-1){const r=gv(e[t].textContent,e[n].textContent);r!==null?e[n].textContent=r||e[n].textContent:delete e[n]}else if(t!==-1){const r=gv(e[t].textContent);r!==null&&(e[t].textContent=r,e[t].tag="title",t=-1)}t!==-1&&delete e[t],s.tags=e.filter(Boolean)}}},oI={hooks:{"tags:afterResolve":function(s){for(const e of s.tags)typeof e.innerHTML=="string"&&(e.innerHTML&&["application/ld+json","application/json"].includes(e.props.type)?e.innerHTML=e.innerHTML.replace(/</g,"\\u003C"):e.innerHTML=e.innerHTML.replace(new RegExp(`</${e.tag}`,"g"),`<\\/${e.tag}`))}}};let k1;function lI(s={}){const e=cI(s);return e.use(YN()),k1=e}function vv(s,e){return!s||s==="server"&&e||s==="client"&&!e}function cI(s={}){const e=w1();e.addHooks(s.hooks||{}),s.document=s.document||(FN?document:void 0);const t=!s.document,n=()=>{o.dirty=!0,e.callHook("entries:updated",o)};let r=0,i=[];const a=[],o={plugins:a,dirty:!1,resolvedOptions:s,hooks:e,headEntries(){return i},use(l){const c=typeof l=="function"?l(o):l;(!c.key||!a.some(u=>u.key===c.key))&&(a.push(c),vv(c.mode,t)&&e.addHooks(c.hooks||{}))},push(l,c){c==null||delete c.head;const u={_i:r++,input:l,...c};return vv(u.mode,t)&&(i.push(u),n()),{dispose(){i=i.filter(h=>h._i!==u._i),e.callHook("entries:updated",o),n()},patch(h){i=i.map(f=>(f._i===u._i&&(f.input=u.input=h),f)),n()}}},async resolveTags(){const l={tags:[],entries:[...i]};await e.callHook("entries:resolve",l);for(const c of l.entries){const u=c.resolvedInput||c.input;if(c.resolvedInput=await(c.transform?c.transform(u):u),c.resolvedInput)for(const h of await WN(c)){const f={tag:h,entry:c,resolvedOptions:o.resolvedOptions};await e.callHook("tag:normalise",f),l.tags.push(f.tag)}}return await e.callHook("tags:beforeResolve",l),await e.callHook("tags:resolve",l),await e.callHook("tags:afterResolve",l),l.tags},ssr:t};return[QN,zN,eI,sI,nI,iI,aI,oI,...(s==null?void 0:s.plugins)||[]].forEach(l=>o.use(l)),o.hooks.callHook("init",o),o}function uI(){return k1}const hI=n1.startsWith("3");function fI(s){return typeof s=="function"?s():Z(s)}function pm(s,e=""){if(s instanceof Promise)return s;const t=fI(s);return!s||!t?t:Array.isArray(t)?t.map(n=>pm(n,e)):typeof t=="object"?Object.fromEntries(Object.entries(t).map(([n,r])=>n==="titleTemplate"||n.startsWith("on")?[n,Z(r)]:[n,pm(r,n)])):t}const dI={hooks:{"entries:resolve":function(s){for(const e of s.entries)e.resolvedInput=pm(e.input)}}},E1="usehead";function mI(s){return{install(t){hI&&(t.config.globalProperties.$unhead=s,t.config.globalProperties.$head=s,t.provide(E1,s))}}.install}function gI(s={}){s.domDelayFn=s.domDelayFn||(t=>jm(()=>setTimeout(()=>t(),0)));const e=lI(s);return e.use(dI),e.install=mI(e),e}const Ap=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kp="__unhead_injection_handler__";function pI(s){Ap[kp]=s}function wI(){if(kp in Ap)return Ap[kp]();const s=za(E1);return s||uI()}function yI(s,e={}){const t=e.head||wI();if(t)return t.ssr?t.push(s,e):vI(t,s,e)}function vI(s,e,t={}){const n=Me(!1),r=Me({});aE(()=>{r.value=n.value?{}:pm(e)});const i=s.push(r.value,t);return Sn(r,o=>{i.patch(o)}),Ef()&&(TS(()=>{i.dispose()}),BS(()=>{n.value=!0}),_S(()=>{n.value=!1})),i}function bI(s,e){return{ctx:{table:s},matchAll:t=>N1(t,s,e)}}function C1(s){const e={};for(const t in s)e[t]=t==="dynamic"?new Map(Object.entries(s[t]).map(([n,r])=>[n,C1(r)])):new Map(Object.entries(s[t]));return e}function SI(s){return bI(C1(s))}function N1(s,e,t){t!==!0&&s.endsWith("/")&&(s=s.slice(0,-1)||"/");const n=[];for(const[i,a]of bv(e.wildcard))(s===i||s.startsWith(i+"/"))&&n.push(a);for(const[i,a]of bv(e.dynamic))if(s.startsWith(i+"/")){const o="/"+s.slice(i.length).split("/").splice(2).join("/");n.push(...N1(o,a))}const r=e.static.get(s);return r&&n.push(r),n.filter(Boolean)}function bv(s){return[...s.entries()].sort((e,t)=>e[0].length-t[0].length)}function bg(s){if(s===null||typeof s!="object")return!1;const e=Object.getPrototypeOf(s);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in s?!1:Symbol.toStringTag in s?Object.prototype.toString.call(s)==="[object Module]":!0}function Ep(s,e,t=".",n){if(!bg(e))return Ep(s,{},t,n);const r=Object.assign({},e);for(const i in s){if(i==="__proto__"||i==="constructor")continue;const a=s[i];a!=null&&(n&&n(r,i,a,t)||(Array.isArray(a)&&Array.isArray(r[i])?r[i]=[...a,...r[i]]:bg(a)&&bg(r[i])?r[i]=Ep(a,r[i],(t?`${t}.`:"")+i.toString(),n):r[i]=a))}return r}function I1(s){return(...e)=>e.reduce((t,n)=>Ep(t,n,"",s),{})}const AI=I1(),kI=I1((s,e,t)=>{if(s[e]!==void 0&&typeof t=="function")return s[e]=t(s[e]),!0}),Kf=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function EI(s,e){if(typeof s!="string")throw new TypeError("argument str must be a string");const t={},r=(e||{}).decode||II;let i=0;for(;i<s.length;){const a=s.indexOf("=",i);if(a===-1)break;let o=s.indexOf(";",i);if(o===-1)o=s.length;else if(o<a){i=s.lastIndexOf(";",a-1)+1;continue}const l=s.slice(i,a).trim();if(t[l]===void 0){let c=s.slice(a+1,o).trim();c.codePointAt(0)===34&&(c=c.slice(1,-1)),t[l]=NI(c,r)}i=o+1}return t}function Sv(s,e,t){const n=t||{},r=n.encode||_I;if(typeof r!="function")throw new TypeError("option encode is invalid");if(!Kf.test(s))throw new TypeError("argument name is invalid");const i=r(e);if(i&&!Kf.test(i))throw new TypeError("argument val is invalid");let a=s+"="+i;if(n.maxAge!==void 0&&n.maxAge!==null){const o=n.maxAge-0;if(Number.isNaN(o)||!Number.isFinite(o))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(o)}if(n.domain){if(!Kf.test(n.domain))throw new TypeError("option domain is invalid");a+="; Domain="+n.domain}if(n.path){if(!Kf.test(n.path))throw new TypeError("option path is invalid");a+="; Path="+n.path}if(n.expires){if(!CI(n.expires)||Number.isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");a+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(a+="; HttpOnly"),n.secure&&(a+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":{a+="; Priority=Low";break}case"medium":{a+="; Priority=Medium";break}case"high":{a+="; Priority=High";break}default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:{a+="; SameSite=Strict";break}case"lax":{a+="; SameSite=Lax";break}case"strict":{a+="; SameSite=Strict";break}case"none":{a+="; SameSite=None";break}default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(a+="; Partitioned"),a}function CI(s){return Object.prototype.toString.call(s)==="[object Date]"||s instanceof Date}function NI(s,e){try{return e(s)}catch{return s}}function II(s){return s.includes("%")?decodeURIComponent(s):s}function _I(s){return encodeURIComponent(s)}function BI(s,e){try{return e in s}catch{return!1}}var xI=Object.defineProperty,TI=(s,e,t)=>e in s?xI(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,$i=(s,e,t)=>(TI(s,typeof e!="symbol"?e+"":e,t),t);class Cp extends Error{constructor(e,t={}){super(e,t),$i(this,"statusCode",500),$i(this,"fatal",!1),$i(this,"unhandled",!1),$i(this,"statusMessage"),$i(this,"data"),$i(this,"cause"),t.cause&&!this.cause&&(this.cause=t.cause)}toJSON(){const e={message:this.message,statusCode:Np(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=_1(this.statusMessage)),this.data!==void 0&&(e.data=this.data),e}}$i(Cp,"__h3_error__",!0);function RI(s){if(typeof s=="string")return new Cp(s);if(OI(s))return s;const e=new Cp(s.message??s.statusMessage??"",{cause:s.cause||s});if(BI(s,"stack"))try{Object.defineProperty(e,"stack",{get(){return s.stack}})}catch{try{e.stack=s.stack}catch{}}if(s.data&&(e.data=s.data),s.statusCode?e.statusCode=Np(s.statusCode,e.statusCode):s.status&&(e.statusCode=Np(s.status,e.statusCode)),s.statusMessage?e.statusMessage=s.statusMessage:s.statusText&&(e.statusMessage=s.statusText),e.statusMessage){const t=e.statusMessage;_1(e.statusMessage)!==t&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return s.fatal!==void 0&&(e.fatal=s.fatal),s.unhandled!==void 0&&(e.unhandled=s.unhandled),e}function OI(s){var e;return((e=s==null?void 0:s.constructor)==null?void 0:e.__h3_error__)===!0}const VI=/[^\u0009\u0020-\u007E]/g;function _1(s=""){return s.replace(VI,"")}function Np(s,e=200){return!s||(typeof s=="string"&&(s=Number.parseInt(s,10)),s<100||s>999)?e:s}const B1=Symbol("route"),_f=()=>{var s;return(s=st())==null?void 0:s.$router},$w=()=>DS()?za(B1,st()._route):st()._route;/*! @__NO_SIDE_EFFECTS__ */const PI=(s,e,t={})=>{const n=st(),r=t.global||typeof s!="string",i=typeof s!="string"?s:e;if(!i){console.warn("[nuxt] No route middleware passed to `addRouteMiddleware`.",s);return}r?n._middleware.global.push(i):n._middleware.named[s]=i},LI=()=>{try{if(st()._processingMiddleware)return!0}catch{return!0}return!1},x1=(s,e)=>{s||(s="/");const t=typeof s=="string"?s:u1(s.path||"/",s.query||{})+(s.hash||"");if(e!=null&&e.open){{const{target:o="_blank",windowFeatures:l={}}=e.open,c=Object.entries(l).filter(([u,h])=>h!==void 0).map(([u,h])=>`${u.toLowerCase()}=${h}`).join(", ");open(t,o,c)}return Promise.resolve()}const n=(e==null?void 0:e.external)||mo(t,{acceptRelative:!0});if(n){if(!(e!=null&&e.external))throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const o=If(t).protocol;if(o&&KC(o))throw new Error(`Cannot navigate to a URL with '${o}' protocol.`)}const r=LI();if(!n&&r)return s;const i=_f(),a=st();return n?(a._scope.stop(),e!=null&&e.replace?location.replace(t):location.href=t,r?a.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):e!=null&&e.replace?i.replace(s):i.push(s)},Fw=()=>vS(st().payload,"error"),DI=s=>{const e=T1(s);try{const t=st(),n=Fw();t.hooks.callHook("app:error",e),n.value=n.value||e}catch{throw e}return e},UI=async(s={})=>{const e=st(),t=Fw();e.callHook("app:error:cleared",s),s.redirect&&await _f().replace(s.redirect),t.value=null},MI=s=>!!(s&&typeof s=="object"&&"__nuxt_error"in s),T1=s=>{const e=RI(s);return e.__nuxt_error=!0,e},Av=globalThis.requestIdleCallback||(s=>{const e=Date.now(),t={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-e))};return setTimeout(()=>{s(t)},1)}),eP=globalThis.cancelIdleCallback||(s=>{clearTimeout(s)}),R1=s=>{const e=st();e.isHydrating?e.hooks.hookOnce("app:suspense:resolve",()=>{Av(s)}):Av(s)},tP={componentName:"NuxtLink"},HI="#__nuxt",$I="$s";function O1(...s){const e=typeof s[s.length-1]=="string"?s.pop():void 0;typeof s[0]!="string"&&s.unshift(e);const[t,n]=s;if(!t||typeof t!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+t);if(n!==void 0&&typeof n!="function")throw new Error("[nuxt] [useState] init must be a function: "+n);const r=$I+t,i=st(),a=vS(i.payload.state,r);if(a.value===void 0&&n){const o=n();if(pe(o))return i.payload.state[r]=o,o;a.value=o}return a}const FI={path:"/",watch:!0,decode:s=>cf(decodeURIComponent(s)),encode:s=>encodeURIComponent(typeof s=="string"?s:JSON.stringify(s))};function KI(s,e){var i;const t={...FI,...e},n=jI(t)||{},r=Me(n[s]??((i=t.default)==null?void 0:i.call(t)));{const a=typeof BroadcastChannel>"u"?null:new BroadcastChannel(`nuxt:cookies:${s}`),o=()=>{WI(s,r.value,t),a==null||a.postMessage(t.encode(r.value))};let l=!1;eS()&&f0(()=>{l=!0,o(),a==null||a.close()}),a&&(a.onmessage=c=>{l=!0,r.value=t.decode(c.data),jm(()=>{l=!1})}),t.watch?Sn(r,()=>{l||o()},{deep:t.watch!=="shallow"}):o()}return r}function jI(s={}){return EI(document.cookie,s)}function JI(s,e,t={}){return e==null?Sv(s,e,{...t,maxAge:-1}):Sv(s,e,t)}function WI(s,e,t={}){document.cookie=JI(s,e,t)}function qI(s={}){const e=s.path||window.location.pathname;let t={};try{t=cf(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(s.force||(t==null?void 0:t.path)!==e||(t==null?void 0:t.expires)<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:e,expires:Date.now()+(s.ttl??1e4)}))}catch{}if(s.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:st().payload.state}))}catch{}window.location.pathname!==e?window.location.href=e:window.location.reload()}}const GI={nuxt:{buildId:"f69ac25f-01c4-455e-afb8-08efc55207f4"}},YI=kI(GI);function XI(){const s=st();return s._appConfig||(s._appConfig=ir(YI)),s._appConfig}let Nd,V1;function QI(){var t;const s=Xt(),e=(t=XI().nuxt)==null?void 0:t.buildId;return Nd=$fetch(on(s.app.cdnURL||s.app.baseURL,s.app.buildAssetsDir,`builds/meta/${e}.json`)),Nd.then(n=>{V1=SI(n.matcher)}),Nd}function Xm(){return Nd||QI()}async function P1(s){return await Xm(),AI({},...V1.matchAll(s).reverse())}function kv(s,e={}){const t=zI(s,e),n=st(),r=n._payloadCache=n._payloadCache||{};return t in r||(r[t]=ZI().then(i=>i?L1(t).then(a=>a||(delete r[t],null)):(r[t]=null,null))),r[t]}const Ev="json";function zI(s,e={}){const t=new URL(s,"http://localhost");if(t.search)throw new Error("Payload URL cannot contain search params: "+s);if(t.host!=="localhost"||mo(t.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+s);const n=e.hash||(e.fresh?Date.now():"");return on(Xt().app.baseURL,t.pathname,n?`_payload.${n}.${Ev}`:`_payload.${Ev}`)}async function L1(s){const e=fetch(s).then(t=>t.text().then(D1));try{return await e}catch(t){console.warn("[nuxt] Cannot load payload ",s,t)}return null}async function ZI(s=$w().path){if(st().payload.prerenderedAt||(await Xm()).prerendered.includes(s))return!0;const n=await P1(s);return!!n.prerender&&!n.redirect}let jf=null;async function e_(){if(jf)return jf;const s=document.getElementById("__NUXT_DATA__");if(!s)return{};const e=D1(s.textContent||""),t=s.dataset.src?await L1(s.dataset.src):void 0;return jf={...e,...t,...window.__NUXT__},jf}function D1(s){return LN(s,st()._payloadRevivers)}function t_(s,e){st()._payloadRevivers[s]=e}const Cv={NuxtError:s=>T1(s),EmptyShallowRef:s=>ip(s==="_"?void 0:s==="0n"?BigInt(0):cf(s)),EmptyRef:s=>Me(s==="_"?void 0:s==="0n"?BigInt(0):cf(s)),ShallowRef:s=>ip(s),ShallowReactive:s=>fS(s),Ref:s=>Me(s),Reactive:s=>ir(s)},s_=_i({name:"nuxt:revive-payload:client",order:-30,async setup(s){let e,t;for(const n in Cv)t_(n,Cv[n]);Object.assign(s.payload,([e,t]=Ka(()=>s.runWithContext(e_)),e=await e,t(),e)),window.__NUXT__=s.payload}}),n_=[],r_=_i({name:"nuxt:head",enforce:"pre",setup(s){const e=gI({plugins:n_});pI(()=>st().vueApp._context.provides.usehead),s.vueApp.use(e);{let t=!0;const n=async()=>{t=!1,await A1(e)};e.hooks.hook("dom:beforeRender",r=>{r.shouldRender=!t}),s.hooks.hook("page:start",()=>{t=!0}),s.hooks.hook("page:finish",()=>{s.isHydrating||n()}),s.hooks.hook("app:error",n),s.hooks.hook("app:suspense:resolve",n)}}}),i_=async s=>{let e,t;const n=([e,t]=Ka(()=>P1(s.path)),e=await e,t(),e);if(n.redirect)return n.redirect},a_=[i_];function Sg(s){typeof s=="object"&&(s=d1({pathname:s.path||"",search:c1(s.query||{}),hash:s.hash||""}));const e=If(s.toString());return{path:e.pathname,fullPath:s,query:Dw(e.search),hash:e.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:s}}const o_=_i({name:"nuxt:router",enforce:"pre",setup(s){const e=WC(window.location.pathname,Xt().app.baseURL)+window.location.search+window.location.hash,t=[],n={"navigate:before":[],"resolve:before":[],"navigate:after":[],error:[]},r=(u,h)=>(n[u].push(h),()=>n[u].splice(n[u].indexOf(h),1)),i=Xt().app.baseURL,a=ir(Sg(e));async function o(u,h){try{const f=Sg(u);for(const m of n["navigate:before"]){const S=await m(f,a);if(S===!1||S instanceof Error)return;if(typeof S=="string"&&S.length)return o(S,!0)}for(const m of n["resolve:before"])await m(f,a);Object.assign(a,f),window.history[h?"replaceState":"pushState"]({},"",on(i,f.fullPath)),s.isHydrating||await s.runWithContext(UI);for(const m of n["navigate:after"])await m(f,a)}catch(f){for(const m of n.error)await m(f)}}const l={currentRoute:a,isReady:()=>Promise.resolve(),options:{},install:()=>Promise.resolve(),push:u=>o(u,!1),replace:u=>o(u,!0),back:()=>window.history.go(-1),go:u=>window.history.go(u),forward:()=>window.history.go(1),beforeResolve:u=>r("resolve:before",u),beforeEach:u=>r("navigate:before",u),afterEach:u=>r("navigate:after",u),onError:u=>r("error",u),resolve:Sg,addRoute:(u,h)=>{t.push(h)},getRoutes:()=>t,hasRoute:u=>t.some(h=>h.name===u),removeRoute:u=>{const h=t.findIndex(f=>f.name===u);h!==-1&&t.splice(h,1)}};s.vueApp.component("RouterLink",{functional:!0,props:{to:String,custom:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:String},setup:(u,{slots:h})=>{const f=()=>o(u.to,u.replace);return()=>{var S;const m=l.resolve(u.to);return u.custom?(S=h.default)==null?void 0:S.call(h,{href:u.to,navigate:f,route:m}):Pw("a",{href:u.to,onClick:k=>(k.preventDefault(),f())},h)}}}),window.addEventListener("popstate",u=>{const h=u.target.location;l.replace(h.href.replace(h.origin,""))}),s._route=a,s._middleware=s._middleware||{global:[],named:{}};const c=s.payload.state._layout;return s.hooks.hookOnce("app:created",async()=>{l.beforeEach(async(u,h)=>{u.meta=ir(u.meta||{}),s.isHydrating&&c&&!pc(u.meta.layout)&&(u.meta.layout=c),s._processingMiddleware=!0;{const f=new Set([...a_,...s._middleware.global]);for(const m of f){const S=await s.runWithContext(()=>m(u,h));if(S!==!0&&(S||S===!1))return S}}}),l.afterEach(()=>{delete s._processingMiddleware}),await l.replace(e),wp(a.fullPath,e)||await s.runWithContext(()=>x1(a.fullPath))}),{provide:{route:a,router:l}}}}),l_=_i({name:"nuxt:payload",setup(s){_f().beforeResolve(async(e,t)=>{if(e.path===t.path)return;const n=await kv(e.path);n&&Object.assign(s.static.data,n.data)}),R1(()=>{var e;s.hooks.hook("link:prefetch",async t=>{If(t).protocol||await kv(t)}),((e=navigator.connection)==null?void 0:e.effectiveType)!=="slow-2g"&&setTimeout(Xm,1e3)})}}),c_=_i({name:"nuxt:global-components"});/*!
  * shared v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const wm=typeof window<"u",Bi=(s,e=!1)=>e?Symbol.for(s):Symbol(s),u_=(s,e,t)=>h_({l:s,k:e,s:t}),h_=s=>JSON.stringify(s).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Mt=s=>typeof s=="number"&&isFinite(s),f_=s=>M1(s)==="[object Date]",ym=s=>M1(s)==="[object RegExp]",Qm=s=>He(s)&&Object.keys(s).length===0,It=Object.assign;let Nv;const Kw=()=>Nv||(Nv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Iv(s){return s.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const d_=Object.prototype.hasOwnProperty;function vm(s,e){return d_.call(s,e)}const Nt=Array.isArray,Qe=s=>typeof s=="function",le=s=>typeof s=="string",dt=s=>typeof s=="boolean",m_=s=>typeof s=="symbol",Ue=s=>s!==null&&typeof s=="object",g_=s=>Ue(s)&&Qe(s.then)&&Qe(s.catch),U1=Object.prototype.toString,M1=s=>U1.call(s),He=s=>{if(!Ue(s))return!1;const e=Object.getPrototypeOf(s);return e===null||e.constructor===Object},p_=s=>s==null?"":Nt(s)||He(s)&&s.toString===U1?JSON.stringify(s,null,2):String(s);function jw(s,e=""){return s.reduce((t,n,r)=>r===0?t+n:t+e+n,"")}function zm(s){let e=s;return()=>++e}function w_(s,e){typeof console<"u"&&(console.warn("[intlify] "+s),e&&console.warn(e.stack))}const Jf=s=>!Ue(s)||Nt(s);function Za(s,e){if(Jf(s)||Jf(e))throw new Error("Invalid value");const t=[{src:s,des:e}];for(;t.length;){const{src:n,des:r}=t.pop();Object.keys(n).forEach(i=>{Jf(n[i])||Jf(r[i])?r[i]=n[i]:t.push({src:n[i],des:r[i]})})}}/*!
  * message-compiler v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function y_(s,e,t){return{line:s,column:e,offset:t}}function bm(s,e,t){const n={start:s,end:e};return t!=null&&(n.source=t),n}const H1={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2};function v_(s,e,...t){const r={message:String(s),code:s};return e&&(r.location=e),r}const We={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17};function Zm(s,e,t={}){const{domain:n,messages:r,args:i}=t,a=s,o=new SyntaxError(String(a));return o.code=s,e&&(o.location=e),o.domain=n,o}function b_(s){throw s}const Nn=" ",S_="\r",Zt=`
`,A_=String.fromCharCode(8232),k_=String.fromCharCode(8233);function E_(s){const e=s;let t=0,n=1,r=1,i=0;const a=L=>e[L]===S_&&e[L+1]===Zt,o=L=>e[L]===Zt,l=L=>e[L]===k_,c=L=>e[L]===A_,u=L=>a(L)||o(L)||l(L)||c(L),h=()=>t,f=()=>n,m=()=>r,S=()=>i,k=L=>a(L)||l(L)||c(L)?Zt:e[L],C=()=>k(t),R=()=>k(t+i);function T(){return i=0,u(t)&&(n++,r=0),a(t)&&t++,t++,r++,e[t]}function b(){return a(t+i)&&i++,i++,e[t+i]}function w(){t=0,n=1,r=1,i=0}function E(L=0){i=L}function N(){const L=t+i;for(;L!==t;)T();i=0}return{index:h,line:f,column:m,peekOffset:S,charAt:k,currentChar:C,currentPeek:R,next:T,peek:b,reset:w,resetPeek:E,skipToPeek:N}}const mr=void 0,C_=".",_v="'",N_="tokenizer";function I_(s,e={}){const t=e.location!==!1,n=E_(s),r=()=>n.index(),i=()=>y_(n.line(),n.column(),n.index()),a=i(),o=r(),l={currentType:14,offset:o,startLoc:a,endLoc:a,lastType:14,lastOffset:o,lastStartLoc:a,lastEndLoc:a,braceNest:0,inLinked:!1,text:""},c=()=>l,{onError:u}=e;function h(y,A,B,...P){const W=c();if(A.column+=B,A.offset+=B,u){const J=t?bm(W.startLoc,A):null,_=Zm(y,J,{domain:N_,args:P});u(_)}}function f(y,A,B){y.endLoc=i(),y.currentType=A;const P={type:A};return t&&(P.loc=bm(y.startLoc,y.endLoc)),B!=null&&(P.value=B),P}const m=y=>f(y,14);function S(y,A){return y.currentChar()===A?(y.next(),A):(h(We.EXPECTED_TOKEN,i(),0,A),"")}function k(y){let A="";for(;y.currentPeek()===Nn||y.currentPeek()===Zt;)A+=y.currentPeek(),y.peek();return A}function C(y){const A=k(y);return y.skipToPeek(),A}function R(y){if(y===mr)return!1;const A=y.charCodeAt(0);return A>=97&&A<=122||A>=65&&A<=90||A===95}function T(y){if(y===mr)return!1;const A=y.charCodeAt(0);return A>=48&&A<=57}function b(y,A){const{currentType:B}=A;if(B!==2)return!1;k(y);const P=R(y.currentPeek());return y.resetPeek(),P}function w(y,A){const{currentType:B}=A;if(B!==2)return!1;k(y);const P=y.currentPeek()==="-"?y.peek():y.currentPeek(),W=T(P);return y.resetPeek(),W}function E(y,A){const{currentType:B}=A;if(B!==2)return!1;k(y);const P=y.currentPeek()===_v;return y.resetPeek(),P}function N(y,A){const{currentType:B}=A;if(B!==8)return!1;k(y);const P=y.currentPeek()===".";return y.resetPeek(),P}function L(y,A){const{currentType:B}=A;if(B!==9)return!1;k(y);const P=R(y.currentPeek());return y.resetPeek(),P}function H(y,A){const{currentType:B}=A;if(!(B===8||B===12))return!1;k(y);const P=y.currentPeek()===":";return y.resetPeek(),P}function F(y,A){const{currentType:B}=A;if(B!==10)return!1;const P=()=>{const J=y.currentPeek();return J==="{"?R(y.peek()):J==="@"||J==="%"||J==="|"||J===":"||J==="."||J===Nn||!J?!1:J===Zt?(y.peek(),P()):te(y,!1)},W=P();return y.resetPeek(),W}function ne(y){k(y);const A=y.currentPeek()==="|";return y.resetPeek(),A}function ce(y){const A=k(y),B=y.currentPeek()==="%"&&y.peek()==="{";return y.resetPeek(),{isModulo:B,hasSpace:A.length>0}}function te(y,A=!0){const B=(W=!1,J="",_=!1)=>{const K=y.currentPeek();return K==="{"?J==="%"?!1:W:K==="@"||!K?J==="%"?!0:W:K==="%"?(y.peek(),B(W,"%",!0)):K==="|"?J==="%"||_?!0:!(J===Nn||J===Zt):K===Nn?(y.peek(),B(!0,Nn,_)):K===Zt?(y.peek(),B(!0,Zt,_)):!0},P=B();return A&&y.resetPeek(),P}function fe(y,A){const B=y.currentChar();return B===mr?mr:A(B)?(y.next(),B):null}function xe(y){const A=y.charCodeAt(0);return A>=97&&A<=122||A>=65&&A<=90||A>=48&&A<=57||A===95||A===36}function ge(y){return fe(y,xe)}function ie(y){const A=y.charCodeAt(0);return A>=97&&A<=122||A>=65&&A<=90||A>=48&&A<=57||A===95||A===36||A===45}function me(y){return fe(y,ie)}function Q(y){const A=y.charCodeAt(0);return A>=48&&A<=57}function ke(y){return fe(y,Q)}function ue(y){const A=y.charCodeAt(0);return A>=48&&A<=57||A>=65&&A<=70||A>=97&&A<=102}function ae(y){return fe(y,ue)}function oe(y){let A="",B="";for(;A=ke(y);)B+=A;return B}function se(y){C(y);const A=y.currentChar();return A!=="%"&&h(We.EXPECTED_TOKEN,i(),0,A),y.next(),"%"}function Ce(y){let A="";for(;;){const B=y.currentChar();if(B==="{"||B==="}"||B==="@"||B==="|"||!B)break;if(B==="%")if(te(y))A+=B,y.next();else break;else if(B===Nn||B===Zt)if(te(y))A+=B,y.next();else{if(ne(y))break;A+=B,y.next()}else A+=B,y.next()}return A}function nt(y){C(y);let A="",B="";for(;A=me(y);)B+=A;return y.currentChar()===mr&&h(We.UNTERMINATED_CLOSING_BRACE,i(),0),B}function Xe(y){C(y);let A="";return y.currentChar()==="-"?(y.next(),A+=`-${oe(y)}`):A+=oe(y),y.currentChar()===mr&&h(We.UNTERMINATED_CLOSING_BRACE,i(),0),A}function Ke(y){return y!==_v&&y!==Zt}function Re(y){C(y),S(y,"'");let A="",B="";for(;A=fe(y,Ke);)A==="\\"?B+=re(y):B+=A;const P=y.currentChar();return P===Zt||P===mr?(h(We.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),P===Zt&&(y.next(),S(y,"'")),B):(S(y,"'"),B)}function re(y){const A=y.currentChar();switch(A){case"\\":case"'":return y.next(),`\\${A}`;case"u":return gt(y,A,4);case"U":return gt(y,A,6);default:return h(We.UNKNOWN_ESCAPE_SEQUENCE,i(),0,A),""}}function gt(y,A,B){S(y,A);let P="";for(let W=0;W<B;W++){const J=ae(y);if(!J){h(We.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,`\\${A}${P}${y.currentChar()}`);break}P+=J}return`\\${A}${P}`}function Vt(y){return y!=="{"&&y!=="}"&&y!==Nn&&y!==Zt}function ze(y){C(y);let A="",B="";for(;A=fe(y,Vt);)B+=A;return B}function p(y){let A="",B="";for(;A=ge(y);)B+=A;return B}function v(y){const A=B=>{const P=y.currentChar();return P==="{"||P==="%"||P==="@"||P==="|"||P==="("||P===")"||!P||P===Nn?B:(B+=P,y.next(),A(B))};return A("")}function x(y){C(y);const A=S(y,"|");return C(y),A}function O(y,A){let B=null;switch(y.currentChar()){case"{":return A.braceNest>=1&&h(We.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),y.next(),B=f(A,2,"{"),C(y),A.braceNest++,B;case"}":return A.braceNest>0&&A.currentType===2&&h(We.EMPTY_PLACEHOLDER,i(),0),y.next(),B=f(A,3,"}"),A.braceNest--,A.braceNest>0&&C(y),A.inLinked&&A.braceNest===0&&(A.inLinked=!1),B;case"@":return A.braceNest>0&&h(We.UNTERMINATED_CLOSING_BRACE,i(),0),B=D(y,A)||m(A),A.braceNest=0,B;default:{let W=!0,J=!0,_=!0;if(ne(y))return A.braceNest>0&&h(We.UNTERMINATED_CLOSING_BRACE,i(),0),B=f(A,1,x(y)),A.braceNest=0,A.inLinked=!1,B;if(A.braceNest>0&&(A.currentType===5||A.currentType===6||A.currentType===7))return h(We.UNTERMINATED_CLOSING_BRACE,i(),0),A.braceNest=0,M(y,A);if(W=b(y,A))return B=f(A,5,nt(y)),C(y),B;if(J=w(y,A))return B=f(A,6,Xe(y)),C(y),B;if(_=E(y,A))return B=f(A,7,Re(y)),C(y),B;if(!W&&!J&&!_)return B=f(A,13,ze(y)),h(We.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,B.value),C(y),B;break}}return B}function D(y,A){const{currentType:B}=A;let P=null;const W=y.currentChar();switch((B===8||B===9||B===12||B===10)&&(W===Zt||W===Nn)&&h(We.INVALID_LINKED_FORMAT,i(),0),W){case"@":return y.next(),P=f(A,8,"@"),A.inLinked=!0,P;case".":return C(y),y.next(),f(A,9,".");case":":return C(y),y.next(),f(A,10,":");default:return ne(y)?(P=f(A,1,x(y)),A.braceNest=0,A.inLinked=!1,P):N(y,A)||H(y,A)?(C(y),D(y,A)):L(y,A)?(C(y),f(A,12,p(y))):F(y,A)?(C(y),W==="{"?O(y,A)||P:f(A,11,v(y))):(B===8&&h(We.INVALID_LINKED_FORMAT,i(),0),A.braceNest=0,A.inLinked=!1,M(y,A))}}function M(y,A){let B={type:14};if(A.braceNest>0)return O(y,A)||m(A);if(A.inLinked)return D(y,A)||m(A);switch(y.currentChar()){case"{":return O(y,A)||m(A);case"}":return h(We.UNBALANCED_CLOSING_BRACE,i(),0),y.next(),f(A,3,"}");case"@":return D(y,A)||m(A);default:{if(ne(y))return B=f(A,1,x(y)),A.braceNest=0,A.inLinked=!1,B;const{isModulo:W,hasSpace:J}=ce(y);if(W)return J?f(A,0,Ce(y)):f(A,4,se(y));if(te(y))return f(A,0,Ce(y));break}}return B}function q(){const{currentType:y,offset:A,startLoc:B,endLoc:P}=l;return l.lastType=y,l.lastOffset=A,l.lastStartLoc=B,l.lastEndLoc=P,l.offset=r(),l.startLoc=i(),n.currentChar()===mr?f(l,14):M(n,l)}return{nextToken:q,currentOffset:r,currentPosition:i,context:c}}const __="parser",B_=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function x_(s,e,t){switch(s){case"\\\\":return"\\";case"\\'":return"'";default:{const n=parseInt(e||t,16);return n<=55295||n>=57344?String.fromCodePoint(n):""}}}function T_(s={}){const e=s.location!==!1,{onError:t,onWarn:n}=s;function r(b,w,E,N,...L){const H=b.currentPosition();if(H.offset+=N,H.column+=N,t){const F=e?bm(E,H):null,ne=Zm(w,F,{domain:__,args:L});t(ne)}}function i(b,w,E,N,...L){const H=b.currentPosition();if(H.offset+=N,H.column+=N,n){const F=e?bm(E,H):null;n(v_(w,F,L))}}function a(b,w,E){const N={type:b};return e&&(N.start=w,N.end=w,N.loc={start:E,end:E}),N}function o(b,w,E,N){N&&(b.type=N),e&&(b.end=w,b.loc&&(b.loc.end=E))}function l(b,w){const E=b.context(),N=a(3,E.offset,E.startLoc);return N.value=w,o(N,b.currentOffset(),b.currentPosition()),N}function c(b,w){const E=b.context(),{lastOffset:N,lastStartLoc:L}=E,H=a(5,N,L);return H.index=parseInt(w,10),b.nextToken(),o(H,b.currentOffset(),b.currentPosition()),H}function u(b,w,E){const N=b.context(),{lastOffset:L,lastStartLoc:H}=N,F=a(4,L,H);return F.key=w,E===!0&&(F.modulo=!0),b.nextToken(),o(F,b.currentOffset(),b.currentPosition()),F}function h(b,w){const E=b.context(),{lastOffset:N,lastStartLoc:L}=E,H=a(9,N,L);return H.value=w.replace(B_,x_),b.nextToken(),o(H,b.currentOffset(),b.currentPosition()),H}function f(b){const w=b.nextToken(),E=b.context(),{lastOffset:N,lastStartLoc:L}=E,H=a(8,N,L);return w.type!==12?(r(b,We.UNEXPECTED_EMPTY_LINKED_MODIFIER,E.lastStartLoc,0),H.value="",o(H,N,L),{nextConsumeToken:w,node:H}):(w.value==null&&r(b,We.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,Js(w)),H.value=w.value||"",o(H,b.currentOffset(),b.currentPosition()),{node:H})}function m(b,w){const E=b.context(),N=a(7,E.offset,E.startLoc);return N.value=w,o(N,b.currentOffset(),b.currentPosition()),N}function S(b){const w=b.context(),E=a(6,w.offset,w.startLoc);let N=b.nextToken();if(N.type===9){const L=f(b);E.modifier=L.node,N=L.nextConsumeToken||b.nextToken()}switch(N.type!==10&&r(b,We.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,Js(N)),N=b.nextToken(),N.type===2&&(N=b.nextToken()),N.type){case 11:N.value==null&&r(b,We.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,Js(N)),E.key=m(b,N.value||"");break;case 5:N.value==null&&r(b,We.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,Js(N)),E.key=u(b,N.value||"");break;case 6:N.value==null&&r(b,We.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,Js(N)),E.key=c(b,N.value||"");break;case 7:N.value==null&&r(b,We.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,Js(N)),E.key=h(b,N.value||"");break;default:{r(b,We.UNEXPECTED_EMPTY_LINKED_KEY,w.lastStartLoc,0);const L=b.context(),H=a(7,L.offset,L.startLoc);return H.value="",o(H,L.offset,L.startLoc),E.key=H,o(E,L.offset,L.startLoc),{nextConsumeToken:N,node:E}}}return o(E,b.currentOffset(),b.currentPosition()),{node:E}}function k(b){const w=b.context(),E=w.currentType===1?b.currentOffset():w.offset,N=w.currentType===1?w.endLoc:w.startLoc,L=a(2,E,N);L.items=[];let H=null,F=null;do{const te=H||b.nextToken();switch(H=null,te.type){case 0:te.value==null&&r(b,We.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,Js(te)),L.items.push(l(b,te.value||""));break;case 6:te.value==null&&r(b,We.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,Js(te)),L.items.push(c(b,te.value||""));break;case 4:F=!0;break;case 5:te.value==null&&r(b,We.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,Js(te)),L.items.push(u(b,te.value||"",!!F)),F&&(i(b,H1.USE_MODULO_SYNTAX,w.lastStartLoc,0,Js(te)),F=null);break;case 7:te.value==null&&r(b,We.UNEXPECTED_LEXICAL_ANALYSIS,w.lastStartLoc,0,Js(te)),L.items.push(h(b,te.value||""));break;case 8:{const fe=S(b);L.items.push(fe.node),H=fe.nextConsumeToken||null;break}}}while(w.currentType!==14&&w.currentType!==1);const ne=w.currentType===1?w.lastOffset:b.currentOffset(),ce=w.currentType===1?w.lastEndLoc:b.currentPosition();return o(L,ne,ce),L}function C(b,w,E,N){const L=b.context();let H=N.items.length===0;const F=a(1,w,E);F.cases=[],F.cases.push(N);do{const ne=k(b);H||(H=ne.items.length===0),F.cases.push(ne)}while(L.currentType!==14);return H&&r(b,We.MUST_HAVE_MESSAGES_IN_PLURAL,E,0),o(F,b.currentOffset(),b.currentPosition()),F}function R(b){const w=b.context(),{offset:E,startLoc:N}=w,L=k(b);return w.currentType===14?L:C(b,E,N,L)}function T(b){const w=I_(b,It({},s)),E=w.context(),N=a(0,E.offset,E.startLoc);return e&&N.loc&&(N.loc.source=b),N.body=R(w),s.onCacheKey&&(N.cacheKey=s.onCacheKey(b)),E.currentType!==14&&r(w,We.UNEXPECTED_LEXICAL_ANALYSIS,E.lastStartLoc,0,b[E.offset]||""),o(N,w.currentOffset(),w.currentPosition()),N}return{parse:T}}function Js(s){if(s.type===14)return"EOF";const e=(s.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"":e}function R_(s,e={}){const t={ast:s,helpers:new Set};return{context:()=>t,helper:i=>(t.helpers.add(i),i)}}function Bv(s,e){for(let t=0;t<s.length;t++)Jw(s[t],e)}function Jw(s,e){switch(s.type){case 1:Bv(s.cases,e),e.helper("plural");break;case 2:Bv(s.items,e);break;case 6:{Jw(s.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function O_(s,e={}){const t=R_(s);t.helper("normalize"),s.body&&Jw(s.body,t);const n=t.context();s.helpers=Array.from(n.helpers)}function V_(s){const e=s.body;return e.type===2?xv(e):e.cases.forEach(t=>xv(t)),s}function xv(s){if(s.items.length===1){const e=s.items[0];(e.type===3||e.type===9)&&(s.static=e.value,delete e.value)}else{const e=[];for(let t=0;t<s.items.length;t++){const n=s.items[t];if(!(n.type===3||n.type===9)||n.value==null)break;e.push(n.value)}if(e.length===s.items.length){s.static=jw(e);for(let t=0;t<s.items.length;t++){const n=s.items[t];(n.type===3||n.type===9)&&delete n.value}}}}function Ro(s){switch(s.t=s.type,s.type){case 0:{const e=s;Ro(e.body),e.b=e.body,delete e.body;break}case 1:{const e=s,t=e.cases;for(let n=0;n<t.length;n++)Ro(t[n]);e.c=t,delete e.cases;break}case 2:{const e=s,t=e.items;for(let n=0;n<t.length;n++)Ro(t[n]);e.i=t,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=s;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=s;Ro(e.key),e.k=e.key,delete e.key,e.modifier&&(Ro(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=s;e.i=e.index,delete e.index;break}case 4:{const e=s;e.k=e.key,delete e.key;break}}delete s.type}function P_(s,e){const{sourceMap:t,filename:n,breakLineCode:r,needIndent:i}=e,a=e.location!==!1,o={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:r,needIndent:i,indentLevel:0};a&&s.loc&&(o.source=s.loc.source);const l=()=>o;function c(C,R){o.code+=C}function u(C,R=!0){const T=R?r:"";c(i?T+"  ".repeat(C):T)}function h(C=!0){const R=++o.indentLevel;C&&u(R)}function f(C=!0){const R=--o.indentLevel;C&&u(R)}function m(){u(o.indentLevel)}return{context:l,push:c,indent:h,deindent:f,newline:m,helper:C=>`_${C}`,needIndent:()=>o.needIndent}}function L_(s,e){const{helper:t}=s;s.push(`${t("linked")}(`),bc(s,e.key),e.modifier?(s.push(", "),bc(s,e.modifier),s.push(", _type")):s.push(", undefined, _type"),s.push(")")}function D_(s,e){const{helper:t,needIndent:n}=s;s.push(`${t("normalize")}([`),s.indent(n());const r=e.items.length;for(let i=0;i<r&&(bc(s,e.items[i]),i!==r-1);i++)s.push(", ");s.deindent(n()),s.push("])")}function U_(s,e){const{helper:t,needIndent:n}=s;if(e.cases.length>1){s.push(`${t("plural")}([`),s.indent(n());const r=e.cases.length;for(let i=0;i<r&&(bc(s,e.cases[i]),i!==r-1);i++)s.push(", ");s.deindent(n()),s.push("])")}}function M_(s,e){e.body?bc(s,e.body):s.push("null")}function bc(s,e){const{helper:t}=s;switch(e.type){case 0:M_(s,e);break;case 1:U_(s,e);break;case 2:D_(s,e);break;case 6:L_(s,e);break;case 8:s.push(JSON.stringify(e.value),e);break;case 7:s.push(JSON.stringify(e.value),e);break;case 5:s.push(`${t("interpolate")}(${t("list")}(${e.index}))`,e);break;case 4:s.push(`${t("interpolate")}(${t("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:s.push(JSON.stringify(e.value),e);break;case 3:s.push(JSON.stringify(e.value),e);break}}const H_=(s,e={})=>{const t=le(e.mode)?e.mode:"normal",n=le(e.filename)?e.filename:"message.intl",r=!!e.sourceMap,i=e.breakLineCode!=null?e.breakLineCode:t==="arrow"?";":`
`,a=e.needIndent?e.needIndent:t!=="arrow",o=s.helpers||[],l=P_(s,{mode:t,filename:n,sourceMap:r,breakLineCode:i,needIndent:a});l.push(t==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(a),o.length>0&&(l.push(`const { ${jw(o.map(h=>`${h}: _${h}`),", ")} } = ctx`),l.newline()),l.push("return "),bc(l,s),l.deindent(a),l.push("}"),delete s.helpers;const{code:c,map:u}=l.context();return{ast:s,code:c,map:u?u.toJSON():void 0}};function $_(s,e={}){const t=It({},e),n=!!t.jit,r=!!t.minify,i=t.optimize==null?!0:t.optimize,o=T_(t).parse(s);return n?(i&&V_(o),r&&Ro(o),{ast:o,code:""}):(O_(o,t),H_(o,t))}/*!
  * core-base v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function F_(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Kw().__INTLIFY_PROD_DEVTOOLS__=!1)}const xi=[];xi[0]={w:[0],i:[3,0],"[":[4],o:[7]};xi[1]={w:[1],".":[2],"[":[4],o:[7]};xi[2]={w:[2],i:[3,0],0:[3,0]};xi[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};xi[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};xi[5]={"'":[4,0],o:8,l:[5,0]};xi[6]={'"':[4,0],o:8,l:[6,0]};const K_=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function j_(s){return K_.test(s)}function J_(s){const e=s.charCodeAt(0),t=s.charCodeAt(s.length-1);return e===t&&(e===34||e===39)?s.slice(1,-1):s}function W_(s){if(s==null)return"o";switch(s.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return s;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function q_(s){const e=s.trim();return s.charAt(0)==="0"&&isNaN(parseInt(s))?!1:j_(e)?J_(e):"*"+e}function G_(s){const e=[];let t=-1,n=0,r=0,i,a,o,l,c,u,h;const f=[];f[0]=()=>{a===void 0?a=o:a+=o},f[1]=()=>{a!==void 0&&(e.push(a),a=void 0)},f[2]=()=>{f[0](),r++},f[3]=()=>{if(r>0)r--,n=4,f[0]();else{if(r=0,a===void 0||(a=q_(a),a===!1))return!1;f[1]()}};function m(){const S=s[t+1];if(n===5&&S==="'"||n===6&&S==='"')return t++,o="\\"+S,f[0](),!0}for(;n!==null;)if(t++,i=s[t],!(i==="\\"&&m())){if(l=W_(i),h=xi[n],c=h[l]||h.l||8,c===8||(n=c[0],c[1]!==void 0&&(u=f[c[1]],u&&(o=i,u()===!1))))return;if(n===7)return e}}const Tv=new Map;function Y_(s,e){return Ue(s)?s[e]:null}function X_(s,e){if(!Ue(s))return null;let t=Tv.get(e);if(t||(t=G_(e),t&&Tv.set(e,t)),!t)return null;const n=t.length;let r=s,i=0;for(;i<n;){const a=r[t[i]];if(a===void 0||Qe(r))return null;r=a,i++}return r}const Q_=s=>s,z_=s=>"",Z_="text",eB=s=>s.length===0?"":jw(s),tB=p_;function Rv(s,e){return s=Math.abs(s),e===2?s?s>1?1:0:1:s?Math.min(s,2):0}function sB(s){const e=Mt(s.pluralIndex)?s.pluralIndex:-1;return s.named&&(Mt(s.named.count)||Mt(s.named.n))?Mt(s.named.count)?s.named.count:Mt(s.named.n)?s.named.n:e:e}function nB(s,e){e.count||(e.count=s),e.n||(e.n=s)}function rB(s={}){const e=s.locale,t=sB(s),n=Ue(s.pluralRules)&&le(e)&&Qe(s.pluralRules[e])?s.pluralRules[e]:Rv,r=Ue(s.pluralRules)&&le(e)&&Qe(s.pluralRules[e])?Rv:void 0,i=R=>R[n(t,R.length,r)],a=s.list||[],o=R=>a[R],l=s.named||{};Mt(s.pluralIndex)&&nB(t,l);const c=R=>l[R];function u(R){const T=Qe(s.messages)?s.messages(R):Ue(s.messages)?s.messages[R]:!1;return T||(s.parent?s.parent.message(R):z_)}const h=R=>s.modifiers?s.modifiers[R]:Q_,f=He(s.processor)&&Qe(s.processor.normalize)?s.processor.normalize:eB,m=He(s.processor)&&Qe(s.processor.interpolate)?s.processor.interpolate:tB,S=He(s.processor)&&le(s.processor.type)?s.processor.type:Z_,C={list:o,named:c,plural:i,linked:(R,...T)=>{const[b,w]=T;let E="text",N="";T.length===1?Ue(b)?(N=b.modifier||N,E=b.type||E):le(b)&&(N=b||N):T.length===2&&(le(b)&&(N=b||N),le(w)&&(E=w||E));const L=u(R)(C),H=E==="vnode"&&Nt(L)&&N?L[0]:L;return N?h(N)(H,E):H},message:u,type:S,interpolate:m,normalize:f,values:It({},a,l)};return C}let uf=null;function iB(s){uf=s}function aB(s,e,t){uf&&uf.emit("i18n:init",{timestamp:Date.now(),i18n:s,version:e,meta:t})}const oB=lB("function:translate");function lB(s){return e=>uf&&uf.emit(s,e)}const $1=H1.__EXTEND_POINT__,Vi=zm($1),cB={NOT_FOUND_KEY:$1,FALLBACK_TO_TRANSLATE:Vi(),CANNOT_FORMAT_NUMBER:Vi(),FALLBACK_TO_NUMBER_FORMAT:Vi(),CANNOT_FORMAT_DATE:Vi(),FALLBACK_TO_DATE_FORMAT:Vi(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:Vi(),__EXTEND_POINT__:Vi()},F1=We.__EXTEND_POINT__,Pi=zm(F1),yn={INVALID_ARGUMENT:F1,INVALID_DATE_ARGUMENT:Pi(),INVALID_ISO_DATE_ARGUMENT:Pi(),NOT_SUPPORT_NON_STRING_MESSAGE:Pi(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:Pi(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:Pi(),NOT_SUPPORT_LOCALE_TYPE:Pi(),__EXTEND_POINT__:Pi()};function Kn(s){return Zm(s,null,void 0)}function Ww(s,e){return e.locale!=null?Ov(e.locale):Ov(s.locale)}let Ag;function Ov(s){if(le(s))return s;if(Qe(s)){if(s.resolvedOnce&&Ag!=null)return Ag;if(s.constructor.name==="Function"){const e=s();if(g_(e))throw Kn(yn.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Ag=e}else throw Kn(yn.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Kn(yn.NOT_SUPPORT_LOCALE_TYPE)}function uB(s,e,t){return[...new Set([t,...Nt(e)?e:Ue(e)?Object.keys(e):le(e)?[e]:[t]])]}function K1(s,e,t){const n=le(t)?t:Sm,r=s;r.__localeChainCache||(r.__localeChainCache=new Map);let i=r.__localeChainCache.get(n);if(!i){i=[];let a=[t];for(;Nt(a);)a=Vv(i,a,e);const o=Nt(e)||!He(e)?e:e.default?e.default:null;a=le(o)?[o]:o,Nt(a)&&Vv(i,a,!1),r.__localeChainCache.set(n,i)}return i}function Vv(s,e,t){let n=!0;for(let r=0;r<e.length&&dt(n);r++){const i=e[r];le(i)&&(n=hB(s,e[r],t))}return n}function hB(s,e,t){let n;const r=e.split("-");do{const i=r.join("-");n=fB(s,i,t),r.splice(-1,1)}while(r.length&&n===!0);return n}function fB(s,e,t){let n=!1;if(!s.includes(e)&&(n=!0,e)){n=e[e.length-1]!=="!";const r=e.replace(/!/g,"");s.push(r),(Nt(t)||He(t))&&t[r]&&(n=t[r])}return n}const dB="9.13.1",eg=-1,Sm="en-US",Pv="",Lv=s=>`${s.charAt(0).toLocaleUpperCase()}${s.substr(1)}`;function mB(){return{upper:(s,e)=>e==="text"&&le(s)?s.toUpperCase():e==="vnode"&&Ue(s)&&"__v_isVNode"in s?s.children.toUpperCase():s,lower:(s,e)=>e==="text"&&le(s)?s.toLowerCase():e==="vnode"&&Ue(s)&&"__v_isVNode"in s?s.children.toLowerCase():s,capitalize:(s,e)=>e==="text"&&le(s)?Lv(s):e==="vnode"&&Ue(s)&&"__v_isVNode"in s?Lv(s.children):s}}let j1;function gB(s){j1=s}let J1;function pB(s){J1=s}let W1;function wB(s){W1=s}let q1=null;const yB=s=>{q1=s},vB=()=>q1;let G1=null;const Dv=s=>{G1=s},bB=()=>G1;let Uv=0;function SB(s={}){const e=Qe(s.onWarn)?s.onWarn:w_,t=le(s.version)?s.version:dB,n=le(s.locale)||Qe(s.locale)?s.locale:Sm,r=Qe(n)?Sm:n,i=Nt(s.fallbackLocale)||He(s.fallbackLocale)||le(s.fallbackLocale)||s.fallbackLocale===!1?s.fallbackLocale:r,a=He(s.messages)?s.messages:{[r]:{}},o=He(s.datetimeFormats)?s.datetimeFormats:{[r]:{}},l=He(s.numberFormats)?s.numberFormats:{[r]:{}},c=It({},s.modifiers||{},mB()),u=s.pluralRules||{},h=Qe(s.missing)?s.missing:null,f=dt(s.missingWarn)||ym(s.missingWarn)?s.missingWarn:!0,m=dt(s.fallbackWarn)||ym(s.fallbackWarn)?s.fallbackWarn:!0,S=!!s.fallbackFormat,k=!!s.unresolving,C=Qe(s.postTranslation)?s.postTranslation:null,R=He(s.processor)?s.processor:null,T=dt(s.warnHtmlMessage)?s.warnHtmlMessage:!0,b=!!s.escapeParameter,w=Qe(s.messageCompiler)?s.messageCompiler:j1,E=Qe(s.messageResolver)?s.messageResolver:J1||Y_,N=Qe(s.localeFallbacker)?s.localeFallbacker:W1||uB,L=Ue(s.fallbackContext)?s.fallbackContext:void 0,H=s,F=Ue(H.__datetimeFormatters)?H.__datetimeFormatters:new Map,ne=Ue(H.__numberFormatters)?H.__numberFormatters:new Map,ce=Ue(H.__meta)?H.__meta:{};Uv++;const te={version:t,cid:Uv,locale:n,fallbackLocale:i,messages:a,modifiers:c,pluralRules:u,missing:h,missingWarn:f,fallbackWarn:m,fallbackFormat:S,unresolving:k,postTranslation:C,processor:R,warnHtmlMessage:T,escapeParameter:b,messageCompiler:w,messageResolver:E,localeFallbacker:N,fallbackContext:L,onWarn:e,__meta:ce};return te.datetimeFormats=o,te.numberFormats=l,te.__datetimeFormatters=F,te.__numberFormatters=ne,__INTLIFY_PROD_DEVTOOLS__&&aB(te,t,ce),te}function qw(s,e,t,n,r){const{missing:i,onWarn:a}=s;if(i!==null){const o=i(s,t,e,r);return le(o)?o:e}else return e}function Lc(s,e,t){const n=s;n.__localeChainCache=new Map,s.localeFallbacker(s,t,e)}function AB(s,e){return s===e?!1:s.split("-")[0]===e.split("-")[0]}function kB(s,e){const t=e.indexOf(s);if(t===-1)return!1;for(let n=t+1;n<e.length;n++)if(AB(s,e[n]))return!0;return!1}function kg(s){return t=>EB(t,s)}function EB(s,e){const t=e.b||e.body;if((t.t||t.type)===1){const n=t,r=n.c||n.cases;return s.plural(r.reduce((i,a)=>[...i,Mv(s,a)],[]))}else return Mv(s,t)}function Mv(s,e){const t=e.s||e.static;if(t)return s.type==="text"?t:s.normalize([t]);{const n=(e.i||e.items).reduce((r,i)=>[...r,Ip(s,i)],[]);return s.normalize(n)}}function Ip(s,e){const t=e.t||e.type;switch(t){case 3:{const n=e;return n.v||n.value}case 9:{const n=e;return n.v||n.value}case 4:{const n=e;return s.interpolate(s.named(n.k||n.key))}case 5:{const n=e;return s.interpolate(s.list(n.i!=null?n.i:n.index))}case 6:{const n=e,r=n.m||n.modifier;return s.linked(Ip(s,n.k||n.key),r?Ip(s,r):void 0,s.type)}case 7:{const n=e;return n.v||n.value}case 8:{const n=e;return n.v||n.value}default:throw new Error(`unhandled node type on format message part: ${t}`)}}const CB=s=>s;let Wf=Object.create(null);const Sc=s=>Ue(s)&&(s.t===0||s.type===0)&&("b"in s||"body"in s);function NB(s,e={}){let t=!1;const n=e.onError||b_;return e.onError=r=>{t=!0,n(r)},{...$_(s,e),detectError:t}}function IB(s,e){if(le(s)){dt(e.warnHtmlMessage)&&e.warnHtmlMessage;const n=(e.onCacheKey||CB)(s),r=Wf[n];if(r)return r;const{ast:i,detectError:a}=NB(s,{...e,location:!1,jit:!0}),o=kg(i);return a?o:Wf[n]=o}else{const t=s.cacheKey;if(t){const n=Wf[t];return n||(Wf[t]=kg(s))}else return kg(s)}}const Hv=()=>"",Us=s=>Qe(s);function $v(s,...e){const{fallbackFormat:t,postTranslation:n,unresolving:r,messageCompiler:i,fallbackLocale:a,messages:o}=s,[l,c]=_p(...e),u=dt(c.missingWarn)?c.missingWarn:s.missingWarn,h=dt(c.fallbackWarn)?c.fallbackWarn:s.fallbackWarn,f=dt(c.escapeParameter)?c.escapeParameter:s.escapeParameter,m=!!c.resolvedMessage,S=le(c.default)||dt(c.default)?dt(c.default)?i?l:()=>l:c.default:t?i?l:()=>l:"",k=t||S!=="",C=Ww(s,c);f&&_B(c);let[R,T,b]=m?[l,C,o[C]||{}]:Y1(s,l,C,a,h,u),w=R,E=l;if(!m&&!(le(w)||Sc(w)||Us(w))&&k&&(w=S,E=w),!m&&(!(le(w)||Sc(w)||Us(w))||!le(T)))return r?eg:l;let N=!1;const L=()=>{N=!0},H=Us(w)?w:X1(s,l,T,w,E,L);if(N)return w;const F=TB(s,T,b,c),ne=rB(F),ce=BB(s,H,ne),te=n?n(ce,l):ce;if(__INTLIFY_PROD_DEVTOOLS__){const fe={timestamp:Date.now(),key:le(l)?l:Us(w)?w.key:"",locale:T||(Us(w)?w.locale:""),format:le(w)?w:Us(w)?w.source:"",message:te};fe.meta=It({},s.__meta,vB()||{}),oB(fe)}return te}function _B(s){Nt(s.list)?s.list=s.list.map(e=>le(e)?Iv(e):e):Ue(s.named)&&Object.keys(s.named).forEach(e=>{le(s.named[e])&&(s.named[e]=Iv(s.named[e]))})}function Y1(s,e,t,n,r,i){const{messages:a,onWarn:o,messageResolver:l,localeFallbacker:c}=s,u=c(s,n,t);let h={},f,m=null;const S="translate";for(let k=0;k<u.length&&(f=u[k],h=a[f]||{},(m=l(h,e))===null&&(m=h[e]),!(le(m)||Sc(m)||Us(m)));k++)if(!kB(f,u)){const C=qw(s,e,f,i,S);C!==e&&(m=C)}return[m,f,h]}function X1(s,e,t,n,r,i){const{messageCompiler:a,warnHtmlMessage:o}=s;if(Us(n)){const c=n;return c.locale=c.locale||t,c.key=c.key||e,c}if(a==null){const c=()=>n;return c.locale=t,c.key=e,c}const l=a(n,xB(s,t,r,n,o,i));return l.locale=t,l.key=e,l.source=n,l}function BB(s,e,t){return e(t)}function _p(...s){const[e,t,n]=s,r={};if(!le(e)&&!Mt(e)&&!Us(e)&&!Sc(e))throw Kn(yn.INVALID_ARGUMENT);const i=Mt(e)?String(e):(Us(e),e);return Mt(t)?r.plural=t:le(t)?r.default=t:He(t)&&!Qm(t)?r.named=t:Nt(t)&&(r.list=t),Mt(n)?r.plural=n:le(n)?r.default=n:He(n)&&It(r,n),[i,r]}function xB(s,e,t,n,r,i){return{locale:e,key:t,warnHtmlMessage:r,onError:a=>{throw i&&i(a),a},onCacheKey:a=>u_(e,t,a)}}function TB(s,e,t,n){const{modifiers:r,pluralRules:i,messageResolver:a,fallbackLocale:o,fallbackWarn:l,missingWarn:c,fallbackContext:u}=s,f={locale:e,modifiers:r,pluralRules:i,messages:m=>{let S=a(t,m);if(S==null&&u){const[,,k]=Y1(u,m,e,o,l,c);S=a(k,m)}if(le(S)||Sc(S)){let k=!1;const R=X1(s,m,e,S,m,()=>{k=!0});return k?Hv:R}else return Us(S)?S:Hv}};return s.processor&&(f.processor=s.processor),n.list&&(f.list=n.list),n.named&&(f.named=n.named),Mt(n.plural)&&(f.pluralIndex=n.plural),f}function Fv(s,...e){const{datetimeFormats:t,unresolving:n,fallbackLocale:r,onWarn:i,localeFallbacker:a}=s,{__datetimeFormatters:o}=s,[l,c,u,h]=Bp(...e),f=dt(u.missingWarn)?u.missingWarn:s.missingWarn;dt(u.fallbackWarn)?u.fallbackWarn:s.fallbackWarn;const m=!!u.part,S=Ww(s,u),k=a(s,r,S);if(!le(l)||l==="")return new Intl.DateTimeFormat(S,h).format(c);let C={},R,T=null;const b="datetime format";for(let N=0;N<k.length&&(R=k[N],C=t[R]||{},T=C[l],!He(T));N++)qw(s,l,R,f,b);if(!He(T)||!le(R))return n?eg:l;let w=`${R}__${l}`;Qm(h)||(w=`${w}__${JSON.stringify(h)}`);let E=o.get(w);return E||(E=new Intl.DateTimeFormat(R,It({},T,h)),o.set(w,E)),m?E.formatToParts(c):E.format(c)}const Q1=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function Bp(...s){const[e,t,n,r]=s,i={};let a={},o;if(le(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw Kn(yn.INVALID_ISO_DATE_ARGUMENT);const c=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();o=new Date(c);try{o.toISOString()}catch{throw Kn(yn.INVALID_ISO_DATE_ARGUMENT)}}else if(f_(e)){if(isNaN(e.getTime()))throw Kn(yn.INVALID_DATE_ARGUMENT);o=e}else if(Mt(e))o=e;else throw Kn(yn.INVALID_ARGUMENT);return le(t)?i.key=t:He(t)&&Object.keys(t).forEach(l=>{Q1.includes(l)?a[l]=t[l]:i[l]=t[l]}),le(n)?i.locale=n:He(n)&&(a=n),He(r)&&(a=r),[i.key||"",o,i,a]}function Kv(s,e,t){const n=s;for(const r in t){const i=`${e}__${r}`;n.__datetimeFormatters.has(i)&&n.__datetimeFormatters.delete(i)}}function jv(s,...e){const{numberFormats:t,unresolving:n,fallbackLocale:r,onWarn:i,localeFallbacker:a}=s,{__numberFormatters:o}=s,[l,c,u,h]=xp(...e),f=dt(u.missingWarn)?u.missingWarn:s.missingWarn;dt(u.fallbackWarn)?u.fallbackWarn:s.fallbackWarn;const m=!!u.part,S=Ww(s,u),k=a(s,r,S);if(!le(l)||l==="")return new Intl.NumberFormat(S,h).format(c);let C={},R,T=null;const b="number format";for(let N=0;N<k.length&&(R=k[N],C=t[R]||{},T=C[l],!He(T));N++)qw(s,l,R,f,b);if(!He(T)||!le(R))return n?eg:l;let w=`${R}__${l}`;Qm(h)||(w=`${w}__${JSON.stringify(h)}`);let E=o.get(w);return E||(E=new Intl.NumberFormat(R,It({},T,h)),o.set(w,E)),m?E.formatToParts(c):E.format(c)}const z1=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function xp(...s){const[e,t,n,r]=s,i={};let a={};if(!Mt(e))throw Kn(yn.INVALID_ARGUMENT);const o=e;return le(t)?i.key=t:He(t)&&Object.keys(t).forEach(l=>{z1.includes(l)?a[l]=t[l]:i[l]=t[l]}),le(n)?i.locale=n:He(n)&&(a=n),He(r)&&(a=r),[i.key||"",o,i,a]}function Jv(s,e,t){const n=s;for(const r in t){const i=`${e}__${r}`;n.__numberFormatters.has(i)&&n.__numberFormatters.delete(i)}}F_();/*!
  * vue-i18n v9.13.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const RB="9.13.1";function OB(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Kw().__INTLIFY_PROD_DEVTOOLS__=!1)}const Z1=cB.__EXTEND_POINT__,In=zm(Z1);In(),In(),In(),In(),In(),In(),In(),In(),In();const eA=yn.__EXTEND_POINT__,cs=zm(eA),js={UNEXPECTED_RETURN_TYPE:eA,INVALID_ARGUMENT:cs(),MUST_BE_CALL_SETUP_TOP:cs(),NOT_INSTALLED:cs(),NOT_AVAILABLE_IN_LEGACY_MODE:cs(),REQUIRED_VALUE:cs(),INVALID_VALUE:cs(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:cs(),NOT_INSTALLED_WITH_PROVIDE:cs(),UNEXPECTED_ERROR:cs(),NOT_COMPATIBLE_LEGACY_VUE_I18N:cs(),BRIDGE_SUPPORT_VUE_2_ONLY:cs(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:cs(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:cs(),__EXTEND_POINT__:cs()};function an(s,...e){return Zm(s,null,void 0)}const Tp=Bi("__translateVNode"),Rp=Bi("__datetimeParts"),Op=Bi("__numberParts"),VB=Bi("__setPluralRules"),PB=Bi("__injectWithOption"),Vp=Bi("__dispose");function hf(s){if(!Ue(s))return s;for(const e in s)if(vm(s,e))if(!e.includes("."))Ue(s[e])&&hf(s[e]);else{const t=e.split("."),n=t.length-1;let r=s,i=!1;for(let a=0;a<n;a++){if(t[a]in r||(r[t[a]]={}),!Ue(r[t[a]])){i=!0;break}r=r[t[a]]}i||(r[t[n]]=s[e],delete s[e]),Ue(r[t[n]])&&hf(r[t[n]])}return s}function tA(s,e){const{messages:t,__i18n:n,messageResolver:r,flatJson:i}=e,a=He(t)?t:Nt(n)?{}:{[s]:{}};if(Nt(n)&&n.forEach(o=>{if("locale"in o&&"resource"in o){const{locale:l,resource:c}=o;l?(a[l]=a[l]||{},Za(c,a[l])):Za(c,a)}else le(o)&&Za(JSON.parse(o),a)}),r==null&&i)for(const o in a)vm(a,o)&&hf(a[o]);return a}function sA(s){return s.type}function LB(s,e,t){let n=Ue(e.messages)?e.messages:{};"__i18nGlobal"in t&&(n=tA(s.locale.value,{messages:n,__i18n:t.__i18nGlobal}));const r=Object.keys(n);r.length&&r.forEach(i=>{s.mergeLocaleMessage(i,n[i])});{if(Ue(e.datetimeFormats)){const i=Object.keys(e.datetimeFormats);i.length&&i.forEach(a=>{s.mergeDateTimeFormat(a,e.datetimeFormats[a])})}if(Ue(e.numberFormats)){const i=Object.keys(e.numberFormats);i.length&&i.forEach(a=>{s.mergeNumberFormat(a,e.numberFormats[a])})}}}function Wv(s){return ye(lo,null,s,0)}const qv="__INTLIFY_META__",Gv=()=>[],DB=()=>!1;let Yv=0;function Xv(s){return(e,t,n,r)=>s(t,n,Ef()||void 0,r)}const UB=()=>{const s=Ef();let e=null;return s&&(e=sA(s)[qv])?{[qv]:e}:null};function nA(s={},e){const{__root:t,__injectWithOption:n}=s,r=t===void 0,i=s.flatJson,a=wm?Me:ip,o=!!s.translateExistCompatible;let l=dt(s.inheritLocale)?s.inheritLocale:!0;const c=a(t&&l?t.locale.value:le(s.locale)?s.locale:Sm),u=a(t&&l?t.fallbackLocale.value:le(s.fallbackLocale)||Nt(s.fallbackLocale)||He(s.fallbackLocale)||s.fallbackLocale===!1?s.fallbackLocale:c.value),h=a(tA(c.value,s)),f=a(He(s.datetimeFormats)?s.datetimeFormats:{[c.value]:{}}),m=a(He(s.numberFormats)?s.numberFormats:{[c.value]:{}});let S=t?t.missingWarn:dt(s.missingWarn)||ym(s.missingWarn)?s.missingWarn:!0,k=t?t.fallbackWarn:dt(s.fallbackWarn)||ym(s.fallbackWarn)?s.fallbackWarn:!0,C=t?t.fallbackRoot:dt(s.fallbackRoot)?s.fallbackRoot:!0,R=!!s.fallbackFormat,T=Qe(s.missing)?s.missing:null,b=Qe(s.missing)?Xv(s.missing):null,w=Qe(s.postTranslation)?s.postTranslation:null,E=t?t.warnHtmlMessage:dt(s.warnHtmlMessage)?s.warnHtmlMessage:!0,N=!!s.escapeParameter;const L=t?t.modifiers:He(s.modifiers)?s.modifiers:{};let H=s.pluralRules||t&&t.pluralRules,F;F=(()=>{r&&Dv(null);const _={version:RB,locale:c.value,fallbackLocale:u.value,messages:h.value,modifiers:L,pluralRules:H,missing:b===null?void 0:b,missingWarn:S,fallbackWarn:k,fallbackFormat:R,unresolving:!0,postTranslation:w===null?void 0:w,warnHtmlMessage:E,escapeParameter:N,messageResolver:s.messageResolver,messageCompiler:s.messageCompiler,__meta:{framework:"vue"}};_.datetimeFormats=f.value,_.numberFormats=m.value,_.__datetimeFormatters=He(F)?F.__datetimeFormatters:void 0,_.__numberFormatters=He(F)?F.__numberFormatters:void 0;const K=SB(_);return r&&Dv(K),K})(),Lc(F,c.value,u.value);function ce(){return[c.value,u.value,h.value,f.value,m.value]}const te=Yt({get:()=>c.value,set:_=>{c.value=_,F.locale=c.value}}),fe=Yt({get:()=>u.value,set:_=>{u.value=_,F.fallbackLocale=u.value,Lc(F,c.value,_)}}),xe=Yt(()=>h.value),ge=Yt(()=>f.value),ie=Yt(()=>m.value);function me(){return Qe(w)?w:null}function Q(_){w=_,F.postTranslation=_}function ke(){return T}function ue(_){_!==null&&(b=Xv(_)),T=_,F.missing=b}const ae=(_,K,we,_e,Je,Kt)=>{ce();let ws;try{__INTLIFY_PROD_DEVTOOLS__,r||(F.fallbackContext=t?bB():void 0),ws=_(F)}finally{__INTLIFY_PROD_DEVTOOLS__,r||(F.fallbackContext=void 0)}if(we!=="translate exists"&&Mt(ws)&&ws===eg||we==="translate exists"&&!ws){const[Of,vo]=K();return t&&C?_e(t):Je(Of)}else{if(Kt(ws))return ws;throw an(js.UNEXPECTED_RETURN_TYPE)}};function oe(..._){return ae(K=>Reflect.apply($v,null,[K,..._]),()=>_p(..._),"translate",K=>Reflect.apply(K.t,K,[..._]),K=>K,K=>le(K))}function se(..._){const[K,we,_e]=_;if(_e&&!Ue(_e))throw an(js.INVALID_ARGUMENT);return oe(K,we,It({resolvedMessage:!0},_e||{}))}function Ce(..._){return ae(K=>Reflect.apply(Fv,null,[K,..._]),()=>Bp(..._),"datetime format",K=>Reflect.apply(K.d,K,[..._]),()=>Pv,K=>le(K))}function nt(..._){return ae(K=>Reflect.apply(jv,null,[K,..._]),()=>xp(..._),"number format",K=>Reflect.apply(K.n,K,[..._]),()=>Pv,K=>le(K))}function Xe(_){return _.map(K=>le(K)||Mt(K)||dt(K)?Wv(String(K)):K)}const Re={normalize:Xe,interpolate:_=>_,type:"vnode"};function re(..._){return ae(K=>{let we;const _e=K;try{_e.processor=Re,we=Reflect.apply($v,null,[_e,..._])}finally{_e.processor=null}return we},()=>_p(..._),"translate",K=>K[Tp](..._),K=>[Wv(K)],K=>Nt(K))}function gt(..._){return ae(K=>Reflect.apply(jv,null,[K,..._]),()=>xp(..._),"number format",K=>K[Op](..._),Gv,K=>le(K)||Nt(K))}function Vt(..._){return ae(K=>Reflect.apply(Fv,null,[K,..._]),()=>Bp(..._),"datetime format",K=>K[Rp](..._),Gv,K=>le(K)||Nt(K))}function ze(_){H=_,F.pluralRules=H}function p(_,K){return ae(()=>{if(!_)return!1;const we=le(K)?K:c.value,_e=O(we),Je=F.messageResolver(_e,_);return o?Je!=null:Sc(Je)||Us(Je)||le(Je)},()=>[_],"translate exists",we=>Reflect.apply(we.te,we,[_,K]),DB,we=>dt(we))}function v(_){let K=null;const we=K1(F,u.value,c.value);for(let _e=0;_e<we.length;_e++){const Je=h.value[we[_e]]||{},Kt=F.messageResolver(Je,_);if(Kt!=null){K=Kt;break}}return K}function x(_){const K=v(_);return K??(t?t.tm(_)||{}:{})}function O(_){return h.value[_]||{}}function D(_,K){if(i){const we={[_]:K};for(const _e in we)vm(we,_e)&&hf(we[_e]);K=we[_]}h.value[_]=K,F.messages=h.value}function M(_,K){h.value[_]=h.value[_]||{};const we={[_]:K};if(i)for(const _e in we)vm(we,_e)&&hf(we[_e]);K=we[_],Za(K,h.value[_]),F.messages=h.value}function q(_){return f.value[_]||{}}function y(_,K){f.value[_]=K,F.datetimeFormats=f.value,Kv(F,_,K)}function A(_,K){f.value[_]=It(f.value[_]||{},K),F.datetimeFormats=f.value,Kv(F,_,K)}function B(_){return m.value[_]||{}}function P(_,K){m.value[_]=K,F.numberFormats=m.value,Jv(F,_,K)}function W(_,K){m.value[_]=It(m.value[_]||{},K),F.numberFormats=m.value,Jv(F,_,K)}Yv++,t&&wm&&(Sn(t.locale,_=>{l&&(c.value=_,F.locale=_,Lc(F,c.value,u.value))}),Sn(t.fallbackLocale,_=>{l&&(u.value=_,F.fallbackLocale=_,Lc(F,c.value,u.value))}));const J={id:Yv,locale:te,fallbackLocale:fe,get inheritLocale(){return l},set inheritLocale(_){l=_,_&&t&&(c.value=t.locale.value,u.value=t.fallbackLocale.value,Lc(F,c.value,u.value))},get availableLocales(){return Object.keys(h.value).sort()},messages:xe,get modifiers(){return L},get pluralRules(){return H||{}},get isGlobal(){return r},get missingWarn(){return S},set missingWarn(_){S=_,F.missingWarn=S},get fallbackWarn(){return k},set fallbackWarn(_){k=_,F.fallbackWarn=k},get fallbackRoot(){return C},set fallbackRoot(_){C=_},get fallbackFormat(){return R},set fallbackFormat(_){R=_,F.fallbackFormat=R},get warnHtmlMessage(){return E},set warnHtmlMessage(_){E=_,F.warnHtmlMessage=_},get escapeParameter(){return N},set escapeParameter(_){N=_,F.escapeParameter=_},t:oe,getLocaleMessage:O,setLocaleMessage:D,mergeLocaleMessage:M,getPostTranslationHandler:me,setPostTranslationHandler:Q,getMissingHandler:ke,setMissingHandler:ue,[VB]:ze};return J.datetimeFormats=ge,J.numberFormats=ie,J.rt=se,J.te=p,J.tm=x,J.d=Ce,J.n=nt,J.getDateTimeFormat=q,J.setDateTimeFormat=y,J.mergeDateTimeFormat=A,J.getNumberFormat=B,J.setNumberFormat=P,J.mergeNumberFormat=W,J[PB]=n,J[Tp]=re,J[Rp]=Vt,J[Op]=gt,J}const Gw={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:s=>s==="parent"||s==="global",default:"parent"},i18n:{type:Object}};function MB({slots:s},e){return e.length===1&&e[0]==="default"?(s.default?s.default():[]).reduce((n,r)=>[...n,...r.type===Ut?r.children:[r]],[]):e.reduce((t,n)=>{const r=s[n];return r&&(t[n]=r()),t},{})}function rA(s){return Ut}const HB=Ii({name:"i18n-t",props:It({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:s=>Mt(s)||!isNaN(s)}},Gw),setup(s,e){const{slots:t,attrs:n}=e,r=s.i18n||tg({useScope:s.scope,__useComponent:!0});return()=>{const i=Object.keys(t).filter(h=>h!=="_"),a={};s.locale&&(a.locale=s.locale),s.plural!==void 0&&(a.plural=le(s.plural)?+s.plural:s.plural);const o=MB(e,i),l=r[Tp](s.keypath,o,a),c=It({},n),u=le(s.tag)||Ue(s.tag)?s.tag:rA();return Pw(u,c,l)}}}),Qv=HB;function $B(s){return Nt(s)&&!le(s[0])}function iA(s,e,t,n){const{slots:r,attrs:i}=e;return()=>{const a={part:!0};let o={};s.locale&&(a.locale=s.locale),le(s.format)?a.key=s.format:Ue(s.format)&&(le(s.format.key)&&(a.key=s.format.key),o=Object.keys(s.format).reduce((f,m)=>t.includes(m)?It({},f,{[m]:s.format[m]}):f,{}));const l=n(s.value,a,o);let c=[a.key];Nt(l)?c=l.map((f,m)=>{const S=r[f.type],k=S?S({[f.type]:f.value,index:m,parts:l}):[f.value];return $B(k)&&(k[0].key=`${f.type}-${m}`),k}):le(l)&&(c=[l]);const u=It({},i),h=le(s.tag)||Ue(s.tag)?s.tag:rA();return Pw(h,u,c)}}const FB=Ii({name:"i18n-n",props:It({value:{type:Number,required:!0},format:{type:[String,Object]}},Gw),setup(s,e){const t=s.i18n||tg({useScope:s.scope,__useComponent:!0});return iA(s,e,z1,(...n)=>t[Op](...n))}}),zv=FB,KB=Ii({name:"i18n-d",props:It({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Gw),setup(s,e){const t=s.i18n||tg({useScope:s.scope,__useComponent:!0});return iA(s,e,Q1,(...n)=>t[Rp](...n))}}),Zv=KB;function jB(s,e){const t=s;if(s.mode==="composition")return t.__getInstance(e)||s.global;{const n=t.__getInstance(e);return n!=null?n.__composer:s.global.__composer}}function JB(s){const e=a=>{const{instance:o,modifiers:l,value:c}=a;if(!o||!o.$)throw an(js.UNEXPECTED_ERROR);const u=jB(s,o.$),h=eb(c);return[Reflect.apply(u.t,u,[...tb(h)]),u]};return{created:(a,o)=>{const[l,c]=e(o);wm&&s.global===c&&(a.__i18nWatcher=Sn(c.locale,()=>{o.instance&&o.instance.$forceUpdate()})),a.__composer=c,a.textContent=l},unmounted:a=>{wm&&a.__i18nWatcher&&(a.__i18nWatcher(),a.__i18nWatcher=void 0,delete a.__i18nWatcher),a.__composer&&(a.__composer=void 0,delete a.__composer)},beforeUpdate:(a,{value:o})=>{if(a.__composer){const l=a.__composer,c=eb(o);a.textContent=Reflect.apply(l.t,l,[...tb(c)])}},getSSRProps:a=>{const[o]=e(a);return{textContent:o}}}}function eb(s){if(le(s))return{path:s};if(He(s)){if(!("path"in s))throw an(js.REQUIRED_VALUE,"path");return s}else throw an(js.INVALID_VALUE)}function tb(s){const{path:e,locale:t,args:n,choice:r,plural:i}=s,a={},o=n||{};return le(t)&&(a.locale=t),Mt(r)&&(a.plural=r),Mt(i)&&(a.plural=i),[e,o,a]}function WB(s,e,...t){const n=He(t[0])?t[0]:{},r=!!n.useI18nComponentName;(dt(n.globalInstall)?n.globalInstall:!0)&&([r?"i18n":Qv.name,"I18nT"].forEach(a=>s.component(a,Qv)),[zv.name,"I18nN"].forEach(a=>s.component(a,zv)),[Zv.name,"I18nD"].forEach(a=>s.component(a,Zv))),s.directive("t",JB(e))}const qB=Bi("global-vue-i18n");function GB(s={},e){const t=dt(s.globalInjection)?s.globalInjection:!0,n=!0,r=new Map,[i,a]=YB(s),o=Bi("");function l(h){return r.get(h)||null}function c(h,f){r.set(h,f)}function u(h){r.delete(h)}{const h={get mode(){return"composition"},get allowComposition(){return n},async install(f,...m){if(f.__VUE_I18N_SYMBOL__=o,f.provide(f.__VUE_I18N_SYMBOL__,h),He(m[0])){const C=m[0];h.__composerExtend=C.__composerExtend,h.__vueI18nExtend=C.__vueI18nExtend}let S=null;t&&(S=nx(f,h.global)),WB(f,h,...m);const k=f.unmount;f.unmount=()=>{S&&S(),h.dispose(),k()}},get global(){return a},dispose(){i.stop()},__instances:r,__getInstance:l,__setInstance:c,__deleteInstance:u};return h}}function tg(s={}){const e=Ef();if(e==null)throw an(js.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw an(js.NOT_INSTALLED);const t=XB(e),n=zB(t),r=sA(e),i=QB(s,r);if(i==="global")return LB(n,s,r),n;if(i==="parent"){let l=ZB(t,e,s.__useComponent);return l==null&&(l=n),l}const a=t;let o=a.__getInstance(e);if(o==null){const l=It({},s);"__i18n"in r&&(l.__i18n=r.__i18n),n&&(l.__root=n),o=nA(l),a.__composerExtend&&(o[Vp]=a.__composerExtend(o)),tx(a,e,o),a.__setInstance(e,o)}return o}function YB(s,e,t){const n=gw();{const r=n.run(()=>nA(s));if(r==null)throw an(js.UNEXPECTED_ERROR);return[n,r]}}function XB(s){{const e=za(s.isCE?qB:s.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw an(s.isCE?js.NOT_INSTALLED_WITH_PROVIDE:js.UNEXPECTED_ERROR);return e}}function QB(s,e){return Qm(s)?"__i18n"in e?"local":"global":s.useScope?s.useScope:"local"}function zB(s){return s.mode==="composition"?s.global:s.global.__composer}function ZB(s,e,t=!1){let n=null;const r=e.root;let i=ex(e,t);for(;i!=null;){const a=s;if(s.mode==="composition"&&(n=a.__getInstance(i)),n!=null||r===i)break;i=i.parent}return n}function ex(s,e=!1){return s==null?null:e&&s.vnode.ctx||s.parent}function tx(s,e,t){Bw(()=>{},e),xw(()=>{const n=t;s.__deleteInstance(e);const r=n[Vp];r&&(r(),delete n[Vp])},e)}const sx=["locale","fallbackLocale","availableLocales"],sb=["t","rt","d","n","tm","te"];function nx(s,e){const t=Object.create(null);return sx.forEach(r=>{const i=Object.getOwnPropertyDescriptor(e,r);if(!i)throw an(js.UNEXPECTED_ERROR);const a=pe(i.value)?{get(){return i.value.value},set(o){i.value.value=o}}:{get(){return i.get&&i.get()}};Object.defineProperty(t,r,a)}),s.config.globalProperties.$i18n=t,sb.forEach(r=>{const i=Object.getOwnPropertyDescriptor(e,r);if(!i||!i.value)throw an(js.UNEXPECTED_ERROR);Object.defineProperty(s.config.globalProperties,`$${r}`,i)}),()=>{delete s.config.globalProperties.$i18n,sb.forEach(r=>{delete s.config.globalProperties[`$${r}`]})}}OB();gB(IB);pB(X_);wB(K1);if(__INTLIFY_PROD_DEVTOOLS__){const s=Kw();s.__INTLIFY__=!0,iB(s.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const co=["en","zh-CN"],Am={en:[],"zh-CN":[]},rx=[()=>Sp(()=>import("./i18n.config.61f726c8.js"),[],import.meta.url)],sg=[{code:"en",name:"English",files:[]},{code:"zh-CN",name:"Chinese",files:[]}],aA="@nuxtjs/i18n",ix=!1,ax="nuxtI18n",ox="i18n_redirected",nb="nuxt-i18n-slp",Zh=new Map;async function lx(s,e){const t={messages:{}};for(const n of s){const{default:r}=await n(),i=typeof r=="function"?await e.runWithContext(async()=>await r()):r;Za(i,t)}return t}function oA(s,e){let t=[];if(Nt(s))t=s;else if(Ue(s)){const n=[...e,"default"];for(const r of n)s[r]&&(t=[...t,...s[r].filter(Boolean)])}else le(s)&&e.every(n=>n!==s)&&t.push(s);return t}async function cx(s,e,t){const{defaultLocale:n,initialLocale:r,localeCodes:i,fallbackLocale:a,lazy:o}=t;if(o&&a){const c=oA(a,[n,r]);await Promise.all(c.map(u=>rb(u,e,s)))}const l=o?[...new Set().add(n).add(r)]:i;return await Promise.all(l.map(c=>rb(c,e,s))),s}async function ux(s,{key:e,load:t}){let n=null;try{const r=await t().then(i=>i.default||i);Qe(r)?n=await r(s):(n=r,n!=null&&Zh&&Zh.set(e,n))}catch(r){console.error("Failed locale loading: "+r.message)}return n}async function km(s,e,t){const n=e[s];if(n==null){console.warn("Could not find messages for locale code: "+s);return}const r={};for(const i of n){let a=null;Zh&&Zh.has(i.key)&&i.cache?a=Zh.get(i.key):a=await ux(s,i),a!=null&&Za(a,r)}t(s,r)}async function rb(s,e,t){await km(s,e,(r,i)=>{const a=t[r]||{};Za(i,a),t[r]=a})}const hx=typeof window<"u";function fx(s){s=s||[];const e=[];for(const t of s)le(t)?e.push({code:t}):e.push(t);return e}function dx(s){return s!=null&&"global"in s&&"mode"in s}function mx(s){return s!=null&&!("__composer"in s)&&"locale"in s&&pe(s.locale)}function lA(s){return s!=null&&"__composer"in s}function Ti(s){return dx(s)?s.global:s}function Ac(s){const e=Ti(s);return mx(e)?e:lA(e)?e.__composer:e}function ng(s){return Z(Ti(s).locale)}function gx(s){return Z(Ti(s).locales)}function px(s){return Z(Ti(s).localeCodes)}function cA(s,e){const t=Ti(s);pe(t.locale)?t.locale.value=e:t.locale=e}function uA(s){return le(s)?s:m_(s)?s.toString():"(null)"}function ib(s,e,{defaultLocale:t,strategy:n,routesNameSeparator:r,defaultLocaleRouteNameSuffix:i}){let a=uA(s)+(n==="no_prefix"?"":r+e);return e===t&&n==="prefix_and_default"&&(a+=r+i),a}function ab(s,e){return Qe(s)?s(e):s}function wx(s,e){const t=[];for(const[n,r]of e.entries()){const i=s.find(a=>a.iso.toLowerCase()===r.toLowerCase());if(i){t.push({code:i.code,score:1-n/e.length});break}}for(const[n,r]of e.entries()){const i=r.split("-")[0].toLowerCase(),a=s.find(o=>o.iso.split("-")[0].toLowerCase()===i);if(a){t.push({code:a.code,score:.999-n/e.length});break}}return t}const yx=wx;function vx(s,e){return s.score===e.score?e.code.length-s.code.length:e.score-s.score}const bx=vx;function Sx(s,e,{matcher:t=yx,comparer:n=bx}={}){const r=[];for(const a of s){const{code:o}=a,l=a.iso||o;r.push({code:o,iso:l})}const i=t(r,e);return i.length>1&&i.sort(n),i.length?i[0].code:""}function Em(s){return new RegExp(`^/(${s.join("|")})(?:/|$)`,"i")}function Ax(s,e){return[s.slice(0,e),s.slice(e)]}function kx(s){const{fullPath:e,query:t,hash:n,name:r,path:i,params:a,meta:o,redirectedFrom:l,matched:c}=s;return{fullPath:e,params:a,query:t,hash:n,name:r,path:i,meta:o,matched:c,redirectedFrom:l}}function Ex({router:s},e,t,n){var c,u;if(t!=="prefix")return s.resolve(e);const[r,i]=Ax(e.path,1),a=`${r}${n}${i===""?i:`/${i}`}`,o=(u=(c=s.options)==null?void 0:c.routes)==null?void 0:u.find(h=>h.path===a);if(o==null)return e;const l=It({},e,o);return l.path=a,s.resolve(l)}const Cx=new Set(["prefix_and_default","prefix_except_default"]);function Nx(s){const{currentLocale:e,defaultLocale:t,strategy:n}=s;return!(e===t&&Cx.has(n))&&n!=="no_prefix"}const Ix=Nx;function kc(s,e){const{routesNameSeparator:t}=s.runtimeConfig.public.i18n,n=Z(e);return n==null||!n.name?void 0:uA(n.name).split(t)[0]}function Yw(s,e,t){var r;if(typeof e=="string"&&mo(e,{acceptRelative:!0}))return e;const n=rg(s,e,t);return n==null?"":((r=n.redirectedFrom)==null?void 0:r.fullPath)||n.fullPath}function Xw(s,e,t){return rg(s,e,t)??void 0}function _x(s,e,t){return rg(s,e,t)??void 0}function rg(s,e,t){const{router:n,i18n:r}=s,i=t||ng(r),{routesNameSeparator:a,defaultLocale:o,defaultLocaleRouteNameSuffix:l,strategy:c,trailingSlash:u}=s.runtimeConfig.public.i18n,h=Kx(s.runtimeConfig);let f;if(le(e))if(e[0]==="/"){const{pathname:k,search:C,hash:R}=yp(e),T=Dw(C);f={path:k,query:T,hash:R}}else f={name:e};else f=e;let m=It({},f);if((k=>"path"in k&&!!k.path&&!("name"in k))(m)){const k=Ex(s,m,c,i),C=kc(s,k);le(C)?(m={name:ib(C,i,{defaultLocale:o,strategy:c,routesNameSeparator:a,defaultLocaleRouteNameSuffix:l}),params:k.params,query:k.query,hash:k.hash},m.state=k.state):(h({currentLocale:i,defaultLocale:o,strategy:c})&&(m.path=`/${i}${m.path}`),m.path=u?fm(m.path,!0):Uw(m.path,!0))}else!m.name&&!("path"in m)&&(m.name=kc(s,n.currentRoute.value)),m.name=ib(m.name,i,{defaultLocale:o,strategy:c,routesNameSeparator:a,defaultLocaleRouteNameSuffix:l});try{const k=n.resolve(m);return k.name?k:n.resolve(e)}catch(k){if(typeof k=="object"&&"type"in k&&k.type===1)return null}}const Bx=s=>s;function xx(s,e){var n;if(s.runtimeConfig.public.i18n.experimental.switchLocalePathLinkSSR)return Z(s.metaState.value);const t=e.meta||{};return((n=Z(t))==null?void 0:n[ax])||{}}function Ec(s,e,t){const n=t??s.router.currentRoute.value,r=kc(s,n);if(!r)return"";const i=jx(s.runtimeConfig),a=kx(n),o=xx(s,n)[e],l={...a,name:r,params:{...a.params,...o}},c=Yw(s,l,e);return i(c,e)}function hA(s,{addDirAttribute:e=!1,addSeoAttributes:t=!0,identifierAttribute:n="hid"}){const{defaultDirection:r}=Xt().public.i18n,i=Ac(s.i18n),a={htmlAttrs:{},link:[],meta:[]};if(Z(i.locales)==null||Z(i.baseUrl)==null)return a;const o=ng(s.i18n),l=gx(s.i18n),c=fx(l).find(f=>f.code===o)||{code:o},u=c.iso,h=c.dir||r;return e&&(a.htmlAttrs.dir=h),t&&o&&Z(i.locales)&&(u&&(a.htmlAttrs.lang=u),a.link.push(...Tx(s,Z(l),n),...Rx(s,n,t)),a.meta.push(...Ox(s,n,t),...Vx(c,u,n),...Px(Z(l),u,n))),a}function Qw(){const s=st(),e=Ac(s.$i18n);return on(Z(e.baseUrl),s.$config.app.baseURL)}function Tx(s,e,t){const n=Qw(),{defaultLocale:r,strategy:i}=Xt().public.i18n,a=[];if(i==="no_prefix")return a;const o=new Map;for(const l of e){const c=l.iso;if(!c){console.warn("Locale ISO code is required to generate alternate link");continue}const[u,h]=c.split("-");u&&h&&(l.isCatchallLocale||!o.has(u))&&o.set(u,l),o.set(c,l)}for(const[l,c]of o.entries()){const u=Ec(s,c.code);u&&a.push({[t]:`i18n-alt-${l}`,rel:"alternate",href:Pp(u,n),hreflang:l})}if(r){const l=Ec(s,r);l&&a.push({[t]:"i18n-xd",rel:"alternate",href:Pp(l,n),hreflang:"x-default"})}return a}function fA(s,e,t){const n=s.router.currentRoute.value,r=Xw(s,{...n,path:void 0,name:kc(s,n)});if(!r)return"";let i=Pp(r.path,e);const a=Ue(t)&&t.canonicalQueries||[],o=r.query,l=new URLSearchParams;for(const u of a)if(u in o){const h=o[u];Nt(h)?h.forEach(f=>l.append(u,f||"")):l.append(u,h||"")}const c=l.toString();return c&&(i=`${i}?${c}`),i}function Rx(s,e,t){const n=Qw(),r=fA(s,n,t);return r?[{[e]:"i18n-can",rel:"canonical",href:r}]:[]}function Ox(s,e,t){const n=Qw(),r=fA(s,n,t);return r?[{[e]:"i18n-og-url",property:"og:url",content:r}]:[]}function Vx(s,e,t){return!s||!e?[]:[{[t]:"i18n-og",property:"og:locale",content:dA(e)}]}function Px(s,e,t){return s.filter(r=>r.iso&&r.iso!==e).map(r=>({[t]:`i18n-og-alt-${r.iso}`,property:"og:locale:alternate",content:dA(r.iso)}))}function dA(s){return(s||"").replace(/-/g,"_")}function Pp(s,e){return s.match(/^https?:\/\//)?s:on(e,s)}function Lx(s,e){return Bf(s,"setLocale",e)}function Dx(s,e){return Bf(s,"setLocaleCookie",e)}function mA(s,e,t){return Bf(s,"mergeLocaleMessage",e,t)}function Ux(s,e,t,n,r){return Bf(s,"onBeforeLanguageSwitch",e,t,n,r)}function Mx(s,e,t){return Bf(s,"onLanguageSwitched",e,t)}function zw(s){return{i18n:s??st().$i18n,router:_f(),runtimeConfig:Xt(),metaState:O1("nuxt-i18n-meta",()=>({}))}}async function ob(s,e,t,n=!1){const{differentDomains:r,skipSettingLocaleOnNavigate:i,lazy:a}=t,o=xf(t),l=st(),c=ng(e),u=px(e);function h(m=c){o===!1||!o.useCookie||i||Dx(e,m)}if(!s||!n&&r||c===s)return h(),!1;const f=await Ux(e,c,s,n,l);if(f&&u.includes(f)){if(c===f)return h(),!1;s=f}if(a){const m=Wx(e,"fallbackLocale"),S=(k,C)=>mA(e,k,C);if(m){const k=oA(m,[s]);await Promise.all(k.map(C=>km(C,Am,S)))}await km(s,Am,S)}return i?!1:(h(s),cA(e,s),await Mx(e,c,s),!0)}function lb(s,e,t,n,r,i){const{strategy:a,defaultLocale:o,differentDomains:l}=i,c=xf(i),u=Qe(n)?n():n,{ssg:h,callType:f,firstAccess:m,localeCookie:S}=r,{locale:k,stat:C,reason:R,from:T}=c?yA(s,t,r,u):wA;if(R==="detect_ignore_on_ssg")return u;if((T==="navigator_or_header"||T==="cookie"||T==="fallback")&&k)return k;let b=k;return b||(l?b=Xx(sg,a,s):a!=="no_prefix"?b=e(s):c||(b=u)),!b&&c&&c.useCookie&&(b=S||""),b||(b=o||""),b}function cb({route:s,targetLocale:e,routeLocaleGetter:t,calledWithRouting:n=!1}){const r=st(),i=zw(),{strategy:a,differentDomains:o}=i.runtimeConfig.public.i18n;let l="";const{fullPath:c}=s.to;if(!o&&(n||a!=="no_prefix")&&t(s.to)!==e){const u=r.$switchLocalePath(e)||r.$localePath(c,e);le(u)&&u&&!wp(u,c)&&!u.startsWith("//")&&(l=s.from&&s.from.fullPath===u?"":u)}if((o||!0)&&t(s.to)!==e){const u=Ec(i,e,s.to);le(u)&&u&&!wp(u,c)&&!u.startsWith("//")&&(l=u)}return l}function Hx(s){return Ue(s)&&"path"in s&&"statusCode"in s}const $x=()=>O1(aA+":redirect",()=>"");function ub(s,e){return x1(s,{redirectCode:e})}async function hb(s,{status:e=302,enableNavigate:t=!1}={}){const{nuxtApp:n,i18n:r,locale:i,route:a}=s,{rootRedirect:o,differentDomains:l,skipSettingLocaleOnNavigate:c}=n.$config.public.i18n;let{redirectPath:u}=s;if(a.path==="/"&&o)return le(o)?u="/"+o:Hx(o)&&(u="/"+o.path,e=o.statusCode),u=n.$localePath(u,i),ub(u,e);if(!(c&&(r.__pendingLocale=i,r.__pendingLocalePromise=new Promise(h=>{r.__resolvePendingLocalePromise=h}),!t))){if(l){const h=$x();h.value&&h.value!==u&&(h.value="",window.location.assign(u))}else if(u)return ub(u,e)}}function Fx(s,e){Ao(s,"$i18n",Ti(e)),Ao(s,"$getRouteBaseName",ks(kc)),Ao(s,"$localePath",ks(Yw)),Ao(s,"$localeRoute",ks(Xw)),Ao(s,"$switchLocalePath",ks(Ec)),Ao(s,"$localeHead",ks(hA))}function Kx(s=Xt()){return e=>Ix(e)&&!s.public.i18n.differentDomains}function jx(s=Xt()){return(e,t)=>{if(s.public.i18n.differentDomains){const n=vA(t);return n?on(n,e):e}else return Bx(e)}}function Jx(){return()=>{const s=st(),{baseUrl:e,defaultLocale:t,differentDomains:n}=s.$config.public.i18n;if(Qe(e))return e(s);const r=Qe(t)?t():t;if(n&&r){const i=vA(r);if(i)return i}return e}}function gA(s){return aA+" "+s}function Bf(s,e,...t){const n=Ti(s),[r,i]=[n,n[e]];return Reflect.apply(i,r,[...t])}function Wx(s,e){const t=Ti(s);return Z(t[e])}function Ao(s,e,t){Object.defineProperty(s,e,{get:()=>t})}function ks(s,e=zw()){return(...t)=>s(e,...t)}function pA(){let s;return navigator.languages&&(s=Sx(sg,navigator.languages)),s}function qx(){const s=xf(),e=s&&s.cookieKey||ox,t=new Date,n={expires:new Date(t.setDate(t.getDate()+365)),path:"/",sameSite:s&&s.cookieCrossOrigin?"none":"lax",secure:s&&s.cookieCrossOrigin||s&&s.cookieSecure};return s&&s.cookieDomain&&(n.domain=s.cookieDomain),KI(e,n)}function qf(s,e,t){if(e===!1||!e.useCookie)return;const n=s.value??void 0;if(n!=null){if(co.includes(n))return n;if(t)return s.value=t,t;s.value=void 0}}function Gx(s,e,t){t===!1||!t.useCookie||(s.value=e)}const wA={locale:"",stat:!1,reason:"unknown",from:"unknown"};function yA(s,e,t,n=""){const{strategy:r}=Xt().public.i18n,{ssg:i,callType:a,firstAccess:o,localeCookie:l}=t;if(r==="no_prefix"&&i==="ssg_ignore")return{locale:"",stat:!0,reason:"detect_ignore_on_ssg"};if(!o)return{locale:r==="no_prefix"?n:"",stat:!1,reason:"first_access_only"};const{redirectOn:c,alwaysRedirect:u,useCookie:h,fallbackLocale:f}=xf(),m=le(s)?s:s.path;if(r!=="no_prefix"){if(c==="root"){if(m!=="/")return{locale:"",stat:!1,reason:"not_redirect_on_root"}}else if(c==="no prefix"&&!u&&m.match(Em(co)))return{locale:"",stat:!1,reason:"not_redirect_on_no_prefix"}}let S="unknown",k,C;h&&(C=k=l,S="cookie"),C||(C=pA(),S="navigator_or_header");const R=C||f;!C&&f&&(S="fallback");const T=n||e;if(R&&(!h||u||!k)){if(r==="no_prefix")return{locale:R,stat:!0,from:S};if(a==="setup"&&R!==T)return{locale:R,stat:!0,from:S};if(u){const b=m==="/",w=c==="all",E=c==="no prefix"&&!m.match(Em(co));if(b||w||E)return{locale:R,stat:!0,from:S}}}return i==="ssg_setup"&&R?{locale:R,stat:!0,from:S}:(S==="navigator_or_header"||S==="cookie")&&R?{locale:R,stat:!0,from:S}:{locale:"",stat:!1,reason:"not_found_match"}}function Yx(){let s;return s=window.location.host,s}function Xx(s,e,t){let n=Yx()||"";if(n){let r;const i=s.filter(a=>{if(a&&a.domain){let o=a.domain;return mo(a.domain)&&(o=a.domain.replace(/(http|https):\/\//,"")),o===n}return!1});if(i.length===1)r=i[0];else if(i.length>1)if(e==="no_prefix")console.warn(gA("Multiple matching domains found! This is not supported for no_prefix strategy in combination with differentDomains!")),r=i[0];else{if(t){const a=Ue(t)?t.path:le(t)?t:"";if(a&&a!==""){const o=a.match(Em(i.map(l=>l.code)));o&&o.length>1&&(r=i.find(l=>l.code===o[1]))}}r||(r=i.find(a=>a.domainDefault))}if(r)return r.code;n=""}return n}function vA(s){var i,a;const t=Xt().public.i18n,n=sg.find(o=>o.code===s),r=((a=(i=t==null?void 0:t.locales)==null?void 0:i[s])==null?void 0:a.domain)??(n==null?void 0:n.domain);if(r){if(mo(r,{strict:!0}))return r;let o;return o=new URL(window.location.origin).protocol,o+"//"+r}console.warn(gA("Could not find domain name for locale "+s))}const xf=(s=Xt().public.i18n)=>(s==null?void 0:s.detectBrowserLanguage)===!1?!1:s==null?void 0:s.detectBrowserLanguage;function Qx(){return ks(Ec)}function zx(s,{locales:e=[],localeCodes:t=[],baseUrl:n="",hooks:r={},context:i={}}={}){const a=gw(),o=s.install;return s.install=(l,...c)=>{const u=tT(c[0])?It({},c[0]):{inject:!0};u.inject==null&&(u.inject=!0);const h=u.__composerExtend;if(u.__composerExtend=k=>{const C=Ac(s);k.locales=Yt(()=>C.locales.value),k.localeCodes=Yt(()=>C.localeCodes.value),k.baseUrl=Yt(()=>C.baseUrl.value);let R;return Qe(h)&&(R=Reflect.apply(h,u,[k])),()=>{R&&R()}},s.mode==="legacy"){const k=u.__vueI18nExtend;u.__vueI18nExtend=C=>{fb(C,r.onExtendVueI18n);let R;return Qe(k)&&(R=Reflect.apply(k,u,[C])),()=>{R&&R()}}}c[0]=u,Reflect.apply(o,s,[l,...c]);const f=Ac(s);a.run(()=>{Zx(f,{locales:e,localeCodes:t,baseUrl:n,hooks:r,context:i}),s.mode==="legacy"&&lA(s.global)&&fb(s.global,r.onExtendVueI18n)});const m=l,S=s.mode==="composition"?m.config.globalProperties.$i18n:null;if(S&&eT(S,f,r.onExtendExportedGlobal),u.inject){const k=zw(s);l.mixin({methods:{getRouteBaseName:ks(kc,k),resolveRoute:ks(rg,k),localePath:ks(Yw,k),localeRoute:ks(Xw,k),localeLocation:ks(_x,k),switchLocalePath:ks(Ec,k),localeHead:ks(hA,k)}})}if(m.unmount){const k=m.unmount;m.unmount=()=>{a.stop(),k()}}},a}function Zx(s,e){const{locales:t,localeCodes:n,baseUrl:r,context:i}=e,a=Me(t),o=Me(n),l=Me("");s.locales=Yt(()=>a.value),s.localeCodes=Yt(()=>o.value),s.baseUrl=Yt(()=>l.value),hx?Sn(s.locale,()=>{l.value=ab(r,i)},{immediate:!0}):l.value=ab(r,i),e.hooks&&e.hooks.onExtendComposer&&e.hooks.onExtendComposer(s)}function bA(s,e,t){const n=[{locales:{get(){return s.locales.value}},localeCodes:{get(){return s.localeCodes.value}},baseUrl:{get(){return s.baseUrl.value}}}];t&&n.push(t(s));for(const r of n)for(const[i,a]of Object.entries(r))Object.defineProperty(e,i,a)}function eT(s,e,t){bA(e,s,t)}function fb(s,e){const t=Ac(s);bA(t,s,e)}function tT(s){return Ue(s)&&("inject"in s||"__composerExtend"in s||"__vueI18nExtend"in s)}function sT(){const{routesNameSeparator:s,defaultLocaleRouteNameSuffix:e}=Xt().public.i18n,t=`(${co.join("|")})`,n=`(?:${s}${e})?`,r=new RegExp(`${s}${t}${n}$`,"i"),i=Em(co);return o=>{if(Ue(o)){if(o.name){const c=(le(o.name)?o.name:o.name.toString()).match(r);if(c&&c.length>1)return c[1]}else if(o.path){const l=o.path.match(i);if(l&&l.length>1)return l[1]}}else if(le(o)){const l=o.match(i);if(l&&l.length>1)return l[1]}return""}}const nT=_i({name:"i18n:plugin",parallel:ix,async setup(s){let e,t;const n=$w(),{vueApp:r}=s,i=s,a={...i.$config.public.i18n};a.baseUrl=Jx();const o=xf(),l=([e,t]=Ka(()=>lx(rx,st())),e=await e,t(),e);l.messages=l.messages||{},l.fallbackLocale=l.fallbackLocale??!1;const c=sT(),u=w=>w||l.locale||"en-US",h=qx();let f=lb(n,c,l.locale,u(a.defaultLocale),{ssg:a.strategy==="no_prefix"?"ssg_ignore":"normal",callType:"setup",firstAccess:!0,localeCookie:qf(h,o,a.defaultLocale)},a);l.messages=([e,t]=Ka(()=>cx(l.messages,Am,{localeCodes:co,initialLocale:f,lazy:a.lazy,defaultLocale:a.defaultLocale,fallbackLocale:l.fallbackLocale})),e=await e,t(),e),f=u(f);const m=GB({...l,locale:f});let S=!0;const k=w=>f!==w&&S;let C=!0;const R=()=>C;R()&&a.strategy==="no_prefix"&&s.hook("app:mounted",async()=>{const{locale:w,stat:E,reason:N,from:L}=o?yA(n,l.locale,{ssg:"ssg_setup",callType:"setup",firstAccess:!0,localeCookie:qf(h,o,a.defaultLocale)},f):wA;Lx(m,w),C=!1}),zx(m,{locales:a.configLocales,localeCodes:co,baseUrl:a.baseUrl,context:i,hooks:{onExtendComposer(w){w.strategy=a.strategy,w.localeProperties=Yt(()=>sg.find(E=>E.code===w.locale.value)||{code:w.locale.value}),w.setLocale=async E=>{const N=k(E);await ob(E,m,a,N)&&N&&(S=!1);const H=await i.runWithContext(()=>cb({route:{to:n},targetLocale:E,routeLocaleGetter:c}));await i.runWithContext(async()=>await hb({nuxtApp:i,i18n:m,redirectPath:H,locale:E,route:n},{enableNavigate:!0}))},w.loadLocaleMessages=async E=>{await km(E,Am,(L,H)=>mA(m,L,H))},w.differentDomains=a.differentDomains,w.defaultLocale=a.defaultLocale,w.getBrowserLocale=()=>pA(),w.getLocaleCookie=()=>qf(h,o,a.defaultLocale),w.setLocaleCookie=E=>Gx(h,E,o),w.onBeforeLanguageSwitch=(E,N,L,H)=>s.callHook("i18n:beforeLocaleSwitch",{oldLocale:E,newLocale:N,initialSetup:L,context:H}),w.onLanguageSwitched=(E,N)=>s.callHook("i18n:localeSwitched",{oldLocale:E,newLocale:N}),w.finalizePendingLocaleChange=async()=>{m.__pendingLocale&&(cA(m,m.__pendingLocale),m.__resolvePendingLocalePromise&&await m.__resolvePendingLocalePromise(),m.__pendingLocale=void 0)},w.waitForPendingLocaleChange=async()=>{m.__pendingLocale&&m.__pendingLocalePromise&&await m.__pendingLocalePromise}},onExtendExportedGlobal(w){return{strategy:{get(){return w.strategy}},localeProperties:{get(){return w.localeProperties.value}},setLocale:{get(){return async E=>Reflect.apply(w.setLocale,w,[E])}},differentDomains:{get(){return w.differentDomains}},defaultLocale:{get(){return w.defaultLocale}},getBrowserLocale:{get(){return()=>Reflect.apply(w.getBrowserLocale,w,[])}},getLocaleCookie:{get(){return()=>Reflect.apply(w.getLocaleCookie,w,[])}},setLocaleCookie:{get(){return E=>Reflect.apply(w.setLocaleCookie,w,[E])}},onBeforeLanguageSwitch:{get(){return(E,N,L,H)=>Reflect.apply(w.onBeforeLanguageSwitch,w,[E,N,L,H])}},onLanguageSwitched:{get(){return(E,N)=>Reflect.apply(w.onLanguageSwitched,w,[E,N])}},finalizePendingLocaleChange:{get(){return()=>Reflect.apply(w.finalizePendingLocaleChange,w,[])}},waitForPendingLocaleChange:{get(){return()=>Reflect.apply(w.waitForPendingLocaleChange,w,[])}}}},onExtendVueI18n(w){return{strategy:{get(){return w.strategy}},localeProperties:{get(){return w.localeProperties.value}},setLocale:{get(){return async E=>Reflect.apply(w.setLocale,w,[E])}},loadLocaleMessages:{get(){return async E=>Reflect.apply(w.loadLocaleMessages,w,[E])}},differentDomains:{get(){return w.differentDomains}},defaultLocale:{get(){return w.defaultLocale}},getBrowserLocale:{get(){return()=>Reflect.apply(w.getBrowserLocale,w,[])}},getLocaleCookie:{get(){return()=>Reflect.apply(w.getLocaleCookie,w,[])}},setLocaleCookie:{get(){return E=>Reflect.apply(w.setLocaleCookie,w,[E])}},onBeforeLanguageSwitch:{get(){return(E,N,L,H)=>Reflect.apply(w.onBeforeLanguageSwitch,w,[E,N,L,H])}},onLanguageSwitched:{get(){return(E,N)=>Reflect.apply(w.onLanguageSwitched,w,[E,N])}},finalizePendingLocaleChange:{get(){return()=>Reflect.apply(w.finalizePendingLocaleChange,w,[])}},waitForPendingLocaleChange:{get(){return()=>Reflect.apply(w.waitForPendingLocaleChange,w,[])}}}}}});const T={__composerExtend:w=>{const E=Ac(m);return w.strategy=E.strategy,w.localeProperties=Yt(()=>E.localeProperties.value),w.setLocale=E.setLocale,w.differentDomains=E.differentDomains,w.getBrowserLocale=E.getBrowserLocale,w.getLocaleCookie=E.getLocaleCookie,w.setLocaleCookie=E.setLocaleCookie,w.onBeforeLanguageSwitch=E.onBeforeLanguageSwitch,w.onLanguageSwitched=E.onLanguageSwitched,w.finalizePendingLocaleChange=E.finalizePendingLocaleChange,w.waitForPendingLocaleChange=E.waitForPendingLocaleChange,()=>{}}};if(r.use(m,T),Fx(i,m),a.experimental.switchLocalePathLinkSSR===!0){const w=Qx(),E=new RegExp([`<!--${nb}-\\[(\\w+)\\]-->`,".+?",`<!--/${nb}-->`].join(""),"g");s.hook("app:rendered",N=>{var L;((L=N.renderResult)==null?void 0:L.html)!=null&&(N.renderResult.html=N.renderResult.html.replaceAll(E,(H,F)=>H.replace(/href="([^"]+)"/,`href="${w(F??"")}"`)))})}let b=0;PI("locale-changing",async(w,E)=>{let N,L;const H=lb(w,c,l.locale,()=>ng(m)||u(a.defaultLocale),{ssg:R()&&a.strategy==="no_prefix"?"ssg_ignore":"normal",callType:"routing",firstAccess:b===0,localeCookie:qf(h,o,a.defaultLocale)},a),F=k(H);([N,L]=Ka(()=>ob(H,m,a,F)),N=await N,L(),N)&&F&&(S=!1);const ce=([N,L]=Ka(()=>i.runWithContext(()=>cb({route:{to:w,from:E},targetLocale:H,routeLocaleGetter:a.strategy==="no_prefix"?()=>H:c,calledWithRouting:!0}))),N=await N,L(),N);return b++,[N,L]=Ka(()=>i.runWithContext(async()=>hb({nuxtApp:i,i18n:m,redirectPath:ce,locale:H,route:w}))),N=await N,L(),N},{global:!0})}}),rT=_i({name:"nuxt:chunk-reload",setup(s){const e=_f(),t=Xt(),n=new Set;e.beforeEach(()=>{n.clear()}),s.hook("app:chunkError",({error:i})=>{n.add(i)});function r(i){const o="href"in i&&i.href.startsWith("#")?t.app.baseURL+i.href:on(t.app.baseURL,i.fullPath);qI({path:o,persistState:!0})}s.hook("app:manifest:update",()=>{e.beforeResolve(r)}),e.onError((i,a)=>{n.has(i)&&r(a)})}}),iT=_i(s=>{let e;const t=Xt();async function n(){const r=await Xm();e&&clearTimeout(e),e=setTimeout(n,1e3*60*60);const i=await $fetch(on(t.app.cdnURL||t.app.baseURL,t.app.buildAssetsDir,"builds/latest.json"));i.id!==r.id&&s.hooks.callHook("app:manifest:update",i)}R1(()=>{e=setTimeout(n,1e3*60*60)})}),aT=[s_,r_,o_,l_,c_,nT,rT,iT],Oc=(s,e)=>{const t=s.__vccOpts||s;for(const[n,r]of e)t[n]=r;return t},oT={},lT={id:"toast-simple",class:"fixed top-0 left-0 right-0 mx-auto mt-4 flex items-center p-4 space-x-4 w-full max-w-xs text-gray-900 rounded-lg divide-x divide-gray-200 shadow dark:text-gray-400 dark:divide-gray-700 space-x",role:"alert"},cT=ee("svg",{"aria-hidden":"true",class:"w-5 h-5 text-blue-600 dark:text-blue-500",focusable:"false","data-prefix":"fas","data-icon":"paper-plane",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},[ee("path",{fill:"currentColor",d:"M511.6 36.86l-64 415.1c-1.5 9.734-7.375 18.22-15.97 23.05c-4.844 2.719-10.27 4.097-15.68 4.097c-4.188 0-8.319-.8154-12.29-2.472l-122.6-51.1l-50.86 76.29C226.3 508.5 219.8 512 212.8 512C201.3 512 192 502.7 192 491.2v-96.18c0-7.115 2.372-14.03 6.742-19.64L416 96l-293.7 264.3L19.69 317.5C8.438 312.8 .8125 302.2 .0625 289.1s5.469-23.72 16.06-29.77l448-255.1c10.69-6.109 23.88-5.547 34 1.406S513.5 24.72 511.6 36.86z"})],-1),uT={class:"pl-4 text-sm font-normal"};function hT(s,e){return je(),Et("div",lT,[cT,ee("div",uT,[Tw(s.$slots,"default")])])}const fT=Oc(oT,[["render",hT]]),dT={class:"relative bg-gray-700 rounded-lg shadow m-4"},mT={class:"flex justify-between items-center p-2 rounded-t border-b border-gray-600"},gT={class:"text-l font-semibold text-gray-200"},pT=ee("svg",{"aria-hidden":"true",class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[ee("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),wT=ee("span",{class:"sr-only"},"Close modal",-1),yT=[pT,wT],vT={class:"p-3 space-y-6"},bT={class:"text-sm leading-relaxed text-gray-400"},ST={class:"flex justify-end items-center p-3 space-x-3 rounded-b border-t border-gray-600"},AT=Ii({__name:"MyModal",props:{title:String,description:String,modaltype:Number,btn1:String,btn2:String},setup(s){const e=s;return(t,n)=>(je(),Et("div",{id:"defaultModal",tabindex:"-1","aria-hidden":"true",class:"absolute w-full min-h-screen flex items-center justify-center backdrop-blur backdrop-filter z-50",onClick:n[3]||(n[3]=r=>t.$emit("someEvent",e.modaltype,2))},[ee("div",dT,[ee("div",mT,[ee("h3",gT,Be(e.title),1),ee("button",{onClick:n[0]||(n[0]=r=>t.$emit("someEvent",e.modaltype,2)),type:"button",class:"text-gray-400 bg-transparent rounded-lg text-sm p-1.5 ml-auto inline-flex items-center hover:bg-gray-600 hover:text-white","data-modal-toggle":"defaultModal"},yT)]),ee("div",vT,[ee("p",bT,Be(e.description),1)]),ee("div",ST,[e.btn1.length>0?(je(),Et("button",{key:0,onClick:n[1]||(n[1]=r=>t.$emit("someEvent",e.modaltype,1)),"data-modal-toggle":"defaultModal",type:"button",class:"text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center"},Be(e.btn1),1)):Ys("",!0),e.btn2?(je(),Et("button",{key:1,onClick:n[2]||(n[2]=r=>t.$emit("someEvent",e.modaltype,2)),"data-modal-toggle":"defaultModal",type:"button",class:"hover:bg-gray-600 focus:ring-4 focus:outline-none focus:ring-gray-600 rounded-lg border border-gray-500 text-sm font-medium px-5 py-2.5 hover:text-white focus:z-10 bg-gray-700 text-gray-300"},Be(e.btn2),1)):Ys("",!0)])])]))}}),kT=s=>Object.fromEntries(Object.entries(s).filter(([,e])=>e!==void 0)),Zw=(s,e)=>(t,n)=>(yI(()=>s({...kT(t),...n.attrs},n)),()=>{var r,i;return e?(i=(r=n.slots).default)==null?void 0:i.call(r):null}),SA={accesskey:String,autocapitalize:String,autofocus:{type:Boolean,default:void 0},class:[String,Object,Array],contenteditable:{type:Boolean,default:void 0},contextmenu:String,dir:String,draggable:{type:Boolean,default:void 0},enterkeyhint:String,exportparts:String,hidden:{type:Boolean,default:void 0},id:String,inputmode:String,is:String,itemid:String,itemprop:String,itemref:String,itemscope:String,itemtype:String,lang:String,nonce:String,part:String,slot:String,spellcheck:{type:Boolean,default:void 0},style:String,tabindex:String,title:String,translate:String},ET=Ii({name:"Link",inheritAttrs:!1,props:{...SA,as:String,crossorigin:String,disabled:Boolean,fetchpriority:String,href:String,hreflang:String,imagesizes:String,imagesrcset:String,integrity:String,media:String,prefetch:{type:Boolean,default:void 0},referrerpolicy:String,rel:String,sizes:String,title:String,type:String,methods:String,target:String,body:Boolean,renderPriority:[String,Number]},setup:Zw(s=>({link:[s]}))}),CT=Ii({name:"Title",inheritAttrs:!1,setup:Zw((s,{slots:e})=>{var t,n,r;return{title:((r=(n=(t=e.default)==null?void 0:t.call(e))==null?void 0:n[0])==null?void 0:r.children)||null}})}),NT=Ii({name:"Meta",inheritAttrs:!1,props:{...SA,charset:String,content:String,httpEquiv:String,name:String,body:Boolean,renderPriority:[String,Number]},setup:Zw(s=>{const e={...s};return e.httpEquiv&&(e["http-equiv"]=e.httpEquiv,delete e.httpEquiv),{meta:[e]}})}),IT={__name:"MyBA",props:{clickable:{default:!0}},setup(s){return(e,t)=>(je(),Et("button",{class:xt(["rounded-md border-solid border-2 border-black/25 px-3 py-2 text-sm font-medium text-black flex-1 max-w-60 m-1",s.clickable?"hover:border-black focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75":"text-black/50"]),type:"button"},[Tw(e.$slots,"default")],2))}},_T=IT,BT={};function xT(s,e){return je(),Et("button",{id:"fileSelect",onDragover:e[0]||(e[0]=Hi(()=>{},["prevent"])),class:"rounded-md border-black/25 border-2 border-dashed px-3 py-2 text-sm font-medium text-black hover:border-black focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 flex-1 max-w-60 m-1"},[Tw(s.$slots,"default")],32)}const TT=Oc(BT,[["render",xT]]),RT={},OT={class:"ml-2 inline cursor-help",xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 1 24 24"},VT=ee("path",{fill:"currentColor",d:"M3 5.75A.75.75 0 0 1 3.75 5c2.663 0 5.258-.943 7.8-2.85a.75.75 0 0 1 .9 0C14.992 4.057 17.587 5 20.25 5a.75.75 0 0 1 .75.75V11c0 5.001-2.958 8.676-8.725 10.948a.75.75 0 0 1-.55 0C5.958 19.676 3 16 3 11zm1.5.728V11c0 4.256 2.453 7.379 7.5 9.442c5.047-2.063 7.5-5.186 7.5-9.442V6.478c-2.577-.152-5.08-1.09-7.5-2.8c-2.42 1.71-4.923 2.648-7.5 2.8M13 16a1 1 0 1 1-2 0a1 1 0 0 1 2 0m-2.25-6.25a1.25 1.25 0 1 1 2.5 0c0 .447-.248.737-.78 1.268l-.047.047c-.47.468-1.173 1.167-1.173 2.285a.75.75 0 0 0 1.5 0c0-.45.249-.74.78-1.27l.049-.05c.47-.467 1.171-1.165 1.171-2.28a2.75 2.75 0 1 0-5.5 0a.75.75 0 0 0 1.5 0"},null,-1),PT=[VT];function LT(s,e){return je(),Et("svg",OT,PT)}const DT=Oc(RT,[["render",LT]]),UT={},MT={class:"inline",xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 4 72 72"},HT=LE('<path fill-rule="evenodd" d="M20.4 32.431A16 16 0 0 0 20 36c0 8.837 7.163 16 16 16c1.227 0 2.421-.138 3.569-.4c-3.336-2.435-6.844-5.437-10.288-8.881S22.835 35.767 20.4 32.43m26.217 15.54c-3.326-.69-8.54-4.08-13.523-9.064c-4.984-4.983-8.375-10.197-9.064-13.523A15.96 15.96 0 0 1 36 20c8.837 0 16 7.163 16 16c0 4.763-2.08 9.039-5.383 11.97" clip-rule="evenodd"></path><circle cx="36" cy="36" r="20" fill="#d22f27" stroke="#d22f27" stroke-width="2"></circle><path fill="#d22f27" fill-rule="evenodd" d="M58.88 58.88c-3.949 3.95-17.394-3.093-30.03-15.73C16.213 30.514 9.17 17.07 13.12 13.12c1.848-1.848 5.775-1.29 10.727 1.124c3.405 1.66 7.312 1.98 11.096 1.784Q35.468 16 36 16c11.046 0 20 8.954 20 20q0 .532-.028 1.057c-.197 3.784.124 7.69 1.784 11.096c2.413 4.952 2.972 8.88 1.124 10.727" clip-rule="evenodd"></path><path d="M36 51c8.284 0 15-6.716 15-15s-6.716-15-15-15s-15 6.716-15 15s6.716 15 15 15"></path><path fill="#d22f27" fill-rule="evenodd" d="M18.203 14.039c-.365-.365-.858-.59-1.372-.539c-.967.098-1.756.425-2.331 1c-3.71 3.71 2.907 16.345 14.781 28.219S53.79 61.21 57.5 57.5c.575-.575.902-1.364 1-2.331c.052-.514-.174-1.007-.54-1.372l-6.649-6.65c-.464-.464-1.347-.111-1.811.353c-2.157 2.157-9.503-1.69-16.406-8.594C26.19 32.003 22.343 24.657 24.5 22.5c.464-.464.817-1.347.353-1.811z" clip-rule="evenodd"></path><path fill="#e27022" stroke="#d22f27" stroke-width="0.5" d="M14.71 14.71c.23-.23.842-.564 2.352-.39c1.48.17 3.442.798 5.799 1.947c3.899 1.9 8.247 2.213 12.199 2.007q.466-.024.94-.024c9.803 0 17.75 7.947 17.75 17.75q0 .475-.024.94c-.206 3.952.107 8.3 2.007 12.2c1.15 2.356 1.778 4.318 1.948 5.797c.173 1.51-.162 2.123-.392 2.352c-.246.247-.936.61-2.656.352c-1.668-.251-3.862-1.035-6.466-2.4c-5.183-2.714-11.523-7.479-17.726-13.682S19.473 29.016 16.758 23.833c-1.364-2.604-2.148-4.798-2.398-6.466c-.259-1.72.104-2.41.35-2.656Z"></path><path fill-rule="evenodd" d="M33.094 38.906c4.11 4.111 8.378 7.138 11.614 8.46c1.169.477 2.49.13 3.324-.819A15.94 15.94 0 0 0 52 36c0-8.837-7.163-16-16-16a15.94 15.94 0 0 0-10.547 3.968c-.95.834-1.296 2.155-.818 3.325c1.32 3.235 4.348 7.502 8.459 11.613" clip-rule="evenodd"></path><path d="m28.85 43.15l-.707.707zm30.03 15.73l-.707-.707zm-1.124-10.727l.899-.438zm-29.613-4.296c6.37 6.37 12.97 11.358 18.516 14.264c2.768 1.45 5.325 2.408 7.492 2.733c2.142.322 4.12.05 5.436-1.267l-1.414-1.414c-.657.658-1.842.986-3.725.704c-1.86-.28-4.194-1.131-6.861-2.528c-5.323-2.788-11.763-7.639-18.03-13.906zm-15.73-31.444c-1.318 1.316-1.59 3.294-1.267 5.436c.325 2.167 1.284 4.724 2.733 7.492c2.906 5.546 7.894 12.147 14.264 18.516l1.414-1.414c-6.267-6.267-11.118-12.707-13.906-18.03c-1.397-2.667-2.248-5.001-2.528-6.86c-.283-1.885.046-3.069.704-3.726zm11.872.932c-2.529-1.232-4.863-2.026-6.852-2.255c-1.973-.226-3.788.09-5.02 1.322l1.414 1.415c.615-.615 1.688-.944 3.378-.75c1.676.193 3.78.885 6.204 2.066zM36 15q-.558 0-1.11.029l.105 1.997Q35.495 17 36 17zm21 21c0-11.598-9.402-21-21-21v2c10.493 0 19 8.507 19 19zm-.029 1.11q.03-.552.029-1.11h-2q0 .505-.026 1.005zm2.617 22.478c1.232-1.233 1.548-3.047 1.322-5.022c-.229-1.988-1.023-4.322-2.255-6.85l-1.798.876c1.181 2.422 1.873 4.527 2.066 6.203c.194 1.69-.135 2.763-.75 3.378zm-4.614-22.583c-.201 3.858.116 7.962 1.883 11.587l1.798-.877c-1.553-3.186-1.877-6.897-1.684-10.606zM23.409 15.143c3.624 1.767 7.728 2.084 11.586 1.883l-.104-1.997c-3.709.193-7.42-.131-10.606-1.684z"></path><path fill="none" stroke="#000" stroke-linecap="round" stroke-width="2" d="M16.224 33A20 20 0 0 0 16 36c0 11.046 8.954 20 20 20c1.194 0 2.364-.105 3.5-.305"></path><path fill="none" stroke="#e27022" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M36 52c-8.837 0-16-7.163-16-16"></path>',10),$T=[HT];function FT(s,e){return je(),Et("svg",MT,$T)}const KT=Oc(UT,[["render",FT]]),jT={},JT={class:"transition-all duration-700 ease-in-out",xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 24 24"},WT=ee("path",{fill:"currentColor","fill-rule":"evenodd",d:"m4 15l8-8l8 8l-2 2l-6-6l-6 6z"},null,-1),qT=[WT];function GT(s,e){return je(),Et("svg",JT,qT)}const YT=Oc(jT,[["render",GT]]),XT={},QT={class:"inline",xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 1 20 20"},zT=ee("path",{fill:"currentColor",d:"M10 10a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 1 0v-3a.5.5 0 0 0-.5-.5M6 8.5a.5.5 0 0 1 1 0v5a.5.5 0 0 1-1 0zM13.5 6a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 1 0v-7a.5.5 0 0 0-.5-.5M3 5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm1 0v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1"},null,-1),ZT=[zT];function eR(s,e){return je(),Et("svg",QT,ZT)}const tR=Oc(XT,[["render",eR]]);/*!
 * MIT License
 * 
 * Copyright (c) 2017-2022 Peculiar Ventures, LLC
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const sR="[object ArrayBuffer]";class ve{static isArrayBuffer(e){return Object.prototype.toString.call(e)===sR}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if(e.constructor===t)return e;if(this.isArrayBuffer(e))return new t(e);if(this.isArrayBufferView(e))return new t(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,t){const n=ve.toUint8Array(e),r=ve.toUint8Array(t);if(n.length!==r.byteLength)return!1;for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}static concat(...e){let t;Array.isArray(e[0])&&!(e[1]instanceof Function)||Array.isArray(e[0])&&e[1]instanceof Function?t=e[0]:e[e.length-1]instanceof Function?t=e.slice(0,e.length-1):t=e;let n=0;for(const a of t)n+=a.byteLength;const r=new Uint8Array(n);let i=0;for(const a of t){const o=this.toUint8Array(a);r.set(o,i),i+=o.length}return e[e.length-1]instanceof Function?this.toView(r,e[e.length-1]):r.buffer}}const Eg="string",nR=/^[0-9a-f]+$/i,rR=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,iR=/^[a-zA-Z0-9-_]+$/;class db{static fromString(e){const t=unescape(encodeURIComponent(e)),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer}static toString(e){const t=ve.toUint8Array(e);let n="";for(let i=0;i<t.length;i++)n+=String.fromCharCode(t[i]);return decodeURIComponent(escape(n))}}class hn{static toString(e,t=!1){const n=ve.toArrayBuffer(e),r=new DataView(n);let i="";for(let a=0;a<n.byteLength;a+=2){const o=r.getUint16(a,t);i+=String.fromCharCode(o)}return i}static fromString(e,t=!1){const n=new ArrayBuffer(e.length*2),r=new DataView(n);for(let i=0;i<e.length;i++)r.setUint16(i*2,e.charCodeAt(i),t);return n}}class be{static isHex(e){return typeof e===Eg&&nR.test(e)}static isBase64(e){return typeof e===Eg&&rR.test(e)}static isBase64Url(e){return typeof e===Eg&&iR.test(e)}static ToString(e,t="utf8"){const n=ve.toUint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(n);case"binary":return this.ToBinary(n);case"hex":return this.ToHex(n);case"base64":return this.ToBase64(n);case"base64url":return this.ToBase64Url(n);case"utf16le":return hn.toString(n,!0);case"utf16":case"utf16be":return hn.toString(n);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromString(e,t="utf8"){if(!e)return new ArrayBuffer(0);switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return hn.fromString(e,!0);case"utf16":case"utf16be":return hn.fromString(e);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToBase64(e){const t=ve.toUint8Array(e);if(typeof btoa<"u"){const n=this.ToString(t,"binary");return btoa(n)}else return Buffer.from(t).toString("base64")}static FromBase64(e){const t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!be.isBase64(t))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(t)):new Uint8Array(Buffer.from(t,"base64")).buffer}static FromBase64Url(e){const t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!be.isBase64Url(t))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(t.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,t=be.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.FromBinary(e);case"utf8":return db.fromString(e);case"utf16":case"utf16be":return hn.fromString(e);case"utf16le":case"usc2":return hn.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToUtf8String(e,t=be.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.ToBinary(e);case"utf8":return db.toString(e);case"utf16":case"utf16be":return hn.toString(e);case"utf16le":case"usc2":return hn.toString(e,!0);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromBinary(e){const t=e.length,n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e.charCodeAt(r);return n.buffer}static ToBinary(e){const t=ve.toUint8Array(e);let n="";for(let r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return n}static ToHex(e){const t=ve.toUint8Array(e);let n="";const r=t.length;for(let i=0;i<r;i++){const a=t[i];a<16&&(n+="0"),n+=a.toString(16)}return n}static FromHex(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!be.isHex(t))throw new TypeError("Argument 'hexString' is not HEX encoded");t.length%2&&(t=`0${t}`);const n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r=r+2){const i=t.slice(r,r+2);n[r/2]=parseInt(i,16)}return n.buffer}static ToUtf16String(e,t=!1){return hn.toString(e,t)}static FromUtf16String(e,t=!1){return hn.fromString(e,t)}static Base64Padding(e){const t=4-e.length%4;if(t<4)for(let n=0;n<t;n++)e+="=";return e}static formatString(e){return(e==null?void 0:e.replace(/[\n\r\t ]/g,""))||""}}be.DEFAULT_UTF8_ENCODING="utf8";/*!
 Copyright (c) Peculiar Ventures, LLC
*/function d(s,e,t){var n;return s instanceof Object&&(n=s[e])!==null&&n!==void 0?n:t}function mb(s,e=0,t=s.byteLength-e,n=!1){let r="";for(const i of new Uint8Array(s,e,t)){const a=i.toString(16).toUpperCase();a.length===1&&(r+="0"),r+=a,n&&(r+=" ")}return r.trim()}function uo(s,e){let t=0;if(s.length===1)return s[0];for(let n=s.length-1;n>=0;n--)t+=s[s.length-1-n]*Math.pow(2,e*n);return t}function ar(s,e,t=-1){const n=t;let r=s,i=0,a=Math.pow(2,e);for(let o=1;o<8;o++){if(s<a){let l;if(n<0)l=new ArrayBuffer(o),i=o;else{if(n<o)return new ArrayBuffer(0);l=new ArrayBuffer(n),i=n}const c=new Uint8Array(l);for(let u=o-1;u>=0;u--){const h=Math.pow(2,u*e);c[i-u-1]=Math.floor(r/h),r-=c[i-u-1]*h}return l}a*=Math.pow(2,e)}return new ArrayBuffer(0)}function lc(...s){let e=0,t=0;for(const i of s)e+=i.byteLength;const n=new ArrayBuffer(e),r=new Uint8Array(n);for(const i of s)r.set(new Uint8Array(i),t),t+=i.byteLength;return n}function Lp(...s){let e=0,t=0;for(const i of s)e+=i.length;const n=new ArrayBuffer(e),r=new Uint8Array(n);for(const i of s)r.set(i,t),t+=i.length;return r}function AA(){const s=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const o=s[0]===255&&s[1]&128,l=s[0]===0&&(s[1]&128)===0;(o||l)&&this.warnings.push("Needlessly long format")}const e=new ArrayBuffer(this.valueHex.byteLength),t=new Uint8Array(e);for(let o=0;o<this.valueHex.byteLength;o++)t[o]=0;t[0]=s[0]&128;const n=uo(t,8),r=new ArrayBuffer(this.valueHex.byteLength),i=new Uint8Array(r);for(let o=0;o<this.valueHex.byteLength;o++)i[o]=s[o];return i[0]&=127,uo(i,8)-n}function aR(s){const e=s<0?s*-1:s;let t=128;for(let n=1;n<8;n++){if(e<=t){if(s<0){const a=t-e,o=ar(a,8,n),l=new Uint8Array(o);return l[0]|=128,o}let r=ar(e,8,n),i=new Uint8Array(r);if(i[0]&128){const a=r.slice(0),o=new Uint8Array(a);r=new ArrayBuffer(r.byteLength+1),i=new Uint8Array(r);for(let l=0;l<a.byteLength;l++)i[l+1]=o[l];i[0]=0}return r}t*=Math.pow(2,8)}return new ArrayBuffer(0)}function Cc(s,e){if(s.byteLength!==e.byteLength)return!1;const t=new Uint8Array(s),n=new Uint8Array(e);for(let r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}function Es(s,e){const t=s.toString(10);if(e<t.length)return"";const n=e-t.length,r=new Array(n);for(let a=0;a<n;a++)r[a]="0";return r.join("").concat(t)}const kA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",EA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function Dp(s,e=!1,t=!1,n=!1){let r=0,i=0,a=0,o="";const l=e?EA:kA;if(n){let c=0;for(let u=0;u<s.length;u++)if(s.charCodeAt(u)!==0){c=u;break}s=s.slice(c)}for(;r<s.length;){const c=s.charCodeAt(r++);r>=s.length&&(i=1);const u=s.charCodeAt(r++);r>=s.length&&(a=1);const h=s.charCodeAt(r++),f=c>>2,m=(c&3)<<4|u>>4;let S=(u&15)<<2|h>>6,k=h&63;i===1?S=k=64:a===1&&(k=64),t?S===64?o+=`${l.charAt(f)}${l.charAt(m)}`:k===64?o+=`${l.charAt(f)}${l.charAt(m)}${l.charAt(S)}`:o+=`${l.charAt(f)}${l.charAt(m)}${l.charAt(S)}${l.charAt(k)}`:o+=`${l.charAt(f)}${l.charAt(m)}${l.charAt(S)}${l.charAt(k)}`}return o}function ff(s,e=!1,t=!1){const n=e?EA:kA;function r(l){for(let c=0;c<64;c++)if(n.charAt(c)===l)return c;return 64}function i(l){return l===64?0:l}let a=0,o="";for(;a<s.length;){const l=r(s.charAt(a++)),c=a>=s.length?0:r(s.charAt(a++)),u=a>=s.length?0:r(s.charAt(a++)),h=a>=s.length?0:r(s.charAt(a++)),f=i(l)<<2|i(c)>>4,m=(i(c)&15)<<4|i(u)>>2,S=(i(u)&3)<<6|i(h);o+=String.fromCharCode(f),u!==64&&(o+=String.fromCharCode(m)),h!==64&&(o+=String.fromCharCode(S))}if(t){const l=o.length;let c=-1;for(let u=l-1;u>=0;u--)if(o.charCodeAt(u)!==0){c=u;break}c!==-1?o=o.slice(0,c+1):o=""}return o}function Cm(s){let e="";const t=new Uint8Array(s);for(const n of t)e+=String.fromCharCode(n);return e}function Nc(s){const e=s.length,t=new ArrayBuffer(e),n=new Uint8Array(t);for(let r=0;r<e;r++)n[r]=s.charCodeAt(r);return t}const oR=Math.log(2);function lR(s){const e=Math.log(s)/oR,t=Math.floor(e),n=Math.round(e);return t===n?t:n}function X(s,e){for(const t of e)delete s[t]}/*!
 * Copyright (c) 2014, GMO GlobalSign
 * Copyright (c) 2015-2022, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */function Nm(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function ey(s){let e=0,t=0;for(let r=0;r<s.length;r++){const i=s[r];e+=i.byteLength}const n=new Uint8Array(e);for(let r=0;r<s.length;r++){const i=s[r];n.set(new Uint8Array(i),t),t+=i.byteLength}return n.buffer}function lr(s,e,t,n){return e instanceof Uint8Array?e.byteLength?t<0?(s.error="Wrong parameter: inputOffset less than zero",!1):n<0?(s.error="Wrong parameter: inputLength less than zero",!1):e.byteLength-t-n<0?(s.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(s.error="Wrong parameter: inputBuffer has zero length",!1):(s.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class ty{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return ey(this.items)}}const Dc=[new Uint8Array([1])],gb="0123456789",Cg="name",pb="valueHexView",cR="isHexOnly",uR="idBlock",hR="tagClass",fR="tagNumber",dR="isConstructed",mR="fromBER",gR="toBER",pR="local",ds="",ln=new ArrayBuffer(0),ig=new Uint8Array(0),df="EndOfContent",CA="OCTET STRING",NA="BIT STRING";function cr(s){var e;return e=class extends s{constructor(...n){var r;super(...n);const i=n[0]||{};this.isHexOnly=(r=i.isHexOnly)!==null&&r!==void 0?r:!1,this.valueHexView=i.valueHex?ve.toUint8Array(i.valueHex):ig}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(n){this.valueHexView=new Uint8Array(n)}fromBER(n,r,i){const a=n instanceof ArrayBuffer?new Uint8Array(n):n;if(!lr(this,a,r,i))return-1;const o=r+i;return this.valueHexView=a.subarray(r,o),this.valueHexView.length?(this.blockLength=i,o):(this.warnings.push("Zero buffer length"),r)}toBER(n=!1){return this.isHexOnly?n?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",ln)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:be.ToHex(this.valueHexView)}}},e.NAME="hexBlock",e}class go{constructor({blockLength:e=0,error:t=ds,warnings:n=[],valueBeforeDecode:r=ig}={}){this.blockLength=e,this.error=t,this.warnings=n,this.valueBeforeDecodeView=ve.toUint8Array(r)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:be.ToHex(this.valueBeforeDecodeView)}}}go.NAME="baseBlock";class ps extends go{fromBER(e,t,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}ps.NAME="valueBlock";class IA extends cr(go){constructor({idBlock:e={}}={}){var t,n,r,i;super(),e?(this.isHexOnly=(t=e.isHexOnly)!==null&&t!==void 0?t:!1,this.valueHexView=e.valueHex?ve.toUint8Array(e.valueHex):ig,this.tagClass=(n=e.tagClass)!==null&&n!==void 0?n:-1,this.tagNumber=(r=e.tagNumber)!==null&&r!==void 0?r:-1,this.isConstructed=(i=e.isConstructed)!==null&&i!==void 0?i:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",ln}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){const r=new Uint8Array(1);if(!e){let i=this.tagNumber;i&=31,t|=i,r[0]=t}return r.buffer}if(!this.isHexOnly){const r=ar(this.tagNumber,7),i=new Uint8Array(r),a=r.byteLength,o=new Uint8Array(a+1);if(o[0]=t|31,!e){for(let l=0;l<a-1;l++)o[l+1]=i[l]|128;o[a]=i[a-1]}return o.buffer}const n=new Uint8Array(this.valueHexView.byteLength+1);if(n[0]=t|31,!e){const r=this.valueHexView;for(let i=0;i<r.length-1;i++)n[i+1]=r[i]|128;n[this.valueHexView.byteLength]=r[r.length-1]}return n.buffer}fromBER(e,t,n){const r=ve.toUint8Array(e);if(!lr(this,r,t,n))return-1;const i=r.subarray(t,t+n);if(i.length===0)return this.error="Zero buffer length",-1;switch(i[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(i[0]&32)===32,this.isHexOnly=!1;const o=i[0]&31;if(o!==31)this.tagNumber=o,this.blockLength=1;else{let l=1,c=this.valueHexView=new Uint8Array(255),u=255;for(;i[l]&128;){if(c[l-1]=i[l]&127,l++,l>=i.length)return this.error="End of input reached before message was fully decoded",-1;if(l===u){u+=255;const f=new Uint8Array(u);for(let m=0;m<c.length;m++)f[m]=c[m];c=this.valueHexView=new Uint8Array(u)}}this.blockLength=l+1,c[l-1]=i[l]&127;const h=new Uint8Array(l);for(let f=0;f<l;f++)h[f]=c[f];c=this.valueHexView=new Uint8Array(l),c.set(h),this.blockLength<=9?this.tagNumber=uo(c,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}IA.NAME="identificationBlock";class _A extends go{constructor({lenBlock:e={}}={}){var t,n,r;super(),this.isIndefiniteForm=(t=e.isIndefiniteForm)!==null&&t!==void 0?t:!1,this.longFormUsed=(n=e.longFormUsed)!==null&&n!==void 0?n:!1,this.length=(r=e.length)!==null&&r!==void 0?r:0}fromBER(e,t,n){const r=ve.toUint8Array(e);if(!lr(this,r,t,n))return-1;const i=r.subarray(t,t+n);if(i.length===0)return this.error="Zero buffer length",-1;if(i[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=i[0]===128,this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(i[0]&128),this.longFormUsed===!1)return this.length=i[0],this.blockLength=1,t+this.blockLength;const a=i[0]&127;if(a>8)return this.error="Too big integer",-1;if(a+1>i.length)return this.error="End of input reached before message was fully decoded",-1;const o=t+1,l=r.subarray(o,o+a);return l[a-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=uo(l,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=a+1,t+this.blockLength}toBER(e=!1){let t,n;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(t),n[0]=128),t;if(this.longFormUsed){const r=ar(this.length,8);if(r.byteLength>127)return this.error="Too big length",ln;if(t=new ArrayBuffer(r.byteLength+1),e)return t;const i=new Uint8Array(r);n=new Uint8Array(t),n[0]=r.byteLength|128;for(let a=0;a<r.byteLength;a++)n[a+1]=i[a];return t}return t=new ArrayBuffer(1),e===!1&&(n=new Uint8Array(t),n[0]=this.length),t}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}_A.NAME="lengthBlock";const de={};class os extends go{constructor({name:e=ds,optional:t=!1,primitiveSchema:n,...r}={},i){super(r),this.name=e,this.optional=t,n&&(this.primitiveSchema=n),this.idBlock=new IA(r),this.lenBlock=new _A(r),this.valueBlock=i?new i(r):new ps(r)}fromBER(e,t,n){const r=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}toBER(e,t){const n=t||new ty;t||BA(this);const r=this.idBlock.toBER(e);if(n.write(r),this.lenBlock.isIndefiniteForm)n.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,n),n.write(new ArrayBuffer(2));else{const i=this.valueBlock.toBER(e);this.lenBlock.length=i.byteLength;const a=this.lenBlock.toBER(e);n.write(a),n.write(i)}return t?ln:n.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return e==="ascii"?this.onAsciiEncoding():be.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${be.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;const t=this.toBER(),n=e.toBER();return Cc(t,n)}}os.NAME="BaseBlock";function BA(s){if(s instanceof de.Constructed)for(const e of s.valueBlock.value)BA(e)&&(s.lenBlock.isIndefiniteForm=!0);return!!s.lenBlock.isIndefiniteForm}class xA extends os{constructor({value:e=ds,...t}={},n){super(t,n),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,t,n){const r=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}xA.NAME="BaseStringBlock";class TA extends cr(ps){constructor({isHexOnly:e=!0,...t}={}){super(t),this.isHexOnly=e}}TA.NAME="PrimitiveValueBlock";var RA;class Se extends os{constructor(e={}){super(e,TA),this.idBlock.isConstructed=!1}}RA=Se;de.Primitive=RA;Se.NAME="PRIMITIVE";function wR(s,e){if(s instanceof e)return s;const t=new e;return t.idBlock=s.idBlock,t.lenBlock=s.lenBlock,t.warnings=s.warnings,t.valueBeforeDecodeView=s.valueBeforeDecodeView,t}function Tf(s,e=0,t=s.length){const n=e;let r=new os({},ps);const i=new go;if(!lr(i,s,e,t))return r.error=i.error,{offset:-1,result:r};if(!s.subarray(e,e+t).length)return r.error="Zero buffer length",{offset:-1,result:r};let o=r.idBlock.fromBER(s,e,t);if(r.idBlock.warnings.length&&r.warnings.concat(r.idBlock.warnings),o===-1)return r.error=r.idBlock.error,{offset:-1,result:r};if(e=o,t-=r.idBlock.blockLength,o=r.lenBlock.fromBER(s,e,t),r.lenBlock.warnings.length&&r.warnings.concat(r.lenBlock.warnings),o===-1)return r.error=r.lenBlock.error,{offset:-1,result:r};if(e=o,t-=r.lenBlock.blockLength,!r.idBlock.isConstructed&&r.lenBlock.isIndefiniteForm)return r.error="Indefinite length form used for primitive encoding form",{offset:-1,result:r};let l=os;switch(r.idBlock.tagClass){case 1:if(r.idBlock.tagNumber>=37&&r.idBlock.isHexOnly===!1)return r.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:r};switch(r.idBlock.tagNumber){case 0:if(r.idBlock.isConstructed&&r.lenBlock.length>0)return r.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:r};l=de.EndOfContent;break;case 1:l=de.Boolean;break;case 2:l=de.Integer;break;case 3:l=de.BitString;break;case 4:l=de.OctetString;break;case 5:l=de.Null;break;case 6:l=de.ObjectIdentifier;break;case 10:l=de.Enumerated;break;case 12:l=de.Utf8String;break;case 13:l=de.RelativeObjectIdentifier;break;case 14:l=de.TIME;break;case 15:return r.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:r};case 16:l=de.Sequence;break;case 17:l=de.Set;break;case 18:l=de.NumericString;break;case 19:l=de.PrintableString;break;case 20:l=de.TeletexString;break;case 21:l=de.VideotexString;break;case 22:l=de.IA5String;break;case 23:l=de.UTCTime;break;case 24:l=de.GeneralizedTime;break;case 25:l=de.GraphicString;break;case 26:l=de.VisibleString;break;case 27:l=de.GeneralString;break;case 28:l=de.UniversalString;break;case 29:l=de.CharacterString;break;case 30:l=de.BmpString;break;case 31:l=de.DATE;break;case 32:l=de.TimeOfDay;break;case 33:l=de.DateTime;break;case 34:l=de.Duration;break;default:{const c=r.idBlock.isConstructed?new de.Constructed:new de.Primitive;c.idBlock=r.idBlock,c.lenBlock=r.lenBlock,c.warnings=r.warnings,r=c}}break;case 2:case 3:case 4:default:l=r.idBlock.isConstructed?de.Constructed:de.Primitive}return r=wR(r,l),o=r.fromBER(s,e,r.lenBlock.isIndefiniteForm?t:r.lenBlock.length),r.valueBeforeDecodeView=s.subarray(n,n+r.blockLength),{offset:o,result:r}}function bt(s){if(!s.byteLength){const e=new os({},ps);return e.error="Input buffer has zero length",{offset:-1,result:e}}return Tf(ve.toUint8Array(s).slice(),0,s.byteLength)}function yR(s,e){return s?1:e}class pi extends ps{constructor({value:e=[],isIndefiniteForm:t=!1,...n}={}){super(n),this.value=e,this.isIndefiniteForm=t}fromBER(e,t,n){const r=ve.toUint8Array(e);if(!lr(this,r,t,n))return-1;if(this.valueBeforeDecodeView=r.subarray(t,t+n),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),t;let i=t;for(;yR(this.isIndefiniteForm,n)>0;){const a=Tf(r,i,n);if(a.offset===-1)return this.error=a.result.error,this.warnings.concat(a.result.warnings),-1;if(i=a.offset,this.blockLength+=a.result.blockLength,n-=a.result.blockLength,this.value.push(a.result),this.isIndefiniteForm&&a.result.constructor.NAME===df)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===df?this.value.pop():this.warnings.push("No EndOfContent block encoded")),i}toBER(e,t){const n=t||new ty;for(let r=0;r<this.value.length;r++)this.value[r].toBER(e,n);return t?ln:n.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const t of this.value)e.value.push(t.toJSON());return e}}pi.NAME="ConstructedValueBlock";var OA;class V extends os{constructor(e={}){super(e,pi),this.idBlock.isConstructed=!0}fromBER(e,t,n){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const r=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return r===-1?(this.error=this.valueBlock.error,r):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),r)}onAsciiEncoding(){const e=[];for(const n of this.valueBlock.value)e.push(n.toString("ascii").split(`
`).map(r=>`  ${r}`).join(`
`));const t=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${t} :
${e.join(`
`)}`:`${t} :`}}OA=V;de.Constructed=OA;V.NAME="CONSTRUCTED";class VA extends ps{fromBER(e,t,n){return t}toBER(e){return ln}}VA.override="EndOfContentValueBlock";var PA;class LA extends os{constructor(e={}){super(e,VA),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}PA=LA;de.EndOfContent=PA;LA.NAME=df;var DA;class mt extends os{constructor(e={}){super(e,ps),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,t,n){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=n,t+n>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+n}toBER(e,t){const n=new ArrayBuffer(2);if(!e){const r=new Uint8Array(n);r[0]=5,r[1]=0}return t&&t.write(n),n}onAsciiEncoding(){return`${this.constructor.NAME}`}}DA=mt;de.Null=DA;mt.NAME="NULL";class UA extends cr(ps){constructor({value:e,...t}={}){super(t),t.valueHex?this.valueHexView=ve.toUint8Array(t.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,t,n){const r=ve.toUint8Array(e);return lr(this,r,t,n)?(this.valueHexView=r.subarray(t,t+n),n>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,AA.call(this),this.blockLength=n,t+n):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}UA.NAME="BooleanValueBlock";var MA;let Cn=class extends os{constructor(e={}){super(e,UA),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};MA=Cn;de.Boolean=MA;Cn.NAME="BOOLEAN";class HA extends cr(pi){constructor({isConstructed:e=!1,...t}={}){super(t),this.isConstructed=e}fromBER(e,t,n){let r=0;if(this.isConstructed){if(this.isHexOnly=!1,r=pi.prototype.fromBER.call(this,e,t,n),r===-1)return r;for(let i=0;i<this.value.length;i++){const a=this.value[i].constructor.NAME;if(a===df){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(a!==CA)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,r=super.fromBER(e,t,n),this.blockLength=n;return r}toBER(e,t){return this.isConstructed?pi.prototype.toBER.call(this,e,t):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}HA.NAME="OctetStringValueBlock";var $A;class z extends os{constructor({idBlock:e={},lenBlock:t={},...n}={}){var r,i;(r=n.isConstructed)!==null&&r!==void 0||(n.isConstructed=!!(!((i=n.value)===null||i===void 0)&&i.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!n.isIndefiniteForm},...n},HA),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,t,n){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,n===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),t;if(!this.valueBlock.isConstructed){const i=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(t,t+n);try{if(i.byteLength){const a=Tf(i,0,i.byteLength);a.offset!==-1&&a.offset===n&&(this.valueBlock.value=[a.result])}}catch{}}return super.fromBER(e,t,n)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?V.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${be.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const e=[];for(const t of this.valueBlock.value)t instanceof z&&e.push(t.valueBlock.valueHexView);return ve.concat(e)}}$A=z;de.OctetString=$A;z.NAME=CA;class FA extends cr(pi){constructor({unusedBits:e=0,isConstructed:t=!1,...n}={}){super(n),this.unusedBits=e,this.isConstructed=t,this.blockLength=this.valueHexView.byteLength}fromBER(e,t,n){if(!n)return t;let r=-1;if(this.isConstructed){if(r=pi.prototype.fromBER.call(this,e,t,n),r===-1)return r;for(const o of this.value){const l=o.constructor.NAME;if(l===df){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(l!==NA)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const c=o.valueBlock;if(this.unusedBits>0&&c.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=c.unusedBits}return r}const i=ve.toUint8Array(e);if(!lr(this,i,t,n))return-1;const a=i.subarray(t,t+n);if(this.unusedBits=a[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const o=a.subarray(1);try{if(o.byteLength){const l=Tf(o,0,o.byteLength);l.offset!==-1&&l.offset===n-1&&(this.value=[l.result])}}catch{}}return this.valueHexView=a.subarray(1),this.blockLength=a.length,t+n}toBER(e,t){if(this.isConstructed)return pi.prototype.toBER.call(this,e,t);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return ln;const n=new Uint8Array(this.valueHexView.length+1);return n[0]=this.unusedBits,n.set(this.valueHexView,1),n.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}FA.NAME="BitStringValueBlock";var KA;class Oe extends os{constructor({idBlock:e={},lenBlock:t={},...n}={}){var r,i;(r=n.isConstructed)!==null&&r!==void 0||(n.isConstructed=!!(!((i=n.value)===null||i===void 0)&&i.length)),super({idBlock:{isConstructed:n.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!n.isIndefiniteForm},...n},FA),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,t,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,t,n)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return V.prototype.onAsciiEncoding.call(this);{const e=[],t=this.valueBlock.valueHexView;for(const r of t)e.push(r.toString(2).padStart(8,"0"));const n=e.join("");return`${this.constructor.NAME} : ${n.substring(0,n.length-this.valueBlock.unusedBits)}`}}}KA=Oe;de.BitString=KA;Oe.NAME=NA;var jA;function vR(s,e){const t=new Uint8Array([0]),n=new Uint8Array(s),r=new Uint8Array(e);let i=n.slice(0);const a=i.length-1,o=r.slice(0),l=o.length-1;let c=0;const u=l<a?a:l;let h=0;for(let f=u;f>=0;f--,h++){switch(!0){case h<o.length:c=i[a-h]+o[l-h]+t[0];break;default:c=i[a-h]+t[0]}switch(t[0]=c/10,!0){case h>=i.length:i=Lp(new Uint8Array([c%10]),i);break;default:i[a-h]=c%10}}return t[0]>0&&(i=Lp(t,i)),i}function wb(s){if(s>=Dc.length)for(let e=Dc.length;e<=s;e++){const t=new Uint8Array([0]);let n=Dc[e-1].slice(0);for(let r=n.length-1;r>=0;r--){const i=new Uint8Array([(n[r]<<1)+t[0]]);t[0]=i[0]/10,n[r]=i[0]%10}t[0]>0&&(n=Lp(t,n)),Dc.push(n)}return Dc[s]}function bR(s,e){let t=0;const n=new Uint8Array(s),r=new Uint8Array(e),i=n.slice(0),a=i.length-1,o=r.slice(0),l=o.length-1;let c,u=0;for(let h=l;h>=0;h--,u++)switch(c=i[a-u]-o[l-u]-t,!0){case c<0:t=1,i[a-u]=c+10;break;default:t=0,i[a-u]=c}if(t>0)for(let h=a-l+1;h>=0;h--,u++)if(c=i[a-u]-t,c<0)t=1,i[a-u]=c+10;else{t=0,i[a-u]=c;break}return i.slice()}class sy extends cr(ps){constructor({value:e,...t}={}){super(t),this._valueDec=0,t.valueHex&&this.setValueHex(),e!==void 0&&(this.valueDec=e)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=AA.call(this)))}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(aR(e))}get valueDec(){return this._valueDec}fromDER(e,t,n,r=0){const i=this.fromBER(e,t,n);if(i===-1)return i;const a=this.valueHexView;return a[0]===0&&a[1]&128?this.valueHexView=a.subarray(1):r!==0&&a.length<r&&(r-a.length>1&&(r=a.length+1),this.valueHexView=a.subarray(r-a.length)),i}toDER(e=!1){const t=this.valueHexView;switch(!0){case(t[0]&128)!==0:{const n=new Uint8Array(this.valueHexView.length+1);n[0]=0,n.set(t,1),this.valueHexView=n}break;case(t[0]===0&&(t[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(e)}fromBER(e,t,n){const r=super.fromBER(e,t,n);return r===-1||this.setValueHex(),r}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=this.valueHexView.length*8-1;let t=new Uint8Array(this.valueHexView.length*8/3),n=0,r;const i=this.valueHexView;let a="",o=!1;for(let l=i.byteLength-1;l>=0;l--){r=i[l];for(let c=0;c<8;c++){if((r&1)===1)switch(n){case e:t=bR(wb(n),t),a="-";break;default:t=vR(t,wb(n))}n++,r>>=1}}for(let l=0;l<t.length;l++)t[l]&&(o=!0),o&&(a+=gb.charAt(t[l]));return o===!1&&(a+=gb.charAt(0)),a}}jA=sy;sy.NAME="IntegerValueBlock";Object.defineProperty(jA.prototype,"valueHex",{set:function(s){this.valueHexView=new Uint8Array(s),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});var JA;class U extends os{constructor(e={}){super(e,sy),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return Nm(),BigInt(this.valueBlock.toString())}static fromBigInt(e){Nm();const t=BigInt(e),n=new ty,r=t.toString(16).replace(/^-/,""),i=new Uint8Array(be.FromHex(r));if(t<0){const o=new Uint8Array(i.length+(i[0]&128?1:0));o[0]|=128;const c=BigInt(`0x${be.ToHex(o)}`)+t,u=ve.toUint8Array(be.FromHex(c.toString(16)));u[0]|=128,n.write(u)}else i[0]&128&&n.write(new Uint8Array([0])),n.write(i);return new U({valueHex:n.final()})}convertToDER(){const e=new U({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new U({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}JA=U;de.Integer=JA;U.NAME="INTEGER";var WA;class Ei extends U{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}WA=Ei;de.Enumerated=WA;Ei.NAME="ENUMERATED";class Up extends cr(ps){constructor({valueDec:e=-1,isFirstSid:t=!1,...n}={}){super(n),this.valueDec=e,this.isFirstSid=t}fromBER(e,t,n){if(!n)return t;const r=ve.toUint8Array(e);if(!lr(this,r,t,n))return-1;const i=r.subarray(t,t+n);this.valueHexView=new Uint8Array(n);for(let o=0;o<n&&(this.valueHexView[o]=i[o]&127,this.blockLength++,!!(i[o]&128));o++);const a=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength;o++)a[o]=this.valueHexView[o];return this.valueHexView=a,i[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=uo(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}set valueBigInt(e){Nm();let t=BigInt(e).toString(2);for(;t.length%7;)t="0"+t;const n=new Uint8Array(t.length/7);for(let r=0;r<n.length;r++)n[r]=parseInt(t.slice(r*7,r*7+7),2)+(r+1<n.length?128:0);this.fromBER(n.buffer,0,n.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const r=this.valueHexView,i=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength-1;a++)i[a]=r[a]|128;return i[this.blockLength-1]=r[this.blockLength-1],i.buffer}const t=ar(this.valueDec,7);if(t.byteLength===0)return this.error="Error during encoding SID value",ln;const n=new Uint8Array(t.byteLength);if(!e){const r=new Uint8Array(t),i=t.byteLength-1;for(let a=0;a<i;a++)n[a]=r[a]|128;n[i]=r[i]}return n}toString(){let e="";if(this.isHexOnly)e=be.ToHex(this.valueHexView);else if(this.isFirstSid){let t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}Up.NAME="sidBlock";class qA extends ps{constructor({value:e=ds,...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,n){let r=t;for(;n>0;){const i=new Up;if(r=i.fromBER(e,r,n),r===-1)return this.blockLength=0,this.error=i.error,r;this.value.length===0&&(i.isFirstSid=!0),this.blockLength+=i.blockLength,n-=i.blockLength,this.value.push(i)}return r}toBER(e){const t=[];for(let n=0;n<this.value.length;n++){const r=this.value[n].toBER(e);if(r.byteLength===0)return this.error=this.value[n].error,ln;t.push(r)}return ey(t)}fromString(e){this.value=[];let t=0,n=0,r="",i=!1;do if(n=e.indexOf(".",t),n===-1?r=e.substring(t):r=e.substring(t,n),t=n+1,i){const a=this.value[0];let o=0;switch(a.valueDec){case 0:break;case 1:o=40;break;case 2:o=80;break;default:this.value=[];return}const l=parseInt(r,10);if(isNaN(l))return;a.valueDec=l+o,i=!1}else{const a=new Up;if(r>Number.MAX_SAFE_INTEGER){Nm();const o=BigInt(r);a.valueBigInt=o}else if(a.valueDec=parseInt(r,10),isNaN(a.valueDec))return;this.value.length||(a.isFirstSid=!0,i=!0),this.value.push(a)}while(n!==-1)}toString(){let e="",t=!1;for(let n=0;n<this.value.length;n++){t=this.value[n].isHexOnly;let r=this.value[n].toString();n!==0&&(e=`${e}.`),t?(r=`{${r}}`,this.value[n].isFirstSid?e=`2.{${r} - 80}`:e+=r):e+=r}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}qA.NAME="ObjectIdentifierValueBlock";var GA;class he extends os{constructor(e={}){super(e,qA),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}GA=he;de.ObjectIdentifier=GA;he.NAME="OBJECT IDENTIFIER";class Mp extends cr(go){constructor({valueDec:e=0,...t}={}){super(t),this.valueDec=e}fromBER(e,t,n){if(n===0)return t;const r=ve.toUint8Array(e);if(!lr(this,r,t,n))return-1;const i=r.subarray(t,t+n);this.valueHexView=new Uint8Array(n);for(let o=0;o<n&&(this.valueHexView[o]=i[o]&127,this.blockLength++,!!(i[o]&128));o++);const a=new Uint8Array(this.blockLength);for(let o=0;o<this.blockLength;o++)a[o]=this.valueHexView[o];return this.valueHexView=a,i[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=uo(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const r=this.valueHexView,i=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength-1;a++)i[a]=r[a]|128;return i[this.blockLength-1]=r[this.blockLength-1],i.buffer}const t=ar(this.valueDec,7);if(t.byteLength===0)return this.error="Error during encoding SID value",ln;const n=new Uint8Array(t.byteLength);if(!e){const r=new Uint8Array(t),i=t.byteLength-1;for(let a=0;a<i;a++)n[a]=r[a]|128;n[i]=r[i]}return n.buffer}toString(){let e="";return this.isHexOnly?e=be.ToHex(this.valueHexView):e=this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}Mp.NAME="relativeSidBlock";class YA extends ps{constructor({value:e=ds,...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,n){let r=t;for(;n>0;){const i=new Mp;if(r=i.fromBER(e,r,n),r===-1)return this.blockLength=0,this.error=i.error,r;this.blockLength+=i.blockLength,n-=i.blockLength,this.value.push(i)}return r}toBER(e,t){const n=[];for(let r=0;r<this.value.length;r++){const i=this.value[r].toBER(e);if(i.byteLength===0)return this.error=this.value[r].error,ln;n.push(i)}return ey(n)}fromString(e){this.value=[];let t=0,n=0,r="";do{n=e.indexOf(".",t),n===-1?r=e.substring(t):r=e.substring(t,n),t=n+1;const i=new Mp;if(i.valueDec=parseInt(r,10),isNaN(i.valueDec))return!0;this.value.push(i)}while(n!==-1);return!0}toString(){let e="",t=!1;for(let n=0;n<this.value.length;n++){t=this.value[n].isHexOnly;let r=this.value[n].toString();n!==0&&(e=`${e}.`),t&&(r=`{${r}}`),e+=r}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}YA.NAME="RelativeObjectIdentifierValueBlock";var XA;class QA extends os{constructor(e={}){super(e,YA),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}XA=QA;de.RelativeObjectIdentifier=XA;QA.NAME="RelativeObjectIdentifier";var zA;class I extends V{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}zA=I;de.Sequence=zA;I.NAME="SEQUENCE";var ZA;let yt=class extends V{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};ZA=yt;de.Set=ZA;yt.NAME="SET";class ek extends cr(ps){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=ds}toJSON(){return{...super.toJSON(),value:this.value}}}ek.NAME="StringValueBlock";class tk extends ek{}tk.NAME="SimpleStringValueBlock";class Ts extends xA{constructor({...e}={}){super(e,tk)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,ve.toUint8Array(e))}fromString(e){const t=e.length,n=this.valueBlock.valueHexView=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e.charCodeAt(r);this.valueBlock.value=e}}Ts.NAME="SIMPLE STRING";class sk extends Ts{fromBuffer(e){this.valueBlock.valueHexView=ve.toUint8Array(e);try{this.valueBlock.value=be.ToUtf8String(e)}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`),this.valueBlock.value=be.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(be.FromUtf8String(e)),this.valueBlock.value=e}}sk.NAME="Utf8StringValueBlock";var nk;class ct extends sk{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}nk=ct;de.Utf8String=nk;ct.NAME="UTF8String";class rk extends Ts{fromBuffer(e){this.valueBlock.value=be.ToUtf16String(e),this.valueBlock.valueHexView=ve.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(be.FromUtf16String(e))}}rk.NAME="BmpStringValueBlock";var ik;class mf extends rk{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}ik=mf;de.BmpString=ik;mf.NAME="BMPString";class ak extends Ts{fromBuffer(e){const t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),n=new Uint8Array(t);for(let r=0;r<n.length;r+=4)n[r]=n[r+3],n[r+1]=n[r+2],n[r+2]=0,n[r+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){const t=e.length,n=this.valueBlock.valueHexView=new Uint8Array(t*4);for(let r=0;r<t;r++){const i=ar(e.charCodeAt(r),8),a=new Uint8Array(i);if(a.length>4)continue;const o=4-a.length;for(let l=a.length-1;l>=0;l--)n[r*4+l+o]=a[l]}this.valueBlock.value=e}}ak.NAME="UniversalStringValueBlock";var ok;class gf extends ak{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}ok=gf;de.UniversalString=ok;gf.NAME="UniversalString";var lk;class cc extends Ts{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}lk=cc;de.NumericString=lk;cc.NAME="NumericString";var ck;class en extends Ts{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}ck=en;de.PrintableString=ck;en.NAME="PrintableString";var uk;class pf extends Ts{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}uk=pf;de.TeletexString=uk;pf.NAME="TeletexString";var hk;class ny extends Ts{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}hk=ny;de.VideotexString=hk;ny.NAME="VideotexString";var fk;class ag extends Ts{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}fk=ag;de.IA5String=fk;ag.NAME="IA5String";var dk;class ry extends Ts{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}dk=ry;de.GraphicString=dk;ry.NAME="GraphicString";var mk;class og extends Ts{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}mk=og;de.VisibleString=mk;og.NAME="VisibleString";var gk;class iy extends Ts{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}gk=iy;de.GeneralString=gk;iy.NAME="GeneralString";var pk;class ay extends Ts{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}pk=ay;de.CharacterString=pk;ay.NAME="CharacterString";var wk;class Ic extends og{constructor({value:e,valueDate:t,...n}={}){if(super(n),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let r=0;r<e.length;r++)this.valueBlock.valueHexView[r]=e.charCodeAt(r)}t&&(this.fromDate(t),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,ve.toUint8Array(e)))}toBuffer(){const e=this.toString(),t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return t}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const n=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(n===null){this.error="Wrong input string for conversion";return}const r=parseInt(n[1],10);r>=50?this.year=1900+r:this.year=2e3+r,this.month=parseInt(n[2],10),this.day=parseInt(n[3],10),this.hour=parseInt(n[4],10),this.minute=parseInt(n[5],10),this.second=parseInt(n[6],10)}toString(e="iso"){if(e==="iso"){const t=new Array(7);return t[0]=Es(this.year<2e3?this.year-1900:this.year-2e3,2),t[1]=Es(this.month,2),t[2]=Es(this.day,2),t[3]=Es(this.hour,2),t[4]=Es(this.minute,2),t[5]=Es(this.second,2),t[6]="Z",t.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}wk=Ic;de.UTCTime=wk;Ic.NAME="UTCTime";var yk;class it extends Ic{constructor(e={}){var t;super(e),(t=this.millisecond)!==null&&t!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let t=!1,n="",r="",i=0,a,o=0,l=0;if(e[e.length-1]==="Z")n=e.substring(0,e.length-1),t=!0;else{const h=new Number(e[e.length-1]);if(isNaN(h.valueOf()))throw new Error("Wrong input string for conversion");n=e}if(t){if(n.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(n.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let h=1,f=n.indexOf("+"),m="";if(f===-1&&(f=n.indexOf("-"),h=-1),f!==-1){if(m=n.substring(f+1),n=n.substring(0,f),m.length!==2&&m.length!==4)throw new Error("Wrong input string for conversion");let S=parseInt(m.substring(0,2),10);if(isNaN(S.valueOf()))throw new Error("Wrong input string for conversion");if(o=h*S,m.length===4){if(S=parseInt(m.substring(2,4),10),isNaN(S.valueOf()))throw new Error("Wrong input string for conversion");l=h*S}}}let c=n.indexOf(".");if(c===-1&&(c=n.indexOf(",")),c!==-1){const h=new Number(`0${n.substring(c)}`);if(isNaN(h.valueOf()))throw new Error("Wrong input string for conversion");i=h.valueOf(),r=n.substring(0,c)}else r=n;switch(!0){case r.length===8:if(a=/(\d{4})(\d{2})(\d{2})/ig,c!==-1)throw new Error("Wrong input string for conversion");break;case r.length===10:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,c!==-1){let h=60*i;this.minute=Math.floor(h),h=60*(h-this.minute),this.second=Math.floor(h),h=1e3*(h-this.second),this.millisecond=Math.floor(h)}break;case r.length===12:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,c!==-1){let h=60*i;this.second=Math.floor(h),h=1e3*(h-this.second),this.millisecond=Math.floor(h)}break;case r.length===14:if(a=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,c!==-1){const h=1e3*i;this.millisecond=Math.floor(h)}break;default:throw new Error("Wrong input string for conversion")}const u=a.exec(r);if(u===null)throw new Error("Wrong input string for conversion");for(let h=1;h<u.length;h++)switch(h){case 1:this.year=parseInt(u[h],10);break;case 2:this.month=parseInt(u[h],10);break;case 3:this.day=parseInt(u[h],10);break;case 4:this.hour=parseInt(u[h],10)+o;break;case 5:this.minute=parseInt(u[h],10)+l;break;case 6:this.second=parseInt(u[h],10);break;default:throw new Error("Wrong input string for conversion")}if(t===!1){const h=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=h.getUTCFullYear(),this.month=h.getUTCMonth(),this.day=h.getUTCDay(),this.hour=h.getUTCHours(),this.minute=h.getUTCMinutes(),this.second=h.getUTCSeconds(),this.millisecond=h.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){const t=[];return t.push(Es(this.year,4)),t.push(Es(this.month,2)),t.push(Es(this.day,2)),t.push(Es(this.hour,2)),t.push(Es(this.minute,2)),t.push(Es(this.second,2)),this.millisecond!==0&&(t.push("."),t.push(Es(this.millisecond,3))),t.push("Z"),t.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}yk=it;de.GeneralizedTime=yk;it.NAME="GeneralizedTime";var vk;let bk=class extends ct{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}};vk=bk;de.DATE=vk;bk.NAME="DATE";var Sk;class Ak extends ct{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}Sk=Ak;de.TimeOfDay=Sk;Ak.NAME="TimeOfDay";var kk;class Ek extends ct{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}kk=Ek;de.DateTime=kk;Ek.NAME="DateTime";var Ck;class Nk extends ct{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}Ck=Nk;de.Duration=Ck;Nk.NAME="Duration";var Ik;class _k extends ct{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}Ik=_k;de.TIME=Ik;_k.NAME="TIME";class Ae{constructor({name:e=ds,optional:t=!1}={}){this.name=e,this.optional=t}}class at extends Ae{constructor({value:e=[],...t}={}){super(t),this.value=e}}class Ie extends Ae{constructor({value:e=new Ae,local:t=!1,...n}={}){super(n),this.value=e,this.local=t}}class Im{constructor({data:e=ig}={}){this.dataView=ve.toUint8Array(e)}get data(){return this.dataView.slice().buffer}set data(e){this.dataView=ve.toUint8Array(e)}fromBER(e,t,n){const r=t+n;return this.dataView=ve.toUint8Array(e).subarray(t,r),r}toBER(e){return this.dataView.slice().buffer}}function G(s,e,t){if(t instanceof at){for(let i=0;i<t.value.length;i++)if(G(s,e,t.value[i]).verified)return{verified:!0,result:s};{const i={verified:!1,result:{error:"Wrong values for Choice type"}};return t.hasOwnProperty(Cg)&&(i.name=t.name),i}}if(t instanceof Ae)return t.hasOwnProperty(Cg)&&(s[t.name]=e),{verified:!0,result:s};if(!(s instanceof Object))return{verified:!1,result:{error:"Wrong root object"}};if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(!(t instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(uR in t))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(mR in t.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(gR in t.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const n=t.idBlock.toBER(!1);if(n.byteLength===0)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(t.idBlock.fromBER(n,0,n.byteLength)===-1)return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(t.idBlock.hasOwnProperty(hR)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(t.idBlock.tagClass!==e.idBlock.tagClass)return{verified:!1,result:s};if(t.idBlock.hasOwnProperty(fR)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(t.idBlock.tagNumber!==e.idBlock.tagNumber)return{verified:!1,result:s};if(t.idBlock.hasOwnProperty(dR)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(t.idBlock.isConstructed!==e.idBlock.isConstructed)return{verified:!1,result:s};if(!(cR in t.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(t.idBlock.isHexOnly!==e.idBlock.isHexOnly)return{verified:!1,result:s};if(t.idBlock.isHexOnly){if(!(pb in t.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const i=t.idBlock.valueHexView,a=e.idBlock.valueHexView;if(i.length!==a.length)return{verified:!1,result:s};for(let o=0;o<i.length;o++)if(i[o]!==a[1])return{verified:!1,result:s}}if(t.name&&(t.name=t.name.replace(/^\s+|\s+$/g,ds),t.name&&(s[t.name]=e)),t instanceof de.Constructed){let i=0,a={verified:!1,result:{error:"Unknown error"}},o=t.valueBlock.value.length;if(o>0&&t.valueBlock.value[0]instanceof Ie&&(o=e.valueBlock.value.length),o===0)return{verified:!0,result:s};if(e.valueBlock.value.length===0&&t.valueBlock.value.length!==0){let l=!0;for(let c=0;c<t.valueBlock.value.length;c++)l=l&&(t.valueBlock.value[c].optional||!1);return l?{verified:!0,result:s}:(t.name&&(t.name=t.name.replace(/^\s+|\s+$/g,ds),t.name&&delete s[t.name]),s.error="Inconsistent object length",{verified:!1,result:s})}for(let l=0;l<o;l++)if(l-i>=e.valueBlock.value.length){if(t.valueBlock.value[l].optional===!1){const c={verified:!1,result:s};return s.error="Inconsistent length between ASN.1 data and schema",t.name&&(t.name=t.name.replace(/^\s+|\s+$/g,ds),t.name&&(delete s[t.name],c.name=t.name)),c}}else if(t.valueBlock.value[0]instanceof Ie){if(a=G(s,e.valueBlock.value[l],t.valueBlock.value[0].value),a.verified===!1)if(t.valueBlock.value[0].optional)i++;else return t.name&&(t.name=t.name.replace(/^\s+|\s+$/g,ds),t.name&&delete s[t.name]),a;if(Cg in t.valueBlock.value[0]&&t.valueBlock.value[0].name.length>0){let c={};pR in t.valueBlock.value[0]&&t.valueBlock.value[0].local?c=e:c=s,typeof c[t.valueBlock.value[0].name]>"u"&&(c[t.valueBlock.value[0].name]=[]),c[t.valueBlock.value[0].name].push(e.valueBlock.value[l])}}else if(a=G(s,e.valueBlock.value[l-i],t.valueBlock.value[l]),a.verified===!1)if(t.valueBlock.value[l].optional)i++;else return t.name&&(t.name=t.name.replace(/^\s+|\s+$/g,ds),t.name&&delete s[t.name]),a;if(a.verified===!1){const l={verified:!1,result:s};return t.name&&(t.name=t.name.replace(/^\s+|\s+$/g,ds),t.name&&(delete s[t.name],l.name=t.name)),l}return{verified:!0,result:s}}if(t.primitiveSchema&&pb in e.valueBlock){const i=Tf(e.valueBlock.valueHexView);if(i.offset===-1){const a={verified:!1,result:i.result};return t.name&&(t.name=t.name.replace(/^\s+|\s+$/g,ds),t.name&&(delete s[t.name],a.name=t.name)),a}return G(s,i.result,t.primitiveSchema)}return{verified:!0,result:s}}class ht{constructor(e={}){if("view"in e)this.fromUint8Array(e.view);else if("buffer"in e)this.fromArrayBuffer(e.buffer);else if("string"in e)this.fromString(e.string);else if("hexstring"in e)this.fromHexString(e.hexstring);else if("length"in e&&e.length>0){if(this.length=e.length,e.stub)for(let t=0;t<this._view.length;t++)this._view[t]=e.stub}else this.length=0}set buffer(e){this._buffer=e,this._view=new Uint8Array(this._buffer)}get buffer(){return this._buffer}set view(e){this._buffer=new ArrayBuffer(e.length),this._view=new Uint8Array(this._buffer),this._view.set(e)}get view(){return this._view}get length(){return this.view.byteLength}set length(e){this._buffer=new ArrayBuffer(e),this._view=new Uint8Array(this._buffer)}clear(){this._buffer=new ArrayBuffer(0),this._view=new Uint8Array(this._buffer)}fromArrayBuffer(e){this._buffer=e,this._view=new Uint8Array(this._buffer)}fromUint8Array(e){this.fromArrayBuffer(new Uint8Array(e).buffer)}fromString(e){const t=e.length;this.length=t;for(let n=0;n<t;n++)this.view[n]=e.charCodeAt(n)}toString(e=0,t=this.view.length-e){let n="";(e>=this.view.length||e<0)&&(e=0),(t>=this.view.length||t<0)&&(t=this.view.length-e);for(let r=e;r<e+t;r++)n+=String.fromCharCode(this.view[r]);return n}fromHexString(e){const t=e.length;this.buffer=new ArrayBuffer(t>>1),this.view=new Uint8Array(this.buffer);const n=new Map;n.set("0",0),n.set("1",1),n.set("2",2),n.set("3",3),n.set("4",4),n.set("5",5),n.set("6",6),n.set("7",7),n.set("8",8),n.set("9",9),n.set("A",10),n.set("a",10),n.set("B",11),n.set("b",11),n.set("C",12),n.set("c",12),n.set("D",13),n.set("d",13),n.set("E",14),n.set("e",14),n.set("F",15),n.set("f",15);let r=0,i=0;for(let a=0;a<t;a++)a%2?(i|=n.get(e.charAt(a)),this.view[r]=i,r++):i=n.get(e.charAt(a))<<4}toHexString(e=0,t=this.view.length-e){let n="";(e>=this.view.length||e<0)&&(e=0),(t>=this.view.length||t<0)&&(t=this.view.length-e);for(let r=e;r<e+t;r++){const i=this.view[r].toString(16).toUpperCase();n=n+(i.length==1?"0":"")+i}return n}copy(e=0,t=this.length-e){if(!e&&!this.length)return new ht;if(e<0||e>this.length-1)throw new Error(`Wrong start position: ${e}`);return new ht({buffer:this._buffer.slice(e,e+t)})}slice(e=0,t=this.length){if(!e&&!this.length)return new ht;if(e<0||e>this.length-1)throw new Error(`Wrong start position: ${e}`);return new ht({buffer:this._buffer.slice(e,t)})}realloc(e){const t=new ArrayBuffer(e),n=new Uint8Array(t);e>this._view.length?n.set(this._view):n.set(new Uint8Array(this._buffer,0,e)),this._buffer=t,this._view=new Uint8Array(this._buffer)}append(e){const t=this.length,n=e.length,r=e._view.subarray();this.realloc(t+n),this._view.set(r,t)}insert(e,t=0,n=this.length-t){return t>this.length-1?!1:(n>this.length-t&&(n=this.length-t),n>e.length&&(n=e.length),n==e.length?this._view.set(e._view,t):this._view.set(e._view.subarray(0,n),t),!0)}isEqual(e){if(this.length!=e.length)return!1;for(let t=0;t<e.length;t++)if(this.view[t]!=e.view[t])return!1;return!0}isEqualView(e){if(e.length!=this.view.length)return!1;for(let t=0;t<e.length;t++)if(this.view[t]!=e[t])return!1;return!0}findPattern(e,t,n,r){const{start:i,length:a,backward:o}=this.prepareFindParameters(t,n,r),l=e.length;if(l>a)return-1;const c=[];for(let u=0;u<l;u++)c.push(e.view[u]);for(let u=0;u<=a-l;u++){let h=!0;const f=o?i-l-u:i+u;for(let m=0;m<l;m++)if(this.view[m+f]!=c[m]){h=!1;break}if(h)return o?i-l-u:i+l+u}return-1}findFirstIn(e,t,n,r){const{start:i,length:a,backward:o}=this.prepareFindParameters(t,n,r),l={id:-1,position:o?0:i+a,length:0};for(let c=0;c<e.length;c++){const u=this.findPattern(e[c],i,a,o);if(u!=-1){let h=!1;const f=e[c].length;o?u-f>=l.position-l.length&&(h=!0):u-f<=l.position-l.length&&(h=!0),h&&(l.position=u,l.id=c,l.length=f)}}return l}findAllIn(e,t,n){let{start:r,length:i}=this.prepareFindParameters(t,n);const a=[];let o={id:-1,position:r};do{const l=o.position;if(o=this.findFirstIn(e,o.position,i),o.id==-1)break;i-=o.position-l,a.push({id:o.id,position:o.position})}while(!0);return a}findAllPatternIn(e,t,n){const{start:r,length:i}=this.prepareFindParameters(t,n),a=[],o=e.length;if(o>i)return-1;const l=Array.from(e.view);for(let c=0;c<=i-o;c++){let u=!0;const h=r+c;for(let f=0;f<o;f++)if(this.view[f+h]!=l[f]){u=!1;break}u&&(a.push(r+o+c),c+=o-1)}return a}findFirstNotIn(e,t,n,r){let{start:i,length:a,backward:o}=this.prepareFindParameters(t,n,r);const l={left:{id:-1,position:i},right:{id:-1,position:0},value:new ht};let c=a;for(;c>0;){if(l.right=this.findFirstIn(e,o?i-a+c:i+a-c,c,o),l.right.id==-1){a=c,o?i-=a:i=l.left.position,l.value=new ht({buffer:this._buffer.slice(i,i+a)});break}if(l.right.position!=(o?l.left.position-e[l.right.id].length:l.left.position+e[l.right.id].length)){o?(i=l.right.position+e[l.right.id].length,a=l.left.position-l.right.position-e[l.right.id].length):(i=l.left.position,a=l.right.position-l.left.position-e[l.right.id].length),l.value=new ht({buffer:this._buffer.slice(i,i+a)});break}l.left=l.right,c-=e[l.right.id].length}if(o){const u=l.right;l.right=l.left,l.left=u}return l}findAllNotIn(e,t,n){let{start:r,length:i}=this.prepareFindParameters(t,n);const a=[];let o={left:{id:-1,position:r},right:{id:-1,position:r},value:new ht};do{const l=o.right.position;o=this.findFirstNotIn(e,o.right.position,i),i-=o.right.position-l,a.push({left:{id:o.left.id,position:o.left.position},right:{id:o.right.id,position:o.right.position},value:o.value})}while(o.right.id!=-1);return a}findFirstSequence(e,t,n,r){let{start:i,length:a,backward:o}=this.prepareFindParameters(t,n,r);const l=this.skipNotPatterns(e,i,a,o);if(l==-1)return{position:-1,value:new ht};const c=this.skipPatterns(e,l,a-(o?i-l:l-i),o);o?(i=c,a=l-c):(i=l,a=c-l);const u=new ht({buffer:this._buffer.slice(i,i+a)});return{position:c,value:u}}findAllSequences(e,t,n){let{start:r,length:i}=this.prepareFindParameters(t,n);const a=[];let o={position:r,value:new ht};do{const l=o.position;o=this.findFirstSequence(e,o.position,i),o.position!=-1&&(i-=o.position-l,a.push({position:o.position,value:o.value}))}while(o.position!=-1);return a}findPairedPatterns(e,t,n,r){const i=[];if(e.isEqual(t))return i;const{start:a,length:o}=this.prepareFindParameters(n,r);let l=0;const c=this.findAllPatternIn(e,a,o);if(!Array.isArray(c)||c.length==0)return i;const u=this.findAllPatternIn(t,a,o);if(!Array.isArray(u)||u.length==0)return i;for(;l<c.length&&u.length!=0;){if(c[0]==u[0]){i.push({left:c[0],right:u[0]}),c.splice(0,1),u.splice(0,1);continue}if(c[l]>u[0])break;for(;c[l]<u[0]&&(l++,!(l>=c.length)););i.push({left:c[l-1],right:u[0]}),c.splice(l-1,1),u.splice(0,1),l=0}return i.sort((h,f)=>h.left-f.left),i}findPairedArrays(e,t,n,r){const{start:i,length:a}=this.prepareFindParameters(n,r),o=[];let l=0;const c=this.findAllIn(e,i,a);if(c.length==0)return o;const u=this.findAllIn(t,i,a);if(u.length==0)return o;for(;l<c.length&&u.length!=0;){if(c[0].position==u[0].position){o.push({left:c[0],right:u[0]}),c.splice(0,1),u.splice(0,1);continue}if(c[l].position>u[0].position)break;for(;c[l].position<u[0].position&&(l++,!(l>=c.length)););o.push({left:c[l-1],right:u[0]}),c.splice(l-1,1),u.splice(0,1),l=0}return o.sort((h,f)=>h.left.position-f.left.position),o}replacePattern(e,t,n,r,i=null){let a=[],o;const l={status:-1,searchPatternPositions:[],replacePatternPositions:[]},{start:c,length:u}=this.prepareFindParameters(n,r);if(i==null){if(a=this.findAllIn([e],c,u),a.length==0)return l}else a=i;l.searchPatternPositions.push(...Array.from(a,S=>S.position));const h=e.length-t.length,f=new ArrayBuffer(this.view.length-a.length*h),m=new Uint8Array(f);for(m.set(new Uint8Array(this.buffer,0,c)),o=0;o<a.length;o++){const S=o==0?c:a[o-1].position;m.set(new Uint8Array(this.buffer,S,a[o].position-e.length-S),S-o*h),m.set(t.view,a[o].position-e.length-o*h),l.replacePatternPositions.push(a[o].position-e.length-o*h)}return o--,m.set(new Uint8Array(this.buffer,a[o].position,this.length-a[o].position),a[o].position-e.length+t.length-o*h),this.buffer=f,this.view=new Uint8Array(this.buffer),l.status=1,l}skipPatterns(e,t,n,r){const{start:i,length:a,backward:o}=this.prepareFindParameters(t,n,r);let l=i;for(let c=0;c<e.length;c++){const u=e[c].length,h=o?l-u:l;let f=!0;for(let m=0;m<u;m++)if(this.view[m+h]!=e[c].view[m]){f=!1;break}if(f){if(c=-1,o){if(l-=u,l<=0)return l}else if(l+=u,l>=i+a)return l}}return l}skipNotPatterns(e,t,n,r){const{start:i,length:a,backward:o}=this.prepareFindParameters(t,n,r);let l=-1;for(let c=0;c<a;c++){for(let u=0;u<e.length;u++){const h=e[u].length,f=o?i-c-h:i+c;let m=!0;for(let S=0;S<h;S++)if(this.view[S+f]!=e[u].view[S]){m=!1;break}if(m){l=o?i-c:i+c;break}}if(l!=-1)break}return l}prepareFindParameters(e=null,t=null,n=!1){return e===null&&(e=n?this.length:0),e>this.length&&(e=this.length),n?(t===null&&(t=e),t>e&&(t=e)):(t===null&&(t=this.length-e),t>this.length-e&&(t=this.length-e)),{start:e,length:t,backward:n}}}const SR=16777216;class wi{constructor(e={}){this._stream=new ht,this._length=0,this._start=0,this.backward=!1,this.appendBlock=0,this.prevLength=0,this.prevStart=0,"view"in e?this.stream=new ht({view:e.view}):"buffer"in e?this.stream=new ht({buffer:e.buffer}):"string"in e?this.stream=new ht({string:e.string}):"hexstring"in e?this.stream=new ht({hexstring:e.hexstring}):"stream"in e?this.stream=e.stream.slice():this.stream=new ht,"backward"in e&&e.backward&&(this.backward=e.backward,this._start=this.stream.length),"length"in e&&e.length>0&&(this._length=e.length),"start"in e&&e.start&&e.start>0&&(this._start=e.start),"appendBlock"in e&&e.appendBlock&&e.appendBlock>0&&(this.appendBlock=e.appendBlock)}set stream(e){this._stream=e,this.prevLength=this._length,this._length=e.length,this.prevStart=this._start,this._start=0}get stream(){return this._stream}set length(e){this.prevLength=this._length,this._length=e}get length(){return this.appendBlock?this.start:this._length}set start(e){e>this.stream.length||(this.prevStart=this._start,this.prevLength=this._length,this._length-=this.backward?this._start-e:e-this._start,this._start=e)}get start(){return this._start}get buffer(){return this._stream.buffer.slice(0,this._length)}resetPosition(){this._start=this.prevStart,this._length=this.prevLength}findPattern(e,t=null){(t==null||t>this.length)&&(t=this.length);const n=this.stream.findPattern(e,this.start,this.length,this.backward);if(n==-1)return n;if(this.backward){if(n<this.start-e.length-t)return-1}else if(n>this.start+e.length+t)return-1;return this.start=n,n}findFirstIn(e,t=null){(t==null||t>this.length)&&(t=this.length);const n=this.stream.findFirstIn(e,this.start,this.length,this.backward);if(n.id==-1)return n;if(this.backward){if(n.position<this.start-e[n.id].length-t)return{id:-1,position:this.backward?0:this.start+this.length}}else if(n.position>this.start+e[n.id].length+t)return{id:-1,position:this.backward?0:this.start+this.length};return this.start=n.position,n}findAllIn(e){const t=this.backward?this.start-this.length:this.start;return this.stream.findAllIn(e,t,this.length)}findFirstNotIn(e,t=null){(t==null||t>this._length)&&(t=this._length);const n=this._stream.findFirstNotIn(e,this._start,this._length,this.backward);if(n.left.id==-1&&n.right.id==-1)return n;if(this.backward){if(n.right.id!=-1&&n.right.position<this._start-e[n.right.id].length-t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new ht}}else if(n.left.id!=-1&&n.left.position>this._start+e[n.left.id].length+t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new ht};return this.backward?n.left.id==-1?this.start=0:this.start=n.left.position:n.right.id==-1?this.start=this._start+this._length:this.start=n.right.position,n}findAllNotIn(e){const t=this.backward?this._start-this._length:this._start;return this._stream.findAllNotIn(e,t,this._length)}findFirstSequence(e,t=null,n=null){(t==null||t>this._length)&&(t=this._length),(n==null||n>t)&&(n=t);const r=this._stream.findFirstSequence(e,this._start,t,this.backward);if(r.value.length==0)return r;if(this.backward){if(r.position<this._start-r.value.length-n)return{position:-1,value:new ht}}else if(r.position>this._start+r.value.length+n)return{position:-1,value:new ht};return this.start=r.position,r}findAllSequences(e){const t=this.backward?this.start-this.length:this.start;return this.stream.findAllSequences(e,t,this.length)}findPairedPatterns(e,t,n=null){(n==null||n>this.length)&&(n=this.length);const r=this.backward?this.start-this.length:this.start,i=this.stream.findPairedPatterns(e,t,r,this.length);if(i.length){if(this.backward){if(i[0].right<this.start-t.length-n)return[]}else if(i[0].left>this.start+e.length+n)return[]}return i}findPairedArrays(e,t,n=null){(n==null||n>this.length)&&(n=this.length);const r=this.backward?this.start-this.length:this.start,i=this.stream.findPairedArrays(e,t,r,this.length);if(i.length){if(this.backward){if(i[0].right.position<this.start-t[i[0].right.id].length-n)return[]}else if(i[0].left.position>this.start+e[i[0].left.id].length+n)return[]}return i}replacePattern(e,t){const n=this.backward?this.start-this.length:this.start;return this.stream.replacePattern(e,t,n,this.length)}skipPatterns(e){const t=this.stream.skipPatterns(e,this.start,this.length,this.backward);return this.start=t,t}skipNotPatterns(e){const t=this.stream.skipNotPatterns(e,this.start,this.length,this.backward);return t==-1?-1:(this.start=t,t)}append(e){this.beforeAppend(e.length),this._stream.view.set(e.view,this._start),this._length+=e.length*2,this.start=this._start+e.length,this.prevLength-=e.length*2}appendView(e){this.beforeAppend(e.length),this._stream.view.set(e,this._start),this._length+=e.length*2,this.start=this._start+e.length,this.prevLength-=e.length*2}appendChar(e){this.beforeAppend(1),this._stream.view[this._start]=e,this._length+=2,this.start=this._start+1,this.prevLength-=2}appendUint16(e){this.beforeAppend(2);const t=new Uint16Array([e]),n=new Uint8Array(t.buffer);this.stream.view[this._start]=n[1],this._stream.view[this._start+1]=n[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendUint24(e){this.beforeAppend(3);const t=new Uint32Array([e]),n=new Uint8Array(t.buffer);this._stream.view[this._start]=n[2],this._stream.view[this._start+1]=n[1],this._stream.view[this._start+2]=n[0],this._length+=6,this.start=this._start+3,this.prevLength-=6}appendUint32(e){this.beforeAppend(4);const t=new Uint32Array([e]),n=new Uint8Array(t.buffer);this._stream.view[this._start]=n[3],this._stream.view[this._start+1]=n[2],this._stream.view[this._start+2]=n[1],this._stream.view[this._start+3]=n[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}appendInt16(e){this.beforeAppend(2);const t=new Int16Array([e]),n=new Uint8Array(t.buffer);this._stream.view[this._start]=n[1],this._stream.view[this._start+1]=n[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendInt32(e){this.beforeAppend(4);const t=new Int32Array([e]),n=new Uint8Array(t.buffer);this._stream.view[this._start]=n[3],this._stream.view[this._start+1]=n[2],this._stream.view[this._start+2]=n[1],this._stream.view[this._start+3]=n[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}getBlock(e,t=!0){if(this._length<=0)return new Uint8Array(0);this._length<e&&(e=this._length);let n;if(this.backward){const r=this._stream.view.subarray(this._length-e,this._length);n=new Uint8Array(e);for(let i=0;i<e;i++)n[e-1-i]=r[i]}else n=this._stream.view.subarray(this._start,this._start+e);return t&&(this.start+=this.backward?-1*e:e),n}getUint16(e=!0){const t=this.getBlock(2,e);return t.length<2?0:t[0]<<8|t[1]}getInt16(e=!0){const t=this.getUint16(e),n=32768;return t&n?-(n-(t^n)):t}getUint24(e=!0){const t=this.getBlock(4,e);return t.length<3?0:t[0]<<16|t[1]<<8|t[2]}getUint32(e=!0){const t=this.getBlock(4,e);return t.length<4?0:t[0]*SR+(t[1]<<16)+(t[2]<<8)+t[3]}getInt32(e=!0){const t=this.getUint32(e),n=2147483648;return t&n?-(n-(t^n)):t}beforeAppend(e){this._start+e>this._stream.length&&(e>this.appendBlock&&(this.appendBlock=e+wi.APPEND_BLOCK),this._stream.realloc(this._stream.length+this.appendBlock))}}wi.APPEND_BLOCK=1e3;/*!
 * Copyright (c) 2014, GlobalSign
 * Copyright (c) 2015-2019, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the {organization} nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */const _t=new ArrayBuffer(0),g="";class qe extends TypeError{constructor(){super(...arguments),this.name=qe.NAME}static isType(e,t){if(typeof t=="string"){if(t==="Array"&&Array.isArray(e))return!0;if(t==="ArrayBuffer"&&e instanceof ArrayBuffer)return!0;if(t==="ArrayBufferView"&&ArrayBuffer.isView(e))return!0;if(typeof e===t)return!0}else if(e instanceof t)return!0;return!1}static assert(e,t,...n){for(const i of n)if(this.isType(e,i))return;const r=n.map(i=>i instanceof Function&&"name"in i?i.name:`${i}`);throw new qe(`Parameter '${t}' is not of type ${r.length>1?`(${r.join(" or ")})`:r[0]}`)}}qe.NAME="ArgumentError";class Pe extends TypeError{constructor(e,t=null,n){super(),this.name=Pe.NAME,this.field=e,t&&(this.target=t),n?this.message=n:this.message=`Absent mandatory parameter '${e}' ${t?` in '${t}'`:g}`}static assert(...e){let t=null,n,r;typeof e[0]=="string"?(t=e[0],n=e[1],r=e.slice(2)):(n=e[0],r=e.slice(1)),qe.assert(n,"parameters","object");for(const i of r){const a=n[i];if(a==null)throw new Pe(i,t)}}static assertEmpty(e,t,n){if(e==null)throw new Pe(t,n)}}Pe.NAME="ParameterError";class j extends Error{static assertSchema(e,t){if(!e.verified)throw new Error(`Object's schema was not verified against input data for ${t}`)}static assert(e,t){if(e.offset===-1)throw new j(`Error during parsing of ASN.1 data. Data is not correct for '${t}'.`)}constructor(e){super(e),this.name="AsnError"}}class Y{static blockName(){return this.CLASS_NAME}static fromBER(e){const t=bt(e);j.assert(t,this.name);try{return new this({schema:t.result})}catch{throw new j(`Cannot create '${this.CLASS_NAME}' from ASN.1 object`)}}static defaultValues(e){throw new Error(`Invalid member name for ${this.CLASS_NAME} class: ${e}`)}static schema(e={}){throw new Error(`Method '${this.CLASS_NAME}.schema' should be overridden`)}get className(){return this.constructor.CLASS_NAME}toString(e="hex"){let t;try{t=this.toSchema()}catch{t=this.toSchema(!0)}return be.ToString(t.toBER(),e)}}Y.CLASS_NAME="PkiObject";function ri(s){let e=!1,t=g;const n=s.trim();for(let r=0;r<n.length;r++)n.charCodeAt(r)===32?e===!1&&(e=!0):(e&&(t+=" ",e=!1),t+=n[r]);return t.toLowerCase()}const Uc="type",Ng="value";class kt extends Y{constructor(e={}){super(),this.type=d(e,Uc,kt.defaultValues(Uc)),this.value=d(e,Ng,kt.defaultValues(Ng)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Uc:return g;case Ng:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new he({name:t.type||g}),new Ae({name:t.value||g})]})}fromSchema(e){X(e,[Uc,"typeValue"]);const t=G(e,e,kt.schema({names:{type:Uc,value:"typeValue"}}));j.assertSchema(t,this.className),this.type=t.result.type.valueBlock.toString(),this.value=t.result.typeValue}toSchema(){return new I({value:[new he({value:this.type}),this.value]})}toJSON(){const e={type:this.type};return Object.keys(this.value).length!==0?e.value=this.value.toJSON():e.value=this.value,e}isEqual(e){const t=[ct.blockName(),mf.blockName(),gf.blockName(),cc.blockName(),en.blockName(),pf.blockName(),ny.blockName(),ag.blockName(),ry.blockName(),og.blockName(),iy.blockName(),ay.blockName()];if(e instanceof ArrayBuffer)return ve.isEqual(this.value.valueBeforeDecodeView,e);if(e.constructor.blockName()===kt.blockName()){if(this.type!==e.type)return!1;const n=[!1,!1],r=this.value.constructor.blockName();for(const a of t)r===a&&(n[0]=!0),e.value.constructor.blockName()===a&&(n[1]=!0);if(n[0]!==n[1])return!1;if(n[0]&&n[1]){const a=ri(this.value.valueBlock.value),o=ri(e.value.valueBlock.value);if(a.localeCompare(o)!==0)return!1}else if(!ve.isEqual(this.value.valueBeforeDecodeView,e.value.valueBeforeDecodeView))return!1;return!0}return!1}}kt.CLASS_NAME="AttributeTypeAndValue";const Li="typesAndValues",Gf="valueBeforeDecode",yb="RDN";class Ge extends Y{constructor(e={}){super(),this.typesAndValues=d(e,Li,Ge.defaultValues(Li)),this.valueBeforeDecode=d(e,Gf,Ge.defaultValues(Gf)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Li:return[];case Gf:return _t;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Li:return t.length===0;case Gf:return t.byteLength===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new Ie({name:t.repeatedSequence||g,value:new yt({value:[new Ie({name:t.repeatedSet||g,value:kt.schema(t.typeAndValue||{})})]})})]})}fromSchema(e){X(e,[yb,Li]);const t=G(e,e,Ge.schema({names:{blockName:yb,repeatedSet:Li}}));j.assertSchema(t,this.className),Li in t.result&&(this.typesAndValues=Array.from(t.result.typesAndValues,n=>new kt({schema:n}))),this.valueBeforeDecode=t.result.RDN.valueBeforeDecodeView.slice().buffer}toSchema(){if(this.valueBeforeDecode.byteLength===0)return new I({value:[new yt({value:Array.from(this.typesAndValues,t=>t.toSchema())})]});const e=bt(this.valueBeforeDecode);if(j.assert(e,"RelativeDistinguishedNames"),!(e.result instanceof I))throw new Error("ASN.1 result should be SEQUENCE");return e.result}toJSON(){return{typesAndValues:Array.from(this.typesAndValues,e=>e.toJSON())}}isEqual(e){if(e instanceof Ge){if(this.typesAndValues.length!==e.typesAndValues.length)return!1;for(const[t,n]of this.typesAndValues.entries())if(n.isEqual(e.typesAndValues[t])===!1)return!1;return!0}return e instanceof ArrayBuffer?Cc(this.valueBeforeDecode,e):!1}}Ge.CLASS_NAME="RelativeDistinguishedNames";const Zc="type",eu="value";function AR(s={},e=!1){const t=d(s,"names",{});return new I({optional:e,value:[new V({optional:!0,idBlock:{tagClass:2,tagNumber:1},name:t.country_name||g,value:[new at({value:[new cc,new en]})]}),new V({optional:!0,idBlock:{tagClass:2,tagNumber:2},name:t.administration_domain_name||g,value:[new at({value:[new cc,new en]})]}),new Se({optional:!0,idBlock:{tagClass:3,tagNumber:0},name:t.network_address||g,isHexOnly:!0}),new Se({optional:!0,idBlock:{tagClass:3,tagNumber:1},name:t.terminal_identifier||g,isHexOnly:!0}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:2},name:t.private_domain_name||g,value:[new at({value:[new cc,new en]})]}),new Se({optional:!0,idBlock:{tagClass:3,tagNumber:3},name:t.organization_name||g,isHexOnly:!0}),new Se({optional:!0,name:t.numeric_user_identifier||g,idBlock:{tagClass:3,tagNumber:4},isHexOnly:!0}),new V({optional:!0,name:t.personal_name||g,idBlock:{tagClass:3,tagNumber:5},value:[new Se({idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new Se({optional:!0,idBlock:{tagClass:3,tagNumber:1},isHexOnly:!0}),new Se({optional:!0,idBlock:{tagClass:3,tagNumber:2},isHexOnly:!0}),new Se({optional:!0,idBlock:{tagClass:3,tagNumber:3},isHexOnly:!0})]}),new V({optional:!0,name:t.organizational_unit_names||g,idBlock:{tagClass:3,tagNumber:6},value:[new Ie({value:new en})]})]})}function kR(s=!1){return new I({optional:s,value:[new en,new en]})}function ER(s=!1){return new yt({optional:s,value:[new Se({optional:!0,idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ae]})]})}class Ve extends Y{constructor(e={}){super(),this.type=d(e,Zc,Ve.defaultValues(Zc)),this.value=d(e,eu,Ve.defaultValues(eu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Zc:return 9;case eu:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Zc:return t===Ve.defaultValues(e);case eu:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new at({value:[new V({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||g,value:[new he,new V({idBlock:{tagClass:3,tagNumber:0},value:[new Ae]})]}),new Se({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:1}}),new Se({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:2}}),new V({idBlock:{tagClass:3,tagNumber:3},name:t.blockName||g,value:[AR(t.builtInStandardAttributes||{},!1),kR(!0),ER(!0)]}),new V({idBlock:{tagClass:3,tagNumber:4},name:t.blockName||g,value:[Ge.schema(t.directoryName||{})]}),new V({idBlock:{tagClass:3,tagNumber:5},name:t.blockName||g,value:[new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new at({value:[new pf,new en,new gf,new ct,new mf]})]}),new V({idBlock:{tagClass:3,tagNumber:1},value:[new at({value:[new pf,new en,new gf,new ct,new mf]})]})]}),new Se({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:6}}),new Se({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:7}}),new Se({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:8}})]})}fromSchema(e){X(e,["blockName","otherName","rfc822Name","dNSName","x400Address","directoryName","ediPartyName","uniformResourceIdentifier","iPAddress","registeredID"]);const t=G(e,e,Ve.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));switch(j.assertSchema(t,this.className),this.type=t.result.blockName.idBlock.tagNumber,this.type){case 0:this.value=t.result.blockName;break;case 1:case 2:case 6:{const n=t.result.blockName;n.idBlock.tagClass=1,n.idBlock.tagNumber=22;const r=n.toBER(!1),i=bt(r);j.assert(i,"GeneralName value"),this.value=i.result.valueBlock.value}break;case 3:this.value=t.result.blockName;break;case 4:this.value=new Ge({schema:t.result.directoryName});break;case 5:this.value=t.result.ediPartyName;break;case 7:this.value=new z({valueHex:t.result.blockName.valueBlock.valueHex});break;case 8:{const n=t.result.blockName;n.idBlock.tagClass=1,n.idBlock.tagNumber=6;const r=n.toBER(!1),i=bt(r);j.assert(i,"GeneralName registeredID"),this.value=i.result.valueBlock.toString()}break}}toSchema(){switch(this.type){case 0:case 3:case 5:return new V({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:{const e=new ag({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}case 4:return new V({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:{const e=this.value;return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}case 8:{const e=new he({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}default:return Ve.schema()}}toJSON(){const e={type:this.type,value:g};if(typeof this.value=="string")e.value=this.value;else try{e.value=this.value.toJSON()}catch{}return e}}Ve.CLASS_NAME="GeneralName";const tu="accessMethod",su="accessLocation",CR=[tu,su];class yi extends Y{constructor(e={}){super(),this.accessMethod=d(e,tu,yi.defaultValues(tu)),this.accessLocation=d(e,su,yi.defaultValues(su)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case tu:return g;case su:return new Ve;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new he({name:t.accessMethod||g}),Ve.schema(t.accessLocation||{})]})}fromSchema(e){X(e,CR);const t=G(e,e,yi.schema({names:{accessMethod:tu,accessLocation:{names:{blockName:su}}}}));j.assertSchema(t,this.className),this.accessMethod=t.result.accessMethod.valueBlock.toString(),this.accessLocation=new Ve({schema:t.result.accessLocation})}toSchema(){return new I({value:[new he({value:this.accessMethod}),this.accessLocation.toSchema()]})}toJSON(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}yi.CLASS_NAME="AccessDescription";const wr="seconds",yr="millis",vr="micros";class Cs extends Y{constructor(e={}){super(),wr in e&&(this.seconds=d(e,wr,Cs.defaultValues(wr))),yr in e&&(this.millis=d(e,yr,Cs.defaultValues(yr))),vr in e&&(this.micros=d(e,vr,Cs.defaultValues(vr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wr:case yr:case vr:return 0;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wr:case yr:case vr:return t===Cs.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,optional:!0,value:[new U({optional:!0,name:t.seconds||g}),new Se({name:t.millis||g,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new Se({name:t.micros||g,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){X(e,[wr,yr,vr]);const t=G(e,e,Cs.schema({names:{seconds:wr,millis:yr,micros:vr}}));if(j.assertSchema(t,this.className),"seconds"in t.result&&(this.seconds=t.result.seconds.valueBlock.valueDec),"millis"in t.result){const n=new U({valueHex:t.result.millis.valueBlock.valueHex});this.millis=n.valueBlock.valueDec}if("micros"in t.result){const n=new U({valueHex:t.result.micros.valueBlock.valueHex});this.micros=n.valueBlock.valueDec}}toSchema(){const e=[];if(this.seconds!==void 0&&e.push(new U({value:this.seconds})),this.millis!==void 0){const t=new U({value:this.millis});e.push(new Se({idBlock:{tagClass:3,tagNumber:0},valueHex:t.valueBlock.valueHexView}))}if(this.micros!==void 0){const t=new U({value:this.micros});e.push(new Se({idBlock:{tagClass:3,tagNumber:1},valueHex:t.valueBlock.valueHexView}))}return new I({value:e})}toJSON(){const e={};return this.seconds!==void 0&&(e.seconds=this.seconds),this.millis!==void 0&&(e.millis=this.millis),this.micros!==void 0&&(e.micros=this.micros),e}}Cs.CLASS_NAME="Accuracy";const Yf="algorithmId",Mc="algorithmParams",Bk="algorithm",Hp="params",NR=[Bk,Hp];class $ extends Y{constructor(e={}){super(),this.algorithmId=d(e,Yf,$.defaultValues(Yf)),Mc in e&&(this.algorithmParams=d(e,Mc,$.defaultValues(Mc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Yf:return g;case Mc:return new Ae;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Yf:return t===g;case Mc:return t instanceof Ae;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,optional:t.optional||!1,value:[new he({name:t.algorithmIdentifier||g}),new Ae({name:t.algorithmParams||g,optional:!0})]})}fromSchema(e){X(e,NR);const t=G(e,e,$.schema({names:{algorithmIdentifier:Bk,algorithmParams:Hp}}));j.assertSchema(t,this.className),this.algorithmId=t.result.algorithm.valueBlock.toString(),Hp in t.result&&(this.algorithmParams=t.result.params)}toSchema(){const e=[];return e.push(new he({value:this.algorithmId})),this.algorithmParams&&!(this.algorithmParams instanceof Ae)&&e.push(this.algorithmParams),new I({value:e})}toJSON(){const e={algorithmId:this.algorithmId};return this.algorithmParams&&!(this.algorithmParams instanceof Ae)&&(e.algorithmParams=this.algorithmParams.toJSON()),e}isEqual(e){return!(e instanceof $)||this.algorithmId!==e.algorithmId?!1:this.algorithmParams?e.algorithmParams?JSON.stringify(this.algorithmParams)===JSON.stringify(e.algorithmParams):!1:!e.algorithmParams}}$.CLASS_NAME="AlgorithmIdentifier";const Oo="altNames",IR=[Oo];class _c extends Y{constructor(e={}){super(),this.altNames=d(e,Oo,_c.defaultValues(Oo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Oo:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new Ie({name:t.altNames||g,value:Ve.schema()})]})}fromSchema(e){X(e,IR);const t=G(e,e,_c.schema({names:{altNames:Oo}}));j.assertSchema(t,this.className),Oo in t.result&&(this.altNames=Array.from(t.result.altNames,n=>new Ve({schema:n})))}toSchema(){return new I({value:Array.from(this.altNames,e=>e.toSchema())})}toJSON(){return{altNames:Array.from(this.altNames,e=>e.toJSON())}}}_c.CLASS_NAME="AltName";const Vo="type",Po="values",_R=[Vo,Po];class et extends Y{constructor(e={}){super(),this.type=d(e,Vo,et.defaultValues(Vo)),this.values=d(e,Po,et.defaultValues(Po)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Vo:return g;case Po:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Vo:return t===g;case Po:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new he({name:t.type||g}),new yt({name:t.setName||g,value:[new Ie({name:t.values||g,value:new Ae})]})]})}fromSchema(e){X(e,_R);const t=G(e,e,et.schema({names:{type:Vo,values:Po}}));j.assertSchema(t,this.className),this.type=t.result.type.valueBlock.toString(),this.values=t.result.values}toSchema(){return new I({value:[new he({value:this.type}),new yt({value:this.values})]})}toJSON(){return{type:this.type,values:Array.from(this.values,e=>e.toJSON())}}}et.CLASS_NAME="Attribute";const nu="notBeforeTime",ru="notAfterTime",BR=[nu,ru];class sn extends Y{constructor(e={}){super(),this.notBeforeTime=d(e,nu,sn.defaultValues(nu)),this.notAfterTime=d(e,ru,sn.defaultValues(ru)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case nu:case ru:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new it({name:t.notBeforeTime||g}),new it({name:t.notAfterTime||g})]})}fromSchema(e){X(e,BR);const t=G(e,e,sn.schema({names:{notBeforeTime:nu,notAfterTime:ru}}));j.assertSchema(t,this.className),this.notBeforeTime=t.result.notBeforeTime.toDate(),this.notAfterTime=t.result.notAfterTime.toDate()}toSchema(){return new I({value:[new it({valueDate:this.notBeforeTime}),new it({valueDate:this.notAfterTime})]})}toJSON(){return{notBeforeTime:this.notBeforeTime,notAfterTime:this.notAfterTime}}}sn.CLASS_NAME="AttCertValidityPeriod";const Hc="names",vb="generalNames";class vt extends Y{constructor(e={}){super(),this.names=d(e,Hc,vt.defaultValues(Hc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"names":return[];default:return super.defaultValues(e)}}static schema(e={},t=!1){const n=d(e,Hc,{});return new I({optional:t,name:n.blockName||g,value:[new Ie({name:n.generalNames||g,value:Ve.schema()})]})}fromSchema(e){X(e,[Hc,vb]);const t=G(e,e,vt.schema({names:{blockName:Hc,generalNames:vb}}));j.assertSchema(t,this.className),this.names=Array.from(t.result.generalNames,n=>new Ve({schema:n}))}toSchema(){return new I({value:Array.from(this.names,e=>e.toSchema())})}toJSON(){return{names:Array.from(this.names,e=>e.toJSON())}}}vt.CLASS_NAME="GeneralNames";const xR="2.5.29.9",TR="2.5.29.14",RR="2.5.29.15",OR="2.5.29.16",xk="2.5.29.17",Tk="2.5.29.18",oy="2.5.29.19",VR="2.5.29.20",PR="2.5.29.27",LR="2.5.29.21",DR="2.5.29.24",Rk="2.5.29.28",Ok="2.5.29.29",Vk="2.5.29.30",Pk="2.5.29.31",ly="2.5.29.46",Lk="2.5.29.32",Os="2.5.29.32.0",UR="1.3.6.1.4.1.311.21.10",Dk="2.5.29.33",cy="2.5.29.35",Uk="2.5.29.36",MR="2.5.29.37",HR="2.5.29.54",uy="1.3.6.1.5.5.7.1.1",$R="1.3.6.1.5.5.7.1.11",FR="1.3.6.1.4.1.11129.2.4.2",KR="1.3.6.1.4.1.311.21.7",jR="1.3.6.1.4.1.311.21.1",JR="1.3.6.1.5.5.7.1.3",hy="1.2.840.113549.1.7.1",Mk="1.2.840.113549.1.7.2",Hk="1.2.840.113549.1.7.3",$k="1.2.840.113549.1.7.6",WR="1.2.840.113549.1.9.16.1.4",bb="1.2.840.113549.1.9.22.1",qR="1.2.840.113549.1.9.22.2",Sb="1.2.840.113549.1.9.22.3",Ab="1.2.840.113549.1.9.23.1",GR="1.3.6.1.5.5.7",YR=`${GR}.48`,Id=`${YR}.1.1`,Fi="keyIdentifier",Ki="authorityCertIssuer",ji="authorityCertSerialNumber",XR=[Fi,Ki,ji];class jn extends Y{constructor(e={}){super(),Fi in e&&(this.keyIdentifier=d(e,Fi,jn.defaultValues(Fi))),Ki in e&&(this.authorityCertIssuer=d(e,Ki,jn.defaultValues(Ki))),ji in e&&(this.authorityCertSerialNumber=d(e,ji,jn.defaultValues(ji))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Fi:return new z;case Ki:return[];case ji:return new U;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new Se({name:t.keyIdentifier||g,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ie({name:t.authorityCertIssuer||g,value:Ve.schema()})]}),new Se({name:t.authorityCertSerialNumber||g,optional:!0,idBlock:{tagClass:3,tagNumber:2}})]})}fromSchema(e){X(e,XR);const t=G(e,e,jn.schema({names:{keyIdentifier:Fi,authorityCertIssuer:Ki,authorityCertSerialNumber:ji}}));j.assertSchema(t,this.className),Fi in t.result&&(this.keyIdentifier=new z({valueHex:t.result.keyIdentifier.valueBlock.valueHex})),Ki in t.result&&(this.authorityCertIssuer=Array.from(t.result.authorityCertIssuer,n=>new Ve({schema:n}))),ji in t.result&&(this.authorityCertSerialNumber=new U({valueHex:t.result.authorityCertSerialNumber.valueBlock.valueHex}))}toSchema(){const e=[];return this.keyIdentifier&&e.push(new Se({idBlock:{tagClass:3,tagNumber:0},valueHex:this.keyIdentifier.valueBlock.valueHexView})),this.authorityCertIssuer&&e.push(new V({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.authorityCertIssuer,t=>t.toSchema())})),this.authorityCertSerialNumber&&e.push(new Se({idBlock:{tagClass:3,tagNumber:2},valueHex:this.authorityCertSerialNumber.valueBlock.valueHexView})),new I({value:e})}toJSON(){const e={};return this.keyIdentifier&&(e.keyIdentifier=this.keyIdentifier.toJSON()),this.authorityCertIssuer&&(e.authorityCertIssuer=Array.from(this.authorityCertIssuer,t=>t.toJSON())),this.authorityCertSerialNumber&&(e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()),e}}jn.CLASS_NAME="AuthorityKeyIdentifier";const Di="pathLenConstraint",Ui="cA";class vi extends Y{constructor(e={}){super(),this.cA=d(e,Ui,!1),Di in e&&(this.pathLenConstraint=d(e,Di,0)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ui:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new Cn({optional:!0,name:t.cA||g}),new U({optional:!0,name:t.pathLenConstraint||g})]})}fromSchema(e){X(e,[Ui,Di]);const t=G(e,e,vi.schema({names:{cA:Ui,pathLenConstraint:Di}}));j.assertSchema(t,this.className),Ui in t.result&&(this.cA=t.result.cA.valueBlock.value),Di in t.result&&(t.result.pathLenConstraint.valueBlock.isHexOnly?this.pathLenConstraint=t.result.pathLenConstraint:this.pathLenConstraint=t.result.pathLenConstraint.valueBlock.valueDec)}toSchema(){const e=[];return this.cA!==vi.defaultValues(Ui)&&e.push(new Cn({value:this.cA})),Di in this&&(this.pathLenConstraint instanceof U?e.push(this.pathLenConstraint):e.push(new U({value:this.pathLenConstraint}))),new I({value:e})}toJSON(){const e={};return this.cA!==vi.defaultValues(Ui)&&(e.cA=this.cA),Di in this&&(this.pathLenConstraint instanceof U?e.pathLenConstraint=this.pathLenConstraint.toJSON():e.pathLenConstraint=this.pathLenConstraint),e}}vi.CLASS_NAME="BasicConstraints";const Ig="certificateIndex",_g="keyIndex";class wf extends Y{constructor(e={}){super(),this.certificateIndex=d(e,Ig,wf.defaultValues(Ig)),this.keyIndex=d(e,_g,wf.defaultValues(_g)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ig:case _g:return 0;default:return super.defaultValues(e)}}static schema(){return new U}fromSchema(e){if(e.constructor.blockName()!==U.blockName())throw new Error("Object's schema was not verified against input data for CAVersion");let t=e.valueBlock.valueHex.slice(0);const n=new Uint8Array(t);switch(!0){case t.byteLength<4:{const h=new ArrayBuffer(4);new Uint8Array(h).set(n,4-t.byteLength),t=h.slice(0)}break;case t.byteLength>4:{const h=new ArrayBuffer(4);new Uint8Array(h).set(n.slice(0,4)),t=h.slice(0)}break}const r=t.slice(0,2),i=new Uint8Array(r);let a=i[0];i[0]=i[1],i[1]=a;const o=new Uint16Array(r);this.keyIndex=o[0];const l=t.slice(2),c=new Uint8Array(l);a=c[0],c[0]=c[1],c[1]=a;const u=new Uint16Array(l);this.certificateIndex=u[0]}toSchema(){const e=new ArrayBuffer(2),t=new Uint16Array(e);t[0]=this.certificateIndex;const n=new Uint8Array(e);let r=n[0];n[0]=n[1],n[1]=r;const i=new ArrayBuffer(2),a=new Uint16Array(i);a[0]=this.keyIndex;const o=new Uint8Array(i);return r=o[0],o[0]=o[1],o[1]=r,new U({valueHex:lc(i,e)})}toJSON(){return{certificateIndex:this.certificateIndex,keyIndex:this.keyIndex}}}wf.CLASS_NAME="CAVersion";const iu="policyQualifierId",au="qualifier",QR=[iu,au];class eo extends Y{constructor(e={}){super(),this.policyQualifierId=d(e,iu,eo.defaultValues(iu)),this.qualifier=d(e,au,eo.defaultValues(au)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case iu:return g;case au:return new Ae;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new he({name:t.policyQualifierId||g}),new Ae({name:t.qualifier||g})]})}fromSchema(e){X(e,QR);const t=G(e,e,eo.schema({names:{policyQualifierId:iu,qualifier:au}}));j.assertSchema(t,this.className),this.policyQualifierId=t.result.policyQualifierId.valueBlock.toString(),this.qualifier=t.result.qualifier}toSchema(){return new I({value:[new he({value:this.policyQualifierId}),this.qualifier]})}toJSON(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}eo.CLASS_NAME="PolicyQualifierInfo";const ou="policyIdentifier",Ji="policyQualifiers",zR=[ou,Ji];class to extends Y{constructor(e={}){super(),this.policyIdentifier=d(e,ou,to.defaultValues(ou)),Ji in e&&(this.policyQualifiers=d(e,Ji,to.defaultValues(Ji))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ou:return g;case Ji:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new he({name:t.policyIdentifier||g}),new I({optional:!0,value:[new Ie({name:t.policyQualifiers||g,value:eo.schema()})]})]})}fromSchema(e){X(e,zR);const t=G(e,e,to.schema({names:{policyIdentifier:ou,policyQualifiers:Ji}}));j.assertSchema(t,this.className),this.policyIdentifier=t.result.policyIdentifier.valueBlock.toString(),Ji in t.result&&(this.policyQualifiers=Array.from(t.result.policyQualifiers,n=>new eo({schema:n})))}toSchema(){const e=[];return e.push(new he({value:this.policyIdentifier})),this.policyQualifiers&&e.push(new I({value:Array.from(this.policyQualifiers,t=>t.toSchema())})),new I({value:e})}toJSON(){const e={policyIdentifier:this.policyIdentifier};return this.policyQualifiers&&(e.policyQualifiers=Array.from(this.policyQualifiers,t=>t.toJSON())),e}}to.CLASS_NAME="PolicyInformation";const lu="certificatePolicies",ZR=[lu];class Bc extends Y{constructor(e={}){super(),this.certificatePolicies=d(e,lu,Bc.defaultValues(lu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case lu:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new Ie({name:t.certificatePolicies||g,value:to.schema()})]})}fromSchema(e){X(e,ZR);const t=G(e,e,Bc.schema({names:{certificatePolicies:lu}}));j.assertSchema(t,this.className),this.certificatePolicies=Array.from(t.result.certificatePolicies,n=>new to({schema:n}))}toSchema(){return new I({value:Array.from(this.certificatePolicies,e=>e.toSchema())})}toJSON(){return{certificatePolicies:Array.from(this.certificatePolicies,e=>e.toJSON())}}}Bc.CLASS_NAME="CertificatePolicies";const cu="templateID",Bn="templateMajorVersion",xn="templateMinorVersion",eO=[cu,Bn,xn];class Zl extends Y{constructor(e={}){super(),this.templateID=d(e,cu,Zl.defaultValues(cu)),Bn in e&&(this.templateMajorVersion=d(e,Bn,Zl.defaultValues(Bn))),xn in e&&(this.templateMinorVersion=d(e,xn,Zl.defaultValues(xn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case cu:return g;case Bn:case xn:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new he({name:t.templateID||g}),new U({name:t.templateMajorVersion||g,optional:!0}),new U({name:t.templateMinorVersion||g,optional:!0})]})}fromSchema(e){X(e,eO);const t=G(e,e,Zl.schema({names:{templateID:cu,templateMajorVersion:Bn,templateMinorVersion:xn}}));j.assertSchema(t,this.className),this.templateID=t.result.templateID.valueBlock.toString(),Bn in t.result&&(this.templateMajorVersion=t.result.templateMajorVersion.valueBlock.valueDec),xn in t.result&&(this.templateMinorVersion=t.result.templateMinorVersion.valueBlock.valueDec)}toSchema(){const e=[];return e.push(new he({value:this.templateID})),Bn in this&&e.push(new U({value:this.templateMajorVersion})),xn in this&&e.push(new U({value:this.templateMinorVersion})),new I({value:e})}toJSON(){const e={templateID:this.templateID};return Bn in this&&(e.templateMajorVersion=this.templateMajorVersion),xn in this&&(e.templateMinorVersion=this.templateMinorVersion),e}}const Wi="distributionPoint",Fk="distributionPointNames",qi="reasons",Gi="cRLIssuer",Kk="cRLIssuerNames",tO=[Wi,Fk,qi,Gi,Kk];class Jn extends Y{constructor(e={}){super(),Wi in e&&(this.distributionPoint=d(e,Wi,Jn.defaultValues(Wi))),qi in e&&(this.reasons=d(e,qi,Jn.defaultValues(qi))),Gi in e&&(this.cRLIssuer=d(e,Gi,Jn.defaultValues(Gi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Wi:return[];case qi:return new Oe;case Gi:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new at({value:[new V({name:t.distributionPoint||g,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ie({name:t.distributionPointNames||g,value:Ve.schema()})]}),new V({name:t.distributionPoint||g,optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Ge.schema().valueBlock.value})]})]}),new Se({name:t.reasons||g,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new V({name:t.cRLIssuer||g,optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[new Ie({name:t.cRLIssuerNames||g,value:Ve.schema()})]})]})}fromSchema(e){X(e,tO);const t=G(e,e,Jn.schema({names:{distributionPoint:Wi,distributionPointNames:Fk,reasons:qi,cRLIssuer:Gi,cRLIssuerNames:Kk}}));j.assertSchema(t,this.className),Wi in t.result&&(t.result.distributionPoint.idBlock.tagNumber===0&&(this.distributionPoint=Array.from(t.result.distributionPointNames,n=>new Ve({schema:n}))),t.result.distributionPoint.idBlock.tagNumber===1&&(this.distributionPoint=new Ge({schema:new I({value:t.result.distributionPoint.valueBlock.value})}))),qi in t.result&&(this.reasons=new Oe({valueHex:t.result.reasons.valueBlock.valueHex})),Gi in t.result&&(this.cRLIssuer=Array.from(t.result.cRLIssuerNames,n=>new Ve({schema:n})))}toSchema(){const e=[];if(this.distributionPoint){let t;this.distributionPoint instanceof Array?t=new V({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,n=>n.toSchema())}):t=new V({idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]}),e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}return this.reasons&&e.push(new Se({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHexView})),this.cRLIssuer&&e.push(new V({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,t=>t.toSchema())})),new I({value:e})}toJSON(){const e={};return this.distributionPoint&&(this.distributionPoint instanceof Array?e.distributionPoint=Array.from(this.distributionPoint,t=>t.toJSON()):e.distributionPoint=this.distributionPoint.toJSON()),this.reasons&&(e.reasons=this.reasons.toJSON()),this.cRLIssuer&&(e.cRLIssuer=Array.from(this.cRLIssuer,t=>t.toJSON())),e}}Jn.CLASS_NAME="DistributionPoint";const uu="distributionPoints",sO=[uu];class ho extends Y{constructor(e={}){super(),this.distributionPoints=d(e,uu,ho.defaultValues(uu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case uu:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new Ie({name:t.distributionPoints||g,value:Jn.schema()})]})}fromSchema(e){X(e,sO);const t=G(e,e,ho.schema({names:{distributionPoints:uu}}));j.assertSchema(t,this.className),this.distributionPoints=Array.from(t.result.distributionPoints,n=>new Jn({schema:n}))}toSchema(){return new I({value:Array.from(this.distributionPoints,e=>e.toSchema())})}toJSON(){return{distributionPoints:Array.from(this.distributionPoints,e=>e.toJSON())}}}ho.CLASS_NAME="CRLDistributionPoints";const hu="keyPurposes",nO=[hu];class xc extends Y{constructor(e={}){super(),this.keyPurposes=d(e,hu,xc.defaultValues(hu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case hu:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new Ie({name:t.keyPurposes||g,value:new he})]})}fromSchema(e){X(e,nO);const t=G(e,e,xc.schema({names:{keyPurposes:hu}}));j.assertSchema(t,this.className),this.keyPurposes=Array.from(t.result.keyPurposes,n=>n.valueBlock.toString())}toSchema(){return new I({value:Array.from(this.keyPurposes,e=>new he({value:e}))})}toJSON(){return{keyPurposes:Array.from(this.keyPurposes)}}}xc.CLASS_NAME="ExtKeyUsage";const $c="accessDescriptions";class fo extends Y{constructor(e={}){super(),this.accessDescriptions=d(e,$c,fo.defaultValues($c)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case $c:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new Ie({name:t.accessDescriptions||g,value:yi.schema()})]})}fromSchema(e){X(e,[$c]);const t=G(e,e,fo.schema({names:{accessDescriptions:$c}}));j.assertSchema(t,this.className),this.accessDescriptions=Array.from(t.result.accessDescriptions,n=>new yi({schema:n}))}toSchema(){return new I({value:Array.from(this.accessDescriptions,e=>e.toSchema())})}toJSON(){return{accessDescriptions:Array.from(this.accessDescriptions,e=>e.toJSON())}}}fo.CLASS_NAME="InfoAccess";const Yi="distributionPoint",jk="distributionPointNames",br="onlyContainsUserCerts",Sr="onlyContainsCACerts",Ar="onlySomeReasons",kr="indirectCRL",Er="onlyContainsAttributeCerts",rO=[Yi,jk,br,Sr,Ar,kr,Er];class Pt extends Y{constructor(e={}){super(),Yi in e&&(this.distributionPoint=d(e,Yi,Pt.defaultValues(Yi))),this.onlyContainsUserCerts=d(e,br,Pt.defaultValues(br)),this.onlyContainsCACerts=d(e,Sr,Pt.defaultValues(Sr)),Ar in e&&(this.onlySomeReasons=d(e,Ar,Pt.defaultValues(Ar))),this.indirectCRL=d(e,kr,Pt.defaultValues(kr)),this.onlyContainsAttributeCerts=d(e,Er,Pt.defaultValues(Er)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Yi:return[];case br:return!1;case Sr:return!1;case Ar:return 0;case kr:return!1;case Er:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new at({value:[new V({name:t.distributionPoint||g,idBlock:{tagClass:3,tagNumber:0},value:[new Ie({name:t.distributionPointNames||g,value:Ve.schema()})]}),new V({name:t.distributionPoint||g,idBlock:{tagClass:3,tagNumber:1},value:Ge.schema().valueBlock.value})]})]}),new Se({name:t.onlyContainsUserCerts||g,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new Se({name:t.onlyContainsCACerts||g,optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new Se({name:t.onlySomeReasons||g,optional:!0,idBlock:{tagClass:3,tagNumber:3}}),new Se({name:t.indirectCRL||g,optional:!0,idBlock:{tagClass:3,tagNumber:4}}),new Se({name:t.onlyContainsAttributeCerts||g,optional:!0,idBlock:{tagClass:3,tagNumber:5}})]})}fromSchema(e){X(e,rO);const t=G(e,e,Pt.schema({names:{distributionPoint:Yi,distributionPointNames:jk,onlyContainsUserCerts:br,onlyContainsCACerts:Sr,onlySomeReasons:Ar,indirectCRL:kr,onlyContainsAttributeCerts:Er}}));if(j.assertSchema(t,this.className),Yi in t.result)switch(!0){case t.result.distributionPoint.idBlock.tagNumber===0:this.distributionPoint=Array.from(t.result.distributionPointNames,n=>new Ve({schema:n}));break;case t.result.distributionPoint.idBlock.tagNumber===1:this.distributionPoint=new Ge({schema:new I({value:t.result.distributionPoint.valueBlock.value})});break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}if(br in t.result){const n=new Uint8Array(t.result.onlyContainsUserCerts.valueBlock.valueHex);this.onlyContainsUserCerts=n[0]!==0}if(Sr in t.result){const n=new Uint8Array(t.result.onlyContainsCACerts.valueBlock.valueHex);this.onlyContainsCACerts=n[0]!==0}if(Ar in t.result){const n=new Uint8Array(t.result.onlySomeReasons.valueBlock.valueHex);this.onlySomeReasons=n[0]}if(kr in t.result){const n=new Uint8Array(t.result.indirectCRL.valueBlock.valueHex);this.indirectCRL=n[0]!==0}if(Er in t.result){const n=new Uint8Array(t.result.onlyContainsAttributeCerts.valueBlock.valueHex);this.onlyContainsAttributeCerts=n[0]!==0}}toSchema(){const e=[];if(this.distributionPoint){let t;this.distributionPoint instanceof Array?t=new V({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,n=>n.toSchema())}):(t=this.distributionPoint.toSchema(),t.idBlock.tagClass=3,t.idBlock.tagNumber=1),e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(this.onlyContainsUserCerts!==Pt.defaultValues(br)&&e.push(new Se({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsCACerts!==Pt.defaultValues(Sr)&&e.push(new Se({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer})),this.onlySomeReasons!==void 0){const t=new ArrayBuffer(1),n=new Uint8Array(t);n[0]=this.onlySomeReasons,e.push(new Se({idBlock:{tagClass:3,tagNumber:3},valueHex:t}))}return this.indirectCRL!==Pt.defaultValues(kr)&&e.push(new Se({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsAttributeCerts!==Pt.defaultValues(Er)&&e.push(new Se({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer})),new I({value:e})}toJSON(){const e={};return this.distributionPoint&&(this.distributionPoint instanceof Array?e.distributionPoint=Array.from(this.distributionPoint,t=>t.toJSON()):e.distributionPoint=this.distributionPoint.toJSON()),this.onlyContainsUserCerts!==Pt.defaultValues(br)&&(e.onlyContainsUserCerts=this.onlyContainsUserCerts),this.onlyContainsCACerts!==Pt.defaultValues(Sr)&&(e.onlyContainsCACerts=this.onlyContainsCACerts),Ar in this&&(e.onlySomeReasons=this.onlySomeReasons),this.indirectCRL!==Pt.defaultValues(kr)&&(e.indirectCRL=this.indirectCRL),this.onlyContainsAttributeCerts!==Pt.defaultValues(Er)&&(e.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts),e}}Pt.CLASS_NAME="IssuingDistributionPoint";const fu="base",Lo="minimum",Cr="maximum",iO=[fu,Lo,Cr];class vn extends Y{constructor(e={}){super(),this.base=d(e,fu,vn.defaultValues(fu)),this.minimum=d(e,Lo,vn.defaultValues(Lo)),Cr in e&&(this.maximum=d(e,Cr,vn.defaultValues(Cr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case fu:return new Ve;case Lo:return 0;case Cr:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[Ve.schema(t.base||{}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new U({name:t.minimum||g})]}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new U({name:t.maximum||g})]})]})}fromSchema(e){X(e,iO);const t=G(e,e,vn.schema({names:{base:{names:{blockName:fu}},minimum:Lo,maximum:Cr}}));j.assertSchema(t,this.className),this.base=new Ve({schema:t.result.base}),Lo in t.result&&(t.result.minimum.valueBlock.isHexOnly?this.minimum=t.result.minimum:this.minimum=t.result.minimum.valueBlock.valueDec),Cr in t.result&&(t.result.maximum.valueBlock.isHexOnly?this.maximum=t.result.maximum:this.maximum=t.result.maximum.valueBlock.valueDec)}toSchema(){const e=[];if(e.push(this.base.toSchema()),this.minimum!==0){let t=0;this.minimum instanceof U?t=this.minimum:t=new U({value:this.minimum}),e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(Cr in this){let t=0;this.maximum instanceof U?t=this.maximum:t=new U({value:this.maximum}),e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[t]}))}return new I({value:e})}toJSON(){const e={base:this.base.toJSON()};return this.minimum!==0&&(typeof this.minimum=="number"?e.minimum=this.minimum:e.minimum=this.minimum.toJSON()),this.maximum!==void 0&&(typeof this.maximum=="number"?e.maximum=this.maximum:e.maximum=this.maximum.toJSON()),e}}vn.CLASS_NAME="GeneralSubtree";const Xi="permittedSubtrees",Qi="excludedSubtrees",aO=[Xi,Qi];class uc extends Y{constructor(e={}){super(),Xi in e&&(this.permittedSubtrees=d(e,Xi,uc.defaultValues(Xi))),Qi in e&&(this.excludedSubtrees=d(e,Qi,uc.defaultValues(Qi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Xi:case Qi:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ie({name:t.permittedSubtrees||g,value:vn.schema()})]}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ie({name:t.excludedSubtrees||g,value:vn.schema()})]})]})}fromSchema(e){X(e,aO);const t=G(e,e,uc.schema({names:{permittedSubtrees:Xi,excludedSubtrees:Qi}}));j.assertSchema(t,this.className),Xi in t.result&&(this.permittedSubtrees=Array.from(t.result.permittedSubtrees,n=>new vn({schema:n}))),Qi in t.result&&(this.excludedSubtrees=Array.from(t.result.excludedSubtrees,n=>new vn({schema:n})))}toSchema(){const e=[];return this.permittedSubtrees&&e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.permittedSubtrees,t=>t.toSchema())})),this.excludedSubtrees&&e.push(new V({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.excludedSubtrees,t=>t.toSchema())})),new I({value:e})}toJSON(){const e={};return this.permittedSubtrees&&(e.permittedSubtrees=Array.from(this.permittedSubtrees,t=>t.toJSON())),this.excludedSubtrees&&(e.excludedSubtrees=Array.from(this.excludedSubtrees,t=>t.toJSON())),e}}uc.CLASS_NAME="NameConstraints";const Tn="requireExplicitPolicy",Rn="inhibitPolicyMapping",oO=[Tn,Rn];class hc extends Y{constructor(e={}){super(),Tn in e&&(this.requireExplicitPolicy=d(e,Tn,hc.defaultValues(Tn))),Rn in e&&(this.inhibitPolicyMapping=d(e,Rn,hc.defaultValues(Rn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Tn:return 0;case Rn:return 0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new Se({name:t.requireExplicitPolicy||g,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new Se({name:t.inhibitPolicyMapping||g,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){X(e,oO);const t=G(e,e,hc.schema({names:{requireExplicitPolicy:Tn,inhibitPolicyMapping:Rn}}));if(j.assertSchema(t,this.className),Tn in t.result){const n=t.result.requireExplicitPolicy;n.idBlock.tagClass=1,n.idBlock.tagNumber=2;const r=n.toBER(!1),i=bt(r);j.assert(i,"Integer"),this.requireExplicitPolicy=i.result.valueBlock.valueDec}if(Rn in t.result){const n=t.result.inhibitPolicyMapping;n.idBlock.tagClass=1,n.idBlock.tagNumber=2;const r=n.toBER(!1),i=bt(r);j.assert(i,"Integer"),this.inhibitPolicyMapping=i.result.valueBlock.valueDec}}toSchema(){const e=[];if(Tn in this){const t=new U({value:this.requireExplicitPolicy});t.idBlock.tagClass=3,t.idBlock.tagNumber=0,e.push(t)}if(Rn in this){const t=new U({value:this.inhibitPolicyMapping});t.idBlock.tagClass=3,t.idBlock.tagNumber=1,e.push(t)}return new I({value:e})}toJSON(){const e={};return Tn in this&&(e.requireExplicitPolicy=this.requireExplicitPolicy),Rn in this&&(e.inhibitPolicyMapping=this.inhibitPolicyMapping),e}}hc.CLASS_NAME="PolicyConstraints";const du="issuerDomainPolicy",mu="subjectDomainPolicy",lO=[du,mu];class so extends Y{constructor(e={}){super(),this.issuerDomainPolicy=d(e,du,so.defaultValues(du)),this.subjectDomainPolicy=d(e,mu,so.defaultValues(mu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case du:return g;case mu:return g;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new he({name:t.issuerDomainPolicy||g}),new he({name:t.subjectDomainPolicy||g})]})}fromSchema(e){X(e,lO);const t=G(e,e,so.schema({names:{issuerDomainPolicy:du,subjectDomainPolicy:mu}}));j.assertSchema(t,this.className),this.issuerDomainPolicy=t.result.issuerDomainPolicy.valueBlock.toString(),this.subjectDomainPolicy=t.result.subjectDomainPolicy.valueBlock.toString()}toSchema(){return new I({value:[new he({value:this.issuerDomainPolicy}),new he({value:this.subjectDomainPolicy})]})}toJSON(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}so.CLASS_NAME="PolicyMapping";const gu="mappings",cO=[gu];class yf extends Y{constructor(e={}){super(),this.mappings=d(e,gu,yf.defaultValues(gu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case gu:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new Ie({name:t.mappings||g,value:so.schema()})]})}fromSchema(e){X(e,cO);const t=G(e,e,yf.schema({names:{mappings:gu}}));j.assertSchema(t,this.className),this.mappings=Array.from(t.result.mappings,n=>new so({schema:n}))}toSchema(){return new I({value:Array.from(this.mappings,e=>e.toSchema())})}toJSON(){return{mappings:Array.from(this.mappings,e=>e.toJSON())}}}yf.CLASS_NAME="PolicyMappings";const Nr="notBefore",Ir="notAfter",uO=[Nr,Ir];class fc extends Y{constructor(e={}){super(),Nr in e&&(this.notBefore=d(e,Nr,fc.defaultValues(Nr))),Ir in e&&(this.notAfter=d(e,Ir,fc.defaultValues(Ir))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Nr:return new Date;case Ir:return new Date;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new Se({name:t.notBefore||g,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new Se({name:t.notAfter||g,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){X(e,uO);const t=G(e,e,fc.schema({names:{notBefore:Nr,notAfter:Ir}}));if(j.assertSchema(t,this.className),Nr in t.result){const n=new it;n.fromBuffer(t.result.notBefore.valueBlock.valueHex),this.notBefore=n.toDate()}if(Ir in t.result){const n=new it({valueHex:t.result.notAfter.valueBlock.valueHex});n.fromBuffer(t.result.notAfter.valueBlock.valueHex),this.notAfter=n.toDate()}}toSchema(){const e=[];return Nr in this&&e.push(new Se({idBlock:{tagClass:3,tagNumber:0},valueHex:new it({valueDate:this.notBefore}).valueBlock.valueHexView})),Ir in this&&e.push(new Se({idBlock:{tagClass:3,tagNumber:1},valueHex:new it({valueDate:this.notAfter}).valueBlock.valueHexView})),new I({value:e})}toJSON(){const e={};return this.notBefore&&(e.notBefore=this.notBefore),this.notAfter&&(e.notAfter=this.notAfter),e}}fc.CLASS_NAME="PrivateKeyUsagePeriod";const Do="id",On="type",Uo="values",hO=[Do,On],fO=[Uo];class no extends Y{constructor(e={}){super(),this.id=d(e,Do,no.defaultValues(Do)),On in e&&(this.type=d(e,On,no.defaultValues(On))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Do:return g;case On:return new mt;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Do:return t===g;case On:return t instanceof mt;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new he({name:t.id||g}),new Ae({name:t.type||g,optional:!0})]})}fromSchema(e){X(e,hO);const t=G(e,e,no.schema({names:{id:Do,type:On}}));j.assertSchema(t,this.className),this.id=t.result.id.valueBlock.toString(),On in t.result&&(this.type=t.result.type)}toSchema(){const e=[new he({value:this.id})];return On in this&&e.push(this.type),new I({value:e})}toJSON(){const e={id:this.id};return this.type&&(e.type=this.type.toJSON()),e}}no.CLASS_NAME="QCStatement";class vf extends Y{constructor(e={}){super(),this.values=d(e,Uo,vf.defaultValues(Uo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Uo:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Uo:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new Ie({name:t.values||g,value:no.schema(t.value||{})})]})}fromSchema(e){X(e,fO);const t=G(e,e,vf.schema({names:{values:Uo}}));j.assertSchema(t,this.className),this.values=Array.from(t.result.values,n=>new no({schema:n}))}toSchema(){return new I({value:Array.from(this.values,e=>e.toSchema())})}toJSON(){return{values:Array.from(this.values,e=>e.toJSON())}}}vf.CLASS_NAME="QCStatements";var zi;class bi{static register(e,t,n){this.namedCurves[e.toLowerCase()]=this.namedCurves[t]={name:e,id:t,size:n}}static find(e){return this.namedCurves[e.toLowerCase()]||null}}zi=bi;bi.namedCurves={};zi.register("P-256","1.2.840.10045.3.1.7",32),zi.register("P-384","1.3.132.0.34",48),zi.register("P-521","1.3.132.0.35",66),zi.register("brainpoolP256r1","1.3.36.3.3.2.8.1.1.7",32),zi.register("brainpoolP384r1","1.3.36.3.3.2.8.1.1.11",48),zi.register("brainpoolP512r1","1.3.36.3.3.2.8.1.1.13",64);const Xf="x",Qf="y",zf="namedCurve";class rs extends Y{constructor(e={}){super(),this.x=d(e,Xf,rs.defaultValues(Xf)),this.y=d(e,Qf,rs.defaultValues(Qf)),this.namedCurve=d(e,zf,rs.defaultValues(zf)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Xf:case Qf:return _t;case zf:return g;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Xf:case Qf:return t instanceof ArrayBuffer&&Cc(t,rs.defaultValues(e));case zf:return typeof t=="string"&&t===rs.defaultValues(e);default:return super.defaultValues(e)}}static schema(){return new Im}fromSchema(e){const t=ve.toUint8Array(e);if(t[0]!==4)throw new Error("Object's schema was not verified against input data for ECPublicKey");const n=bi.find(this.namedCurve);if(!n)throw new Error(`Incorrect curve OID: ${this.namedCurve}`);const r=n.size;if(t.byteLength!==r*2+1)throw new Error("Object's schema was not verified against input data for ECPublicKey");this.namedCurve=n.name,this.x=t.slice(1,r+1).buffer,this.y=t.slice(1+r,r*2+1).buffer}toSchema(){return new Im({data:lc(new Uint8Array([4]).buffer,this.x,this.y)})}toJSON(){const e=bi.find(this.namedCurve);return{crv:e?e.name:this.namedCurve,x:Dp(Cm(this.x),!0,!0,!1),y:Dp(Cm(this.y),!0,!0,!1)}}fromJSON(e){Pe.assert("json",e,"crv","x","y");let t=0;const n=bi.find(e.crv);n&&(this.namedCurve=n.id,t=n.size);const r=Nc(ff(e.x,!0));if(r.byteLength<t){this.x=new ArrayBuffer(t);const a=new Uint8Array(this.x),o=new Uint8Array(r);a.set(o,1)}else this.x=r.slice(0,t);const i=Nc(ff(e.y,!0));if(i.byteLength<t){this.y=new ArrayBuffer(t);const a=new Uint8Array(this.y),o=new Uint8Array(i);a.set(o,1)}else this.y=i.slice(0,t)}}rs.CLASS_NAME="ECPublicKey";const pu="modulus",wu="publicExponent",dO=[pu,wu];class ro extends Y{constructor(e={}){super(),this.modulus=d(e,pu,ro.defaultValues(pu)),this.publicExponent=d(e,wu,ro.defaultValues(wu)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case pu:return new U;case wu:return new U;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new U({name:t.modulus||g}),new U({name:t.publicExponent||g})]})}fromSchema(e){X(e,dO);const t=G(e,e,ro.schema({names:{modulus:pu,publicExponent:wu}}));j.assertSchema(t,this.className),this.modulus=t.result.modulus.convertFromDER(256),this.publicExponent=t.result.publicExponent}toSchema(){return new I({value:[this.modulus.convertToDER(),this.publicExponent]})}toJSON(){return{n:be.ToBase64Url(this.modulus.valueBlock.valueHexView),e:be.ToBase64Url(this.publicExponent.valueBlock.valueHexView)}}fromJSON(e){Pe.assert("json",e,"n","e");const t=Nc(ff(e.n,!0));this.modulus=new U({valueHex:t.slice(0,Math.pow(2,lR(t.byteLength)))}),this.publicExponent=new U({valueHex:Nc(ff(e.e,!0)).slice(0,3)})}}ro.CLASS_NAME="RSAPublicKey";const yu="algorithm",vu="subjectPublicKey",mO=[yu,vu];class as extends Y{constructor(e={}){super(),this.algorithm=d(e,yu,as.defaultValues(yu)),this.subjectPublicKey=d(e,vu,as.defaultValues(vu));const t=d(e,"parsedKey",null);t&&(this.parsedKey=t),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}get parsedKey(){if(this._parsedKey===void 0){switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":if("algorithmParams"in this.algorithm&&this.algorithm.algorithmParams.constructor.blockName()===he.blockName())try{this._parsedKey=new rs({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHexView})}catch{}break;case"1.2.840.113549.1.1.1":{const e=bt(this.subjectPublicKey.valueBlock.valueHexView);if(e.offset!==-1)try{this._parsedKey=new ro({schema:e.result})}catch{}}break}this._parsedKey||(this._parsedKey=null)}return this._parsedKey||void 0}set parsedKey(e){this._parsedKey=e}static defaultValues(e){switch(e){case yu:return new $;case vu:return new Oe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[$.schema(t.algorithm||{}),new Oe({name:t.subjectPublicKey||g})]})}fromSchema(e){X(e,mO);const t=G(e,e,as.schema({names:{algorithm:{names:{blockName:yu}},subjectPublicKey:vu}}));j.assertSchema(t,this.className),this.algorithm=new $({schema:t.result.algorithm}),this.subjectPublicKey=t.result.subjectPublicKey}toSchema(){return new I({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}toJSON(){if(!this.parsedKey)return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()};const e={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA";break}const t=this.parsedKey.toJSON();return Object.assign(e,t),e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new rs({json:e}),this.algorithm=new $({algorithmId:"1.2.840.10045.2.1",algorithmParams:new he({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new ro({json:e}),this.algorithm=new $({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new mt});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.subjectPublicKey=new Oe({valueHex:this.parsedKey.toSchema().toBER(!1)})}}async importKey(e,t=Ne(!0)){try{if(!e)throw new Error("Need to provide publicKey input parameter");const n=await t.exportKey("spki",e),r=bt(n);try{this.fromSchema(r.result)}catch{throw new Error("Error during initializing object from schema")}}catch(n){const r=n instanceof Error?n.message:`${n}`;throw new Error(`Error during exporting public key: ${r}`)}}}as.CLASS_NAME="PublicKeyInfo";const Mo="version",Ho="privateKey",Ws="namedCurve",_r="publicKey",gO=[Mo,Ho,Ws,_r];class Ps extends Y{constructor(e={}){super(),this.version=d(e,Mo,Ps.defaultValues(Mo)),this.privateKey=d(e,Ho,Ps.defaultValues(Ho)),Ws in e&&(this.namedCurve=d(e,Ws,Ps.defaultValues(Ws))),_r in e&&(this.publicKey=d(e,_r,Ps.defaultValues(_r))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Mo:return 1;case Ho:return new z;case Ws:return g;case _r:return new rs;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Mo:return t===Ps.defaultValues(e);case Ho:return t.isEqual(Ps.defaultValues(e));case Ws:return t===g;case _r:return rs.compareWithDefault(Ws,t.namedCurve)&&rs.compareWithDefault("x",t.x)&&rs.compareWithDefault("y",t.y);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new U({name:t.version||g}),new z({name:t.privateKey||g}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new he({name:t.namedCurve||g})]}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Oe({name:t.publicKey||g})]})]})}fromSchema(e){X(e,gO);const t=G(e,e,Ps.schema({names:{version:Mo,privateKey:Ho,namedCurve:Ws,publicKey:_r}}));if(j.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.privateKey=t.result.privateKey,Ws in t.result&&(this.namedCurve=t.result.namedCurve.valueBlock.toString()),_r in t.result){const n={schema:t.result.publicKey.valueBlock.valueHex};Ws in this&&(n.namedCurve=this.namedCurve),this.publicKey=new rs(n)}}toSchema(){const e=[new U({value:this.version}),this.privateKey];return this.namedCurve&&e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[new he({value:this.namedCurve})]})),this.publicKey&&e.push(new V({idBlock:{tagClass:3,tagNumber:1},value:[new Oe({valueHex:this.publicKey.toSchema().toBER(!1)})]})),new I({value:e})}toJSON(){if(!this.namedCurve||Ps.compareWithDefault(Ws,this.namedCurve))throw new Error('Not enough information for making JSON: absent "namedCurve" value');const e=bi.find(this.namedCurve),t={crv:e?e.name:this.namedCurve,d:be.ToBase64Url(this.privateKey.valueBlock.valueHexView)};if(this.publicKey){const n=this.publicKey.toJSON();t.x=n.x,t.y=n.y}return t}fromJSON(e){Pe.assert("json",e,"crv","d");let t=0;const n=bi.find(e.crv);n&&(this.namedCurve=n.id,t=n.size);const r=be.FromBase64Url(e.d);if(r.byteLength<t){const i=new ArrayBuffer(t),a=new Uint8Array(i),o=new Uint8Array(r);a.set(o,1),this.privateKey=new z({valueHex:i})}else this.privateKey=new z({valueHex:r.slice(0,t)});e.x&&e.y&&(this.publicKey=new rs({json:e}))}}Ps.CLASS_NAME="ECPrivateKey";const bu="prime",Su="exponent",Au="coefficient",pO=[bu,Su,Au];class Wn extends Y{constructor(e={}){super(),this.prime=d(e,bu,Wn.defaultValues(bu)),this.exponent=d(e,Su,Wn.defaultValues(Su)),this.coefficient=d(e,Au,Wn.defaultValues(Au)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case bu:return new U;case Su:return new U;case Au:return new U;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new U({name:t.prime||g}),new U({name:t.exponent||g}),new U({name:t.coefficient||g})]})}fromSchema(e){X(e,pO);const t=G(e,e,Wn.schema({names:{prime:bu,exponent:Su,coefficient:Au}}));j.assertSchema(t,this.className),this.prime=t.result.prime.convertFromDER(),this.exponent=t.result.exponent.convertFromDER(),this.coefficient=t.result.coefficient.convertFromDER()}toSchema(){return new I({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}toJSON(){return{r:be.ToBase64Url(this.prime.valueBlock.valueHexView),d:be.ToBase64Url(this.exponent.valueBlock.valueHexView),t:be.ToBase64Url(this.coefficient.valueBlock.valueHexView)}}fromJSON(e){Pe.assert("json",e,"r","d","r"),this.prime=new U({valueHex:be.FromBase64Url(e.r)}),this.exponent=new U({valueHex:be.FromBase64Url(e.d)}),this.coefficient=new U({valueHex:be.FromBase64Url(e.t)})}}Wn.CLASS_NAME="OtherPrimeInfo";const ku="version",Eu="modulus",Cu="publicExponent",Nu="privateExponent",Iu="prime1",_u="prime2",Bu="exponent1",xu="exponent2",Tu="coefficient",Zi="otherPrimeInfos",wO=[ku,Eu,Cu,Nu,Iu,_u,Bu,xu,Tu,Zi];class es extends Y{constructor(e={}){super(),this.version=d(e,ku,es.defaultValues(ku)),this.modulus=d(e,Eu,es.defaultValues(Eu)),this.publicExponent=d(e,Cu,es.defaultValues(Cu)),this.privateExponent=d(e,Nu,es.defaultValues(Nu)),this.prime1=d(e,Iu,es.defaultValues(Iu)),this.prime2=d(e,_u,es.defaultValues(_u)),this.exponent1=d(e,Bu,es.defaultValues(Bu)),this.exponent2=d(e,xu,es.defaultValues(xu)),this.coefficient=d(e,Tu,es.defaultValues(Tu)),Zi in e&&(this.otherPrimeInfos=d(e,Zi,es.defaultValues(Zi))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ku:return 0;case Eu:return new U;case Cu:return new U;case Nu:return new U;case Iu:return new U;case _u:return new U;case Bu:return new U;case xu:return new U;case Tu:return new U;case Zi:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new U({name:t.version||g}),new U({name:t.modulus||g}),new U({name:t.publicExponent||g}),new U({name:t.privateExponent||g}),new U({name:t.prime1||g}),new U({name:t.prime2||g}),new U({name:t.exponent1||g}),new U({name:t.exponent2||g}),new U({name:t.coefficient||g}),new I({optional:!0,value:[new Ie({name:t.otherPrimeInfosName||g,value:Wn.schema(t.otherPrimeInfo||{})})]})]})}fromSchema(e){X(e,wO);const t=G(e,e,es.schema({names:{version:ku,modulus:Eu,publicExponent:Cu,privateExponent:Nu,prime1:Iu,prime2:_u,exponent1:Bu,exponent2:xu,coefficient:Tu,otherPrimeInfo:{names:{blockName:Zi}}}}));j.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.modulus=t.result.modulus.convertFromDER(256),this.publicExponent=t.result.publicExponent,this.privateExponent=t.result.privateExponent.convertFromDER(256),this.prime1=t.result.prime1.convertFromDER(128),this.prime2=t.result.prime2.convertFromDER(128),this.exponent1=t.result.exponent1.convertFromDER(128),this.exponent2=t.result.exponent2.convertFromDER(128),this.coefficient=t.result.coefficient.convertFromDER(128),Zi in t.result&&(this.otherPrimeInfos=Array.from(t.result.otherPrimeInfos,n=>new Wn({schema:n})))}toSchema(){const e=[];return e.push(new U({value:this.version})),e.push(this.modulus.convertToDER()),e.push(this.publicExponent),e.push(this.privateExponent.convertToDER()),e.push(this.prime1.convertToDER()),e.push(this.prime2.convertToDER()),e.push(this.exponent1.convertToDER()),e.push(this.exponent2.convertToDER()),e.push(this.coefficient.convertToDER()),this.otherPrimeInfos&&e.push(new I({value:Array.from(this.otherPrimeInfos,t=>t.toSchema())})),new I({value:e})}toJSON(){const e={n:be.ToBase64Url(this.modulus.valueBlock.valueHexView),e:be.ToBase64Url(this.publicExponent.valueBlock.valueHexView),d:be.ToBase64Url(this.privateExponent.valueBlock.valueHexView),p:be.ToBase64Url(this.prime1.valueBlock.valueHexView),q:be.ToBase64Url(this.prime2.valueBlock.valueHexView),dp:be.ToBase64Url(this.exponent1.valueBlock.valueHexView),dq:be.ToBase64Url(this.exponent2.valueBlock.valueHexView),qi:be.ToBase64Url(this.coefficient.valueBlock.valueHexView)};return this.otherPrimeInfos&&(e.oth=Array.from(this.otherPrimeInfos,t=>t.toJSON())),e}fromJSON(e){Pe.assert("json",e,"n","e","d","p","q","dp","dq","qi"),this.modulus=new U({valueHex:be.FromBase64Url(e.n)}),this.publicExponent=new U({valueHex:be.FromBase64Url(e.e)}),this.privateExponent=new U({valueHex:be.FromBase64Url(e.d)}),this.prime1=new U({valueHex:be.FromBase64Url(e.p)}),this.prime2=new U({valueHex:be.FromBase64Url(e.q)}),this.exponent1=new U({valueHex:be.FromBase64Url(e.dp)}),this.exponent2=new U({valueHex:be.FromBase64Url(e.dq)}),this.coefficient=new U({valueHex:be.FromBase64Url(e.qi)}),e.oth&&(this.otherPrimeInfos=Array.from(e.oth,t=>new Wn({json:t})))}}es.CLASS_NAME="RSAPrivateKey";const Ru="version",Ou="privateKeyAlgorithm",Vu="privateKey",ea="attributes",Zf="parsedKey",yO=[Ru,Ou,Vu,ea];class Ns extends Y{constructor(e={}){super(),this.version=d(e,Ru,Ns.defaultValues(Ru)),this.privateKeyAlgorithm=d(e,Ou,Ns.defaultValues(Ou)),this.privateKey=d(e,Vu,Ns.defaultValues(Vu)),ea in e&&(this.attributes=d(e,ea,Ns.defaultValues(ea))),Zf in e&&(this.parsedKey=d(e,Zf,Ns.defaultValues(Zf))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ru:return 0;case Ou:return new $;case Vu:return new z;case ea:return[];case Zf:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new U({name:t.version||g}),$.schema(t.privateKeyAlgorithm||{}),new z({name:t.privateKey||g}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ie({name:t.attributes||g,value:et.schema()})]})]})}fromSchema(e){X(e,yO);const t=G(e,e,Ns.schema({names:{version:Ru,privateKeyAlgorithm:{names:{blockName:Ou}},privateKey:Vu,attributes:ea}}));switch(j.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.privateKeyAlgorithm=new $({schema:t.result.privateKeyAlgorithm}),this.privateKey=t.result.privateKey,ea in t.result&&(this.attributes=Array.from(t.result.attributes,n=>new et({schema:n}))),this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":{const n=bt(this.privateKey.valueBlock.valueHexView);n.offset!==-1&&(this.parsedKey=new es({schema:n.result}))}break;case"1.2.840.10045.2.1":if("algorithmParams"in this.privateKeyAlgorithm&&this.privateKeyAlgorithm.algorithmParams instanceof he){const n=bt(this.privateKey.valueBlock.valueHexView);n.offset!==-1&&(this.parsedKey=new Ps({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:n.result}))}break}}toSchema(){const e=[new U({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];return this.attributes&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,t=>t.toSchema())})),new I({value:e})}toJSON(){if(!this.parsedKey){const n={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};return this.attributes&&(n.attributes=Array.from(this.attributes,r=>r.toJSON())),n}const e={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA";break}const t=this.parsedKey.toJSON();return Object.assign(e,t),e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new Ps({json:e}),this.privateKeyAlgorithm=new $({algorithmId:"1.2.840.10045.2.1",algorithmParams:new he({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new es({json:e}),this.privateKeyAlgorithm=new $({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new mt});break;default:throw new Error(`Invalid value for "kty" parameter: ${e.kty}`)}this.privateKey=new z({valueHex:this.parsedKey.toSchema().toBER(!1)})}}}Ns.CLASS_NAME="PrivateKeyInfo";const $o="contentType",Fo="contentEncryptionAlgorithm",ta="encryptedContent",vO=[$o,Fo,ta],kb=1024;class wt extends Y{constructor(e={}){if(super(),this.contentType=d(e,$o,wt.defaultValues($o)),this.contentEncryptionAlgorithm=d(e,Fo,wt.defaultValues(Fo)),ta in e&&e.encryptedContent&&(this.encryptedContent=e.encryptedContent,this.encryptedContent.idBlock.tagClass===1&&this.encryptedContent.idBlock.tagNumber===4&&this.encryptedContent.idBlock.isConstructed===!1&&!e.disableSplit)){const t=new z({idBlock:{isConstructed:!0},isConstructed:!0});let n=0;const r=this.encryptedContent.valueBlock.valueHexView.slice().buffer;let i=r.byteLength;for(;i>0;){const a=new Uint8Array(r,n,n+kb>r.byteLength?r.byteLength-n:kb),o=new ArrayBuffer(a.length),l=new Uint8Array(o);for(let c=0;c<l.length;c++)l[c]=a[c];t.valueBlock.value.push(new z({valueHex:o})),i-=a.length,n+=a.length}this.encryptedContent=t}e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case $o:return g;case Fo:return new $;case ta:return new z;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case $o:return t===g;case Fo:return t.algorithmId===g&&!("algorithmParams"in t);case ta:return t.isEqual(wt.defaultValues(ta));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new he({name:t.contentType||g}),$.schema(t.contentEncryptionAlgorithm||{}),new at({value:[new V({name:t.encryptedContent||g,idBlock:{tagClass:3,tagNumber:0},value:[new Ie({value:new z})]}),new Se({name:t.encryptedContent||g,idBlock:{tagClass:3,tagNumber:0}})]})]})}fromSchema(e){X(e,vO);const t=G(e,e,wt.schema({names:{contentType:$o,contentEncryptionAlgorithm:{names:{blockName:Fo}},encryptedContent:ta}}));j.assertSchema(t,this.className),this.contentType=t.result.contentType.valueBlock.toString(),this.contentEncryptionAlgorithm=new $({schema:t.result.contentEncryptionAlgorithm}),ta in t.result&&(this.encryptedContent=t.result.encryptedContent,this.encryptedContent.idBlock.tagClass=1,this.encryptedContent.idBlock.tagNumber=4)}toSchema(){const e={isIndefiniteForm:!1},t=[];if(t.push(new he({value:this.contentType})),t.push(this.contentEncryptionAlgorithm.toSchema()),this.encryptedContent){e.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;const n=this.encryptedContent;n.idBlock.tagClass=3,n.idBlock.tagNumber=0,n.lenBlock.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed,t.push(n)}return new I({lenBlock:e,value:t})}toJSON(){const e={contentType:this.contentType,contentEncryptionAlgorithm:this.contentEncryptionAlgorithm.toJSON()};return this.encryptedContent&&(e.encryptedContent=this.encryptedContent.toJSON()),e}getEncryptedContent(){if(!this.encryptedContent)throw new Error("Parameter 'encryptedContent' is undefined");return z.prototype.getValue.call(this.encryptedContent)}}wt.CLASS_NAME="EncryptedContentInfo";const Br="hashAlgorithm",xr="maskGenAlgorithm",Tr="saltLength",Rr="trailerField",bO=[Br,xr,Tr,Rr];class Lt extends Y{constructor(e={}){super(),this.hashAlgorithm=d(e,Br,Lt.defaultValues(Br)),this.maskGenAlgorithm=d(e,xr,Lt.defaultValues(xr)),this.saltLength=d(e,Tr,Lt.defaultValues(Tr)),this.trailerField=d(e,Rr,Lt.defaultValues(Rr)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Br:return new $({algorithmId:"1.3.14.3.2.26",algorithmParams:new mt});case xr:return new $({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new $({algorithmId:"1.3.14.3.2.26",algorithmParams:new mt}).toSchema()});case Tr:return 20;case Rr:return 1;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new V({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[$.schema(t.hashAlgorithm||{})]}),new V({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[$.schema(t.maskGenAlgorithm||{})]}),new V({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[new U({name:t.saltLength||g})]}),new V({idBlock:{tagClass:3,tagNumber:3},optional:!0,value:[new U({name:t.trailerField||g})]})]})}fromSchema(e){X(e,bO);const t=G(e,e,Lt.schema({names:{hashAlgorithm:{names:{blockName:Br}},maskGenAlgorithm:{names:{blockName:xr}},saltLength:Tr,trailerField:Rr}}));j.assertSchema(t,this.className),Br in t.result&&(this.hashAlgorithm=new $({schema:t.result.hashAlgorithm})),xr in t.result&&(this.maskGenAlgorithm=new $({schema:t.result.maskGenAlgorithm})),Tr in t.result&&(this.saltLength=t.result.saltLength.valueBlock.valueDec),Rr in t.result&&(this.trailerField=t.result.trailerField.valueBlock.valueDec)}toSchema(){const e=[];return this.hashAlgorithm.isEqual(Lt.defaultValues(Br))||e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(Lt.defaultValues(xr))||e.push(new V({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.saltLength!==Lt.defaultValues(Tr)&&e.push(new V({idBlock:{tagClass:3,tagNumber:2},value:[new U({value:this.saltLength})]})),this.trailerField!==Lt.defaultValues(Rr)&&e.push(new V({idBlock:{tagClass:3,tagNumber:3},value:[new U({value:this.trailerField})]})),new I({value:e})}toJSON(){const e={};return this.hashAlgorithm.isEqual(Lt.defaultValues(Br))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(Lt.defaultValues(xr))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.saltLength!==Lt.defaultValues(Tr)&&(e.saltLength=this.saltLength),this.trailerField!==Lt.defaultValues(Rr)&&(e.trailerField=this.trailerField),e}}Lt.CLASS_NAME="RSASSAPSSParams";const Ko="salt",Pu="iterationCount",qs="keyLength",Vn="prf",SO=[Ko,Pu,qs,Vn];class qt extends Y{constructor(e={}){super(),this.salt=d(e,Ko,qt.defaultValues(Ko)),this.iterationCount=d(e,Pu,qt.defaultValues(Pu)),qs in e&&(this.keyLength=d(e,qs,qt.defaultValues(qs))),Vn in e&&(this.prf=d(e,Vn,qt.defaultValues(Vn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ko:return{};case Pu:return-1;case qs:return 0;case Vn:return new $({algorithmId:"1.3.14.3.2.26",algorithmParams:new mt});default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new at({value:[new z({name:t.saltPrimitive||g}),$.schema(t.saltConstructed||{})]}),new U({name:t.iterationCount||g}),new U({name:t.keyLength||g,optional:!0}),$.schema(t.prf||{names:{optional:!0}})]})}fromSchema(e){X(e,SO);const t=G(e,e,qt.schema({names:{saltPrimitive:Ko,saltConstructed:{names:{blockName:Ko}},iterationCount:Pu,keyLength:qs,prf:{names:{blockName:Vn,optional:!0}}}}));j.assertSchema(t,this.className),this.salt=t.result.salt,this.iterationCount=t.result.iterationCount.valueBlock.valueDec,qs in t.result&&(this.keyLength=t.result.keyLength.valueBlock.valueDec),Vn in t.result&&(this.prf=new $({schema:t.result.prf}))}toSchema(){const e=[];return e.push(this.salt),e.push(new U({value:this.iterationCount})),qs in this&&qt.defaultValues(qs)!==this.keyLength&&e.push(new U({value:this.keyLength})),this.prf&&qt.defaultValues(Vn).isEqual(this.prf)===!1&&e.push(this.prf.toSchema()),new I({value:e})}toJSON(){const e={salt:this.salt.toJSON(),iterationCount:this.iterationCount};return qs in this&&qt.defaultValues(qs)!==this.keyLength&&(e.keyLength=this.keyLength),this.prf&&qt.defaultValues(Vn).isEqual(this.prf)===!1&&(e.prf=this.prf.toJSON()),e}}qt.CLASS_NAME="PBKDF2Params";const Lu="keyDerivationFunc",Du="encryptionScheme",AO=[Lu,Du];class io extends Y{constructor(e={}){super(),this.keyDerivationFunc=d(e,Lu,io.defaultValues(Lu)),this.encryptionScheme=d(e,Du,io.defaultValues(Du)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Lu:return new $;case Du:return new $;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[$.schema(t.keyDerivationFunc||{}),$.schema(t.encryptionScheme||{})]})}fromSchema(e){X(e,AO);const t=G(e,e,io.schema({names:{keyDerivationFunc:{names:{blockName:Lu}},encryptionScheme:{names:{blockName:Du}}}}));j.assertSchema(t,this.className),this.keyDerivationFunc=new $({schema:t.result.keyDerivationFunc}),this.encryptionScheme=new $({schema:t.result.encryptionScheme})}toSchema(){return new I({value:[this.keyDerivationFunc.toSchema(),this.encryptionScheme.toSchema()]})}toJSON(){return{keyDerivationFunc:this.keyDerivationFunc.toJSON(),encryptionScheme:this.encryptionScheme.toJSON()}}}io.CLASS_NAME="PBES2Params";class kO{constructor(e){this.crypto=e.crypto,this.subtle="webkitSubtle"in e.crypto?e.crypto.webkitSubtle:e.crypto.subtle,this.name=d(e,"name",g)}async encrypt(...e){return this.subtle.encrypt(...e)}async decrypt(...e){return this.subtle.decrypt(...e)}sign(...e){return this.subtle.sign(...e)}async verify(...e){return this.subtle.verify(...e)}async digest(...e){return this.subtle.digest(...e)}async generateKey(...e){return this.subtle.generateKey(...e)}async deriveKey(...e){return this.subtle.deriveKey(...e)}async deriveBits(...e){return this.subtle.deriveBits(...e)}async wrapKey(...e){return this.subtle.wrapKey(...e)}async unwrapKey(...e){return this.subtle.unwrapKey(...e)}exportKey(...e){return this.subtle.exportKey(...e)}importKey(...e){return this.subtle.importKey(...e)}getRandomValues(e){return this.crypto.getRandomValues(e)}}async function Eb(s,e,t,n,r,i){let a,o;const l=[];switch(e.toUpperCase()){case"SHA-1":a=20,o=64;break;case"SHA-256":a=32,o=64;break;case"SHA-384":a=48,o=128;break;case"SHA-512":a=64,o=128;break;default:throw new Error("Unsupported hashing algorithm")}const c=new Uint8Array(n),u=new ArrayBuffer(n.byteLength*2+2),h=new Uint8Array(u);for(let fe=0;fe<c.length;fe++)h[fe*2]=0,h[fe*2+1]=c[fe];h[h.length-2]=0,h[h.length-1]=0,n=u.slice(0);const f=new ArrayBuffer(o),m=new Uint8Array(f);for(let fe=0;fe<f.byteLength;fe++)m[fe]=3;const S=r.byteLength,k=o*Math.ceil(S/o),C=new ArrayBuffer(k),R=new Uint8Array(C),T=new Uint8Array(r);for(let fe=0;fe<k;fe++)R[fe]=T[fe%S];const b=n.byteLength,w=o*Math.ceil(b/o),E=new ArrayBuffer(w),N=new Uint8Array(E),L=new Uint8Array(n);for(let fe=0;fe<w;fe++)N[fe]=L[fe%b];const H=C.byteLength+E.byteLength;let F=new ArrayBuffer(H),ne=new Uint8Array(F);ne.set(R),ne.set(N,R.length);const ce=Math.ceil((t>>3)/a);let te=Promise.resolve(F);for(let fe=0;fe<=ce;fe++){te=te.then(xe=>{const ge=new ArrayBuffer(f.byteLength+xe.byteLength),ie=new Uint8Array(ge);return ie.set(m),ie.set(ne,m.length),ge});for(let xe=0;xe<i;xe++)te=te.then(ge=>s.digest({name:e},new Uint8Array(ge)));te=te.then(xe=>{const ge=new ArrayBuffer(o),ie=new Uint8Array(ge);for(let ae=0;ae<ge.byteLength;ae++)ie[ae]=xe[ae%xe.byteLength];const me=Math.ceil(S/o)+Math.ceil(b/o),Q=[];let ke=0,ue=o;for(let ae=0;ae<me;ae++){const oe=Array.from(new Uint8Array(F.slice(ke,ke+ue)));ke+=o,ke+o>F.byteLength&&(ue=F.byteLength-ke);let se=511;for(let Ce=ge.byteLength-1;Ce>=0;Ce--)se>>=8,se+=ie[Ce]+oe[Ce],oe[Ce]=se&255;Q.push(...oe)}return F=new ArrayBuffer(Q.length),ne=new Uint8Array(F),ne.set(Q),l.push(...new Uint8Array(xe)),F})}return te=te.then(()=>{const fe=new ArrayBuffer(t>>3);return new Uint8Array(fe).set(new Uint8Array(l).slice(0,t>>3)),fe}),te}function Jk(s){const e=typeof s=="string"?{name:s}:s;return"hash"in e?{...e,hash:Jk(e.hash)}:e}class _m extends kO{async importKey(e,t,n,r,i){var a,o,l,c,u,h;let f={};const m=Jk(n);switch(e.toLowerCase()){case"raw":return this.subtle.importKey("raw",t,n,r,i);case"spki":{const S=bt(ve.toArrayBuffer(t));j.assert(S,"keyData");const k=new as;try{k.fromSchema(S.result)}catch{throw new qe("Incorrect keyData")}switch(m.name.toUpperCase()){case"RSA-PSS":{if(!m.hash)throw new Pe("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(m.hash.name.toUpperCase()){case"SHA-1":f.alg="PS1";break;case"SHA-256":f.alg="PS256";break;case"SHA-384":f.alg="PS384";break;case"SHA-512":f.alg="PS512";break;default:throw new Error(`Incorrect hash algorithm: ${m.hash.name.toUpperCase()}`)}}case"RSASSA-PKCS1-V1_5":{if(i=["verify"],f.kty="RSA",f.ext=r,f.key_ops=i,k.algorithm.algorithmId!=="1.2.840.113549.1.1.1")throw new Error(`Incorrect public key algorithm: ${k.algorithm.algorithmId}`);if(!f.alg){if(!m.hash)throw new Pe("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(m.hash.name.toUpperCase()){case"SHA-1":f.alg="RS1";break;case"SHA-256":f.alg="RS256";break;case"SHA-384":f.alg="RS384";break;case"SHA-512":f.alg="RS512";break;default:throw new Error(`Incorrect hash algorithm: ${m.hash.name.toUpperCase()}`)}}const C=k.toJSON();Object.assign(f,C)}break;case"ECDSA":i=["verify"];case"ECDH":{if(f={kty:"EC",ext:r,key_ops:i},k.algorithm.algorithmId!=="1.2.840.10045.2.1")throw new Error(`Incorrect public key algorithm: ${k.algorithm.algorithmId}`);const C=k.toJSON();Object.assign(f,C)}break;case"RSA-OAEP":{if(f.kty="RSA",f.ext=r,f.key_ops=i,this.name.toLowerCase()==="safari")f.alg="RSA-OAEP";else{if(!m.hash)throw new Pe("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(m.hash.name.toUpperCase()){case"SHA-1":f.alg="RSA-OAEP";break;case"SHA-256":f.alg="RSA-OAEP-256";break;case"SHA-384":f.alg="RSA-OAEP-384";break;case"SHA-512":f.alg="RSA-OAEP-512";break;default:throw new Error(`Incorrect hash algorithm: ${m.hash.name.toUpperCase()}`)}}const C=k.toJSON();Object.assign(f,C)}break;case"RSAES-PKCS1-V1_5":{f.kty="RSA",f.ext=r,f.key_ops=i,f.alg="PS1";const C=k.toJSON();Object.assign(f,C)}break;default:throw new Error(`Incorrect algorithm name: ${m.name.toUpperCase()}`)}}break;case"pkcs8":{const S=new Ns,k=bt(ve.toArrayBuffer(t));j.assert(k,"keyData");try{S.fromSchema(k.result)}catch{throw new Error("Incorrect keyData")}if(!S.parsedKey)throw new Error("Incorrect keyData");switch(m.name.toUpperCase()){case"RSA-PSS":switch((a=m.hash)===null||a===void 0?void 0:a.name.toUpperCase()){case"SHA-1":f.alg="PS1";break;case"SHA-256":f.alg="PS256";break;case"SHA-384":f.alg="PS384";break;case"SHA-512":f.alg="PS512";break;default:throw new Error(`Incorrect hash algorithm: ${(o=m.hash)===null||o===void 0?void 0:o.name.toUpperCase()}`)}case"RSASSA-PKCS1-V1_5":{if(i=["sign"],f.kty="RSA",f.ext=r,f.key_ops=i,S.privateKeyAlgorithm.algorithmId!=="1.2.840.113549.1.1.1")throw new Error(`Incorrect private key algorithm: ${S.privateKeyAlgorithm.algorithmId}`);if(!("alg"in f))switch((l=m.hash)===null||l===void 0?void 0:l.name.toUpperCase()){case"SHA-1":f.alg="RS1";break;case"SHA-256":f.alg="RS256";break;case"SHA-384":f.alg="RS384";break;case"SHA-512":f.alg="RS512";break;default:throw new Error(`Incorrect hash algorithm: ${(c=m.hash)===null||c===void 0?void 0:c.name.toUpperCase()}`)}const C=S.toJSON();Object.assign(f,C)}break;case"ECDSA":i=["sign"];case"ECDH":{if(f={kty:"EC",ext:r,key_ops:i},S.privateKeyAlgorithm.algorithmId!=="1.2.840.10045.2.1")throw new Error(`Incorrect algorithm: ${S.privateKeyAlgorithm.algorithmId}`);const C=S.toJSON();Object.assign(f,C)}break;case"RSA-OAEP":{if(f.kty="RSA",f.ext=r,f.key_ops=i,this.name.toLowerCase()==="safari")f.alg="RSA-OAEP";else switch((u=m.hash)===null||u===void 0?void 0:u.name.toUpperCase()){case"SHA-1":f.alg="RSA-OAEP";break;case"SHA-256":f.alg="RSA-OAEP-256";break;case"SHA-384":f.alg="RSA-OAEP-384";break;case"SHA-512":f.alg="RSA-OAEP-512";break;default:throw new Error(`Incorrect hash algorithm: ${(h=m.hash)===null||h===void 0?void 0:h.name.toUpperCase()}`)}const C=S.toJSON();Object.assign(f,C)}break;case"RSAES-PKCS1-V1_5":{i=["decrypt"],f.kty="RSA",f.ext=r,f.key_ops=i,f.alg="PS1";const C=S.toJSON();Object.assign(f,C)}break;default:throw new Error(`Incorrect algorithm name: ${m.name.toUpperCase()}`)}}break;case"jwk":f=t;break;default:throw new Error(`Incorrect format: ${e}`)}if(this.name.toLowerCase()==="safari")try{return this.subtle.importKey("jwk",Nc(JSON.stringify(f)),n,r,i)}catch{return this.subtle.importKey("jwk",f,n,r,i)}return this.subtle.importKey("jwk",f,n,r,i)}async exportKey(e,t){let n=await this.subtle.exportKey("jwk",t);switch(this.name.toLowerCase()==="safari"&&n instanceof ArrayBuffer&&(n=JSON.parse(Cm(n))),e.toLowerCase()){case"raw":return this.subtle.exportKey("raw",t);case"spki":{const r=new as;try{r.fromJSON(n)}catch{throw new Error("Incorrect key data")}return r.toSchema().toBER(!1)}case"pkcs8":{const r=new Ns;try{r.fromJSON(n)}catch{throw new Error("Incorrect key data")}return r.toSchema().toBER(!1)}case"jwk":return n;default:throw new Error(`Incorrect format: ${e}`)}}async convert(e,t,n,r,i,a){if(e.toLowerCase()===t.toLowerCase())return n;const o=await this.importKey(e,n,r,i,a);return this.exportKey(t,o)}getAlgorithmByOID(e,t=!1,n){switch(e){case"1.2.840.113549.1.1.1":return{name:"RSAES-PKCS1-v1_5"};case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"}}if(t)throw new Error(`Unsupported algorithm identifier ${n?`for ${n} `:g}: ${e}`);return{}}getOIDByAlgorithm(e,t=!1,n){let r=g;switch(e.name.toUpperCase()){case"RSAES-PKCS1-V1_5":r="1.2.840.113549.1.1.1";break;case"RSASSA-PKCS1-V1_5":switch(e.hash.name.toUpperCase()){case"SHA-1":r="1.2.840.113549.1.1.5";break;case"SHA-256":r="1.2.840.113549.1.1.11";break;case"SHA-384":r="1.2.840.113549.1.1.12";break;case"SHA-512":r="1.2.840.113549.1.1.13";break}break;case"RSA-PSS":r="1.2.840.113549.1.1.10";break;case"RSA-OAEP":r="1.2.840.113549.1.1.7";break;case"ECDSA":switch(e.hash.name.toUpperCase()){case"SHA-1":r="1.2.840.10045.4.1";break;case"SHA-256":r="1.2.840.10045.4.3.2";break;case"SHA-384":r="1.2.840.10045.4.3.3";break;case"SHA-512":r="1.2.840.10045.4.3.4";break}break;case"ECDH":switch(e.kdf.toUpperCase()){case"SHA-1":r="1.3.133.16.840.63.0.2";break;case"SHA-256":r="1.3.132.1.11.1";break;case"SHA-384":r="1.3.132.1.11.2";break;case"SHA-512":r="1.3.132.1.11.3";break}break;case"AES-CTR":break;case"AES-CBC":switch(e.length){case 128:r="2.16.840.1.101.3.4.1.2";break;case 192:r="2.16.840.1.101.3.4.1.22";break;case 256:r="2.16.840.1.101.3.4.1.42";break}break;case"AES-CMAC":break;case"AES-GCM":switch(e.length){case 128:r="2.16.840.1.101.3.4.1.6";break;case 192:r="2.16.840.1.101.3.4.1.26";break;case 256:r="2.16.840.1.101.3.4.1.46";break}break;case"AES-CFB":switch(e.length){case 128:r="2.16.840.1.101.3.4.1.4";break;case 192:r="2.16.840.1.101.3.4.1.24";break;case 256:r="2.16.840.1.101.3.4.1.44";break}break;case"AES-KW":switch(e.length){case 128:r="2.16.840.1.101.3.4.1.5";break;case 192:r="2.16.840.1.101.3.4.1.25";break;case 256:r="2.16.840.1.101.3.4.1.45";break}break;case"HMAC":switch(e.hash.name.toUpperCase()){case"SHA-1":r="1.2.840.113549.2.7";break;case"SHA-256":r="1.2.840.113549.2.9";break;case"SHA-384":r="1.2.840.113549.2.10";break;case"SHA-512":r="1.2.840.113549.2.11";break}break;case"DH":r="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":r="1.3.14.3.2.26";break;case"SHA-256":r="2.16.840.1.101.3.4.2.1";break;case"SHA-384":r="2.16.840.1.101.3.4.2.2";break;case"SHA-512":r="2.16.840.1.101.3.4.2.3";break;case"CONCAT":break;case"HKDF":break;case"PBKDF2":r="1.2.840.113549.1.5.12";break;case"P-256":r="1.2.840.10045.3.1.7";break;case"P-384":r="1.3.132.0.34";break;case"P-521":r="1.3.132.0.35";break}if(!r&&t)throw new Error(`Unsupported algorithm ${n?`for ${n} `:g}: ${e.name}`);return r}getAlgorithmParameters(e,t){let n={algorithm:{},usages:[]};switch(e.toUpperCase()){case"RSAES-PKCS1-V1_5":case"RSASSA-PKCS1-V1_5":switch(t.toLowerCase()){case"generatekey":n={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":n={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(t.toLowerCase()){case"sign":case"verify":n={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":n={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":n={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(t.toLowerCase()){case"encrypt":case"decrypt":n={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":n={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":n={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;case"exportkey":default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(t.toLowerCase()){case"generatekey":n={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":n={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":n={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(t.toLowerCase()){case"exportkey":case"importkey":case"generatekey":n={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":n={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":n={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":n={algorithm:{name:"AES-CBC",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":n={algorithm:{name:"AES-GCM",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":n={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(t.toLowerCase()){case"sign":case"verify":n={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":switch(t.toLowerCase()){case"derivekey":n={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"HKDF"},usages:[]}}break;case"PBKDF2":switch(t.toLowerCase()){case"derivekey":n={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e4},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"PBKDF2"},usages:[]}}break}return n}getHashAlgorithm(e){let t=g;switch(e.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":t="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":t="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":t="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":t="SHA-512";break;case"1.2.840.113549.1.1.10":try{const n=new Lt({schema:e.algorithmParams});if(n.hashAlgorithm){const r=this.getAlgorithmByOID(n.hashAlgorithm.algorithmId);if("name"in r)t=r.name;else return g}else t="SHA-1"}catch{}break}return t}async encryptEncryptedContentInfo(e){Pe.assert(e,"password","contentEncryptionAlgorithm","hmacHashAlgorithm","iterationCount","contentToEncrypt","contentToEncrypt","contentType");const t=this.getOIDByAlgorithm(e.contentEncryptionAlgorithm,!0,"contentEncryptionAlgorithm"),n=this.getOIDByAlgorithm({name:"PBKDF2"},!0,"PBKDF2"),r=this.getOIDByAlgorithm({name:"HMAC",hash:{name:e.hmacHashAlgorithm}},!0,"hmacHashAlgorithm"),i=new ArrayBuffer(16),a=new Uint8Array(i);this.getRandomValues(a);const o=new ArrayBuffer(64),l=new Uint8Array(o);this.getRandomValues(l);const c=new Uint8Array(e.contentToEncrypt),u=new qt({salt:new z({valueHex:o}),iterationCount:e.iterationCount,prf:new $({algorithmId:r,algorithmParams:new mt})}),h=new Uint8Array(e.password),f=await this.importKey("raw",h,"PBKDF2",!1,["deriveKey"]),m=await this.deriveKey({name:"PBKDF2",hash:{name:e.hmacHashAlgorithm},salt:l,iterations:e.iterationCount},f,e.contentEncryptionAlgorithm,!1,["encrypt"]),S=await this.encrypt({name:e.contentEncryptionAlgorithm.name,iv:a},m,c),k=new io({keyDerivationFunc:new $({algorithmId:n,algorithmParams:u.toSchema()}),encryptionScheme:new $({algorithmId:t,algorithmParams:new z({valueHex:i})})});return new wt({contentType:e.contentType,contentEncryptionAlgorithm:new $({algorithmId:"1.2.840.113549.1.5.13",algorithmParams:k.toSchema()}),encryptedContent:new z({valueHex:S})})}async decryptEncryptedContentInfo(e){if(Pe.assert(e,"password","encryptedContentInfo"),e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId!=="1.2.840.113549.1.5.13")throw new Error(`Unknown "contentEncryptionAlgorithm": ${e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId}`);let t;try{t=new io({schema:e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams})}catch{throw new Error('Incorrectly encoded "pbes2Parameters"')}let n;try{n=new qt({schema:t.keyDerivationFunc.algorithmParams})}catch{throw new Error('Incorrectly encoded "pbkdf2Params"')}const r=this.getAlgorithmByOID(t.encryptionScheme.algorithmId,!0),i=t.encryptionScheme.algorithmParams.valueBlock.valueHex,a=new Uint8Array(i),o=n.salt.valueBlock.valueHex,l=new Uint8Array(o),c=n.iterationCount;let u="SHA-1";n.prf&&(u=this.getAlgorithmByOID(n.prf.algorithmId,!0).hash.name);const h=await this.importKey("raw",e.password,"PBKDF2",!1,["deriveKey"]),f=await this.deriveKey({name:"PBKDF2",hash:{name:u},salt:l,iterations:c},h,r,!1,["decrypt"]),m=e.encryptedContentInfo.getEncryptedContent();return this.decrypt({name:r.name,iv:a},f,m)}async stampDataWithPassword(e){if(!(e instanceof Object))throw new Error('Parameters must have type "Object"');Pe.assert(e,"password","hashAlgorithm","iterationCount","salt","contentToStamp");let t;switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error(`Incorrect "parameters.hashAlgorithm" parameter: ${e.hashAlgorithm}`)}const n={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}},r=await Eb(this,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount),i=await this.importKey("raw",new Uint8Array(r),n,!1,["sign"]);return this.sign(n,i,new Uint8Array(e.contentToStamp))}async verifyDataStampedWithPassword(e){Pe.assert(e,"password","hashAlgorithm","salt","iterationCount","contentToVerify","signatureToVerify");let t=0;switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error(`Incorrect "parameters.hashAlgorithm" parameter: ${e.hashAlgorithm}`)}const n={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}},r=await Eb(this,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount),i=await this.importKey("raw",new Uint8Array(r),n,!1,["verify"]);return this.verify(n,i,new Uint8Array(e.signatureToVerify),new Uint8Array(e.contentToVerify))}async getSignatureParameters(e,t="SHA-1"){this.getOIDByAlgorithm({name:t},!0,"hashAlgorithm");const n=new $,r=this.getAlgorithmParameters(e.algorithm.name,"sign");if(!Object.keys(r.algorithm).length)throw new Error("Parameter 'algorithm' is empty");const i=r.algorithm;switch(i.hash.name=t,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":n.algorithmId=this.getOIDByAlgorithm(i,!0);break;case"RSA-PSS":{switch(t.toUpperCase()){case"SHA-256":i.saltLength=32;break;case"SHA-384":i.saltLength=48;break;case"SHA-512":i.saltLength=64;break}const a={};if(t.toUpperCase()!=="SHA-1"){const l=this.getOIDByAlgorithm({name:t},!0,"hashAlgorithm");a.hashAlgorithm=new $({algorithmId:l,algorithmParams:new mt}),a.maskGenAlgorithm=new $({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:a.hashAlgorithm.toSchema()})}i.saltLength!==20&&(a.saltLength=i.saltLength);const o=new Lt(a);n.algorithmId="1.2.840.113549.1.1.10",n.algorithmParams=o.toSchema()}break;default:throw new Error(`Unsupported signature algorithm: ${e.algorithm.name}`)}return{signatureAlgorithm:n,parameters:r}}async signWithPrivateKey(e,t,n){const r=await this.sign(n.algorithm,t,e);return n.algorithm.name==="ECDSA"?CO(r):r}fillPublicKeyParameters(e,t){const n={},r=this.getHashAlgorithm(t);if(r===g)throw new Error(`Unsupported signature algorithm: ${t.algorithmId}`);let i;t.algorithmId==="1.2.840.113549.1.1.10"?i=t.algorithmId:i=e.algorithm.algorithmId;const a=this.getAlgorithmByOID(i,!0);if(n.algorithm=this.getAlgorithmParameters(a.name,"importKey"),"hash"in n.algorithm.algorithm&&(n.algorithm.algorithm.hash.name=r),a.name==="ECDSA"){const o=e.algorithm;if(!o.algorithmParams)throw new Error("Algorithm parameters for ECDSA public key are missed");const l=o.algorithmParams;if("idBlock"in o.algorithmParams&&!(l.idBlock.tagClass===1&&l.idBlock.tagNumber===6))throw new Error("Incorrect type for ECDSA public key parameters");const c=this.getAlgorithmByOID(l.valueBlock.toString(),!0);n.algorithm.algorithm.namedCurve=c.name}return n}async getPublicKey(e,t,n){n||(n=this.fillPublicKeyParameters(e,t));const r=e.toSchema().toBER(!1);return this.importKey("spki",r,n.algorithm.algorithm,!0,n.algorithm.usages)}async verifyWithPublicKey(e,t,n,r,i){let a;if(i){const c={};let u;r.algorithmId==="1.2.840.113549.1.1.10"?u=r.algorithmId:u=n.algorithm.algorithmId;const h=this.getAlgorithmByOID(u,!0);if(c.algorithm=this.getAlgorithmParameters(h.name,"importKey"),"hash"in c.algorithm.algorithm&&(c.algorithm.algorithm.hash.name=i),h.name==="ECDSA"){let f=!1;if("algorithmParams"in n.algorithm&&"idBlock"in n.algorithm.algorithmParams&&n.algorithm.algorithmParams.idBlock.tagClass===1&&n.algorithm.algorithmParams.idBlock.tagNumber===6&&(f=!0),f===!1)throw new Error("Incorrect type for ECDSA public key parameters");const m=this.getAlgorithmByOID(n.algorithm.algorithmParams.valueBlock.toString(),!0);c.algorithm.algorithm.namedCurve=m.name}a=await this.getPublicKey(n,null,c)}else{if(i=this.getHashAlgorithm(r),!i)throw new Error(`Unsupported signature algorithm: ${r.algorithmId}`);a=await this.getPublicKey(n,r)}const o=this.getAlgorithmParameters(a.algorithm.name,"verify");"hash"in o.algorithm&&(o.algorithm.hash.name=i);let l=t.valueBlock.valueHexView;if(a.algorithm.name==="ECDSA"){const c=bi.find(a.algorithm.namedCurve);if(!c)throw new Error("Unsupported named curve in use");const u=bt(l);j.assert(u,"Signature value"),l=NO(u.result,c.size)}if(a.algorithm.name==="RSA-PSS"){const c=new Lt({schema:r.algorithmParams});"saltLength"in c?o.algorithm.saltLength=c.saltLength:o.algorithm.saltLength=20;let u="SHA-1";"hashAlgorithm"in c&&(u=this.getAlgorithmByOID(c.hashAlgorithm.algorithmId,!0).name),o.algorithm.hash.name=u}return this.verify(o.algorithm,a,l,e)}}let Wk={name:"none",crypto:null};function Cb(s){return!!(s&&typeof s=="object"&&"crypto"in s)}function Nb(s,...e){let t=null;if(e.length<2)e.length?t=e[0]:t=typeof self<"u"&&self.crypto?new _m({name:"browser",crypto:self.crypto}):null;else{const n=e[0],r=e[1];Cb(r)?t=r:Cb(n)?t=n:"subtle"in n&&"getRandomValues"in n&&(t=new _m({crypto:n}))}if(typeof process<"u"&&"pid"in process&&typeof global<"u"&&typeof window>"u"){if(typeof global[process.pid]>"u")global[process.pid]={};else if(typeof global[process.pid]!="object")throw new Error(`Name global.${process.pid} already exists and it is not an object`);if(typeof global[process.pid].pkijs>"u")global[process.pid].pkijs={};else if(typeof global[process.pid].pkijs!="object")throw new Error(`Name global.${process.pid}.pkijs already exists and it is not an object`);global[process.pid].pkijs.engine={name:s,crypto:t}}else Wk={name:s,crypto:t}}function EO(){if(typeof process<"u"&&"pid"in process&&typeof global<"u"&&typeof window>"u"){let s;try{s=global[process.pid].pkijs.engine}catch{throw new Error("Please call 'setEngine' before call to 'getEngine'")}return s}return Wk}function Ne(s=!1){const e=EO();if(!e.crypto&&s)throw new Error("Unable to create WebCrypto object");return e.crypto}function CO(s){if(s.byteLength%2!==0)return _t;const e=s.byteLength/2,t=new ArrayBuffer(e);new Uint8Array(t).set(new Uint8Array(s,0,e));const r=new U({valueHex:t}),i=new ArrayBuffer(e);new Uint8Array(i).set(new Uint8Array(s,e,e));const o=new U({valueHex:i});return new I({value:[r.convertToDER(),o.convertToDER()]}).toBER(!1)}function NO(s,e){if(!(s instanceof I&&s.valueBlock.value.length===2&&s.valueBlock.value[0]instanceof U&&s.valueBlock.value[1]instanceof U))return _t;const t=s.valueBlock.value[0].convertFromDER().valueBlock.valueHexView,n=s.valueBlock.value[1].convertFromDER().valueBlock.valueHexView,r=new Uint8Array(e*2);return r.set(t,e-t.byteLength),r.set(n,2*e-n.byteLength),r.buffer}async function IO(s,e,t,n,r){switch(s.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;default:throw new qe(`Unknown hash function: ${s}`)}if(qe.assert(e,"zBuffer","ArrayBuffer"),e.byteLength===0)throw new qe("'zBuffer' has zero length, error");if(qe.assert(n,"SharedInfo","ArrayBuffer"),t>255)throw new qe("Please set 'Counter' argument to value less or equal to 255");const i=new ArrayBuffer(4),a=new Uint8Array(i);a[0]=0,a[1]=0,a[2]=0,a[3]=t;let o=_t;o=lc(o,e),o=lc(o,i),o=lc(o,n);const l=await r.digest({name:s},o);return{counter:t,result:l}}async function Ib(s,e,t,n,r=Ne(!0)){let i=0,a=1;switch(s.toUpperCase()){case"SHA-1":i=160;break;case"SHA-256":i=256;break;case"SHA-384":i=384;break;case"SHA-512":i=512;break;default:throw new qe(`Unknown hash function: ${s}`)}if(qe.assert(e,"Zbuffer","ArrayBuffer"),e.byteLength===0)throw new qe("'Zbuffer' has zero length, error");qe.assert(n,"SharedInfo","ArrayBuffer");const o=t/i;Math.floor(o)>0&&(a=Math.floor(o),o-a>0&&a++);const l=[];for(let f=1;f<=a;f++)l.push(await IO(s,e,f,n,r));let c=_t,u=1,h=!0;for(;h;){h=!1;for(const f of l)if(f.counter===u){c=lc(c,f.result),h=!0;break}u++}if(t>>=3,c.byteLength>t){const f=new ArrayBuffer(t),m=new Uint8Array(f),S=new Uint8Array(c);for(let k=0;k<t;k++)m[k]=S[k];return f}return c}const Bg="version",xg="logID",Tg="extensions",Rg="timestamp",Og="hashAlgorithm",Vg="signatureAlgorithm",Pg="signature",_b="none",Bb="md5",xb="sha1",Tb="sha224",Rb="sha256",Ob="sha384",Vb="sha512",Pb="anonymous",Lb="rsa",Db="dsa",Ub="ecdsa";class mn extends Y{constructor(e={}){super(),this.version=d(e,Bg,mn.defaultValues(Bg)),this.logID=d(e,xg,mn.defaultValues(xg)),this.timestamp=d(e,Rg,mn.defaultValues(Rg)),this.extensions=d(e,Tg,mn.defaultValues(Tg)),this.hashAlgorithm=d(e,Og,mn.defaultValues(Og)),this.signatureAlgorithm=d(e,Vg,mn.defaultValues(Vg)),this.signature=d(e,Pg,mn.defaultValues(Pg)),"stream"in e&&e.stream&&this.fromStream(e.stream),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Bg:return 0;case xg:case Tg:return _t;case Rg:return new Date(0);case Og:case Vg:return g;case Pg:return new Ae;default:return super.defaultValues(e)}}fromSchema(e){if(!(e instanceof Im))throw new Error("Object's schema was not verified against input data for SignedCertificateTimestamp");const t=new wi({stream:new ht({buffer:e.data})});this.fromStream(t)}fromStream(e){const t=e.getUint16();if(this.version=e.getBlock(1)[0],this.version===0){this.logID=new Uint8Array(e.getBlock(32)).buffer.slice(0),this.timestamp=new Date(uo(new Uint8Array(e.getBlock(8)),8));const n=e.getUint16();switch(this.extensions=new Uint8Array(e.getBlock(n)).buffer.slice(0),e.getBlock(1)[0]){case 0:this.hashAlgorithm=_b;break;case 1:this.hashAlgorithm=Bb;break;case 2:this.hashAlgorithm=xb;break;case 3:this.hashAlgorithm=Tb;break;case 4:this.hashAlgorithm=Rb;break;case 5:this.hashAlgorithm=Ob;break;case 6:this.hashAlgorithm=Vb;break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}switch(e.getBlock(1)[0]){case 0:this.signatureAlgorithm=Pb;break;case 1:this.signatureAlgorithm=Lb;break;case 2:this.signatureAlgorithm=Db;break;case 3:this.signatureAlgorithm=Ub;break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}const r=e.getUint16(),i=new Uint8Array(e.getBlock(r)).buffer.slice(0),a=bt(i);if(j.assert(a,"SignedCertificateTimestamp"),this.signature=a.result,t!==47+n+r)throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}}toSchema(){const e=this.toStream();return new Im({data:e.stream.buffer})}toStream(){const e=new wi;e.appendUint16(47+this.extensions.byteLength+this.signature.valueBeforeDecodeView.byteLength),e.appendChar(this.version),e.appendView(new Uint8Array(this.logID));const t=new ArrayBuffer(8),n=new Uint8Array(t),r=ar(this.timestamp.valueOf(),8);n.set(new Uint8Array(r),8-r.byteLength),e.appendView(n),e.appendUint16(this.extensions.byteLength),this.extensions.byteLength&&e.appendView(new Uint8Array(this.extensions));let i;switch(this.hashAlgorithm.toLowerCase()){case _b:i=0;break;case Bb:i=1;break;case xb:i=2;break;case Tb:i=3;break;case Rb:i=4;break;case Ob:i=5;break;case Vb:i=6;break;default:throw new Error(`Incorrect data for hashAlgorithm: ${this.hashAlgorithm}`)}e.appendChar(i);let a;switch(this.signatureAlgorithm.toLowerCase()){case Pb:a=0;break;case Lb:a=1;break;case Db:a=2;break;case Ub:a=3;break;default:throw new Error(`Incorrect data for signatureAlgorithm: ${this.signatureAlgorithm}`)}e.appendChar(a);const o=this.signature.toBER(!1);return e.appendUint16(o.byteLength),e.appendView(new Uint8Array(o)),e}toJSON(){return{version:this.version,logID:mb(this.logID),timestamp:this.timestamp,extensions:mb(this.extensions),hashAlgorithm:this.hashAlgorithm,signatureAlgorithm:this.signatureAlgorithm,signature:this.signature.toJSON()}}async verify(e,t,n=0,r=Ne(!0)){const i=Dp(Cm(this.logID));let a=null;const o=new wi;for(const m of e)if(m.log_id===i){a=m.key;break}if(!a)throw new Error(`Public key not found for CT with logId: ${i}`);const l=Nc(ff(a)),c=as.fromBER(l);o.appendChar(0),o.appendChar(0);const u=new ArrayBuffer(8),h=new Uint8Array(u),f=ar(this.timestamp.valueOf(),8);return h.set(new Uint8Array(f),8-f.byteLength),o.appendView(h),o.appendUint16(n),n===0&&o.appendUint24(t.byteLength),o.appendView(new Uint8Array(t)),o.appendUint16(this.extensions.byteLength),this.extensions.byteLength!==0&&o.appendView(new Uint8Array(this.extensions)),r.verifyWithPublicKey(o.buffer.slice(0,o.length),new z({valueHex:this.signature.toBER(!1)}),c,{algorithmId:g},"SHA-256")}}mn.CLASS_NAME="SignedCertificateTimestamp";const ed="timestamps";class lg extends Y{constructor(e={}){super(),this.timestamps=d(e,ed,lg.defaultValues(ed)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ed:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ed:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){var t;const n=d(e,"names",{});return(t=n.optional)!==null&&t!==void 0||(n.optional=!1),new z({name:n.blockName||"SignedCertificateTimestampList",optional:n.optional})}fromSchema(e){if(!(e instanceof z))throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");const t=new wi({stream:new ht({buffer:e.valueBlock.valueHex})});if(t.getUint16()!==t.length)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");for(;t.length;)this.timestamps.push(new mn({stream:t}))}toSchema(){const e=new wi;let t=0;const n=[];for(const r of this.timestamps){const i=r.toStream();n.push(i),t+=i.stream.buffer.byteLength}e.appendUint16(t);for(const r of n)e.appendView(r.stream.view);return new z({valueHex:e.stream.buffer.slice(0)})}toJSON(){return{timestamps:Array.from(this.timestamps,e=>e.toJSON())}}}lg.CLASS_NAME="SignedCertificateTimestampList";const Uu="attributes",_O=[Uu];class bf extends Y{constructor(e={}){super(),this.attributes=d(e,Uu,bf.defaultValues(Uu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Uu:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new Ie({name:t.attributes||g,value:et.schema()})]})}fromSchema(e){X(e,_O);const t=G(e,e,bf.schema({names:{attributes:Uu}}));j.assertSchema(t,this.className),this.attributes=Array.from(t.result.attributes,n=>new et({schema:n}))}toSchema(){return new I({value:Array.from(this.attributes,e=>e.toSchema())})}toJSON(){return{attributes:Array.from(this.attributes,e=>e.toJSON())}}}bf.CLASS_NAME="SubjectDirectoryAttributes";class lt{static getItems(){return this.types||(this.types={},lt.register(xk,"SubjectAltName",_c),lt.register(Tk,"IssuerAltName",_c),lt.register(cy,"AuthorityKeyIdentifier",jn),lt.register(oy,"BasicConstraints",vi),lt.register(jR,"MicrosoftCaVersion",wf),lt.register(Lk,"CertificatePolicies",Bc),lt.register(UR,"CertificatePoliciesMicrosoft",Bc),lt.register(KR,"MicrosoftCertTemplateV2",Zl),lt.register(Pk,"CRLDistributionPoints",ho),lt.register(ly,"FreshestCRL",ho),lt.register(MR,"ExtKeyUsage",xc),lt.register(Ok,"CertificateIssuer",vt),lt.register(uy,"AuthorityInfoAccess",fo),lt.register($R,"SubjectInfoAccess",fo),lt.register(Rk,"IssuingDistributionPoint",Pt),lt.register(Vk,"NameConstraints",uc),lt.register(Uk,"PolicyConstraints",hc),lt.register(Dk,"PolicyMappings",yf),lt.register(OR,"PrivateKeyUsagePeriod",fc),lt.register(JR,"QCStatements",vf),lt.register(FR,"SignedCertificateTimestampList",lg),lt.register(xR,"SubjectDirectoryAttributes",bf)),this.types}static fromBER(e,t){const n=bt(t);if(n.offset===-1)return null;const r=this.find(e);if(r)try{return new r.type({schema:n.result})}catch{const a=new r.type;return a.parsingError=`Incorrectly formatted value of extension ${r.name} (${e})`,a}return n.result}static find(e){return this.getItems()[e]||null}static register(e,t,n){this.getItems()[e]={name:t,type:n}}}const Mu="extnID",Or="critical",Hu="extnValue",td="parsedValue",BO=[Mu,Or,Hu];class Fe extends Y{constructor(e={}){super(),this.extnID=d(e,Mu,Fe.defaultValues(Mu)),this.critical=d(e,Or,Fe.defaultValues(Or)),Hu in e?this.extnValue=new z({valueHex:e.extnValue}):this.extnValue=Fe.defaultValues(Hu),td in e&&(this.parsedValue=d(e,td,Fe.defaultValues(td))),e.schema&&this.fromSchema(e.schema)}get parsedValue(){if(this._parsedValue===void 0){const e=lt.fromBER(this.extnID,this.extnValue.valueBlock.valueHexView);this._parsedValue=e}return this._parsedValue||void 0}set parsedValue(e){this._parsedValue=e}static defaultValues(e){switch(e){case Mu:return g;case Or:return!1;case Hu:return new z;case td:return{};default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new he({name:t.extnID||g}),new Cn({name:t.critical||g,optional:!0}),new z({name:t.extnValue||g})]})}fromSchema(e){X(e,BO);const t=G(e,e,Fe.schema({names:{extnID:Mu,critical:Or,extnValue:Hu}}));j.assertSchema(t,this.className),this.extnID=t.result.extnID.valueBlock.toString(),Or in t.result&&(this.critical=t.result.critical.valueBlock.value),this.extnValue=t.result.extnValue}toSchema(){const e=[];return e.push(new he({value:this.extnID})),this.critical!==Fe.defaultValues(Or)&&e.push(new Cn({value:this.critical})),e.push(this.extnValue),new I({value:e})}toJSON(){const e={extnID:this.extnID,extnValue:this.extnValue.toJSON()};return this.critical!==Fe.defaultValues(Or)&&(e.critical=this.critical),this.parsedValue&&this.parsedValue.toJSON&&(e.parsedValue=this.parsedValue.toJSON()),e}}Fe.CLASS_NAME="Extension";const $u="extensions",xO=[$u];class ot extends Y{constructor(e={}){super(),this.extensions=d(e,$u,ot.defaultValues($u)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case $u:return[];default:return super.defaultValues(e)}}static schema(e={},t=!1){const n=d(e,"names",{});return new I({optional:t,name:n.blockName||g,value:[new Ie({name:n.extensions||g,value:Fe.schema(n.extension||{})})]})}fromSchema(e){X(e,xO);const t=G(e,e,ot.schema({names:{extensions:$u}}));j.assertSchema(t,this.className),this.extensions=Array.from(t.result.extensions,n=>new Fe({schema:n}))}toSchema(){return new I({value:Array.from(this.extensions,e=>e.toSchema())})}toJSON(){return{extensions:this.extensions.map(e=>e.toJSON())}}}ot.CLASS_NAME="Extensions";const Fu="issuer",Ku="serialNumber",sa="issuerUID",TO=[Fu,Ku,sa];class is extends Y{constructor(e={}){super(),this.issuer=d(e,Fu,is.defaultValues(Fu)),this.serialNumber=d(e,Ku,is.defaultValues(Ku)),sa in e&&(this.issuerUID=d(e,sa,is.defaultValues(sa))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Fu:return new vt;case Ku:return new U;case sa:return new Oe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[vt.schema(t.issuer||{}),new U({name:t.serialNumber||g}),new Oe({optional:!0,name:t.issuerUID||g})]})}fromSchema(e){X(e,TO);const t=G(e,e,is.schema({names:{issuer:{names:{blockName:Fu}},serialNumber:Ku,issuerUID:sa}}));j.assertSchema(t,this.className),this.issuer=new vt({schema:t.result.issuer}),this.serialNumber=t.result.serialNumber,sa in t.result&&(this.issuerUID=t.result.issuerUID)}toSchema(){const e=new I({value:[this.issuer.toSchema(),this.serialNumber]});return this.issuerUID&&e.valueBlock.value.push(this.issuerUID),e}toJSON(){const e={issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()};return this.issuerUID&&(e.issuerUID=this.issuerUID.toJSON()),e}}is.CLASS_NAME="IssuerSerial";const ju="version",na="baseCertificateID",ra="subjectName",Ju="issuer",Wu="signature",qu="serialNumber",Gu="attrCertValidityPeriod",Yu="attributes",ia="issuerUniqueID",aa="extensions",RO=[ju,na,ra,Ju,Wu,qu,Gu,Yu,ia,aa];class Wt extends Y{constructor(e={}){super(),this.version=d(e,ju,Wt.defaultValues(ju)),na in e&&(this.baseCertificateID=d(e,na,Wt.defaultValues(na))),ra in e&&(this.subjectName=d(e,ra,Wt.defaultValues(ra))),this.issuer=d(e,Ju,Wt.defaultValues(Ju)),this.signature=d(e,Wu,Wt.defaultValues(Wu)),this.serialNumber=d(e,qu,Wt.defaultValues(qu)),this.attrCertValidityPeriod=d(e,Gu,Wt.defaultValues(Gu)),this.attributes=d(e,Yu,Wt.defaultValues(Yu)),ia in e&&(this.issuerUniqueID=d(e,ia,Wt.defaultValues(ia))),aa in e&&(this.extensions=d(e,aa,Wt.defaultValues(aa))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ju:return 0;case na:return new is;case ra:return new vt;case Ju:return new vt;case Wu:return new $;case qu:return new U;case Gu:return new sn;case Yu:return[];case ia:return new Oe;case aa:return new ot;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new U({name:t.version||g}),new at({value:[new V({name:t.baseCertificateID||g,idBlock:{tagClass:3,tagNumber:0},value:is.schema().valueBlock.value}),new V({name:t.subjectName||g,idBlock:{tagClass:3,tagNumber:1},value:vt.schema().valueBlock.value})]}),vt.schema({names:{blockName:t.issuer||g}}),$.schema(t.signature||{}),new U({name:t.serialNumber||g}),sn.schema(t.attrCertValidityPeriod||{}),new I({name:t.attributes||g,value:[new Ie({value:et.schema()})]}),new Oe({optional:!0,name:t.issuerUniqueID||g}),ot.schema(t.extensions||{},!0)]})}fromSchema(e){X(e,RO);const t=G(e,e,Wt.schema({names:{version:ju,baseCertificateID:na,subjectName:ra,issuer:Ju,signature:{names:{blockName:Wu}},serialNumber:qu,attrCertValidityPeriod:{names:{blockName:Gu}},attributes:Yu,issuerUniqueID:ia,extensions:{names:{blockName:aa}}}}));j.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,na in t.result&&(this.baseCertificateID=new is({schema:new I({value:t.result.baseCertificateID.valueBlock.value})})),ra in t.result&&(this.subjectName=new vt({schema:new I({value:t.result.subjectName.valueBlock.value})})),this.issuer=t.result.issuer,this.signature=new $({schema:t.result.signature}),this.serialNumber=t.result.serialNumber,this.attrCertValidityPeriod=new sn({schema:t.result.attrCertValidityPeriod}),this.attributes=Array.from(t.result.attributes.valueBlock.value,n=>new et({schema:n})),ia in t.result&&(this.issuerUniqueID=t.result.issuerUniqueID),aa in t.result&&(this.extensions=new ot({schema:t.result.extensions}))}toSchema(){const e=new I({value:[new U({value:this.version})]});return this.baseCertificateID&&e.valueBlock.value.push(new V({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.subjectName&&e.valueBlock.value.push(new V({idBlock:{tagClass:3,tagNumber:1},value:this.subjectName.toSchema().valueBlock.value})),e.valueBlock.value.push(this.issuer.toSchema()),e.valueBlock.value.push(this.signature.toSchema()),e.valueBlock.value.push(this.serialNumber),e.valueBlock.value.push(this.attrCertValidityPeriod.toSchema()),e.valueBlock.value.push(new I({value:Array.from(this.attributes,t=>t.toSchema())})),this.issuerUniqueID&&e.valueBlock.value.push(this.issuerUniqueID),this.extensions&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){const e={version:this.version};return this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.subjectName&&(e.subjectName=this.subjectName.toJSON()),e.issuer=this.issuer.toJSON(),e.signature=this.signature.toJSON(),e.serialNumber=this.serialNumber.toJSON(),e.attrCertValidityPeriod=this.attrCertValidityPeriod.toJSON(),e.attributes=Array.from(this.attributes,t=>t.toJSON()),this.issuerUniqueID&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),this.extensions&&(e.extensions=this.extensions.toJSON()),e}}Wt.CLASS_NAME="AttributeCertificateInfoV1";const Xu="acinfo",Qu="signatureAlgorithm",zu="signatureValue",OO=[Xu,zu,Qu];class qn extends Y{constructor(e={}){super(),this.acinfo=d(e,Xu,qn.defaultValues(Xu)),this.signatureAlgorithm=d(e,Qu,qn.defaultValues(Qu)),this.signatureValue=d(e,zu,qn.defaultValues(zu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Xu:return new Wt;case Qu:return new $;case zu:return new Oe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[Wt.schema(t.acinfo||{}),$.schema(t.signatureAlgorithm||{}),new Oe({name:t.signatureValue||g})]})}fromSchema(e){X(e,OO);const t=G(e,e,qn.schema({names:{acinfo:{names:{blockName:Xu}},signatureAlgorithm:{names:{blockName:Qu}},signatureValue:zu}}));j.assertSchema(t,this.className),this.acinfo=new Wt({schema:t.result.acinfo}),this.signatureAlgorithm=new $({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}toSchema(){return new I({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}qn.CLASS_NAME="AttributeCertificateV1";const Zu="digestedObjectType",oa="otherObjectTypeID",eh="digestAlgorithm",th="objectDigest",VO=[Zu,oa,eh,th];class _s extends Y{constructor(e={}){super(),this.digestedObjectType=d(e,Zu,_s.defaultValues(Zu)),oa in e&&(this.otherObjectTypeID=d(e,oa,_s.defaultValues(oa))),this.digestAlgorithm=d(e,eh,_s.defaultValues(eh)),this.objectDigest=d(e,th,_s.defaultValues(th)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Zu:return new Ei;case oa:return new he;case eh:return new $;case th:return new Oe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new Ei({name:t.digestedObjectType||g}),new he({optional:!0,name:t.otherObjectTypeID||g}),$.schema(t.digestAlgorithm||{}),new Oe({name:t.objectDigest||g})]})}fromSchema(e){X(e,VO);const t=G(e,e,_s.schema({names:{digestedObjectType:Zu,otherObjectTypeID:oa,digestAlgorithm:{names:{blockName:eh}},objectDigest:th}}));j.assertSchema(t,this.className),this.digestedObjectType=t.result.digestedObjectType,oa in t.result&&(this.otherObjectTypeID=t.result.otherObjectTypeID),this.digestAlgorithm=new $({schema:t.result.digestAlgorithm}),this.objectDigest=t.result.objectDigest}toSchema(){const e=new I({value:[this.digestedObjectType]});return this.otherObjectTypeID&&e.valueBlock.value.push(this.otherObjectTypeID),e.valueBlock.value.push(this.digestAlgorithm.toSchema()),e.valueBlock.value.push(this.objectDigest),e}toJSON(){const e={digestedObjectType:this.digestedObjectType.toJSON(),digestAlgorithm:this.digestAlgorithm.toJSON(),objectDigest:this.objectDigest.toJSON()};return this.otherObjectTypeID&&(e.otherObjectTypeID=this.otherObjectTypeID.toJSON()),e}}_s.CLASS_NAME="ObjectDigestInfo";const la="issuerName",ca="baseCertificateID",ua="objectDigestInfo",PO=[la,ca,ua];class ui extends Y{constructor(e={}){super(),la in e&&(this.issuerName=d(e,la,ui.defaultValues(la))),ca in e&&(this.baseCertificateID=d(e,ca,ui.defaultValues(ca))),ua in e&&(this.objectDigestInfo=d(e,ua,ui.defaultValues(ua))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case la:return new vt;case ca:return new is;case ua:return new _s;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[vt.schema({names:{blockName:t.issuerName}},!0),new V({optional:!0,name:t.baseCertificateID||g,idBlock:{tagClass:3,tagNumber:0},value:is.schema().valueBlock.value}),new V({optional:!0,name:t.objectDigestInfo||g,idBlock:{tagClass:3,tagNumber:1},value:_s.schema().valueBlock.value})]})}fromSchema(e){X(e,PO);const t=G(e,e,ui.schema({names:{issuerName:la,baseCertificateID:ca,objectDigestInfo:ua}}));j.assertSchema(t,this.className),la in t.result&&(this.issuerName=new vt({schema:t.result.issuerName})),ca in t.result&&(this.baseCertificateID=new is({schema:new I({value:t.result.baseCertificateID.valueBlock.value})})),ua in t.result&&(this.objectDigestInfo=new _s({schema:new I({value:t.result.objectDigestInfo.valueBlock.value})}))}toSchema(){const e=new I;return this.issuerName&&e.valueBlock.value.push(this.issuerName.toSchema()),this.baseCertificateID&&e.valueBlock.value.push(new V({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.objectDigestInfo&&e.valueBlock.value.push(new V({idBlock:{tagClass:3,tagNumber:1},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){const e={};return this.issuerName&&(e.issuerName=this.issuerName.toJSON()),this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.objectDigestInfo&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}ui.CLASS_NAME="V2Form";const ha="baseCertificateID",fa="entityName",da="objectDigestInfo",LO=[ha,fa,da];class Gn extends Y{constructor(e={}){super(),ha in e&&(this.baseCertificateID=d(e,ha,Gn.defaultValues(ha))),fa in e&&(this.entityName=d(e,fa,Gn.defaultValues(fa))),da in e&&(this.objectDigestInfo=d(e,da,Gn.defaultValues(da))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ha:return new is;case fa:return new vt;case da:return new _s;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new V({optional:!0,name:t.baseCertificateID||g,idBlock:{tagClass:3,tagNumber:0},value:is.schema().valueBlock.value}),new V({optional:!0,name:t.entityName||g,idBlock:{tagClass:3,tagNumber:1},value:vt.schema().valueBlock.value}),new V({optional:!0,name:t.objectDigestInfo||g,idBlock:{tagClass:3,tagNumber:2},value:_s.schema().valueBlock.value})]})}fromSchema(e){X(e,LO);const t=G(e,e,Gn.schema({names:{baseCertificateID:ha,entityName:fa,objectDigestInfo:da}}));j.assertSchema(t,this.className),ha in t.result&&(this.baseCertificateID=new is({schema:new I({value:t.result.baseCertificateID.valueBlock.value})})),fa in t.result&&(this.entityName=new vt({schema:new I({value:t.result.entityName.valueBlock.value})})),da in t.result&&(this.objectDigestInfo=new _s({schema:new I({value:t.result.objectDigestInfo.valueBlock.value})}))}toSchema(){const e=new I;return this.baseCertificateID&&e.valueBlock.value.push(new V({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.entityName&&e.valueBlock.value.push(new V({idBlock:{tagClass:3,tagNumber:1},value:this.entityName.toSchema().valueBlock.value})),this.objectDigestInfo&&e.valueBlock.value.push(new V({idBlock:{tagClass:3,tagNumber:2},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){const e={};return this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.entityName&&(e.entityName=this.entityName.toJSON()),this.objectDigestInfo&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}Gn.CLASS_NAME="Holder";const sh="version",nh="holder",rh="issuer",ih="signature",ah="serialNumber",oh="attrCertValidityPeriod",lh="attributes",ma="issuerUniqueID",ga="extensions",DO=[sh,nh,rh,ih,ah,oh,lh,ma,ga];class ts extends Y{constructor(e={}){super(),this.version=d(e,sh,ts.defaultValues(sh)),this.holder=d(e,nh,ts.defaultValues(nh)),this.issuer=d(e,rh,ts.defaultValues(rh)),this.signature=d(e,ih,ts.defaultValues(ih)),this.serialNumber=d(e,ah,ts.defaultValues(ah)),this.attrCertValidityPeriod=d(e,oh,ts.defaultValues(oh)),this.attributes=d(e,lh,ts.defaultValues(lh)),ma in e&&(this.issuerUniqueID=d(e,ma,ts.defaultValues(ma))),ga in e&&(this.extensions=d(e,ga,ts.defaultValues(ga))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case sh:return 1;case nh:return new Gn;case rh:return{};case ih:return new $;case ah:return new U;case oh:return new sn;case lh:return[];case ma:return new Oe;case ga:return new ot;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new U({name:t.version||g}),Gn.schema(t.holder||{}),new at({value:[vt.schema({names:{blockName:t.issuer||g}}),new V({name:t.issuer||g,idBlock:{tagClass:3,tagNumber:0},value:ui.schema().valueBlock.value})]}),$.schema(t.signature||{}),new U({name:t.serialNumber||g}),sn.schema(t.attrCertValidityPeriod||{}),new I({name:t.attributes||g,value:[new Ie({value:et.schema()})]}),new Oe({optional:!0,name:t.issuerUniqueID||g}),ot.schema(t.extensions||{},!0)]})}fromSchema(e){X(e,DO);const t=G(e,e,ts.schema({names:{version:sh,holder:{names:{blockName:nh}},issuer:rh,signature:{names:{blockName:ih}},serialNumber:ah,attrCertValidityPeriod:{names:{blockName:oh}},attributes:lh,issuerUniqueID:ma,extensions:{names:{blockName:ga}}}}));switch(j.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.holder=new Gn({schema:t.result.holder}),t.result.issuer.idBlock.tagClass){case 3:this.issuer=new ui({schema:new I({value:t.result.issuer.valueBlock.value})});break;case 1:default:throw new Error("Incorrect value for 'issuer' in AttributeCertificateInfoV2")}this.signature=new $({schema:t.result.signature}),this.serialNumber=t.result.serialNumber,this.attrCertValidityPeriod=new sn({schema:t.result.attrCertValidityPeriod}),this.attributes=Array.from(t.result.attributes.valueBlock.value,n=>new et({schema:n})),ma in t.result&&(this.issuerUniqueID=t.result.issuerUniqueID),ga in t.result&&(this.extensions=new ot({schema:t.result.extensions}))}toSchema(){const e=new I({value:[new U({value:this.version}),this.holder.toSchema(),new V({idBlock:{tagClass:3,tagNumber:0},value:this.issuer.toSchema().valueBlock.value}),this.signature.toSchema(),this.serialNumber,this.attrCertValidityPeriod.toSchema(),new I({value:Array.from(this.attributes,t=>t.toSchema())})]});return this.issuerUniqueID&&e.valueBlock.value.push(this.issuerUniqueID),this.extensions&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){const e={version:this.version,holder:this.holder.toJSON(),issuer:this.issuer.toJSON(),signature:this.signature.toJSON(),serialNumber:this.serialNumber.toJSON(),attrCertValidityPeriod:this.attrCertValidityPeriod.toJSON(),attributes:Array.from(this.attributes,t=>t.toJSON())};return this.issuerUniqueID&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),this.extensions&&(e.extensions=this.extensions.toJSON()),e}}ts.CLASS_NAME="AttributeCertificateInfoV2";const ch="acinfo",uh="signatureAlgorithm",hh="signatureValue",UO=[ch,uh,hh];class xs extends Y{constructor(e={}){super(),this.acinfo=d(e,ch,xs.defaultValues(ch)),this.signatureAlgorithm=d(e,uh,xs.defaultValues(uh)),this.signatureValue=d(e,hh,xs.defaultValues(hh)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ch:return new ts;case uh:return new $;case hh:return new Oe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[ts.schema(t.acinfo||{}),$.schema(t.signatureAlgorithm||{}),new Oe({name:t.signatureValue||g})]})}fromSchema(e){X(e,UO);const t=G(e,e,xs.schema({names:{acinfo:{names:{blockName:ch}},signatureAlgorithm:{names:{blockName:uh}},signatureValue:hh}}));j.assertSchema(t,this.className),this.acinfo=new ts({schema:t.result.acinfo}),this.signatureAlgorithm=new $({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}toSchema(){return new I({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}xs.CLASS_NAME="AttributeCertificateV2";const pa="contentType",jo="content",MO=[pa,jo];class Ze extends Y{constructor(e={}){super(),this.contentType=d(e,pa,Ze.defaultValues(pa)),this.content=d(e,jo,Ze.defaultValues(jo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case pa:return g;case jo:return new Ae;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case pa:return typeof t=="string"&&t===this.defaultValues(pa);case jo:return t instanceof Ae;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return"optional"in t||(t.optional=!1),new I({name:t.blockName||"ContentInfo",optional:t.optional,value:[new he({name:t.contentType||pa}),new V({idBlock:{tagClass:3,tagNumber:0},value:[new Ae({name:t.content||jo})]})]})}fromSchema(e){X(e,MO);const t=G(e,e,Ze.schema());j.assertSchema(t,this.className),this.contentType=t.result.contentType.valueBlock.toString(),this.content=t.result.content}toSchema(){return new I({value:[new he({value:this.contentType}),new V({idBlock:{tagClass:3,tagNumber:0},value:[this.content]})]})}toJSON(){const e={contentType:this.contentType};return this.content instanceof Ae||(e.content=this.content.toJSON()),e}}Ze.CLASS_NAME="ContentInfo";Ze.DATA=hy;Ze.SIGNED_DATA=Mk;Ze.ENVELOPED_DATA=Hk;Ze.ENCRYPTED_DATA=$k;const Lg="type",Dg="value",$p="utcTimeName",Fp="generalTimeName",HO=[$p,Fp];var Mb;(function(s){s[s.UTCTime=0]="UTCTime",s[s.GeneralizedTime=1]="GeneralizedTime",s[s.empty=2]="empty"})(Mb||(Mb={}));class ft extends Y{constructor(e={}){super(),this.type=d(e,Lg,ft.defaultValues(Lg)),this.value=d(e,Dg,ft.defaultValues(Dg)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Lg:return 0;case Dg:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(e={},t=!1){const n=d(e,"names",{});return new at({optional:t,value:[new Ic({name:n.utcTimeName||g}),new it({name:n.generalTimeName||g})]})}fromSchema(e){X(e,HO);const t=G(e,e,ft.schema({names:{utcTimeName:$p,generalTimeName:Fp}}));j.assertSchema(t,this.className),$p in t.result&&(this.type=0,this.value=t.result.utcTimeName.toDate()),Fp in t.result&&(this.type=1,this.value=t.result.generalTimeName.toDate())}toSchema(){return this.type===0?new Ic({valueDate:this.value}):this.type===1?new it({valueDate:this.value}):{}}toJSON(){return{type:this.type,value:this.value}}}ft.CLASS_NAME="Time";const Ug="tbs",Vr="version",_d="serialNumber",Bd="signature",xd="issuer",Td="notBefore",Rd="notAfter",Od="subject",Vd="subjectPublicKeyInfo",fh="issuerUniqueID",dh="subjectUniqueID",mh="extensions",gh="signatureAlgorithm",ph="signatureValue",Rs="tbsCertificate",Bm=`${Rs}.${Vr}`,fy=`${Rs}.${_d}`,dy=`${Rs}.${Bd}`,my=`${Rs}.${xd}`,xm=`${Rs}.${Td}`,Tm=`${Rs}.${Rd}`,gy=`${Rs}.${Od}`,py=`${Rs}.${Vd}`,Rm=`${Rs}.${fh}`,Om=`${Rs}.${dh}`,ef=`${Rs}.${mh}`,$O=[Rs,Bm,fy,dy,my,xm,Tm,gy,py,Rm,Om,ef,gh,ph];function FO(s={}){const e=d(s,"names",{});return new I({name:e.blockName||Rs,value:[new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new U({name:e.tbsCertificateVersion||Bm})]}),new U({name:e.tbsCertificateSerialNumber||fy}),$.schema(e.signature||{names:{blockName:dy}}),Ge.schema(e.issuer||{names:{blockName:my}}),new I({name:e.tbsCertificateValidity||"tbsCertificate.validity",value:[ft.schema(e.notBefore||{names:{utcTimeName:xm,generalTimeName:xm}}),ft.schema(e.notAfter||{names:{utcTimeName:Tm,generalTimeName:Tm}})]}),Ge.schema(e.subject||{names:{blockName:gy}}),as.schema(e.subjectPublicKeyInfo||{names:{blockName:py}}),new Se({name:e.tbsCertificateIssuerUniqueID||Rm,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new Se({name:e.tbsCertificateSubjectUniqueID||Om,optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[ot.schema(e.extensions||{names:{blockName:ef}})]})]})}class De extends Y{constructor(e={}){super(),this.tbsView=new Uint8Array(d(e,Ug,De.defaultValues(Ug))),this.version=d(e,Vr,De.defaultValues(Vr)),this.serialNumber=d(e,_d,De.defaultValues(_d)),this.signature=d(e,Bd,De.defaultValues(Bd)),this.issuer=d(e,xd,De.defaultValues(xd)),this.notBefore=d(e,Td,De.defaultValues(Td)),this.notAfter=d(e,Rd,De.defaultValues(Rd)),this.subject=d(e,Od,De.defaultValues(Od)),this.subjectPublicKeyInfo=d(e,Vd,De.defaultValues(Vd)),fh in e&&(this.issuerUniqueID=d(e,fh,De.defaultValues(fh))),dh in e&&(this.subjectUniqueID=d(e,dh,De.defaultValues(dh))),mh in e&&(this.extensions=d(e,mh,De.defaultValues(mh))),this.signatureAlgorithm=d(e,gh,De.defaultValues(gh)),this.signatureValue=d(e,ph,De.defaultValues(ph)),e.schema&&this.fromSchema(e.schema)}get tbs(){return ve.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case Ug:return _t;case Vr:return 0;case _d:return new U;case Bd:return new $;case xd:return new Ge;case Td:return new ft;case Rd:return new ft;case Od:return new Ge;case Vd:return new as;case fh:return _t;case dh:return _t;case mh:return[];case gh:return new $;case ph:return new Oe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[FO(t.tbsCertificate),$.schema(t.signatureAlgorithm||{names:{blockName:gh}}),new Oe({name:t.signatureValue||ph})]})}fromSchema(e){X(e,$O);const t=G(e,e,De.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:ef}}}}}}));j.assertSchema(t,this.className),this.tbsView=t.result.tbsCertificate.valueBeforeDecodeView,Bm in t.result&&(this.version=t.result[Bm].valueBlock.valueDec),this.serialNumber=t.result[fy],this.signature=new $({schema:t.result[dy]}),this.issuer=new Ge({schema:t.result[my]}),this.notBefore=new ft({schema:t.result[xm]}),this.notAfter=new ft({schema:t.result[Tm]}),this.subject=new Ge({schema:t.result[gy]}),this.subjectPublicKeyInfo=new as({schema:t.result[py]}),Rm in t.result&&(this.issuerUniqueID=t.result[Rm].valueBlock.valueHex),Om in t.result&&(this.subjectUniqueID=t.result[Om].valueBlock.valueHex),ef in t.result&&(this.extensions=Array.from(t.result[ef],n=>new Fe({schema:n}))),this.signatureAlgorithm=new $({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];return Vr in this&&this.version!==De.defaultValues(Vr)&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new U({value:this.version})]})),e.push(this.serialNumber),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(new I({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]})),e.push(this.subject.toSchema()),e.push(this.subjectPublicKeyInfo.toSchema()),this.issuerUniqueID&&e.push(new Se({optional:!0,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID})),this.subjectUniqueID&&e.push(new Se({optional:!0,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID})),this.extensions&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[new I({value:Array.from(this.extensions,t=>t.toSchema())})]})),new I({value:e})}toSchema(e=!1){let t;if(e===!1){if(!this.tbsView.byteLength)return De.schema().value[0];const n=bt(this.tbsView);j.assert(n,"TBS Certificate"),t=n.result}else t=this.encodeTBS();return new I({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:be.ToHex(this.tbsView),version:this.version,serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return Vr in this&&this.version!==De.defaultValues(Vr)&&(e.version=this.version),this.issuerUniqueID&&(e.issuerUniqueID=be.ToHex(this.issuerUniqueID)),this.subjectUniqueID&&(e.subjectUniqueID=be.ToHex(this.subjectUniqueID)),this.extensions&&(e.extensions=Array.from(this.extensions,t=>t.toJSON())),e}async getPublicKey(e,t=Ne(!0)){return t.getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}async getKeyHash(e="SHA-1",t=Ne(!0)){return t.digest({name:e},this.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView)}async sign(e,t="SHA-1",n=Ne(!0)){if(!e)throw new Error("Need to provide a private key for signing");const r=await n.getSignatureParameters(e,t),i=r.parameters;this.signature=r.signatureAlgorithm,this.signatureAlgorithm=r.signatureAlgorithm,this.tbsView=new Uint8Array(this.encodeTBS().toBER());const a=await n.signWithPrivateKey(this.tbsView,e,i);this.signatureValue=new Oe({valueHex:a})}async verify(e,t=Ne(!0)){let n;if(e?n=e.subjectPublicKeyInfo:this.issuer.isEqual(this.subject)&&(n=this.subjectPublicKeyInfo),!(n instanceof as))throw new Error("Please provide issuer certificate as a parameter");return t.verifyWithPublicKey(this.tbsView,this.signatureValue,n,this.signatureAlgorithm)}}De.CLASS_NAME="Certificate";function qk(s,e=null){if(e&&s.issuer.isEqual(e.issuer)&&s.serialNumber.isEqual(e.serialNumber))return null;let t=!1;if(s.extensions){for(const n of s.extensions)if(n.extnID===oy&&n.parsedValue instanceof vi&&n.parsedValue.cA){t=!0;break}}return t?s:null}const Jo="certId",Wo="certValue",ko="parsedValue",KO=[Jo,Wo];class Ga extends Y{constructor(e={}){super(),this.certId=d(e,Jo,Ga.defaultValues(Jo)),this.certValue=d(e,Wo,Ga.defaultValues(Wo)),ko in e&&(this.parsedValue=d(e,ko,Ga.defaultValues(ko))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Jo:return g;case Wo:return new Ae;case ko:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Jo:return t===g;case Wo:return t instanceof Ae;case ko:return t instanceof Object&&Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new he({name:t.id||"id"}),new V({idBlock:{tagClass:3,tagNumber:0},value:[new Ae({name:t.value||"value"})]})]})}fromSchema(e){X(e,KO);const t=G(e,e,Ga.schema({names:{id:Jo,value:Wo}}));j.assertSchema(t,this.className),this.certId=t.result.certId.valueBlock.toString(),this.certValue=t.result.certValue;const n=this.certValue.valueBlock.valueHexView;switch(this.certId){case bb:try{this.parsedValue=De.fromBER(n)}catch{xs.fromBER(n)}break;case Sb:this.parsedValue=xs.fromBER(n);break;case qR:default:throw new Error(`Incorrect CERT_ID value in CertBag: ${this.certId}`)}}toSchema(){return ko in this&&("acinfo"in this.parsedValue?this.certId=Sb:this.certId=bb,this.certValue=new z({valueHex:this.parsedValue.toSchema().toBER(!1)})),new I({value:[new he({value:this.certId}),new V({idBlock:{tagClass:3,tagNumber:0},value:["toSchema"in this.certValue?this.certValue.toSchema():this.certValue]})]})}toJSON(){return{certId:this.certId,certValue:this.certValue.toJSON()}}}Ga.CLASS_NAME="CertBag";const wh="userCertificate",qo="revocationDate",wa="crlEntryExtensions",jO=[wh,qo,wa];class hi extends Y{constructor(e={}){super(),this.userCertificate=d(e,wh,hi.defaultValues(wh)),this.revocationDate=d(e,qo,hi.defaultValues(qo)),wa in e&&(this.crlEntryExtensions=d(e,wa,hi.defaultValues(wa))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wh:return new U;case qo:return new ft;case wa:return new ot;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new U({name:t.userCertificate||wh}),ft.schema({names:{utcTimeName:t.revocationDate||qo,generalTimeName:t.revocationDate||qo}}),ot.schema({names:{blockName:t.crlEntryExtensions||wa}},!0)]})}fromSchema(e){X(e,jO);const t=G(e,e,hi.schema());j.assertSchema(t,this.className),this.userCertificate=t.result.userCertificate,this.revocationDate=new ft({schema:t.result.revocationDate}),wa in t.result&&(this.crlEntryExtensions=new ot({schema:t.result.crlEntryExtensions}))}toSchema(){const e=[this.userCertificate,this.revocationDate.toSchema()];return this.crlEntryExtensions&&e.push(this.crlEntryExtensions.toSchema()),new I({value:e})}toJSON(){const e={userCertificate:this.userCertificate.toJSON(),revocationDate:this.revocationDate.toJSON()};return this.crlEntryExtensions&&(e.crlEntryExtensions=this.crlEntryExtensions.toJSON()),e}}hi.CLASS_NAME="RevokedCertificate";const Mg="tbs",Fc="version",Hg="signature",$g="issuer",Fg="thisUpdate",sd="nextUpdate",nd="revokedCertificates",rd="crlExtensions",yh="signatureAlgorithm",vh="signatureValue",ur="tbsCertList",Vm=`${ur}.version`,wy=`${ur}.signature`,yy=`${ur}.issuer`,Pm=`${ur}.thisUpdate`,Sf=`${ur}.nextUpdate`,Lm=`${ur}.revokedCertificates`,Dm=`${ur}.extensions`,JO=[ur,Vm,wy,yy,Pm,Sf,Lm,Dm,yh,vh];function WO(s={}){const e=d(s,"names",{});return new I({name:e.blockName||ur,value:[new U({optional:!0,name:e.tbsCertListVersion||Vm,value:2}),$.schema(e.signature||{names:{blockName:wy}}),Ge.schema(e.issuer||{names:{blockName:yy}}),ft.schema(e.tbsCertListThisUpdate||{names:{utcTimeName:Pm,generalTimeName:Pm}}),ft.schema(e.tbsCertListNextUpdate||{names:{utcTimeName:Sf,generalTimeName:Sf}},!0),new I({optional:!0,value:[new Ie({name:e.tbsCertListRevokedCertificates||Lm,value:new I({value:[new U,ft.schema(),ot.schema({},!0)]})})]}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[ot.schema(e.crlExtensions||{names:{blockName:Dm}})]})]})}const qO=[cy,Tk,VR,PR,Rk,ly,uy,LR,DR,Ok];class At extends Y{constructor(e={}){super(),this.tbsView=new Uint8Array(d(e,Mg,At.defaultValues(Mg))),this.version=d(e,Fc,At.defaultValues(Fc)),this.signature=d(e,Hg,At.defaultValues(Hg)),this.issuer=d(e,$g,At.defaultValues($g)),this.thisUpdate=d(e,Fg,At.defaultValues(Fg)),sd in e&&(this.nextUpdate=d(e,sd,At.defaultValues(sd))),nd in e&&(this.revokedCertificates=d(e,nd,At.defaultValues(nd))),rd in e&&(this.crlExtensions=d(e,rd,At.defaultValues(rd))),this.signatureAlgorithm=d(e,yh,At.defaultValues(yh)),this.signatureValue=d(e,vh,At.defaultValues(vh)),e.schema&&this.fromSchema(e.schema)}get tbs(){return ve.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case Mg:return _t;case Fc:return 0;case Hg:return new $;case $g:return new Ge;case Fg:return new ft;case sd:return new ft;case nd:return[];case rd:return new ot;case yh:return new $;case vh:return new Oe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||"CertificateList",value:[WO(e),$.schema(t.signatureAlgorithm||{names:{blockName:yh}}),new Oe({name:t.signatureValue||vh})]})}fromSchema(e){X(e,JO);const t=G(e,e,At.schema());j.assertSchema(t,this.className),this.tbsView=t.result.tbsCertList.valueBeforeDecodeView,Vm in t.result&&(this.version=t.result[Vm].valueBlock.valueDec),this.signature=new $({schema:t.result[wy]}),this.issuer=new Ge({schema:t.result[yy]}),this.thisUpdate=new ft({schema:t.result[Pm]}),Sf in t.result&&(this.nextUpdate=new ft({schema:t.result[Sf]})),Lm in t.result&&(this.revokedCertificates=Array.from(t.result[Lm],n=>new hi({schema:n}))),Dm in t.result&&(this.crlExtensions=new ot({schema:t.result[Dm]})),this.signatureAlgorithm=new $({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];return this.version!==At.defaultValues(Fc)&&e.push(new U({value:this.version})),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(this.thisUpdate.toSchema()),this.nextUpdate&&e.push(this.nextUpdate.toSchema()),this.revokedCertificates&&e.push(new I({value:Array.from(this.revokedCertificates,t=>t.toSchema())})),this.crlExtensions&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.crlExtensions.toSchema()]})),new I({value:e})}toSchema(e=!1){let t;if(e)t=this.encodeTBS();else{if(!this.tbsView.byteLength)return At.schema();const n=bt(this.tbsView);j.assert(n,"TBS Certificate Revocation List"),t=n.result}return new I({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:be.ToHex(this.tbsView),version:this.version,signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),thisUpdate:this.thisUpdate.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return this.version!==At.defaultValues(Fc)&&(e.version=this.version),this.nextUpdate&&(e.nextUpdate=this.nextUpdate.toJSON()),this.revokedCertificates&&(e.revokedCertificates=Array.from(this.revokedCertificates,t=>t.toJSON())),this.crlExtensions&&(e.crlExtensions=this.crlExtensions.toJSON()),e}isCertificateRevoked(e){if(!this.issuer.isEqual(e.issuer)||!this.revokedCertificates)return!1;for(const t of this.revokedCertificates)if(t.userCertificate.isEqual(e.serialNumber))return!0;return!1}async sign(e,t="SHA-1",n=Ne(!0)){if(!e)throw new Error("Need to provide a private key for signing");const r=await n.getSignatureParameters(e,t),{parameters:i}=r;this.signature=r.signatureAlgorithm,this.signatureAlgorithm=r.signatureAlgorithm,this.tbsView=new Uint8Array(this.encodeTBS().toBER());const a=await n.signWithPrivateKey(this.tbsView,e,i);this.signatureValue=new Oe({valueHex:a})}async verify(e={},t=Ne(!0)){let n;if(e.issuerCertificate&&(n=e.issuerCertificate.subjectPublicKeyInfo,!this.issuer.isEqual(e.issuerCertificate.subject)))return!1;if(e.publicKeyInfo&&(n=e.publicKeyInfo),!n)throw new Error("Issuer's certificate must be provided as an input parameter");if(this.crlExtensions){for(const r of this.crlExtensions.extensions)if(r.critical&&!qO.includes(r.extnID))return!1}return t.verifyWithPublicKey(this.tbsView,this.signatureValue,n,this.signatureAlgorithm)}}At.CLASS_NAME="CertificateRevocationList";const Go="crlId",Yo="crlValue",Kc="parsedValue",GO=[Go,Yo];class Ya extends Y{constructor(e={}){super(),this.crlId=d(e,Go,Ya.defaultValues(Go)),this.crlValue=d(e,Yo,Ya.defaultValues(Yo)),Kc in e&&(this.parsedValue=d(e,Kc,Ya.defaultValues(Kc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Go:return g;case Yo:return new Ae;case Kc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Go:return t===g;case Yo:return t instanceof Ae;case Kc:return t instanceof Object&&Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new he({name:t.id||"id"}),new V({idBlock:{tagClass:3,tagNumber:0},value:[new Ae({name:t.value||"value"})]})]})}fromSchema(e){X(e,GO);const t=G(e,e,Ya.schema({names:{id:Go,value:Yo}}));switch(j.assertSchema(t,this.className),this.crlId=t.result.crlId.valueBlock.toString(),this.crlValue=t.result.crlValue,this.crlId){case Ab:this.parsedValue=At.fromBER(this.certValue.valueBlock.valueHex);break;default:throw new Error(`Incorrect CRL_ID value in CRLBag: ${this.crlId}`)}}toSchema(){return this.parsedValue&&(this.crlId=Ab,this.crlValue=new z({valueHex:this.parsedValue.toSchema().toBER(!1)})),new I({value:[new he({value:this.crlId}),new V({idBlock:{tagClass:3,tagNumber:0},value:[this.crlValue.toSchema()]})]})}toJSON(){return{crlId:this.crlId,crlValue:this.crlValue.toJSON()}}}Ya.CLASS_NAME="CRLBag";const Xo="version",Qo="encryptedContentInfo",Pr="unprotectedAttrs",YO=[Xo,Qo,Pr];class bn extends Y{constructor(e={}){super(),this.version=d(e,Xo,bn.defaultValues(Xo)),this.encryptedContentInfo=d(e,Qo,bn.defaultValues(Qo)),Pr in e&&(this.unprotectedAttrs=d(e,Pr,bn.defaultValues(Pr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Xo:return 0;case Qo:return new wt;case Pr:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Xo:return t===0;case Qo:return wt.compareWithDefault("contentType",t.contentType)&&wt.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&wt.compareWithDefault("encryptedContent",t.encryptedContent);case Pr:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new U({name:t.version||g}),wt.schema(t.encryptedContentInfo||{}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ie({name:t.unprotectedAttrs||g,value:et.schema()})]})]})}fromSchema(e){X(e,YO);const t=G(e,e,bn.schema({names:{version:Xo,encryptedContentInfo:{names:{blockName:Qo}},unprotectedAttrs:Pr}}));j.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.encryptedContentInfo=new wt({schema:t.result.encryptedContentInfo}),Pr in t.result&&(this.unprotectedAttrs=Array.from(t.result.unprotectedAttrs,n=>new et({schema:n})))}toSchema(){const e=[];return e.push(new U({value:this.version})),e.push(this.encryptedContentInfo.toSchema()),this.unprotectedAttrs&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,t=>t.toSchema())})),new I({value:e})}toJSON(){const e={version:this.version,encryptedContentInfo:this.encryptedContentInfo.toJSON()};return this.unprotectedAttrs&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,t=>t.toJSON())),e}async encrypt(e,t=Ne(!0)){qe.assert(e,"parameters","object");const n={...e,contentType:"1.2.840.113549.1.7.1"};this.encryptedContentInfo=await t.encryptEncryptedContentInfo(n)}async decrypt(e,t=Ne(!0)){qe.assert(e,"parameters","object");const n={...e,encryptedContentInfo:this.encryptedContentInfo};return t.decryptEncryptedContentInfo(n)}}bn.CLASS_NAME="EncryptedData";const ya="encryptionAlgorithm",Lr="encryptedData",jc="parsedValue",XO=[ya,Lr];class $n extends Y{constructor(e={}){super(),this.encryptionAlgorithm=d(e,ya,$n.defaultValues(ya)),this.encryptedData=d(e,Lr,$n.defaultValues(Lr)),jc in e&&(this.parsedValue=d(e,jc,$n.defaultValues(jc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ya:return new $;case Lr:return new z;case jc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ya:return $.compareWithDefault("algorithmId",t.algorithmId)&&!("algorithmParams"in t);case Lr:return t.isEqual($n.defaultValues(e));case jc:return t instanceof Object&&Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[$.schema(t.encryptionAlgorithm||{names:{blockName:ya}}),new at({value:[new z({name:t.encryptedData||Lr}),new z({idBlock:{isConstructed:!0},name:t.encryptedData||Lr})]})]})}fromSchema(e){X(e,XO);const t=G(e,e,$n.schema({names:{encryptionAlgorithm:{names:{blockName:ya}},encryptedData:Lr}}));j.assertSchema(t,this.className),this.encryptionAlgorithm=new $({schema:t.result.encryptionAlgorithm}),this.encryptedData=t.result.encryptedData}toSchema(){return new I({value:[this.encryptionAlgorithm.toSchema(),this.encryptedData]})}toJSON(){return{encryptionAlgorithm:this.encryptionAlgorithm.toJSON(),encryptedData:this.encryptedData.toJSON()}}async parseInternalValues(e,t=Ne(!0)){const r=await new bn({encryptedContentInfo:new wt({contentEncryptionAlgorithm:this.encryptionAlgorithm,encryptedContent:this.encryptedData})}).decrypt(e,t);this.parsedValue=Ns.fromBER(r)}async makeInternalValues(e,t=Ne(!0)){if(!this.parsedValue)throw new Error('Please initialize "parsedValue" first');const n=new bn,r={...e,contentToEncrypt:this.parsedValue.toSchema().toBER(!1)};if(await n.encrypt(r,t),!n.encryptedContentInfo.encryptedContent)throw new Error("The filed `encryptedContent` in EncryptedContentInfo is empty");this.encryptionAlgorithm=n.encryptedContentInfo.contentEncryptionAlgorithm,this.encryptedData=n.encryptedContentInfo.encryptedContent}}$n.CLASS_NAME="PKCS8ShroudedKeyBag";const zo="secretTypeId",Zo="secretValue",QO=[zo,Zo];class dc extends Y{constructor(e={}){super(),this.secretTypeId=d(e,zo,dc.defaultValues(zo)),this.secretValue=d(e,Zo,dc.defaultValues(Zo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case zo:return g;case Zo:return new Ae;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case zo:return t===g;case Zo:return t instanceof Ae;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new he({name:t.id||"id"}),new V({idBlock:{tagClass:3,tagNumber:0},value:[new Ae({name:t.value||"value"})]})]})}fromSchema(e){X(e,QO);const t=G(e,e,dc.schema({names:{id:zo,value:Zo}}));j.assertSchema(t,this.className),this.secretTypeId=t.result.secretTypeId.valueBlock.toString(),this.secretValue=t.result.secretValue}toSchema(){return new I({value:[new he({value:this.secretTypeId}),new V({idBlock:{tagClass:3,tagNumber:0},value:[this.secretValue.toSchema()]})]})}toJSON(){return{secretTypeId:this.secretTypeId,secretValue:this.secretValue.toJSON()}}}dc.CLASS_NAME="SecretBag";class ii{static getItems(){return this.items||(this.items={},ii.register("1.2.840.113549.1.12.10.1.1",Ns),ii.register("1.2.840.113549.1.12.10.1.2",$n),ii.register("1.2.840.113549.1.12.10.1.3",Ga),ii.register("1.2.840.113549.1.12.10.1.4",Ya),ii.register("1.2.840.113549.1.12.10.1.5",dc),ii.register("1.2.840.113549.1.12.10.1.6",Yn)),this.items}static register(e,t){this.getItems()[e]=t}static find(e){return this.getItems()[e]||null}}const va="bagId",ba="bagValue",Pn="bagAttributes",zO=[va,ba,Pn];class fi extends Y{constructor(e={}){super(),this.bagId=d(e,va,fi.defaultValues(va)),this.bagValue=d(e,ba,fi.defaultValues(ba)),Pn in e&&(this.bagAttributes=d(e,Pn,fi.defaultValues(Pn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case va:return g;case ba:return new Ae;case Pn:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case va:return t===g;case ba:return t instanceof Ae;case Pn:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new he({name:t.bagId||va}),new V({idBlock:{tagClass:3,tagNumber:0},value:[new Ae({name:t.bagValue||ba})]}),new yt({optional:!0,value:[new Ie({name:t.bagAttributes||Pn,value:et.schema()})]})]})}fromSchema(e){X(e,zO);const t=G(e,e,fi.schema({names:{bagId:va,bagValue:ba,bagAttributes:Pn}}));j.assertSchema(t,this.className),this.bagId=t.result.bagId.valueBlock.toString();const n=ii.find(this.bagId);if(!n)throw new Error(`Invalid BAG_ID for SafeBag: ${this.bagId}`);this.bagValue=new n({schema:t.result.bagValue}),Pn in t.result&&(this.bagAttributes=Array.from(t.result.bagAttributes,r=>new et({schema:r})))}toSchema(){const e=[new he({value:this.bagId}),new V({idBlock:{tagClass:3,tagNumber:0},value:[this.bagValue.toSchema()]})];return this.bagAttributes&&e.push(new yt({value:Array.from(this.bagAttributes,t=>t.toSchema())})),new I({value:e})}toJSON(){const e={bagId:this.bagId,bagValue:this.bagValue.toJSON()};return this.bagAttributes&&(e.bagAttributes=Array.from(this.bagAttributes,t=>t.toJSON())),e}}fi.CLASS_NAME="SafeBag";const Eo="safeBags";class Yn extends Y{constructor(e={}){super(),this.safeBags=d(e,Eo,Yn.defaultValues(Eo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Eo:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Eo:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new Ie({name:t.safeBags||g,value:fi.schema()})]})}fromSchema(e){X(e,[Eo]);const t=G(e,e,Yn.schema({names:{safeBags:Eo}}));j.assertSchema(t,this.className),this.safeBags=Array.from(t.result.safeBags,n=>new fi({schema:n}))}toSchema(){return new I({value:Array.from(this.safeBags,e=>e.toSchema())})}toJSON(){return{safeBags:Array.from(this.safeBags,e=>e.toJSON())}}}Yn.CLASS_NAME="SafeContents";const bh="otherCertFormat",Sh="otherCert",ZO=[bh,Sh];class Si extends Y{constructor(e={}){super(),this.otherCertFormat=d(e,bh,Si.defaultValues(bh)),this.otherCert=d(e,Sh,Si.defaultValues(Sh)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case bh:return g;case Sh:return new Ae;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new he({name:t.otherCertFormat||bh}),new Ae({name:t.otherCert||Sh})]})}fromSchema(e){X(e,ZO);const t=G(e,e,Si.schema());j.assertSchema(t,this.className),this.otherCertFormat=t.result.otherCertFormat.valueBlock.toString(),this.otherCert=t.result.otherCert}toSchema(){return new I({value:[new he({value:this.otherCertFormat}),this.otherCert]})}toJSON(){const e={otherCertFormat:this.otherCertFormat};return this.otherCert instanceof Ae||(e.otherCert=this.otherCert.toJSON()),e}}const Ah="certificates",e2=[Ah];class An extends Y{constructor(e={}){super(),this.certificates=d(e,Ah,An.defaultValues(Ah)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ah:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new yt({name:t.blockName||g,value:[new Ie({name:t.certificates||Ah,value:new at({value:[De.schema(),new V({idBlock:{tagClass:3,tagNumber:0},value:[new Ae]}),new V({idBlock:{tagClass:3,tagNumber:1},value:[new I]}),new V({idBlock:{tagClass:3,tagNumber:2},value:xs.schema().valueBlock.value}),new V({idBlock:{tagClass:3,tagNumber:3},value:Si.schema().valueBlock.value})]})})]})}fromSchema(e){X(e,e2);const t=G(e,e,An.schema());j.assertSchema(t,this.className),this.certificates=Array.from(t.result.certificates||[],n=>{const r=n.idBlock.tagNumber;if(n.idBlock.tagClass===1)return new De({schema:n});const i=new I({value:n.valueBlock.value});switch(r){case 1:return i.valueBlock.value[0].valueBlock.value[0].valueBlock.valueDec===1?new xs({schema:i}):new qn({schema:i});case 2:return new xs({schema:i});case 3:return new Si({schema:i})}return n})}toSchema(){return new yt({value:Array.from(this.certificates,e=>{switch(!0){case e instanceof De:return e.toSchema();case e instanceof qn:return new V({idBlock:{tagClass:3,tagNumber:1},value:e.toSchema().valueBlock.value});case e instanceof xs:return new V({idBlock:{tagClass:3,tagNumber:2},value:e.toSchema().valueBlock.value});case e instanceof Si:return new V({idBlock:{tagClass:3,tagNumber:3},value:e.toSchema().valueBlock.value})}return e.toSchema()})})}toJSON(){return{certificates:Array.from(this.certificates,e=>e.toJSON())}}}An.CLASS_NAME="CertificateSet";const kh="otherRevInfoFormat",Eh="otherRevInfo",t2=[kh,Eh];class tr extends Y{constructor(e={}){super(),this.otherRevInfoFormat=d(e,kh,tr.defaultValues(kh)),this.otherRevInfo=d(e,Eh,tr.defaultValues(Eh)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case kh:return g;case Eh:return new Ae;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new he({name:t.otherRevInfoFormat||kh}),new Ae({name:t.otherRevInfo||Eh})]})}fromSchema(e){X(e,t2);const t=G(e,e,tr.schema());j.assertSchema(t,this.className),this.otherRevInfoFormat=t.result.otherRevInfoFormat.valueBlock.toString(),this.otherRevInfo=t.result.otherRevInfo}toSchema(){return new I({value:[new he({value:this.otherRevInfoFormat}),this.otherRevInfo]})}toJSON(){const e={otherRevInfoFormat:this.otherRevInfoFormat};return this.otherRevInfo instanceof Ae||(e.otherRevInfo=this.otherRevInfo.toJSON()),e}}tr.CLASS_NAME="OtherRevocationInfoFormat";const Ch="crls",Kg="otherRevocationInfos",s2=[Ch];class sr extends Y{constructor(e={}){super(),this.crls=d(e,Ch,sr.defaultValues(Ch)),this.otherRevocationInfos=d(e,Kg,sr.defaultValues(Kg)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ch:return[];case Kg:return[];default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new yt({name:t.blockName||g,value:[new Ie({name:t.crls||g,value:new at({value:[At.schema(),new V({idBlock:{tagClass:3,tagNumber:1},value:[new he,new Ae]})]})})]})}fromSchema(e){X(e,s2);const t=G(e,e,sr.schema({names:{crls:Ch}}));if(j.assertSchema(t,this.className),t.result.crls)for(const n of t.result.crls)n.idBlock.tagClass===1?this.crls.push(new At({schema:n})):this.otherRevocationInfos.push(new tr({schema:n}))}toSchema(){const e=[];return e.push(...Array.from(this.crls,t=>t.toSchema())),e.push(...Array.from(this.otherRevocationInfos,t=>{const n=t.toSchema();return n.idBlock.tagClass=3,n.idBlock.tagNumber=1,n})),new yt({value:e})}toJSON(){return{crls:Array.from(this.crls,e=>e.toJSON()),otherRevocationInfos:Array.from(this.otherRevocationInfos,e=>e.toJSON())}}}sr.CLASS_NAME="RevocationInfoChoices";const Nh="certs",Sa="crls",n2=[Nh,Sa];class ao extends Y{constructor(e={}){super(),this.crls=d(e,Sa,ao.defaultValues(Sa)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Nh:return new An;case Sa:return new sr;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Nh:return t.certificates.length===0;case Sa:return t.crls.length===0&&t.otherRevocationInfos.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new V({name:t.certs||g,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:An.schema().valueBlock.value}),new V({name:t.crls||g,optional:!0,idBlock:{tagClass:3,tagNumber:1},value:sr.schema().valueBlock.value})]})}fromSchema(e){X(e,n2);const t=G(e,e,ao.schema({names:{certs:Nh,crls:Sa}}));j.assertSchema(t,this.className),Nh in t.result&&(this.certs=new An({schema:new yt({value:t.result.certs.valueBlock.value})})),Sa in t.result&&(this.crls=new sr({schema:new yt({value:t.result.crls.valueBlock.value})}))}toSchema(){const e=[];return this.certs&&e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:this.certs.toSchema().valueBlock.value})),this.crls&&e.push(new V({idBlock:{tagClass:3,tagNumber:1},value:this.crls.toSchema().valueBlock.value})),new I({value:e})}toJSON(){const e={};return this.certs&&(e.certs=this.certs.toJSON()),this.crls&&(e.crls=this.crls.toJSON()),e}}ao.CLASS_NAME="OriginatorInfo";const Ih="issuer",_h="serialNumber",r2=[Ih,_h];class Bt extends Y{constructor(e={}){super(),this.issuer=d(e,Ih,Bt.defaultValues(Ih)),this.serialNumber=d(e,_h,Bt.defaultValues(_h)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ih:return new Ge;case _h:return new U;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[Ge.schema(t.issuer||{}),new U({name:t.serialNumber||g})]})}fromSchema(e){X(e,r2);const t=G(e,e,Bt.schema({names:{issuer:{names:{blockName:Ih}},serialNumber:_h}}));j.assertSchema(t,this.className),this.issuer=new Ge({schema:t.result.issuer}),this.serialNumber=t.result.serialNumber}toSchema(){return new I({value:[this.issuer.toSchema(),this.serialNumber]})}toJSON(){return{issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()}}}Bt.CLASS_NAME="IssuerAndSerialNumber";const id="variant",Jc="value",i2=["blockName"];class mc extends Y{constructor(e={}){super(),this.variant=d(e,id,mc.defaultValues(id)),Jc in e&&(this.value=d(e,Jc,mc.defaultValues(Jc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case id:return-1;case Jc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case id:return t===-1;case Jc:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new at({value:[Bt.schema({names:{blockName:t.blockName||g}}),new Se({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:0}})]})}fromSchema(e){X(e,i2);const t=G(e,e,mc.schema({names:{blockName:"blockName"}}));j.assertSchema(t,this.className),t.result.blockName.idBlock.tagClass===1?(this.variant=1,this.value=new Bt({schema:t.result.blockName})):(this.variant=2,this.value=new z({valueHex:t.result.blockName.valueBlock.valueHex}))}toSchema(){switch(this.variant){case 1:if(!(this.value instanceof Bt))throw new Error("Incorrect type of RecipientIdentifier.value. It should be IssuerAndSerialNumber.");return this.value.toSchema();case 2:if(!(this.value instanceof z))throw new Error("Incorrect type of RecipientIdentifier.value. It should be ASN.1 OctetString.");return new Se({idBlock:{tagClass:3,tagNumber:0},valueHex:this.value.valueBlock.valueHexView});default:return new Ae}}toJSON(){const e={variant:this.variant};return(this.variant===1||this.variant===2)&&this.value&&(e.value=this.value.toJSON()),e}}mc.CLASS_NAME="RecipientIdentifier";const Aa="version",el="rid",tl="keyEncryptionAlgorithm",sl="encryptedKey",ad="recipientCertificate",a2=[Aa,el,tl,sl];class Ss extends Y{constructor(e={}){super(),this.version=d(e,Aa,Ss.defaultValues(Aa)),this.rid=d(e,el,Ss.defaultValues(el)),this.keyEncryptionAlgorithm=d(e,tl,Ss.defaultValues(tl)),this.encryptedKey=d(e,sl,Ss.defaultValues(sl)),this.recipientCertificate=d(e,ad,Ss.defaultValues(ad)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Aa:return-1;case el:return{};case tl:return new $;case sl:return new z;case ad:return new De;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Aa:return t===Ss.defaultValues(Aa);case el:return Object.keys(t).length===0;case tl:case sl:return t.isEqual(Ss.defaultValues(e));case ad:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new U({name:t.version||g}),mc.schema(t.rid||{}),$.schema(t.keyEncryptionAlgorithm||{}),new z({name:t.encryptedKey||g})]})}fromSchema(e){X(e,a2);const t=G(e,e,Ss.schema({names:{version:Aa,rid:{names:{blockName:el}},keyEncryptionAlgorithm:{names:{blockName:tl}},encryptedKey:sl}}));j.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,t.result.rid.idBlock.tagClass===3?this.rid=new z({valueHex:t.result.rid.valueBlock.valueHex}):this.rid=new Bt({schema:t.result.rid}),this.keyEncryptionAlgorithm=new $({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){const e=[];return this.rid instanceof Bt?(this.version=0,e.push(new U({value:this.version})),e.push(this.rid.toSchema())):(this.version=2,e.push(new U({value:this.version})),e.push(new Se({idBlock:{tagClass:3,tagNumber:0},valueHex:this.rid.valueBlock.valueHexView}))),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new I({value:e})}toJSON(){return{version:this.version,rid:this.rid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}Ss.CLASS_NAME="KeyTransRecipientInfo";const nl="algorithm",rl="publicKey",o2=[nl,rl];class Xn extends Y{constructor(e={}){super(),this.algorithm=d(e,nl,Xn.defaultValues(nl)),this.publicKey=d(e,rl,Xn.defaultValues(rl)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case nl:return new $;case rl:return new Oe;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case nl:case rl:return t.isEqual(Xn.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[$.schema(t.algorithm||{}),new Oe({name:t.publicKey||g})]})}fromSchema(e){X(e,o2);const t=G(e,e,Xn.schema({names:{algorithm:{names:{blockName:nl}},publicKey:rl}}));j.assertSchema(t,this.className),this.algorithm=new $({schema:t.result.algorithm}),this.publicKey=t.result.publicKey}toSchema(){return new I({value:[this.algorithm.toSchema(),this.publicKey]})}toJSON(){return{algorithm:this.algorithm.toJSON(),publicKey:this.publicKey.toJSON()}}}Xn.CLASS_NAME="OriginatorPublicKey";const od="variant",Wc="value",l2=["blockName"];class nr extends Y{constructor(e={}){super(),this.variant=d(e,od,nr.defaultValues(od)),Wc in e&&(this.value=d(e,Wc,nr.defaultValues(Wc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case od:return-1;case Wc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case od:return t===-1;case Wc:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new at({value:[Bt.schema({names:{blockName:t.blockName||g}}),new Se({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||g}),new V({idBlock:{tagClass:3,tagNumber:1},name:t.blockName||g,value:Xn.schema().valueBlock.value})]})}fromSchema(e){X(e,l2);const t=G(e,e,nr.schema({names:{blockName:"blockName"}}));j.assertSchema(t,this.className),t.result.blockName.idBlock.tagClass===1?(this.variant=1,this.value=new Bt({schema:t.result.blockName})):t.result.blockName.idBlock.tagNumber===0?(t.result.blockName.idBlock.tagClass=1,t.result.blockName.idBlock.tagNumber=4,this.variant=2,this.value=t.result.blockName):(this.variant=3,this.value=new Xn({schema:new I({value:t.result.blockName.valueBlock.value})}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return this.value.idBlock.tagClass=3,this.value.idBlock.tagNumber=0,this.value;case 3:{const e=this.value.toSchema();return e.idBlock.tagClass=3,e.idBlock.tagNumber=1,e}default:return new Ae}}toJSON(){const e={variant:this.variant};return(this.variant===1||this.variant===2||this.variant===3)&&(e.value=this.value.toJSON()),e}}nr.CLASS_NAME="OriginatorIdentifierOrKey";const il="keyAttrId",fn="keyAttr",c2=[il,fn];class nn extends Y{constructor(e={}){super(),this.keyAttrId=d(e,il,nn.defaultValues(il)),fn in e&&(this.keyAttr=d(e,fn,nn.defaultValues(fn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case il:return g;case fn:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case il:return typeof t=="string"&&t===g;case fn:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({optional:t.optional||!0,name:t.blockName||g,value:[new he({name:t.keyAttrId||g}),new Ae({optional:!0,name:t.keyAttr||g})]})}fromSchema(e){X(e,c2);const t=G(e,e,nn.schema({names:{keyAttrId:il,keyAttr:fn}}));j.assertSchema(t,this.className),this.keyAttrId=t.result.keyAttrId.valueBlock.toString(),fn in t.result&&(this.keyAttr=t.result.keyAttr)}toSchema(){const e=[];return e.push(new he({value:this.keyAttrId})),fn in this&&e.push(this.keyAttr),new I({value:e})}toJSON(){const e={keyAttrId:this.keyAttrId};return fn in this&&(e.keyAttr=this.keyAttr.toJSON()),e}}nn.CLASS_NAME="OtherKeyAttribute";const ka="subjectKeyIdentifier",Dr="date",Ur="other",u2=[ka,Dr,Ur];class wn extends Y{constructor(e={}){super(),this.subjectKeyIdentifier=d(e,ka,wn.defaultValues(ka)),Dr in e&&(this.date=d(e,Dr,wn.defaultValues(Dr))),Ur in e&&(this.other=d(e,Ur,wn.defaultValues(Ur))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ka:return new z;case Dr:return new it;case Ur:return new nn;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ka:return t.isEqual(wn.defaultValues(ka));case Dr:return t.year===0&&t.month===0&&t.day===0&&t.hour===0&&t.minute===0&&t.second===0&&t.millisecond===0;case Ur:return t.keyAttrId===g&&!("keyAttr"in t);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new z({name:t.subjectKeyIdentifier||g}),new it({optional:!0,name:t.date||g}),nn.schema(t.other||{})]})}fromSchema(e){X(e,u2);const t=G(e,e,wn.schema({names:{subjectKeyIdentifier:ka,date:Dr,other:{names:{blockName:Ur}}}}));j.assertSchema(t,this.className),this.subjectKeyIdentifier=t.result.subjectKeyIdentifier,Dr in t.result&&(this.date=t.result.date),Ur in t.result&&(this.other=new nn({schema:t.result.other}))}toSchema(){const e=[];return e.push(this.subjectKeyIdentifier),this.date&&e.push(this.date),this.other&&e.push(this.other.toSchema()),new I({value:e})}toJSON(){const e={subjectKeyIdentifier:this.subjectKeyIdentifier.toJSON()};return this.date&&(e.date=this.date.toJSON()),this.other&&(e.other=this.other.toJSON()),e}}wn.CLASS_NAME="RecipientKeyIdentifier";const ld="variant",cd="value",h2=["blockName"];class kn extends Y{constructor(e={}){super(),this.variant=d(e,ld,kn.defaultValues(ld)),this.value=d(e,cd,kn.defaultValues(cd)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ld:return-1;case cd:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ld:return t===-1;case cd:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new at({value:[Bt.schema(t.issuerAndSerialNumber||{names:{blockName:t.blockName||g}}),new V({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:0},value:wn.schema(t.rKeyId||{names:{blockName:t.blockName||g}}).valueBlock.value})]})}fromSchema(e){X(e,h2);const t=G(e,e,kn.schema({names:{blockName:"blockName"}}));j.assertSchema(t,this.className),t.result.blockName.idBlock.tagClass===1?(this.variant=1,this.value=new Bt({schema:t.result.blockName})):(this.variant=2,this.value=new wn({schema:new I({value:t.result.blockName.valueBlock.value})}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new V({idBlock:{tagClass:3,tagNumber:0},value:this.value.toSchema().valueBlock.value});default:return new Ae}}toJSON(){const e={variant:this.variant};return(this.variant===1||this.variant===2)&&(e.value=this.value.toJSON()),e}}kn.CLASS_NAME="KeyAgreeRecipientIdentifier";const al="rid",Ea="encryptedKey",f2=[al,Ea];class Qn extends Y{constructor(e={}){super(),this.rid=d(e,al,Qn.defaultValues(al)),this.encryptedKey=d(e,Ea,Qn.defaultValues(Ea)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case al:return new kn;case Ea:return new z;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case al:return t.variant===-1&&!("value"in t);case Ea:return t.isEqual(Qn.defaultValues(Ea));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[kn.schema(t.rid||{}),new z({name:t.encryptedKey||g})]})}fromSchema(e){X(e,f2);const t=G(e,e,Qn.schema({names:{rid:{names:{blockName:al}},encryptedKey:Ea}}));j.assertSchema(t,this.className),this.rid=new kn({schema:t.result.rid}),this.encryptedKey=t.result.encryptedKey}toSchema(){return new I({value:[this.rid.toSchema(),this.encryptedKey]})}toJSON(){return{rid:this.rid.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}Qn.CLASS_NAME="RecipientEncryptedKey";const ud="encryptedKeys",Gk="RecipientEncryptedKeys",d2=[Gk];class Ai extends Y{constructor(e={}){super(),this.encryptedKeys=d(e,ud,Ai.defaultValues(ud)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ud:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ud:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new Ie({name:t.RecipientEncryptedKeys||g,value:Qn.schema()})]})}fromSchema(e){X(e,d2);const t=G(e,e,Ai.schema({names:{RecipientEncryptedKeys:Gk}}));j.assertSchema(t,this.className),this.encryptedKeys=Array.from(t.result.RecipientEncryptedKeys,n=>new Qn({schema:n}))}toSchema(){return new I({value:Array.from(this.encryptedKeys,e=>e.toSchema())})}toJSON(){return{encryptedKeys:Array.from(this.encryptedKeys,e=>e.toJSON())}}}Ai.CLASS_NAME="RecipientEncryptedKeys";const ol="version",ll="originator",Ln="ukm",cl="keyEncryptionAlgorithm",ul="recipientEncryptedKeys",hd="recipientCertificate",fd="recipientPublicKey",m2=[ol,ll,Ln,cl,ul];class hs extends Y{constructor(e={}){super(),this.version=d(e,ol,hs.defaultValues(ol)),this.originator=d(e,ll,hs.defaultValues(ll)),Ln in e&&(this.ukm=d(e,Ln,hs.defaultValues(Ln))),this.keyEncryptionAlgorithm=d(e,cl,hs.defaultValues(cl)),this.recipientEncryptedKeys=d(e,ul,hs.defaultValues(ul)),this.recipientCertificate=d(e,hd,hs.defaultValues(hd)),this.recipientPublicKey=d(e,fd,hs.defaultValues(fd)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ol:return 0;case ll:return new nr;case Ln:return new z;case cl:return new $;case ul:return new Ai;case hd:return new De;case fd:return null;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ol:return t===0;case ll:return t.variant===-1&&!("value"in t);case Ln:return t.isEqual(hs.defaultValues(Ln));case cl:return t.algorithmId===g&&!("algorithmParams"in t);case ul:return t.encryptedKeys.length===0;case hd:return!1;case fd:return!1;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new U({name:t.version||g}),new V({idBlock:{tagClass:3,tagNumber:0},value:[nr.schema(t.originator||{})]}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new z({name:t.ukm||g})]}),$.schema(t.keyEncryptionAlgorithm||{}),Ai.schema(t.recipientEncryptedKeys||{})]})}fromSchema(e){X(e,m2);const t=G(e,e,hs.schema({names:{version:ol,originator:{names:{blockName:ll}},ukm:Ln,keyEncryptionAlgorithm:{names:{blockName:cl}},recipientEncryptedKeys:{names:{blockName:ul}}}}));j.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.originator=new nr({schema:t.result.originator}),Ln in t.result&&(this.ukm=t.result.ukm),this.keyEncryptionAlgorithm=new $({schema:t.result.keyEncryptionAlgorithm}),this.recipientEncryptedKeys=new Ai({schema:t.result.recipientEncryptedKeys})}toSchema(){const e=[];return e.push(new U({value:this.version})),e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[this.originator.toSchema()]})),this.ukm&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[this.ukm]})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.recipientEncryptedKeys.toSchema()),new I({value:e})}toJSON(){const e={version:this.version,originator:this.originator.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),recipientEncryptedKeys:this.recipientEncryptedKeys.toJSON()};return this.ukm&&(e.ukm=this.ukm.toJSON()),e}}hs.CLASS_NAME="KeyAgreeRecipientInfo";const Ca="keyIdentifier",Mr="date",Hr="other",g2=[Ca,Mr,Hr];class zs extends Y{constructor(e={}){super(),this.keyIdentifier=d(e,Ca,zs.defaultValues(Ca)),Mr in e&&(this.date=d(e,Mr,zs.defaultValues(Mr))),Hr in e&&(this.other=d(e,Hr,zs.defaultValues(Hr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ca:return new z;case Mr:return new it;case Hr:return new nn;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ca:return t.isEqual(zs.defaultValues(Ca));case Mr:return t.year===0&&t.month===0&&t.day===0&&t.hour===0&&t.minute===0&&t.second===0&&t.millisecond===0;case Hr:return t.compareWithDefault("keyAttrId",t.keyAttrId)&&!("keyAttr"in t);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new z({name:t.keyIdentifier||g}),new it({optional:!0,name:t.date||g}),nn.schema(t.other||{})]})}fromSchema(e){X(e,g2);const t=G(e,e,zs.schema({names:{keyIdentifier:Ca,date:Mr,other:{names:{blockName:Hr}}}}));j.assertSchema(t,this.className),this.keyIdentifier=t.result.keyIdentifier,Mr in t.result&&(this.date=t.result.date),Hr in t.result&&(this.other=new nn({schema:t.result.other}))}toSchema(){const e=[];return e.push(this.keyIdentifier),this.date&&e.push(this.date),this.other&&e.push(this.other.toSchema()),new I({value:e})}toJSON(){const e={keyIdentifier:this.keyIdentifier.toJSON()};return this.date&&(e.date=this.date),this.other&&(e.other=this.other.toJSON()),e}}zs.CLASS_NAME="KEKIdentifier";const hl="version",fl="kekid",dl="keyEncryptionAlgorithm",Na="encryptedKey",dd="preDefinedKEK",p2=[hl,fl,dl,Na];class As extends Y{constructor(e={}){super(),this.version=d(e,hl,As.defaultValues(hl)),this.kekid=d(e,fl,As.defaultValues(fl)),this.keyEncryptionAlgorithm=d(e,dl,As.defaultValues(dl)),this.encryptedKey=d(e,Na,As.defaultValues(Na)),this.preDefinedKEK=d(e,dd,As.defaultValues(dd)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case hl:return 0;case fl:return new zs;case dl:return new $;case Na:return new z;case dd:return _t;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"KEKRecipientInfo":return t===As.defaultValues(hl);case fl:return t.compareWithDefault("keyIdentifier",t.keyIdentifier)&&!("date"in t)&&!("other"in t);case dl:return t.algorithmId===g&&!("algorithmParams"in t);case Na:return t.isEqual(As.defaultValues(Na));case dd:return t.byteLength===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new U({name:t.version||g}),zs.schema(t.kekid||{}),$.schema(t.keyEncryptionAlgorithm||{}),new z({name:t.encryptedKey||g})]})}fromSchema(e){X(e,p2);const t=G(e,e,As.schema({names:{version:hl,kekid:{names:{blockName:fl}},keyEncryptionAlgorithm:{names:{blockName:dl}},encryptedKey:Na}}));j.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.kekid=new zs({schema:t.result.kekid}),this.keyEncryptionAlgorithm=new $({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){return new I({value:[new U({value:this.version}),this.kekid.toSchema(),this.keyEncryptionAlgorithm.toSchema(),this.encryptedKey]})}toJSON(){return{version:this.version,kekid:this.kekid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}As.CLASS_NAME="KEKRecipientInfo";const ml="version",$r="keyDerivationAlgorithm",gl="keyEncryptionAlgorithm",Ia="encryptedKey",md="password",w2=[ml,$r,gl,Ia];class Ls extends Y{constructor(e={}){super(),this.version=d(e,ml,Ls.defaultValues(ml)),$r in e&&(this.keyDerivationAlgorithm=d(e,$r,Ls.defaultValues($r))),this.keyEncryptionAlgorithm=d(e,gl,Ls.defaultValues(gl)),this.encryptedKey=d(e,Ia,Ls.defaultValues(Ia)),this.password=d(e,md,Ls.defaultValues(md)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ml:return-1;case $r:return new $;case gl:return new $;case Ia:return new z;case md:return _t;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ml:return t===-1;case $r:case gl:return t.algorithmId===g&&!("algorithmParams"in t);case Ia:return t.isEqual(Ls.defaultValues(Ia));case md:return t.byteLength===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new U({name:t.version||g}),new V({name:t.keyDerivationAlgorithm||g,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:$.schema().valueBlock.value}),$.schema(t.keyEncryptionAlgorithm||{}),new z({name:t.encryptedKey||g})]})}fromSchema(e){X(e,w2);const t=G(e,e,Ls.schema({names:{version:ml,keyDerivationAlgorithm:$r,keyEncryptionAlgorithm:{names:{blockName:gl}},encryptedKey:Ia}}));j.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,$r in t.result&&(this.keyDerivationAlgorithm=new $({schema:new I({value:t.result.keyDerivationAlgorithm.valueBlock.value})})),this.keyEncryptionAlgorithm=new $({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){const e=[];return e.push(new U({value:this.version})),this.keyDerivationAlgorithm&&e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:this.keyDerivationAlgorithm.toSchema().valueBlock.value})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new I({value:e})}toJSON(){const e={version:this.version,keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()};return this.keyDerivationAlgorithm&&(e.keyDerivationAlgorithm=this.keyDerivationAlgorithm.toJSON()),e}}Ls.CLASS_NAME="PasswordRecipientInfo";const pl="oriType",_a="oriValue",y2=[pl,_a];class di extends Y{constructor(e={}){super(),this.oriType=d(e,pl,di.defaultValues(pl)),this.oriValue=d(e,_a,di.defaultValues(_a)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case pl:return g;case _a:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case pl:return t===g;case _a:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new he({name:t.oriType||g}),new Ae({name:t.oriValue||g})]})}fromSchema(e){X(e,y2);const t=G(e,e,di.schema({names:{oriType:pl,oriValue:_a}}));j.assertSchema(t,this.className),this.oriType=t.result.oriType.valueBlock.toString(),this.oriValue=t.result.oriValue}toSchema(){return new I({value:[new he({value:this.oriType}),this.oriValue]})}toJSON(){const e={oriType:this.oriType};return di.compareWithDefault(_a,this.oriValue)||(e.oriValue=this.oriValue.toJSON()),e}}di.CLASS_NAME="OtherRecipientInfo";const gd="variant",qc="value",v2=["blockName"];class Ms extends Y{constructor(e={}){super(),this.variant=d(e,gd,Ms.defaultValues(gd)),qc in e&&(this.value=d(e,qc,Ms.defaultValues(qc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case gd:return-1;case qc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case gd:return t===Ms.defaultValues(e);case qc:return Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new at({value:[Ss.schema({names:{blockName:t.blockName||g}}),new V({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:1},value:hs.schema().valueBlock.value}),new V({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:2},value:As.schema().valueBlock.value}),new V({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:3},value:Ls.schema().valueBlock.value}),new V({name:t.blockName||g,idBlock:{tagClass:3,tagNumber:4},value:di.schema().valueBlock.value})]})}fromSchema(e){X(e,v2);const t=G(e,e,Ms.schema({names:{blockName:"blockName"}}));if(j.assertSchema(t,this.className),t.result.blockName.idBlock.tagClass===1)this.variant=1,this.value=new Ss({schema:t.result.blockName});else{const n=new I({value:t.result.blockName.valueBlock.value});switch(t.result.blockName.idBlock.tagNumber){case 1:this.variant=2,this.value=new hs({schema:n});break;case 2:this.variant=3,this.value=new As({schema:n});break;case 3:this.variant=4,this.value=new Ls({schema:n});break;case 4:this.variant=5,this.value=new di({schema:n});break;default:throw new Error("Incorrect structure of RecipientInfo block")}}}toSchema(){Pe.assertEmpty(this.value,"value","RecipientInfo");const e=this.value.toSchema();switch(this.variant){case 1:return e;case 2:case 3:case 4:return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.variant-1,e;default:return new Ae}}toJSON(){const e={variant:this.variant};return this.value&&this.variant>=1&&this.variant<=4&&(e.value=this.value.toJSON()),e}}Ms.CLASS_NAME="RecipientInfo";const Fr="hashAlgorithm",Kr="maskGenAlgorithm",jr="pSourceAlgorithm",b2=[Fr,Kr,jr];class ss extends Y{constructor(e={}){super(),this.hashAlgorithm=d(e,Fr,ss.defaultValues(Fr)),this.maskGenAlgorithm=d(e,Kr,ss.defaultValues(Kr)),this.pSourceAlgorithm=d(e,jr,ss.defaultValues(jr)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Fr:return new $({algorithmId:"1.3.14.3.2.26",algorithmParams:new mt});case Kr:return new $({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new $({algorithmId:"1.3.14.3.2.26",algorithmParams:new mt}).toSchema()});case jr:return new $({algorithmId:"1.2.840.113549.1.1.9",algorithmParams:new z({valueHex:new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer})});default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new V({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[$.schema(t.hashAlgorithm||{})]}),new V({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[$.schema(t.maskGenAlgorithm||{})]}),new V({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[$.schema(t.pSourceAlgorithm||{})]})]})}fromSchema(e){X(e,b2);const t=G(e,e,ss.schema({names:{hashAlgorithm:{names:{blockName:Fr}},maskGenAlgorithm:{names:{blockName:Kr}},pSourceAlgorithm:{names:{blockName:jr}}}}));j.assertSchema(t,this.className),Fr in t.result&&(this.hashAlgorithm=new $({schema:t.result.hashAlgorithm})),Kr in t.result&&(this.maskGenAlgorithm=new $({schema:t.result.maskGenAlgorithm})),jr in t.result&&(this.pSourceAlgorithm=new $({schema:t.result.pSourceAlgorithm}))}toSchema(){const e=[];return this.hashAlgorithm.isEqual(ss.defaultValues(Fr))||e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(ss.defaultValues(Kr))||e.push(new V({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.pSourceAlgorithm.isEqual(ss.defaultValues(jr))||e.push(new V({idBlock:{tagClass:3,tagNumber:2},value:[this.pSourceAlgorithm.toSchema()]})),new I({value:e})}toJSON(){const e={};return this.hashAlgorithm.isEqual(ss.defaultValues(Fr))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(ss.defaultValues(Kr))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.pSourceAlgorithm.isEqual(ss.defaultValues(jr))||(e.pSourceAlgorithm=this.pSourceAlgorithm.toJSON()),e}}ss.CLASS_NAME="RSAESOAEPParams";const wl="keyInfo",Jr="entityUInfo",yl="suppPubInfo",S2=[wl,Jr,yl];class Fn extends Y{constructor(e={}){super(),this.keyInfo=d(e,wl,Fn.defaultValues(wl)),Jr in e&&(this.entityUInfo=d(e,Jr,Fn.defaultValues(Jr))),this.suppPubInfo=d(e,yl,Fn.defaultValues(yl)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wl:return new $;case Jr:return new z;case yl:return new z;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wl:case Jr:case yl:return t.isEqual(Fn.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[$.schema(t.keyInfo||{}),new V({name:t.entityUInfo||g,idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[new z]}),new V({name:t.suppPubInfo||g,idBlock:{tagClass:3,tagNumber:2},value:[new z]})]})}fromSchema(e){X(e,S2);const t=G(e,e,Fn.schema({names:{keyInfo:{names:{blockName:wl}},entityUInfo:Jr,suppPubInfo:yl}}));j.assertSchema(t,this.className),this.keyInfo=new $({schema:t.result.keyInfo}),Jr in t.result&&(this.entityUInfo=t.result.entityUInfo.valueBlock.value[0]),this.suppPubInfo=t.result.suppPubInfo.valueBlock.value[0]}toSchema(){const e=[];return e.push(this.keyInfo.toSchema()),this.entityUInfo&&e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[this.entityUInfo]})),e.push(new V({idBlock:{tagClass:3,tagNumber:2},value:[this.suppPubInfo]})),new I({value:e})}toJSON(){const e={keyInfo:this.keyInfo.toJSON(),suppPubInfo:this.suppPubInfo.toJSON()};return this.entityUInfo&&(e.entityUInfo=this.entityUInfo.toJSON()),e}}Fn.CLASS_NAME="ECCCMSSharedInfo";const vl="version",Wr="originatorInfo",bl="recipientInfos",Sl="encryptedContentInfo",qr="unprotectedAttrs",A2=[vl,Wr,bl,Sl,qr],Hb={kdfAlgorithm:"SHA-512",kekEncryptionLength:256},k2={"P-256":256,"P-384":384,"P-521":528};class Xs extends Y{constructor(e={}){super(),this.version=d(e,vl,Xs.defaultValues(vl)),Wr in e&&(this.originatorInfo=d(e,Wr,Xs.defaultValues(Wr))),this.recipientInfos=d(e,bl,Xs.defaultValues(bl)),this.encryptedContentInfo=d(e,Sl,Xs.defaultValues(Sl)),qr in e&&(this.unprotectedAttrs=d(e,qr,Xs.defaultValues(qr))),this.policy={disableSplit:!!e.disableSplit},e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case vl:return 0;case Wr:return new ao;case bl:return[];case Sl:return new wt;case qr:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case vl:return t===Xs.defaultValues(e);case Wr:return t.certs.certificates.length===0&&t.crls.crls.length===0;case bl:case qr:return t.length===0;case Sl:return wt.compareWithDefault("contentType",t.contentType)&&wt.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&wt.compareWithDefault("encryptedContent",t.encryptedContent);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new U({name:t.version||g}),new V({name:t.originatorInfo||g,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:ao.schema().valueBlock.value}),new yt({value:[new Ie({name:t.recipientInfos||g,value:Ms.schema()})]}),wt.schema(t.encryptedContentInfo||{}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ie({name:t.unprotectedAttrs||g,value:et.schema()})]})]})}fromSchema(e){X(e,A2);const t=G(e,e,Xs.schema({names:{version:vl,originatorInfo:Wr,recipientInfos:bl,encryptedContentInfo:{names:{blockName:Sl}},unprotectedAttrs:qr}}));j.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,Wr in t.result&&(this.originatorInfo=new ao({schema:new I({value:t.result.originatorInfo.valueBlock.value})})),this.recipientInfos=Array.from(t.result.recipientInfos,n=>new Ms({schema:n})),this.encryptedContentInfo=new wt({schema:t.result.encryptedContentInfo}),qr in t.result&&(this.unprotectedAttrs=Array.from(t.result.unprotectedAttrs,n=>new et({schema:n})))}toSchema(){const e=[];return e.push(new U({value:this.version})),this.originatorInfo&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:this.originatorInfo.toSchema().valueBlock.value})),e.push(new yt({value:Array.from(this.recipientInfos,t=>t.toSchema())})),e.push(this.encryptedContentInfo.toSchema()),this.unprotectedAttrs&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,t=>t.toSchema())})),new I({value:e})}toJSON(){const e={version:this.version,recipientInfos:Array.from(this.recipientInfos,t=>t.toJSON()),encryptedContentInfo:this.encryptedContentInfo.toJSON()};return this.originatorInfo&&(e.originatorInfo=this.originatorInfo.toJSON()),this.unprotectedAttrs&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,t=>t.toJSON())),e}addRecipientByCertificate(e,t,n,r=Ne(!0)){const i=Object.assign({useOAEP:!0,oaepHashAlgorithm:"SHA-512"},Hb,t||{});if(e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.113549")!==-1)n=1;else if(e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.10045")!==-1)n=2;else throw new Error(`Unknown type of certificate's public key: ${e.subjectPublicKeyInfo.algorithm.algorithmId}`);switch(n){case 1:{let a,o;if(i.useOAEP===!0){a=r.getOIDByAlgorithm({name:"RSA-OAEP"},!0,"keyEncryptionAlgorithm");const c=r.getOIDByAlgorithm({name:i.oaepHashAlgorithm},!0,"RSAES-OAEP-params"),u=new $({algorithmId:c,algorithmParams:new mt});o=new ss({hashAlgorithm:u,maskGenAlgorithm:new $({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:u.toSchema()})}).toSchema()}else{if(a=r.getOIDByAlgorithm({name:"RSAES-PKCS1-v1_5"}),a===g)throw new Error("Can not find OID for RSAES-PKCS1-v1_5");o=new mt}const l=new Ss({version:0,rid:new Bt({issuer:e.issuer,serialNumber:e.serialNumber}),keyEncryptionAlgorithm:new $({algorithmId:a,algorithmParams:o}),recipientCertificate:e});this.recipientInfos.push(new Ms({variant:1,value:l}))}break;case 2:{const a=new kn({variant:1,value:new Bt({issuer:e.issuer,serialNumber:e.serialNumber})});this._addKeyAgreeRecipientInfo(a,i,{recipientCertificate:e},r)}break;default:throw new Error(`Unknown "variant" value: ${n}`)}return!0}addRecipientByPreDefinedData(e,t={},n,r=Ne(!0)){if(qe.assert(e,"preDefinedData","ArrayBuffer"),!e.byteLength)throw new Error("Pre-defined data could have zero length");if(!t.keyIdentifier){const i=new ArrayBuffer(16),a=new Uint8Array(i);r.getRandomValues(a),t.keyIdentifier=i}switch(t.hmacHashAlgorithm||(t.hmacHashAlgorithm="SHA-512"),t.iterationCount===void 0&&(t.iterationCount=2048),t.keyEncryptionAlgorithm||(t.keyEncryptionAlgorithm={name:"AES-KW",length:256}),t.keyEncryptionAlgorithmParams||(t.keyEncryptionAlgorithmParams=new mt),n){case 1:{const i=r.getOIDByAlgorithm(t.keyEncryptionAlgorithm,!0,"keyEncryptionAlgorithm"),a=new As({version:4,kekid:new zs({keyIdentifier:new z({valueHex:t.keyIdentifier})}),keyEncryptionAlgorithm:new $({algorithmId:i,algorithmParams:t.keyEncryptionAlgorithmParams}),preDefinedKEK:e});this.recipientInfos.push(new Ms({variant:3,value:a}))}break;case 2:{const i=r.getOIDByAlgorithm({name:"PBKDF2"},!0,"keyDerivationAlgorithm"),a=new ArrayBuffer(64),o=new Uint8Array(a);r.getRandomValues(o);const l=r.getOIDByAlgorithm({name:"HMAC",hash:{name:t.hmacHashAlgorithm}},!0,"hmacHashAlgorithm"),c=new qt({salt:new z({valueHex:a}),iterationCount:t.iterationCount,prf:new $({algorithmId:l,algorithmParams:new mt})}),u=r.getOIDByAlgorithm(t.keyEncryptionAlgorithm,!0,"keyEncryptionAlgorithm"),h=new Ls({version:0,keyDerivationAlgorithm:new $({algorithmId:i,algorithmParams:c.toSchema()}),keyEncryptionAlgorithm:new $({algorithmId:u,algorithmParams:t.keyEncryptionAlgorithmParams}),password:e});this.recipientInfos.push(new Ms({variant:4,value:h}))}break;default:throw new Error(`Unknown value for "variant": ${n}`)}}addRecipientByKeyIdentifier(e,t,n,r=Ne(!0)){const i=Object.assign({},Hb,n||{}),a=new kn({variant:2,value:new wn({subjectKeyIdentifier:new z({valueHex:t})})});this._addKeyAgreeRecipientInfo(a,i,{recipientPublicKey:e},r)}_addKeyAgreeRecipientInfo(e,t,n,r=Ne(!0)){const i=new Qn({rid:e}),a=r.getOIDByAlgorithm({name:"AES-KW",length:t.kekEncryptionLength},!0,"keyEncryptionAlgorithm"),o=new $({algorithmId:a}),l=r.getOIDByAlgorithm({name:"ECDH",kdf:t.kdfAlgorithm},!0,"KeyAgreeRecipientInfo"),c=new ArrayBuffer(64),u=new Uint8Array(c);r.getRandomValues(u);const h={version:3,ukm:new z({valueHex:c}),keyEncryptionAlgorithm:new $({algorithmId:l,algorithmParams:o.toSchema()}),recipientEncryptedKeys:new Ai({encryptedKeys:[i]})},f=new hs(Object.assign(h,n));this.recipientInfos.push(new Ms({variant:2,value:f}))}async encrypt(e,t,n=Ne(!0)){const r=new ArrayBuffer(16),i=new Uint8Array(r);n.getRandomValues(i);const a=new Uint8Array(t),o=n.getOIDByAlgorithm(e,!0,"contentEncryptionAlgorithm"),l=await n.generateKey(e,!0,["encrypt"]),c=await n.encrypt({name:e.name,iv:i},l,a),u=await n.exportKey("raw",l);this.version=2,this.encryptedContentInfo=new wt({disableSplit:this.policy.disableSplit,contentType:"1.2.840.113549.1.7.1",contentEncryptionAlgorithm:new $({algorithmId:o,algorithmParams:new z({valueHex:r})}),encryptedContent:new z({valueHex:c})});const h=async C=>{const R=this.recipientInfos[C].value;let T,b;if(R.recipientPublicKey)T=R.recipientPublicKey.algorithm.namedCurve,b=R.recipientPublicKey;else if(R.recipientCertificate){const ue=R.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(ue.constructor.blockName()!==he.blockName())throw new Error(`Incorrect "recipientCertificate" for index ${C}`);switch(ue.valueBlock.toString()){case"1.2.840.10045.3.1.7":T="P-256";break;case"1.3.132.0.34":T="P-384";break;case"1.3.132.0.35":T="P-521";break;default:throw new Error(`Incorrect curve OID for index ${C}`)}b=await R.recipientCertificate.getPublicKey({algorithm:{algorithm:{name:"ECDH",namedCurve:T},usages:[]}},n)}else throw new Error("Unsupported RecipientInfo");const w=k2[T],E=await n.generateKey({name:"ECDH",namedCurve:T},!0,["deriveBits"]),N=await n.exportKey("spki",E.publicKey),L=await n.deriveBits({name:"ECDH",public:b},E.privateKey,w),H=new $({schema:R.keyEncryptionAlgorithm.algorithmParams}),F=n.getAlgorithmByOID(H.algorithmId,!0,"aesKWAlgorithm");let ne=F.length;const ce=new ArrayBuffer(4),te=new Uint8Array(ce);for(let ue=3;ue>=0;ue--)te[ue]=ne,ne>>=8;const xe=new Fn({keyInfo:new $({algorithmId:H.algorithmId}),entityUInfo:R.ukm,suppPubInfo:new z({valueHex:ce})}).toSchema().toBER(!1),ge=n.getAlgorithmByOID(R.keyEncryptionAlgorithm.algorithmId,!0,"ecdhAlgorithm"),ie=await Ib(ge.kdf,L,F.length,xe,n),me=await n.importKey("raw",ie,{name:"AES-KW"},!0,["wrapKey"]),Q=await n.wrapKey("raw",l,me,{name:"AES-KW"}),ke=new nr;return ke.variant=3,ke.value=Xn.fromBER(N),R.originator=ke,R.recipientEncryptedKeys.encryptedKeys[0].encryptedKey=new z({valueHex:Q}),{ecdhPrivateKey:E.privateKey}},f=async C=>{const R=this.recipientInfos[C].value,T=n.getAlgorithmByOID(R.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm");if(T.name==="RSA-OAEP"){const b=R.keyEncryptionAlgorithm.algorithmParams,w=new ss({schema:b});if(T.hash=n.getAlgorithmByOID(w.hashAlgorithm.algorithmId),!("name"in T.hash))throw new Error(`Incorrect OID for hash algorithm: ${w.hashAlgorithm.algorithmId}`)}try{const b=await R.recipientCertificate.getPublicKey({algorithm:{algorithm:T,usages:["encrypt","wrapKey"]}},n),w=await n.encrypt(b.algorithm,b,u);R.encryptedKey=new z({valueHex:w})}catch{}},m=async C=>{const R=this.recipientInfos[C].value,T=n.getAlgorithmByOID(R.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm"),b=await n.importKey("raw",new Uint8Array(R.preDefinedKEK),T,!0,["wrapKey"]),w=await n.wrapKey("raw",l,b,T);R.encryptedKey=new z({valueHex:w})},S=async C=>{const R=this.recipientInfos[C].value;let T;if(!R.keyDerivationAlgorithm)throw new Error('Please append encoded "keyDerivationAlgorithm"');if(!R.keyDerivationAlgorithm.algorithmParams)throw new Error('Incorrectly encoded "keyDerivationAlgorithm"');try{T=new qt({schema:R.keyDerivationAlgorithm.algorithmParams})}catch{throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}const b=new Uint8Array(R.password),w=await n.importKey("raw",b,"PBKDF2",!1,["deriveKey"]),E=n.getAlgorithmByOID(R.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm");let N="SHA-1";T.prf&&(N=n.getAlgorithmByOID(T.prf.algorithmId,!0,"prfAlgorithm").hash.name);const L=new Uint8Array(T.salt.valueBlock.valueHex),H=T.iterationCount,F=await n.deriveKey({name:"PBKDF2",hash:{name:N},salt:L,iterations:H},w,E,!0,["wrapKey"]),ne=await n.wrapKey("raw",l,F,E);R.encryptedKey=new z({valueHex:ne})},k=[];for(let C=0;C<this.recipientInfos.length;C++)switch(this.recipientInfos[C].variant){case 1:k.push(await f(C));break;case 2:k.push(await h(C));break;case 3:k.push(await m(C));break;case 4:k.push(await S(C));break;default:throw new Error(`Unknown recipient type in array with index ${C}`)}return k}async decrypt(e,t,n=Ne(!0)){const r=t||{};if(e+1>this.recipientInfos.length)throw new Error(`Maximum value for "index" is: ${this.recipientInfos.length-1}`);const i=async k=>{const C=this.recipientInfos[k].value;let R,T,b;const w=C.originator;if(r.recipientCertificate){const ge=r.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(ge.constructor.blockName()!==he.blockName())throw new Error(`Incorrect "recipientCertificate" for index ${k}`);R=ge.valueBlock.toString()}else if(w.value.algorithm.algorithmParams){const ge=w.value.algorithm.algorithmParams;if(ge.constructor.blockName()!==he.blockName())throw new Error(`Incorrect originator for index ${k}`);R=ge.valueBlock.toString()}else throw new Error('Parameter "recipientCertificate" is mandatory for "KeyAgreeRecipientInfo" if algorithm params are missing from originator');if(!r.recipientPrivateKey)throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyAgreeRecipientInfo"');switch(R){case"1.2.840.10045.3.1.7":T="P-256",b=256;break;case"1.3.132.0.34":T="P-384",b=384;break;case"1.3.132.0.35":T="P-521",b=528;break;default:throw new Error(`Incorrect curve OID for index ${k}`)}let E,N=n;ve.isBufferSource(r.recipientPrivateKey)?E=await n.importKey("pkcs8",r.recipientPrivateKey,{name:"ECDH",namedCurve:T},!0,["deriveBits"]):(E=r.recipientPrivateKey,"crypto"in r&&r.crypto&&(N=r.crypto.subtle)),"algorithmParams"in w.value.algorithm||(w.value.algorithm.algorithmParams=new he({value:R}));const L=w.value.toSchema().toBER(!1),H=await n.importKey("spki",L,{name:"ECDH",namedCurve:T},!0,[]),F=await N.deriveBits({name:"ECDH",public:H},E,b);async function ne(ge){ge=ge||!1;const ie=new $({schema:C.keyEncryptionAlgorithm.algorithmParams}),me=n.getAlgorithmByOID(ie.algorithmId,!0,"kwAlgorithm");let Q=me.length;const ke=new ArrayBuffer(4),ue=new Uint8Array(ke);for(let nt=3;nt>=0;nt--)ue[nt]=Q,Q>>=8;const ae={algorithmId:ie.algorithmId};ge&&(ae.algorithmParams=new mt);const se=new Fn({keyInfo:new $(ae),entityUInfo:C.ukm,suppPubInfo:new z({valueHex:ke})}).toSchema().toBER(!1),Ce=n.getAlgorithmByOID(C.keyEncryptionAlgorithm.algorithmId,!0,"ecdhAlgorithm");if(!Ce.name)throw new Error(`Incorrect OID for key encryption algorithm: ${C.keyEncryptionAlgorithm.algorithmId}`);return Ib(Ce.kdf,F,me.length,se,n)}const ce=await ne(),te=async ge=>n.importKey("raw",ge,{name:"AES-KW"},!0,["unwrapKey"]),fe=await te(ce),xe=async ge=>{const ie=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,me=n.getAlgorithmByOID(ie,!0,"contentEncryptionAlgorithm");return n.unwrapKey("raw",C.recipientEncryptedKeys.encryptedKeys[0].encryptedKey.valueBlock.valueHexView,ge,{name:"AES-KW"},me,!0,["decrypt"])};try{return await xe(fe)}catch{const ge=await ne(!0),ie=await te(ge);return xe(ie)}},a=async k=>{const C=this.recipientInfos[k].value;if(!r.recipientPrivateKey)throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyTransRecipientInfo"');const R=n.getAlgorithmByOID(C.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm");if(R.name==="RSA-OAEP"){const L=C.keyEncryptionAlgorithm.algorithmParams,H=new ss({schema:L});if(R.hash=n.getAlgorithmByOID(H.hashAlgorithm.algorithmId),!("name"in R.hash))throw new Error(`Incorrect OID for hash algorithm: ${H.hashAlgorithm.algorithmId}`)}let T,b=n;ve.isBufferSource(r.recipientPrivateKey)?T=await n.importKey("pkcs8",r.recipientPrivateKey,R,!0,["decrypt"]):(T=r.recipientPrivateKey,"crypto"in r&&r.crypto&&(b=r.crypto.subtle));const w=await b.decrypt(T.algorithm,T,C.encryptedKey.valueBlock.valueHexView),E=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,N=n.getAlgorithmByOID(E,!0,"contentEncryptionAlgorithm");if(!("name"in N))throw new Error(`Incorrect "contentEncryptionAlgorithm": ${E}`);return n.importKey("raw",w,N,!0,["decrypt"])},o=async k=>{const C=this.recipientInfos[k].value;if(!r.preDefinedData)throw new Error('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');const R=n.getAlgorithmByOID(C.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm"),T=await n.importKey("raw",r.preDefinedData,R,!0,["unwrapKey"]),b=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,w=n.getAlgorithmByOID(b,!0,"contentEncryptionAlgorithm");if(!w.name)throw new Error(`Incorrect "contentEncryptionAlgorithm": ${b}`);return n.unwrapKey("raw",C.encryptedKey.valueBlock.valueHexView,T,R,w,!0,["decrypt"])},l=async k=>{const C=this.recipientInfos[k].value;let R;if(!r.preDefinedData)throw new Error('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');if(!C.keyDerivationAlgorithm)throw new Error('Please append encoded "keyDerivationAlgorithm"');if(!C.keyDerivationAlgorithm.algorithmParams)throw new Error('Incorrectly encoded "keyDerivationAlgorithm"');try{R=new qt({schema:C.keyDerivationAlgorithm.algorithmParams})}catch{throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}const T=await n.importKey("raw",r.preDefinedData,"PBKDF2",!1,["deriveKey"]),b=n.getAlgorithmByOID(C.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm"),w=R.prf?n.getAlgorithmByOID(R.prf.algorithmId,!0,"prfAlgorithm").hash.name:"SHA-1",E=new Uint8Array(R.salt.valueBlock.valueHex),N=R.iterationCount,L=await n.deriveKey({name:"PBKDF2",hash:{name:w},salt:E,iterations:N},T,b,!0,["unwrapKey"]),H=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,F=n.getAlgorithmByOID(H,!0,"contentEncryptionAlgorithm");return n.unwrapKey("raw",C.encryptedKey.valueBlock.valueHexView,L,b,F,!0,["decrypt"])};let c;switch(this.recipientInfos[e].variant){case 1:c=await a(e);break;case 2:c=await i(e);break;case 3:c=await o(e);break;case 4:c=await l(e);break;default:throw new Error(`Unknown recipient type in array with index ${e}`)}const u=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,h=n.getAlgorithmByOID(u,!0,"contentEncryptionAlgorithm"),f=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams.valueBlock.valueHex,m=new Uint8Array(f);if(!this.encryptedContentInfo.encryptedContent)throw new Error("Required property `encryptedContent` is empty");const S=this.encryptedContentInfo.getEncryptedContent();return n.decrypt({name:h.name,iv:m},c,S)}}Xs.CLASS_NAME="EnvelopedData";const Co="safeContents",Gc="parsedValue",$b="contentInfos";class oo extends Y{constructor(e={}){super(),this.safeContents=d(e,Co,oo.defaultValues(Co)),Gc in e&&(this.parsedValue=d(e,Gc,oo.defaultValues(Gc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Co:return[];case Gc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Co:return t.length===0;case Gc:return t instanceof Object&&Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new Ie({name:t.contentInfos||g,value:Ze.schema()})]})}fromSchema(e){X(e,[$b]);const t=G(e,e,oo.schema({names:{contentInfos:$b}}));j.assertSchema(t,this.className),this.safeContents=Array.from(t.result.contentInfos,n=>new Ze({schema:n}))}toSchema(){return new I({value:Array.from(this.safeContents,e=>e.toSchema())})}toJSON(){return{safeContents:Array.from(this.safeContents,e=>e.toJSON())}}async parseInternalValues(e,t=Ne(!0)){if(Pe.assert(e,Co),qe.assert(e.safeContents,Co,"Array"),e.safeContents.length!==this.safeContents.length)throw new qe('Length of "parameters.safeContents" must be equal to "this.safeContents.length"');this.parsedValue={safeContents:[]};for(const[n,r]of this.safeContents.entries()){const i=e.safeContents[n],a=`parameters.safeContents[${n}]`;switch(r.contentType){case hy:{qe.assert(r.content,"this.safeContents[j].content",z);const o=r.content.getValue();this.parsedValue.safeContents.push({privacyMode:0,value:Yn.fromBER(o)})}break;case Hk:{const o=new Xs({schema:r.content});Pe.assert(a,i,"recipientCertificate","recipientKey");const l=i,c=l.recipientCertificate,u=l.recipientKey,h=await o.decrypt(0,{recipientCertificate:c,recipientPrivateKey:u},t);this.parsedValue.safeContents.push({privacyMode:2,value:Yn.fromBER(h)})}break;case $k:{const o=new bn({schema:r.content});Pe.assert(a,i,"password");const l=i.password,c=await o.decrypt({password:l},t);this.parsedValue.safeContents.push({privacyMode:1,value:Yn.fromBER(c)})}break;default:throw new Error(`Unknown "contentType" for AuthenticatedSafe: " ${r.contentType}`)}}}async makeInternalValues(e,t=Ne(!0)){if(!this.parsedValue)throw new Error('Please run "parseValues" first or add "parsedValue" manually');if(qe.assert(this.parsedValue,"this.parsedValue","object"),qe.assert(this.parsedValue.safeContents,"this.parsedValue.safeContents","Array"),qe.assert(e,"parameters","object"),Pe.assert(e,"safeContents"),qe.assert(e.safeContents,"parameters.safeContents","Array"),e.safeContents.length!==this.parsedValue.safeContents.length)throw new qe('Length of "parameters.safeContents" must be equal to "this.parsedValue.safeContents"');this.safeContents=[];for(const[n,r]of this.parsedValue.safeContents.entries())switch(Pe.assert("content",r,"privacyMode","value"),qe.assert(r.value,"content.value",Yn),r.privacyMode){case 0:{const i=r.value.toSchema().toBER(!1);this.safeContents.push(new Ze({contentType:"1.2.840.113549.1.7.1",content:new z({valueHex:i})}))}break;case 1:{const i=new bn,a=e.safeContents[n];a.contentToEncrypt=r.value.toSchema().toBER(!1),await i.encrypt(a,t),this.safeContents.push(new Ze({contentType:"1.2.840.113549.1.7.6",content:i.toSchema()}))}break;case 2:{const i=new Xs,a=r.value.toSchema().toBER(!1),o=e.safeContents[n];switch(Pe.assert(`parameters.safeContents[${n}]`,o,"encryptingCertificate","encryptionAlgorithm"),!0){case o.encryptionAlgorithm.name.toLowerCase()==="aes-cbc":case o.encryptionAlgorithm.name.toLowerCase()==="aes-gcm":break;default:throw new Error(`Incorrect parameter "encryptionAlgorithm" in "parameters.safeContents[i]": ${o.encryptionAlgorithm}`)}switch(!0){case o.encryptionAlgorithm.length===128:case o.encryptionAlgorithm.length===192:case o.encryptionAlgorithm.length===256:break;default:throw new Error(`Incorrect parameter "encryptionAlgorithm.length" in "parameters.safeContents[i]": ${o.encryptionAlgorithm.length}`)}const l=o.encryptionAlgorithm;i.addRecipientByCertificate(o.encryptingCertificate,{},void 0,t),await i.encrypt(l,a,t),this.safeContents.push(new Ze({contentType:"1.2.840.113549.1.7.3",content:i.toSchema()}))}break;default:throw new Error(`Incorrect value for "content.privacyMode": ${r.privacyMode}`)}return this}}oo.CLASS_NAME="AuthenticatedSafe";const Ba="hashAlgorithm",Al="issuerNameHash",kl="issuerKeyHash",xa="serialNumber",E2=[Ba,Al,kl,xa];class Ct extends Y{constructor(e={}){super(),this.hashAlgorithm=d(e,Ba,Ct.defaultValues(Ba)),this.issuerNameHash=d(e,Al,Ct.defaultValues(Al)),this.issuerKeyHash=d(e,kl,Ct.defaultValues(kl)),this.serialNumber=d(e,xa,Ct.defaultValues(xa)),e.schema&&this.fromSchema(e.schema)}static async create(e,t,n=Ne(!0)){const r=new Ct;return await r.createForCertificate(e,t,n),r}static defaultValues(e){switch(e){case Ba:return new $;case Al:case kl:return new z;case xa:return new U;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ba:return t.algorithmId===g&&!("algorithmParams"in t);case Al:case kl:case xa:return t.isEqual(Ct.defaultValues(xa));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[$.schema(t.hashAlgorithmObject||{names:{blockName:t.hashAlgorithm||g}}),new z({name:t.issuerNameHash||g}),new z({name:t.issuerKeyHash||g}),new U({name:t.serialNumber||g})]})}fromSchema(e){X(e,E2);const t=G(e,e,Ct.schema({names:{hashAlgorithm:Ba,issuerNameHash:Al,issuerKeyHash:kl,serialNumber:xa}}));j.assertSchema(t,this.className),this.hashAlgorithm=new $({schema:t.result.hashAlgorithm}),this.issuerNameHash=t.result.issuerNameHash,this.issuerKeyHash=t.result.issuerKeyHash,this.serialNumber=t.result.serialNumber}toSchema(){return new I({value:[this.hashAlgorithm.toSchema(),this.issuerNameHash,this.issuerKeyHash,this.serialNumber]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),issuerNameHash:this.issuerNameHash.toJSON(),issuerKeyHash:this.issuerKeyHash.toJSON(),serialNumber:this.serialNumber.toJSON()}}isEqual(e){return!(this.hashAlgorithm.algorithmId!==e.hashAlgorithm.algorithmId||!ve.isEqual(this.issuerNameHash.valueBlock.valueHexView,e.issuerNameHash.valueBlock.valueHexView)||!ve.isEqual(this.issuerKeyHash.valueBlock.valueHexView,e.issuerKeyHash.valueBlock.valueHexView)||!this.serialNumber.isEqual(e.serialNumber))}async createForCertificate(e,t,n=Ne(!0)){Pe.assert(t,Ba,"issuerCertificate");const r=n.getOIDByAlgorithm({name:t.hashAlgorithm},!0,"hashAlgorithm");this.hashAlgorithm=new $({algorithmId:r,algorithmParams:new mt});const i=t.issuerCertificate;this.serialNumber=e.serialNumber;const a=await n.digest({name:t.hashAlgorithm},i.subject.toSchema().toBER(!1));this.issuerNameHash=new z({valueHex:a});const o=i.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView,l=await n.digest({name:t.hashAlgorithm},o);this.issuerKeyHash=new z({valueHex:l})}}Ct.CLASS_NAME="CertID";const El="certID",Cl="certStatus",Nl="thisUpdate",Gr="nextUpdate",Ta="singleExtensions",C2=[El,Cl,Nl,Gr,Ta];class Qs extends Y{constructor(e={}){super(),this.certID=d(e,El,Qs.defaultValues(El)),this.certStatus=d(e,Cl,Qs.defaultValues(Cl)),this.thisUpdate=d(e,Nl,Qs.defaultValues(Nl)),Gr in e&&(this.nextUpdate=d(e,Gr,Qs.defaultValues(Gr))),Ta in e&&(this.singleExtensions=d(e,Ta,Qs.defaultValues(Ta))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case El:return new Ct;case Cl:return{};case Nl:case Gr:return new Date(0,0,0);case Ta:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case El:return Ct.compareWithDefault("hashAlgorithm",t.hashAlgorithm)&&Ct.compareWithDefault("issuerNameHash",t.issuerNameHash)&&Ct.compareWithDefault("issuerKeyHash",t.issuerKeyHash)&&Ct.compareWithDefault("serialNumber",t.serialNumber);case Cl:return Object.keys(t).length===0;case Nl:case Gr:return t===Qs.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[Ct.schema(t.certID||{}),new at({value:[new Se({name:t.certStatus||g,idBlock:{tagClass:3,tagNumber:0}}),new V({name:t.certStatus||g,idBlock:{tagClass:3,tagNumber:1},value:[new it,new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ei]})]}),new Se({name:t.certStatus||g,idBlock:{tagClass:3,tagNumber:2},lenBlock:{length:1}})]}),new it({name:t.thisUpdate||g}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new it({name:t.nextUpdate||g})]}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[ot.schema(t.singleExtensions||{})]})]})}fromSchema(e){X(e,C2);const t=G(e,e,Qs.schema({names:{certID:{names:{blockName:El}},certStatus:Cl,thisUpdate:Nl,nextUpdate:Gr,singleExtensions:{names:{blockName:Ta}}}}));j.assertSchema(t,this.className),this.certID=new Ct({schema:t.result.certID}),this.certStatus=t.result.certStatus,this.thisUpdate=t.result.thisUpdate.toDate(),Gr in t.result&&(this.nextUpdate=t.result.nextUpdate.toDate()),Ta in t.result&&(this.singleExtensions=Array.from(t.result.singleExtensions.valueBlock.value,n=>new Fe({schema:n})))}toSchema(){const e=[];return e.push(this.certID.toSchema()),e.push(this.certStatus),e.push(new it({valueDate:this.thisUpdate})),this.nextUpdate&&e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[new it({valueDate:this.nextUpdate})]})),this.singleExtensions&&e.push(new I({value:Array.from(this.singleExtensions,t=>t.toSchema())})),new I({value:e})}toJSON(){const e={certID:this.certID.toJSON(),certStatus:this.certStatus.toJSON(),thisUpdate:this.thisUpdate};return this.nextUpdate&&(e.nextUpdate=this.nextUpdate),this.singleExtensions&&(e.singleExtensions=Array.from(this.singleExtensions,t=>t.toJSON())),e}}Qs.CLASS_NAME="SingleResponse";const pd="tbs",Ra="version",Bh="responderID",xh="producedAt",Th="responses",Il="responseExtensions",po="ResponseData",Pd=`${po}.${Ra}`,_l=`${po}.${Bh}`,Kp=`${po}.${xh}`,jp=`${po}.${Th}`,Ld=`${po}.${Il}`,N2=[po,Pd,_l,Kp,jp,Ld];class Rt extends Y{constructor(e={}){super(),this.tbsView=new Uint8Array(d(e,pd,Rt.defaultValues(pd))),Ra in e&&(this.version=d(e,Ra,Rt.defaultValues(Ra))),this.responderID=d(e,Bh,Rt.defaultValues(Bh)),this.producedAt=d(e,xh,Rt.defaultValues(xh)),this.responses=d(e,Th,Rt.defaultValues(Th)),Il in e&&(this.responseExtensions=d(e,Il,Rt.defaultValues(Il))),e.schema&&this.fromSchema(e.schema)}get tbs(){return ve.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case Ra:return 0;case pd:return _t;case Bh:return{};case xh:return new Date(0,0,0);case Th:case Il:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case pd:return t.byteLength===0;case Bh:return Object.keys(t).length===0;case xh:return t===Rt.defaultValues(e);case Th:case Il:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||po,value:[new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new U({name:t.version||Pd})]}),new at({value:[new V({name:t.responderID||_l,idBlock:{tagClass:3,tagNumber:1},value:[Ge.schema(t.ResponseDataByName||{names:{blockName:"ResponseData.byName"}})]}),new V({name:t.responderID||_l,idBlock:{tagClass:3,tagNumber:2},value:[new z({name:t.ResponseDataByKey||"ResponseData.byKey"})]})]}),new it({name:t.producedAt||Kp}),new I({value:[new Ie({name:jp,value:Qs.schema(t.response||{})})]}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[ot.schema(t.extensions||{names:{blockName:Ld}})]})]})}fromSchema(e){X(e,N2);const t=G(e,e,Rt.schema());j.assertSchema(t,this.className),this.tbsView=t.result.ResponseData.valueBeforeDecodeView,Pd in t.result&&(this.version=t.result[Pd].valueBlock.valueDec),t.result[_l].idBlock.tagNumber===1?this.responderID=new Ge({schema:t.result[_l].valueBlock.value[0]}):this.responderID=t.result[_l].valueBlock.value[0],this.producedAt=t.result[Kp].toDate(),this.responses=Array.from(t.result[jp],n=>new Qs({schema:n})),Ld in t.result&&(this.responseExtensions=Array.from(t.result[Ld].valueBlock.value,n=>new Fe({schema:n})))}toSchema(e=!1){let t;if(e===!1){if(!this.tbsView.byteLength)return Rt.schema();const n=bt(this.tbsView);j.assert(n,"TBS Response Data"),t=n.result}else{const n=[];Ra in this&&n.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[new U({value:this.version})]})),this.responderID instanceof Ge?n.push(new V({idBlock:{tagClass:3,tagNumber:1},value:[this.responderID.toSchema()]})):n.push(new V({idBlock:{tagClass:3,tagNumber:2},value:[this.responderID]})),n.push(new it({valueDate:this.producedAt})),n.push(new I({value:Array.from(this.responses,r=>r.toSchema())})),this.responseExtensions&&n.push(new V({idBlock:{tagClass:3,tagNumber:1},value:[new I({value:Array.from(this.responseExtensions,r=>r.toSchema())})]})),t=new I({value:n})}return t}toJSON(){const e={};return Ra in this&&(e.version=this.version),this.responderID&&(e.responderID=this.responderID),this.producedAt&&(e.producedAt=this.producedAt),this.responses&&(e.responses=Array.from(this.responses,t=>t.toJSON())),this.responseExtensions&&(e.responseExtensions=Array.from(this.responseExtensions,t=>t.toJSON())),e}}Rt.CLASS_NAME="ResponseData";const jg="trustedCerts",Jg="certs",Wg="crls",qg="ocsps",Gg="checkDate",Yg="findOrigin",Xg="findIssuer";var ja;(function(s){s[s.unknown=-1]="unknown",s[s.success=0]="success",s[s.noRevocation=11]="noRevocation",s[s.noPath=60]="noPath",s[s.noValidPath=97]="noValidPath"})(ja||(ja={}));class ci extends Error{constructor(e,t){super(t),this.name=ci.NAME,this.code=e,this.message=t}}ci.NAME="ChainValidationError";function I2(s,e){for(let t=0;t<e.length;t++)if(ve.isEqual(s.tbsView,e[t].tbsView))return!0;return!1}class cg{constructor(e={}){this.trustedCerts=d(e,jg,this.defaultValues(jg)),this.certs=d(e,Jg,this.defaultValues(Jg)),this.crls=d(e,Wg,this.defaultValues(Wg)),this.ocsps=d(e,qg,this.defaultValues(qg)),this.checkDate=d(e,Gg,this.defaultValues(Gg)),this.findOrigin=d(e,Yg,this.defaultValues(Yg)),this.findIssuer=d(e,Xg,this.defaultValues(Xg))}static defaultFindOrigin(e,t){e.tbsView.byteLength===0&&(e.tbsView=new Uint8Array(e.encodeTBS().toBER()));for(const n of t.certs)if(n.tbsView.byteLength===0&&(n.tbsView=new Uint8Array(n.encodeTBS().toBER())),ve.isEqual(e.tbsView,n.tbsView))return"Intermediate Certificates";for(const n of t.trustedCerts)if(n.tbsView.byteLength===0&&(n.tbsView=new Uint8Array(n.encodeTBS().toBER())),ve.isEqual(e.tbsView,n.tbsView))return"Trusted Certificates";return"Unknown"}async defaultFindIssuer(e,t,n=Ne(!0)){const r=[];let i=null,a=null,o=null;if(e.subject.isEqual(e.issuer))try{if(await e.verify(void 0,n))return[e]}catch{}if(e.extensions){for(const c of e.extensions)if(c.extnID===cy&&c.parsedValue instanceof jn){c.parsedValue.keyIdentifier?i=c.parsedValue.keyIdentifier:(c.parsedValue.authorityCertIssuer&&(a=c.parsedValue.authorityCertIssuer),c.parsedValue.authorityCertSerialNumber&&(o=c.parsedValue.authorityCertSerialNumber));break}}function l(c){if(i!==null&&c.extensions){let h=!1;for(const f of c.extensions)if(f.extnID===TR&&f.parsedValue){h=!0,ve.isEqual(f.parsedValue.valueBlock.valueHex,i.valueBlock.valueHexView)&&r.push(c);break}if(h)return}let u=!1;o!==null&&(u=c.serialNumber.isEqual(o)),a!==null?c.subject.isEqual(a)&&u&&r.push(c):e.issuer.isEqual(c.subject)&&r.push(c)}for(const c of t.trustedCerts)l(c);for(const c of t.certs)l(c);for(let c=r.length-1;c>=0;c--)try{await e.verify(r[c],n)===!1&&r.splice(c,1)}catch{r.splice(c,1)}return r}defaultValues(e){switch(e){case jg:return[];case Jg:return[];case Wg:return[];case qg:return[];case Gg:return new Date;case Yg:return cg.defaultFindOrigin;case Xg:return this.defaultFindIssuer;default:throw new Error(`Invalid member name for CertificateChainValidationEngine class: ${e}`)}}async sort(e=!1,t=Ne(!0)){const n=[],r=async(S,k)=>{const C=[];function R(b){let w=!0;for(let E=0;E<b.length;E++){for(let N=0;N<b.length;N++)if(N!==E&&b[E]===b[N]){w=!1;break}if(!w)break}return w}if(I2(S,this.trustedCerts))return[[S]];const T=await this.findIssuer(S,this,k);if(T.length===0)throw new Error("No valid certificate paths found");for(let b=0;b<T.length;b++){if(ve.isEqual(T[b].tbsView,S.tbsView)){C.push([T[b]]);continue}const w=await r(T[b],k);for(let E=0;E<w.length;E++){const N=w[E].slice();N.splice(0,0,T[b]),R(N)?C.push(N):C.push(w[E])}}return C},i=async S=>{const k=[],C=[],R=[];if(k.push(...n.filter(T=>S.issuer.isEqual(T.subject))),k.length===0)return{status:1,statusMessage:"No certificate's issuers"};if(C.push(...this.crls.filter(T=>T.issuer.isEqual(S.issuer))),C.length===0)return{status:2,statusMessage:"No CRLs for specific certificate issuer"};for(let T=0;T<C.length;T++){const b=C[T];if(!(b.nextUpdate&&b.nextUpdate.value<this.checkDate))for(let w=0;w<k.length;w++)try{if(await C[T].verify({issuerCertificate:k[w]},t)){R.push({crl:C[T],certificate:k[w]});break}}catch{}}return R.length?{status:0,statusMessage:g,result:R}:{status:3,statusMessage:"No valid CRLs found"}},a=async(S,k)=>{const C=t.getAlgorithmByOID(S.signatureAlgorithm.algorithmId);if(!C.name||!C.hash)return 1;for(let R=0;R<this.ocsps.length;R++){const b=await this.ocsps[R].getCertificateStatus(S,k,t);if(b.isForCertificate)return b.status===0?0:1}return 2};async function o(S,k=!1){let C=!1,R=!1,T=!1,b=!1;if(S.extensions){for(let w=0;w<S.extensions.length;w++){const E=S.extensions[w];if(E.critical&&!E.parsedValue)return{result:!1,resultCode:6,resultMessage:`Unable to parse critical certificate extension: ${E.extnID}`};if(E.extnID===RR){T=!0;const N=new Uint8Array(E.parsedValue.valueBlock.valueHex);(N[0]&4)===4&&(R=!0),(N[0]&2)===2&&(b=!0)}E.extnID===oy&&"cA"in E.parsedValue&&E.parsedValue.cA===!0&&(C=!0)}if(R===!0&&C===!1)return{result:!1,resultCode:3,resultMessage:'Unable to build certificate chain - using "keyCertSign" flag set without BasicConstraints'};if(T===!0&&C===!0&&R===!1)return{result:!1,resultCode:4,resultMessage:'Unable to build certificate chain - "keyCertSign" flag was not set'};if(C===!0&&T===!0&&k&&b===!1)return{result:!1,resultCode:5,resultMessage:'Unable to build certificate chain - intermediate certificate must have "cRLSign" key usage flag'}}return C===!1?{result:!1,resultCode:7,resultMessage:"Unable to build certificate chain - more than one possible end-user certificate"}:{result:!0,resultCode:0,resultMessage:g}}const l=async(S,k)=>{for(let C=0;C<S.length;C++)if(S[C].notBefore.value>k||S[C].notAfter.value<k)return{result:!1,resultCode:8,resultMessage:"The certificate is either not yet valid or expired"};if(S.length<2)return{result:!1,resultCode:9,resultMessage:"Too short certificate path"};for(let C=S.length-2;C>=0;C--)if(S[C].issuer.isEqual(S[C].subject)===!1&&S[C].issuer.isEqual(S[C+1].subject)===!1)return{result:!1,resultCode:10,resultMessage:"Incorrect name chaining"};if(this.crls.length!==0||this.ocsps.length!==0)for(let C=0;C<S.length-1;C++){let R=2,T={status:0,statusMessage:g};if(this.ocsps.length!==0)switch(R=await a(S[C],S[C+1]),R){case 0:continue;case 1:return{result:!1,resultCode:12,resultMessage:"One of certificates was revoked via OCSP response"}}if(this.crls.length!==0){if(T=await i(S[C]),T.status===0&&T.result)for(let b=0;b<T.result.length;b++){if(T.result[b].crl.isCertificateRevoked(S[C]))return{result:!1,resultCode:12,resultMessage:"One of certificates had been revoked"};if((await o(T.result[b].certificate,!0)).result===!1)return{result:!1,resultCode:13,resultMessage:"CRL issuer certificate is not a CA certificate or does not have crlSign flag"}}else if(e===!1)throw new ci(ja.noRevocation,`No revocation values found for one of certificates: ${T.statusMessage}`)}else if(R===2)return{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates"};if(R===2&&T.status===2&&e){const b=S[C+1];let w=!1;if(b.extensions)for(const E of b.extensions)switch(E.extnID){case Pk:case ly:case uy:w=!0;break}if(w)throw new ci(ja.noRevocation,`No revocation values found for one of certificates: ${T.statusMessage}`)}}for(const[C,R]of S.entries()){if(!C)continue;if(!(await o(R)).result)return{result:!1,resultCode:14,resultMessage:"One of intermediate certificates is not a CA certificate"}}return{result:!0}};n.push(...this.trustedCerts),n.push(...this.certs);for(let S=0;S<n.length;S++)for(let k=0;k<n.length;k++)if(S!==k&&ve.isEqual(n[S].tbsView,n[k].tbsView)){n.splice(k,1),S=0;break}const c=n[n.length-1];let u;const h=[c];if(u=await r(c,t),u.length===0)throw new ci(ja.noPath,"Unable to find certificate path");for(let S=u.length-1;S>=0;S--){let k=!1;for(let C=0;C<u[S].length;C++){const R=u[S][C];for(let T=0;T<this.trustedCerts.length;T++)if(ve.isEqual(R.tbsView,this.trustedCerts[T].tbsView)){k=!0;break}if(k)break}k||u.splice(S,1)}if(u.length===0)throw new ci(ja.noValidPath,"No valid certificate paths found");let f=u[0].length,m=0;for(let S=0;S<u.length;S++)u[S].length<f&&(f=u[S].length,m=S);for(let S=0;S<u[m].length;S++)h.push(u[m][S]);if(u=await l(h,this.checkDate),u.result===!1)throw u;return h}async verify(e={},t=Ne(!0)){function n(l,c){const u=ri(l),h=ri(c),f=u.split("."),m=h.split("."),S=f.length,k=m.length;if(S===0||k===0||S<k)return!1;for(let C=0;C<S;C++)if(f[C].length===0)return!1;for(let C=0;C<k;C++)if(m[C].length===0){if(C===0){if(k===1)return!1;continue}return!1}for(let C=0;C<k;C++)if(m[k-1-C].length!==0&&f[S-1-C].localeCompare(m[k-1-C])!==0)return!1;return!0}function r(l,c){const u=ri(l),h=ri(c),f=u.split("@"),m=h.split("@");if(f.length===0||m.length===0||f.length<m.length)return!1;if(m.length===1){if(n(f[1],m[0])){const k=f[1].split("."),C=m[0].split(".");return C[0].length===0?!0:k.length===C.length}return!1}return u.localeCompare(h)===0}function i(l,c){let u=ri(l);const h=ri(c),f=u.split("/");if(h.split("/").length>1)return!1;if(f.length>1){for(let k=0;k<f.length;k++)if(f[k].length>0&&f[k].charAt(f[k].length-1)!==":"){u=f[k].split(":")[0];break}}if(n(u,h)){const k=u.split("."),C=h.split(".");return C[0].length===0?!0:k.length===C.length}return!1}function a(l,c){const u=l.valueBlock.valueHexView,h=c.valueBlock.valueHexView;if(u.length===4&&h.length===8){for(let f=0;f<4;f++)if((u[f]^h[f])&h[f+4])return!1;return!0}if(u.length===16&&h.length===32){for(let f=0;f<16;f++)if((u[f]^h[f])&h[f+16])return!1;return!0}return!1}function o(l,c){if(l.typesAndValues.length===0||c.typesAndValues.length===0)return!0;if(l.typesAndValues.length<c.typesAndValues.length)return!1;let u=!0,h=0;for(let f=0;f<c.typesAndValues.length;f++){let m=!1;for(let S=h;S<l.typesAndValues.length;S++)if(m=l.typesAndValues[S].isEqual(c.typesAndValues[f]),l.typesAndValues[S].type===c.typesAndValues[f].type&&(u=u&&m),m===!0)if(h===0||h===S){h=S+1;break}else return!1;if(m===!1)return!1}return h===0?!1:u}try{if(this.certs.length===0)throw new Error("Empty certificate array");const l=e.passedWhenNotRevValues||!1,c=e.initialPolicySet||[Os],u=e.initialExplicitPolicy||!1,h=e.initialPolicyMappingInhibit||!1,f=e.initialInhibitPolicy||!1,m=e.initialPermittedSubtreesSet||[],S=e.initialExcludedSubtreesSet||[],k=e.initialRequiredNameForms||[];let C=u,R=h,T=f;const b=[!1,!1,!1];let w=0,E=0,N=0,L=m,H=S;const F=k;let ne=1;this.certs=await this.sort(l,t);const ce=[];ce.push(Os);const te=[],fe=new Array(this.certs.length-1);for(let ue=0;ue<this.certs.length-1;ue++)fe[ue]=!0;te.push(fe);const xe=new Array(this.certs.length-1),ge=new Array(this.certs.length-1);let ie=C?this.certs.length-1:-1;for(let ue=this.certs.length-2;ue>=0;ue--,ne++){const ae=this.certs[ue];if(ae.extensions){for(let oe=0;oe<ae.extensions.length;oe++){const se=ae.extensions[oe];if(se.extnID===Lk){ge[ue]=se.parsedValue;for(let Ce=0;Ce<ce.length;Ce++)if(ce[Ce]===Os){delete te[Ce][ue];break}for(let Ce=0;Ce<se.parsedValue.certificatePolicies.length;Ce++){let nt=-1;const Xe=se.parsedValue.certificatePolicies[Ce].policyIdentifier;for(let Ke=0;Ke<ce.length;Ke++)if(Xe===ce[Ke]){nt=Ke;break}if(nt===-1){ce.push(Xe);const Ke=new Array(this.certs.length-1);Ke[ue]=!0,te.push(Ke)}else te[nt][ue]=!0}}if(se.extnID===Dk){if(R)return{result:!1,resultCode:98,resultMessage:"Policy mapping prohibited"};xe[ue]=se.parsedValue}se.extnID===Uk&&C===!1&&(se.parsedValue.requireExplicitPolicy===0?(C=!0,ie=ue):b[0]===!1?(b[0]=!0,w=se.parsedValue.requireExplicitPolicy):w=w>se.parsedValue.requireExplicitPolicy?se.parsedValue.requireExplicitPolicy:w,se.parsedValue.inhibitPolicyMapping===0?R=!0:b[1]===!1?(b[1]=!0,E=se.parsedValue.inhibitPolicyMapping+1):E=E>se.parsedValue.inhibitPolicyMapping+1?se.parsedValue.inhibitPolicyMapping+1:E),se.extnID===HR&&T===!1&&(se.parsedValue.valueBlock.valueDec===0?T=!0:b[2]===!1?(b[2]=!0,N=se.parsedValue.valueBlock.valueDec):N=N>se.parsedValue.valueBlock.valueDec?se.parsedValue.valueBlock.valueDec:N)}if(T===!0){let oe=-1;for(let se=0;se<ce.length;se++)if(ce[se]===Os){oe=se;break}oe!==-1&&delete te[0][ue]}C===!1&&b[0]===!0&&(w--,w===0&&(C=!0,ie=ue,b[0]=!1)),R===!1&&b[1]===!0&&(E--,E===0&&(R=!0,b[1]=!1)),T===!1&&b[2]===!0&&(N--,N===0&&(T=!0,b[2]=!1))}}for(let ue=0;ue<this.certs.length-1;ue++)if(ue<this.certs.length-2&&typeof xe[ue+1]<"u")for(let ae=0;ae<xe[ue+1].mappings.length;ae++){if(xe[ue+1].mappings[ae].issuerDomainPolicy===Os||xe[ue+1].mappings[ae].subjectDomainPolicy===Os)return{result:!1,resultCode:99,resultMessage:'The "anyPolicy" should not be a part of policy mapping scheme'};let oe=-1,se=-1;for(let Ce=0;Ce<ce.length;Ce++)ce[Ce]===xe[ue+1].mappings[ae].issuerDomainPolicy&&(oe=Ce),ce[Ce]===xe[ue+1].mappings[ae].subjectDomainPolicy&&(se=Ce);typeof te[oe][ue]<"u"&&delete te[oe][ue];for(let Ce=0;Ce<ge[ue].certificatePolicies.length;Ce++)if(xe[ue+1].mappings[ae].subjectDomainPolicy===ge[ue].certificatePolicies[Ce].policyIdentifier&&oe!==-1&&se!==-1)for(let nt=0;nt<=ue;nt++)typeof te[se][nt]<"u"&&(te[oe][nt]=!0,delete te[se][nt])}for(let ue=0;ue<ce.length;ue++)if(ce[ue]===Os)for(let ae=0;ae<ie;ae++)delete te[ue][ae];const me=[];for(let ue=0;ue<te.length;ue++){let ae=!0;for(let oe=0;oe<this.certs.length-1;oe++){let se=!1;if(oe<ie&&ce[ue]===Os&&ce.length>1){ae=!1;break}if(typeof te[ue][oe]>"u"){if(oe>=ie){for(let Ce=0;Ce<ce.length;Ce++)if(ce[Ce]===Os){te[Ce][oe]===!0&&(se=!0);break}}if(!se){ae=!1;break}}}ae===!0&&me.push(ce[ue])}let Q=[];if(c.length===1&&c[0]===Os&&C===!1)Q=c;else if(me.length===1&&me[0]===Os)Q=c;else for(let ue=0;ue<me.length;ue++)for(let ae=0;ae<c.length;ae++)if(c[ae]===me[ue]||c[ae]===Os){Q.push(me[ue]);break}const ke={result:Q.length>0,resultCode:0,resultMessage:Q.length>0?g:'Zero "userConstrPolicies" array, no intersections with "authConstrPolicies"',authConstrPolicies:me,userConstrPolicies:Q,explicitPolicyIndicator:C,policyMappings:xe,certificatePath:this.certs};if(Q.length===0||ke.result===!1)return ke;ne=1;for(let ue=this.certs.length-2;ue>=0;ue--,ne++){const ae=this.certs[ue];let oe=[],se=[],Ce=[];if(ae.extensions)for(let Re=0;Re<ae.extensions.length;Re++){const re=ae.extensions[Re];re.extnID===Vk&&("permittedSubtrees"in re.parsedValue&&(se=se.concat(re.parsedValue.permittedSubtrees)),"excludedSubtrees"in re.parsedValue&&(Ce=Ce.concat(re.parsedValue.excludedSubtrees))),re.extnID===xk&&(oe=oe.concat(re.parsedValue.altNames))}let nt=F.length<=0;for(let Re=0;Re<F.length;Re++)switch(F[Re].base.type){case 4:{if(F[Re].base.value.typesAndValues.length!==ae.subject.typesAndValues.length)continue;nt=!0;for(let re=0;re<ae.subject.typesAndValues.length;re++)if(ae.subject.typesAndValues[re].type!==F[Re].base.value.typesAndValues[re].type){nt=!1;break}if(nt===!0)break}break;default:}if(nt===!1)throw ke.result=!1,ke.resultCode=21,ke.resultMessage="No necessary name form found",ke;const Xe=[[],[],[],[],[]];for(let Re=0;Re<L.length;Re++)switch(L[Re].base.type){case 1:Xe[0].push(L[Re]);break;case 2:Xe[1].push(L[Re]);break;case 4:Xe[2].push(L[Re]);break;case 6:Xe[3].push(L[Re]);break;case 7:Xe[4].push(L[Re]);break;default:}for(let Re=0;Re<5;Re++){let re=!1,gt=!1;const Vt=Xe[Re];for(let ze=0;ze<Vt.length;ze++){switch(Re){case 0:if(oe.length>0)for(let p=0;p<oe.length;p++)oe[p].type===1&&(gt=!0,re=re||r(oe[p].value,Vt[ze].base.value));else for(let p=0;p<ae.subject.typesAndValues.length;p++)(ae.subject.typesAndValues[p].type==="1.2.840.113549.1.9.1"||ae.subject.typesAndValues[p].type==="0.9.2342.19200300.100.1.3")&&(gt=!0,re=re||r(ae.subject.typesAndValues[p].value.valueBlock.value,Vt[ze].base.value));break;case 1:if(oe.length>0)for(let p=0;p<oe.length;p++)oe[p].type===2&&(gt=!0,re=re||n(oe[p].value,Vt[ze].base.value));break;case 2:gt=!0,re=o(ae.subject,Vt[ze].base.value);break;case 3:if(oe.length>0)for(let p=0;p<oe.length;p++)oe[p].type===6&&(gt=!0,re=re||i(oe[p].value,Vt[ze].base.value));break;case 4:if(oe.length>0)for(let p=0;p<oe.length;p++)oe[p].type===7&&(gt=!0,re=re||a(oe[p].value,Vt[ze].base.value));break;default:}if(re)break}if(re===!1&&Vt.length>0&&gt)throw ke.result=!1,ke.resultCode=41,ke.resultMessage='Failed to meet "permitted sub-trees" name constraint',ke}let Ke=!1;for(let Re=0;Re<H.length;Re++){switch(H[Re].base.type){case 1:if(oe.length>=0)for(let re=0;re<oe.length;re++)oe[re].type===1&&(Ke=Ke||r(oe[re].value,H[Re].base.value));else for(let re=0;re<ae.subject.typesAndValues.length;re++)(ae.subject.typesAndValues[re].type==="1.2.840.113549.1.9.1"||ae.subject.typesAndValues[re].type==="0.9.2342.19200300.100.1.3")&&(Ke=Ke||r(ae.subject.typesAndValues[re].value.valueBlock.value,H[Re].base.value));break;case 2:if(oe.length>0)for(let re=0;re<oe.length;re++)oe[re].type===2&&(Ke=Ke||n(oe[re].value,H[Re].base.value));break;case 4:Ke=Ke||o(ae.subject,H[Re].base.value);break;case 6:if(oe.length>0)for(let re=0;re<oe.length;re++)oe[re].type===6&&(Ke=Ke||i(oe[re].value,H[Re].base.value));break;case 7:if(oe.length>0)for(let re=0;re<oe.length;re++)oe[re].type===7&&(Ke=Ke||a(oe[re].value,H[Re].base.value));break;default:}if(Ke)break}if(Ke===!0)throw ke.result=!1,ke.resultCode=42,ke.resultMessage='Failed to meet "excluded sub-trees" name constraint',ke;L=L.concat(se),H=H.concat(Ce)}return ke}catch(l){return l instanceof Error?l instanceof ci?{result:!1,resultCode:l.code,resultMessage:l.message,error:l}:{result:!1,resultCode:ja.unknown,resultMessage:l.message,error:l}:l&&typeof l=="object"&&"resultMessage"in l?l:{result:!1,resultCode:-1,resultMessage:`${l}`}}}}const Dd="tbsResponseData",Rh="signatureAlgorithm",Oh="signature",Bl="certs",Rf="BasicOCSPResponse",Jp=`${Rf}.${Dd}`,Wp=`${Rf}.${Rh}`,qp=`${Rf}.${Oh}`,Ud=`${Rf}.${Bl}`,_2=[Jp,Wp,qp,Ud];class Hs extends Y{constructor(e={}){super(),this.tbsResponseData=d(e,Dd,Hs.defaultValues(Dd)),this.signatureAlgorithm=d(e,Rh,Hs.defaultValues(Rh)),this.signature=d(e,Oh,Hs.defaultValues(Oh)),Bl in e&&(this.certs=d(e,Bl,Hs.defaultValues(Bl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Dd:return new Rt;case Rh:return new $;case Oh:return new Oe;case Bl:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"type":{let n=Rt.compareWithDefault("tbs",t.tbs)&&Rt.compareWithDefault("responderID",t.responderID)&&Rt.compareWithDefault("producedAt",t.producedAt)&&Rt.compareWithDefault("responses",t.responses);return"responseExtensions"in t&&(n=n&&Rt.compareWithDefault("responseExtensions",t.responseExtensions)),n}case Rh:return t.algorithmId===g&&!("algorithmParams"in t);case Oh:return t.isEqual(Hs.defaultValues(e));case Bl:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||Rf,value:[Rt.schema(t.tbsResponseData||{names:{blockName:Jp}}),$.schema(t.signatureAlgorithm||{names:{blockName:Wp}}),new Oe({name:t.signature||qp}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new I({value:[new Ie({name:Ud,value:De.schema(t.certs||{})})]})]})]})}fromSchema(e){X(e,_2);const t=G(e,e,Hs.schema());j.assertSchema(t,this.className),this.tbsResponseData=new Rt({schema:t.result[Jp]}),this.signatureAlgorithm=new $({schema:t.result[Wp]}),this.signature=t.result[qp],Ud in t.result&&(this.certs=Array.from(t.result[Ud],n=>new De({schema:n})))}toSchema(){const e=[];return e.push(this.tbsResponseData.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.certs&&e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[new I({value:Array.from(this.certs,t=>t.toSchema())})]})),new I({value:e})}toJSON(){const e={tbsResponseData:this.tbsResponseData.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.certs&&(e.certs=Array.from(this.certs,t=>t.toJSON())),e}async getCertificateStatus(e,t,n=Ne(!0)){const r={isForCertificate:!1,status:2},i={},a=[];for(const o of this.tbsResponseData.responses){const l=n.getAlgorithmByOID(o.certID.hashAlgorithm.algorithmId,!0,"CertID.hashAlgorithm");if(!i[l.name]){i[l.name]=1;const c=new Ct;a.push(c),await c.createForCertificate(e,{hashAlgorithm:l.name,issuerCertificate:t},n)}}for(const o of this.tbsResponseData.responses)for(const l of a)if(o.certID.isEqual(l)){r.isForCertificate=!0;try{switch(o.certStatus.idBlock.isConstructed){case!0:o.certStatus.idBlock.tagNumber===1&&(r.status=1);break;case!1:switch(o.certStatus.idBlock.tagNumber){case 0:r.status=0;break;case 2:r.status=2;break;default:}break;default:}}catch{}return r}return r}async sign(e,t="SHA-1",n=Ne(!0)){if(!e)throw new Error("Need to provide a private key for signing");const r=await n.getSignatureParameters(e,t),i=r.parameters.algorithm;if(!("name"in i))throw new Error("Empty algorithm");this.signatureAlgorithm=r.signatureAlgorithm,this.tbsResponseData.tbsView=new Uint8Array(this.tbsResponseData.toSchema(!0).toBER());const a=await n.signWithPrivateKey(this.tbsResponseData.tbsView,e,{algorithm:i});this.signature=new Oe({valueHex:a})}async verify(e={},t=Ne(!0)){let n=null,r=-1;const i=e.trustedCerts||[];if(!this.certs)throw new Error("No certificates attached to the BasicOCSPResponse");switch(!0){case this.tbsResponseData.responderID instanceof Ge:for(const[c,u]of this.certs.entries())if(u.subject.isEqual(this.tbsResponseData.responderID)){r=c;break}break;case this.tbsResponseData.responderID instanceof z:for(const[c,u]of this.certs.entries()){const h=await t.digest({name:"sha-1"},u.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView);if(Cc(h,this.tbsResponseData.responderID.valueBlock.valueHex)){r=c;break}}break;default:throw new Error("Wrong value for responderID")}if(r===-1)throw new Error("Correct certificate was not found in OCSP response");n=this.certs[r];const a=[n];for(const c of this.certs){const u=await qk(c,n);u&&a.push(u)}if(!(await new cg({certs:a,trustedCerts:i}).verify({},t)).result)throw new Error("Validation of signer's certificate failed");return t.verifyWithPublicKey(this.tbsResponseData.tbsView,this.signature,this.certs[r].subjectPublicKeyInfo,this.signatureAlgorithm)}}Hs.CLASS_NAME="BasicOCSPResponse";const Qg="tbs",zg="version",Zg="subject",ep="subjectPublicKeyInfo",No="attributes",Vh="signatureAlgorithm",Ph="signatureValue",Vc="CertificationRequestInfo",vy=`${Vc}.version`,by=`${Vc}.subject`,Sy=`${Vc}.subjectPublicKeyInfo`,Um=`${Vc}.attributes`,B2=[Vc,vy,by,Sy,Um,Vh,Ph];function x2(s={}){const e=d(s,"names",{});return new I({name:e.CertificationRequestInfo||Vc,value:[new U({name:e.CertificationRequestInfoVersion||vy}),Ge.schema(e.subject||{names:{blockName:by}}),as.schema({names:{blockName:Sy}}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ie({optional:!0,name:e.CertificationRequestInfoAttributes||Um,value:et.schema(e.attributes||{})})]})]})}class fs extends Y{constructor(e={}){super(),this.tbsView=new Uint8Array(d(e,Qg,fs.defaultValues(Qg))),this.version=d(e,zg,fs.defaultValues(zg)),this.subject=d(e,Zg,fs.defaultValues(Zg)),this.subjectPublicKeyInfo=d(e,ep,fs.defaultValues(ep)),No in e&&(this.attributes=d(e,No,fs.defaultValues(No))),this.signatureAlgorithm=d(e,Vh,fs.defaultValues(Vh)),this.signatureValue=d(e,Ph,fs.defaultValues(Ph)),e.schema&&this.fromSchema(e.schema)}get tbs(){return ve.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case Qg:return _t;case zg:return 0;case Zg:return new Ge;case ep:return new as;case No:return[];case Vh:return new $;case Ph:return new Oe;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({value:[x2(t.certificationRequestInfo||{}),new I({name:t.signatureAlgorithm||Vh,value:[new he,new Ae({optional:!0})]}),new Oe({name:t.signatureValue||Ph})]})}fromSchema(e){X(e,B2);const t=G(e,e,fs.schema());j.assertSchema(t,this.className),this.tbsView=t.result.CertificationRequestInfo.valueBeforeDecodeView,this.version=t.result[vy].valueBlock.valueDec,this.subject=new Ge({schema:t.result[by]}),this.subjectPublicKeyInfo=new as({schema:t.result[Sy]}),Um in t.result&&(this.attributes=Array.from(t.result[Um],n=>new et({schema:n}))),this.signatureAlgorithm=new $({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[new U({value:this.version}),this.subject.toSchema(),this.subjectPublicKeyInfo.toSchema()];return No in this&&e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes||[],t=>t.toSchema())})),new I({value:e})}toSchema(e=!1){let t;if(e===!1){if(this.tbsView.byteLength===0)return fs.schema();const n=bt(this.tbsView);j.assert(n,"PKCS#10 Certificate Request"),t=n.result}else t=this.encodeTBS();return new I({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:be.ToHex(this.tbsView),version:this.version,subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return No in this&&(e.attributes=Array.from(this.attributes||[],t=>t.toJSON())),e}async sign(e,t="SHA-1",n=Ne(!0)){if(!e)throw new Error("Need to provide a private key for signing");const r=await n.getSignatureParameters(e,t),i=r.parameters;this.signatureAlgorithm=r.signatureAlgorithm,this.tbsView=new Uint8Array(this.encodeTBS().toBER());const a=await n.signWithPrivateKey(this.tbsView,e,i);this.signatureValue=new Oe({valueHex:a})}async verify(e=Ne(!0)){return e.verifyWithPublicKey(this.tbsView,this.signatureValue,this.subjectPublicKeyInfo,this.signatureAlgorithm)}async getPublicKey(e,t=Ne(!0)){return t.getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}}fs.CLASS_NAME="CertificationRequest";const Oa="digestAlgorithm",Va="digest",T2=[Oa,Va];class Fs extends Y{constructor(e={}){super(),this.digestAlgorithm=d(e,Oa,Fs.defaultValues(Oa)),this.digest=d(e,Va,Fs.defaultValues(Va)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Oa:return new $;case Va:return new z;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Oa:return $.compareWithDefault("algorithmId",t.algorithmId)&&!("algorithmParams"in t);case Va:return t.isEqual(Fs.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[$.schema(t.digestAlgorithm||{names:{blockName:Oa}}),new z({name:t.digest||Va})]})}fromSchema(e){X(e,T2);const t=G(e,e,Fs.schema({names:{digestAlgorithm:{names:{blockName:Oa}},digest:Va}}));j.assertSchema(t,this.className),this.digestAlgorithm=new $({schema:t.result.digestAlgorithm}),this.digest=t.result.digest}toSchema(){return new I({value:[this.digestAlgorithm.toSchema(),this.digest]})}toJSON(){return{digestAlgorithm:this.digestAlgorithm.toJSON(),digest:this.digest.toJSON()}}}Fs.CLASS_NAME="DigestInfo";const xl="eContentType",Gs="eContent",R2=[xl,Gs];class ms extends Y{constructor(e={}){if(super(),this.eContentType=d(e,xl,ms.defaultValues(xl)),Gs in e&&(this.eContent=d(e,Gs,ms.defaultValues(Gs)),this.eContent.idBlock.tagClass===1&&this.eContent.idBlock.tagNumber===4&&this.eContent.idBlock.isConstructed===!1)){const t=new z({idBlock:{isConstructed:!0},isConstructed:!0});let n=0;const r=this.eContent.valueBlock.valueHexView.slice().buffer;let i=r.byteLength;for(;i>0;){const a=new Uint8Array(r,n,n+65536>r.byteLength?r.byteLength-n:65536),o=new ArrayBuffer(a.length),l=new Uint8Array(o);for(let c=0;c<l.length;c++)l[c]=a[c];t.valueBlock.value.push(new z({valueHex:o})),i-=a.length,n+=a.length}this.eContent=t}e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case xl:return g;case Gs:return new z;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case xl:return t===g;case Gs:return t.idBlock.tagClass===1&&t.idBlock.tagNumber===4?t.isEqual(ms.defaultValues(Gs)):!1;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new he({name:t.eContentType||g}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ae({name:t.eContent||g})]})]})}fromSchema(e){X(e,R2);const t=G(e,e,ms.schema({names:{eContentType:xl,eContent:Gs}}));j.assertSchema(t,this.className),this.eContentType=t.result.eContentType.valueBlock.toString(),Gs in t.result&&(this.eContent=t.result.eContent)}toSchema(){const e=[];return e.push(new he({value:this.eContentType})),this.eContent&&ms.compareWithDefault(Gs,this.eContent)===!1&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.eContent]})),new I({value:e})}toJSON(){const e={eContentType:this.eContentType};return this.eContent&&ms.compareWithDefault(Gs,this.eContent)===!1&&(e.eContent=this.eContent.toJSON()),e}}ms.CLASS_NAME="EncapsulatedContentInfo";const Pa="mac",La="macSalt",Dn="iterations",O2=[Pa,La,Dn];class ns extends Y{constructor(e={}){super(),this.mac=d(e,Pa,ns.defaultValues(Pa)),this.macSalt=d(e,La,ns.defaultValues(La)),Dn in e&&(this.iterations=d(e,Dn,ns.defaultValues(Dn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Pa:return new Fs;case La:return new z;case Dn:return 1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Pa:return Fs.compareWithDefault("digestAlgorithm",t.digestAlgorithm)&&Fs.compareWithDefault("digest",t.digest);case La:return t.isEqual(ns.defaultValues(e));case Dn:return t===ns.defaultValues(e);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,optional:t.optional||!0,value:[Fs.schema(t.mac||{names:{blockName:Pa}}),new z({name:t.macSalt||La}),new U({optional:!0,name:t.iterations||Dn})]})}fromSchema(e){X(e,O2);const t=G(e,e,ns.schema({names:{mac:{names:{blockName:Pa}},macSalt:La,iterations:Dn}}));j.assertSchema(t,this.className),this.mac=new Fs({schema:t.result.mac}),this.macSalt=t.result.macSalt,Dn in t.result&&(this.iterations=t.result.iterations.valueBlock.valueDec)}toSchema(){const e=[this.mac.toSchema(),this.macSalt];return this.iterations!==void 0&&e.push(new U({value:this.iterations})),new I({value:e})}toJSON(){const e={mac:this.mac.toJSON(),macSalt:this.macSalt.toJSON()};return this.iterations!==void 0&&(e.iterations=this.iterations),e}}ns.CLASS_NAME="MacData";const Ja="hashAlgorithm",Wa="hashedMessage",V2=[Ja,Wa];class Ft extends Y{constructor(e={}){super(),this.hashAlgorithm=d(e,Ja,Ft.defaultValues(Ja)),this.hashedMessage=d(e,Wa,Ft.defaultValues(Wa)),e.schema&&this.fromSchema(e.schema)}static async create(e,t,n=Ne(!0)){const r=n.getOIDByAlgorithm({name:e},!0,"hashAlgorithm"),i=await n.digest(e,t);return new Ft({hashAlgorithm:new $({algorithmId:r,algorithmParams:new mt}),hashedMessage:new z({valueHex:i})})}static defaultValues(e){switch(e){case Ja:return new $;case Wa:return new z;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ja:return t.algorithmId===g&&!("algorithmParams"in t);case Wa:return t.isEqual(Ft.defaultValues(e))===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[$.schema(t.hashAlgorithm||{}),new z({name:t.hashedMessage||g})]})}fromSchema(e){X(e,V2);const t=G(e,e,Ft.schema({names:{hashAlgorithm:{names:{blockName:Ja}},hashedMessage:Wa}}));j.assertSchema(t,this.className),this.hashAlgorithm=new $({schema:t.result.hashAlgorithm}),this.hashedMessage=t.result.hashedMessage}toSchema(){return new I({value:[this.hashAlgorithm.toSchema(),this.hashedMessage]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),hashedMessage:this.hashedMessage.toJSON()}}}Ft.CLASS_NAME="MessageImprint";const Tl="reqCert",Yr="singleRequestExtensions",P2=[Tl,Yr];class zn extends Y{constructor(e={}){super(),this.reqCert=d(e,Tl,zn.defaultValues(Tl)),Yr in e&&(this.singleRequestExtensions=d(e,Yr,zn.defaultValues(Yr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Tl:return new Ct;case Yr:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Tl:return t.isEqual(zn.defaultValues(e));case Yr:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[Ct.schema(t.reqCert||{}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Fe.schema(t.extensions||{names:{blockName:t.singleRequestExtensions||g}})]})]})}fromSchema(e){X(e,P2);const t=G(e,e,zn.schema({names:{reqCert:{names:{blockName:Tl}},extensions:{names:{blockName:Yr}}}}));j.assertSchema(t,this.className),this.reqCert=new Ct({schema:t.result.reqCert}),Yr in t.result&&(this.singleRequestExtensions=Array.from(t.result.singleRequestExtensions.valueBlock.value,n=>new Fe({schema:n})))}toSchema(){const e=[];return e.push(this.reqCert.toSchema()),this.singleRequestExtensions&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new I({value:Array.from(this.singleRequestExtensions,t=>t.toSchema())})]})),new I({value:e})}toJSON(){const e={reqCert:this.reqCert.toJSON()};return this.singleRequestExtensions&&(e.singleRequestExtensions=Array.from(this.singleRequestExtensions,t=>t.toJSON())),e}}zn.CLASS_NAME="Request";const wd="tbs",Rl="version",Ol="requestorName",yd="requestList",Vl="requestExtensions",Pc="TBSRequest",Md=`${Pc}.${Rl}`,Hd=`${Pc}.${Ol}`,Gp=`${Pc}.requests`,$d=`${Pc}.${Vl}`,L2=[Pc,Md,Hd,Gp,$d];class Dt extends Y{constructor(e={}){super(),this.tbsView=new Uint8Array(d(e,wd,Dt.defaultValues(wd))),Rl in e&&(this.version=d(e,Rl,Dt.defaultValues(Rl))),Ol in e&&(this.requestorName=d(e,Ol,Dt.defaultValues(Ol))),this.requestList=d(e,yd,Dt.defaultValues(yd)),Vl in e&&(this.requestExtensions=d(e,Vl,Dt.defaultValues(Vl))),e.schema&&this.fromSchema(e.schema)}get tbs(){return ve.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}static defaultValues(e){switch(e){case wd:return _t;case Rl:return 0;case Ol:return new Ve;case yd:case Vl:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wd:return t.byteLength===0;case Rl:return t===Dt.defaultValues(e);case Ol:return t.type===Ve.defaultValues("type")&&Object.keys(t.value).length===0;case yd:case Vl:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||Pc,value:[new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new U({name:t.TBSRequestVersion||Md})]}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[Ve.schema(t.requestorName||{names:{blockName:Hd}})]}),new I({name:t.requestList||"TBSRequest.requestList",value:[new Ie({name:t.requests||Gp,value:zn.schema(t.requestNames||{})})]}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[ot.schema(t.extensions||{names:{blockName:t.requestExtensions||$d}})]})]})}fromSchema(e){X(e,L2);const t=G(e,e,Dt.schema());j.assertSchema(t,this.className),this.tbsView=t.result.TBSRequest.valueBeforeDecodeView,Md in t.result&&(this.version=t.result[Md].valueBlock.valueDec),Hd in t.result&&(this.requestorName=new Ve({schema:t.result[Hd]})),this.requestList=Array.from(t.result[Gp],n=>new zn({schema:n})),$d in t.result&&(this.requestExtensions=Array.from(t.result[$d].valueBlock.value,n=>new Fe({schema:n})))}toSchema(e=!1){let t;if(e===!1){if(this.tbsView.byteLength===0)return Dt.schema();const n=bt(this.tbsView);if(j.assert(n,"TBS Request"),!(n.result instanceof I))throw new Error("ASN.1 result should be SEQUENCE");t=n.result}else{const n=[];this.version!==void 0&&n.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[new U({value:this.version})]})),this.requestorName&&n.push(new V({idBlock:{tagClass:3,tagNumber:1},value:[this.requestorName.toSchema()]})),n.push(new I({value:Array.from(this.requestList,r=>r.toSchema())})),this.requestExtensions&&n.push(new V({idBlock:{tagClass:3,tagNumber:2},value:[new I({value:Array.from(this.requestExtensions,r=>r.toSchema())})]})),t=new I({value:n})}return t}toJSON(){const e={};return this.version!=null&&(e.version=this.version),this.requestorName&&(e.requestorName=this.requestorName.toJSON()),e.requestList=Array.from(this.requestList,t=>t.toJSON()),this.requestExtensions&&(e.requestExtensions=Array.from(this.requestExtensions,t=>t.toJSON())),e}}Dt.CLASS_NAME="TBSRequest";const Io="signatureAlgorithm",_o="signature",gr="certs";class Is extends Y{constructor(e={}){super(),this.signatureAlgorithm=d(e,Io,Is.defaultValues(Io)),this.signature=d(e,_o,Is.defaultValues(_o)),gr in e&&(this.certs=d(e,gr,Is.defaultValues(gr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Io:return new $;case _o:return new Oe;case gr:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Io:return t.algorithmId===g&&!("algorithmParams"in t);case _o:return t.isEqual(Is.defaultValues(e));case gr:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[$.schema(t.signatureAlgorithm||{}),new Oe({name:t.signature||g}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new I({value:[new Ie({name:t.certs||g,value:De.schema({})})]})]})]})}fromSchema(e){X(e,[Io,_o,gr]);const t=G(e,e,Is.schema({names:{signatureAlgorithm:{names:{blockName:Io}},signature:_o,certs:gr}}));j.assertSchema(t,this.className),this.signatureAlgorithm=new $({schema:t.result.signatureAlgorithm}),this.signature=t.result.signature,gr in t.result&&(this.certs=Array.from(t.result.certs,n=>new De({schema:n})))}toSchema(){const e=[];return e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.certs&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new I({value:Array.from(this.certs,t=>t.toSchema())})]})),new I({value:e})}toJSON(){const e={signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.certs&&(e.certs=Array.from(this.certs,t=>t.toJSON())),e}}Is.CLASS_NAME="Signature";const Pl="tbsRequest",Xr="optionalSignature",D2=[Pl,Xr];class tf extends Y{constructor(e={}){super(),this.tbsRequest=d(e,Pl,tf.defaultValues(Pl)),Xr in e&&(this.optionalSignature=d(e,Xr,tf.defaultValues(Xr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Pl:return new Dt;case Xr:return new Is;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Pl:return Dt.compareWithDefault("tbs",t.tbs)&&Dt.compareWithDefault("version",t.version)&&Dt.compareWithDefault("requestorName",t.requestorName)&&Dt.compareWithDefault("requestList",t.requestList)&&Dt.compareWithDefault("requestExtensions",t.requestExtensions);case Xr:return Is.compareWithDefault("signatureAlgorithm",t.signatureAlgorithm)&&Is.compareWithDefault("signature",t.signature)&&Is.compareWithDefault("certs",t.certs);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||"OCSPRequest",value:[Dt.schema(t.tbsRequest||{names:{blockName:Pl}}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Is.schema(t.optionalSignature||{names:{blockName:Xr}})]})]})}fromSchema(e){X(e,D2);const t=G(e,e,tf.schema());j.assertSchema(t,this.className),this.tbsRequest=new Dt({schema:t.result.tbsRequest}),Xr in t.result&&(this.optionalSignature=new Is({schema:t.result.optionalSignature}))}toSchema(e=!1){const t=[];return t.push(this.tbsRequest.toSchema(e)),this.optionalSignature&&t.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.optionalSignature.toSchema()]})),new I({value:t})}toJSON(){const e={tbsRequest:this.tbsRequest.toJSON()};return this.optionalSignature&&(e.optionalSignature=this.optionalSignature.toJSON()),e}async createForCertificate(e,t,n=Ne(!0)){const r=new Ct;await r.createForCertificate(e,t,n),this.tbsRequest.requestList.push(new zn({reqCert:r}))}async sign(e,t="SHA-1",n=Ne(!0)){if(Pe.assertEmpty(e,"privateKey","OCSPRequest.sign method"),!this.optionalSignature)throw new Error('Need to create "optionalSignature" field before signing');const r=await n.getSignatureParameters(e,t),i=r.parameters;this.optionalSignature.signatureAlgorithm=r.signatureAlgorithm;const a=this.tbsRequest.toSchema(!0).toBER(!1),o=await n.signWithPrivateKey(a,e,i);this.optionalSignature.signature=new Oe({valueHex:o})}verify(){}}tf.CLASS_NAME="OCSPRequest";const Ll="responseType",Dl="response",U2=[Ll,Dl];class Zs extends Y{constructor(e={}){super(),this.responseType=d(e,Ll,Zs.defaultValues(Ll)),this.response=d(e,Dl,Zs.defaultValues(Dl)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ll:return g;case Dl:return new z;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ll:return t===g;case Dl:return t.isEqual(Zs.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new he({name:t.responseType||g}),new z({name:t.response||g})]})}fromSchema(e){X(e,U2);const t=G(e,e,Zs.schema({names:{responseType:Ll,response:Dl}}));j.assertSchema(t,this.className),this.responseType=t.result.responseType.valueBlock.toString(),this.response=t.result.response}toSchema(){return new I({value:[new he({value:this.responseType}),this.response]})}toJSON(){return{responseType:this.responseType,response:this.response.toJSON()}}}Zs.CLASS_NAME="ResponseBytes";const Bo="responseStatus",_n="responseBytes";class ec extends Y{constructor(e={}){super(),this.responseStatus=d(e,Bo,ec.defaultValues(Bo)),_n in e&&(this.responseBytes=d(e,_n,ec.defaultValues(_n))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Bo:return new Ei;case _n:return new Zs;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Bo:return t.isEqual(ec.defaultValues(e));case _n:return Zs.compareWithDefault("responseType",t.responseType)&&Zs.compareWithDefault("response",t.response);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||"OCSPResponse",value:[new Ei({name:t.responseStatus||Bo}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Zs.schema(t.responseBytes||{names:{blockName:_n}})]})]})}fromSchema(e){X(e,[Bo,_n]);const t=G(e,e,ec.schema());j.assertSchema(t,this.className),this.responseStatus=t.result.responseStatus,_n in t.result&&(this.responseBytes=new Zs({schema:t.result.responseBytes}))}toSchema(){const e=[];return e.push(this.responseStatus),this.responseBytes&&e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:[this.responseBytes.toSchema()]})),new I({value:e})}toJSON(){const e={responseStatus:this.responseStatus.toJSON()};return this.responseBytes&&(e.responseBytes=this.responseBytes.toJSON()),e}async getCertificateStatus(e,t,n=Ne(!0)){let r;const i={isForCertificate:!1,status:2};if(!this.responseBytes||this.responseBytes.responseType!==Id)return i;try{const a=bt(this.responseBytes.response.valueBlock.valueHexView);j.assert(a,"Basic OCSP response"),r=new Hs({schema:a.result})}catch{return i}return r.getCertificateStatus(e,t,n)}async sign(e,t,n=Ne(!0)){var r;if(this.responseBytes&&this.responseBytes.responseType===Id)return Hs.fromBER(this.responseBytes.response.valueBlock.valueHexView).sign(e,t,n);throw new Error(`Unknown ResponseBytes type: ${((r=this.responseBytes)===null||r===void 0?void 0:r.responseType)||"Unknown"}`)}async verify(e=null,t=Ne(!0)){var n;if(!(_n in this))throw new Error("Empty ResponseBytes field");if(this.responseBytes&&this.responseBytes.responseType===Id){const r=Hs.fromBER(this.responseBytes.response.valueBlock.valueHexView);return e!==null&&(r.certs||(r.certs=[]),r.certs.push(e)),r.verify({},t)}throw new Error(`Unknown ResponseBytes type: ${((n=this.responseBytes)===null||n===void 0?void 0:n.responseType)||"Unknown"}`)}}ec.CLASS_NAME="OCSPResponse";const Mi="type",Un="attributes",vd="encodedValue",M2=[Un];class ut extends Y{constructor(e={}){super(),this.type=d(e,Mi,ut.defaultValues(Mi)),this.attributes=d(e,Un,ut.defaultValues(Un)),this.encodedValue=d(e,vd,ut.defaultValues(vd)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Mi:return-1;case Un:return[];case vd:return _t;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Mi:return t===ut.defaultValues(Mi);case Un:return t.length===0;case vd:return t.byteLength===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new V({name:t.blockName||g,optional:!0,idBlock:{tagClass:3,tagNumber:t.tagNumber||0},value:[new Ie({name:t.attributes||g,value:et.schema()})]})}fromSchema(e){X(e,M2);const t=G(e,e,ut.schema({names:{tagNumber:this.type,attributes:Un}}));j.assertSchema(t,this.className),this.type=t.result.idBlock.tagNumber,this.encodedValue=ve.toArrayBuffer(t.result.valueBeforeDecodeView);const n=new Uint8Array(this.encodedValue);if(n[0]=49,!(Un in t.result)){if(this.type===0)throw new Error("Wrong structure of SignedUnsignedAttributes");return}this.attributes=Array.from(t.result.attributes,r=>new et({schema:r}))}toSchema(){if(ut.compareWithDefault(Mi,this.type)||ut.compareWithDefault(Un,this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return new V({optional:!0,idBlock:{tagClass:3,tagNumber:this.type},value:Array.from(this.attributes,e=>e.toSchema())})}toJSON(){if(ut.compareWithDefault(Mi,this.type)||ut.compareWithDefault(Un,this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return{type:this.type,attributes:Array.from(this.attributes,e=>e.toJSON())}}}ut.CLASS_NAME="SignedAndUnsignedAttributes";const Ul="version",Da="sid",Ml="digestAlgorithm",Qr="signedAttrs",Hl="signatureAlgorithm",Lh="signature",zr="unsignedAttrs",Ri="SignerInfo",Yp=`${Ri}.${Ul}`,Dh=`${Ri}.${Da}`,Xp=`${Ri}.${Ml}`,Fd=`${Ri}.${Qr}`,Qp=`${Ri}.${Hl}`,zp=`${Ri}.${Lh}`,Kd=`${Ri}.${zr}`,H2=[Yp,Dh,Xp,Fd,Qp,zp,Kd];class pt extends Y{constructor(e={}){super(),this.version=d(e,Ul,pt.defaultValues(Ul)),this.sid=d(e,Da,pt.defaultValues(Da)),this.digestAlgorithm=d(e,Ml,pt.defaultValues(Ml)),Qr in e&&(this.signedAttrs=d(e,Qr,pt.defaultValues(Qr))),this.signatureAlgorithm=d(e,Hl,pt.defaultValues(Hl)),this.signature=d(e,Lh,pt.defaultValues(Lh)),zr in e&&(this.unsignedAttrs=d(e,zr,pt.defaultValues(zr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ul:return 0;case Da:return new Ae;case Ml:return new $;case Qr:return new ut({type:0});case Hl:return new $;case Lh:return new z;case zr:return new ut({type:1});default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ul:return pt.defaultValues(Ul)===t;case Da:return t instanceof Ae;case Ml:return t instanceof $?t.isEqual(pt.defaultValues(Ml)):!1;case Qr:return ut.compareWithDefault("type",t.type)&&ut.compareWithDefault("attributes",t.attributes)&&ut.compareWithDefault("encodedValue",t.encodedValue);case Hl:return t instanceof $?t.isEqual(pt.defaultValues(Hl)):!1;case Lh:case zr:return ut.compareWithDefault("type",t.type)&&ut.compareWithDefault("attributes",t.attributes)&&ut.compareWithDefault("encodedValue",t.encodedValue);default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:Ri,value:[new U({name:t.version||Yp}),new at({value:[Bt.schema(t.sidSchema||{names:{blockName:Dh}}),new at({value:[new V({optional:!0,name:t.sid||Dh,idBlock:{tagClass:3,tagNumber:0},value:[new z]}),new Se({optional:!0,name:t.sid||Dh,idBlock:{tagClass:3,tagNumber:0}})]})]}),$.schema(t.digestAlgorithm||{names:{blockName:Xp}}),ut.schema(t.signedAttrs||{names:{blockName:Fd,tagNumber:0}}),$.schema(t.signatureAlgorithm||{names:{blockName:Qp}}),new z({name:t.signature||zp}),ut.schema(t.unsignedAttrs||{names:{blockName:Kd,tagNumber:1}})]})}fromSchema(e){X(e,H2);const t=G(e,e,pt.schema());j.assertSchema(t,this.className),this.version=t.result[Yp].valueBlock.valueDec;const n=t.result[Dh];n.idBlock.tagClass===1?this.sid=new Bt({schema:n}):this.sid=n,this.digestAlgorithm=new $({schema:t.result[Xp]}),Fd in t.result&&(this.signedAttrs=new ut({type:0,schema:t.result[Fd]})),this.signatureAlgorithm=new $({schema:t.result[Qp]}),this.signature=t.result[zp],Kd in t.result&&(this.unsignedAttrs=new ut({type:1,schema:t.result[Kd]}))}toSchema(){if(pt.compareWithDefault(Da,this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e=[];return e.push(new U({value:this.version})),this.sid instanceof Bt?e.push(this.sid.toSchema()):e.push(this.sid),e.push(this.digestAlgorithm.toSchema()),this.signedAttrs&&pt.compareWithDefault(Qr,this.signedAttrs)===!1&&e.push(this.signedAttrs.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.unsignedAttrs&&pt.compareWithDefault(zr,this.unsignedAttrs)===!1&&e.push(this.unsignedAttrs.toSchema()),new I({value:e})}toJSON(){if(pt.compareWithDefault(Da,this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e={version:this.version,digestAlgorithm:this.digestAlgorithm.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.sid instanceof Ae||(e.sid=this.sid.toJSON()),this.signedAttrs&&pt.compareWithDefault(Qr,this.signedAttrs)===!1&&(e.signedAttrs=this.signedAttrs.toJSON()),this.unsignedAttrs&&pt.compareWithDefault(zr,this.unsignedAttrs)===!1&&(e.unsignedAttrs=this.unsignedAttrs.toJSON()),e}}pt.CLASS_NAME="SignerInfo";const Uh="version",Mh="policy",Hh="messageImprint",$h="serialNumber",Fh="genTime",Ua="ordering",Ma="nonce",$l="accuracy",Fl="tsa",Kl="extensions",cn="TSTInfo",Zp=`${cn}.${Uh}`,ew=`${cn}.${Mh}`,tw=`${cn}.${Hh}`,sw=`${cn}.${$h}`,nw=`${cn}.${Fh}`,jd=`${cn}.${$l}`,Jd=`${cn}.${Ua}`,Wd=`${cn}.${Ma}`,qd=`${cn}.${Fl}`,Gd=`${cn}.${Kl}`,$2=[Zp,ew,tw,sw,nw,jd,Jd,Wd,qd,Gd];class Jt extends Y{constructor(e={}){super(),this.version=d(e,Uh,Jt.defaultValues(Uh)),this.policy=d(e,Mh,Jt.defaultValues(Mh)),this.messageImprint=d(e,Hh,Jt.defaultValues(Hh)),this.serialNumber=d(e,$h,Jt.defaultValues($h)),this.genTime=d(e,Fh,Jt.defaultValues(Fh)),$l in e&&(this.accuracy=d(e,$l,Jt.defaultValues($l))),Ua in e&&(this.ordering=d(e,Ua,Jt.defaultValues(Ua))),Ma in e&&(this.nonce=d(e,Ma,Jt.defaultValues(Ma))),Fl in e&&(this.tsa=d(e,Fl,Jt.defaultValues(Fl))),Kl in e&&(this.extensions=d(e,Kl,Jt.defaultValues(Kl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Uh:return 0;case Mh:return g;case Hh:return new Ft;case $h:return new U;case Fh:return new Date(0,0,0);case $l:return new Cs;case Ua:return!1;case Ma:return new U;case Fl:return new Ve;case Kl:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Uh:case Mh:case Fh:case Ua:return t===Jt.defaultValues(Ua);case Hh:return Ft.compareWithDefault(Ja,t.hashAlgorithm)&&Ft.compareWithDefault(Wa,t.hashedMessage);case $h:case Ma:return t.isEqual(Jt.defaultValues(Ma));case $l:return Cs.compareWithDefault(wr,t.seconds)&&Cs.compareWithDefault(yr,t.millis)&&Cs.compareWithDefault(vr,t.micros);case Fl:return Ve.compareWithDefault(Zc,t.type)&&Ve.compareWithDefault(eu,t.value);case Kl:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||cn,value:[new U({name:t.version||Zp}),new he({name:t.policy||ew}),Ft.schema(t.messageImprint||{names:{blockName:tw}}),new U({name:t.serialNumber||sw}),new it({name:t.genTime||nw}),Cs.schema(t.accuracy||{names:{blockName:jd}}),new Cn({name:t.ordering||Jd,optional:!0}),new U({name:t.nonce||Wd,optional:!0}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Ve.schema(t.tsa||{names:{blockName:qd}})]}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ie({name:t.extensions||Gd,value:Fe.schema(t.extension||{})})]})]})}fromSchema(e){X(e,$2);const t=G(e,e,Jt.schema());j.assertSchema(t,this.className),this.version=t.result[Zp].valueBlock.valueDec,this.policy=t.result[ew].valueBlock.toString(),this.messageImprint=new Ft({schema:t.result[tw]}),this.serialNumber=t.result[sw],this.genTime=t.result[nw].toDate(),jd in t.result&&(this.accuracy=new Cs({schema:t.result[jd]})),Jd in t.result&&(this.ordering=t.result[Jd].valueBlock.value),Wd in t.result&&(this.nonce=t.result[Wd]),qd in t.result&&(this.tsa=new Ve({schema:t.result[qd]})),Gd in t.result&&(this.extensions=Array.from(t.result[Gd],n=>new Fe({schema:n})))}toSchema(){const e=[];return e.push(new U({value:this.version})),e.push(new he({value:this.policy})),e.push(this.messageImprint.toSchema()),e.push(this.serialNumber),e.push(new it({valueDate:this.genTime})),this.accuracy&&e.push(this.accuracy.toSchema()),this.ordering!==void 0&&e.push(new Cn({value:this.ordering})),this.nonce&&e.push(this.nonce),this.tsa&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.tsa.toSchema()]})),this.extensions&&e.push(new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.extensions,t=>t.toSchema())})),new I({value:e})}toJSON(){const e={version:this.version,policy:this.policy,messageImprint:this.messageImprint.toJSON(),serialNumber:this.serialNumber.toJSON(),genTime:this.genTime};return this.accuracy&&(e.accuracy=this.accuracy.toJSON()),this.ordering!==void 0&&(e.ordering=this.ordering),this.nonce&&(e.nonce=this.nonce.toJSON()),this.tsa&&(e.tsa=this.tsa.toJSON()),this.extensions&&(e.extensions=Array.from(this.extensions,t=>t.toJSON())),e}async verify(e,t=Ne(!0)){if(!e.data)throw new Error('"data" is a mandatory attribute for TST_INFO verification');const n=e.data;if(e.notBefore&&this.genTime<e.notBefore)throw new Error("Generation time for TSTInfo object is less than notBefore value");if(e.notAfter&&this.genTime>e.notAfter)throw new Error("Generation time for TSTInfo object is more than notAfter value");const r=t.getAlgorithmByOID(this.messageImprint.hashAlgorithm.algorithmId,!0,"MessageImprint.hashAlgorithm"),i=await t.digest(r.name,new Uint8Array(n));return ve.isEqual(i,this.messageImprint.hashedMessage.valueBlock.valueHexView)}}Jt.CLASS_NAME="TSTInfo";const jl="version",Kh="digestAlgorithms",jh="encapContentInfo",Jl="certificates",Wl="crls",Jh="signerInfos",Yc="ocsps",wo="SignedData",rw=`${wo}.${jl}`,Yd=`${wo}.${Kh}`,iw=`${wo}.${jh}`,Xd=`${wo}.${Jl}`,Qd=`${wo}.${Wl}`,zd=`${wo}.${Jh}`,F2=[rw,Yd,iw,Xd,Qd,zd];class jt extends Error{constructor({message:e,code:t=0,date:n=new Date,signatureVerified:r=null,signerCertificate:i=null,signerCertificateVerified:a=null,timestampSerial:o=null,certificatePath:l=[]}){super(e),this.name="SignedDataVerifyError",this.date=n,this.code=t,this.timestampSerial=o,this.signatureVerified=r,this.signerCertificate=i,this.signerCertificateVerified=a,this.certificatePath=l}}class $t extends Y{constructor(e={}){super(),this.version=d(e,jl,$t.defaultValues(jl)),this.digestAlgorithms=d(e,Kh,$t.defaultValues(Kh)),this.encapContentInfo=d(e,jh,$t.defaultValues(jh)),Jl in e&&(this.certificates=d(e,Jl,$t.defaultValues(Jl))),Wl in e&&(this.crls=d(e,Wl,$t.defaultValues(Wl))),Yc in e&&(this.ocsps=d(e,Yc,$t.defaultValues(Yc))),this.signerInfos=d(e,Jh,$t.defaultValues(Jh)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case jl:return 0;case Kh:return[];case jh:return new ms;case Jl:return[];case Wl:return[];case Yc:return[];case Jh:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case jl:return t===$t.defaultValues(jl);case jh:return ms.compareWithDefault("eContentType",t.eContentType)&&ms.compareWithDefault("eContent",t.eContent);case Kh:case Jl:case Wl:case Yc:case Jh:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return t.optional===void 0&&(t.optional=!1),new I({name:t.blockName||wo,optional:t.optional,value:[new U({name:t.version||rw}),new yt({value:[new Ie({name:t.digestAlgorithms||Yd,value:$.schema()})]}),ms.schema(t.encapContentInfo||{names:{blockName:iw}}),new V({name:t.certificates||Xd,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:An.schema().valueBlock.value}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:sr.schema(t.crls||{names:{crls:Qd}}).valueBlock.value}),new yt({value:[new Ie({name:t.signerInfos||zd,value:pt.schema()})]})]})}fromSchema(e){X(e,F2);const t=G(e,e,$t.schema());if(j.assertSchema(t,this.className),this.version=t.result[rw].valueBlock.valueDec,Yd in t.result&&(this.digestAlgorithms=Array.from(t.result[Yd],n=>new $({schema:n}))),this.encapContentInfo=new ms({schema:t.result[iw]}),Xd in t.result){const n=new An({schema:new yt({value:t.result[Xd].valueBlock.value})});this.certificates=n.certificates.slice(0)}Qd in t.result&&(this.crls=Array.from(t.result[Qd],n=>n.idBlock.tagClass===1?new At({schema:n}):(n.idBlock.tagClass=1,n.idBlock.tagNumber=16,new tr({schema:n})))),zd in t.result&&(this.signerInfos=Array.from(t.result[zd],n=>new pt({schema:n})))}toSchema(e=!1){const t=[];if(this.certificates&&this.certificates.length&&this.certificates.some(n=>n instanceof Si)||this.crls&&this.crls.length&&this.crls.some(n=>n instanceof tr)?this.version=5:this.certificates&&this.certificates.length&&this.certificates.some(n=>n instanceof xs)?this.version=4:this.certificates&&this.certificates.length&&this.certificates.some(n=>n instanceof qn)||this.signerInfos.some(n=>n.version===3)||this.encapContentInfo.eContentType!==$t.ID_DATA?this.version=3:this.version=1,t.push(new U({value:this.version})),t.push(new yt({value:Array.from(this.digestAlgorithms,n=>n.toSchema())})),t.push(this.encapContentInfo.toSchema()),this.certificates){const r=new An({certificates:this.certificates}).toSchema();t.push(new V({idBlock:{tagClass:3,tagNumber:0},value:r.valueBlock.value}))}return this.crls&&t.push(new V({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.crls,n=>{if(n instanceof tr){const r=n.toSchema();return r.idBlock.tagClass=3,r.idBlock.tagNumber=1,r}return n.toSchema(e)})})),t.push(new yt({value:Array.from(this.signerInfos,n=>n.toSchema())})),new I({value:t})}toJSON(){const e={version:this.version,digestAlgorithms:Array.from(this.digestAlgorithms,t=>t.toJSON()),encapContentInfo:this.encapContentInfo.toJSON(),signerInfos:Array.from(this.signerInfos,t=>t.toJSON())};return this.certificates&&(e.certificates=Array.from(this.certificates,t=>t.toJSON())),this.crls&&(e.crls=Array.from(this.crls,t=>t.toJSON())),e}async verify({signer:e=-1,data:t=_t,trustedCerts:n=[],checkDate:r=new Date,checkChain:i=!1,passedWhenNotRevValues:a=!1,extendedMode:o=!1,findOrigin:l=null,findIssuer:c=null}={},u=Ne(!0)){let h=null,f=null;try{let m=_t,S=g,k=[];const C=this.signerInfos[e];if(!C)throw new jt({date:r,code:1,message:"Unable to get signer by supplied index"});if(!this.certificates)throw new jt({date:r,code:2,message:"No certificates attached to this signed data"});if(C.sid instanceof Bt){for(const w of this.certificates)if(w instanceof De&&w.issuer.isEqual(C.sid.issuer)&&w.serialNumber.isEqual(C.sid.serialNumber)){h=w;break}}else{const w=C.sid,E=w.idBlock.isConstructed?w.valueBlock.value[0].valueBlock.valueHex:w.valueBlock.valueHex;for(const N of this.certificates){if(!(N instanceof De))continue;const L=await u.digest({name:"sha-1"},N.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView);if(Cc(L,E)){h=N;break}}}if(!h)throw new jt({date:r,code:3,message:"Unable to find signer certificate"});if(this.encapContentInfo.eContentType===WR){if(!this.encapContentInfo.eContent)throw new jt({date:r,code:15,message:"Error during verification: TSTInfo eContent is empty",signatureVerified:null,signerCertificate:h,timestampSerial:f,signerCertificateVerified:!0});let w;try{w=Jt.fromBER(this.encapContentInfo.eContent.valueBlock.valueHexView)}catch{throw new jt({date:r,code:15,message:"Error during verification: TSTInfo wrong ASN.1 schema ",signatureVerified:null,signerCertificate:h,timestampSerial:f,signerCertificateVerified:!0})}if(r=w.genTime,f=w.serialNumber.valueBlock.valueHexView.slice(),t.byteLength===0)throw new jt({date:r,code:4,message:"Missed detached data input array"});if(!await w.verify({data:t},u))throw new jt({date:r,code:15,message:"Error during verification: TSTInfo verification is failed",signatureVerified:!1,signerCertificate:h,timestampSerial:f,signerCertificateVerified:!0})}if(i){const w=this.certificates.filter(H=>H instanceof De&&!!qk(H,h)),E={checkDate:r,certs:w,trustedCerts:n};c&&(E.findIssuer=c),l&&(E.findOrigin=l);const N=new cg(E);if(N.certs.push(h),this.crls)for(const H of this.crls)"thisUpdate"in H?N.crls.push(H):H.otherRevInfoFormat===Id&&N.ocsps.push(new Hs({schema:H.otherRevInfo}));this.ocsps&&N.ocsps.push(...this.ocsps);const L=await N.verify({passedWhenNotRevValues:a},u).catch(H=>{throw new jt({date:r,code:5,message:`Validation of signer's certificate failed with error: ${H instanceof Object?H.resultMessage:H}`,signerCertificate:h,signerCertificateVerified:!1})});if(L.certificatePath&&(k=L.certificatePath),!L.result)throw new jt({date:r,code:5,message:`Validation of signer's certificate failed: ${L.resultMessage}`,signerCertificate:h,signerCertificateVerified:!1})}const R=u.getAlgorithmByOID(C.digestAlgorithm.algorithmId);if(!("name"in R))throw new jt({date:r,code:7,message:`Unsupported signature algorithm: ${C.digestAlgorithm.algorithmId}`,signerCertificate:h,signerCertificateVerified:!0});S=R.name;const T=this.encapContentInfo.eContent;if(T)T.idBlock.tagClass===1&&T.idBlock.tagNumber===4?t=T.getValue():t=T.valueBlock.valueBeforeDecodeView;else if(t.byteLength===0)throw new jt({date:r,code:8,message:"Missed detached data input array",signerCertificate:h,signerCertificateVerified:!0});if(C.signedAttrs){let w=!1,E=!1;for(const N of C.signedAttrs.attributes)if(N.type==="1.2.840.113549.1.9.3"&&(w=!0),N.type==="1.2.840.113549.1.9.4"&&(E=!0,m=N.values[0].valueBlock.valueHex),w&&E)break;if(w===!1)throw new jt({date:r,code:9,message:'Attribute "content-type" is a mandatory attribute for "signed attributes"',signerCertificate:h,signerCertificateVerified:!0});if(E===!1)throw new jt({date:r,code:10,message:'Attribute "message-digest" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:h,signerCertificateVerified:!0})}if(C.signedAttrs){const w=await u.digest(S,new Uint8Array(t));if(!Cc(w,m))throw new jt({date:r,code:15,message:"Error during verification: Message digest doesn't match",signatureVerified:null,signerCertificate:h,timestampSerial:f,signerCertificateVerified:!0});t=C.signedAttrs.encodedValue}const b=await u.verifyWithPublicKey(t,C.signature,h.subjectPublicKeyInfo,h.signatureAlgorithm,S);return o?{date:r,code:14,message:g,signatureVerified:b,signerCertificate:h,timestampSerial:f,signerCertificateVerified:!0,certificatePath:k}:b}catch(m){throw m instanceof jt?m:new jt({date:r,code:15,message:`Error during verification: ${m instanceof Error?m.message:m}`,signatureVerified:null,signerCertificate:h,timestampSerial:f,signerCertificateVerified:!0})}}async sign(e,t,n="SHA-1",r=_t,i=Ne(!0)){if(!e)throw new Error("Need to provide a private key for signing");const a=i.getOIDByAlgorithm({name:n},!0,"hashAlgorithm");this.digestAlgorithms.filter(h=>h.algorithmId===a).length===0&&this.digestAlgorithms.push(new $({algorithmId:a,algorithmParams:new mt}));const o=this.signerInfos[t];if(!o)throw new RangeError("SignerInfo index is out of range");o.digestAlgorithm=new $({algorithmId:a,algorithmParams:new mt});const l=await i.getSignatureParameters(e,n),c=l.parameters;if(o.signatureAlgorithm=l.signatureAlgorithm,o.signedAttrs)if(o.signedAttrs.encodedValue.byteLength!==0)r=o.signedAttrs.encodedValue;else{r=o.signedAttrs.toSchema().toBER();const h=ve.toUint8Array(r);h[0]=49}else{const h=this.encapContentInfo.eContent;if(h)h.idBlock.tagClass===1&&h.idBlock.tagNumber===4?r=h.getValue():r=h.valueBlock.valueBeforeDecodeView;else if(r.byteLength===0)throw new Error("Missed detached data input array")}const u=await i.signWithPrivateKey(r,e,c);o.signature=new z({valueHex:u})}}$t.CLASS_NAME="SignedData";$t.ID_DATA=hy;const Ha="version",$a="authSafe",Mn="macData",Xc="parsedValue",K2=[Ha,$a,Mn];class ai extends Y{constructor(e={}){super(),this.version=d(e,Ha,ai.defaultValues(Ha)),this.authSafe=d(e,$a,ai.defaultValues($a)),Mn in e&&(this.macData=d(e,Mn,ai.defaultValues(Mn))),Xc in e&&(this.parsedValue=d(e,Xc,ai.defaultValues(Xc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ha:return 3;case $a:return new Ze;case Mn:return new ns;case Xc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ha:return t===ai.defaultValues(e);case $a:return Ze.compareWithDefault("contentType",t.contentType)&&Ze.compareWithDefault("content",t.content);case Mn:return ns.compareWithDefault("mac",t.mac)&&ns.compareWithDefault("macSalt",t.macSalt)&&ns.compareWithDefault("iterations",t.iterations);case Xc:return t instanceof Object&&Object.keys(t).length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new U({name:t.version||Ha}),Ze.schema(t.authSafe||{names:{blockName:$a}}),ns.schema(t.macData||{names:{blockName:Mn,optional:!0}})]})}fromSchema(e){X(e,K2);const t=G(e,e,ai.schema({names:{version:Ha,authSafe:{names:{blockName:$a}},macData:{names:{blockName:Mn}}}}));j.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.authSafe=new Ze({schema:t.result.authSafe}),Mn in t.result&&(this.macData=new ns({schema:t.result.macData}))}toSchema(){const e=[new U({value:this.version}),this.authSafe.toSchema()];return this.macData&&e.push(this.macData.toSchema()),new I({value:e})}toJSON(){const e={version:this.version,authSafe:this.authSafe.toJSON()};return this.macData&&(e.macData=this.macData.toJSON()),e}async makeInternalValues(e={},t=Ne(!0)){if(qe.assert(e,"parameters","object"),!this.parsedValue)throw new Error('Please call "parseValues" function first in order to make "parsedValue" data');switch(Pe.assertEmpty(this.parsedValue.integrityMode,"integrityMode","parsedValue"),Pe.assertEmpty(this.parsedValue.authenticatedSafe,"authenticatedSafe","parsedValue"),this.parsedValue.integrityMode){case 0:{if(!("iterations"in e))throw new Pe("iterations");Pe.assertEmpty(e.pbkdf2HashAlgorithm,"pbkdf2HashAlgorithm"),Pe.assertEmpty(e.hmacHashAlgorithm,"hmacHashAlgorithm"),Pe.assertEmpty(e.password,"password");const n=new ArrayBuffer(64),r=new Uint8Array(n);t.getRandomValues(r);const i=this.parsedValue.authenticatedSafe.toSchema().toBER(!1);this.authSafe=new Ze({contentType:Ze.DATA,content:new z({valueHex:i})});const a=await t.stampDataWithPassword({password:e.password,hashAlgorithm:e.hmacHashAlgorithm,salt:n,iterationCount:e.iterations,contentToStamp:i});this.macData=new ns({mac:new Fs({digestAlgorithm:new $({algorithmId:t.getOIDByAlgorithm({name:e.hmacHashAlgorithm},!0,"hmacHashAlgorithm")}),digest:new z({valueHex:a})}),macSalt:new z({valueHex:n}),iterations:e.iterations})}break;case 1:{if(!("signingCertificate"in e))throw new Pe("signingCertificate");Pe.assertEmpty(e.privateKey,"privateKey"),Pe.assertEmpty(e.hashAlgorithm,"hashAlgorithm");const n=this.parsedValue.authenticatedSafe.toSchema().toBER(!1),r=new $t({version:1,encapContentInfo:new ms({eContentType:"1.2.840.113549.1.7.1",eContent:new z({valueHex:n})}),certificates:[e.signingCertificate]}),i=await t.digest({name:e.hashAlgorithm},new Uint8Array(n)),a=[];a.push(new et({type:"1.2.840.113549.1.9.3",values:[new he({value:"1.2.840.113549.1.7.1"})]})),a.push(new et({type:"1.2.840.113549.1.9.5",values:[new Ic({valueDate:new Date})]})),a.push(new et({type:"1.2.840.113549.1.9.4",values:[new z({valueHex:i})]})),r.signerInfos.push(new pt({version:1,sid:new Bt({issuer:e.signingCertificate.issuer,serialNumber:e.signingCertificate.serialNumber}),signedAttrs:new ut({type:0,attributes:a})})),await r.sign(e.privateKey,0,e.hashAlgorithm,void 0,t),this.authSafe=new Ze({contentType:"1.2.840.113549.1.7.2",content:r.toSchema(!0)})}break;default:throw new Error(`Parameter "integrityMode" has unknown value: ${this.parsedValue.integrityMode}`)}}async parseInternalValues(e,t=Ne(!0)){switch(qe.assert(e,"parameters","object"),e.checkIntegrity===void 0&&(e.checkIntegrity=!0),this.parsedValue={},this.authSafe.contentType){case Ze.DATA:{Pe.assertEmpty(e.password,"password"),this.parsedValue.integrityMode=0,qe.assert(this.authSafe.content,"authSafe.content",z);const n=this.authSafe.content.getValue();if(this.parsedValue.authenticatedSafe=oo.fromBER(n),e.checkIntegrity){if(!this.macData)throw new Error('Absent "macData" value, can not check PKCS#12 data integrity');const r=t.getAlgorithmByOID(this.macData.mac.digestAlgorithm.algorithmId,!0,"digestAlgorithm");if(!await t.verifyDataStampedWithPassword({password:e.password,hashAlgorithm:r.name,salt:ve.toArrayBuffer(this.macData.macSalt.valueBlock.valueHexView),iterationCount:this.macData.iterations||1,contentToVerify:n,signatureToVerify:ve.toArrayBuffer(this.macData.mac.digest.valueBlock.valueHexView)}))throw new Error("Integrity for the PKCS#12 data is broken!")}}break;case Ze.SIGNED_DATA:{this.parsedValue.integrityMode=1;const n=new $t({schema:this.authSafe.content}),r=n.encapContentInfo.eContent;Pe.assert(r,"eContent","cmsSigned.encapContentInfo"),qe.assert(r,"eContent",z);const i=r.getValue();if(this.parsedValue.authenticatedSafe=oo.fromBER(i),!await n.verify({signer:0,checkChain:!1},t))throw new Error("Integrity for the PKCS#12 data is broken!")}break;default:throw new Error(`Incorrect value for "this.authSafe.contentType": ${this.authSafe.contentType}`)}}}ai.CLASS_NAME="PFX";const ql="status",Zr="statusStrings",ei="failInfo",j2=[ql,Zr,ei];var Fb;(function(s){s[s.granted=0]="granted",s[s.grantedWithMods=1]="grantedWithMods",s[s.rejection=2]="rejection",s[s.waiting=3]="waiting",s[s.revocationWarning=4]="revocationWarning",s[s.revocationNotification=5]="revocationNotification"})(Fb||(Fb={}));class $s extends Y{constructor(e={}){super(),this.status=d(e,ql,$s.defaultValues(ql)),Zr in e&&(this.statusStrings=d(e,Zr,$s.defaultValues(Zr))),ei in e&&(this.failInfo=d(e,ei,$s.defaultValues(ei))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ql:return 2;case Zr:return[];case ei:return new Oe;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ql:return t===$s.defaultValues(e);case Zr:return t.length===0;case ei:return t.isEqual($s.defaultValues(e));default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||g,value:[new U({name:t.status||g}),new I({optional:!0,value:[new Ie({name:t.statusStrings||g,value:new ct})]}),new Oe({name:t.failInfo||g,optional:!0})]})}fromSchema(e){X(e,j2);const t=G(e,e,$s.schema({names:{status:ql,statusStrings:Zr,failInfo:ei}}));j.assertSchema(t,this.className);const n=t.result.status;if(n.valueBlock.isHexOnly===!0||n.valueBlock.valueDec<0||n.valueBlock.valueDec>5)throw new Error('PKIStatusInfo "status" has invalid value');this.status=n.valueBlock.valueDec,Zr in t.result&&(this.statusStrings=t.result.statusStrings),ei in t.result&&(this.failInfo=t.result.failInfo)}toSchema(){const e=[];return e.push(new U({value:this.status})),this.statusStrings&&e.push(new I({optional:!0,value:this.statusStrings})),this.failInfo&&e.push(this.failInfo),new I({value:e})}toJSON(){const e={status:this.status};return this.statusStrings&&(e.statusStrings=Array.from(this.statusStrings,t=>t.toJSON())),this.failInfo&&(e.failInfo=this.failInfo.toJSON()),e}}$s.CLASS_NAME="PKIStatusInfo";const Wh="version",qh="messageImprint",Gl="reqPolicy",Yl="nonce",Hn="certReq",Xl="extensions",yo="TimeStampReq",aw=`${yo}.${Wh}`,ow=`${yo}.${qh}`,Zd=`${yo}.${Gl}`,em=`${yo}.${Yl}`,tm=`${yo}.${Hn}`,sm=`${yo}.${Xl}`,J2=[aw,ow,Zd,em,tm,sm];class vs extends Y{constructor(e={}){super(),this.version=d(e,Wh,vs.defaultValues(Wh)),this.messageImprint=d(e,qh,vs.defaultValues(qh)),Gl in e&&(this.reqPolicy=d(e,Gl,vs.defaultValues(Gl))),Yl in e&&(this.nonce=d(e,Yl,vs.defaultValues(Yl))),Hn in e&&(this.certReq=d(e,Hn,vs.defaultValues(Hn))),Xl in e&&(this.extensions=d(e,Xl,vs.defaultValues(Xl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Wh:return 0;case qh:return new Ft;case Gl:return g;case Yl:return new U;case Hn:return!1;case Xl:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Wh:case Gl:case Hn:return t===vs.defaultValues(e);case qh:return Ft.compareWithDefault("hashAlgorithm",t.hashAlgorithm)&&Ft.compareWithDefault("hashedMessage",t.hashedMessage);case Yl:return t.isEqual(vs.defaultValues(e));case Xl:return t.length===0;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||yo,value:[new U({name:t.version||aw}),Ft.schema(t.messageImprint||{names:{blockName:ow}}),new he({name:t.reqPolicy||Zd,optional:!0}),new U({name:t.nonce||em,optional:!0}),new Cn({name:t.certReq||tm,optional:!0}),new V({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ie({name:t.extensions||sm,value:Fe.schema()})]})]})}fromSchema(e){X(e,J2);const t=G(e,e,vs.schema());j.assertSchema(t,this.className),this.version=t.result[aw].valueBlock.valueDec,this.messageImprint=new Ft({schema:t.result[ow]}),Zd in t.result&&(this.reqPolicy=t.result[Zd].valueBlock.toString()),em in t.result&&(this.nonce=t.result[em]),tm in t.result&&(this.certReq=t.result[tm].valueBlock.value),sm in t.result&&(this.extensions=Array.from(t.result[sm],n=>new Fe({schema:n})))}toSchema(){const e=[];return e.push(new U({value:this.version})),e.push(this.messageImprint.toSchema()),this.reqPolicy&&e.push(new he({value:this.reqPolicy})),this.nonce&&e.push(this.nonce),Hn in this&&vs.compareWithDefault(Hn,this.certReq)===!1&&e.push(new Cn({value:this.certReq})),this.extensions&&e.push(new V({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.extensions,t=>t.toSchema())})),new I({value:e})}toJSON(){const e={version:this.version,messageImprint:this.messageImprint.toJSON()};return this.reqPolicy!==void 0&&(e.reqPolicy=this.reqPolicy),this.nonce!==void 0&&(e.nonce=this.nonce.toJSON()),this.certReq!==void 0&&vs.compareWithDefault(Hn,this.certReq)===!1&&(e.certReq=this.certReq),this.extensions&&(e.extensions=Array.from(this.extensions,t=>t.toJSON())),e}}vs.CLASS_NAME="TimeStampReq";const Ql="status",zl="timeStampToken",Ay="TimeStampResp",lw=`${Ay}.${Ql}`,nm=`${Ay}.${zl}`,W2=[lw,nm];class sf extends Y{constructor(e={}){super(),this.status=d(e,Ql,sf.defaultValues(Ql)),zl in e&&(this.timeStampToken=d(e,zl,sf.defaultValues(zl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ql:return new $s;case zl:return new Ze;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ql:return $s.compareWithDefault(Ql,t.status)&&!("statusStrings"in t)&&!("failInfo"in t);case zl:return t.contentType===g&&t.content instanceof Ae;default:return super.defaultValues(e)}}static schema(e={}){const t=d(e,"names",{});return new I({name:t.blockName||Ay,value:[$s.schema(t.status||{names:{blockName:lw}}),Ze.schema(t.timeStampToken||{names:{blockName:nm,optional:!0}})]})}fromSchema(e){X(e,W2);const t=G(e,e,sf.schema());j.assertSchema(t,this.className),this.status=new $s({schema:t.result[lw]}),nm in t.result&&(this.timeStampToken=new Ze({schema:t.result[nm]}))}toSchema(){const e=[];return e.push(this.status.toSchema()),this.timeStampToken&&e.push(this.timeStampToken.toSchema()),new I({value:e})}toJSON(){const e={status:this.status.toJSON()};return this.timeStampToken&&(e.timeStampToken=this.timeStampToken.toJSON()),e}async sign(e,t,n=Ne(!0)){return this.assertContentType(),new $t({schema:this.timeStampToken.content}).sign(e,0,t,void 0,n)}async verify(e={signer:0,trustedCerts:[],data:_t},t=Ne(!0)){return this.assertContentType(),new $t({schema:this.timeStampToken.content}).verify(e,t)}assertContentType(){if(!this.timeStampToken)throw new Error("timeStampToken is absent in TSP response");if(this.timeStampToken.contentType!==Mk)throw new Error(`Wrong format of timeStampToken: ${this.timeStampToken.contentType}`)}}sf.CLASS_NAME="TimeStampResp";function q2(){if(typeof self<"u"){if("crypto"in self){let s="webcrypto";"webkitSubtle"in self.crypto&&(s="safari"),Nb(s,new _m({name:s,crypto}))}}else if(typeof crypto<"u"&&"webcrypto"in crypto){const s="NodeJS ^15",e=crypto.webcrypto;Nb(s,new _m({name:s,crypto:e}))}}q2();const G2=Me(`# issuer distinguished name. It must be same with the DN in the issuer's certificate 
[ca_dn]
CN = common name, C = country name, L = locality name, ST = state or  province name,
STREET = street address, O = organization name, OU = organization unit name,
description = some description, uniqueIdentifier = some uid, dnQualifier = some dnq,
DC = www, DC = xyz, DC = com, UID = user ID

[ca_default]
valid_days=3650,valid_crl_days=365,
output_format=PEM
#output_format=DER

# Usually this option is not used. CA can show or hidden this option to change the subject DN and SAN in the certificate.
[change_dn_san:hidden]
CN = common name, C = country name, L = locality name, ST = state or  province name,
STREET = street address, O = organization name, OU = organization unit name,
description = some description, uniqueIdentifier = some uid, dnQualifier = some dnq,
DC = www, DC = xyz, DC = com, UID = user ID

subjectAltName = email:my@example.com, 
subjectAltName = URI:http://my.example.com/
subjectAltName = DNS:test1.example.com,DNS:test2.example.com
subjectAltName = IP:192.168.7.1,IP:13::17

# by default all certificate will have authorityKeyIdentifier and subjectKeyIdentifier extensions
# extension has critical value means software-consuming certificates must understand its meaning
[ext]
basicConstraints = critical,CA:true,pathlen:3
keyUsage=critical,keyCertSign,cRLSign,digitalSignature,keyEncipherment
extendedKeyUsage = clientAuth,serverAuth,codeSigning

# only sub certificate will have this extension
[authorityInfoAccess]
caIssuers;URI.0=http://abc.def.gh
#caIssuers;URI.1=http://abc1.def2.gh3

[crlDistributionPoints]
URI.0 = http://abc.def.gh`);function xo(s){return String.fromCharCode.apply(null,new Uint8Array(s))}function Qc(s){const e=new ArrayBuffer(s.length),t=new Uint8Array(e);for(let n=0,r=s.length;n<r;n++)t[n]=s.charCodeAt(n);return e}function To(s,e){const t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=[];return s.forEach(r=>{const i=r%16,a=(r-i)/16;n.push(t[a],t[i],e)}),n.join("")}function pr(s){const e=document.createElement("a"),t=URL.createObjectURL(s);e.href=t,e.download=s.name,e.click(),URL.revokeObjectURL(t)}function Y2(s,e,t){const n=new U({valueHex:new Uint8Array(s.match(/.{2}/g).map(a=>parseInt(a,16)))}),r=new ft({value:new Date(e)}),i=[];for(let a=1;a<t.length;a++){const o=parseInt(t[a]);Number.isInteger(o)&&i.push(new Fe({extnID:"2.5.29.21",extnValue:new Ei({value:o}).toBER(!1)}))}return console.log("makeRC:",s,e,t,n,r,i),new hi({userCertificate:n,revocationDate:r,crlEntryExtensions:new ot({extensions:i})})}function X2(s,e){const t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=[];return s.forEach(r=>{const i=r%16,a=(r-i)/16;n.push(t[a],t[i],e)}),n.join("")}function cw(s){const e=s.indexOf(`
subjectAltName`),r=(e>0?s.substring(0,e):s).replace(/,?\n/g,",").split(/,(?=[^,=]+=)/g);console.log("parseDN",s,r);const i=[];return r.forEach(a=>{const o=a.trim().replace(/\s*=\s*/,"=");if(o.startsWith("CN=")){i.push(new kt({type:"2.5.4.3",value:new ct({value:o.substring(3)})}));return}if(o.startsWith("C=")){i.push(new kt({type:"2.5.4.6",value:new ct({value:o.substring(2)})}));return}if(o.startsWith("L=")){i.push(new kt({type:"2.5.4.7",value:new ct({value:o.substring(2)})}));return}if(o.startsWith("ST=")){i.push(new kt({type:"2.5.4.8",value:new ct({value:o.substring(3)})}));return}if(o.startsWith("S=")){i.push(new kt({type:"2.5.4.8",value:new ct({value:o.substring(2)})}));return}if(o.startsWith("STREET=")){i.push(new kt({type:"2.5.4.9",value:new ct({value:o.substring(7)})}));return}if(o.startsWith("O=")){i.push(new kt({type:"2.5.4.10",value:new ct({value:o.substring(2)})}));return}if(o.startsWith("OU=")){i.push(new kt({type:"2.5.4.11",value:new ct({value:o.substring(3)})}));return}if(o.startsWith("description=")){i.push(new kt({type:"2.5.4.13",value:new ct({value:o.substring(12)})}));return}if(o.startsWith("uniqueIdentifier=")){i.push(new kt({type:"2.5.4.45",value:new ct({value:o.substring(16)})}));return}if(o.startsWith("dnQualifier=")){i.push(new kt({type:"2.5.4.46",value:new ct({value:o.substring(12)})}));return}if(o.startsWith("DC=")){i.push(new kt({type:"0.9.2342.19200300.100.1.25",value:new ct({value:o.substring(3)})}));return}if(o.startsWith("UID=")){i.push(new kt({type:"0.9.2342.19200300.100.1.1",value:new ct({value:o.substring(4)})}));return}}),i}function uw(s){let e="";return s.forEach(t=>{switch(t.type){case"2.5.4.3":e+=",CN="+t.value.valueBlock.value;break;case"2.5.4.6":e+=",C="+t.value.valueBlock.value;break;case"2.5.4.7":e+=",L="+t.value.valueBlock.value;break;case"2.5.4.8":e+=",S="+t.value.valueBlock.value;break;case"2.5.4.9":e+=",STREET="+t.value.valueBlock.value;break;case"2.5.4.10":e+=",O="+t.value.valueBlock.value;break;case"2.5.4.11":e+=",OU="+t.value.valueBlock.value;break;case"2.5.4.13":e+=",description="+t.value.valueBlock.value;break;case"2.5.4.45":e+="uniqueIdentifier="+t.value.valueBlock.value;break;case"2.5.4.46":e+=",dnQualifier="+t.value.valueBlock.value;break;case"0.9.2342.19200300.100.1.25":e+=",DC="+t.value.valueBlock.value;break;default:e+=","+t.type+"="+t.value.valueBlock.value;break}}),e.substring(1)}function Q2(s,e){if(console.log("parseIP",s),s.includes(":")){const t=s.split(":").map(i=>parseInt(i,16)),n=t.findIndex(i=>isNaN(i)),r=t.findLastIndex(i=>isNaN(i));if(console.log("ipv6",t,n,r),n>=0)if(n===r&&t.length<8){const i=[0,0,0,0,0,0,0,0];t.splice(n,1,...i.slice(0,9-t.length)),console.log("strs.splice",t,n,...i.slice(0,8-t.length))}else return;if(t.length===8){const i=[];for(let a=0;a<8;a++){const o=t[a]%256;i.push((t[a]-o)/256),i.push(o)}console.log("arr",i),e.push(new Ve({type:7,value:new z({valueHex:new Uint8Array(i).buffer})}))}}else{const t=s.match(/\d+/g).map(n=>parseInt(n));t.length===4&&t[0]<256&&t[1]<256&&t[2]<256&&t[3]<256&&(e.push(new Ve({type:7,value:new z({valueHex:new Uint8Array(t).buffer})})),console.log("ipv4",t))}}function Yk(s){const e=[];s=s.match(new RegExp("(?<=^subjectAltName\\s*=\\s*)(.*)","gm")),s=s?s.join(",")+",":"";const t=s.match(new RegExp("(?<=email:)[^,]*","g")),n=s.match(new RegExp("(?<=URI:)[^,]*","g")),r=s.match(new RegExp("(?<=IP:)[^,]*","g")),i=s.match(new RegExp("(?<=DNS:)[^,]*","g"));return t&&t.forEach(a=>{e.push(new Ve({type:1,value:a}))}),n&&n.forEach(a=>{e.push(new Ve({type:6,value:a}))}),r&&r.forEach(a=>Q2(a,e)),i&&i.forEach(a=>{e.push(new Ve({type:2,value:a}))}),console.log("parseSAN",s,t,n,i),console.log("ips",r),e}function Xk(s){let e="";for(let t=0;t<s.length;t++){const n=s[t];switch(n.type){case 1:e+=`
   RFC822 Name=`+n.value;break;case 2:e+=`
   DNS Name=`+n.value;break;case 6:e+=`
   URL=`+n.value;break;case 7:const r=n.value.valueBlock.valueHexView;r.length===4&&(e+=`
   IP Address=`+r.join(".")),r.length===16&&(e+=`
   IP Address=`+X2(r,"").match(/.{4}/g).join(":"))}}return e}function z2(s){const e=new Date,t=[];let n=e.getTime(),r=0;for(console.log("parseSER",e,n,n.toString(16),t,s);n>0;)r=n%256,t.push(r),n=(n-r)/256;return t.reverse(),t.push(s[1],s[0]),console.log("Uint8Array:",t),new Uint8Array(t)}function Z2(s,e,t){const n=/^\[change_dn_san\s*:\s*show/;if(e.sw=n.test(s),!e.sw)return;const r=new vt({names:Yk(s)}),i=s.indexOf(`
`);t.contav=cw(s.substring(i)),e.condn=uw(t.contav),r.names.length>0?(t.consan=new Fe({extnID:"2.5.29.17",critical:!1,extnValue:r.toSchema().toBER(!1)}),e.consan=Xk(r.names)):(t.consan=null,e.consan=null),console.log("po",e)}const eV={id:"a123",class:"min-h-screen px-4 bg-gradient-to-r from-green-400 to-blue-500"},tV={class:"container mx-auto min-h-screen px-4 py-4 sm:px-0 flex flex-col-reverse md:flex-col"},sV={class:"flex space-x-1 md:space-x-4 rounded-xl bg-blue-900/20 p-1 mt-2 md:mt-0 md:mb-2"},nV=["onClick"],rV=ee("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 24 24"},[ee("path",{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 9h8m-8 4h6m0 5h-1l-5 3v-3H6a3 3 0 0 1-3-3V7a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v4.5M19 22v.01M19 19a2.003 2.003 0 0 0 .914-3.782a1.98 1.98 0 0 0-2.414.483"})],-1),iV=[rV],aV={key:0,class:"flex flex-col gap-3"},oV={class:"bg-black/25 rounded-2xl shadow-lg p-2"},lV={class:"flex gap-4 flex-wrap justify-center"},cV={class:"flex flex-wrap justify-center"},uV={class:"bg-black/25 rounded-2xl shadow-lg p-2"},hV={class:"pt-2"},fV=["placeholder"],dV={class:"flex flex-wrap justify-center"},mV={class:"bg-black/25 rounded-2xl shadow-lg p-2"},gV={class:"pt-2"},pV={class:"flex flex-wrap justify-center"},wV={key:1,class:"flex flex-col gap-3"},yV={class:"bg-black/25 rounded-2xl shadow-lg p-2"},vV={class:"flex flex-wrap justify-center"},bV={key:0},SV={key:1,class:"pl-3 flex gap-4 flex-wrap"},AV={class:"relative bg-black/25 rounded-xl shadow-lg text-xs xl:ml-0"},kV={key:0},EV={class:"overflow-hidden break-normal whitespace-pre-wrap"},CV={class:"px-3 pb-3"},NV={class:"flex flex-wrap justify-center"},IV={key:2,class:"flex flex-col gap-3"},_V={class:"bg-black/25 rounded-2xl shadow-lg p-2"},BV={class:"flex flex-wrap justify-center"},xV={key:0},TV={class:"bg-black/25 rounded-2xl shadow-lg p-2"},RV={class:"mb-1 flex gap-2 flex-wrap"},OV={class:"relative bg-black/25 rounded-xl shadow-lg text-xs xl:ml-0"},VV={class:"overflow-hidden break-normal whitespace-pre-wrap"},PV={class:"px-3"},LV={class:"flex gap-1 mb-2 break-normal whitespace-pre-wrap"},DV={class:"flex gap-1 my-2 break-normal whitespace-pre-wrap"},UV={class:"flex gap-1 my-2 break-normal whitespace-pre-wrap"},MV={class:"flex flex-wrap justify-center"},HV={key:3,class:"flex flex-col gap-1"},$V={class:"w-full relative p-2 z-10 col-span-3 bg-black/20 rounded-xl shadow-lg text-sm whitespace-pre-wrap break-all"},FV={class:"divide-y divide-slate-700"},KV={class:"py-2"},jV=["onClick"],JV={class:"overflow-hidden pl-12 pr-2 break-normal whitespace-pre-wrap"},WV={__name:"app",setup(s){let e=Me(1),t={},n=Me(0),r=Me(""),i=Me("");const{t:a}=tg(),o=[a("b5"),a("b6"),a("b7")],l=Me(o.join(",  ")),c=[a("b5"),a("b7")],u=Me(c.join(",  ")),h=Me(!1),f=Me({signalg:"",signhashalg:"sha256",issuer:"",from:"",to:"",user:"",pubkey:"",keypara:"",aki:"",ski:"",san:"",bc:"",ku:"",eku:"",aia:"",crlp:"",csrdn:"",csrsan:"",condn:"",consan:"",sw:!1}),m={issuertav:null,csrtav:null,contav:null,aki:null,ski:null,san:null,csrsan:null,consan:null,cerexts:[]},S=Me("1"),k=Me(0),C=Yt(()=>{console.log("previewCert",f.value);let p=a("v2",f.value);return f.value.certtype===2&&(p+=a("v3")+f.value.aki+`
`),p+=a("v4")+f.value.ski+`
`,f.value.san.length>0&&(p+=a("v5")+f.value.san+`
`),f.value.eku.length>0&&(p+=a("v6")+f.value.eku+`
`),f.value.aia.length>0&&(p+=a("v7")+f.value.aia+`
`),f.value.crlp.length>0&&(p+=a("v8")+f.value.crlp+`
`),f.value.bc.length>0&&(p+=a("v9")+f.value.bc+`
`),f.value.ku.length>0&&(p+=a("v10")+f.value.ku+`
`),p+=a("v11"),p}),R=Yt(()=>(console.log("clickable",l.value.length,f.value.sw),l.value.length>0?!1:f.value.sw?k.value>0:!0));Sn(k,p=>{console.log("watch pickedDS",p,p==2),p==0&&(f.value.user="",f.value.san=""),p==1&&(f.value.user=f.value.csrdn,f.value.san=f.value.csrsan),p==2&&(f.value.user=f.value.condn,f.value.san=f.value.consan),console.log("preview.value",f.value)});const T=Me([]);let b=Me(!1),w=Me({}),E=Me(!0),N=Me(!0);const L=Me(0),H=Xt();let F;Bw(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register(H.app.baseURL+"sw.js").then(function(){})});async function ne(){switch(S.value){case"1":t=await window.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["sign","verify"]),t.name="RSA";break;case"2":t=await window.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["sign","verify"]),t.name="RSA";break;case"3":t=await window.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]),t.name="ECDSA";break;case"4":t=await window.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-384"},!0,["sign","verify"]),t.name="ECDSA";break}const p=await window.crypto.subtle.exportKey("pkcs8",t.privateKey),v=window.btoa(xo(p));console.log("private key:",v);const x=`-----BEGIN PRIVATE KEY-----
${v}
-----END PRIVATE KEY-----`,O=new File([x],a("m15",1));pr(O)}const ce=Me(!0);function te(p,v,x,O,D){w.value={title:p,description:v,modaltype:x,btn1:O,btn2:D},b.value=!0}function fe(p,v){if(p===2&&(v===1&&F.prompt(),F=null),p===3&&v===1&&xe(),p===4&&v===1){const x=r.value.substring(1,r.value.length-1);r.value=x.replaceAll('""','"')}p===5&&v===1&&downloadCRL(),b.value=!1}async function xe(){if(!("caches"in window)){ze("",3e3);return}const p=await window.caches.keys();""+p.toString();for(let v=0;v<p.length;v++){const x=await window.caches.delete(p[v]);""+p[v]+x}ze("",3e3)}function ge(){document.getElementById("fileElem").click()}function ie(){const p=document.getElementById("fileElem");n.value=1,ke(p.files[0])}let me=null,Q=["Index	Serial Number	Expiration Date	Status	Revocation Date	Distinguished Names"];function ke(p){console.log("readKeys");const v=new FileReader;v.readAsText(p),v.onload=async()=>{if(n.value===1&&(ue(v.result),n.value=0),n.value===2){const x=v.result.indexOf("-----BEGIN CERTIFICATE REQUEST-----")+35,O=v.result.indexOf("-----END CERTIFICATE REQUEST-----");let D=null;if(x>=0&&O>0){const J=v.result.substring(x,O).replaceAll(`
`,"");D=Qc(window.atob(J))}else D=await p.arrayBuffer();const M=fs.fromBER(D);if(await M.verify()===!1){console.log("signresult",!1),ze(a("m8"),6e3);return}const A=await Ne(!0).digest({name:"SHA-1"},M.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex);m.skiext=new Fe({extnID:"2.5.29.14",critical:!1,extnValue:new z({valueHex:A}).toBER(!1)}),m.subjectPublicKeyInfo=M.subjectPublicKeyInfo,m.csrtav=M.subject.typesAndValues,m.csrsan=null,f.value.ski=To(new Uint8Array(A),""),f.value.certtype=f.value.aki.endsWith(f.value.ski)?1:2,f.value.csrdn=uw(M.subject.typesAndValues),f.value.csrsan="";const B=M.attributes.find(W=>W.type==="1.2.840.113549.1.9.14");if(B){const W=new ot({schema:B.values[0]});for(const J of W.extensions)if(J.extnID==="2.5.29.17"){m.csrsan=J;const _=J.parsedValue.altNames;f.value.csrsan=Xk(_),console.log("altNames",_);break}}if(f.value.sw?(k.value=0,f.value.user="",f.value.san=""):(f.value.user=f.value.csrdn,f.value.san=f.value.csrsan),M.subjectPublicKeyInfo.parsedKey.className==="RSAPublicKey"){const W=M.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView,J=M.subjectPublicKeyInfo.parsedKey.modulus.valueBlock.valueHexView;f.value.pubkey=To(W," "),f.value.keypara="05 00, (RSA, "+J.length*8+" Bits)",console.log("mHex",W,W.length,W[0],W[0]%16,(W[0]-W[0]%16)/16,J.length)}if(M.subjectPublicKeyInfo.parsedKey.className==="ECPublicKey"){const W=M.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView,J=M.subjectPublicKeyInfo.parsedKey.namedCurve.replace("-","");f.value.pubkey=To(W," "),h.value?f.value.keypara="ECDH_"+J:f.value.keypara="ECDSA_"+J,console.log("mHex",W,W.length,W[0],W[0]%16,(W[0]-W[0]%16)/16)}o[1]="";const P=o.filter(W=>W.length>0);l.value=P.length>0?P.join(",  "):"",console.log("read CSR",M)}if(n.value===3){m.cerexts=[],h.value=!1,f.value.bc=f.value.ku=f.value.eku=f.value.aia=f.value.crlp="",me=v.result.split(`
*****issued certificate list*****
`);const x=me[0].match(/^(?!\#).*/gm).filter(P=>P.length>0).join(`
`).split(/\n(?=\[)/g);Q=["Index	Serial Number	Expiration Date	Status	Revocation Date	Distinguished Names"],me[1]&&(Q=me[1].split(/\n+/g)),console.log("issuedlist",me[1],Q);const O=p.name.split("."),D=parseInt(O[0]),M=parseInt(O[1]),q=Q.length;se.value.index=D||0,se.value.crlnumber=M||0,se.value.issuedlistnum=q>1?q-1:0,se.value.valid_num=0,se.value.expired_num=0,se.value.revoked_num=0;const y=new Date;Q[0]=Q[0].split(/\t/g);for(let P=1;P<q;P++)Q[P]=Q[P].split(/\t/g),Q[P][3].startsWith("V")&&(y<new Date(Q[P][2])?se.value.valid_num+=1:Q[P][3]="E"+Q[P][3]),Q[P][3].startsWith("R")&&(y<new Date(Q[P][2])?se.value.revoked_num+=1:Q[P][3]="E"+Q[P][3]),Q[P][3].startsWith("E")&&(se.value.expired_num+=1);gt(),console.log("strAB",Q,se);for(let P=0;P<x.length;P++){if(x[P].startsWith("[ca_dn]")){const W=x[P].substring(8);m.issuertav=cw(W),f.value.issuer=uw(m.issuertav)}x[P].startsWith("[ca_default]")&&Ce(1,x[P].substring(13)),x[P].startsWith("[change_dn_san")&&(Z2(x[P],f.value,m),console.log("preview.value",f.value)),x[P].startsWith("[ext]")&&Ce(2,x[P].substring(6)),x[P].startsWith("[crlDistributionPoints]")&&Ce(3,x[P].substring(23)),x[P].startsWith("[authorityInfoAccess]")&&Ce(4,x[P].substring(21))}f.value.sw?(k.value=0,f.value.user="",f.value.san=""):(f.value.user=f.value.csrdn,f.value.san=f.value.csrsan),o[2]=c[1]="";const A=o.filter(P=>P.length>0);l.value=A.length>0?A.join(",  "):"";const B=c.filter(P=>P.length>0);u.value=B.length>0?B.join(",  "):"",console.log("read conf.txt",x,x[0].split(`
`))}if(n.value===4){const x=v.result.indexOf("-----BEGIN CERTIFICATE-----")+27,O=v.result.indexOf("-----END CERTIFICATE-----");if(console.log("reader.result",v.result,x,O),x>=0&&O>0){const M=v.result.substring(x,O).replaceAll(`
`,""),q=Qc(window.atob(M)),y=De.fromBER(q);console.log("read pem.CER",y)}else{const D=await p.arrayBuffer(),M=De.fromBER(D);console.log("read der.CER",M)}}if(n.value===5){const x=v.result.indexOf("-----BEGIN ENCRYPTED PRIVATE KEY-----")+37,O=v.result.indexOf("-----END ENCRYPTED PRIVATE KEY-----"),M=v.result.substring(x,O).replaceAll(`
`,""),q=Qc(window.atob(M)),y=$n.fromBER(q);console.log("key2a",y);const A=Ne(!0),B=new wt({contentEncryptionAlgorithm:y.encryptionAlgorithm,encryptedContent:y.encryptedData}),P=A.decryptEncryptedContentInfo({password:Qc("123456"),encryptedContentInfo:B});console.log("key2c",P);const W=Ns.fromBER(P);console.log("key2d",W)}}}async function ue(p){if(p=p.trim(),!p.startsWith("-----BEGIN PRIVATE KEY-----")){ze(a("m2",1),3e3);return}if(!p.endsWith("-----END PRIVATE KEY-----")){ze(a("m2",2),3e3);return}const x=p.substring(27,p.length-25).replaceAll(`
`,""),O=Qc(window.atob(x)),D=bt(O);let M=null,q=null;const y=new I({name:"name1",value:[new U({name:"name2"}),new I({name:"name3",value:[new he({name:"name4"}),new he({name:"name5"})]}),new z({name:"name6",primitiveSchema:new I({name:"name7",value:[new U({name:"name8"}),new z({name:"name9"}),new V({name:"name10",idBlock:{tagClass:3,tagNumber:1},value:[new Oe({name:"name11"})]})]})})]}),A=new I({name:"name1",value:[new U({name:"name2"}),new I({name:"name3",value:[new he({name:"name4"}),new mt({name:"name5"})]}),new z({name:"name6",primitiveSchema:new I({name:"name7",value:[new U({name:"int1"}),new U({name:"int2"}),new U({name:"int3"}),new U({name:"int4"}),new U({name:"int5"}),new U({name:"int6"}),new U({name:"int7"}),new U({name:"int8"}),new U({name:"int9"})]})})]}),B=G(D.result,D.result,y),P=G(D.result,D.result,A);if(B.verified){console.log("oid",B.result.name4.getValue(),B.result.name5.getValue());let W="",J=!0;if(B.result.name4.getValue()==="1.2.840.10045.2.1"&&B.result.name5.getValue()==="1.2.840.10045.3.1.7"&&(W="P-256",J=!1),B.result.name4.getValue()==="1.2.840.10045.2.1"&&B.result.name5.getValue()==="1.3.132.0.34"&&(W="P-384",J=!1),J){ze(a("m3",1),3e3);return}q=await window.crypto.subtle.importKey("pkcs8",O,{name:"ECDSA",namedCurve:W},!0,["sign"]);const _=new I({value:[new I({value:[B.result.name4,B.result.name5]}),B.result.name11]});console.log("keyB and asn1jspubkey",q,_,_.toBER()),window.btoa(xo(_.toBER())),M=await window.crypto.subtle.importKey("spki",_.toBER(),{name:"ECDSA",namedCurve:W},!0,["verify"]),t.name="ECDSA",console.log("keyA",M)}if(P.verified){console.log("asn2",P,P.result.int2.valueBlock.blockLength);let W=0;if(P.result.name4.getValue()==="1.2.840.113549.1.1.1"&&P.result.int2.valueBlock.blockLength===257&&(W=2048),P.result.name4.getValue()==="1.2.840.113549.1.1.1"&&P.result.int2.valueBlock.blockLength===513&&(W=4096),W===0){ze(a("m3",2),3e3);return}q=await window.crypto.subtle.importKey("pkcs8",O,{name:"RSASSA-PKCS1-v1_5",modulusLength:W,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["sign"]);const J=new I({value:[new I({value:[P.result.name4,P.result.name5]}),new Oe({valueHex:new I({value:[P.result.int2,P.result.int3]}).toBER(!1)})]});console.log("keyB and asn1jspubkey",q,J,J.toBER()),window.btoa(xo(J.toBER())),console.log("keyB",q),M=await window.crypto.subtle.importKey("spki",J.toBER(),{name:"RSASSA-PKCS1-v1_5",modulusLength:W,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["verify"]),t.name="RSA",console.log("keyA",M)}if(M&&q){t.publicKey=M,t.privateKey=q,o[0]=c[0]="";const W=o.filter(Je=>Je.length>0);l.value=W.length>0?W.join(",  "):"";const J=c.filter(Je=>Je.length>0);u.value=J.length>0?J.join(",  "):"",f.value.signalg="sha256"+t.name;const _=Ne(!0);let K=new fs;await K.subjectPublicKeyInfo.importKey(t.publicKey);const we=await _.digest({name:"SHA-1"},K.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex),_e=new jn({keyIdentifier:new z({valueHex:we})});m.akiext=new Fe({extnID:"2.5.29.35",critical:!1,extnValue:_e.toSchema().toBER(!1)}),f.value.aki="KeyID="+To(new Uint8Array(we),""),f.value.certtype=f.value.aki.endsWith(f.value.ski)?1:2,ze(a("m4",1),3e3)}else ze(a("m4",2),3e3)}let ae=Me("");async function oe(){console.log("createCSR",ae.value.length,a("m6",0),a("m6",1),a("m6",2));let p=null;if(ae.value.length===0){te(a("m5",1),a("m6",1),1,a("m7",2));return}else if(p=cw(ae.value),p.length===0){te(a("m5",1),a("m6",2),1,a("m7",2));return}if(t.publicKey===void 0){te(a("m5",2),a("m7",1),1,a("m7",2));return}const v=new fs;v.subject.typesAndValues=p,await v.subjectPublicKeyInfo.importKey(t.publicKey),v.attributes=[];const O=await Ne(!0).digest({name:"SHA-1"},v.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex),D=[new Fe({extnID:"2.5.29.14",critical:!1,extnValue:new z({valueHex:O}).toBER(!1)})],M=Yk(ae.value);if(M.length>0){const B=new vt({names:M});D.push(new Fe({extnID:"2.5.29.17",critical:!1,extnValue:B.toSchema().toBER(!1)}))}v.attributes.push(new et({type:"1.2.840.113549.1.9.14",values:[new ot({extensions:D}).toSchema()]})),await v.sign(t.privateKey,"SHA-256");const q=v.toSchema(!0).toBER();let y=window.btoa(xo(q));const A=new File([`-----BEGIN CERTIFICATE REQUEST-----
${y}
-----END CERTIFICATE REQUEST-----`],a("m15",2));pr(A),console.log("pkcs10raw",q)}let se=Me({crlnumber:1,valid_days:365,valid_crl_days:30,index:0,issuedlistnum:0,valid_num:0,expired_num:0,revoked_num:0,revoked_add:0});function Ce(p,v){if(p===1){const x=v.replaceAll(/\n|\s,/g,"").split(/=|,/);for(let O=0;O<x.length;O++){if(x[O]==="valid_days"){const D=parseInt(x[++O]);Number.isInteger(D)&&(se.value.valid_days=D),f.value.from=new Date().toISOString();const M=new Date;M.setDate(M.getDate()+se.value.valid_days),f.value.to=M.toISOString();continue}if(x[O]==="valid_crl_days"){se.value.valid_crl_days=parseInt(x[++O]);continue}if(x[O]==="output_format"){m.output_format=x[++O];continue}}console.log("parseCADE",p,v)}if(p===2){const x=v.replaceAll(" ","").split(`
`);for(let O=0;O<x.length;O++){if(x[O].startsWith("basicConstraints")){const D=x[O].indexOf("pathlen:"),M=new vi({cA:x[O].indexOf("CA:true")>0});D>0&&(M.pathLenConstraint=parseInt(x[O].substring(D+8))),f.value.bc=(x[O].indexOf("critical")>0?"critical,":"")+(x[O].indexOf("CA:true")>0?"Subject Type=CA,":""),D>0&&(f.value.bc+="Path Length Constraint="+M.pathLenConstraint),m.cerexts.push(new Fe({extnID:"2.5.29.19",critical:x[O].indexOf("critical")>0,extnValue:M.toSchema().toBER(!1),parsedValue:M}));continue}if(x[O].startsWith("keyUsage")){const D=new ArrayBuffer(1),M=new Uint8Array(D);let q=x[O].indexOf("critical")>0?"critical, ":"";x[O].indexOf("keyCertSign")>0&&(M[0]|=4)&&(q+="Certificate Signing, "),x[O].indexOf("cRLSign")>0&&(M[0]|=2)&&(q+="Off-line CRL Signing, CRL Signing,"),x[O].indexOf("digitalSignature")>0&&(M[0]|=128)&&(q+="Digital Signature, "),x[O].indexOf("keyEncipherment")>0?(M[0]|=32,q+="Key Encipherment, ",h.value=!0,f.value.keypara.startsWith("ECDSA")&&(f.value.keypara=f.value.keypara.replace("ECDSA","ECDH"))):(h.value=!1,f.value.keypara.startsWith("ECDH")&&(f.value.keypara=f.value.keypara.replace("ECDH","ECDSA"))),f.value.ku=q+" ("+To(M,"")+")";const y=new Oe({valueHex:D});m.cerexts.push(new Fe({extnID:"2.5.29.15",critical:x[O].indexOf("critical")>0,extnValue:y.toBER(!1),parsedValue:y}));continue}if(x[O].startsWith("extendedKeyUsage")){const D=[];let M=x[O].indexOf("critical")>0?"critical, ":"";x[O].indexOf("clientAuth")>0&&D.push("1.3.6.1.5.5.7.3.2")&&(M+=a("v21")),x[O].indexOf("serverAuth")>0&&D.push("1.3.6.1.5.5.7.3.1")&&(M+=a("v22")),x[O].indexOf("codeSigning")>0&&D.push("1.3.6.1.5.5.7.3.3")&&(M+=a("v23")),f.value.eku=M;const q=new xc({keyPurposes:D});m.cerexts.push(new Fe({extnID:"2.5.29.37",critical:x[O].indexOf("critical")>0,extnValue:q.toSchema().toBER(!1),parsedValue:q}));continue}}console.log("parseCADE",p,v,m.cerexts)}if(p===3){const x=v.replaceAll(" ","").match(new RegExp("(?<=^URI\\.\\d+=)(http.*)","gm"));if(x&&x.length>0){let O="";const D=x.map((q,y)=>(O+=`
   [`+(y+1)+`]CRL Distribution Point
      Distribution Point Name:
      Full Name: URL=`+q,new Jn({distributionPoint:[new Ve({type:6,value:q})]})));f.value.crlp=O;const M=new ho({distributionPoints:D});m.cerexts.push(new Fe({extnID:"2.5.29.31",critical:v.indexOf("critical")>0,extnValue:M.toSchema().toBER(!1),parsedValue:M})),console.log("parseCADE",p,x,M)}}if(p===4){const x=v.replaceAll(" ","").match(new RegExp("(?<=^caIssuers;URI\\.\\d+=)((http|file).*)","gm"));if(x&&x.length>0){let O="";const D=x.map((q,y)=>(O+=`
   [`+(y+1)+`]Authority Info Access
      Access Method=`+a("v24")+"      Alternative Name: URL="+q,new yi({accessMethod:"1.3.6.1.5.5.7.48.2",accessLocation:new Ve({type:6,value:q})})));f.value.aia=O;const M=new fo({accessDescriptions:D});m.cerexts.push(new Fe({extnID:"1.3.6.1.5.5.7.1.1",critical:v.indexOf("critical")>0,extnValue:M.toSchema().toBER(!1),parsedValue:M})),console.log("parseCADE",p,x,M)}}}function nt(){const p=new File([G2.value],"0.0.ca-conf.txt");pr(p)}const Xe=Me("");async function Ke(){console.log("createCER",m);const p=[];f.value.certtype===2&&p.push(m.akiext),p.push(m.skiext);const v=new De;v.version=2,v.serialNumber=new U({valueHex:z2(window.crypto.getRandomValues(new Uint8Array([0,0])))}),v.issuer.typesAndValues=m.issuertav,f.value.sw&&k.value==2?(v.subject.typesAndValues=m.contav,m.consan&&p.push(m.consan)):(v.subject.typesAndValues=m.csrtav,m.csrsan&&p.push(m.csrsan)),v.notBefore.value=new Date;const x=new Date;x.setDate(x.getDate()+se.value.valid_days),v.notAfter.value=x,p.push(...m.cerexts),v.extensions=p,v.subjectPublicKeyInfo=m.subjectPublicKeyInfo,await v.sign(t.privateKey,"SHA-256"),console.log("creatCER","para.value.index:"+se.value.index),se.value.index+=1,se.value.issuedlistnum+=1,se.value.valid_num+=1;const O=To(v.serialNumber.valueBlock.valueHexView,"");Q.push([se.value.index,O,x.toISOString(),"V","",f.value.user]),console.log("issuedlist:"+se.value.index,Q);let D=`
*****issued certificate list*****`;for(let y=0;y<Q.length;y++)D+=`
`+Q[y].join("	");pr(new File([me[0]+D],se.value.index+"."+se.value.crlnumber+".ca-conf.txt"));const M=v.toSchema().toBER(),q=window.btoa(xo(M));if(m.output_format==="DER")pr(new File([M],se.value.index+"."+O+".DER.CER"));else{const y=new File([`-----BEGIN CERTIFICATE-----
${q}
-----END CERTIFICATE-----`],se.value.index+"."+O+".PEM.CER");pr(y)}}const Re=Me(a("m9",[0]));let re=[0,[],[],[],[]];function gt(){console.log("parseCRL",Xe.value),re=[0,[],[],[],[]];let p=a("m9",[re[0]]);if(Xe.value.length>0){const v=Xe.value.replace(/,|\n/g," ").split(/\s+/g).filter(O=>O.length>0);re[0]=v.length;let x=!1;console.log("serials",v,Q);for(let O=0;O<re[0];O++){x=!1;for(let D=0;D<Q.length;D++)if(v[O]===Q[D][1]){Q[D][3].startsWith("E")?re[2].push(v[O]):Q[D][3].startsWith("R")?re[3].push(v[O]):re[4].push(Q[D]),x=!0;break}!x&&re[1].push(v[O])}console.log("abcde",re),p=a("m9",[re[0]]),re[1].length+re[2].length+re[3].length+re[4].length&&(p+=a("m9a")),re[1].length&&(p+=a("m9b",[re[1].length,re[1].join(",")])),re[2].length&&(p+=a("m9c",[re[2].length,re[2].join(",")])),re[3].length&&(p+=a("m9d",[re[3].length,re[3].join(",")])),re[4].length&&(p+=a("m9e",[re[4].length]))}se.value.revoked_add=re[4].length,Re.value=p}async function Vt(){console.log("createCRL");const p=new Date;if(re[4].length>0){if(T.value.length==0){ze(a("m16"),6e3);return}re[4].forEach(y=>{y[3]="R"+T.value.join(""),y[4].length===0&&(y[4]=p.toISOString())&&(se.value.valid_num-=1)})}let v=`
*****issued certificate list*****`;const x=[];se.value.revoked_num=0;for(let y=0;y<Q.length;y++)v+=`
`+Q[y].join("	"),Q[y][3].startsWith("R")&&(x.push(Y2(Q[y][1],Q[y][4],Q[y][3])),se.value.revoked_num+=1);const O=new At;O.version=1,O.issuer.typesAndValues=m.issuertav,O.thisUpdate=new ft({type:0,value:p});const D=new Date;D.setDate(D.getDate()+se.value.valid_crl_days),O.nextUpdate=new ft({type:0,value:D}),O.revokedCertificates=x,se.value.crlnumber+=1,O.crlExtensions=new ot({extensions:[new Fe({extnID:"2.5.29.20",extnValue:new U({value:se.value.crlnumber}).toBER(!1)})]}),pr(new File([me[0]+v],se.value.index+"."+se.value.crlnumber+".ca-conf.txt")),await O.sign(t.privateKey,"SHA-256");const M=O.toSchema(!0).toBER(!1),q=window.btoa(xo(M));pr(new File([`-----BEGIN X509 CRL-----
${q}
-----END X509 CRL-----`],se.value.crlnumber+".CRL"))}function ze(p,v){i.value=p,setTimeout(()=>{i.value="",ce.value=!0},v)}return(p,v)=>{const x=fT,O=AT,D=ET,M=NT,q=CT,y=_T,A=TT,B=DT,P=KT,W=YT,J=tR;return je(),Et(Ut,null,[Z(i).length>0?(je(),pn(x,{key:0,class:xt([Z(ce)?"bg-white dark:bg-gray-800":"bg-red-900 dark:bg-red-900"])},{default:zt(()=>[Le(Be(Z(i)),1)]),_:1},8,["class"])):Ys("",!0),Z(b)?(je(),pn(O,e1({key:1},Z(w),{onSomeEvent:fe}),null,16)):Ys("",!0),ye(D,{rel:"prefetch",href:Z(H).app.baseURL+"manifest-zh.json"},null,8,["href"]),ye(D,{rel:"prefetch",href:Z(H).app.baseURL+"manifest-en.json"},null,8,["href"]),ye(D,{rel:"manifest",href:Z(H).app.baseURL+Z(a)("manifest")},null,8,["href"]),ye(D,{rel:"mask-icon",href:Z(H).app.baseURL+"/digital-ca/img/icons/icon-144.png",color:"#333333"},null,8,["href"]),ye(D,{rel:"apple-touch-icon",href:Z(H).app.baseURL+"/digital-ca/img/icons/icon-144.png"},null,8,["href"]),ye(M,{name:"apple-mobile-web-app-title",content:Z(a)("p0")},null,8,["content"]),ye(M,{name:"apple-mobile-web-app-capable",content:"yes"}),ye(M,{name:"apple-mobile-web-app-status-bar-style",content:"#1976d2"}),ye(q,null,{default:zt(()=>[Le(Be(Z(a)("p0")),1)]),_:1}),ye(M,{"data-rh":"true",property:"og:title",content:Z(a)("p0")},null,8,["content"]),ye(M,{"data-rh":"true",property:"og:type",content:"website"}),ye(M,{"data-rh":"true",property:"og:image",content:Z(H).app.baseURL+"/digital-ca/img/icons/icon-144.png"},null,8,["content"]),ye(D,{rel:"icon",type:"image/x-icon",href:Z(H).app.baseURL+"img/icons/icon-64.png"},null,8,["href"]),ye(M,{name:"theme-color",content:"#1976d2"}),ee("div",eV,[ee("div",tV,[ee("div",sV,[(je(),Et(Ut,null,My(3,_=>ee("button",{key:_,type:"button",class:xt(["w-full rounded-lg py-2.5 text-sm font-medium leading-5 text-black-900","ring-black ring-opacity-25 focus:outline-none focus:ring focus:border-black",Z(e)===_?"text-black ring":"hover:bg-white/[0.12] hover:text-white"]),onClick:K=>pe(e)?e.value=_:e=_},Be(p.$t("p"+_)),11,nV)),64)),ee("button",{onClick:v[0]||(v[0]=_=>pe(e)?e.value=4:e=4),class:xt(["leading-5 ring-black ring-opacity-25 focus:outline-none focus:ring focus:border-black rounded-lg px-4 hover:bg-white/[0.12] stroke-black",Z(e)===4?"ring":"hover:stroke-white"])},iV,2)]),ee("input",{type:"file",id:"fileElem",onChange:ie,class:"hidden"},null,32),Z(e)===1?(je(),Et("div",aV,[ee("div",oV,[ee("p",null,Be(p.$t("p4")),1),ee("div",lV,[ee("div",null,[ls(ee("input",{type:"radio",value:"1","onUpdate:modelValue":v[1]||(v[1]=_=>pe(S)?S.value=_:null)},null,512),[[So,Z(S)]]),Le("RSA:2048")]),ee("div",null,[ls(ee("input",{type:"radio",value:"2","onUpdate:modelValue":v[2]||(v[2]=_=>pe(S)?S.value=_:null)},null,512),[[So,Z(S)]]),Le("RSA:4096")]),ee("div",null,[ls(ee("input",{type:"radio",value:"3","onUpdate:modelValue":v[3]||(v[3]=_=>pe(S)?S.value=_:null)},null,512),[[So,Z(S)]]),Le("ECDSA:P-256")]),ee("div",null,[ls(ee("input",{type:"radio",value:"4","onUpdate:modelValue":v[4]||(v[4]=_=>pe(S)?S.value=_:null)},null,512),[[So,Z(S)]]),Le("ECDSA:P-384")])]),ee("div",cV,[ye(y,{onClick:ne},{default:zt(()=>[Le(Be(p.$t("b1")),1)]),_:1}),ye(A,{onClick:ge,onDrop:v[5]||(v[5]=Hi(_=>(pe(n)?n.value=1:n=1,ke(_.dataTransfer.files[0])),["prevent"])),onDragenter:v[6]||(v[6]=_=>pe(n)?n.value=1:n=1),onDragleave:v[7]||(v[7]=_=>pe(n)?n.value=0:n=0),class:xt({"border-white":Z(n)===1})},{default:zt(()=>[Le(Be(p.$t("b2")),1)]),_:1},8,["class"])])]),ee("div",uV,[ee("p",hV,[Le(Be(p.$t("p5")),1),ye(B,{onClick:v[8]||(v[8]=_=>(pe(e)?e.value=4:e=4,L.value=3))})]),ls(ee("textarea",{"onUpdate:modelValue":v[9]||(v[9]=_=>pe(ae)?ae.value=_:ae=_),placeholder:Z(a)("p5a"),class:"w-full relative p-2 z-10 col-span-3 placeholder:text-slate-800 bg-slate-300 bg-opacity-10 rounded-xl shadow-lg text-xs focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 xl:ml-0",rows:"5"},null,8,fV),[[av,Z(ae)]]),ee("div",dV,[ye(y,{onClick:oe},{default:zt(()=>[Le(Be(p.$t("b3")),1)]),_:1})])]),ee("div",mV,[ee("p",gV,[Le(Be(p.$t("p6")),1),ye(B,{onClick:v[10]||(v[10]=_=>(pe(e)?e.value=4:e=4,L.value=4))})]),ee("div",pV,[ye(y,{onClick:nt},{default:zt(()=>[Le(Be(p.$t("b4")),1)]),_:1})])])])):Ys("",!0),Z(e)===2?(je(),Et("div",wV,[ee("div",yV,[ee("p",null,Be(p.$t("p7")),1),ee("div",vV,[ye(A,{onClick:ge,onDrop:v[11]||(v[11]=Hi(_=>(pe(n)?n.value=1:n=1,ke(_.dataTransfer.files[0])),["prevent"])),onDragenter:v[12]||(v[12]=_=>pe(n)?n.value=1:n=1),onDragleave:v[13]||(v[13]=_=>pe(n)?n.value=0:n=0),class:xt({"border-white":Z(n)===1})},{default:zt(()=>[Le(Be(p.$t("b5")),1)]),_:1},8,["class"]),ye(A,{onClick:ge,onDrop:v[14]||(v[14]=Hi(_=>(pe(n)?n.value=2:n=2,ke(_.dataTransfer.files[0])),["prevent"])),onDragenter:v[15]||(v[15]=_=>pe(n)?n.value=2:n=2),onDragleave:v[16]||(v[16]=_=>pe(n)?n.value=0:n=0),class:xt({"border-white":Z(n)===2})},{default:zt(()=>[Le(Be(p.$t("b6")),1)]),_:1},8,["class"]),ye(A,{onClick:ge,onDrop:v[17]||(v[17]=Hi(_=>(pe(n)?n.value=3:n=3,ke(_.dataTransfer.files[0])),["prevent"])),onDragenter:v[18]||(v[18]=_=>pe(n)?n.value=3:n=3),onDragleave:v[19]||(v[19]=_=>pe(n)?n.value=0:n=0),class:xt({"border-white":Z(n)===3})},{default:zt(()=>[Le(Be(p.$t("b7")),1)]),_:1},8,["class"])]),Z(l).length>0?(je(),Et("p",bV,[ye(P),Le(" "+Be(p.$t("m0"))+Be(Z(l)),1)])):Z(f).sw?(je(),Et("div",SV,[Le(Be(Z(a)("p12"))+" ",1),ee("div",null,[ls(ee("input",{type:"radio",value:"1","onUpdate:modelValue":v[20]||(v[20]=_=>pe(k)?k.value=_:null)},null,512),[[So,Z(k),void 0,{number:!0}]]),Le(Be(Z(a)("p13",1)),1)]),ee("div",null,[ls(ee("input",{type:"radio",value:"2","onUpdate:modelValue":v[21]||(v[21]=_=>pe(k)?k.value=_:null)},null,512),[[So,Z(k),void 0,{number:!0}]]),Le(Be(Z(a)("p13",2)),1)])])):Ys("",!0)]),ee("div",AV,[ee("p",{onClick:v[22]||(v[22]=_=>pe(E)?E.value=!Z(E):E=!Z(E)),class:"p-2 z-0 flex gap-1 text-sm align-middle"},[ye(W,{class:xt(Z(E)?"rotate-90":"rotate-180")},null,8,["class"]),Le(" "+Be(p.$t("p8")),1),Z(l).length==0?(je(),Et("span",kV,Be(p.$t("v0",Z(f).certtype)),1)):Ys("",!0)]),ee("div",{class:xt(["grid transition-all -z-10 duration-700 ease-in-out",Z(E)?"grid-rows-[0fr]":"grid-rows-[1fr]"])},[ee("div",EV,[ee("div",CV,Be(Z(C)),1)])],2)]),ee("div",NV,[ye(y,{clickable:Z(R),onClick:v[23]||(v[23]=_=>Z(R)&&Ke())},{default:zt(()=>[Le(Be(p.$t("b8")),1)]),_:1},8,["clickable"])])])):Ys("",!0),Z(e)===3?(je(),Et("div",IV,[ee("div",_V,[ee("p",null,Be(p.$t("p9")),1),ee("div",BV,[ye(A,{onClick:ge,onDrop:v[24]||(v[24]=Hi(_=>(pe(n)?n.value=1:n=1,ke(_.dataTransfer.files[0])),["prevent"])),onDragenter:v[25]||(v[25]=_=>pe(n)?n.value=1:n=1),onDragleave:v[26]||(v[26]=_=>pe(n)?n.value=0:n=0),class:xt({"border-white":Z(n)===1})},{default:zt(()=>[Le(Be(p.$t("b5")),1)]),_:1},8,["class"]),ye(A,{onClick:ge,onDrop:v[27]||(v[27]=Hi(_=>(pe(n)?n.value=3:n=3,ke(_.dataTransfer.files[0])),["prevent"])),onDragenter:v[28]||(v[28]=_=>pe(n)?n.value=3:n=3),onDragleave:v[29]||(v[29]=_=>pe(n)?n.value=0:n=0),class:xt({"border-white":Z(n)===3})},{default:zt(()=>[Le(Be(p.$t("b7")),1)]),_:1},8,["class"])]),Z(u).length>0?(je(),Et("p",xV,[ye(P),Le(" "+Be(p.$t("m0"))+Be(Z(u)),1)])):Ys("",!0)]),ee("div",TV,[ee("p",null,[Le(Be(p.$t("p10")),1),ye(B,{onClick:v[30]||(v[30]=_=>(pe(e)?e.value=4:e=4,L.value=8))})]),ls(ee("textarea",{"onUpdate:modelValue":v[31]||(v[31]=_=>pe(Xe)?Xe.value=_:null),onBlur:gt,onFocus:v[32]||(v[32]=_=>pe(N)?N.value=!0:N=!0),id:"needtorevoc",class:"w-full relative my-2 p-2 z-10 col-span-3 placeholder:text-slate-800 bg-slate-300 bg-opacity-10 rounded-xl shadow-lg text-xs focus:outline-none focus:border-sky-500 focus:ring-sky-500 focus:ring-1 xl:ml-0",rows:"5"},null,544),[[av,Z(Xe)]]),ee("p",RV,[ee("p",null,Be(p.$t("p11")),1),ee("div",null,[ls(ee("input",{type:"checkbox",value:"0","onUpdate:modelValue":v[33]||(v[33]=_=>pe(T)?T.value=_:null)},null,512),[[bo,Z(T)]]),Le(Be(p.$t("r0")),1)]),ee("div",null,[ls(ee("input",{type:"checkbox",value:"1","onUpdate:modelValue":v[34]||(v[34]=_=>pe(T)?T.value=_:null)},null,512),[[bo,Z(T)]]),Le(Be(p.$t("r1")),1)]),ee("div",null,[ls(ee("input",{type:"checkbox",value:"2","onUpdate:modelValue":v[35]||(v[35]=_=>pe(T)?T.value=_:null)},null,512),[[bo,Z(T)]]),Le(Be(p.$t("r2")),1)]),ee("div",null,[ls(ee("input",{type:"checkbox",value:"3","onUpdate:modelValue":v[36]||(v[36]=_=>pe(T)?T.value=_:null)},null,512),[[bo,Z(T)]]),Le(Be(p.$t("r3")),1)]),ee("div",null,[ls(ee("input",{type:"checkbox",value:"4","onUpdate:modelValue":v[37]||(v[37]=_=>pe(T)?T.value=_:null)},null,512),[[bo,Z(T)]]),Le(Be(p.$t("r4")),1)]),ee("div",null,[ls(ee("input",{type:"checkbox",value:"5","onUpdate:modelValue":v[38]||(v[38]=_=>pe(T)?T.value=_:null)},null,512),[[bo,Z(T)]]),Le(Be(p.$t("r5")),1)])])]),ee("div",OV,[ee("p",{onClick:v[39]||(v[39]=_=>pe(N)?N.value=!Z(N):N=!Z(N)),class:"p-2 z-0 flex gap-1 text-sm align-middle"},[ye(W,{class:xt(Z(N)?"rotate-90":"rotate-180")},null,8,["class"]),Le(" "+Be(p.$t("p14")),1)]),ee("div",{class:xt(["grid transition-all -z-10 duration-700 ease-in-out",Z(N)?"grid-rows-[0fr]":"grid-rows-[1fr]"])},[ee("div",VV,[ee("div",PV,[ee("div",LV,[ye(J),ee("p",null,Be(p.$t("m1",Z(se))),1)]),ee("div",DV,[ye(J),ee("p",null,Be(Z(Re)),1)]),ee("div",UV,[ye(J),ee("p",null,Be(p.$t("m14",[Z(se).revoked_num,Z(se).revoked_add,Z(se).revoked_num+Z(se).revoked_add])),1)])])])],2)]),ee("div",MV,[ye(y,{clickable:Z(u).length===0,onClick:v[40]||(v[40]=_=>Z(u).length===0&&Vt())},{default:zt(()=>[Le(Be(p.$t("b9")),1)]),_:1},8,["clickable"])])])):Ys("",!0),Z(e)===4?(je(),Et("div",HV,[ee("div",$V,[ee("div",FV,[(je(),Et(Ut,null,My(9,_=>ee("div",KV,[ee("p",{onClick:K=>L.value=Z(L)===_?0:_,class:"text-base flex"},[ye(W,{class:xt(Z(L)===_?"rotate-180":"rotate-90")},null,8,["class"]),Le(" "+Be(_+". "+p.$t("q"+_)),1)],8,jV),ee("p",{class:xt(["grid transition-all duration-500 ease-in-out",Z(L)===_?"grid-rows-[1fr]":"grid-rows-[0fr]"])},[ee("div",JV,Be(p.$t("a"+_)),1)],2)])),64))])])])):Ys("",!0)])])],64)}}},qV=WV,GV={__name:"nuxt-error-page",props:{error:Object},setup(s){const t=s.error;(t.stack||"").split(`
`).splice(1).map(h=>({text:h.replace("webpack:/","").replace(".vue",".js").trim(),internal:h.includes("node_modules")&&!h.includes(".cache")||h.includes("internal")||h.includes("new Promise")})).map(h=>`<span class="stack${h.internal?" internal":""}">${h.text}</span>`).join(`
`);const n=Number(t.statusCode||500),r=n===404,i=t.statusMessage??(r?"Page Not Found":"Internal Server Error"),a=t.message||t.toString(),o=void 0,u=r?Uy(()=>Sp(()=>import("./error-404.10e56fb1.js"),["./error-404.10e56fb1.js","./error-404.d6788580.css"],import.meta.url).then(h=>h.default||h)):Uy(()=>Sp(()=>import("./error-500.e1794bc2.js"),["./error-500.e1794bc2.js","./error-500.4f45934a.css"],import.meta.url).then(h=>h.default||h));return(h,f)=>(je(),pn(Z(u),o0(ZS({statusCode:Z(n),statusMessage:Z(i),description:Z(a),stack:Z(o)})),null,16))}},YV=GV,XV={__name:"nuxt-root",setup(s){const e=()=>null,t=st(),n=t.deferHydration(),r=!1;LS(B1,$w()),t.hooks.callHookWith(o=>o.map(l=>l()),"vue:setup");const i=Fw();RS((o,l,c)=>{if(t.hooks.callHook("vue:error",o,l,c).catch(u=>console.error("[nuxt] Error in `vue:error` hook",u)),MI(o)&&(o.fatal||o.unhandled))return t.runWithContext(()=>DI(o)),!1});const a=!1;return(o,l)=>(je(),pn(z0,{onResolve:Z(n)},{default:zt(()=>[Z(i)?(je(),pn(Z(YV),{key:0,error:Z(i)},null,8,["error"])):Z(a)?(je(),pn(Z(e),{key:1,context:Z(a)},null,8,["context"])):Z(r)?(je(),pn(Y0(Z(r)),{key:2})):(je(),pn(Z(qV),{key:3}))]),_:1},8,["onResolve"]))}},Kb=XV;globalThis.$fetch||(globalThis.$fetch=lN.create({baseURL:uN()}));let jb;{let s;jb=async function(){var i,a;if(s)return s;const n=!!((i=window.__NUXT__)!=null&&i.serverRendered||((a=document.getElementById("__NUXT_DATA__"))==null?void 0:a.dataset.ssr)==="true")?vC(Kb):yC(Kb),r=kN({vueApp:n});try{await CN(r,aT)}catch(o){await r.callHook("app:error",o),r.payload.error=r.payload.error||o}try{await r.hooks.callHook("app:created",n),await r.hooks.callHook("app:beforeMount",n),n.mount(HI),await r.hooks.callHook("app:mounted",n),await jm()}catch(o){await r.callHook("app:error",o),r.payload.error=r.payload.error||o}return n},s=jb().catch(e=>{console.error("Error while mounting app:",e)})}export{Le as A,QV as B,zV as C,Oc as _,R1 as a,Av as b,Yt as c,Ii as d,TS as e,eP as f,Pw as g,mo as h,ZV as i,Dw as j,Uw as k,st as l,x1 as m,tP as n,Bw as o,If as p,yI as q,Me as r,je as s,Et as t,_f as u,ee as v,fm as w,Be as x,ye as y,zt as z};
